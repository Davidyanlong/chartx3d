{"version":3,"file":"chartx.js","sources":["../node_modules/mmvis/src/underscore.js","../node_modules/mmvis/src/dataSection.js","../node_modules/mmvis/src/tools.js","../node_modules/mmvis/src/axis.js","../node_modules/mmvis/src/dataFrame.js","../node_modules/mmvis/src/dom.js","../node_modules/mmvis/src/theme.js","../node_modules/mmvis/src/global.js","../node_modules/mmvis/src/color.js","../node_modules/mmvis/src/polar.js","../node_modules/mmvis/src/event/event.js","../node_modules/mmvis/src/event/types.js","../node_modules/mmvis/src/event/manager.js","../node_modules/mmvis/src/event/dispatcher.js","../node_modules/mmvis/src/event/handler.js","../../mmgl/src/core/Events.js","../../mmgl/src/constants.js","../../mmgl/src/maths/Vector4.js","../../mmgl/src/maths/Math.js","../../mmgl/src/maths/Vector3.js","../../mmgl/src/maths/Color.js","../../mmgl/src/maths/Matrix4.js","../../mmgl/src/maths/Box3.js","../../mmgl/src/maths/Sphere.js","../../mmgl/src/maths/Matrix3.js","../../mmgl/src/maths/Plane.js","../../mmgl/src/maths/Frustum.js","../../mmgl/src/renderers/webgl/WebGLExtensions.js","../../mmgl/src/renderers/webgl/WebGLProperties.js","../../mmgl/src/renderers/webgl/WebGLCapabilities.js","../../mmgl/src/renderers/webgl/WebGLUtils.js","../../mmgl/src/renderers/webgl/WebGLState.js","../../mmgl/src/renderers/webgl/WebGLAttributes.js","../../mmgl/src/maths/Vector2.js","../../mmgl/src/core/BufferAttribute.js","../../mmgl/src/core/DirectGeometry.js","../../mmgl/src/core/BufferGeometry.js","../../mmgl/src/renderers/webgl/WebGLGeometries.js","../../mmgl/src/renderers/shaders/UniformsLib.js","../../mmgl/src/renderers/shaders/UniformsUtils.js","../../mmgl/src/renderers/shaders/ShaderChunk.js","../../mmgl/src/renderers/shaders/ShaderLib.js","../../mmgl/src/renderers/webgl/WebGLInfo.js","../../mmgl/src/textures/Texture.js","../../mmgl/src/renderers/webgl/WebGLUniforms.js","../../mmgl/src/renderers/webgl/WebGLShader.js","../../mmgl/src/renderers/webgl/WebGLProgram.js","../../mmgl/src/renderers/webgl/WebGLPrograms.js","../../mmgl/src/renderers/webgl/WebGLRenderList.js","../../mmgl/src/renderers/webgl/WebGLBufferRenderer.js","../../mmgl/src/renderers/webgl/WebGLObjects.js","../../mmgl/src/renderers/webgl/WebGLIndexedBufferRenderer.js","../../mmgl/src/renderers/webgl/WebGLTextures.js","../../mmgl/src/renderers/webgl/WebGLLights.js","../../mmgl/src/renderers/webgl/WebGLRenderStates.js","../../mmgl/src/renderers/WebGLRenderer.js","../../mmgl/src/maths/Quaternion.js","../../mmgl/src/maths/Euler.js","../../mmgl/src/core/Object3D.js","../../mmgl/src/scenes/Scene.js","../../mmgl/src/objects/Group.js","../../mmgl/src/maths/Ray.js","../../mmgl/src/maths/Line3.js","../../mmgl/src/maths/Triangle.js","../../mmgl/src/core/Face3.js","../../mmgl/src/materials/Material.js","../../mmgl/src/materials/MeshBasicMaterial.js","../../mmgl/src/objects/Mesh.js","../../mmgl/src/materials/LineBasicMaterial.js","../../mmgl/src/objects/Line.js","../../mmgl/src/core/InstancedBufferGeometry.js","../../mmgl/src/core/InterleavedBuffer.js","../../mmgl/src/core/InstancedInterleavedBuffer.js","../../mmgl/src/core/InterleavedBufferAttribute.js","../../mmgl/src/geometries/LineSegmentsGeometry.js","../../mmgl/src/geometries/LineGeometry.js","../../mmgl/src/materials/LineMeshMaterial.js","../../mmgl/src/objects/Line2.js","../../mmgl/src/materials/PointsMaterial.js","../../mmgl/src/objects/Points.js","../../mmgl/src/materials/SpriteMaterial.js","../../mmgl/src/objects/Sprite.js","../../mmgl/src/textures/TextTexture.js","../../mmgl/src/objects/TextSprite.js","../../mmgl/src/core/Geometry.js","../../mmgl/src/geometries/CircleGeometry.js","../../mmgl/src/geometries/PlaneGeometry.js","../../mmgl/src/geometries/BoxGeometry.js","../../mmgl/src/geometries/SphereGeometry.js","../../mmgl/src/geometries/CylinderGeometry.js","../../mmgl/src/geometries/DoughnutGeometry.js","../../mmgl/src/extras/Earcut.js","../../mmgl/src/extras/ShapeUtils.js","../../mmgl/src/geometries/ExtrudeGeometry.js","../../mmgl/src/geometries/Geometries.js","../../mmgl/src/materials/MeshLambertMaterial.js","../../mmgl/src/materials/MeshPhongMaterial.js","../../mmgl/src/materials/LineDashedMaterial.js","../../mmgl/src/materials/ShaderMaterial.js","../../mmgl/src/materials/RawShaderMaterial.js","../../mmgl/src/materials/Materials.js","../../mmgl/src/lights/Light.js","../../mmgl/src/lights/SpotLight.js","../../mmgl/src/lights/PointLight.js","../../mmgl/src/lights/DirectionalLight.js","../../mmgl/src/lights/AmbientLight.js","../../mmgl/src/cameras/Camera.js","../../mmgl/src/cameras/PerspectiveCamera.js","../../mmgl/src/cameras/OrthographicCamera.js","../../mmgl/src/core/InstancedBufferAttribute.js","../../mmgl/src/core/Raycaster.js","../../mmgl/src/maths/Spherical.js","../../mmgl/src/extras/core/Curve.js","../../mmgl/src/extras/curves/EllipseCurve.js","../../mmgl/src/extras/curves/ArcCurve.js","../../mmgl/src/extras/curves/CatmullRomCurve3.js","../../mmgl/src/extras/core/Interpolations.js","../../mmgl/src/extras/curves/CubicBezierCurve.js","../../mmgl/src/extras/curves/CubicBezierCurve3.js","../../mmgl/src/extras/curves/LineCurve.js","../../mmgl/src/extras/curves/LineCurve3.js","../../mmgl/src/extras/curves/QuadraticBezierCurve.js","../../mmgl/src/extras/curves/QuadraticBezierCurve3.js","../../mmgl/src/extras/curves/SplineCurve.js","../../mmgl/src/extras/core/CurvePath.js","../../mmgl/src/extras/core/Path.js","../../mmgl/src/extras/core/Shape.js","../../mmgl/src/extras/core/ShapePath.js","../src/framework/framework.js","../src/constants.js","../src/framework/view.js","../src/framework/renderFont.js","../src/framework/primitive.js","../src/framework/application.js","../src/framework/coord/inertial.js","../src/components/Component.js","../src/components/cartesian3dUI/axisLine.js","../src/components/cartesian3dUI/tickLines.js","../src/components/cartesian3dUI/tickTexts.js","../utils/tools.js","../src/components/cartesian3dUI/yAxis.js","../src/components/cartesian3dUI/xAxis.js","../src/components/cartesian3dUI/zAxis.js","../src/components/cartesian3dUI/grid.js","../src/components/cartesian3dUI/index.js","../src/framework/coord/model/axisAttribute.js","../src/framework/coord/cartesian3d.js","../src/framework/OrbitControls.js","../src/framework/interaction.js","../src/chart3d.js","../src/components/coord/box.js","../src/framework/coord/model/polarAttribute.js","../src/framework/coord/cylindrical.js","../src/components/coord/polar3d.js","../src/components/cubeUI/axis.js","../src/components/cubeUI/index.js","../src/components/coord/cube.js","../src/components/graphs/graph.js","../src/components/graphs/bar/index.js","../src/components/graphs/line/index.js","../src/components/graphs/area/index.js","../src/components/graphs/pie/index.js","../src/components/graphs/heatmap/index.js","../src/components/tips/index.js","../src/components/markpoint/index.js","../src/components/legend/index.js","../src/components/theme/index.js","../src/index.js"],"sourcesContent":["var _ = {}\nvar breaker = {};\nvar ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n\n// Create quick reference variables for speed access to core prototypes.\nvar\n  push = ArrayProto.push,\n  slice = ArrayProto.slice,\n  concat = ArrayProto.concat,\n  toString = ObjProto.toString,\n  hasOwnProperty = ObjProto.hasOwnProperty;\n\n// All **ECMAScript 5** native function implementations that we hope to use\n// are declared here.\nvar\n  nativeForEach = ArrayProto.forEach,\n  nativeMap = ArrayProto.map,\n  nativeReduce = ArrayProto.reduce,\n  nativeReduceRight = ArrayProto.reduceRight,\n  nativeFilter = ArrayProto.filter,\n  nativeEvery = ArrayProto.every,\n  nativeSome = ArrayProto.some,\n  nativeIndexOf = ArrayProto.indexOf,\n  nativeLastIndexOf = ArrayProto.lastIndexOf,\n  nativeIsArray = Array.isArray,\n  nativeKeys = Object.keys,\n  nativeBind = FuncProto.bind;\n\n\nvar shallowProperty = function (key) {\n  return function (obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n};\nvar MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\nvar getLength = shallowProperty('length');\nvar isArrayLike = function (collection) {\n  var length = getLength(collection);\n  return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n};\n\n\n\n_.values = function (obj) {\n  var keys = _.keys(obj);\n  var length = keys.length;\n  var values = new Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[keys[i]];\n  }\n  return values;\n};\n\n_.keys = nativeKeys || function (obj) {\n  if (obj !== Object(obj)) throw new TypeError('Invalid object');\n  var keys = [];\n  for (var key in obj) if (_.has(obj, key)) keys.push(key);\n  return keys;\n};\n\n_.has = function (obj, key) {\n  return hasOwnProperty.call(obj, key);\n};\n\nvar each = _.each = _.forEach = function (obj, iterator, context) {\n  if (obj == null) return;\n  if (nativeForEach && obj.forEach === nativeForEach) {\n    obj.forEach(iterator, context);\n  } else if (obj.length === +obj.length) {\n    for (var i = 0, length = obj.length; i < length; i++) {\n      if (iterator.call(context, obj[i], i, obj) === breaker) return;\n    }\n  } else {\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) return;\n    }\n  }\n};\n\n_.compact = function (array) {\n  return _.filter(array, _.identity);\n};\n\n_.filter = _.select = function (obj, iterator, context) {\n  var results = [];\n  if (obj == null) return results;\n  if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);\n  each(obj, function (value, index, list) {\n    if (iterator.call(context, value, index, list)) results.push(value);\n  });\n  return results;\n};\n\neach(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function (name) {\n  _['is' + name] = function (obj) {\n    return toString.call(obj) == '[object ' + name + ']';\n  };\n});\n\n//if (!_.isArguments(arguments)) {\n_.isArguments = function (obj) {\n  return !!(obj && _.has(obj, 'callee'));\n};\n//}\n\nif (typeof (/./) !== 'function') {\n  _.isFunction = function (obj) {\n    return typeof obj === 'function';\n  };\n};\n\n_.isFinite = function (obj) {\n  return isFinite(obj) && !isNaN(parseFloat(obj));\n};\n\n_.isNaN = function (obj) {\n  return _.isNumber(obj) && obj != +obj;\n};\n\n_.isBoolean = function (obj) {\n  return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\n};\n\n_.isNull = function (obj) {\n  return obj === null;\n};\n\n_.isEmpty = function (obj) {\n  if (obj == null) return true;\n  if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;\n  for (var key in obj) if (_.has(obj, key)) return false;\n  return true;\n};\n\n_.isElement = function (obj) {\n  return !!(obj && obj.nodeType === 1);\n};\n\n_.isArray = nativeIsArray || function (obj) {\n  return toString.call(obj) == '[object Array]';\n};\n\n_.isObject = function (obj) {\n  return obj === Object(obj);\n};\n\n_.identity = function (value) {\n  return value;\n};\n\n_.indexOf = function (array, item, isSorted) {\n  if (array == null) return -1;\n  var i = 0, length = array.length;\n  if (isSorted) {\n    if (typeof isSorted == 'number') {\n      i = (isSorted < 0 ? Math.max(0, length + isSorted) : isSorted);\n    } else {\n      i = _.sortedIndex(array, item);\n      return array[i] === item ? i : -1;\n    }\n  }\n  if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);\n  for (; i < length; i++) if (array[i] === item) return i;\n  return -1;\n};\n\n_.isWindow = function (obj) {\n  return obj != null && obj == obj.window;\n};\n\n// Internal implementation of a recursive `flatten` function.\nvar flatten = function (input, shallow, output) {\n  if (shallow && _.every(input, _.isArray)) {\n    return concat.apply(output, input);\n  }\n  each(input, function (value) {\n    if (_.isArray(value) || _.isArguments(value)) {\n      shallow ? push.apply(output, value) : flatten(value, shallow, output);\n    } else {\n      output.push(value);\n    }\n  });\n  return output;\n};\n\n// Flatten out an array, either recursively (by default), or just one level.\n_.flatten = function (array, shallow) {\n  return flatten(array, shallow, []);\n};\n\n_.every = _.all = function (obj, iterator, context) {\n  iterator || (iterator = _.identity);\n  var result = true;\n  if (obj == null) return result;\n  if (nativeEvery && obj.every === nativeEvery) return obj.every(iterator, context);\n  each(obj, function (value, index, list) {\n    if (!(result = result && iterator.call(context, value, index, list))) return breaker;\n  });\n  return !!result;\n};\n\n\n\n\n\n\n// Return the minimum element (or element-based computation).\n_.min = function (obj, iterator, context) {\n  if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n    return Math.min.apply(Math, obj);\n  }\n  if (!iterator && _.isEmpty(obj)) return Infinity;\n  var result = { computed: Infinity, value: Infinity };\n  each(obj, function (value, index, list) {\n    var computed = iterator ? iterator.call(context, value, index, list) : value;\n    computed < result.computed && (result = { value: value, computed: computed });\n  });\n  return result.value;\n};\n// Return the maximum element or (element-based computation).\n// Can't optimize arrays of integers longer than 65,535 elements.\n// See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)\n_.max = function (obj, iterator, context) {\n  if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n    return Math.max.apply(Math, obj);\n  }\n  if (!iterator && _.isEmpty(obj)) return -Infinity;\n  var result = { computed: -Infinity, value: -Infinity };\n  each(obj, function (value, index, list) {\n    var computed = iterator ? iterator.call(context, value, index, list) : value;\n    computed > result.computed && (result = { value: value, computed: computed });\n  });\n  return result.value;\n};\n\n// Return the first value which passes a truth test. Aliased as `detect`.\n_.find = _.detect = function (obj, iterator, context) {\n  var result;\n  any(obj, function (value, index, list) {\n    if (iterator.call(context, value, index, list)) {\n      result = value;\n      return true;\n    }\n  });\n  return result;\n};\n// Determine if at least one element in the object matches a truth test.\n// Delegates to **ECMAScript 5**'s native `some` if available.\n// Aliased as `any`.\nvar any = _.some = _.any = function (obj, iterator, context) {\n  iterator || (iterator = _.identity);\n  var result = false;\n  if (obj == null) return result;\n  if (nativeSome && obj.some === nativeSome) return obj.some(iterator, context);\n  each(obj, function (value, index, list) {\n    if (result || (result = iterator.call(context, value, index, list))) return breaker;\n  });\n  return !!result;\n};\n// Return a version of the array that does not contain the specified value(s).\n_.without = function (array) {\n  return _.difference(array, slice.call(arguments, 1));\n};\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\n_.difference = function (array) {\n  var rest = concat.apply(ArrayProto, slice.call(arguments, 1));\n  return _.filter(array, function (value) { return !_.contains(rest, value); });\n};\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// Aliased as `unique`.\n_.uniq = _.unique = function (array, isSorted, iterator, context) {\n  if (_.isFunction(isSorted)) {\n    context = iterator;\n    iterator = isSorted;\n    isSorted = false;\n  }\n  var initial = iterator ? _.map(array, iterator, context) : array;\n  var results = [];\n  var seen = [];\n  each(initial, function (value, index) {\n    if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {\n      seen.push(value);\n      results.push(array[index]);\n    }\n  });\n  return results;\n};\n// Return the results of applying the iterator to each element.\n// Delegates to **ECMAScript 5**'s native `map` if available.\n_.map = _.collect = function (obj, iterator, context) {\n  var results = [];\n  if (obj == null) return results;\n  if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\n  each(obj, function (value, index, list) {\n    results.push(iterator.call(context, value, index, list));\n  });\n  return results;\n};\n// Determine if the array or object contains a given value (using `===`).\n// Aliased as `include`.\n_.contains = _.include = function (obj, target) {\n  if (obj == null) return false;\n  if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\n  return any(obj, function (value) {\n    return value === target;\n  });\n};\n\n// Convenience version of a common use case of `map`: fetching a property.\n_.pluck = function (obj, key) {\n  return _.map(obj, function (value) { return value[key]; });\n};\n\n// Return a random integer between min and max (inclusive).\n_.random = function (min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n};\n\n// Shuffle a collection.\n_.shuffle = function (obj) {\n  return _.sample(obj, Infinity);\n};\n\n_.sample = function (obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    return obj[_.random(obj.length - 1)];\n  }\n  var sample = isArrayLike(obj) ? _.clone(obj) : _.values(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = _.random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n};\n\n\n\n\n\n/**\n*\n*如果是深度extend，第一个参数就设置为true\n*/\n_.extend = function () {\n  var options, name, src, copy,\n    target = arguments[0] || {},\n    i = 1,\n    length = arguments.length,\n    deep = false;\n  if (typeof target === \"boolean\") {\n    deep = target;\n    target = arguments[1] || {};\n    i = 2;\n  };\n  if (typeof target !== \"object\" && !_.isFunction(target)) {\n    target = {};\n  };\n  if (length === i) {\n    target = this;\n    --i;\n  };\n  for (; i < length; i++) {\n    if ((options = arguments[i]) != null) {\n      for (name in options) {\n        src = target[name];\n        copy = options[name];\n        if (target === copy || copy === undefined) {\n          continue;\n        };\n\n        //if( deep && copy && _.isObject( copy ) &&  && !_.isArray( copy ) && !_.isFunction( copy ) ){\n        if (deep && copy && _.isObject(copy) && copy.constructor === Object) {\n          target[name] = _.extend(deep, src, copy);\n        } else {\n          target[name] = copy;\n        };\n      }\n    }\n  }\n  return target;\n};\n\n_.clone = function (obj) {\n  if (!_.isObject(obj)) return obj;\n  return _.isArray(obj) ? obj.slice() : _.extend(true, {}, obj);\n};\n\n//********补存一些数学常用方法,暂放在这里文件下,后期多了单独成立一个类库  */\n// compute euclidian modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\n_.euclideanModulo = (n, m) => {\n  return ((n % m) + m) % m;\n};\n\n_.DEG2RAD = Math.PI / 180;\n_.RAD2DEG = 180 / Math.PI;\n\n_.degToRad = (degrees) => {\n  return degrees * _.DEG2RAD;\n};\n\n_.radToDeg = (radians) => {\n  return radians * _.RAD2DEG;\n};\n\nexport default _;","import _ from \"./underscore\"\n\nfunction normalizeTickInterval(interval, magnitude) {\n    var normalized, i;\n    // var multiples = [1, 2, 2.5, 5, 10];\n    var multiples = [1, 2, 5, 10];\n    // round to a tenfold of 1, 2, 2.5 or 5\n    normalized = interval / magnitude;\n\n    // normalize the interval to the nearest multiple\n    for (var i = 0; i < multiples.length; i++) {\n        interval = multiples[i];\n        if (normalized <= (multiples[i] + (multiples[i + 1] || multiples[i])) / 2) {\n            break;\n        }\n    }\n\n    // multiply back to the correct magnitude\n    interval *= magnitude;\n\n    return interval;\n}\n\nfunction correctFloat(num) {\n    return parseFloat(\n        num.toPrecision(14));\n}\n\nfunction getLinearTickPositions(arr,$maxPart,$cfg) {\n\n    arr = _.without( arr , undefined , null , \"\" );\n    \n\tvar scale = $cfg && $cfg.scale ? parseFloat($cfg.scale) :1\n\t//返回的数组中的值 是否都为整数(思霏)  防止返回[8, 8.2, 8.4, 8.6, 8.8, 9]   应该返回[8, 9]\n\tvar isInt = $cfg && $cfg.isInt ? 1 : 0 \n\n\tif(isNaN(scale)){\n\t\tscale = 1\n\t};\n\n    var max = _.max(arr);\n    var initMax = max\n    max *= scale\n    var min = _.min(arr); \n\n    if(min==max){\n    \tif(max > 0){\n    \t\tmin = 0;\n            return [ min , max ];\n    \t\t// min= Math.round(max/2);\n    \t} else if(max < 0){\n            return [ max , 0 ];\n    \t\t//min = max*2;\n    \t} else {\n            max = 1;\n            return [0 , max];\n        }\n    }\n\n    \n\n    var length = max - min;\n    if (length) {\n    \tvar tempmin = min //保证min>0的时候不会出现负数\n    \tmin -= length * 0.05;\n        // S.log(min +\":\"+ tempmin)\n        if(min<0 && tempmin>=0){\n        \tmin=0\n        }\n        max += length * 0.05;\n    }\n    \n    var tickInterval = (max - min) * 0.3;//72 / 365;\n    var magnitude = Math.pow(10, Math.floor(Math.log(tickInterval) / Math.LN10));\n\n    tickInterval = normalizeTickInterval(tickInterval, magnitude);\n    if(isInt){\n    \ttickInterval = Math.ceil(tickInterval)\n    }\n\n    var pos,\n        lastPos,\n        roundedMin = correctFloat(Math.floor(min / tickInterval) * tickInterval),\n        roundedMax = correctFloat(Math.ceil(max / tickInterval) * tickInterval),\n        tickPositions = [];\n\n    // Populate the intermediate values\n    pos = roundedMin;\n    while (pos <= roundedMax) {\n\n        // Place the tick on the rounded value\n        tickPositions.push(pos);\n\n        // Always add the raw tickInterval, not the corrected one.\n        pos = correctFloat(pos + tickInterval) \n\n        // If the interval is not big enough in the current min - max range to actually increase\n        // the loop variable, we need to break out to prevent endless loop. Issue #619\n        if (pos === lastPos) {\n            break;\n        }\n\n        // Record the last value\n        lastPos = pos;\n    }\n    if(tickPositions.length >= 3){\n    \tif(tickPositions[tickPositions.length - 2] >= initMax){\n\t\t\ttickPositions.pop()\n\t\t}\n    }\n    return tickPositions;\n}\n\nvar dataSection  = {\n\tsection:function($arr,$maxPart,$cfg){\n        return _.uniq( getLinearTickPositions($arr,$maxPart,$cfg));\n\t}\n};\n\nexport default dataSection","import _ from \"./underscore\";\n\nlet cloneOptions = (opt) => {\n    return _.clone(opt);\n};\n\nlet cloneData = (data) => {\n    return JSON.parse(JSON.stringify(data));\n};\n\nlet is3dOpt = (opt) => {\n    var chartx3dCoordTypes = [\"box\", \"polar3d\",\"cube\"];\n    return opt.coord && opt.coord.type && chartx3dCoordTypes.indexOf(opt.coord.type) > -1;\n};\n\nlet getDefaultProps = ( dProps, target={} ) => {\n    for( var p in dProps ){\n        if( !!p.indexOf( \"_\" ) ){\n            if( !dProps[ p ] || !dProps[ p ].propertys ){\n                //如果这个属性没有子属性了，那么就说明这个已经是叶子节点了\n                if( _.isObject( dProps[ p ] ) && !_.isFunction(dProps[ p ]) && !_.isArray(dProps[ p ]) ){\n                    target[ p ] = dProps[ p ].default;\n                } else {\n                    target[ p ] = dProps[ p ];\n                };\n            } else {\n                target[ p ] = {};\n                getDefaultProps( dProps[ p ].propertys, target[ p ] );\n            }\n        };\n    }\n    return target;\n};\n\nexport { cloneOptions, cloneData, is3dOpt, getDefaultProps }","//TODO 所有的get xxx OfVal 在非proportion下面如果数据有相同的情况，就会有风险\nimport _ from \"./underscore\"\nimport dataSection from \"./dataSection\"\nimport {getDefaultProps} from \"./tools\"\n\nexport default class axis {\n    static defaultProps = {\n        layoutType : {\n            detail : '布局方式',\n            default: 'proportion'\n        },\n        dataSection : {\n            detail : '轴数据集',\n            default: []\n        },\n        sectionHandler : {\n            detail : '自定义dataSection的计算公式',\n            default: null\n        },\n        waterLine : {\n            detail: '水位线',\n            default: null,\n            documentation : '水位data，需要混入 计算 dataSection， 如果有设置waterLine， dataSection的最高水位不会低于这个值'\n        },\n        middleweight : {\n            detail : '区间等分线',\n            default: null,\n            documentation: '如果middleweight有设置的话 dataSectionGroup 为被middleweight分割出来的n个数组>..[ [0,50 , 100],[100,500,1000] ]'\n        },\n        symmetric : {\n            detail : '自动正负对称',\n            default: false,\n            documentation: 'proportion下，是否需要设置数据为正负对称的数据，比如 [ 0,5,10 ] = > [ -10, 0 10 ]，象限坐标系的时候需要'\n        },\n        origin : {\n            detail : '轴的起源值',\n            default: null,\n            documentation: '\\\n                1，如果数据中又正数和负数，则默认为0 <br />\\\n                2，如果dataSection最小值小于0，则baseNumber为最小值<br />\\\n                3，如果dataSection最大值大于0，则baseNumber为最大值<br />\\\n                4，也可以由用户在第2、3种情况下强制配置为0，则section会补充满从0开始的刻度值\\\n            '\n        },\n        sort : {\n            detail : '排序',\n            default: null\n        },\n        posParseToInt: {\n            detail : '是否位置计算取整',\n            default: false,\n            documentation: '比如在柱状图中，有得时候需要高精度的能间隔1px的柱子，那么x轴的计算也必须要都是整除的'\n        }\n    }\n\n    constructor(opt, dataOrg) {\n        //源数据\n        //这个是一个一定会有两层数组的数据结构，是一个标准的dataFrame数据\n        // [ \n        //    [   \n        //        [1,2,3],  \n        //        [1,2,3]    //这样有堆叠的数据只会出现在proportion的axis里，至少目前是这样\n        //    ] \n        //   ,[    \n        //        [1,2,3] \n        //    ]   \n        // ]\n        this._opt = _.clone(opt);\n        this.dataOrg = dataOrg || [];\n        \n        this._dataSectionLayout = []; //和dataSection一一对应的，每个值的pos，//get xxx OfPos的时候，要先来这里做一次寻找\n\n        //轴总长\n        this._axisLength = 1;\n        this._cellCount = null;\n        this._cellLength = null; //数据变动的时候要置空\n\n        //默认的 dataSectionGroup = [ dataSection ], dataSection 其实就是 dataSectionGroup 去重后的一维版本\n        this.dataSectionGroup = [];\n\n        this.originPos = 0; //value为 origin 对应的pos位置\n        this._originTrans = 0;//当设置的 origin 和datasection的min不同的时候，\n\n        //min,max不需要外面配置，没意义\n        this._min = null;\n        this._max = null;\n\n        _.extend( true, this, getDefaultProps( axis.defaultProps ), opt ); \n    }\n\n    resetDataOrg(dataOrg) {\n        //配置和数据变化\n\n        this.dataSection = [];\n        this.dataSectionGroup = [];\n\n        this.dataOrg = dataOrg;\n\n        this._cellCount = null;\n        this._cellLength = null;\n\n    }\n\n    setAxisLength(length) {\n        this._axisLength = length;\n        this.calculateProps();\n    }\n\n    calculateProps() {\n\n        var me = this;\n\n        if (this.layoutType == \"proportion\") {\n\n            if (this._min == null) {\n                this._min = _.min(this.dataSection);\n            };\n            if (this._max == null) {\n                this._max = _.max(this.dataSection);\n            };\n\n            //默认情况下 origin 就是datasection的最小值\n            //如果用户设置了origin，那么就已用户的设置为准\n            if (!(\"origin\" in this._opt)) {\n                this.origin = 0;//this.dataSection[0];//_.min( this.dataSection );\n                if (_.max(this.dataSection) < 0) {\n                    this.origin = _.max(this.dataSection);\n                };\n                if (_.min(this.dataSection) > 0) {\n                    this.origin = _.min(this.dataSection);\n                };\n            };\n\n            this._originTrans = this._getOriginTrans(this.origin);\n            this.originPos = this.getPosOfVal(this.origin);\n\n        };\n\n\n\n        //get xxx OfPos的时候，要先来这里做一次寻找\n        this._dataSectionLayout = [];\n        _.each(this.dataSection, function (val, i) {\n\n            var ind = i;\n            if (me.layoutType == \"proportion\") {\n                ind = me.getIndexOfVal(val);\n            };\n\n            var pos = parseInt(me.getPosOf({\n                ind: i,\n                val: val\n            }), 10);\n\n            me._dataSectionLayout.push({\n                val: val,\n                ind: ind,\n                pos: pos\n            });\n\n        });\n\n    }\n    getDataSection() {\n        //对外返回的dataSection\n        return this.dataSection;\n    }\n    setDataSection(_dataSection) {\n        var me = this;\n\n        //如果用户没有配置dataSection，或者用户传了，但是传了个空数组，则自己组装dataSection\n        if (_.isEmpty(_dataSection) && _.isEmpty(this._opt.dataSection)) {\n            if (this.layoutType == \"proportion\") {\n\n                var arr = this._getDataSection();\n\n                if (\"origin\" in me._opt) {\n                    arr.push(me._opt.origin);\n                };\n\n                if (arr.length == 1) {\n                    arr.push(arr[0] * .5);\n                };\n                \n                if (this.waterLine) {\n                    arr.push(this.waterLine);\n                };\n\n                if (this.symmetric) {\n                    //如果需要处理为对称数据\n                    var _min = _.min(arr);\n                    var _max = _.max(arr);\n                    if (Math.abs(_min) > Math.abs(_max)) {\n                        arr.push(Math.abs(_min));\n                    } else {\n                        arr.push(-Math.abs(_max));\n                    };\n                };\n\n                for (var ai = 0, al = arr.length; ai < al; ai++) {\n                    arr[ai] = Number(arr[ai]);\n                    if (isNaN(arr[ai])) {\n                        arr.splice(ai, 1);\n                        ai--;\n                        al--;\n                    };\n                };\n\n                if( _.isFunction( this.sectionHandler ) ){\n                    this.dataSection = this.sectionHandler( arr );\n                };\n\n                if( !this.dataSection || !this.dataSection.length ){\n                    this.dataSection = dataSection.section(arr, 3);\n                };\n\n                if (this.symmetric) {\n                    //可能得到的区间是偶数， 非对称，强行补上\n                    var _min = _.min(this.dataSection);\n                    var _max = _.max(this.dataSection);\n                    if (Math.abs(_min) > Math.abs(_max)) {\n                        this.dataSection.push(Math.abs(_min));\n                    } else {\n                        this.dataSection.unshift(-Math.abs(_max));\n                    };\n                };\n\n                //如果还是0\n                if (this.dataSection.length == 0) {\n                    this.dataSection = [0];\n                };\n\n                //如果有 middleweight 设置，就会重新设置dataSectionGroup\n                this.dataSectionGroup = [_.clone(this.dataSection)];\n\n                this._middleweight(); //如果有middleweight配置，需要根据配置来重新矫正下datasection\n\n                this._sort();\n\n            } else {\n\n                //非proportion 也就是 rule peak 模式下面\n                this.dataSection = _.flatten(this.dataOrg);//this._getDataSection();\n                this.dataSectionGroup = [this.dataSection];\n\n            };\n        } else {\n            this.dataSection = _dataSection || this._opt.dataSection;\n            this.dataSectionGroup = [this.dataSection];\n        };\n\n    }\n    _getDataSection() {\n        //如果有堆叠，比如[ [\"uv\",\"pv\"], \"click\" ]\n        //那么这个 this.dataOrg， 也是个对应的结构\n        //vLen就会等于2\n        var vLen = 1;\n\n        _.each(this.dataOrg, function (arr) {\n            vLen = Math.max(arr.length, vLen);\n        });\n\n        if (vLen == 1) {\n            return this._oneDimensional();\n        };\n        if (vLen > 1) {\n            return this._twoDimensional();\n        };\n\n    }\n    _oneDimensional() {\n        var arr = _.flatten(this.dataOrg); //_.flatten( data.org );\n\n        for (var i = 0, il = arr.length; i < il; i++) {\n            arr[i] = arr[i] || 0;\n        };\n\n        return arr;\n    }\n    //二维的yAxis设置，肯定是堆叠的比如柱状图，后续也会做堆叠的折线图， 就是面积图\n    _twoDimensional() {\n        var d = this.dataOrg;\n        var arr = [];\n        var min;\n        _.each(d, function (d, i) {\n            if (!d.length) {\n                return\n            };\n\n            //有数据的情况下 \n            if (!_.isArray(d[0])) {\n                arr.push(d);\n                return;\n            };\n\n            var varr = [];\n            var len = d[0].length;\n            var vLen = d.length;\n\n            for (var i = 0; i < len; i++) {\n                var up_count = 0;\n                var up_i = 0;\n\n                var down_count = 0;\n                var down_i = 0;\n\n                for (var ii = 0; ii < vLen; ii++) {\n\n                    var _val = d[ii][i];\n                    if (!_val && _val !== 0) {\n                        continue;\n                    };\n\n                    min == undefined && (min = _val)\n                    min = Math.min(min, _val);\n\n                    if (_val >= 0) {\n                        up_count += _val;\n                        up_i++\n                    } else {\n                        down_count += _val;\n                        down_i++\n                    }\n                }\n                up_i && varr.push(up_count);\n                down_i && varr.push(down_count);\n            };\n            arr.push(varr);\n        });\n        arr.push(min);\n        return _.flatten(arr);\n    }\n\n    //val 要被push到datasection 中去的 值\n    //主要是用在markline等组件中，当自己的y值超出了yaxis的范围\n    setWaterLine(val) {\n        if (val <= this.waterLine) return;\n        this.waterLine = val;\n        if (val < _.min(this.dataSection) || val > _.max(this.dataSection)) {\n            //waterLine不再当前section的区间内，需要重新计算整个datasection    \n            this.setDataSection();\n            this.calculateProps();\n        };\n    }\n\n    _sort() {\n        if (this.sort) {\n            var sort = this._getSortType();\n            if (sort == \"desc\") {\n\n                this.dataSection.reverse();\n\n                //dataSectionGroup 从里到外全部都要做一次 reverse， 这样就可以对应上 dataSection.reverse()\n                _.each(this.dataSectionGroup, function (dsg, i) {\n                    dsg.reverse();\n                });\n                this.dataSectionGroup.reverse();\n                //dataSectionGroup reverse end\n            };\n        };\n    }\n\n    _getSortType() {\n        var _sort;\n        if (_.isString(this.sort)) {\n            _sort = this.sort;\n        }\n        if (!_sort) {\n            _sort = \"asc\";\n        }\n        return _sort;\n    }\n\n    _middleweight() {\n        if (this.middleweight) {\n            //支持多个量级的设置\n\n            if (!_.isArray(this.middleweight)) {\n                this.middleweight = [this.middleweight];\n            };\n\n            //拿到dataSection中的min和 max 后，用middleweight数据重新设置一遍dataSection\n            var dMin = _.min(this.dataSection);\n            var dMax = _.max(this.dataSection);\n            var newDS = [dMin];\n            var newDSG = [];\n\n            for (var i = 0, l = this.middleweight.length; i < l; i++) {\n                var preMiddleweight = dMin;\n                if (i > 0) {\n                    preMiddleweight = this.middleweight[i - 1];\n                };\n                var middleVal = preMiddleweight + parseInt((this.middleweight[i] - preMiddleweight) / 2);\n\n                newDS.push(middleVal);\n                newDS.push(this.middleweight[i]);\n\n                newDSG.push([\n                    preMiddleweight,\n                    middleVal,\n                    this.middleweight[i]\n                ]);\n            };\n            var lastMW = this.middleweight.slice(-1)[0];\n\n            if (dMax > lastMW) {\n                newDS.push(lastMW + (dMax - lastMW) / 2);\n                newDS.push(dMax);\n                newDSG.push([\n                    lastMW,\n                    lastMW + (dMax - lastMW) / 2,\n                    dMax\n                ]);\n            }\n\n            //好了。 到这里用简单的规则重新拼接好了新的 dataSection\n            this.dataSection = newDS;\n            this.dataSectionGroup = newDSG;\n\n        };\n    }\n\n    //origin 对应 this.origin 的值\n    _getOriginTrans(origin) {\n        var pos = 0;\n\n        var dsgLen = this.dataSectionGroup.length;\n        var groupLength = this._axisLength / dsgLen;\n\n        for (var i = 0, l = dsgLen; i < l; i++) {\n\n            var ds = this.dataSectionGroup[i];\n\n            if (this.layoutType == \"proportion\") {\n                var min = _.min(ds);\n                var max = _.max(ds);\n\n                var amountABS = Math.abs(max - min);\n\n                if (origin >= min && origin <= max) {\n                    pos = ((origin - min) / amountABS * groupLength + i * groupLength);\n                    break;\n                };\n\n\n            } else {\n                /* TODO: 貌似 非proportion 布局 下面的_originTrans 没毛意义啊，先注释掉\n                var valInd = _.indexOf(ds , origin);\n                if( valInd != -1 ){\n                    if( this.layoutType == \"rule\" ){\n                        pos = valInd / (ds.length - 1) * groupLength; \n                    };\n                    if( this.layoutType == \"peak\" ){\n                        pos = ( groupLength/ds.length ) * (valInd+1) - ( groupLength/ds.length )/2;\n                    };\n                };\n                */\n            }\n        };\n\n        if (this.sort == \"desc\") {\n            //如果是倒序的\n            pos = -(groupLength - pos);\n        };\n\n        return parseInt(pos);\n    }\n\n    //opt { val ind pos } 一次只能传一个\n    _getLayoutDataOf(opt) {\n        var props = [\"val\", \"ind\", \"pos\"];\n        var prop;\n        _.each(props, function (_p) {\n            if (_p in opt) {\n                prop = _p;\n            }\n        });\n\n        var layoutData;\n        _.each(this._dataSectionLayout, function (item) {\n            if (item[prop] === opt[prop]) {\n                layoutData = item;\n            };\n        });\n\n        return layoutData || {};\n    }\n\n    getPosOfVal(val) {\n\n        /* val可能会重复，so 这里得到的会有问题，先去掉\n        //先检查下 _dataSectionLayout 中有没有对应的记录\n        var _pos = this._getLayoutDataOf({ val : val }).pos;\n        if( _pos != undefined ){\n            return _pos;\n        };\n        */\n\n        return this.getPosOf({\n            val: val\n        });\n    }\n    getPosOfInd(ind) {\n        //先检查下 _dataSectionLayout 中有没有对应的记录\n        var _pos = this._getLayoutDataOf({ ind: ind }).pos;\n        if (_pos != undefined) {\n            return _pos;\n        };\n\n        return this.getPosOf({\n            ind: ind\n        });\n    }\n\n    //opt {val, ind} val 或者ind 一定有一个\n    getPosOf(opt) {\n        var pos;\n\n        var cellCount = this._getCellCount(); //dataOrg上面的真实数据节点数，把轴分成了多少个节点\n\n        if (this.layoutType == \"proportion\") {\n            var dsgLen = this.dataSectionGroup.length;\n            var groupLength = this._axisLength / dsgLen;\n            for (var i = 0, l = dsgLen; i < l; i++) {\n                var ds = this.dataSectionGroup[i];\n                var min = _.min(ds);\n                var max = _.max(ds);\n                var val = \"val\" in opt ? opt.val : this.getValOfInd(opt.ind);\n                if (val >= min && val <= max) {\n                    var _origin = this.origin;\n                    //如果 origin 并不在这个区间\n                    if (_origin < min || _origin > max) {\n                        _origin = min;\n                    } else {\n                        //如果刚好在这个区间Group\n\n                    };\n                    var maxGroupDisABS = Math.max(Math.abs(max - _origin), Math.abs(_origin - min));\n                    var amountABS = Math.abs(max - min);\n                    var h = (maxGroupDisABS / amountABS) * groupLength;\n                    pos = (val - _origin) / maxGroupDisABS * h + i * groupLength;\n\n                    if (isNaN(pos)) {\n                        pos = parseInt(i * groupLength);\n                    };\n\n                    break;\n                }\n            }\n        } else {\n\n            if (cellCount == 1) {\n                //如果只有一数据，那么就全部默认在正中间\n                pos = this._axisLength / 2;\n            } else {\n                //TODO 这里在非proportion情况下，如果没有opt.ind 那么getIndexOfVal 其实是有风险的，\n                //因为可能有多个数据的val一样\n\n                var valInd = \"ind\" in opt ? opt.ind : this.getIndexOfVal(opt.val);\n                if (valInd != -1) {\n                    if (this.layoutType == \"rule\") {\n                        //line 的xaxis就是 rule\n                        pos = valInd / (cellCount - 1) * this._axisLength;\n                    };\n                    if (this.layoutType == \"peak\") {\n                        //bar的xaxis就是 peak\n                        /*\n                        pos = (this._axisLength/cellCount) \n                              * (valInd+1) \n                              - (this._axisLength/cellCount)/2;\n                        */\n                        var _cellLength = this.getCellLength();\n                        pos = _cellLength * (valInd + 1) - _cellLength / 2;\n                    };\n                };\n            };\n\n        };\n\n        !pos && (pos = 0);\n\n        pos = Number(pos.toFixed(1)) + this._originTrans;\n\n        return Math.abs(pos);\n    }\n\n    getValOfPos(pos) {\n        //先检查下 _dataSectionLayout 中有没有对应的记录\n        var _val = this._getLayoutDataOf({ pos: pos }).val;\n        if (_val != undefined) {\n            return _val;\n        };\n\n        return this._getValOfInd(this.getIndexOfPos(pos));\n    }\n\n    //ds可选\n    getValOfInd(ind) {\n\n        //先检查下 _dataSectionLayout 中有没有对应的记录\n        var _val = this._getLayoutDataOf({ ind: ind }).val;\n        if (_val != undefined) {\n            return _val;\n        };\n\n        return this._getValOfInd(ind);\n\n        /*\n        if (this.layoutType == \"proportion\") {\n        \n        } else {\n            //这里的index是直接的对应dataOrg的索引\n            var org = ds ? ds : _.flatten(this.dataOrg);\n            return org[ind];\n        };\n        */\n\n    }\n\n    //这里的ind\n    _getValOfInd(ind, ds) {\n        var me = this;\n\n        var org = _.flatten(this.dataOrg);\n        var val;\n\n        if (this.layoutType == \"proportion\") {\n\n            var groupLength = this._axisLength / this.dataSectionGroup.length;\n            _.each(this.dataSectionGroup, function (ds, i) {\n                if (parseInt(ind / groupLength) == i || i == me.dataSectionGroup.length - 1) {\n                    var min = _.min(ds);\n                    var max = _.max(ds);\n                    val = min + (max - min) / groupLength * (ind - groupLength * i);\n                    return false;\n                }\n            });\n\n        } else {\n            val = org[ind];\n        };\n        return val;\n    }\n\n    getIndexOfPos(pos) {\n\n        //先检查下 _dataSectionLayout 中有没有对应的记录\n        var _ind = this._getLayoutDataOf({ pos: pos }).ind;\n        if (_ind != undefined) {\n            return _ind;\n        };\n\n        var ind = 0;\n\n        var cellLength = this.getCellLengthOfPos(pos);\n        var cellCount = this._getCellCount();\n\n        if (this.layoutType == \"proportion\") {\n            //proportion中的index以像素为单位 所以，传入的像素值就是index\n            return pos;\n        } else {\n\n            if (this.layoutType == \"peak\") {\n                ind = parseInt(pos / cellLength);\n                if (ind == cellCount) {\n                    ind = cellCount - 1;\n                }\n            };\n\n            if (this.layoutType == \"rule\") {\n                ind = parseInt((pos + (cellLength / 2)) / cellLength);\n                if (cellCount == 1) {\n                    //如果只有一个数据\n                    ind = 0;\n                }\n            };\n        };\n\n        return ind\n    }\n\n    getIndexOfVal(val) {\n\n        var valInd = -1;\n        if (this.layoutType == \"proportion\") {\n\n            //先检查下 _dataSectionLayout 中有没有对应的记录\n            var _ind = this._getLayoutDataOf({ val: val }).ind;\n            if (_ind != undefined) {\n                return _ind;\n            };\n\n            //因为在proportion中index 就是 pos\n            //所以这里要返回pos\n            valInd = this.getPosOfVal(val);\n        } else {\n            _.each(this.dataOrg, function (arr) {\n                _.each(arr, function (list) {\n                    var _ind = _.indexOf(list, val);\n                    if (_ind != -1) {\n                        valInd = _ind;\n                    };\n                });\n            });\n        }\n\n\n        return valInd;\n    }\n\n    getCellLength() {\n\n        if (this._cellLength !== null) {\n            return this._cellLength;\n        };\n\n        //ceilWidth默认按照peak算, 而且不能按照dataSection的length来做分母\n        var _axisLength = this._axisLength;\n        var cellLength = _axisLength;\n        var cellCount = this._getCellCount();\n\n        if (cellCount) {\n\n            if (this.layoutType == \"proportion\") {\n                cellLength = 1;\n            } else {\n                //默认按照 peak 也就是柱状图的需要的布局方式\n                cellLength = _axisLength / cellCount;\n                if (this.layoutType == \"rule\") {\n                    if (cellCount == 1) {\n                        cellLength = _axisLength / 2;\n                    } else {\n                        cellLength = _axisLength / (cellCount - 1)\n                    };\n                };\n\n                if (this.posParseToInt) {\n                    cellLength = parseInt(cellLength);\n                };\n            }\n        };\n\n        this._cellLength = cellLength;\n\n        return cellLength;\n\n    }\n\n    //这个getCellLengthOfPos接口主要是给tips用，因为tips中只有x信息\n    getCellLengthOfPos(pos) {\n        return this.getCellLength();\n    }\n\n    //pos目前没用到，给后续的高级功能预留接口\n    getCellLengthOfInd(pos) {\n        return this.getCellLength();\n    }\n\n    _getCellCount() {\n\n        if (this._cellCount !== null) {\n            return this._cellCount;\n        };\n\n        //总共有几个数据节点，默认平铺整个dataOrg，和x轴的需求刚好契合，而y轴目前不怎么需要用到这个\n        var cellCount = 0;\n        if (this.layoutType == \"proportion\") {\n            cellCount = this._axisLength;\n        } else {\n\n            if (this.dataOrg.length && this.dataOrg[0].length && this.dataOrg[0][0].length) {\n                cellCount = this.dataOrg[0][0].length;\n            }\n        };\n        this._cellCount = cellCount;\n        return cellCount;\n    }\n\n}","/**\n* 把原始的数据\n* field1 field2 field3\n*   1      2      3\n*   2      3      4\n* 这样的数据格式转换为内部的\n* [{field:'field1',index:0,data:[1,2]} ......]\n* 这样的结构化数据格式。\n*/\nimport _ from \"./underscore\"\n\n//如果应用传入的数据是[{name:name, sex:sex ...} , ...] 这样的数据，就自动转换为chartx需要的矩阵格式数据\nfunction parse2MatrixData( list )\n{\n    if( list === undefined || list === null ){\n        list = [];\n    };\n    //检测第一个数据是否为一个array, 否就是传入了一个json格式的数据\n    if( list.length > 0 && !_.isArray( list[0] ) ){\n        var newArr = [];\n        var fields = [];\n        var fieldNum = 0;\n        for( var i=0,l=list.length ; i<l ; i++ ){\n            var row = list[i];\n            if( i == 0 ){\n                for( var f in row ){\n                    fields.push( f ); \n                };\n                newArr.push( fields );\n                fieldNum = fields.length;\n            };\n            var _rowData = [];\n            for( var ii=0 ; ii<fieldNum ; ii++ ){\n                _rowData.push( row[ fields[ii] ] );\n            };\n            newArr.push( _rowData );\n        };\n        \n        return newArr;\n    } else {\n        return list\n    }\n} \n\nexport default function( data, opt ){\n\n    //数据做一份拷贝，避免污染源数据\n    data = JSON.parse( JSON.stringify( data ) );\n    \n    var dataFrame  = {        //数据框架集合\n        length        : 0,\n        org           : [],   //最原始的数据，一定是个行列式，因为如果发现是json格式数据，会自动转换为行列式\n        data          : [],   //最原始的数据转化后的数据格式：[o,o,o] o={field:'val1',index:0,data:[1,2,3]}\n        getRowDataAt  : _getRowDataAt,\n        getRowDataOf  : _getRowDataOf,\n        getFieldData  : _getFieldData,\n        getDataOrg    : getDataOrg,\n        fields        : [],\n        range         : {\n            start     : 0,\n            end       : 0\n        }\n    };\n\n    if( !data || data.length == 0 ){\n        return dataFrame\n    };\n\n    //检测第一个数据是否为一个array, 否就是传入了一个json格式的数据\n    if( data.length > 0 && !_.isArray( data[0] ) ){\n        data = parse2MatrixData( data );\n    };\n    dataFrame.length = data.length - 1;\n\n    //设置好数据区间end值\n    dataFrame.range.end = dataFrame.length - 1;\n    //然后检查opts中是否有dataZoom.range\n    if( opt && opt.dataZoom && opt.dataZoom.range ){\n        _.extend( dataFrame.range, opt.dataZoom.range );\n    };\n\n    if( data.length && data[0].length && !~data[0].indexOf(\"__index__\") ){\n        //如果数据中没有用户自己设置的__index__，那么就主动添加一个__index__，来记录元数据中的index\n        for( var i=0,l=data.length; i<l; i++ ){\n            if( !i ){\n                data[0].push( \"__index__\" );\n            } else {\n                data[i].push( i-1 );\n            }\n        }\n    }\n\n    dataFrame.org = data;\n    dataFrame.fields = data[0] ? data[0] : []; //所有的字段集合;\n\n    \n\n    var total = [];//已经处理成[o,o,o]   o={field:'val1',index:0,data:[1,2,3]}\n    for(var a = 0, al = dataFrame.fields.length; a < al; a++){\n        var o = {};\n        o.field = dataFrame.fields[a];\n        o.index = a;\n        o.data  = [];\n        total.push(o);\n    };\n    dataFrame.data = total;\n\n    //填充好total的data并且把属于yAxis的设置为number\n    for(var a = 1, al = data.length; a < al; a++){\n        for(var b = 0, bl = data[a].length; b < bl; b++){\n            var _val = data[a][b];\n            //如果用户传入的数据是个number，那么就转换为真正的Number吧\n            //‘223’ --》 223\n            if( !isNaN( _val ) && _val !== \"\" && _val !== null ){\n                _val = Number( _val );\n            };\n            total[b].data.push( _val );\n            //total[b].data.push( data[a][b] );\n        }\n    };\n\n    //会按照$field的格式转换成对应一一对应的 org 的结构\n    function getDataOrg( $field, format, totalList , lev){\n        \n        if( !lev ) lev = 0;\n\n        var arr = totalList || total;\n        if( !arr ){\n            return;\n        }\n        if( !format ){\n            format = function( e ){ return e }\n        };\n\n        function _format( data ){\n            for( var i=0,l=data.length; i<l; i++ ){\n                data[i] = format( data[i] );\n            };\n            return data;\n        };\n\n        if( !_.isArray($field) ){\n            $field = [$field];\n        };\n\n        //这个时候的arr只是totalList的过滤，还没有完全的按照$field 中的排序\n        var newData = [];\n        for( var i=0,l=$field.length; i<l ; i++ ){\n            var fieldInTotal = false; //如果该field在数据里面根本没有，那么就说明是无效的field配置\n            if( _.isArray($field[i]) ){\n                newData.push( getDataOrg( $field[i], format, totalList , lev+1) );\n            } else {\n            \n                var _fieldData = newData;\n                if( !lev ){\n                    _fieldData = [];\n                };\n                for( var ii=0,iil=arr.length ; ii<iil ; ii++ ){\n                     if( $field[i] == arr[ii].field ){\n                         fieldInTotal = true;\n                         _fieldData.push( _format( arr[ii].data.slice( dataFrame.range.start, dataFrame.range.end+1 ) ) );\n                         break;\n                     }\n                };\n                if( !lev ){\n                    newData.push( _fieldData );\n                };\n            };\n        }\n        return newData;\n    };\n\n    /*\n     * 获取某一行数据\n    */ \n    function _getRowDataAt(index){\n        var o = {}\n        var data = dataFrame.data\n        for(var a = 0; a < data.length; a++){\n            o[data[a].field] = data[a].data[ dataFrame.range.start + index ]\n        };\n        return o\n    }\n\n    /**\n     * obj => {uv: 100, pv: 10 ...}\n     */\n    function _getRowDataOf( obj ){\n        !obj && (obj={});\n        var arr = [];\n\n        var expCount = 0;\n        for( var p in obj ){\n            expCount++;\n        };\n\n        if( expCount ){\n            for( var i=dataFrame.range.start; i<= dataFrame.range.end; i++ ){\n                var matchNum = 0;\n                _.each( dataFrame.data, function( fd ){\n                    if( fd.field in obj && fd.data[i] == obj[ fd.field ] ){\n                        matchNum++;\n                    }\n                } );\n                if( matchNum == expCount ){\n                    //说明这条数据是完全和查询\n                    arr.push( _getRowDataAt(i) );\n                };\n            };\n        };\n\n        return arr;\n    }\n\n    function _getFieldData( field ){\n        var data;\n        _.each( dataFrame.data , function( d ){\n            if( d.field == field ){\n                data = d;\n            }\n        } ); \n        if( data ){\n            return data.data.slice( dataFrame.range.start, dataFrame.range.end+1 );\n        } else {\n            return []\n        }\n    }\n\n    return dataFrame;\n}","import _ from \"./underscore\";\n\nconst RESOLUTION =  typeof (window) !== 'undefined' ? window.devicePixelRatio : 1;\n\nvar addOrRmoveEventHand = function( domHand , ieHand ){\n    if( document[ domHand ] ){\n        function eventDomFn( el , type , fn ){\n            if( el.length ){\n                for(var i=0 ; i < el.length ; i++){\n                    eventDomFn( el[i] , type , fn );\n                }\n            } else {\n                el[ domHand ]( type , fn , false );\n            }\n        };\n        return eventDomFn\n    } else {\n        function eventFn( el , type , fn ){\n            if( el.length ){\n                for(var i=0 ; i < el.length ; i++){\n                    eventFn( el[i],type,fn );\n                }\n            } else {\n                el[ ieHand ]( \"on\"+type , function(){\n                    return fn.call( el , window.event );\n                });\n            }\n        };\n        return eventFn\n    }\n};\n\nexport default {\n    // dom操作相关代码\n    query : function(el){\n        if(_.isString(el)){\n           return document.getElementById(el)\n        }\n        if(el.nodeType == 1){\n           //则为一个element本身\n           return el\n        }\n        if(el.length){\n           return el[0]\n        }\n        return null;\n    },\n    offset : function(el){\n        var box = el.getBoundingClientRect(), \n        doc = el.ownerDocument, \n        body = doc.body, \n        docElem = doc.documentElement, \n\n        // for ie  \n        clientTop = docElem.clientTop || body.clientTop || 0, \n        clientLeft = docElem.clientLeft || body.clientLeft || 0, \n\n        // In Internet Explorer 7 getBoundingClientRect property is treated as physical, \n        // while others are logical. Make all logical, like in IE8. \n        zoom = 1; \n        if (body.getBoundingClientRect) { \n            var bound = body.getBoundingClientRect(); \n            zoom = (bound.right - bound.left)/body.clientWidth; \n        } \n        if (zoom > 1){ \n            clientTop = 0; \n            clientLeft = 0; \n        } \n        var top = box.top/zoom + (window.pageYOffset || docElem && docElem.scrollTop/zoom || body.scrollTop/zoom) - clientTop, \n            left = box.left/zoom + (window.pageXOffset|| docElem && docElem.scrollLeft/zoom || body.scrollLeft/zoom) - clientLeft; \n\n        return { \n            top: top, \n            left: left \n        }; \n    },\n    addEvent : addOrRmoveEventHand( \"addEventListener\" , \"attachEvent\" ),\n    removeEvent : addOrRmoveEventHand( \"removeEventListener\" , \"detachEvent\" ),\n    pageX: function(e) {\n        if (e.pageX) return e.pageX;\n        else if (e.clientX)\n            return e.clientX + (document.documentElement.scrollLeft ?\n                    document.documentElement.scrollLeft : document.body.scrollLeft);\n        else return null;\n    },\n    pageY: function(e) {\n        if (e.pageY) return e.pageY;\n        else if (e.clientY)\n            return e.clientY + (document.documentElement.scrollTop ?\n                    document.documentElement.scrollTop : document.body.scrollTop);\n        else return null;\n    },\n    /**\n     * 创建dom\n     * @param {string} id dom id 待用\n     * @param {string} type : dom type， such as canvas, div etc.\n     */\n    createCanvas : function( _width , _height , id) {\n        var canvas = document.createElement(\"canvas\");\n        canvas.style.position = 'absolute';\n        canvas.style.width  = _width + 'px';\n        canvas.style.height = _height + 'px';\n        canvas.style.left   = 0;\n        canvas.style.top    = 0;\n        canvas.setAttribute('width', _width * RESOLUTION);\n        canvas.setAttribute('height', _height * RESOLUTION);\n        canvas.setAttribute('id', id);\n        return canvas;\n    },\n    createView: function(_width , _height, id){\n        var view = document.createElement(\"div\");\n        view.className = \"canvax-view\";\n        view.style.cssText += \"position:relative;width:100%;height:100%;\"\n\n        var stageView = document.createElement(\"div\");\n        stageView.style.cssText += \"position:absolute;width:\" + _width + \"px;height:\" + _height +\"px;\"\n\n        //用来存放一些dom元素\n        var domView = document.createElement(\"div\");\n        domView.style.cssText += \"position:absolute;width:\" + _width + \"px;height:\" + _height +\"px;\"\n\n        view.appendChild(stageView);\n        view.appendChild(domView);\n        \n        return {\n            view : view,\n            stageView: stageView,\n            domView: domView\n        }\n    }\n    //dom相关代码结束\n};","/**\n * 系统皮肤\n */\nconst _colors = [\"#ff8533\",\"#73ace6\",\"#82d982\",\"#e673ac\",\"#cd6bed\",\"#8282d9\",\"#c0e650\",\"#e6ac73\",\"#6bcded\",\"#73e6ac\",\"#ed6bcd\",\"#9966cc\"];\nexport default {\n    colors : _colors,\n    set : function( colors ){\n        this.colors = colors;\n        /*\n        var me = this;\n        _.each( colors, function( color , i ){\n            me.colors[i] = color;\n        } );\n        */\n        return this.colors;\n    },\n    get : function( ){\n        return this.colors\n    }\n}","//图表皮肤\nimport globalTheme from \"./theme\";\nimport _ from \"./underscore\";\nimport dom from \"./dom\";\nimport {is3dOpt,cloneData,cloneOptions} from \"./tools\";\n\nlet globalAnimationEnabled = true //是否开启全局的动画开关\n\nexport default {\n    create : function( el, _data, _opt ){\n        var chart = null;\n        var me = this;\n\n        var data = cloneData( _data );\n        var opt  = cloneOptions( _opt );  \n\n        var _destroy = function(){\n            me.instances[ chart.id ] = null;\n            delete me.instances[ chart.id ];\n        };\n\n        //这个el如果之前有绘制过图表，那么就要在instances中找到图表实例，然后销毁\n        var chart_id = dom.query(el).getAttribute(\"chart_id\");\n        if( chart_id != undefined ){\n            var _chart = me.instances[ chart_id ];\n            if( _chart ){\n                _chart.destroy();\n                _chart.off && _chart.off(\"destroy\" , _destroy)\n            };\n            delete me.instances[ chart_id ];\n        };\n\n        //图表维度\n        var dimension = 2;\n        if( is3dOpt( _opt ) ){\n            dimension = 3;\n        };\n\n        var componentModules = me._getComponentModules( dimension );\n\n        //如果用户没有配置coord，说明这个图表是一个默认目标系的图表，比如标签云\n        var Chart = me._getComponentModule('chart', dimension);\n\n        //try {\n            chart = new Chart( el, data, opt, componentModules );\n            if( chart ){\n                chart.draw();\n                \n                me.instances[ chart.id ] = chart;\n                chart.on(\"destroy\" , _destroy);\n            };\n        //} catch(err){\n        //    throw \"Chatx Error：\" + err\n        //};\n\n        return chart;\n    },\n    setGlobalTheme: function( colors ){\n        globalTheme.set( colors );\n    },\n    getGlobalTheme: function(){\n        return globalTheme.get();\n    },\n    \n    instances : {},\n    getChart : function( chartId ){\n        return this.instances[ chartId ];\n    },\n    resize : function(){\n        //调用全局的这个resize方法，会把当前所有的 chart instances 都执行一遍resize\n        for( var c in this.instances ){\n            this.instances[ c ].resize();\n        }\n    },\n    \n    //第二个参数是用户要用来覆盖chartpark中的配置的options\n    getOptions : function( chartPark_cid , userOptions ){\n        //chartPark_cid,chartpark中的图表id\n        if( !this.options[ chartPark_cid ] ){\n            return userOptions || {};\n        };\n        var JsonSerialize = {\n            prefix: '[[JSON_FUN_PREFIX_',\n            suffix: '_JSON_FUN_SUFFIX]]'\n        };\n        var parse = function(string){\n            return JSON.parse( string ,function(key, value){\n                if((typeof value === 'string') && \n                   (value.indexOf(JsonSerialize.suffix) > 0) && \n                   (value.indexOf(JsonSerialize.prefix) == 0)\n                ){\n                    return (new Function('return ' + value.replace(JsonSerialize.prefix, '').replace(JsonSerialize.suffix, '')))();\n                };\n                return value;\n            }) || {};\n        };\n        var opt = parse( decodeURIComponent( this.options[ chartPark_cid ] || {} ) );\n        if( userOptions ){\n            opt = _.extend( true, opt, userOptions );\n        };\n        return opt;\n    },\n\n    components: {\n        c_2d : {\n            /*\n            modules:{\n                coord : {\n                    empty : ..,\n                    rect  : ..,\n                    ...\n                },\n                graphs : {\n                    //empty : .., //一般只有coord才会有empty\n                    bar   : ..,\n                    ...\n                }\n            },\n            get: function( name, type ){}\n            */\n        },\n        c_3d : {\n            //所有3d组件,同上\n        }\n    },\n    _getComponentModules( dimension ){\n        var comps = this.components.c_2d;\n        if( dimension == 3 ){\n            comps = this.components.c_3d;\n        };\n        if( !comps.modules ){\n            comps.modules = {};\n        };\n        if( !comps.get ){\n            comps.get = function( name, type ){\n                if( !type ){\n                    type = \"empty\";\n                }; \n                name = name.toLowerCase();\n                type = type.toLowerCase();\n                var _module = comps.modules[ name ];\n                if( _module && _module[type] ){\n                    return _module[type]\n                };\n            };\n        };\n        return comps;\n    },\n    /**\n     * @param {compModule} 要注册进去的模块名称\n     * @param {name} 要获取的comp名称\n     * @param { dimension,type } 后面可以传传两个参数 \n     * @param { dimension } 如果有四个参数，那么第三个肯定是type，第四个肯定是dimension \n     */\n    registerComponent( compModule, name )\n    {\n        var dimension = 2;\n        var type = \"empty\";\n        \n\n        if( arguments.length == 3 ){\n            var arg2 = arguments[2]\n            if( _.isNumber( arg2 ) ){\n                if( arg2 == 3 ){\n                    dimension = 3\n                }\n            };\n            if( _.isString( arg2 ) ){\n                type = arg2;\n            };\n        };\n        if( arguments.length == 4 ){\n            //那么肯定是有传 type  dimension 两个值\n            type = arguments[ 2 ];\n            if( arguments[3] == 3 ){\n                dimension = 3;\n            };\n        };\n        \n        var comps = this._getComponentModules( dimension ).modules;\n\n        name = name.toLowerCase();\n        type = type.toLowerCase();\n\n        var _comp = comps[ name ];\n        if( !_comp ){\n            _comp = comps[ name ] = {\n                \n            };\n        };\n\n        if( !_comp[ type ] ){\n            _comp[ type ] = compModule;\n        };\n        return comps;\n    },\n    /**\n     * \n     * @param {name} 要获取的comp名称\n     * @param { dimension,type } 后面可以传传两个参数 \n     * @param { dimension } 如果有三个参数，那么第二个肯定是type，第三个肯定是dimension \n     */\n    _getComponentModule( name ){\n        var dimension = 2;\n        var type = \"empty\";\n\n        if( arguments.length == 2 ){\n            var arg1 = arguments[1]\n            if( _.isNumber( arg1 ) ){\n                if( arg1 == 3 ){\n                    dimension = 3\n                }\n            };\n            if( _.isString( arg1 ) ){\n                type = arg1;\n            };\n        };\n        if( arguments.length == 3 ){\n            //那么肯定是有传 type  dimension 两个值\n            type = arguments[ 1 ];\n            if( arguments[2] == 3 ){\n                dimension = 3;\n            };\n        };\n\n        name = name.toLowerCase();\n        type = type.toLowerCase();\n        var _comp = this._getComponentModules( dimension ).modules[ name ];\n        return _comp ? _comp[ type ] : undefined;\n    },\n    setAnimationEnabled: function( bool ){\n        globalAnimationEnabled = bool\n    },\n    getAnimationEnabled: function( bool ){\n        return globalAnimationEnabled;\n    }\n};","//十六进制颜色值的正则表达式 \nvar reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/; \n\n/*16进制颜色转为RGB格式*/  \nexport function colorRgb( hex ){  \n    var sColor = hex.toLowerCase();  \n    if(sColor && reg.test(sColor)){  \n        if(sColor.length === 4){  \n            var sColorNew = \"#\";  \n            for(var i=1; i<4; i+=1){  \n                sColorNew += sColor.slice(i,i+1).concat(sColor.slice(i,i+1));     \n            }  \n            sColor = sColorNew;  \n        }  \n        //处理六位的颜色值  \n        var sColorChange = [];\n        for(var i=1; i<7; i+=2){  \n            sColorChange.push(parseInt(\"0x\"+sColor.slice(i,i+2)));    \n        }  \n        return \"RGB(\" + sColorChange.join(\",\") + \")\";  \n    } else {  \n        return sColor;    \n    }  \n};\n\nexport function colorRgba(hex , a){\n    return colorRgb( hex ).replace(')', ','+a+')').replace('RGB', 'RGBA');\n};\n\nexport function hexTorgb(hex, out){\n\t//hex可能是“#ff0000” 也可能是 0xff0000\n\tif( hex.replace ){\n\t   hex = parseInt( hex.replace(\"#\" , \"0X\") , 16 );\n    };\n\n    out = out || [];\n\n    out[0] = ((hex >> 16) & 0xFF) / 255;\n    out[1] = ((hex >> 8) & 0xFF) / 255;\n    out[2] = (hex & 0xFF) / 255;\n\n    return out;\n}\n\nexport function hexTostring(hex){\n     hex = hex.toString(16);\n     hex = '000000'.substr(0, 6 - hex.length) + hex;\n\n     return `#${hex}`;\n}\n\nexport function rgbTohex(rgb){\n\treturn (((rgb[0] * 255) << 16) + ((rgb[1] * 255) << 8) + (rgb[2] * 255));\n}\n","import _ from \"./underscore\"\n\nconst aRound = 360; //一圈的度数\nconst Cos = Math.cos;\nconst Sin = Math.sin;\n\nexport default class Polar {\n    constructor(opt = {}, dataFrame = []) {\n\n        this._opt = _.clone(opt);\n        this.dataFrame = dataFrame;\n\n        this.axisLength = 1;\n\n        this.dataOrg = [];\n\n        this.startAngle = this._opt.startAngle;\n        this.allAngles = Math.min(360, this._opt.allAngles);\n        this.sort = this._opt.sort;\n\n        this.layoutData = []; //和dataSection一一对应的，每个值的pos,agend,dregg,centerPos\n\n\n\n        this.maxRadius = 0; //最大半径值\n        this.minRadius = 0; //最小半径值 \n\n    }\n\n    calculateProps() {\n        let axisLength = 0;\n        let percentage = 0;\n        let currentAngle = 0;\n        let opt = this._opt;\n        let angle, endAngle, cosV, sinV, midAngle, quadrant;\n        let percentFixedNum = 2;\n\n        let outRadius = opt.node.outRadius;\n        let innerRadius = opt.node.innerRadius;\n        let moveDis = opt.node.moveDis;\n\n        this.layoutData.forEach((item, i) => {\n            if (!item.enabled) return;\n            axisLength += isNaN(+item.value) ? 0 : +item.value;\n\n            if (item.radiusField) {\n                this.maxRadius = Math.max(item.radiusValue, axisLength);\n                this.minRadius = Math.min(item.radiusValue, axisLength);\n            }\n        })\n\n        this.axisLength = axisLength;\n\n        if (axisLength > 0) {\n\n            //原始算法\n            // currentAngle = + opt.startAngle % 360;\n            // limitAngle = opt.allAngles + me.startAngle % me.allAngles;\n\n            //新的算法\n            //这里只是计算每个扇区的初始位置,所以这里求模就可以啦\n            currentAngle = _.euclideanModulo(this.startAngle, aRound);\n            // opt.allAngles = opt.allAngles > 0 ? opt.allAngles : aRound;\n            // limitAngle = opt.allAngles + _.euclideanModulo(opt.startAngle, opt.allAngles);\n\n            this.layoutData.forEach((item, i) => {\n                percentage = item.value / axisLength;\n                //enabled为false的sec，比率就设置为0\n                if (!item.enabled) {\n                    percentage = 0;\n                };\n\n                angle = this.allAngles * percentage;\n                //旧的算法\n                // endAngle = currentAngle + angle > limitAngle ? limitAngle : me.currentAngle + angle;\n                endAngle = currentAngle + angle;\n                midAngle = currentAngle + angle * 0.5;\n\n                cosV = Cos(_.degToRad(midAngle));\n                sinV = Sin(_.degToRad(midAngle));\n\n                cosV = cosV.toFixed(5);\n                sinV = sinV.toFixed(5);\n                quadrant = this.getAuadrant(midAngle);\n\n                //如果用户在配置中制定了半径字段,这里需要计算相对的半径比例值\n                if (!!item.radiusField) {\n                    // var _rr = Number(item.rowData[opt.node.radius]);\n                    outRadius = parseInt((opt.node.outRadius - opt.node.innerRadius) * ((item.radiusValue - this.minRadius) / (this.maxRadius - this.minRadius)) + opt.node.innerRadius);\n                };\n                _.extend(item, {\n                    outRadius,\n                    innerRadius,\n                    startAngle: currentAngle, //起始角度\n                    endAngle, //结束角度\n                    midAngle,  //中间角度\n\n                    moveDis,\n\n                    outOffsetx: moveDis * 0.7 * cosV, //focus的事实外扩后圆心的坐标x\n                    outOffsety: moveDis * 0.7 * sinV, //focus的事实外扩后圆心的坐标y\n\n                    centerx: outRadius * cosV,\n                    centery: outRadius * sinV,\n                    outx: (outRadius + moveDis) * cosV,\n                    outy: (outRadius + moveDis) * sinV,\n                    edgex: (outRadius + moveDis) * cosV,\n                    edgey: (outRadius + moveDis) * sinV,\n\n\n                    orginPercentage: percentage,\n                    percentage: (percentage * 100).toFixed(percentFixedNum),\n\n                    quadrant, //象限\n                    isRightSide: quadrant == 1 || quadrant == 4 ? 1 : 0,\n                    cosV,\n                    sinV\n                });\n\n                currentAngle += angle;\n\n\n            })\n\n        }\n\n\n    }\n    /**\n     *  重设数据后,需要调用setDataFrame与calculateProps 重新计算layoutData\n     * @param {ArryObject} dataFrame \n     */\n    resetData(dataFrame) {\n        this.dataFrame = dataFrame || [];\n\n        this.axisLength = 1;\n\n        this.dataOrg = [];\n        this.startAngle = this._opt.startAngle || -90;\n        this.allAngles = this._opt.allAngles || 360;\n\n        this.layoutData = [];\n    }\n    setOption(opt = {}) {\n        Object.assign(this._opt, opt);\n        this.startAngle = this._opt.startAngle;\n        this.allAngles = Math.min(360, this._opt.allAngles);\n        this.sort = this._opt.sort;\n    }\n    setDataFrame(dataFrame) {\n\n        let data = [];\n        let opt = this._opt;\n        let field = opt.field;\n        let labelField = opt.groupField || opt.label.field || opt.field;\n        let radiusField = opt.node.radius;\n\n        dataFrame = dataFrame || this.dataFrame;\n        this.dataFrame = dataFrame;\n\n        this.dataOrg = [];\n\n        for (let i = 0, l = dataFrame.length; i < l; i++) {\n            let rowData = dataFrame.getRowDataAt(i);\n\n            let layoutData = {\n                rowData: rowData,//把这一行数据给到layoutData引用起来\n                enabled: true,   //是否启用，显示在列表中\n\n                value: rowData[field],\n                label: rowData[labelField],\n                iNode: i\n            };\n\n            this.dataOrg.push(rowData[field]);\n\n            if (this._isFiled(radiusField, layoutData)) {\n                layoutData.radiusField = radiusField;\n                layoutData.radiusValue = rowData[radiusField];\n            }\n            data.push(layoutData);\n        };\n\n        if (this.sort) {\n            this.dataOrg = [];\n            data.sort((a, b) => {\n                if (this.sort == 'asc') {\n                    return a.value - b.value;\n                } else {\n                    return b.value - a.value;\n                }\n            });\n\n            //重新设定下ind\n            _.each(data, (d, i) => {\n                d.iNode = i;\n                this.dataOrg.push(d);\n            });\n        };\n\n        this.layoutData = data;\n        return data;\n    }\n\n    getLayoutData() {\n        return this.layoutData || [];\n    }\n\n    _isFiled(field, layoutData) {\n        return field && (_.isString(field) && field in layoutData.rowData)\n    }\n    getAuadrant(ang) { //获取象限\n\n        ang = _.euclideanModulo(ang, aRound);\n        let angleRatio = parseInt(ang / 90);\n        let _quadrant = 0;\n        switch (angleRatio) {\n            case 0:\n                _quadrant = 1;\n                break;\n            case 1:\n                _quadrant = 2;\n                break;\n            case 2:\n                _quadrant = 3;\n                break;\n            case 3:\n            case 4:\n                _quadrant = 4;\n                break;\n        }\n        return _quadrant;\n    }\n\n    /**\n     * 通过值或者索引返回数据集对象\n     * @param {Object} opt {val:xxx} 或 {ind:xxx} \n     */\n    _getLayoutDataOf(opt) {\n        //先提供 具体值 和 索引的计算\n        var props = [{ val: \"value\" }, { ind: \"iNode\" }];\n        var prop = props[Object.keys(opt)[0]];\n\n        var layoutData;\n        _.each(this.layoutData, function (item) {\n            if (item[prop] === opt[prop]) {\n                layoutData = item;\n            };\n        });\n\n        return layoutData || {};\n    }\n\n    getRadiansAtR() {\n        //基类不实现\n    }\n\n    static filterPointsInRect(points, origin, width, height) {\n        for (var i = 0, l = points.length; i < l; i++) {\n            if (!Polar.checkPointInRect(points[i], origin, width, height)) {\n                //该点不在root rect范围内，去掉\n                points.splice(i, 1);\n                i-- , l--;\n            }\n        };\n        return points;\n    }\n\n    static checkPointInRect(p, origin, width, height) {\n        var _tansRoot = { x: p.x + origin.x, y: p.y + origin.y };\n        return !(_tansRoot.x < 0 || _tansRoot.x > width || _tansRoot.y < 0 || _tansRoot.y > height);\n    }\n\n    //检查由n个相交点分割出来的圆弧是否在rect内\n    static checkArcInRect(arc, r, origin, width, height) {\n        var start = arc[0];\n        var to = arc[1];\n        var differenceR = to.radian - start.radian;\n        if (to.radian < start.radian) {\n            differenceR = (Math.PI * 2 + to.radian) - start.radian;\n        };\n        var middleR = (start.radian + differenceR / 2) % (Math.PI * 2);\n        return Polar.checkPointInRect(Polar.getPointInRadianOfR(middleR, r), origin, width, height);\n    }\n\n    //获取某个点相对圆心的弧度值\n    static getRadianInPoint(point) {\n        var pi2 = Math.PI * 2;\n        return (Math.atan2(point.y, point.x) + pi2) % pi2;\n    }\n\n    //获取某个弧度方向，半径为r的时候的point坐标点位置\n    static getPointInRadianOfR(radian, r) {\n        var pi = Math.PI;\n        var x = Math.cos(radian) * r;\n        if (radian == (pi / 2) || radian == pi * 3 / 2) {\n            //90度或者270度的时候\n            x = 0;\n        };\n        var y = Math.sin(radian) * r;\n        if (radian % pi == 0) {\n            y = 0;\n        };\n        return {\n            x: x,\n            y: y\n        };\n    }\n\n    static getROfNum(num, dataSection, width, height) {\n        var r = 0;\n        var maxNum = _.max(dataSection);\n        var minNum = 0; //Math.min( this.rAxis.dataSection );\n        var maxR = parseInt(Math.max(width, height) / 2);\n\n        r = maxR * ((num - minNum) / (maxNum - minNum));\n        return r;\n    }\n\n    getPointsOfR(r, angleList) {\n        var points = [];\n        _.each(angleList, function (_a) {\n            //弧度\n            var _r = Math.PI * _a / 180;\n            var point = Polar.getPointInRadianOfR(_r, r);\n            points.push(point)\n        });\n        return points;\n    }\n\n}","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * canvas 上委托的事件管理\n */\nimport _ from \"../underscore\";\n\nvar Event = function( evt ) {\n\tvar eventType = \"CanvaxEvent\"; \n    if( _.isString( evt ) ){\n    \teventType = evt;\n    };\n    if( _.isObject( evt ) && evt.type ){\n    \teventType = evt.type;\n    };\n\n    this.target = null;\n    this.currentTarget = null;\n    this.type   = eventType;\n    this.point  = null;\n\n    this._stopPropagation = false; //默认不阻止事件冒泡\n};\nEvent.prototype = {\n    stopPropagation : function() {\n        this._stopPropagation = true;\n    }\n};\n\nexport default Event","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * canvas 上委托的事件管理\n */\nimport _ from \"../underscore\";\n\nconst _mouseEvents = 'mousedown mouseup mouseover mousemove mouseout click dblclick'\n\nexport default {\n    _types : _mouseEvents.split(/,| /),\n    register : function( evts ){\n        if( !evts ) {\n            return;\n        };\n        if( _.isString( evts ) ){\n            evts = evts.split(/,| /);\n        };\n        this._types = _mouseEvents.split(/,| /).concat( evts );\n    },\n    get: function(){\n        return this._types;\n    }\n};","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 事件管理类\n */\nimport types from \"./types\";\nimport _ from \"../underscore\";\n\n\n/**\n * 构造函数.\n * @name EventDispatcher\n * @class EventDispatcher类是可调度事件的类的基类，它允许显示列表上的任何对象都是一个事件目标。\n */\nvar Manager = function() {\n    //事件映射表，格式为：{type1:[listener1, listener2], type2:[listener3, listener4]}\n    this._eventMap = {};\n};\n\nManager.prototype = { \n    /**\n     * 判断events里面是否有用户交互事件\n     */\n    _setEventEnable : function(){\n        var hasInteractionEvent = false;\n      \n        for( var t in this._eventMap ){\n            if( _.indexOf( types.get(), t ) > -1 ){\n                hasInteractionEvent = true;\n            };\n        };\n        this._eventEnabled = hasInteractionEvent;\n    },\n    /*\n     * 注册事件侦听器对象，以使侦听器能够接收事件通知。\n     */\n    _addEventListener : function( _type, listener) {\n\n        if( typeof listener != \"function\" ){\n          //listener必须是个function呐亲\n          return false;\n        }\n        var addResult = true;\n        var self      = this;\n        var types     = _type;\n        if( _.isString( _type ) ){\n            types = _type.split(/,| /);\n        };\n        _.each( types , function(type){\n            var map = self._eventMap[type];\n            if(!map){\n                map = self._eventMap[type] = [];\n                map.push(listener);\n                //self._eventEnabled = true;\n                self._setEventEnable();\n                return true;\n            }\n\n            if(_.indexOf(map ,listener) == -1) {\n                map.push(listener);\n                //self._eventEnabled = true;\n                self._setEventEnable();\n                return true;\n            }\n\n            addResult = false;\n        });\n        return addResult;\n    },\n    /**\n     * 删除事件侦听器。\n     */\n    _removeEventListener : function(type, listener) {\n        if(arguments.length == 1) return this.removeEventListenerByType(type);\n\n        var map = this._eventMap[type];\n        if(!map){\n            return false;\n        }\n\n        for(var i = 0; i < map.length; i++) {\n            var li = map[i];\n            if(li === listener) {\n                map.splice(i, 1);\n                if(map.length    == 0) { \n                    delete this._eventMap[type];\n                    this._setEventEnable();\n                    //如果这个如果这个时候child没有任何事件侦听\n                    /*\n                    if(_.isEmpty(this._eventMap)){\n                        //那么该元素不再接受事件的检测\n                        this._eventEnabled = false;\n                    }\n                    */\n                }\n                return true;\n            }\n        }\n        \n        return false;\n    },\n    /**\n     * 删除指定类型的所有事件侦听器。\n     */\n    _removeEventListenerByType : function(type) {\n        var map = this._eventMap[type];\n        if(!map) {\n            delete this._eventMap[type];\n            this._setEventEnable();\n            //如果这个如果这个时候child没有任何事件侦听\n            /*\n            if(_.isEmpty(this._eventMap)){\n                //那么该元素不再接受事件的检测\n                this._eventEnabled = false;\n            }\n            */\n            return true;\n        }\n        return false;\n    },\n    /**\n     * 删除所有事件侦听器。\n     */\n    _removeAllEventListeners : function() {\t\n        this._eventMap = {};\n        this._eventEnabled = false;\n    },\n    /**\n    * 派发事件，调用事件侦听器。\n    */\n    _dispatchEvent : function(e) {\n        var map = this._eventMap[e.type];\n        \n        if( map ){\n            if(!e.target) e.target = this;\n            map = map.slice();\n\n            for(var i = 0; i < map.length; i++) {\n                var listener = map[i];\n                if(typeof(listener) == \"function\") {\n                    listener.call(this, e);\n                }\n            }\n        }\n\n        if( !e._stopPropagation ) {\n            //向上冒泡\n            if( this.parent ){\n                e.currentTarget = this.parent;\n                this.parent._dispatchEvent( e );\n            }\n        } \n        return true;\n    },\n    /**\n       * 检查是否为指定事件类型注册了任何侦听器。\n       */\n    _hasEventListener : function(type) {\n        var map = this._eventMap[type];\n        return map != null && map.length > 0;\n    }\n}\n\nexport default Manager;\n","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 事件派发类\n */\nimport Manager from \"./manager\";\nimport Event from \"./event\";\nimport _ from \"../underscore\";\n\n\nexport default class Dispatcher extends Manager\n{\n    constructor()\n    {\n        super();\n    }\n\n    on(type, listener)\n    {\n        this._addEventListener( type, listener);\n        return this;\n    }\n\n    addEventListener(type, listener)\n    {\n        this._addEventListener( type, listener);\n        return this;\n    }\n\n    un(type,listener)\n    {\n        this._removeEventListener( type, listener);\n        return this;\n    }\n\n    removeEventListener(type,listener)\n    {\n        this._removeEventListener( type, listener);\n        return this;\n    }\n\n    removeEventListenerByType(type)\n    {\n        this._removeEventListenerByType( type);\n        return this;\n    }\n\n    removeAllEventListeners()\n    {\n        this._removeAllEventListeners();\n        return this;\n    }\n\n    //params 要传给evt的eventhandler处理函数的参数，会被merge到Canvax event中\n    fire(eventType , params)\n    {\n        //{currentTarget,point,target,type,_stopPropagation}\n        var e = new Event( eventType );\n\n        if( params ){\n            for( var p in params ){\n                if( p != \"type\" ){\n                    e[p] = params[p];\n                }\n                //然后，currentTarget要修正为自己\n                e.currentTarget = this;\n            }\n        };\n\n        var me = this;\n        _.each( eventType.split(\" \") , function(eType){\n            e.currentTarget = me;\n            me.dispatchEvent( e );\n        } );\n        return this;\n    }\n\n    dispatchEvent(evt)\n    {\n        //this instanceof DisplayObjectContainer ==> this.children\n        //TODO: 这里import DisplayObjectContainer 的话，在displayObject里面的import EventDispatcher from \"../event/EventDispatcher\";\n        //会得到一个undefined，感觉是成了一个循环依赖的问题，所以这里换用简单的判断来判断自己是一个容易，拥有children\n        if( this.children  && evt.point ){\n            var target = this.getObjectsUnderPoint( evt.point , 1)[0];\n            if( target ){\n                target.dispatchEvent( evt );\n            }\n            return;\n        };\n        \n        if(this.context && evt.type == \"mouseover\"){\n            //记录dispatchEvent之前的心跳\n            var preHeartBeat = this._heartBeatNum;\n            var pregAlpha    = this.context.$model.globalAlpha;\n            this._dispatchEvent( evt );\n            if( preHeartBeat != this._heartBeatNum ){\n                this._hoverClass = true;\n                if( this.hoverClone ){\n                    var canvax = this.getStage().parent;\n                    //然后clone一份obj，添加到_bufferStage 中\n                    var activShape = this.clone(true);  \n                    activShape._transform = this.getConcatenatedMatrix();\n                    canvax._bufferStage.addChildAt( activShape , 0 ); \n                    //然后把自己隐藏了\n\n                    //用一个临时变量_globalAlpha 来存储自己之前的alpha\n                    this._globalAlpha = pregAlpha;\n                    this.context.globalAlpha = 0;\n                }\n            }\n            return;\n        };\n\n        this._dispatchEvent( evt );\n\n        if( this.context && evt.type == \"mouseout\"){\n            if(this._hoverClass && this.hoverClone){\n                //说明刚刚over的时候有添加样式\n                var canvax = this.getStage().parent;\n                this._hoverClass = false;\n\n                canvax._bufferStage.removeChildById(this.id);\n                \n                if( this._globalAlpha ){\n                    this.context.globalAlpha = this._globalAlpha;\n                    delete this._globalAlpha;\n                }\n            }\n        }\n\n        return this;\n    }\n\n    hasEvent(type)\n    {\n        return this._hasEventListener(type);\n    }\n\n    hasEventListener(type)\n    {\n        return this._hasEventListener(type);\n    }\n\n    hover( overFun , outFun )\n    {\n        this.on(\"mouseover\" , overFun);\n        this.on(\"mouseout\"  , outFun );\n        return this;\n    }\n\n    once(type, listener)\n    {\n        var me = this;\n        var onceHandle = function(){\n            listener.apply(me , arguments);\n            this.un(type , onceHandle);\n        };\n        this.on(type , onceHandle);\n        return this;\n    }\n}","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n */\nimport Event from \"./event\";\nimport types from \"./types\";\nimport _ from \"../underscore\";\nimport $ from \"../dom\";\n\nvar _hammerEventTypes = [ \n    \"pan\",\"panstart\",\"panmove\",\"panend\",\"pancancel\",\"panleft\",\"panright\",\"panup\",\"pandown\",\n    \"press\" , \"pressup\",\n    \"swipe\" , \"swipeleft\" , \"swiperight\" , \"swipeup\" , \"swipedown\",\n    \"tap\"\n];\n\nvar Handler = function(canvax , opt) {\n    this.canvax = canvax;\n\n    this.curPoints = [{\n        x : 0, y: 0\n    }] //X,Y 的 point 集合, 在touch下面则为 touch的集合，只是这个touch被添加了对应的x，y\n    //当前激活的点对应的obj，在touch下可以是个数组,和上面的 curPoints 对应\n    this.curPointsTarget = [];\n\n    this._touching = false;\n    //正在拖动，前提是_touching=true\n    this._draging = false;\n\n    //当前的鼠标状态\n    this._cursor = \"default\";\n\n    this.target = this.canvax.view;\n\n    //mouse体统中不需要配置drag,touch中会用到第三方的touch库，每个库的事件名称可能不一样，\n    //就要这里配置，默认实现的是hammerjs的,所以默认可以在项目里引入hammerjs http://hammerjs.github.io/\n    this.drag = {\n        start : \"panstart\",\n        move : \"panmove\",\n        end : \"panend\"\n    };\n\n    _.extend( true , this , opt );\n\n};\n\n//这样的好处是document.compareDocumentPosition只会在定义的时候执行一次。\nvar contains = (document && document.compareDocumentPosition) ? function (parent, child) {\n    if( !child ){\n        return false;\n    };\n    return !!(parent.compareDocumentPosition(child) & 16);\n} : function (parent, child) {\n    if( !child ){\n        return false;\n    }\n    return child !== child && (parent.contains ? parent.contains(child) : true);\n};\n\nHandler.prototype = {\n    init : function(){\n        \n        //依次添加上浏览器的自带事件侦听\n        var me   = this;\n        if( me.target.nodeType == undefined ){\n            //如果target.nodeType没有的话， 说明该target为一个jQuery对象 or kissy 对象or hammer对象\n            //即为第三方库，那么就要对接第三方库的事件系统。默认实现hammer的大部分事件系统\n            types.register( _hammerEventTypes );\n        };\n\n        _.each( types.get() , function( type ){\n            //不再关心浏览器环境是否 'ontouchstart' in window \n            //而是直接只管传给事件模块的是一个原生dom还是 jq对象 or hammer对象等\n            if( me.target.nodeType == 1 ){\n                $.addEvent( me.target , type , function( e ){\n                    me.__mouseHandler( e );\n                } );\n            } else {\n                me.target.on( type , function( e ){\n                    me.__libHandler( e );\n                });\n            };\n        } );\n    },\n    /*\n    * 原生事件系统------------------------------------------------begin\n    * 鼠标事件处理函数\n    **/\n    __mouseHandler : function(e) {\n        var me = this;\n        var root = me.canvax;\n\n        root.updateViewOffset();\n    \n        me.curPoints = [ {\n           x : $.pageX( e ) - root.viewOffset.left , \n           y : $.pageY( e ) - root.viewOffset.top\n        }];\n\n        //理论上来说，这里拿到point了后，就要计算这个point对应的target来push到curPointsTarget里，\n        //但是因为在drag的时候其实是可以不用计算对应target的。\n        //所以放在了下面的me.__getcurPointsTarget( e , curMousePoint );常规mousemove中执行\n\n        var curMousePoint  = me.curPoints[0]; \n        var curMouseTarget = me.curPointsTarget[0];\n\n        //模拟drag,mouseover,mouseout 部分代码 begin-------------------------------------------------\n\n        //mousedown的时候 如果 curMouseTarget.dragEnabled 为true。就要开始准备drag了\n        if( e.type == \"mousedown\" ){\n           //如果curTarget 的数组为空或者第一个为false ，，，\n           if( !curMouseTarget ){\n             var obj = root.getObjectsUnderPoint( curMousePoint , 1)[0];\n             if(obj){\n               me.curPointsTarget = [ obj ];\n             }\n           };\n           curMouseTarget = me.curPointsTarget[0];\n           if ( curMouseTarget && curMouseTarget.dragEnabled ){\n               //鼠标事件已经摸到了一个\n               me._touching = true;\n           };\n        };\n\n        if( e.type == \"mouseup\" || (e.type == \"mouseout\" && !contains(root.view , (e.toElement || e.relatedTarget) )) ){\n            if(me._draging == true){\n                //说明刚刚在拖动\n                me._dragEnd( e , curMouseTarget , 0 );\n                curMouseTarget.fire(\"dragend\");\n            };\n            me._draging  = false;\n            me._touching = false;\n        };\n\n        if( e.type == \"mouseout\" ){\n            if( !contains(root.view , (e.toElement || e.relatedTarget) ) ){\n                me.__getcurPointsTarget(e, curMousePoint, true);\n            }\n        } else if( e.type == \"mousemove\" ){  //|| e.type == \"mousedown\" ){\n            //拖动过程中就不在做其他的mouseover检测，drag优先\n            if(me._touching && e.type == \"mousemove\" && curMouseTarget){\n                //说明正在拖动啊\n                if(!me._draging){\n\n                    //begin drag\n                    curMouseTarget.fire(\"dragstart\");\n                    //有可能该child没有hover style\n                    if( !curMouseTarget._globalAlpha ){\n                        curMouseTarget._globalAlpha = curMouseTarget.context.$model.globalAlpha;\n                    };\n\n                    //先把本尊给隐藏了\n                    curMouseTarget.context.globalAlpha = 0;\n                    //然后克隆一个副本到activeStage\n                    \n                    var cloneObject = me._clone2hoverStage( curMouseTarget , 0 );\n                    cloneObject.context.globalAlpha = curMouseTarget._globalAlpha;\n                } else {\n                    //drag move ing\n                    me._dragIngHander( e , curMouseTarget , 0 );\n                };\n                me._draging = true;\n            } else {\n                //常规mousemove检测\n                //move事件中，需要不停的搜索target，这个开销挺大，\n                //后续可以优化，加上和帧率相当的延迟处理\n                me.__getcurPointsTarget( e , curMousePoint );\n            }\n\n        } else {\n            //其他的事件就直接在target上面派发事件\n            var child = curMouseTarget;\n            if( !child ){\n                child = root;\n            };\n            me.__dispatchEventInChilds( e , [ child ] );\n            me._cursorHander( child );\n        };\n\n        if( root.preventDefault ) {\n            //阻止默认浏览器动作(W3C) \n            if ( e && e.preventDefault ) {\n                e.preventDefault(); \n            } else {\n                window.event.returnValue = false;\n            }\n        }; \n    },\n\n    //notInRootView 真正的mouseout,鼠标已经不在图表的节点内了\n    __getcurPointsTarget : function(e, point, notInRootView ) {\n        var me     = this;\n        var root   = me.canvax;\n        var oldObj = me.curPointsTarget[0];\n\n        if( oldObj && !oldObj.context ){\n            oldObj = null;\n        };\n\n        var e = new Event( e );\n\n        if( e.type==\"mousemove\"\n            && oldObj && (oldObj._hoverClass && oldObj.hoverClone) && oldObj.pointChkPriority\n            && oldObj.getChildInPoint( point ) ){\n            //小优化,鼠标move的时候。计算频率太大，所以。做此优化\n            //如果有target存在，而且当前元素正在hoverStage中，而且当前鼠标还在target内,就没必要取检测整个displayList了\n            //开发派发常规mousemove事件\n            e.target = e.currentTarget = oldObj;\n            e.point  = oldObj.globalToLocal( point );\n            oldObj.dispatchEvent( e );\n            return;\n        };\n        var obj = notInRootView ? null: root.getObjectsUnderPoint( point , 1)[0];\n\n        if(oldObj && oldObj != obj || e.type==\"mouseout\") {\n            if( oldObj && oldObj.context ){\n                me.curPointsTarget[0] = null;\n                e.type     = \"mouseout\";\n                e.toTarget = obj; \n                e.target   = e.currentTarget = oldObj;\n                e.point    = oldObj.globalToLocal( point );\n                oldObj.dispatchEvent( e );\n            }\n        };\n\n        if( obj && oldObj != obj ){\n            me.curPointsTarget[0] = obj;\n            e.type       = \"mouseover\";\n            e.fromTarget = oldObj;\n            e.target     = e.currentTarget = obj;\n            e.point      = obj.globalToLocal( point );\n            obj.dispatchEvent( e );\n        };\n\n        if( e.type == \"mousemove\" && obj ){\n            e.target = e.currentTarget = oldObj;\n            e.point  = oldObj.globalToLocal( point );\n            oldObj.dispatchEvent( e );\n        };\n        me._cursorHander( obj , oldObj );\n    },\n    _cursorHander    : function( obj , oldObj ){\n        if(!obj && !oldObj ){\n            this._setCursor(\"default\");\n        }\n        if(obj && oldObj != obj && obj.context){\n            this._setCursor(obj.context.$model.cursor);\n        }\n    },\n    _setCursor : function(cursor) {\n        if(this._cursor == cursor){\n          //如果两次要设置的鼠标状态是一样的\n          return;\n        };\n        this.canvax.view.style.cursor = cursor;\n        this._cursor = cursor;\n    },\n    /*\n    * 原生事件系统------------------------------------------------end\n    */\n\n    /*\n     *第三方库的事件系统------------------------------------------------begin\n     *触屏事件处理函数\n     * */\n    __libHandler : function( e ) {\n        var me   = this;\n        var root = me.canvax;\n        root.updateViewOffset();\n        // touch 下的 curPointsTarget 从touches中来\n        //获取canvax坐标系统里面的坐标\n        me.curPoints = me.__getCanvaxPointInTouchs( e );\n        if( !me._draging ){\n            //如果在draging的话，target已经是选中了的，可以不用 检测了\n            me.curPointsTarget = me.__getChildInTouchs( me.curPoints );\n        };\n        if( me.curPointsTarget.length > 0 ){\n            //drag开始\n            if( e.type == me.drag.start){\n                //dragstart的时候touch已经准备好了target， curPointsTarget 里面只要有一个是有效的\n                //就认为drags开始\n                _.each( me.curPointsTarget , function( child , i ){\n                    if( child && child.dragEnabled ){\n                       //只要有一个元素就认为正在准备drag了\n                       me._draging = true;\n\n                       //有可能该child没有hover style\n                       if( !child._globalAlpha ){\n                           child._globalAlpha = child.context.$model.globalAlpha;\n                       };\n\n                       //然后克隆一个副本到activeStage\n                       me._clone2hoverStage( child , i );\n\n                       //先把本尊给隐藏了\n                       child.context.globalAlpha = 0;\n\n                       child.fire(\"dragstart\");\n\n                       return false;\n                    }\n                } ) \n            };\n\n            //dragIng\n            if( e.type == me.drag.move){\n                if( me._draging ){\n                    _.each( me.curPointsTarget , function( child , i ){\n                        if( child && child.dragEnabled) {\n                           me._dragIngHander( e , child , i);\n                        }\n                    } )\n                }\n            };\n\n            //drag结束\n            if( e.type == me.drag.end){\n                if( me._draging ){\n                    _.each( me.curPointsTarget , function( child , i ){\n                        if( child && child.dragEnabled) {\n                            me._dragEnd( e , child , 0 );\n                            child.fire(\"dragend\");\n                        }\n                    } );\n                    me._draging = false;\n                }\n            };\n            me.__dispatchEventInChilds( e , me.curPointsTarget );\n        } else {\n            //如果当前没有一个target，就把事件派发到canvax上面\n            me.__dispatchEventInChilds( e , [ root ] );\n        };\n    },\n    //从touchs中获取到对应touch , 在上面添加上canvax坐标系统的x，y\n    __getCanvaxPointInTouchs : function( e ){\n        var me        = this;\n        var root      = me.canvax;\n        var curTouchs = [];\n        _.each( e.point , function( touch ){\n           curTouchs.push( {\n               x : $.pageX( touch ) - root.viewOffset.left,\n               y : $.pageY( touch ) - root.viewOffset.top\n           } );\n        });\n        return curTouchs;\n    },\n    __getChildInTouchs : function( touchs ){\n        var me   = this;\n        var root = me.canvax;\n        var touchesTarget = [];\n        _.each( touchs , function(touch){\n            touchesTarget.push( root.getObjectsUnderPoint( touch , 1)[0] );\n        } );\n        return touchesTarget;\n    },\n    /*\n    *第三方库的事件系统------------------------------------------------end\n    */\n\n\n    /*\n     *@param {array} childs \n     * */\n    __dispatchEventInChilds: function(e, childs) {\n        if (!childs && !(\"length\" in childs)) {\n            return false;\n        }\n        var me = this;\n        var hasChild = false;\n        _.each(childs, function(child, i) {\n            if (child) {\n                hasChild = true;\n                var ce = new Event(e);\n                ce.target = ce.currentTarget = child || this;\n                ce.stagePoint = me.curPoints[i];\n                ce.point = ce.target.globalToLocal(ce.stagePoint);\n                child.dispatchEvent(ce);\n            }\n        });\n        return hasChild;\n    },\n    //克隆一个元素到hover stage中去\n    _clone2hoverStage: function(target, i) {\n        var me = this;\n        var root = me.canvax;\n        var _dragDuplicate = root._bufferStage.getChildById(target.id);\n        if (!_dragDuplicate) {\n            _dragDuplicate = target.clone(true);\n            _dragDuplicate._transform = target.getConcatenatedMatrix();\n\n            /**\n             *TODO: 因为后续可能会有手动添加的 元素到_bufferStage 里面来\n             *比如tips\n             *这类手动添加进来的肯定是因为需要显示在最外层的。在hover元素之上。\n             *所有自动添加的hover元素都默认添加在_bufferStage的最底层\n             **/\n            root._bufferStage.addChildAt(_dragDuplicate, 0);\n        }\n        _dragDuplicate.context.globalAlpha = target._globalAlpha;\n        target._dragPoint = target.globalToLocal(me.curPoints[i]);\n        return _dragDuplicate;\n    },\n    //drag 中 的处理函数\n    _dragIngHander: function(e, target, i) {\n        \n        var me = this;\n        var root = me.canvax;\n        var _point = target.globalToLocal( me.curPoints[i] );\n\n        //要对应的修改本尊的位置，但是要告诉引擎不要watch这个时候的变化\n        target._noHeart = true;\n        var _moveStage = target.moveing;\n        target.moveing = true;\n        target.context.x += (_point.x - target._dragPoint.x);\n        target.context.y += (_point.y - target._dragPoint.y);\n        target.fire(\"draging\");\n        target.moveing = _moveStage;\n        target._noHeart = false;\n        //同步完毕本尊的位置\n\n        //这里只能直接修改_transform 。 不能用下面的修改x，y的方式。\n        var _dragDuplicate = root._bufferStage.getChildById(target.id);\n        _dragDuplicate._transform = target.getConcatenatedMatrix();\n\n        //worldTransform在renderer的时候计算\n        _dragDuplicate.worldTransform = null;\n\n        //setWorldTransform都统一在render中执行，这里注释掉\n        //_dragDuplicate.setWorldTransform();\n\n        //直接修改的_transform不会出发心跳上报， 渲染引擎不制动这个stage需要绘制。\n        //所以要手动出发心跳包\n        _dragDuplicate.heartBeat();\n    },\n    //drag结束的处理函数\n    //TODO: dragend的还需要处理end的点是否还在元素上面，要恢复hover状态\n    _dragEnd: function(e, target, i) {\n        var me = this;\n        var root = me.canvax;\n\n        //_dragDuplicate 复制在_bufferStage 中的副本\n        var _dragDuplicate = root._bufferStage.getChildById(target.id);\n        _dragDuplicate && _dragDuplicate.destroy();\n\n        target.context.globalAlpha = target._globalAlpha;\n    }\n};\nexport default Handler;","/**\n * @class Events 事件对象\n * @description 事件对象\n * @author bujue\n */\n\nclass Events {\n    constructor(){}\n    \n    on(type, listener) {\n\n        if (this._listeners === undefined){\n            this._listeners = {};\n        }\n          \n\n        var listeners = this._listeners;\n\n        if (listeners[type] === undefined) {\n\n            listeners[type] = [];\n\n        }\n\n        if (listeners[type].indexOf(listener) === - 1) {\n\n            listeners[type].push(listener);\n\n        }\n\n    }\n\n    has(type, listener) {\n\n        if (this._listeners === undefined) return false;\n\n        var listeners = this._listeners;\n\n        return listeners[type] !== undefined && listeners[type].indexOf(listener) !== - 1;\n\n    }\n\n    off(type, listener) {\n\n        if (this._listeners === undefined) return;\n\n        var listeners = this._listeners;\n        var listenerArray = listeners[type];\n\n        if (listenerArray !== undefined) {\n\n            var index = listenerArray.indexOf(listener);\n\n            if (index !== - 1) {\n\n                listenerArray.splice(index, 1);\n\n            }\n\n        }\n\n    }\n\n    fire(event) {\n\n        if (this._listeners === undefined) return;\n\n        var listeners = this._listeners;\n        var listenerArray = listeners[event.type];\n\n        if (listenerArray !== undefined) {\n\n            event.target = this;\n\n            var array = listenerArray.slice(0);\n\n            for (var i = 0, l = array.length; i < l; i++) {\n\n                array[i].call(this, event);\n\n            }\n\n        }\n\n    }\n}\n\nexport { Events };","\nimport { version } from '../package.json';\n\nexport const REVISION = version;\n\n//draw Point\nexport const pointsMode = 0;\n\n//draw Line mode\nexport const LinesMode = 1;\nexport const LineLoopMode = 2;\nexport const LineStripMode = 3;\n\n//draw triangle  mode\nexport const TrianglesDrawMode = 4;\nexport const TriangleStripDrawMode = 5;\nexport const TriangleFanDrawMode = 6;\n\n\n\n\n\n\n\n\n//depth buffer \nexport const NeverDepth = 0;\nexport const AlwaysDepth = 1;\nexport const LessDepth = 2;\nexport const LessEqualDepth = 3;\nexport const EqualDepth = 4;\nexport const GreaterEqualDepth = 5;\nexport const GreaterDepth = 6;\nexport const NotEqualDepth = 7;\n\n//cull face\nexport const CullFaceNone = 0;\nexport const CullFaceBack = 1;\nexport const CullFaceFront = 2;\nexport const CullFaceFrontBack = 3;\nexport const FrontFaceDirectionCW = 0;\nexport const FrontFaceDirectionCCW = 1;\n\n//draw side\nexport const FrontSide = 0;\nexport const BackSide = 1;\nexport const DoubleSide = 2;\n\n\n//blending \nexport const NoBlending = 0;\nexport const NormalBlending = 1;\nexport const AdditiveBlending = 2;\nexport const SubtractiveBlending = 3;\nexport const MultiplyBlending = 4;\nexport const CustomBlending = 5;\nexport const AddEquation = 100;\nexport const SubtractEquation = 101;\nexport const ReverseSubtractEquation = 102;\nexport const MinEquation = 103;\nexport const MaxEquation = 104;\nexport const ZeroFactor = 200;\nexport const OneFactor = 201;\nexport const SrcColorFactor = 202;\nexport const OneMinusSrcColorFactor = 203;\nexport const SrcAlphaFactor = 204;\nexport const OneMinusSrcAlphaFactor = 205;\nexport const DstAlphaFactor = 206;\nexport const OneMinusDstAlphaFactor = 207;\nexport const DstColorFactor = 208;\nexport const OneMinusDstColorFactor = 209;\nexport const SrcAlphaSaturateFactor = 210;\n\n//texture map  or format\nexport const RepeatWrapping = 1000;\nexport const ClampToEdgeWrapping = 1001;\nexport const MirroredRepeatWrapping = 1002;\nexport const NearestFilter = 1003;\nexport const NearestMipMapNearestFilter = 1004;\nexport const NearestMipMapLinearFilter = 1005;\nexport const LinearFilter = 1006;\nexport const LinearMipMapNearestFilter = 1007;\nexport const LinearMipMapLinearFilter = 1008;\nexport const UnsignedByteType = 1009;\nexport const ByteType = 1010;\nexport const ShortType = 1011;\nexport const UnsignedShortType = 1012;\nexport const IntType = 1013;\nexport const UnsignedIntType = 1014;\nexport const FloatType = 1015;\nexport const HalfFloatType = 1016;\nexport const UnsignedShort4444Type = 1017;\nexport const UnsignedShort5551Type = 1018;\nexport const UnsignedShort565Type = 1019;\nexport const UnsignedInt248Type = 1020;\nexport const AlphaFormat = 1021;\nexport const RGBFormat = 1022;\nexport const RGBAFormat = 1023;\nexport const LuminanceFormat = 1024;\nexport const LuminanceAlphaFormat = 1025;\nexport const RGBEFormat = RGBAFormat;\nexport const DepthFormat = 1026;\nexport const DepthStencilFormat = 1027;\nexport const UVMapping = 300;\n//material  \nexport const NoColors = 0; //不用颜色\nexport const FaceColors = 1; //面颜色\nexport const VertexColors = 2; //顶点颜色 去geometry.colors取色\n\n\n","/**\n * @class Vector4\n * @description 用x,y,z,w 表示的四维向量 \n * @author bujue\n */\nclass Vector4 {\n    constructor(x, y, z, w) {\n        this.x = x || 0;\n        this.y = y || 0;\n        this.z = z || 0;\n        this.w = (w !== undefined) ? w : 1;\n        this.isVector4 = true;\n    }\n\n    set(x, y, z, w) {\n\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n\n        return this;\n\n    }\n\n    //向量乘以一个常量\n    multiplyScalar(scalar) {\n\n        this.x *= scalar;\n        this.y *= scalar;\n        this.z *= scalar;\n        this.w *= scalar;\n\n        return this;\n\n    }\n\n    //判断两个四维向量是否相等\n    equals(v) {\n\n        return ((v.x === this.x) && (v.y === this.y) && (v.z === this.z) && (v.w === this.w));\n\n    }\n    //复制四维向量\n    copy(v) {\n\n        this.x = v.x;\n        this.y = v.y;\n        this.z = v.z;\n        this.w = (v.w !== undefined) ? v.w : 1;\n\n        return this;\n\n    }\n\n    applyMatrix4(m) {\n\n        var x = this.x, y = this.y, z = this.z, w = this.w;\n        var e = m.elements;\n\n        this.x = e[0] * x + e[4] * y + e[8] * z + e[12] * w;\n        this.y = e[1] * x + e[5] * y + e[9] * z + e[13] * w;\n        this.z = e[2] * x + e[6] * y + e[10] * z + e[14] * w;\n        this.w = e[3] * x + e[7] * y + e[11] * z + e[15] * w;\n\n        return this;\n\n    }\n    normalize() {\n\n        return this.divideScalar(this.length() || 1);\n\n    }\n\n    divideScalar(scalar) {\n\n        return this.multiplyScalar(1 / scalar);\n\n    }\n\n    length () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n}\n\nexport { Vector4 };","\nconst _Math = {\n    DEG2RAD: Math.PI / 180,\n    RAD2DEG: 180 / Math.PI,\n\n    clamp(value, min, max) {\n\n        return Math.max(min, Math.min(max, value));\n\n    },\n    // compute euclidian modulo of m % n\n    // https://en.wikipedia.org/wiki/Modulo_operation\n\n    euclideanModulo(n, m) {\n\n        return ((n % m) + m) % m;\n\n    },\n\n    arrayMin(array) {\n\n        if (array.length === 0) return Infinity;\n\n        var min = array[0];\n\n        for (var i = 1, l = array.length; i < l; ++i) {\n\n            if (array[i] < min) min = array[i];\n\n        }\n\n        return min;\n\n    },\n\n    arrayMax(array) {\n\n        if (array.length === 0) return - Infinity;\n\n        var max = array[0];\n\n        for (var i = 1, l = array.length; i < l; ++i) {\n\n            if (array[i] > max) max = array[i];\n\n        }\n\n        return max;\n\n    },\n    //是否是2的幂次方\n    isPowerOfTwo(value) {\n        return (value & (value - 1)) === 0 && value !== 0;\n    },\n    //向下取一个数最接近的2的幂次方\n    floorPowerOfTwo(value) {\n        return Math.pow(2, Math.floor(Math.log(value) / Math.LN2));\n    },\n    //想上取一个数最接近的2的幂次方\n    ceilPowerOfTwo: function (value) {\n        return Math.pow(2, Math.ceil(Math.log(value) / Math.LN2));\n    },\n\n    degToRad(degrees) {\n        return degrees * _Math.DEG2RAD;\n    },\n\n    radToDeg(radians) {\n        return radians * _Math.RAD2DEG;\n    }\n\n}\n\nexport { _Math };","import { _Math } from './Math';\n//import { Matrix4 } from './Matrix4';\n// import { Quaternion } from './Quaternion';\n\n// var quaternion = new Quaternion();\n// var quaternion1 = new Quaternion();\n\n\n// var matrix1 = new Matrix4();\n\n// var min = new Vector3();\n// var max = new Vector3();\n\n// var v1 = new Vector3();\n// var v2 = new Vector3();\n\nclass Vector3 {\n\n    constructor(x, y, z) {\n        this.x = x || 0;\n        this.y = y || 0;\n        this.z = z || 0;\n        this.isVector3 = true;\n    }\n\n    set(x, y, z) {\n\n        this.x = x;\n        this.y = y;\n        this.z = z;\n\n        return this;\n\n    }\n\n    setScalar(scalar) {\n\n        this.x = scalar;\n        this.y = scalar;\n        this.z = scalar;\n\n        return this;\n\n    }\n\n    setX(x) {\n\n        this.x = x;\n\n        return this;\n\n    }\n\n    setY(y) {\n\n        this.y = y;\n\n        return this;\n\n    }\n\n    setZ(z) {\n\n        this.z = z;\n\n        return this;\n\n    }\n\n    setComponent(index, value) {\n\n        switch (index) {\n\n            case 0: this.x = value; break;\n            case 1: this.y = value; break;\n            case 2: this.z = value; break;\n            default: throw new Error('index is out of range: ' + index);\n\n        }\n\n        return this;\n\n    }\n\n    getComponent(index) {\n\n        switch (index) {\n\n            case 0: return this.x;\n            case 1: return this.y;\n            case 2: return this.z;\n            default: throw new Error('index is out of range: ' + index);\n\n        }\n\n    }\n\n    clone() {\n\n        return new this.constructor(this.x, this.y, this.z);\n\n    }\n\n    copy(v) {\n\n        this.x = v.x;\n        this.y = v.y;\n        this.z = v.z;\n\n        return this;\n\n    }\n\n    add(v, w) {\n\n        if (w !== undefined) {\n\n            console.warn('Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n            return this.addVectors(v, w);\n\n        }\n\n        this.x += v.x;\n        this.y += v.y;\n        this.z += v.z;\n\n        return this;\n\n    }\n\n    addScalar(s) {\n\n        this.x += s;\n        this.y += s;\n        this.z += s;\n\n        return this;\n\n    }\n\n    addVectors(a, b) {\n\n        this.x = a.x + b.x;\n        this.y = a.y + b.y;\n        this.z = a.z + b.z;\n\n        return this;\n\n    }\n\n    addScaledVector(v, s) {\n\n        this.x += v.x * s;\n        this.y += v.y * s;\n        this.z += v.z * s;\n\n        return this;\n\n    }\n\n    sub(v, w) {\n\n        if (w !== undefined) {\n\n            console.warn('Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n            return this.subVectors(v, w);\n\n        }\n\n        this.x -= v.x;\n        this.y -= v.y;\n        this.z -= v.z;\n\n        return this;\n\n    }\n\n    subScalar(s) {\n\n        this.x -= s;\n        this.y -= s;\n        this.z -= s;\n\n        return this;\n\n    }\n\n    subVectors(a, b) {\n\n        this.x = a.x - b.x;\n        this.y = a.y - b.y;\n        this.z = a.z - b.z;\n\n        return this;\n\n    }\n\n    multiply(v, w) {\n\n        if (w !== undefined) {\n\n            console.warn('Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.');\n            return this.multiplyVectors(v, w);\n\n        }\n\n        this.x *= v.x;\n        this.y *= v.y;\n        this.z *= v.z;\n\n        return this;\n\n    }\n\n    multiplyScalar(scalar) {\n\n        this.x *= scalar;\n        this.y *= scalar;\n        this.z *= scalar;\n\n        return this;\n\n    }\n\n    multiplyVectors(a, b) {\n\n        this.x = a.x * b.x;\n        this.y = a.y * b.y;\n        this.z = a.z * b.z;\n\n        return this;\n\n    }\n\n    // applyEuler(euler) {\n\n    //     if (!(euler && euler.isEuler)) {\n\n    //         console.error('Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.');\n\n    //     }\n\n    //     return this.applyQuaternion(quaternion.setFromEuler(euler));\n\n    // }\n\n\n    // applyAxisAngle(axis, angle) {\n\n    //     return this.applyQuaternion(quaternion1.setFromAxisAngle(axis, angle));\n\n    // }\n\n\n\n    applyMatrix3(m) {\n\n        var x = this.x, y = this.y, z = this.z;\n        var e = m.elements;\n\n        this.x = e[0] * x + e[3] * y + e[6] * z;\n        this.y = e[1] * x + e[4] * y + e[7] * z;\n        this.z = e[2] * x + e[5] * y + e[8] * z;\n\n        return this;\n\n    }\n\n    applyMatrix4(m) {\n\n        var x = this.x, y = this.y, z = this.z;\n        var e = m.elements;\n\n        var w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\n\n        this.x = (e[0] * x + e[4] * y + e[8] * z + e[12]) * w;\n        this.y = (e[1] * x + e[5] * y + e[9] * z + e[13]) * w;\n        this.z = (e[2] * x + e[6] * y + e[10] * z + e[14]) * w;\n\n        return this;\n\n    }\n\n    applyQuaternion(q) {\n\n        var x = this.x, y = this.y, z = this.z;\n        var qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n        // calculate quat * vector\n\n        var ix = qw * x + qy * z - qz * y;\n        var iy = qw * y + qz * x - qx * z;\n        var iz = qw * z + qx * y - qy * x;\n        var iw = - qx * x - qy * y - qz * z;\n\n        // calculate result * inverse quat\n\n        this.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n        this.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n        this.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n        return this;\n\n    }\n    project(camera, matrix) {\n\n        matrix.multiplyMatrices(camera.projectionMatrix, matrix.getInverse(camera.matrixWorld));\n        return this.applyMatrix4(matrix);\n\n    }\n\n\n\n    unproject(camera, matrix) {\n        return this.applyMatrix4(matrix.getInverse(camera.projectionMatrix)).applyMatrix4(camera.matrixWorld);\n    }\n\n\n    transformDirection(m) {\n\n        // input: Matrix4 affine matrix\n        // vector interpreted as a direction\n\n        var x = this.x, y = this.y, z = this.z;\n        var e = m.elements;\n\n        this.x = e[0] * x + e[4] * y + e[8] * z;\n        this.y = e[1] * x + e[5] * y + e[9] * z;\n        this.z = e[2] * x + e[6] * y + e[10] * z;\n\n        return this.normalize();\n\n    }\n\n    divide(v) {\n\n        this.x /= v.x;\n        this.y /= v.y;\n        this.z /= v.z;\n\n        return this;\n\n    }\n\n    divideScalar(scalar) {\n\n        return this.multiplyScalar(1 / scalar);\n\n    }\n\n    min(v) {\n\n        this.x = Math.min(this.x, v.x);\n        this.y = Math.min(this.y, v.y);\n        this.z = Math.min(this.z, v.z);\n\n        return this;\n\n    }\n\n    max(v) {\n\n        this.x = Math.max(this.x, v.x);\n        this.y = Math.max(this.y, v.y);\n        this.z = Math.max(this.z, v.z);\n\n        return this;\n\n    }\n\n    // clamp(min, max) {\n\n    //     // assumes min < max, componentwise\n\n    //     this.x = Math.max(min.x, Math.min(max.x, this.x));\n    //     this.y = Math.max(min.y, Math.min(max.y, this.y));\n    //     this.z = Math.max(min.z, Math.min(max.z, this.z));\n\n    //     return this;\n\n    // }\n\n    // clampScalar(minVal, maxVal) {\n\n    //     min.set(minVal, minVal, minVal);\n    //     max.set(maxVal, maxVal, maxVal);\n\n    //     return this.clamp(min, max);\n\n    // }\n\n    clampLength(min, max) {\n\n        var length = this.length();\n\n        return this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n\n    }\n\n    floor() {\n\n        this.x = Math.floor(this.x);\n        this.y = Math.floor(this.y);\n        this.z = Math.floor(this.z);\n\n        return this;\n\n    }\n\n    ceil() {\n\n        this.x = Math.ceil(this.x);\n        this.y = Math.ceil(this.y);\n        this.z = Math.ceil(this.z);\n\n        return this;\n\n    }\n\n    round() {\n\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        this.z = Math.round(this.z);\n\n        return this;\n\n    }\n\n    roundToZero() {\n\n        this.x = (this.x < 0) ? Math.ceil(this.x) : Math.floor(this.x);\n        this.y = (this.y < 0) ? Math.ceil(this.y) : Math.floor(this.y);\n        this.z = (this.z < 0) ? Math.ceil(this.z) : Math.floor(this.z);\n\n        return this;\n\n    }\n\n    negate() {\n\n        this.x = - this.x;\n        this.y = - this.y;\n        this.z = - this.z;\n\n        return this;\n\n    }\n\n    dot(v) {\n\n        return this.x * v.x + this.y * v.y + this.z * v.z;\n\n    }\n\n    // TODO lengthSquared?\n\n    lengthSq() {\n\n        return this.x * this.x + this.y * this.y + this.z * this.z;\n\n    }\n\n    length() {\n\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\n    }\n\n    lengthManhattan() {\n\n        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);\n\n    }\n\n    normalize() {\n\n        return this.divideScalar(this.length() || 1);\n\n    }\n\n    setLength(length) {\n\n        return this.normalize().multiplyScalar(length);\n\n    }\n\n    lerp(v, alpha) {\n\n        this.x += (v.x - this.x) * alpha;\n        this.y += (v.y - this.y) * alpha;\n        this.z += (v.z - this.z) * alpha;\n\n        return this;\n\n    }\n\n    lerpVectors(v1, v2, alpha) {\n\n        return this.subVectors(v2, v1).multiplyScalar(alpha).add(v1);\n\n    }\n\n    cross(v, w) {\n\n        if (w !== undefined) {\n\n            console.warn('Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.');\n            return this.crossVectors(v, w);\n\n        }\n\n        var x = this.x, y = this.y, z = this.z;\n\n        this.x = y * v.z - z * v.y;\n        this.y = z * v.x - x * v.z;\n        this.z = x * v.y - y * v.x;\n\n        return this;\n\n    }\n\n    crossVectors(a, b) {\n\n        var ax = a.x, ay = a.y, az = a.z;\n        var bx = b.x, by = b.y, bz = b.z;\n\n        this.x = ay * bz - az * by;\n        this.y = az * bx - ax * bz;\n        this.z = ax * by - ay * bx;\n\n        return this;\n\n    }\n\n    projectOnVector(vector) {\n\n        var scalar = vector.dot(this) / vector.lengthSq();\n\n        return this.copy(vector).multiplyScalar(scalar);\n\n    }\n\n    // projectOnPlane(planeNormal) {\n\n    //     v1.copy(this).projectOnVector(planeNormal);\n\n    //     return this.sub(v1);\n\n    // }\n\n\n\n\n\n    // reflect incident vector off plane orthogonal to normal\n    // normal is assumed to have unit length\n\n\n\n    // reflect(normal) {\n\n    //     return this.sub(v2.copy(normal).multiplyScalar(2 * this.dot(normal)));\n\n    // }\n\n\n\n    angleTo(v) {\n\n        var theta = this.dot(v) / (Math.sqrt(this.lengthSq() * v.lengthSq()));\n\n        // clamp, to handle numerical problems\n\n        return Math.acos(_Math.clamp(theta, - 1, 1));\n\n    }\n\n    distanceTo(v) {\n\n        return Math.sqrt(this.distanceToSquared(v));\n\n    }\n\n    distanceToSquared(v) {\n\n        var dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n        return dx * dx + dy * dy + dz * dz;\n\n    }\n\n    distanceToManhattan(v) {\n\n        return Math.abs(this.x - v.x) + Math.abs(this.y - v.y) + Math.abs(this.z - v.z);\n\n    }\n\n    setFromSpherical(s) {\n\n        var sinPhiRadius = Math.sin(s.phi) * s.radius;\n\n        this.x = sinPhiRadius * Math.sin(s.theta);\n        this.y = Math.cos(s.phi) * s.radius;\n        this.z = sinPhiRadius * Math.cos(s.theta);\n\n        return this;\n\n    }\n\n    setFromCylindrical(c) {\n\n        this.x = c.radius * Math.sin(c.theta);\n        this.y = c.y;\n        this.z = c.radius * Math.cos(c.theta);\n\n        return this;\n\n    }\n\n    setFromMatrixPosition(m) {\n\n        var e = m.elements;\n\n        this.x = e[12];\n        this.y = e[13];\n        this.z = e[14];\n\n        return this;\n\n    }\n\n    setFromMatrixScale(m) {\n\n        var sx = this.setFromMatrixColumn(m, 0).length();\n        var sy = this.setFromMatrixColumn(m, 1).length();\n        var sz = this.setFromMatrixColumn(m, 2).length();\n\n        this.x = sx;\n        this.y = sy;\n        this.z = sz;\n\n        return this;\n\n    }\n\n    setFromMatrixColumn(m, index) {\n\n        return this.fromArray(m.elements, index * 4);\n\n    }\n\n    equals(v) {\n\n        return ((v.x === this.x) && (v.y === this.y) && (v.z === this.z));\n\n    }\n\n    fromArray(array, offset) {\n\n        if (offset === undefined) offset = 0;\n\n        this.x = array[offset];\n        this.y = array[offset + 1];\n        this.z = array[offset + 2];\n\n        return this;\n\n    }\n\n    toArray(array, offset) {\n\n        if (array === undefined) array = [];\n        if (offset === undefined) offset = 0;\n\n        array[offset] = this.x;\n        array[offset + 1] = this.y;\n        array[offset + 2] = this.z;\n\n        return array;\n\n    }\n\n    fromBufferAttribute(attribute, index, offset) {\n\n        if (offset !== undefined) {\n\n            console.warn('Vector3: offset has been removed from .fromBufferAttribute().');\n\n        }\n\n        this.x = attribute.getX(index);\n        this.y = attribute.getY(index);\n        this.z = attribute.getZ(index);\n\n        return this;\n\n    }\n    clamp(min, max) {\n\n        // assumes min < max, componentwise\n\n        this.x = Math.max(min.x, Math.min(max.x, this.x));\n        this.y = Math.max(min.y, Math.min(max.y, this.y));\n        this.z = Math.max(min.z, Math.min(max.z, this.z));\n\n        return this;\n\n    }\n\n    clampScalar(minVal, maxVal) {\n\n        let min = new Vector3();\n        let max = new Vector3();\n\n        min.set(minVal, minVal, minVal);\n        max.set(maxVal, maxVal, maxVal);\n\n        return this.clamp(min, max);\n\n\n\n    }\n\n}\n\nexport { Vector3 }","import { _Math } from './Math.js'\n\n/**\n * @class Color\n * @description 颜色类\n * @author bujue\n */\n\nclass Color {\n    constructor(r, g, b, a) {\n\n\n        this.r = 1;\n        this.g = 1;\n        this.b = 1;\n        this.a = 1;\n        this.isColor = !0;\n        if (g === undefined && b === undefined && a === undefined) {\n            return this.set(r);\n        }\n        return this.setRGBA(r, g, b, a);\n    }\n\n    set(value) {\n        if (value && value.isColor) {\n\n            this.copy(value);\n\n        } else if (typeof value === 'number') {\n\n            this.setHex(value);\n\n        } else if (typeof value === 'string') {\n\n            this.setStyle(value);\n\n        }\n\n        return this;\n    }\n    //通过0xffffff 16进制赋值\n    setHex(hex) {\n\n        hex = Math.floor(hex);\n\n        this.r = (hex >> 16 & 255) / 255;\n        this.g = (hex >> 8 & 255) / 255;\n        this.b = (hex & 255) / 255;\n\n        return this;\n\n    }\n    //通过RGB方式设置颜色\n    setRGB(r, g, b) {\n\n        this.r = r;\n        this.g = g;\n        this.b = b;\n\n        return this;\n\n    }\n    //通过RGBA方式设置颜色\n    setRGBA(r, g, b, a) {\n\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n\n        return this;\n\n    }\n    //通过\"#FFFFFF\"方式设置颜色\n    setStyle(style) {\n\n        var m;\n\n        if (m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(style)) {\n\n            // rgb / hsl\n\n            var color;\n            var name = m[1];\n            var components = m[2];\n\n            switch (name) {\n\n                case 'rgb':\n                case 'rgba':\n                    if (color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components)) {\n\n                        // rgb(255,0,0) rgba(255,0,0,0.5)\n                        this.r = Math.min(255, parseInt(color[1], 10)) / 255;\n                        this.g = Math.min(255, parseInt(color[2], 10)) / 255;\n                        this.b = Math.min(255, parseInt(color[3], 10)) / 255;\n\n                        if (color[5]) {\n                            if (color[5] > 1) {\n                                this.a = Math.min(255, parseInt(color[5], 10)) / 255;\n                            } else {\n                                this.a = Math.min(1, color[5]);\n                            }\n\n                        }\n\n\n                        return this;\n\n                    }\n\n                    if (color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components)) {\n\n                        // rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n                        this.r = Math.min(100, parseInt(color[1], 10)) / 100;\n                        this.g = Math.min(100, parseInt(color[2], 10)) / 100;\n                        this.b = Math.min(100, parseInt(color[3], 10)) / 100;\n\n                        if (color[5]) {\n                            if (color[5] > 1) {\n                                this.a = Math.min(255, parseInt(color[5], 10)) / 255;\n                            } else {\n                                this.a = Math.min(1, color[5]);\n                            }\n\n                        }\n\n                        return this;\n\n                    }\n\n                    break;\n\n                case 'hsl':\n                case 'hsla':\n\n                    if (color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(components)) {\n\n                        // hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n                        var h = parseFloat(color[1]) / 360;\n                        var s = parseInt(color[2], 10) / 100;\n                        var l = parseInt(color[3], 10) / 100;\n\n                        if (color[5]) {\n                            if (color[5] > 1) {\n                                this.a = Math.min(255, parseInt(color[5], 10)) / 255;\n                            } else {\n                                this.a = Math.min(1, parseInt(color[5], 10));\n                            }\n\n                        }\n\n                        return this.setHSL(h, s, l);\n\n                    }\n\n                    break;\n\n            }\n\n        } else if (m = /^\\#([A-Fa-f0-9]+)$/.exec(style)) {\n\n            // hex color\n\n            var hex = m[1];\n            var size = hex.length;\n\n            if (size === 3) {\n\n                // #ff0\n                this.r = parseInt(hex.charAt(0) + hex.charAt(0), 16) / 255;\n                this.g = parseInt(hex.charAt(1) + hex.charAt(1), 16) / 255;\n                this.b = parseInt(hex.charAt(2) + hex.charAt(2), 16) / 255;\n\n                return this;\n\n            } else if (size === 6) {\n\n                // #ff0000\n                this.r = parseInt(hex.charAt(0) + hex.charAt(1), 16) / 255;\n                this.g = parseInt(hex.charAt(2) + hex.charAt(3), 16) / 255;\n                this.b = parseInt(hex.charAt(4) + hex.charAt(5), 16) / 255;\n\n                return this;\n\n            }\n\n        }\n\n        if (style && style.length > 0) {\n\n            // color keywords\n            var hex = ColorKeywords[style];\n\n            if (hex !== undefined) {\n\n                // red\n                this.setHex(hex);\n\n            } else {\n\n                // unknown color\n                console.warn('Color: Unknown color ' + style);\n\n            }\n\n        }\n\n        return this;\n\n    }\n\n    copy(color) {\n\n        this.r = color.r;\n        this.g = color.g;\n        this.b = color.b;\n\n        return this;\n\n    }\n\n    setHSL(h, s, l) {\n        return setHSL.call(this, h, s, l)\n    }\n\n    setHSLA(h, s, l, a) {\n        let _color = setHSL.call(this, h, s, l);\n        _color.a = a;\n        return _color;\n    }\n    getHSL(target) {\n\n        // h,s,l ranges are in 0.0 - 1.0\n\n        if (target === undefined) {\n\n            console.warn('Color: .getHSL() target is now required');\n            target = { h: 0, s: 0, l: 0 };\n\n        }\n\n        var r = this.r, g = this.g, b = this.b;\n\n        var max = Math.max(r, g, b);\n        var min = Math.min(r, g, b);\n\n        var hue, saturation;\n        var lightness = (min + max) / 2.0;\n\n        if (min === max) {\n\n            hue = 0;\n            saturation = 0;\n\n        } else {\n\n            var delta = max - min;\n\n            saturation = lightness <= 0.5 ? delta / (max + min) : delta / (2 - max - min);\n\n            switch (max) {\n\n                case r: hue = (g - b) / delta + (g < b ? 6 : 0); break;\n                case g: hue = (b - r) / delta + 2; break;\n                case b: hue = (r - g) / delta + 4; break;\n\n            }\n\n            hue /= 6;\n\n        }\n\n        target.h = hue;\n        target.s = saturation;\n        target.l = lightness;\n\n        return target;\n\n    }\n\n    clone() {\n        return new this.constructor(this.r, this.g, this.b, this.a);\n    }\n    copy(color) {\n        this.r = color.r;\n        this.g = color.g;\n        this.b = color.b;\n\n        return this;\n    }\n\n    multiplyScalar(s) {\n\n        this.r *= s;\n        this.g *= s;\n        this.b *= s;\n\n        return this;\n\n    }\n    getHex() {\n\n        return (this.r * 255) << 16 ^ (this.g * 255) << 8 ^ (this.b * 255) << 0;\n\n    }\n\n    getHexString() {\n\n        return ('000000' + this.getHex().toString(16)).slice(- 6);\n\n    }\n\n\n}\n\nvar setHSL = (function () {\n\n    function hue2rgb(p, q, t) {\n\n        if (t < 0) t += 1;\n        if (t > 1) t -= 1;\n        if (t < 1 / 6) return p + (q - p) * 6 * t;\n        if (t < 1 / 2) return q;\n        if (t < 2 / 3) return p + (q - p) * 6 * (2 / 3 - t);\n        return p;\n\n    }\n\n    return function setHSL(h, s, l) {\n\n        // h,s,l ranges are in 0.0 - 1.0\n        h = _Math.euclideanModulo(h, 1);\n        s = _Math.clamp(s, 0, 1);\n        l = _Math.clamp(l, 0, 1);\n\n        if (s === 0) {\n\n            this.r = this.g = this.b = l;\n\n        } else {\n\n            var p = l <= 0.5 ? l * (1 + s) : l + s - (l * s);\n            var q = (2 * l) - p;\n\n            this.r = hue2rgb(q, p, h + 1 / 3);\n            this.g = hue2rgb(q, p, h);\n            this.b = hue2rgb(q, p, h - 1 / 3);\n\n        }\n\n        return this;\n\n    };\n\n\n})();\n\nvar ColorKeywords = {\n    'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n    'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n    'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n    'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n    'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n    'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n    'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n    'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n    'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n    'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n    'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n    'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n    'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n    'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n    'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n    'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n    'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n    'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n    'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n    'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n    'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n    'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n    'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n    'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32\n};\n\n\nexport { Color };","import { Vector3 } from './Vector3';\n\n// var vector = new Vector3();\n// var matrix = new Matrix4();\n\nvar v1 = new Vector3();\nvar v2 = new Vector3();\n\nvar x = new Vector3();\nvar y = new Vector3();\nvar z = new Vector3();\n\nclass Matrix4 {\n    constructor() {\n        this.elements = [\n\n            1, 0, 0, 0,\n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            0, 0, 0, 1\n\n        ];\n\n        if (arguments.length > 0) {\n\n            console.error('Matrix4: the constructor no longer reads arguments. use .set() instead.');\n\n        }\n        this.isMatrix4 = true;\n    }\n\n    set(n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44) {\n\n        var te = this.elements;\n\n        te[0] = n11; te[4] = n12; te[8] = n13; te[12] = n14;\n        te[1] = n21; te[5] = n22; te[9] = n23; te[13] = n24;\n        te[2] = n31; te[6] = n32; te[10] = n33; te[14] = n34;\n        te[3] = n41; te[7] = n42; te[11] = n43; te[15] = n44;\n\n        return this;\n\n    }\n\n    identity() {\n\n        this.set(\n\n            1, 0, 0, 0,\n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            0, 0, 0, 1\n\n        );\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new Matrix4().fromArray(this.elements);\n\n    }\n\n    copy(m) {\n\n        var te = this.elements;\n        var me = m.elements;\n\n        te[0] = me[0]; te[1] = me[1]; te[2] = me[2]; te[3] = me[3];\n        te[4] = me[4]; te[5] = me[5]; te[6] = me[6]; te[7] = me[7];\n        te[8] = me[8]; te[9] = me[9]; te[10] = me[10]; te[11] = me[11];\n        te[12] = me[12]; te[13] = me[13]; te[14] = me[14]; te[15] = me[15];\n\n        return this;\n\n    }\n\n    copyPosition(m) {\n\n        var te = this.elements, me = m.elements;\n\n        te[12] = me[12];\n        te[13] = me[13];\n        te[14] = me[14];\n\n        return this;\n\n    }\n\n    extractBasis(xAxis, yAxis, zAxis) {\n\n        xAxis.setFromMatrixColumn(this, 0);\n        yAxis.setFromMatrixColumn(this, 1);\n        zAxis.setFromMatrixColumn(this, 2);\n\n        return this;\n\n    }\n\n    makeBasis(xAxis, yAxis, zAxis) {\n\n        this.set(\n            xAxis.x, yAxis.x, zAxis.x, 0,\n            xAxis.y, yAxis.y, zAxis.y, 0,\n            xAxis.z, yAxis.z, zAxis.z, 0,\n            0, 0, 0, 1\n        );\n\n        return this;\n\n    }\n\n    extractRotation(m) {\n\n        var te = this.elements;\n        var me = m.elements;\n\n        var scaleX = 1 / v1.setFromMatrixColumn(m, 0).length();\n        var scaleY = 1 / v1.setFromMatrixColumn(m, 1).length();\n        var scaleZ = 1 / v1.setFromMatrixColumn(m, 2).length();\n\n        te[0] = me[0] * scaleX;\n        te[1] = me[1] * scaleX;\n        te[2] = me[2] * scaleX;\n\n        te[4] = me[4] * scaleY;\n        te[5] = me[5] * scaleY;\n        te[6] = me[6] * scaleY;\n\n        te[8] = me[8] * scaleZ;\n        te[9] = me[9] * scaleZ;\n        te[10] = me[10] * scaleZ;\n\n        return this;\n\n    }\n\n    makeRotationFromEuler(euler) {\n\n        if (!(euler && euler.isEuler)) {\n\n            console.error('Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.');\n\n        }\n\n        var te = this.elements;\n\n        var x = euler.x, y = euler.y, z = euler.z;\n        var a = Math.cos(x), b = Math.sin(x);\n        var c = Math.cos(y), d = Math.sin(y);\n        var e = Math.cos(z), f = Math.sin(z);\n\n        if (euler.order === 'XYZ') {\n\n            var ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n            te[0] = c * e;\n            te[4] = - c * f;\n            te[8] = d;\n\n            te[1] = af + be * d;\n            te[5] = ae - bf * d;\n            te[9] = - b * c;\n\n            te[2] = bf - ae * d;\n            te[6] = be + af * d;\n            te[10] = a * c;\n\n        } else if (euler.order === 'YXZ') {\n\n            var ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n            te[0] = ce + df * b;\n            te[4] = de * b - cf;\n            te[8] = a * d;\n\n            te[1] = a * f;\n            te[5] = a * e;\n            te[9] = - b;\n\n            te[2] = cf * b - de;\n            te[6] = df + ce * b;\n            te[10] = a * c;\n\n        } else if (euler.order === 'ZXY') {\n\n            var ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n            te[0] = ce - df * b;\n            te[4] = - a * f;\n            te[8] = de + cf * b;\n\n            te[1] = cf + de * b;\n            te[5] = a * e;\n            te[9] = df - ce * b;\n\n            te[2] = - a * d;\n            te[6] = b;\n            te[10] = a * c;\n\n        } else if (euler.order === 'ZYX') {\n\n            var ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n            te[0] = c * e;\n            te[4] = be * d - af;\n            te[8] = ae * d + bf;\n\n            te[1] = c * f;\n            te[5] = bf * d + ae;\n            te[9] = af * d - be;\n\n            te[2] = - d;\n            te[6] = b * c;\n            te[10] = a * c;\n\n        } else if (euler.order === 'YZX') {\n\n            var ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n            te[0] = c * e;\n            te[4] = bd - ac * f;\n            te[8] = bc * f + ad;\n\n            te[1] = f;\n            te[5] = a * e;\n            te[9] = - b * e;\n\n            te[2] = - d * e;\n            te[6] = ad * f + bc;\n            te[10] = ac - bd * f;\n\n        } else if (euler.order === 'XZY') {\n\n            var ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n            te[0] = c * e;\n            te[4] = - f;\n            te[8] = d * e;\n\n            te[1] = ac * f + bd;\n            te[5] = a * e;\n            te[9] = ad * f - bc;\n\n            te[2] = bc * f - ad;\n            te[6] = b * e;\n            te[10] = bd * f + ac;\n\n        }\n\n        // last column\n        te[3] = 0;\n        te[7] = 0;\n        te[11] = 0;\n\n        // bottom row\n        te[12] = 0;\n        te[13] = 0;\n        te[14] = 0;\n        te[15] = 1;\n\n        return this;\n\n    }\n\n    makeRotationFromQuaternion(q) {\n\n        var te = this.elements;\n\n        var x = q._x, y = q._y, z = q._z, w = q._w;\n        var x2 = x + x, y2 = y + y, z2 = z + z;\n        var xx = x * x2, xy = x * y2, xz = x * z2;\n        var yy = y * y2, yz = y * z2, zz = z * z2;\n        var wx = w * x2, wy = w * y2, wz = w * z2;\n\n        te[0] = 1 - (yy + zz);\n        te[4] = xy - wz;\n        te[8] = xz + wy;\n\n        te[1] = xy + wz;\n        te[5] = 1 - (xx + zz);\n        te[9] = yz - wx;\n\n        te[2] = xz - wy;\n        te[6] = yz + wx;\n        te[10] = 1 - (xx + yy);\n\n        // last column\n        te[3] = 0;\n        te[7] = 0;\n        te[11] = 0;\n\n        // bottom row\n        te[12] = 0;\n        te[13] = 0;\n        te[14] = 0;\n        te[15] = 1;\n\n        return this;\n\n    }\n\n    lookAt(eye, target, up) {\n\n        var te = this.elements;\n\n        z.subVectors(eye, target);\n\n        if (z.lengthSq() === 0) {\n\n            // eye and target are in the same position\n\n            z.z = 1;\n\n        }\n\n        z.normalize();\n        x.crossVectors(up, z);\n\n        if (x.lengthSq() === 0) {\n\n            // up and z are parallel\n\n            if (Math.abs(up.z) === 1) {\n\n                z.x += 0.0001;\n\n            } else {\n\n                z.z += 0.0001;\n\n            }\n\n            z.normalize();\n            x.crossVectors(up, z);\n\n        }\n\n        x.normalize();\n        y.crossVectors(z, x);\n\n        te[0] = x.x; te[4] = y.x; te[8] = z.x;\n        te[1] = x.y; te[5] = y.y; te[9] = z.y;\n        te[2] = x.z; te[6] = y.z; te[10] = z.z;\n\n        return this;\n\n    }\n\n\n\n    multiply(m, n) {\n\n        if (n !== undefined) {\n\n            console.warn('Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.');\n            return this.multiplyMatrices(m, n);\n\n        }\n\n        return this.multiplyMatrices(this, m);\n\n    }\n\n    premultiply(m) {\n\n        return this.multiplyMatrices(m, this);\n\n    }\n\n    multiplyMatrices(a, b) {\n\n        var ae = a.elements;\n        var be = b.elements;\n        var te = this.elements;\n\n        var a11 = ae[0], a12 = ae[4], a13 = ae[8], a14 = ae[12];\n        var a21 = ae[1], a22 = ae[5], a23 = ae[9], a24 = ae[13];\n        var a31 = ae[2], a32 = ae[6], a33 = ae[10], a34 = ae[14];\n        var a41 = ae[3], a42 = ae[7], a43 = ae[11], a44 = ae[15];\n\n        var b11 = be[0], b12 = be[4], b13 = be[8], b14 = be[12];\n        var b21 = be[1], b22 = be[5], b23 = be[9], b24 = be[13];\n        var b31 = be[2], b32 = be[6], b33 = be[10], b34 = be[14];\n        var b41 = be[3], b42 = be[7], b43 = be[11], b44 = be[15];\n\n        te[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n        te[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n        te[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n        te[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n        te[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n        te[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n        te[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n        te[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n        te[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n        te[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n        te[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n        te[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n        te[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n        te[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n        te[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n        te[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n        return this;\n\n    }\n\n    multiplyScalar(s) {\n\n        var te = this.elements;\n\n        te[0] *= s; te[4] *= s; te[8] *= s; te[12] *= s;\n        te[1] *= s; te[5] *= s; te[9] *= s; te[13] *= s;\n        te[2] *= s; te[6] *= s; te[10] *= s; te[14] *= s;\n        te[3] *= s; te[7] *= s; te[11] *= s; te[15] *= s;\n\n        return this;\n\n    }\n\n    applyToBufferAttribute(attribute) {\n\n        for (var i = 0, l = attribute.count; i < l; i++) {\n\n            v2.x = attribute.getX(i);\n            v2.y = attribute.getY(i);\n            v2.z = attribute.getZ(i);\n\n            v2.applyMatrix4(this);\n\n            attribute.setXYZ(i, v2.x, v2.y, v2.z);\n\n        }\n\n        return attribute;\n\n    }\n\n\n\n    determinant() {\n\n        var te = this.elements;\n\n        var n11 = te[0], n12 = te[4], n13 = te[8], n14 = te[12];\n        var n21 = te[1], n22 = te[5], n23 = te[9], n24 = te[13];\n        var n31 = te[2], n32 = te[6], n33 = te[10], n34 = te[14];\n        var n41 = te[3], n42 = te[7], n43 = te[11], n44 = te[15];\n\n        //TODO: make this more efficient\n        //( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n        return (\n            n41 * (\n                + n14 * n23 * n32\n                - n13 * n24 * n32\n                - n14 * n22 * n33\n                + n12 * n24 * n33\n                + n13 * n22 * n34\n                - n12 * n23 * n34\n            ) +\n            n42 * (\n                + n11 * n23 * n34\n                - n11 * n24 * n33\n                + n14 * n21 * n33\n                - n13 * n21 * n34\n                + n13 * n24 * n31\n                - n14 * n23 * n31\n            ) +\n            n43 * (\n                + n11 * n24 * n32\n                - n11 * n22 * n34\n                - n14 * n21 * n32\n                + n12 * n21 * n34\n                + n14 * n22 * n31\n                - n12 * n24 * n31\n            ) +\n            n44 * (\n                - n13 * n22 * n31\n                - n11 * n23 * n32\n                + n11 * n22 * n33\n                + n13 * n21 * n32\n                - n12 * n21 * n33\n                + n12 * n23 * n31\n            )\n\n        );\n\n    }\n\n    transpose() {\n\n        var te = this.elements;\n        var tmp;\n\n        tmp = te[1]; te[1] = te[4]; te[4] = tmp;\n        tmp = te[2]; te[2] = te[8]; te[8] = tmp;\n        tmp = te[6]; te[6] = te[9]; te[9] = tmp;\n\n        tmp = te[3]; te[3] = te[12]; te[12] = tmp;\n        tmp = te[7]; te[7] = te[13]; te[13] = tmp;\n        tmp = te[11]; te[11] = te[14]; te[14] = tmp;\n\n        return this;\n\n    }\n\n    setPosition(v) {\n\n        var te = this.elements;\n\n        te[12] = v.x;\n        te[13] = v.y;\n        te[14] = v.z;\n\n        return this;\n\n    }\n\n    getInverse(m, throwOnDegenerate) {\n\n        // based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n        var te = this.elements,\n            me = m.elements,\n\n            n11 = me[0], n21 = me[1], n31 = me[2], n41 = me[3],\n            n12 = me[4], n22 = me[5], n32 = me[6], n42 = me[7],\n            n13 = me[8], n23 = me[9], n33 = me[10], n43 = me[11],\n            n14 = me[12], n24 = me[13], n34 = me[14], n44 = me[15],\n\n            t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n            t12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n            t13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n            t14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n        var det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n        if (det === 0) {\n\n            var msg = \"Matrix4: .getInverse() can't invert matrix, determinant is 0\";\n\n            if (throwOnDegenerate === true) {\n\n                throw new Error(msg);\n\n            } else {\n\n                console.warn(msg);\n\n            }\n\n            return this.identity();\n\n        }\n\n        var detInv = 1 / det;\n\n        te[0] = t11 * detInv;\n        te[1] = (n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44) * detInv;\n        te[2] = (n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44) * detInv;\n        te[3] = (n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43) * detInv;\n\n        te[4] = t12 * detInv;\n        te[5] = (n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44) * detInv;\n        te[6] = (n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44) * detInv;\n        te[7] = (n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43) * detInv;\n\n        te[8] = t13 * detInv;\n        te[9] = (n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44) * detInv;\n        te[10] = (n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44) * detInv;\n        te[11] = (n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43) * detInv;\n\n        te[12] = t14 * detInv;\n        te[13] = (n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34) * detInv;\n        te[14] = (n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34) * detInv;\n        te[15] = (n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33) * detInv;\n\n        return this;\n\n    }\n\n    scale(v) {\n\n        var te = this.elements;\n        var x = v.x, y = v.y, z = v.z;\n\n        te[0] *= x; te[4] *= y; te[8] *= z;\n        te[1] *= x; te[5] *= y; te[9] *= z;\n        te[2] *= x; te[6] *= y; te[10] *= z;\n        te[3] *= x; te[7] *= y; te[11] *= z;\n\n        return this;\n\n    }\n\n    getMaxScaleOnAxis() {\n\n        var te = this.elements;\n\n        var scaleXSq = te[0] * te[0] + te[1] * te[1] + te[2] * te[2];\n        var scaleYSq = te[4] * te[4] + te[5] * te[5] + te[6] * te[6];\n        var scaleZSq = te[8] * te[8] + te[9] * te[9] + te[10] * te[10];\n\n        return Math.sqrt(Math.max(scaleXSq, scaleYSq, scaleZSq));\n\n    }\n\n    makeTranslation(x, y, z) {\n\n        this.set(\n\n            1, 0, 0, x,\n            0, 1, 0, y,\n            0, 0, 1, z,\n            0, 0, 0, 1\n\n        );\n\n        return this;\n\n    }\n\n    makeRotationX(theta) {\n\n        var c = Math.cos(theta), s = Math.sin(theta);\n\n        this.set(\n\n            1, 0, 0, 0,\n            0, c, - s, 0,\n            0, s, c, 0,\n            0, 0, 0, 1\n\n        );\n\n        return this;\n\n    }\n\n    makeRotationY(theta) {\n\n        var c = Math.cos(theta), s = Math.sin(theta);\n\n        this.set(\n\n            c, 0, s, 0,\n            0, 1, 0, 0,\n            - s, 0, c, 0,\n            0, 0, 0, 1\n\n        );\n\n        return this;\n\n    }\n\n    makeRotationZ(theta) {\n\n        var c = Math.cos(theta), s = Math.sin(theta);\n\n        this.set(\n\n            c, - s, 0, 0,\n            s, c, 0, 0,\n            0, 0, 1, 0,\n            0, 0, 0, 1\n\n        );\n\n        return this;\n\n    }\n\n    makeRotationAxis(axis, angle) {\n\n        // Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n        var c = Math.cos(angle);\n        var s = Math.sin(angle);\n        var t = 1 - c;\n        var x = axis.x, y = axis.y, z = axis.z;\n        var tx = t * x, ty = t * y;\n\n        this.set(\n\n            tx * x + c, tx * y - s * z, tx * z + s * y, 0,\n            tx * y + s * z, ty * y + c, ty * z - s * x, 0,\n            tx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n            0, 0, 0, 1\n\n        );\n\n        return this;\n\n    }\n\n    makeScale(x, y, z) {\n\n        this.set(\n\n            x, 0, 0, 0,\n            0, y, 0, 0,\n            0, 0, z, 0,\n            0, 0, 0, 1\n\n        );\n\n        return this;\n\n    }\n\n    makeShear(x, y, z) {\n\n        this.set(\n\n            1, y, z, 0,\n            x, 1, z, 0,\n            x, y, 1, 0,\n            0, 0, 0, 1\n\n        );\n\n        return this;\n\n    }\n\n    compose(position, quaternion, scale) {\n\n        this.makeRotationFromQuaternion(quaternion);\n        this.scale(scale);\n        this.setPosition(position);\n\n        return this;\n\n    }\n\n    decompose(position, quaternion, scale) {\n        var _decompose = decompose.bind(this)\n        return _decompose(position, quaternion, scale);\n    }\n\n\n\n    makePerspective(left, right, top, bottom, near, far) {\n\n        if (far === undefined) {\n\n            console.warn('Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.');\n\n        }\n\n        var te = this.elements;\n        var x = 2 * near / (right - left);\n        var y = 2 * near / (top - bottom);\n\n        var a = (right + left) / (right - left);\n        var b = (top + bottom) / (top - bottom);\n        var c = - (far + near) / (far - near);\n        var d = - 2 * far * near / (far - near);\n\n        te[0] = x; te[4] = 0; te[8] = a; te[12] = 0;\n        te[1] = 0; te[5] = y; te[9] = b; te[13] = 0;\n        te[2] = 0; te[6] = 0; te[10] = c; te[14] = d;\n        te[3] = 0; te[7] = 0; te[11] = - 1; te[15] = 0;\n\n        return this;\n\n    }\n\n    makeOrthographic(left, right, top, bottom, near, far) {\n\n        var te = this.elements;\n        var w = 1.0 / (right - left);\n        var h = 1.0 / (top - bottom);\n        var p = 1.0 / (far - near);\n\n        var x = (right + left) * w;\n        var y = (top + bottom) * h;\n        var z = (far + near) * p;\n\n        te[0] = 2 * w; te[4] = 0; te[8] = 0; te[12] = - x;\n        te[1] = 0; te[5] = 2 * h; te[9] = 0; te[13] = - y;\n        te[2] = 0; te[6] = 0; te[10] = - 2 * p; te[14] = - z;\n        te[3] = 0; te[7] = 0; te[11] = 0; te[15] = 1;\n\n        return this;\n\n    }\n\n    equals(matrix) {\n\n        var te = this.elements;\n        var me = matrix.elements;\n\n        for (var i = 0; i < 16; i++) {\n\n            if (te[i] !== me[i]) return false;\n\n        }\n\n        return true;\n\n    }\n\n    fromArray(array, offset) {\n\n        if (offset === undefined) offset = 0;\n\n        for (var i = 0; i < 16; i++) {\n\n            this.elements[i] = array[i + offset];\n\n        }\n\n        return this;\n\n    }\n\n    toArray(array, offset) {\n\n        if (array === undefined) array = [];\n        if (offset === undefined) offset = 0;\n\n        var te = this.elements;\n\n        array[offset] = te[0];\n        array[offset + 1] = te[1];\n        array[offset + 2] = te[2];\n        array[offset + 3] = te[3];\n\n        array[offset + 4] = te[4];\n        array[offset + 5] = te[5];\n        array[offset + 6] = te[6];\n        array[offset + 7] = te[7];\n\n        array[offset + 8] = te[8];\n        array[offset + 9] = te[9];\n        array[offset + 10] = te[10];\n        array[offset + 11] = te[11];\n\n        array[offset + 12] = te[12];\n        array[offset + 13] = te[13];\n        array[offset + 14] = te[14];\n        array[offset + 15] = te[15];\n\n        return array;\n\n    }\n}\n\nvar decompose = (function () {\n\n    var vector = new Vector3();\n    var matrix = new Matrix4();\n\n    return function decompose(position, quaternion, scale) {\n\n        var te = this.elements;\n\n        var sx = vector.set(te[0], te[1], te[2]).length();\n        var sy = vector.set(te[4], te[5], te[6]).length();\n        var sz = vector.set(te[8], te[9], te[10]).length();\n\n        // if determine is negative, we need to invert one scale\n        var det = this.determinant();\n        if (det < 0) sx = - sx;\n\n        position.x = te[12];\n        position.y = te[13];\n        position.z = te[14];\n\n        // scale the rotation part\n        matrix.copy(this);\n\n        var invSX = 1 / sx;\n        var invSY = 1 / sy;\n        var invSZ = 1 / sz;\n\n        matrix.elements[0] *= invSX;\n        matrix.elements[1] *= invSX;\n        matrix.elements[2] *= invSX;\n\n        matrix.elements[4] *= invSY;\n        matrix.elements[5] *= invSY;\n        matrix.elements[6] *= invSY;\n\n        matrix.elements[8] *= invSZ;\n        matrix.elements[9] *= invSZ;\n        matrix.elements[10] *= invSZ;\n\n        quaternion.setFromRotationMatrix(matrix);\n\n        scale.x = sx;\n        scale.y = sy;\n        scale.z = sz;\n\n        return this;\n\n    };\n\n})()\n\nexport { Matrix4 };","import { Vector3 } from './Vector3';\nimport { Sphere } from './Sphere';\n\nclass Box3 {\n    constructor(min, max) {\n\n        this.min = (min !== undefined) ? min : new Vector3(+ Infinity, + Infinity, + Infinity);\n        this.max = (max !== undefined) ? max : new Vector3(- Infinity, - Infinity, - Infinity);\n        this.isBox3 = true;\n    }\n    set(min, max) {\n\n        this.min.copy(min);\n        this.max.copy(max);\n\n        return this;\n\n    }\n\n    setFromArray(array) {\n\n        var minX = + Infinity;\n        var minY = + Infinity;\n        var minZ = + Infinity;\n\n        var maxX = - Infinity;\n        var maxY = - Infinity;\n        var maxZ = - Infinity;\n\n        for (var i = 0, l = array.length; i < l; i += 3) {\n\n            var x = array[i];\n            var y = array[i + 1];\n            var z = array[i + 2];\n\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (z < minZ) minZ = z;\n\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n            if (z > maxZ) maxZ = z;\n\n        }\n\n        this.min.set(minX, minY, minZ);\n        this.max.set(maxX, maxY, maxZ);\n\n        return this;\n\n    }\n\n    setFromBufferAttribute(attribute) {\n\n        var minX = + Infinity;\n        var minY = + Infinity;\n        var minZ = + Infinity;\n\n        var maxX = - Infinity;\n        var maxY = - Infinity;\n        var maxZ = - Infinity;\n\n        for (var i = 0, l = attribute.count; i < l; i++) {\n\n            var x = attribute.getX(i);\n            var y = attribute.getY(i);\n            var z = attribute.getZ(i);\n\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (z < minZ) minZ = z;\n\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n            if (z > maxZ) maxZ = z;\n\n        }\n\n        this.min.set(minX, minY, minZ);\n        this.max.set(maxX, maxY, maxZ);\n\n        return this;\n\n    }\n\n    setFromPoints(points) {\n\n        this.makeEmpty();\n\n        for (var i = 0, il = points.length; i < il; i++) {\n\n            this.expandByPoint(points[i]);\n\n        }\n\n        return this;\n\n    }\n\n    setFromCenterAndSize(center, size) {\n\n        return setFromCenterAndSize(center, size)\n\n    }\n\n    setFromObject(object) {\n\n        this.makeEmpty();\n\n        return this.expandByObject(object);\n\n    }\n\n    clone() {\n\n        return new this.constructor().copy(this);\n\n    }\n\n    copy(box) {\n\n        this.min.copy(box.min);\n        this.max.copy(box.max);\n\n        return this;\n\n    }\n\n    makeEmpty() {\n\n        this.min.x = this.min.y = this.min.z = + Infinity;\n        this.max.x = this.max.y = this.max.z = - Infinity;\n\n        return this;\n\n    }\n\n    isEmpty() {\n\n        // this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n        return (this.max.x < this.min.x) || (this.max.y < this.min.y) || (this.max.z < this.min.z);\n\n    }\n\n    getCenter(optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n        return this.isEmpty() ? result.set(0, 0, 0) : result.addVectors(this.min, this.max).multiplyScalar(0.5);\n\n    }\n\n    getSize(optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n        return this.isEmpty() ? result.set(0, 0, 0) : result.subVectors(this.max, this.min);\n\n    }\n\n    expandByPoint(point) {\n\n        this.min.min(point);\n        this.max.max(point);\n\n        return this;\n\n    }\n\n    expandByVector(vector) {\n\n        this.min.sub(vector);\n        this.max.add(vector);\n\n        return this;\n\n    }\n\n    expandByScalar(scalar) {\n\n        this.min.addScalar(- scalar);\n        this.max.addScalar(scalar);\n\n        return this;\n\n    }\n\n    expandByObject(object) {\n        return expandByObject.call(this, object);\n    }\n\n    containsPoint(point) {\n\n        return point.x < this.min.x || point.x > this.max.x ||\n            point.y < this.min.y || point.y > this.max.y ||\n            point.z < this.min.z || point.z > this.max.z ? false : true;\n\n    }\n\n    containsBox(box) {\n\n        return this.min.x <= box.min.x && box.max.x <= this.max.x &&\n            this.min.y <= box.min.y && box.max.y <= this.max.y &&\n            this.min.z <= box.min.z && box.max.z <= this.max.z;\n\n    }\n\n    getParameter(point, optionalTarget) {\n\n        // This can potentially have a divide by zero if the box\n        // has a size dimension of 0.\n\n        var result = optionalTarget || new Vector3();\n\n        return result.set(\n            (point.x - this.min.x) / (this.max.x - this.min.x),\n            (point.y - this.min.y) / (this.max.y - this.min.y),\n            (point.z - this.min.z) / (this.max.z - this.min.z)\n        );\n\n    }\n\n    intersectsBox(box) {\n\n        // using 6 splitting planes to rule out intersections.\n        return box.max.x < this.min.x || box.min.x > this.max.x ||\n            box.max.y < this.min.y || box.min.y > this.max.y ||\n            box.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n    }\n\n    intersectsSphere(sphere) {\n        return intersectsSphere(sphere);\n    }\n\n    intersectsPlane(plane) {\n\n        // We compute the minimum and maximum dot product values. If those values\n        // are on the same side (back or front) of the plane, then there is no intersection.\n\n        var min, max;\n\n        if (plane.normal.x > 0) {\n\n            min = plane.normal.x * this.min.x;\n            max = plane.normal.x * this.max.x;\n\n        } else {\n\n            min = plane.normal.x * this.max.x;\n            max = plane.normal.x * this.min.x;\n\n        }\n\n        if (plane.normal.y > 0) {\n\n            min += plane.normal.y * this.min.y;\n            max += plane.normal.y * this.max.y;\n\n        } else {\n\n            min += plane.normal.y * this.max.y;\n            max += plane.normal.y * this.min.y;\n\n        }\n\n        if (plane.normal.z > 0) {\n\n            min += plane.normal.z * this.min.z;\n            max += plane.normal.z * this.max.z;\n\n        } else {\n\n            min += plane.normal.z * this.max.z;\n            max += plane.normal.z * this.min.z;\n\n        }\n\n        return (min <= plane.constant && max >= plane.constant);\n\n    }\n\n    clampPoint(point, optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n        return result.copy(point).clamp(this.min, this.max);\n\n    }\n\n    distanceToPoint(point) {\n        return distanceToPoint.call(this,point);\n    }\n\n    getBoundingSphere(optionalTarget) {\n        return getBoundingSphere.call(this,optionalTarget);\n    }\n\n    intersect(box) {\n\n        this.min.max(box.min);\n        this.max.min(box.max);\n\n        // ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n        if (this.isEmpty()) this.makeEmpty();\n\n        return this;\n\n    }\n\n    union(box) {\n\n        this.min.min(box.min);\n        this.max.max(box.max);\n\n        return this;\n\n    }\n\n    applyMatrix4(matrix) {\n        return applyMatrix4(matrix);\n    }\n\n    translate(offset) {\n\n        this.min.add(offset);\n        this.max.add(offset);\n\n        return this;\n\n    }\n\n    equals(box) {\n\n        return box.min.equals(this.min) && box.max.equals(this.max);\n\n    }\n}\n\nvar setFromCenterAndSize = (function () {\n\n    var v1 = new Vector3();\n\n    return function setFromCenterAndSize(center, size) {\n\n        var halfSize = v1.copy(size).multiplyScalar(0.5);\n\n        this.min.copy(center).sub(halfSize);\n        this.max.copy(center).add(halfSize);\n\n        return this;\n\n    };\n\n})()\n\nvar expandByObject = (function () {\n\n    // Computes the world-axis-aligned bounding box of an object (including its children),\n    // accounting for both the object's, and children's, world transforms\n\n    var v1 = new Vector3();\n\n    return function expandByObject(object) {\n\n        var scope = this;\n\n        object.updateMatrixWorld(true);\n\n        object.traverse(function (node) {\n\n            var i, l;\n\n            var geometry = node.geometry;\n\n            if (geometry !== undefined) {\n\n                if (geometry.isGeometry) {\n\n                    var vertices = geometry.vertices;\n\n                    for (i = 0, l = vertices.length; i < l; i++) {\n\n                        v1.copy(vertices[i]);\n                        v1.applyMatrix4(node.matrixWorld);\n\n                        scope.expandByPoint(v1);\n\n                    }\n\n                } else if (geometry.isBufferGeometry) {\n\n                    var attribute = geometry.attributes.position;\n\n                    if (attribute !== undefined) {\n\n                        for (i = 0, l = attribute.count; i < l; i++) {\n\n                            v1.fromBufferAttribute(attribute, i).applyMatrix4(node.matrixWorld);\n\n                            scope.expandByPoint(v1);\n\n                        }\n\n                    }\n\n                }\n\n            }\n\n        });\n\n        return this;\n\n    };\n\n})()\n\nvar intersectsSphere = (function () {\n\n    var closestPoint = new Vector3();\n\n    return function intersectsSphere(sphere) {\n\n        // Find the point on the AABB closest to the sphere center.\n        this.clampPoint(sphere.center, closestPoint);\n\n        // If that point is inside the sphere, the AABB and sphere intersect.\n        return closestPoint.distanceToSquared(sphere.center) <= (sphere.radius * sphere.radius);\n\n    };\n\n})()\n\nvar distanceToPoint = (function () {\n\n    var v1 = new Vector3();\n\n    return function distanceToPoint(point) {\n\n        var clampedPoint = v1.copy(point).clamp(this.min, this.max);\n        return clampedPoint.sub(point).length();\n\n    };\n\n})()\n\nvar getBoundingSphere = (function () {\n\n    var v1 = new Vector3();\n\n    return function getBoundingSphere(optionalTarget) {\n\n        var result = optionalTarget || new Sphere();\n\n        this.getCenter(result.center);\n\n        result.radius = this.getSize(v1).length() * 0.5;\n\n        return result;\n\n    };\n\n})()\n\nvar applyMatrix4 = (function () {\n\n    var points = [\n        new Vector3(),\n        new Vector3(),\n        new Vector3(),\n        new Vector3(),\n        new Vector3(),\n        new Vector3(),\n        new Vector3(),\n        new Vector3()\n    ];\n\n    return function applyMatrix4(matrix) {\n\n        // transform of empty box is an empty box.\n        if (this.isEmpty()) return this;\n\n        // NOTE: I am using a binary pattern to specify all 2^3 combinations below\n        points[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(matrix); // 000\n        points[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(matrix); // 001\n        points[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(matrix); // 010\n        points[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(matrix); // 011\n        points[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(matrix); // 100\n        points[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(matrix); // 101\n        points[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(matrix); // 110\n        points[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(matrix);\t// 111\n\n        this.setFromPoints(points);\n\n        return this;\n\n    };\n\n})()\n\n\n\n\n\nexport { Box3 };\n","\n\n\nimport { Box3 } from './Box3';\nimport { Vector3 } from './Vector3';\n\n\nclass Sphere {\n    constructor(center, radius) {\n        this.center = (center !== undefined) ? center : new Vector3();\n        this.radius = (radius !== undefined) ? radius : 0;\n    }\n\n    set(center, radius) {\n\n        this.center.copy(center);\n        this.radius = radius;\n\n        return this;\n\n    }\n\n    setFromPoints(points, optionalCenter) {\n\n        var center = this.center;\n        var box = new Box3();\n        \n        if (optionalCenter !== undefined) {\n\n            center.copy(optionalCenter);\n\n        } else {\n\n            box.setFromPoints(points).getCenter(center);\n\n        }\n\n        var maxRadiusSq = 0;\n\n        for (var i = 0, il = points.length; i < il; i++) {\n\n            maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(points[i]));\n\n        }\n\n        this.radius = Math.sqrt(maxRadiusSq);\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new this.constructor().copy(this);\n\n    }\n\n    copy(sphere) {\n\n        this.center.copy(sphere.center);\n        this.radius = sphere.radius;\n\n        return this;\n\n    }\n\n    empty() {\n\n        return (this.radius <= 0);\n\n    }\n\n    containsPoint(point) {\n\n        return (point.distanceToSquared(this.center) <= (this.radius * this.radius));\n\n    }\n\n    distanceToPoint(point) {\n\n        return (point.distanceTo(this.center) - this.radius);\n\n    }\n\n    intersectsSphere(sphere) {\n\n        var radiusSum = this.radius + sphere.radius;\n\n        return sphere.center.distanceToSquared(this.center) <= (radiusSum * radiusSum);\n\n    }\n\n    intersectsBox(box) {\n\n        return box.intersectsSphere(this);\n\n    }\n\n    intersectsPlane(plane) {\n\n        return Math.abs(plane.distanceToPoint(this.center)) <= this.radius;\n\n    }\n\n    clampPoint(point, optionalTarget) {\n\n        var deltaLengthSq = this.center.distanceToSquared(point);\n\n        var result = optionalTarget || new Vector3();\n\n        result.copy(point);\n\n        if (deltaLengthSq > (this.radius * this.radius)) {\n\n            result.sub(this.center).normalize();\n            result.multiplyScalar(this.radius).add(this.center);\n\n        }\n\n        return result;\n\n    }\n\n    getBoundingBox(optionalTarget) {\n\n        var box = optionalTarget || new Box3();\n\n        box.set(this.center, this.center);\n        box.expandByScalar(this.radius);\n\n        return box;\n\n    }\n\n    applyMatrix4(matrix) {\n\n        this.center.applyMatrix4(matrix);\n        this.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n        return this;\n\n    }\n\n    translate(offset) {\n\n        this.center.add(offset);\n\n        return this;\n\n    }\n\n    equals(sphere) {\n\n        return sphere.center.equals(this.center) && (sphere.radius === this.radius);\n\n    }\n\n}\n\nexport { Sphere };","import { Vector3 } from './Vector3';\n\nvar v1 = new Vector3();\nclass Matrix3 {\n    constructor() {\n        this.elements = [\n\n            1, 0, 0,\n            0, 1, 0,\n            0, 0, 1\n\n        ];\n\n        if (arguments.length > 0) {\n\n            console.error('Matrix3: the constructor no longer reads arguments. use .set() instead.');\n\n        }\n        this.isMatrix3 = true;\n    }\n    set(n11, n12, n13, n21, n22, n23, n31, n32, n33) {\n\n        var te = this.elements;\n\n        te[0] = n11; te[1] = n21; te[2] = n31;\n        te[3] = n12; te[4] = n22; te[5] = n32;\n        te[6] = n13; te[7] = n23; te[8] = n33;\n\n        return this;\n\n    }\n\n    identity() {\n\n        this.set(\n\n            1, 0, 0,\n            0, 1, 0,\n            0, 0, 1\n\n        );\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new this.constructor().fromArray(this.elements);\n\n    }\n\n    copy(m) {\n\n        var te = this.elements;\n        var me = m.elements;\n\n        te[0] = me[0]; te[1] = me[1]; te[2] = me[2];\n        te[3] = me[3]; te[4] = me[4]; te[5] = me[5];\n        te[6] = me[6]; te[7] = me[7]; te[8] = me[8];\n\n        return this;\n\n    }\n\n    setFromMatrix4(m) {\n\n        var me = m.elements;\n\n        this.set(\n\n            me[0], me[4], me[8],\n            me[1], me[5], me[9],\n            me[2], me[6], me[10]\n\n        );\n\n        return this;\n\n    }\n\n    applyToBufferAttribute(attribute) {\n\n        for (var i = 0, l = attribute.count; i < l; i++) {\n\n            v1.x = attribute.getX(i);\n            v1.y = attribute.getY(i);\n            v1.z = attribute.getZ(i);\n\n            v1.applyMatrix3(this);\n\n            attribute.setXYZ(i, v1.x, v1.y, v1.z);\n\n        }\n\n        return attribute;\n\n    }\n\n    setUvTransform(tx, ty, sx, sy, rotation, cx, cy) {\n\n        var c = Math.cos(rotation);\n        var s = Math.sin(rotation);\n\n        this.set(\n            sx * c, sx * s, - sx * (c * cx + s * cy) + cx + tx,\n            - sy * s, sy * c, - sy * (- s * cx + c * cy) + cy + ty,\n            0, 0, 1\n        );\n\n    }\n\n    multiply(m) {\n\n        return this.multiplyMatrices(this, m);\n\n    }\n\n    premultiply(m) {\n\n        return this.multiplyMatrices(m, this);\n\n    }\n\n    multiplyMatrices(a, b) {\n\n        var ae = a.elements;\n        var be = b.elements;\n        var te = this.elements;\n\n        var a11 = ae[0], a12 = ae[3], a13 = ae[6];\n        var a21 = ae[1], a22 = ae[4], a23 = ae[7];\n        var a31 = ae[2], a32 = ae[5], a33 = ae[8];\n\n        var b11 = be[0], b12 = be[3], b13 = be[6];\n        var b21 = be[1], b22 = be[4], b23 = be[7];\n        var b31 = be[2], b32 = be[5], b33 = be[8];\n\n        te[0] = a11 * b11 + a12 * b21 + a13 * b31;\n        te[3] = a11 * b12 + a12 * b22 + a13 * b32;\n        te[6] = a11 * b13 + a12 * b23 + a13 * b33;\n\n        te[1] = a21 * b11 + a22 * b21 + a23 * b31;\n        te[4] = a21 * b12 + a22 * b22 + a23 * b32;\n        te[7] = a21 * b13 + a22 * b23 + a23 * b33;\n\n        te[2] = a31 * b11 + a32 * b21 + a33 * b31;\n        te[5] = a31 * b12 + a32 * b22 + a33 * b32;\n        te[8] = a31 * b13 + a32 * b23 + a33 * b33;\n\n        return this;\n\n    }\n\n    multiplyScalar(s) {\n\n        var te = this.elements;\n\n        te[0] *= s; te[3] *= s; te[6] *= s;\n        te[1] *= s; te[4] *= s; te[7] *= s;\n        te[2] *= s; te[5] *= s; te[8] *= s;\n\n        return this;\n\n    }\n\n    determinant() {\n\n        var te = this.elements;\n\n        var a = te[0], b = te[1], c = te[2],\n            d = te[3], e = te[4], f = te[5],\n            g = te[6], h = te[7], i = te[8];\n\n        return a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n    }\n\n    getInverse(matrix, throwOnDegenerate) {\n\n        if (matrix && matrix.isMatrix4) {\n\n            console.error(\"Matrix3: .getInverse() no longer takes a Matrix4 argument.\");\n\n        }\n\n        var me = matrix.elements,\n            te = this.elements,\n\n            n11 = me[0], n21 = me[1], n31 = me[2],\n            n12 = me[3], n22 = me[4], n32 = me[5],\n            n13 = me[6], n23 = me[7], n33 = me[8],\n\n            t11 = n33 * n22 - n32 * n23,\n            t12 = n32 * n13 - n33 * n12,\n            t13 = n23 * n12 - n22 * n13,\n\n            det = n11 * t11 + n21 * t12 + n31 * t13;\n\n        if (det === 0) {\n\n            var msg = \"Matrix3: .getInverse() can't invert matrix, determinant is 0\";\n\n            if (throwOnDegenerate === true) {\n\n                throw new Error(msg);\n\n            } else {\n\n                console.warn(msg);\n\n            }\n\n            return this.identity();\n\n        }\n\n        var detInv = 1 / det;\n\n        te[0] = t11 * detInv;\n        te[1] = (n31 * n23 - n33 * n21) * detInv;\n        te[2] = (n32 * n21 - n31 * n22) * detInv;\n\n        te[3] = t12 * detInv;\n        te[4] = (n33 * n11 - n31 * n13) * detInv;\n        te[5] = (n31 * n12 - n32 * n11) * detInv;\n\n        te[6] = t13 * detInv;\n        te[7] = (n21 * n13 - n23 * n11) * detInv;\n        te[8] = (n22 * n11 - n21 * n12) * detInv;\n\n        return this;\n\n    }\n\n    transpose() {\n\n        var tmp, m = this.elements;\n\n        tmp = m[1]; m[1] = m[3]; m[3] = tmp;\n        tmp = m[2]; m[2] = m[6]; m[6] = tmp;\n        tmp = m[5]; m[5] = m[7]; m[7] = tmp;\n\n        return this;\n\n    }\n\n    getNormalMatrix(matrix4) {\n\n        return this.setFromMatrix4(matrix4).getInverse(this).transpose();\n\n    }\n\n    transposeIntoArray(r) {\n\n        var m = this.elements;\n\n        r[0] = m[0];\n        r[1] = m[3];\n        r[2] = m[6];\n        r[3] = m[1];\n        r[4] = m[4];\n        r[5] = m[7];\n        r[6] = m[2];\n        r[7] = m[5];\n        r[8] = m[8];\n\n        return this;\n\n    }\n\n    equals(matrix) {\n\n        var te = this.elements;\n        var me = matrix.elements;\n\n        for (var i = 0; i < 9; i++) {\n\n            if (te[i] !== me[i]) return false;\n\n        }\n\n        return true;\n\n    }\n\n    fromArray(array, offset) {\n\n        if (offset === undefined) offset = 0;\n\n        for (var i = 0; i < 9; i++) {\n\n            this.elements[i] = array[i + offset];\n\n        }\n\n        return this;\n\n    }\n\n    toArray(array, offset) {\n\n        if (array === undefined) array = [];\n        if (offset === undefined) offset = 0;\n\n        var te = this.elements;\n\n        array[offset] = te[0];\n        array[offset + 1] = te[1];\n        array[offset + 2] = te[2];\n\n        array[offset + 3] = te[3];\n        array[offset + 4] = te[4];\n        array[offset + 5] = te[5];\n\n        array[offset + 6] = te[6];\n        array[offset + 7] = te[7];\n        array[offset + 8] = te[8];\n\n        return array;\n\n    }\n\n\n}\n\nexport { Matrix3 };","import { Matrix3 } from './Matrix3';\nimport { Vector3 } from './Vector3';\n\nvar v1 = new Vector3();\nvar v2 = new Vector3();\n\nvar v3 = new Vector3();\n\nvar v4 = new Vector3();\nvar m1 = new Matrix3();\n\n\nclass Plane {\n    constructor(normal, constant) {\n        // normal is assumed to be normalized\n\n        this.normal = (normal !== undefined) ? normal : new Vector3(1, 0, 0);\n        this.constant = (constant !== undefined) ? constant : 0;\n    }\n\n    set(normal, constant) {\n\n        this.normal.copy(normal);\n        this.constant = constant;\n\n        return this;\n\n    }\n\n    setComponents(x, y, z, w) {\n\n        this.normal.set(x, y, z);\n        this.constant = w;\n\n        return this;\n\n    }\n\n    setFromNormalAndCoplanarPoint(normal, point) {\n\n        this.normal.copy(normal);\n        this.constant = - point.dot(this.normal);\n\n        return this;\n\n    }\n\n    setFromCoplanarPoints(a, b, c) {\n\n        var normal = v1.subVectors(c, b).cross(v2.subVectors(a, b)).normalize();\n\n        // Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n        this.setFromNormalAndCoplanarPoint(normal, a);\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new this.constructor().copy(this);\n\n    }\n\n    copy(plane) {\n\n        this.normal.copy(plane.normal);\n        this.constant = plane.constant;\n\n        return this;\n\n    }\n\n    normalize() {\n\n        // Note: will lead to a divide by zero if the plane is invalid.\n\n        var inverseNormalLength = 1.0 / this.normal.length();\n        this.normal.multiplyScalar(inverseNormalLength);\n        this.constant *= inverseNormalLength;\n\n        return this;\n\n    }\n\n    negate() {\n\n        this.constant *= - 1;\n        this.normal.negate();\n\n        return this;\n\n    }\n\n    distanceToPoint(point) {\n\n        return this.normal.dot(point) + this.constant;\n\n    }\n\n    distanceToSphere(sphere) {\n\n        return this.distanceToPoint(sphere.center) - sphere.radius;\n\n    }\n\n    projectPoint(point, optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n\n        return result.copy(this.normal).multiplyScalar(- this.distanceToPoint(point)).add(point);\n\n    }\n    intersectLine(line, optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n\n        var direction = line.delta(v3);\n\n        var denominator = this.normal.dot(direction);\n\n        if (denominator === 0) {\n\n            // line is coplanar, return origin\n            if (this.distanceToPoint(line.start) === 0) {\n\n                return result.copy(line.start);\n\n            }\n\n            // Unsure if this is the correct method to handle this case.\n            return undefined;\n\n        }\n\n        var t = - (line.start.dot(this.normal) + this.constant) / denominator;\n\n        if (t < 0 || t > 1) {\n\n            return undefined;\n\n        }\n\n        return result.copy(direction).multiplyScalar(t).add(line.start);\n\n    }\n\n\n    intersectsLine(line) {\n\n        // Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n        var startSign = this.distanceToPoint(line.start);\n        var endSign = this.distanceToPoint(line.end);\n\n        return (startSign < 0 && endSign > 0) || (endSign < 0 && startSign > 0);\n\n    }\n\n    intersectsBox(box) {\n\n        return box.intersectsPlane(this);\n\n    }\n\n    intersectsSphere(sphere) {\n\n        return sphere.intersectsPlane(this);\n\n    }\n\n    coplanarPoint(optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n\n        return result.copy(this.normal).multiplyScalar(- this.constant);\n\n    }\n\n    applyMatrix4(matrix, optionalNormalMatrix) {\n\n        var normalMatrix = optionalNormalMatrix || m1.getNormalMatrix(matrix);\n\n        var referencePoint = this.coplanarPoint(v4).applyMatrix4(matrix);\n\n        var normal = this.normal.applyMatrix3(normalMatrix).normalize();\n\n        this.constant = - referencePoint.dot(normal);\n\n        return this;\n\n    }\n\n    translate(offset) {\n\n        this.constant -= offset.dot(this.normal);\n\n        return this;\n\n    }\n\n    equals(plane) {\n\n        return plane.normal.equals(this.normal) && (plane.constant === this.constant);\n\n    }\n}\n\nexport { Plane };","import { Vector3 } from './Vector3';\nimport { Sphere } from './Sphere';\nimport { Plane } from './Plane';\n\n\nclass Frustum {\n    constructor(p0, p1, p2, p3, p4, p5) {\n        this.planes = [\n\n            (p0 !== undefined) ? p0 : new Plane(),\n            (p1 !== undefined) ? p1 : new Plane(),\n            (p2 !== undefined) ? p2 : new Plane(),\n            (p3 !== undefined) ? p3 : new Plane(),\n            (p4 !== undefined) ? p4 : new Plane(),\n            (p5 !== undefined) ? p5 : new Plane()\n\n        ];\n    }\n\n    set(p0, p1, p2, p3, p4, p5) {\n\n        var planes = this.planes;\n\n        planes[0].copy(p0);\n        planes[1].copy(p1);\n        planes[2].copy(p2);\n        planes[3].copy(p3);\n        planes[4].copy(p4);\n        planes[5].copy(p5);\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new this.constructor().copy(this);\n\n    }\n\n    copy(frustum) {\n\n        var planes = this.planes;\n\n        for (var i = 0; i < 6; i++) {\n\n            planes[i].copy(frustum.planes[i]);\n\n        }\n\n        return this;\n\n    }\n\n    setFromMatrix(m) {\n\n        var planes = this.planes;\n        var me = m.elements;\n        var me0 = me[0], me1 = me[1], me2 = me[2], me3 = me[3];\n        var me4 = me[4], me5 = me[5], me6 = me[6], me7 = me[7];\n        var me8 = me[8], me9 = me[9], me10 = me[10], me11 = me[11];\n        var me12 = me[12], me13 = me[13], me14 = me[14], me15 = me[15];\n\n        planes[0].setComponents(me3 - me0, me7 - me4, me11 - me8, me15 - me12).normalize();\n        planes[1].setComponents(me3 + me0, me7 + me4, me11 + me8, me15 + me12).normalize();\n        planes[2].setComponents(me3 + me1, me7 + me5, me11 + me9, me15 + me13).normalize();\n        planes[3].setComponents(me3 - me1, me7 - me5, me11 - me9, me15 - me13).normalize();\n        planes[4].setComponents(me3 - me2, me7 - me6, me11 - me10, me15 - me14).normalize();\n        planes[5].setComponents(me3 + me2, me7 + me6, me11 + me10, me15 + me14).normalize();\n\n        return this;\n\n    }\n\n    intersectsObject(object) {\n        var cb = intersectsObject.bind(this);\n        return cb(object);\n    }\n\n\n    intersectsSprite(sprite) {\n        var cb = intersectsSprite.bind(this);\n        return cb(sprite);\n    }\n\n\n    intersectsSphere(sphere) {\n\n        var planes = this.planes;\n        var center = sphere.center;\n        var negRadius = - sphere.radius;\n\n        for (var i = 0; i < 6; i++) {\n\n            var distance = planes[i].distanceToPoint(center);\n\n            if (distance < negRadius) {\n\n                return false;\n\n            }\n\n        }\n\n        return true;\n\n    }\n\n    intersectsBox(box) {\n        var cb = intersectsBox.bind(this);\n        return cb(box);\n    }\n\n\n\n    containsPoint(point) {\n\n        var planes = this.planes;\n\n        for (var i = 0; i < 6; i++) {\n\n            if (planes[i].distanceToPoint(point) < 0) {\n\n                return false;\n\n            }\n\n        }\n\n        return true;\n\n    }\n}\n\nvar intersectsObject = (function () {\n\n    var sphere = new Sphere();\n\n    return function intersectsObject(object) {\n\n        var geometry = object.geometry;\n\n        if (geometry.boundingSphere === null)\n            geometry.computeBoundingSphere();\n\n        sphere.copy(geometry.boundingSphere)\n            .applyMatrix4(object.matrixWorld);\n\n        return this.intersectsSphere(sphere);\n\n    };\n\n})()\n\nvar intersectsSprite = (function () {\n\n    var sphere = new Sphere();\n\n    return function intersectsSprite(sprite) {\n\n        sphere.center.set(0, 0, 0);\n        sphere.radius = 0.7071067811865476;\n        sphere.applyMatrix4(sprite.matrixWorld);\n\n        return this.intersectsSphere(sphere);\n\n    };\n\n})()\n\nvar intersectsBox = (function () {\n\n    var p1 = new Vector3(),\n        p2 = new Vector3();\n\n    return function intersectsBox(box) {\n\n        var planes = this.planes;\n\n        for (var i = 0; i < 6; i++) {\n\n            var plane = planes[i];\n\n            p1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n            p2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n            p1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n            p2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n            p1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n            p2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n            var d1 = plane.distanceToPoint(p1);\n            var d2 = plane.distanceToPoint(p2);\n\n            // if both outside plane, no intersection\n\n            if (d1 < 0 && d2 < 0) {\n\n                return false;\n\n            }\n\n        }\n\n        return true;\n\n    };\n\n})()\n\nexport { Frustum };","class WebGLExtensions {\n    constructor(gl) {\n        this._gl = gl;\n        this.extensions = {};\n    }\n    get(name) {\n        let _extension = this.extensions[name];\n        if (_extension !== undefined) {\n            return _extension;\n        }\n\n        _extension = this._gl.getExtension(name);\n\n        if (_extension === null) {\n            console.warn('WebGLRenderer: ' + name + ' extension not supported.');\n        }\n\n        this.extensions[name] = _extension;\n\n        return _extension;\n\n\n    }\n}\n\nexport { WebGLExtensions };","/**\n * @class WebGLProperties\n * @description 将Material相关的设置转换为对应的渲染参数并关联起来\n * @author bujue\n */\n\nclass WebGLProperties {\n    constructor() {\n        //WeakMap 可以通过一个对象作用key 再关联一个新的对象,  作为key的对象是弱引用\n        this._properties = new WeakMap();\n    }\n\n    get(object) {\n\n        let map = this._properties.get(object);\n\n        if (map === undefined) {\n\n            map = {};\n            this._properties.set(object, map);\n\n        }\n\n        return map;\n\n    }\n\n    remove(object) {\n\n        this._properties.delete(object);\n\n    }\n\n    update(object, key, value) {\n\n        this._properties.get(object)[key] = value;\n\n    }\n\n    dispose() {\n\n        this._properties = new WeakMap();\n\n    }\n\n\n}\n\nexport { WebGLProperties }; ","/**\n * @description 获取运行环境的Webgl的支持能力\n * @author bujue\n * \n * @returns\n * getMaxPrecision      获得Shader计算的最大精度 highp mediump lowp  \n * maxTextures          单个片段着色器能访问的纹理单元数，最低16，一般16或32, 获取纹理单元TEXTURE0，TEXTURE1，TEXTURE2...的最大数量\n * maxCombinedTextures  所有片段着色器总共能访问的纹理单元数（一个program可以有多个fragment shader），最低48，一般48~80 \n * maxTextureSize       可以接受的最大纹理如 2048 4096 8192\n * maxCubemapSize       可以接受的最大cube纹理如 2048 4096 8192\n * maxAttributes        最大可支持的顶点属性的个数 高性能的可以支持16个,低性能的小于这个数\n * maxVertexUniforms    顶点着色器中Uniform的最大个数 \n * maxFragmentUniforms  片元着色器中Uniform的最大个数\n * maxVaryings          着色器中最多的 VARYING 变量个数 \n */\n\nclass WebGLCapabilities {\n    constructor(gl, parameters) {\n        parameters = parameters || {};\n        this._gl = gl;\n\n        //单个片段着色器能访问的纹理单元数，最低16，一般16或32, 获取纹理单元TEXTURE0，TEXTURE1，TEXTURE2...的最大数量;\n        this.maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n        //所有片段着色器总共能访问的纹理单元数（一个program可以有多个fragment shader），最低48，一般48~80\n        this.maxCombinedTextures = gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);\n\n        //顶点着色器中最大的纹理单元  http://blog.sina.com.cn/s/blog_15ff4f4c80102whpt.html \n        //todo 暂时用不到\n        //this.maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n        //可以接受的最大纹理如 2048 4096 8192\n        this.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n        //可以接受的最大cube纹理如 2048 4096 8192\n        this.maxCubemapSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n        //最大可支持的顶点属性的个数\n        this.maxAttributes = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n        //顶点着色器中Uniform的最大个数\n        this.maxVertexUniforms = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);\n        //片元着色器中Uniform的最大个数 \n        this.maxFragmentUniforms = gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);\n        //着色器中最多的 VARYING 变量个数  \n        this.maxVaryings = gl.getParameter(gl.MAX_VARYING_VECTORS);\n\n        //todo 单次绘制顶点的最大个数目前还不清楚如何获取\n        this.precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n        this.precision = this.getMaxPrecision(this.precision);\n    }\n\n    //获得Shader计算的最大精度 highp mediump lowp  \n    getMaxPrecision(precision) {\n        let gl = this._gl;\n        precision = precision || 'highp';\n        if (precision === 'highp') {\n\n            if (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).precision > 0 &&\n                gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision > 0) {\n\n                return 'highp';\n\n            }\n\n            precision = 'mediump';\n\n        }\n\n        if (precision === 'mediump') {\n\n            if (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).precision > 0 &&\n                gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).precision > 0) {\n\n                return 'mediump';\n\n            }\n\n        }\n\n        return 'lowp';\n\n    }\n}\n\nexport { WebGLCapabilities };","\nimport { SrcAlphaSaturateFactor, OneMinusDstColorFactor, DstColorFactor, OneMinusDstAlphaFactor, DstAlphaFactor, OneMinusSrcAlphaFactor, SrcAlphaFactor, OneMinusSrcColorFactor, SrcColorFactor, OneFactor, ZeroFactor, ReverseSubtractEquation, SubtractEquation, AddEquation, DepthStencilFormat, DepthFormat, LuminanceAlphaFormat, LuminanceFormat, RGBAFormat, RGBFormat, AlphaFormat, FloatType, UnsignedIntType, IntType, UnsignedShortType, ShortType, ByteType, UnsignedShort565Type, UnsignedShort5551Type, UnsignedShort4444Type, UnsignedByteType, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestFilter, MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping } from '../../constants.js';\n/**\n * @description 获取运行环境的Webgl的支持能力\n * @author bujue\n */\n\nclass WebGLUtils {\n    constructor(gl) {\n        this.gl = gl;\n        this._map = {\n\n            [RepeatWrapping]: gl.REPEAT,\n            [ClampToEdgeWrapping]: gl.CLAMP_TO_EDGE,\n            [MirroredRepeatWrapping]: gl.MIRRORED_REPEAT,\n\n            [NearestFilter]: gl.NEAREST,\n            [NearestMipMapNearestFilter]: gl.NEAREST_MIPMAP_NEAREST,\n            [NearestMipMapLinearFilter]: gl.NEAREST_MIPMAP_LINEAR,\n            \n            [LinearFilter]: gl.LINEAR,\n            [LinearMipMapNearestFilter]: gl.LINEAR_MIPMAP_NEAREST,\n            [LinearMipMapLinearFilter]: gl.LINEAR_MIPMAP_LINEAR,\n\n            [UnsignedByteType]: gl.UNSIGNED_BYTE,\n            [UnsignedShort4444Type]: gl.UNSIGNED_SHORT_4_4_4_4,\n            [UnsignedShort5551Type]: gl.UNSIGNED_SHORT_5_5_5_1,\n            [UnsignedShort565Type]: gl.UNSIGNED_SHORT_5_6_5,\n\n            [ByteType]: gl.BYTE,\n            [ShortType]: gl.SHORT,\n            [UnsignedShortType]: gl.UNSIGNED_SHORT,\n            [IntType]: gl.INT,\n            [UnsignedIntType]: gl.UNSIGNED_INT,\n            [FloatType]: gl.FLOAT,\n\n            [AlphaFormat]: gl.ALPHA,\n            [RGBFormat]: gl.RGB,\n            [RGBAFormat]: gl.RGBA,\n            [LuminanceFormat]: gl.LUMINANCE,\n            [LuminanceAlphaFormat]: gl.LUMINANCE_ALPHA,\n            [DepthFormat]: gl.DEPTH_COMPONENT,\n            [DepthStencilFormat]: gl.DEPTH_STENCIL,\n\n            [AddEquation]: gl.FUNC_ADD,\n            [SubtractEquation]: gl.FUNC_SUBTRACT,\n            [ReverseSubtractEquation]: gl.FUNC_REVERSE_SUBTRACT,\n\n            [ZeroFactor]: gl.ZERO,\n            [OneFactor]: gl.ONE,\n            [SrcColorFactor]: gl.SRC_COLOR,\n            [OneMinusSrcColorFactor]: gl.ONE_MINUS_SRC_COLOR,\n            [SrcAlphaFactor]: gl.SRC_ALPHA,\n            [OneMinusSrcAlphaFactor]: gl.ONE_MINUS_SRC_ALPHA,\n            [DstAlphaFactor]: gl.DST_ALPHA,\n            [OneMinusDstAlphaFactor]: gl.ONE_MINUS_DST_ALPHA,\n\n            [DstColorFactor]: gl.DST_COLOR,\n            [OneMinusDstColorFactor]: gl.ONE_MINUS_DST_COLOR,\n            [SrcAlphaSaturateFactor]: gl.SRC_ALPHA_SATURATE,\n\n        }\n    }\n\n    convert(p) {\n\n        if (this._map[p] !== undefined) return this._map[p];\n        return 0;\n    }\n\n}\n\nexport { WebGLUtils };","import { Vector4 } from \"../../maths/Vector4\";\nimport { NotEqualDepth, GreaterDepth, GreaterEqualDepth, EqualDepth, LessEqualDepth, LessDepth, AlwaysDepth, NeverDepth, CullFaceFront, CullFaceBack, CullFaceNone, CustomBlending, MultiplyBlending, SubtractiveBlending, AdditiveBlending, NoBlending, NormalBlending, DoubleSide, BackSide } from '../../constants.js';\nimport { WebGLUtils } from \"./WebGLUtils\";\n\nclass ColorBuffer {\n    constructor(gl) {\n        this.gl = gl;\n        this._currentColorMask = null;\n        this._currentColorClear = new Vector4(0, 0, 0, 0);\n    }\n    //关闭颜色通道 red green blue alpha\n    setMask(colorMask) {\n        if (this._currentColorMask !== colorMask) {\n\n            this.gl.colorMask(colorMask, colorMask, colorMask, colorMask);\n            this._currentColorMask = colorMask;\n\n        }\n\n    }\n    //设置清除色 r g b a 为[0-1]\n    setClear(r, g, b, a, premultipliedAlpha) {\n\n        if (premultipliedAlpha === true) {\n\n            r *= a; g *= a; b *= a;\n\n        }\n\n\n        let color = new Vector4(r, g, b, a);\n\n        if (this._currentColorClear.equals(color) === false) {\n\n            this.gl.clearColor(r, g, b, a);\n            this._currentColorClear.copy(color);\n\n        }\n        color = null;\n\n    }\n\n    reset() {\n        this._currentColorMask = null;\n        this._currentColorClear.set(- 1, 0, 0, 0); // set to invalid state\n    }\n\n\n\n}\n\nclass DepthBuffer {\n    constructor(gl) {\n        this.gl = gl;\n        this._currentDepthFunc = null;\n        this._currentDepthClear = null;\n        this._currentDepthMask = null;\n        this._switch = new Switch(gl);\n    }\n\n    setTest(depthTest) {\n        let gl = this.gl;\n        if (depthTest) {\n\n            this._switch.enable(gl.DEPTH_TEST);\n\n        } else {\n\n            this._switch.disable(gl.DEPTH_TEST);\n\n        }\n\n    }\n    //不透明与透明物体共存是,绘制透明物体需要锁定深度缓冲即:setMask(true)\n    setMask(depthMask) {\n        let gl = this.gl;\n        if (this._currentDepthMask !== depthMask) {\n\n            gl.depthMask(depthMask);\n            this._currentDepthMask = depthMask;\n\n        }\n\n    }\n\n    setClear(depth) {\n        let gl = this.gl;\n        if (this._currentDepthClear !== depth) {\n\n            gl.clearDepth(depth);\n            this._currentDepthClear = depth;\n\n        }\n\n    }\n    setFunc(depthFunc) {\n        let gl = this.gl;\n\n        if (this._currentDepthFunc !== depthFunc) {\n\n            if (depthFunc) {\n\n                switch (depthFunc) {\n\n                    case NeverDepth:\n\n                        gl.depthFunc(gl.NEVER);\n                        break;\n\n                    case AlwaysDepth:\n\n                        gl.depthFunc(gl.ALWAYS);\n                        break;\n\n                    case LessDepth:\n\n                        gl.depthFunc(gl.LESS);\n                        break;\n\n                    case LessEqualDepth:\n\n                        gl.depthFunc(gl.LEQUAL);\n                        break;\n\n                    case EqualDepth:\n\n                        gl.depthFunc(gl.EQUAL);\n                        break;\n\n                    case GreaterEqualDepth:\n\n                        gl.depthFunc(gl.GEQUAL);\n                        break;\n\n                    case GreaterDepth:\n\n                        gl.depthFunc(gl.GREATER);\n                        break;\n\n                    case NotEqualDepth:\n\n                        gl.depthFunc(gl.NOTEQUAL);\n                        break;\n\n                    default:\n\n                        gl.depthFunc(gl.LEQUAL);\n\n                }\n\n            } else {\n\n                gl.depthFunc(gl.LEQUAL);\n\n            }\n\n            this._currentDepthFunc = depthFunc;\n\n        }\n\n    }\n    reset() {\n\n        this._currentDepthMask = null;\n        this._currentDepthFunc = null;\n        this._currentDepthClear = null;\n\n    }\n}\n\nclass StencilBuffer {\n    constructor(gl) {\n        this.gl = gl;\n        this.switch = new Switch(gl);\n        this._currentStencilClear = null;\n    }\n    setTest(stencilTest) {\n        let gl = this.gl;\n        if (stencilTest) {\n\n            this.switch.enable(gl.STENCIL_TEST);\n\n        } else {\n\n            this.switch.disable(gl.STENCIL_TEST);\n\n        }\n\n    }\n\n    setClear(stencil) {\n\n        if (this._currentStencilClear !== stencil) {\n\n            this.gl.clearStencil(stencil);\n            this._currentStencilClear = stencil;\n\n        }\n\n    }\n    reset() {\n\n        this._currentStencilClear = null;\n    }\n}\nlet capabilitiesSwitch = {};\nclass Switch {\n    constructor(gl) {\n        this.gl = gl;\n    }\n    enable(id) {\n        if (capabilitiesSwitch[id] !== true) {\n\n            this.gl.enable(id);\n            capabilitiesSwitch[id] = true;\n\n        }\n    }\n    disable(id) {\n        if (capabilitiesSwitch[id] !== false) {\n\n            this.gl.disable(id);\n            capabilitiesSwitch[id] = false;\n\n        }\n    }\n    reset() {\n        capabilitiesSwitch = {};\n    }\n\n}\n\nclass AttributeSwitch {\n    constructor(gl, extensions,capabilities) {\n        this.gl = gl;\n        this._extensions = extensions;\n        let maxVertexAttributes = capabilities.maxAttributes;\n\n        this._newAttributes = new Uint8Array(maxVertexAttributes);\n        this._enabledAttributes = new Uint8Array(maxVertexAttributes);\n        this._attributeDivisors = new Uint8Array(maxVertexAttributes);\n\n    }\n\n    initAttributes() {\n\n        for (let i = 0, l = this._newAttributes.length; i < l; i++) {\n\n            this._newAttributes[i] = 0;\n\n        }\n\n    }\n\n    enableAttributeAndDivisor(attribute, meshPerAttribute) {\n\n        this._newAttributes[attribute] = 1;\n\n        if (this._enabledAttributes[attribute] === 0) {\n\n            this.gl.enableVertexAttribArray(attribute);\n            this._enabledAttributes[attribute] = 1;\n\n        }\n\n        if (this._attributeDivisors[attribute] !== meshPerAttribute) {\n\n            let extension = this._extensions.get('ANGLE_instanced_arrays');\n\n            extension.vertexAttribDivisorANGLE(attribute, meshPerAttribute);\n            this._attributeDivisors[attribute] = meshPerAttribute;\n\n        }\n\n    }\n\n    disableUnusedAttributes() {\n        for (let i = 0, l = this._enabledAttributes.length; i !== l; ++i) {\n\n            if (this._enabledAttributes[i] !== this._newAttributes[i]) {\n\n                this.gl.disableVertexAttribArray(i);\n                this._enabledAttributes[i] = 0;\n\n            }\n\n        }\n    }\n    reset() {\n\n        for (var i = 0; i < this._enabledAttributes.length; i++) {\n\n            if (this._enabledAttributes[i] === 1) {\n\n                this.gl.disableVertexAttribArray(i);\n                this._enabledAttributes[i] = 0;\n\n            }\n\n        }\n    }\n\n\n\n\n}\n\nclass BlendingState {\n\n    constructor(gl) {\n        this.gl = gl;\n\n        this._currentBlendEquation = null;\n        this._currentBlendSrc = null;\n        this._currentBlendDst = null;\n        this._currentBlendEquationAlpha = null;\n        this._currentBlendSrcAlpha = null;\n        this._currentBlendDstAlpha = null;\n\n        this._switch = new Switch(gl);\n    }\n\n    setBlending(blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha) {\n        let gl = this.gl;\n\n        let utils = new WebGLUtils(gl)\n\n        if (blending !== NoBlending) {\n\n            this._switch.enable(gl.BLEND);\n\n        } else {\n\n            this._switch.disable(gl.BLEND);\n\n        }\n\n        if (blending !== CustomBlending) {\n\n            if (blending !== this._currentBlending || premultipliedAlpha !== this._currentPremultipledAlpha) {\n\n                switch (blending) {\n\n                    case AdditiveBlending:\n\n                        if (premultipliedAlpha) {\n\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ONE, gl.ONE);\n\n                        } else {\n\n                            gl.blendEquation(gl.FUNC_ADD);\n                            gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n\n                        }\n                        break;\n\n                    case SubtractiveBlending:\n\n                        if (premultipliedAlpha) {\n\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA);\n\n                        } else {\n\n                            gl.blendEquation(gl.FUNC_ADD);\n                            gl.blendFunc(gl.ZERO, gl.ONE_MINUS_SRC_COLOR);\n\n                        }\n                        break;\n\n                    case MultiplyBlending:\n\n                        if (premultipliedAlpha) {\n\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA);\n\n                        } else {\n\n                            gl.blendEquation(gl.FUNC_ADD);\n                            gl.blendFunc(gl.ZERO, gl.SRC_COLOR);\n\n                        }\n                        break;\n\n                    default:\n\n                        if (premultipliedAlpha) {\n\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n                        } else {\n\n                            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n                            gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n                        }\n\n                }\n\n            }\n\n            this._currentBlendEquation = null;\n            this._currentBlendSrc = null;\n            this._currentBlendDst = null;\n            this._currentBlendEquationAlpha = null;\n            this._currentBlendSrcAlpha = null;\n            this._currentBlendDstAlpha = null;\n\n\n        } else {\n\n            blendEquationAlpha = blendEquationAlpha || blendEquation;\n            blendSrcAlpha = blendSrcAlpha || blendSrc;\n            blendDstAlpha = blendDstAlpha || blendDst;\n\n            if (blendEquation !== this._currentBlendEquation || blendEquationAlpha !== this._currentBlendEquationAlpha) {\n\n                gl.blendEquationSeparate(utils.convert(blendEquation), utils.convert(blendEquationAlpha));\n\n                this._currentBlendEquation = blendEquation;\n                this._currentBlendEquationAlpha = blendEquationAlpha;\n\n            }\n\n            if (blendSrc !== this._currentBlendSrc || blendDst !== this._currentBlendDst || blendSrcAlpha !== this._currentBlendSrcAlpha || blendDstAlpha !== this._currentBlendDstAlpha) {\n\n                gl.blendFuncSeparate(utils.convert(blendSrc), utils.convert(blendDst), utils.convert(blendSrcAlpha), utils.convert(blendDstAlpha));\n\n                this._currentBlendSrc = blendSrc;\n                this._currentBlendDst = blendDst;\n                this._currentBlendSrcAlpha = blendSrcAlpha;\n                this._currentBlendDstAlpha = blendDstAlpha;\n\n            }\n\n        }\n\n        this._currentBlending = blending;\n        this._currentPremultipledAlpha = premultipliedAlpha;\n        utils = null;\n    }\n    reset() {\n        this._currentBlendEquation = null;\n        this._currentBlendSrc = null;\n        this._currentBlendDst = null;\n        this._currentBlendEquationAlpha = null;\n        this._currentBlendSrcAlpha = null;\n        this._currentBlendDstAlpha = null;\n    }\n}\n\nclass TextureState {\n    constructor(gl,capabilities) {\n        this.gl = gl;\n        this._capabilities = capabilities;\n        this._currentTextureSlot = null;\n        this._currentBoundTextures = {};\n        this._currentTextureSlot = null;\n\n        this._emptyTextures = {};\n\n        this._emptyTextures[gl.TEXTURE_2D] = this.createTexture(gl.TEXTURE_2D, gl.TEXTURE_2D, 1);\n        this._emptyTextures[gl.TEXTURE_CUBE_MAP] = this.createTexture(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6);\n\n    }\n\n    createTexture(type, target, count) {\n        let gl = this.gl;\n        let data = new Uint8Array(4); // 4 is required to match default unpack alignment of 4.\n        let texture = gl.createTexture();\n\n        gl.bindTexture(type, texture);\n        gl.texParameteri(type, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(type, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n        for (var i = 0; i < count; i++) {\n\n            gl.texImage2D(target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\n\n        }\n\n        return texture;\n\n    }\n\n    activeTexture(webglSlot) {\n        let gl = this.gl;\n        let _capabilities = this._capabilities;\n        let _maxTextures = _capabilities.maxCombinedTextures;\n\n        if (webglSlot === undefined) webglSlot = gl.TEXTURE0 + _maxTextures - 1;\n\n        if (this._currentTextureSlot !== webglSlot) {\n\n            gl.activeTexture(webglSlot);\n            this._currentTextureSlot = webglSlot;\n\n        }\n\n    }\n\n    bindTexture(webglType, webglTexture) {\n        let gl = this.gl;\n        if (this._currentTextureSlot === null) {\n\n            this.activeTexture();\n\n        }\n\n        let boundTexture = this._currentBoundTextures[this._currentTextureSlot];\n\n        if (boundTexture === undefined) {\n\n            boundTexture = { type: undefined, texture: undefined };\n            this._currentBoundTextures[this._currentTextureSlot] = boundTexture;\n\n        }\n\n        if (boundTexture.type !== webglType || boundTexture.texture !== webglTexture) {\n\n            gl.bindTexture(webglType, webglTexture || this._emptyTextures[webglType]);\n\n            boundTexture.type = webglType;\n            boundTexture.texture = webglTexture;\n\n        }\n\n    }\n    texImage2D() {\n        let gl = this.gl;\n        try {\n            gl.texImage2D.apply(gl, arguments);\n\n        } catch (error) {\n            console.error('WebGLState:', error);\n\n        }\n\n    }\n    reset() {\n        this._currentTextureSlot = null;\n        this._currentBoundTextures = {};\n        this._currentTextureSlot = null;\n    }\n}\n\nfunction getLineWidthAvailable(gl) {\n    let lineWidthAvailable = false;\n    let version = 0;\n    let glVersion = gl.getParameter(gl.VERSION);\n\n    if (glVersion.indexOf('WebGL') !== - 1) {\n\n        version = parseFloat(/^WebGL\\ ([0-9])/.exec(glVersion)[1]);\n        lineWidthAvailable = (version >= 1.0);\n\n    } else if (glVersion.indexOf('OpenGL ES') !== - 1) {\n\n        version = parseFloat(/^OpenGL\\ ES\\ ([0-9])/.exec(glVersion)[1]);\n        lineWidthAvailable = (version >= 2.0);\n\n    }\n    return lineWidthAvailable;\n}\n\n\n\n\nclass WebGLState {\n    constructor(gl, extensions,capabilities) {\n        this.gl = gl;\n\n        this.buffers = {\n            color: new ColorBuffer(gl),\n            depth: new DepthBuffer(gl),\n            stencil: new StencilBuffer(gl)\n        }\n\n        this._attributeSwitch = new AttributeSwitch(gl, extensions,capabilities);\n        this._switch = new Switch(gl);\n\n        this._currentProgram = null;\n        this._blendingState = new BlendingState(gl);\n        this._currentFlipSided = null;\n\n        this._currentPolygonOffsetFactor = null;\n        this._currentPolygonOffsetUnits = null;\n\n        this._currentLineWidth = null;\n\n        this._textureState = new TextureState(gl,capabilities)\n        this._currentViewport = new Vector4();\n\n        this._initState(gl)\n\n    }\n    _initState(gl) {\n\n        this.buffers.color.setClear(1, 1, 1, 1);\n        this.buffers.depth.setClear(1);\n        this.buffers.stencil.setClear(0);\n\n        this._switch.enable(gl.DEPTH_TEST);\n        this.buffers.depth.setFunc(LessEqualDepth);\n\n        this.setFlipSided(false);\n        this.setCullFace(CullFaceBack);\n        this._switch.enable(gl.CULL_FACE);\n\n        this._switch.enable(gl.BLEND);\n        this.setBlending(NormalBlending);\n    }\n\n    initAttributes() {\n        this._attributeSwitch.initAttributes();\n    }\n    enableAttribute(attribute) {\n        this._attributeSwitch.enableAttributeAndDivisor(attribute,0);\n    }\n    disableUnusedAttributes() {\n        this._attributeSwitch.disableUnusedAttributes();\n    }\n\n    enableAttributeAndDivisor(attribute, meshPerAttribute) {\n        this._attributeSwitch.enableAttributeAndDivisor(attribute, meshPerAttribute);\n    }\n\n    enable(id) {\n        this._switch.enable(id)\n    }\n    disable(id) {\n        this._switch.disable(id)\n    }\n\n    useProgram(program) {\n\n        if (this._currentProgram !== program) {\n\n            this.gl.useProgram(program);\n\n            this._currentProgram = program;\n\n            return true;\n\n        }\n\n        return false;\n\n    }\n\n    setBlending(blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha) {\n        this._blendingState.setBlending(blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha)\n    }\n\n    setMaterial(material, frontFaceCW) {\n        let gl = this.gl;\n        let depthBuffer = this.buffers.depth;\n        let colorBuffer = this.buffers.color;\n        //如果启用双面绘制,关闭背面剔除\n        material.side === DoubleSide\n            ? this._switch.disable(gl.CULL_FACE)\n            : this._switch.enable(gl.CULL_FACE);\n\n        let flipSided = (material.side === BackSide);\n        if (frontFaceCW) flipSided = !flipSided;\n\n        this.setFlipSided(flipSided);\n\n        material.transparent === true\n            ? this.setBlending(material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha)\n            : this.setBlending(NoBlending);\n\n        depthBuffer.setFunc(material.depthFunc);\n        depthBuffer.setTest(material.depthTest);\n        depthBuffer.setMask(material.depthWrite);\n        colorBuffer.setMask(material.colorWrite);\n\n        this.setPolygonOffset(material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits);\n\n    }\n\n    setFlipSided(flipSided) {\n        let gl = this.gl;\n\n        if (this._currentFlipSided !== flipSided) {\n\n            if (flipSided) {\n\n                gl.frontFace(gl.CW);\n\n            } else {\n\n                gl.frontFace(gl.CCW);\n\n            }\n\n            this._currentFlipSided = flipSided;\n\n        }\n    }\n\n    setPolygonOffset(polygonOffset, factor, units) {\n\n        let gl = this.gl;\n\n        if (polygonOffset) {\n\n            this._switch.enable(gl.POLYGON_OFFSET_FILL);\n\n            if (this._currentPolygonOffsetFactor !== factor || this._currentPolygonOffsetUnits !== units) {\n\n                gl.polygonOffset(factor, units);\n\n                this._currentPolygonOffsetFactor = factor;\n                this._currentPolygonOffsetUnits = units;\n\n            }\n\n        } else {\n\n            this._switch.disable(gl.POLYGON_OFFSET_FILL);\n\n        }\n\n    }\n    setCullFace(cullFace) {\n\n        let gl = this.gl;\n\n        if (cullFace !== CullFaceNone) {\n\n            this._switch.enable(gl.CULL_FACE);\n\n            if (cullFace !== this._currentCullFace) {\n\n                if (cullFace === CullFaceBack) {\n\n                    gl.cullFace(gl.BACK);\n\n                } else if (cullFace === CullFaceFront) {\n\n                    gl.cullFace(gl.FRONT);\n\n                } else {\n\n                    gl.cullFace(gl.FRONT_AND_BACK);\n\n                }\n\n            }\n\n        } else {\n\n            this._switch.disable(gl.CULL_FACE);\n\n        }\n\n        this._currentCullFace = cullFace;\n\n    }\n    //设置线条宽度只有部分浏览器支持,目前Chrome不支持,safari支持\n    //https://www.cnblogs.com/twaver/p/7228687.html?utm_source=itdadao&utm_medium=referral\n    //三角面画线方案 https://github.com/mattdesl/webgl-lines\n    setLineWidth(width) {\n\n        if (width !== this._currentLineWidth) {\n\n            if (getLineWidthAvailable(this.gl)) this.gl.lineWidth(width);\n\n            this._currentLineWidth = width;\n\n        }\n\n    }\n\n    activeTexture(webglSlot) {\n        this._textureState.activeTexture(webglSlot);\n    }\n\n    bindTexture(webglType, webglTexture) {\n        this._textureState.bindTexture(webglType, webglTexture);\n    }\n    texImage2D() {\n        this._textureState.texImage2D.apply(this, arguments);\n    }\n\n    viewport(viewport) {\n        let gl = this.gl;\n        if (this._currentViewport.equals(viewport) === false) {\n\n            gl.viewport(viewport.x, viewport.y, viewport.z, viewport.w);\n            this._currentViewport.copy(viewport);\n        }\n\n    }\n    reset() {\n\n        this._attributeSwitch.reset();\n\n        this._switch.reset();\n\n        this._textureState.reset();\n\n\n        this._currentProgram = null;\n\n        this._blendingState.reset();\n\n\n        this._currentFlipSided = null;\n        this._currentCullFace = null;\n\n        this.buffers.color.reset();\n        this.buffers.depth.reset();\n        this.buffers.stencil.reset();\n\n    }\n\n}\n\nexport { WebGLState };\n\n\n","\n/**\n * @class WebGLAttributes\n * @description 根据上层的顶点属性Geometry数据,利用WeapMap绑定buffer相关数据,提供get update remove 方法\n *              获取Buffer 更新(创建)buffer  删除buffer\n * @author bujue\n */\n\nclass WebGLAttributes {\n\n    constructor(gl) {\n        this._buffers = new WeakMap();\n        this.gl = gl;\n    }\n\n    //attribute 对象为BufferAttribute 的实例对象\n    //bufferType的值为 gl.ARRAY_BUFFER  或 gl.ELEMENT_ARRAY_BUFFER\n    createBuffer(attribute, bufferType) {\n        let gl = this.gl;\n        let array = attribute.array;\n        let usage = attribute.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n\n        let buffer = gl.createBuffer();\n\n        gl.bindBuffer(bufferType, buffer);\n        gl.bufferData(bufferType, array, usage);\n\n        attribute.onUploadCallback();\n\n        let type = typeArray2GLType(gl, array);\n\n        return {\n            buffer,\n            type,\n            bytesPerElement: array.BYTES_PER_ELEMENT,\n            version: attribute.version\n        };\n\n    }\n\n    updateBuffer(buffer, attribute, bufferType) {\n        let gl = this.gl;\n        let array = attribute.array;\n        let updateRange = attribute.updateRange;\n\n        gl.bindBuffer(bufferType, buffer);\n\n        if (attribute.dynamic === false) {\n\n            gl.bufferData(bufferType, array, gl.STATIC_DRAW);\n\n        } else if (updateRange.count === - 1) {\n\n            // Not using update ranges\n\n            gl.bufferSubData(bufferType, 0, array);\n\n        } else if (updateRange.count === 0) {\n\n            console.error('WebGLObjects.updateBuffer: dynamic BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.');\n\n        } else {\n\n            gl.bufferSubData(bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n                array.subarray(updateRange.offset, updateRange.offset + updateRange.count));\n\n            updateRange.count = - 1; // reset range\n\n        }\n\n    }\n\n\n    get(attribute) {\n\n        if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n\n        return this._buffers.get(attribute);\n\n    }\n\n    remove(attribute) {\n        let gl = this.gl;\n        if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n\n        let data = this._buffers.get(attribute);\n\n        if (data) {\n\n            gl.deleteBuffer(data.buffer);\n\n            this._buffers.delete(attribute);\n\n        }\n\n    }\n\n    update(attribute, bufferType) {\n\n        if (attribute.isInterleavedBufferAttribute) attribute = attribute.data;\n\n        let data = this._buffers.get(attribute);\n\n        if (data === undefined) {\n\n            this._buffers.set(attribute, this.createBuffer(attribute, bufferType));\n\n        } else if (data.version < attribute.version) {\n\n            this.updateBuffer(data.buffer, attribute, bufferType);\n\n            data.version = attribute.version;\n\n        }\n\n    }\n}\n\n//todo 如果其他地方也用到同样的操作可以提取到WebGLUtils类中\nfunction typeArray2GLType(gl, array) {\n\n    let type = gl.FLOAT;\n\n    if (array instanceof Float32Array) {\n\n        type = gl.FLOAT;\n\n    } else if (array instanceof Float64Array) {\n\n        console.warn('WebGLAttributes: Unsupported data buffer format: Float64Array.');\n\n    } else if (array instanceof Uint16Array) {\n\n        type = gl.UNSIGNED_SHORT;\n\n    } else if (array instanceof Int16Array) {\n\n        type = gl.SHORT;\n\n    } else if (array instanceof Uint32Array) {\n\n        type = gl.UNSIGNED_INT;\n\n    } else if (array instanceof Int32Array) {\n\n        type = gl.INT;\n\n    } else if (array instanceof Int8Array) {\n\n        type = gl.BYTE;\n\n    } else if (array instanceof Uint8Array) {\n\n        type = gl.UNSIGNED_BYTE;\n\n    }\n    return type;\n}\n\nexport { WebGLAttributes };","\n/**\n * @class Vector2\n * @description 二维向量\n * @author bujue\n */\n\nclass Vector2 {\n\tconstructor(x, y) {\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t\tthis.isVector2 = true\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width(value) {\n\n\t\tthis.x = value;\n\n\t}\n\n\n\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height(value) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset(x, y) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\tclone() {\n\n\t\treturn new this.constructor(this.x, this.y);\n\n\t}\n\n\tcopy(v) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\t}\n\n\tadd(v, w) {\n\n\t\tif (w !== undefined) {\n\n\t\t\tconsole.warn('Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n\t\t\treturn this.addVectors(v, w);\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar(s) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors(a, b) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector(v, s) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub(v, w) {\n\n\t\tif (w !== undefined) {\n\n\t\t\tconsole.warn('Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n\t\t\treturn this.subVectors(v, w);\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar(s) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors(a, b) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply(v) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar(scalar) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide(v) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar(scalar) {\n\n\t\treturn this.multiplyScalar(1 / scalar);\n\n\t}\n\n\tfromBufferAttribute(attribute, index, offset) {\n\n\t\tif (offset !== undefined) {\n\n\t\t\tconsole.warn('Vector2: offset has been removed from .fromBufferAttribute().');\n\n\t\t}\n\n\t\tthis.x = attribute.getX(index);\n\t\tthis.y = attribute.getY(index);\n\n\t\treturn this;\n\n\t}\n\tequals(v) {\n\n        return ((v.x === this.x) && (v.y === this.y));\n\n    }\n\n\n}\n\nexport { Vector2 };","import { Vector3 } from '../maths/Vector3'\nimport { Vector2 } from '../maths/Vector2'\nimport { Color } from '../maths/Color'\n\n/**\n * @class  BufferAttribute缓存属性\n * @description 这个类保存了和 缓存几何模型(BufferGeometry) 关联的属性数据。该类用来保存内置属性比如顶点位置、法相量和颜色等，也可以被用于保存自定义属性。\n * @author bujue\n */\n\n\n\nclass BufferAttribute {\n\n    constructor(array, itemSize, normalized) {\n\n        if (Array.isArray(array)) {\n\n            throw new TypeError('BufferAttribute: array should be a Typed Array.');\n\n        }\n\n        this.name = '';\n\n        this.array = array;\n        this.itemSize = itemSize;\n        this.count = array !== undefined ? array.length / itemSize : 0;\n        this.normalized = normalized === true;\n\n        this.dynamic = false;\n        this.updateRange = { offset: 0, count: - 1 };\n\n        this.version = 0;\n        this.isBufferAttribute = true;\n\n\n\n    }\n\n    set needsUpdate(value) {\n        if (value === true) this.version++;\n    }\n\n    onUploadCallback() {\n\n    }\n\n    setDynamic(value) {\n\n        this.dynamic = value;\n\n        return this;\n\n    }\n\n    copyVector3sArray(vectors) {\n\n        let array = this.array, offset = 0;\n\n        for (let i = 0, l = vectors.length; i < l; i++) {\n\n            let vector = vectors[i];\n\n            if (vector === undefined) {\n\n                console.warn('BufferAttribute.copyVector3sArray(): vector is undefined', i);\n                vector = new Vector3();\n\n            }\n\n            array[offset++] = vector.x;\n            array[offset++] = vector.y;\n            array[offset++] = vector.z;\n\n        }\n\n        return this;\n    }\n    copyColorsArray(colors) {\n        let array = this.array, offset = 0;\n\n        for (let i = 0, l = colors.length; i < l; i++) {\n\n            let color = colors[i];\n\n            if (color === undefined) {\n\n                console.warn('BufferAttribute.copyColorsArray(): color is undefined', i);\n                color = new Color();\n\n            }\n\n            array[offset++] = color.r;\n            array[offset++] = color.g;\n            array[offset++] = color.b;\n\n        }\n\n        return this;\n    }\n\n    copyArray(array) {\n        this.array.set(array);\n        return this;\n    }\n\n    getX(index) {\n\n        return this.array[index * this.itemSize];\n\n    }\n\n    setX(index, x) {\n\n        this.array[index * this.itemSize] = x;\n\n        return this;\n\n    }\n\n    getY(index) {\n\n        return this.array[index * this.itemSize + 1];\n\n    }\n\n    setY(index, y) {\n\n        this.array[index * this.itemSize + 1] = y;\n\n        return this;\n\n    }\n\n    getZ(index) {\n\n        return this.array[index * this.itemSize + 2];\n\n    }\n\n    setZ(index, z) {\n\n        this.array[index * this.itemSize + 2] = z;\n\n        return this;\n\n    }\n    getW(index) {\n\n        return this.array[index * this.itemSize + 3];\n\n    }\n\n    setW(index, w) {\n\n        this.array[index * this.itemSize + 3] = w;\n\n        return this;\n\n    }\n\n    setXY(index, x, y) {\n\n        this.setX(index, x);\n        this.setY(index, y);\n\n        return this;\n\n    }\n\n    setXYZ(index, x, y, z) {\n\n        this.setXY(index, x, y);\n        this.setZ(index, z);\n\n        return this;\n\n    }\n\n    setXYZW(index, x, y, z, w) {\n\n        this.setXYZ(index, x, y, z);\n        this.setW(index, w);\n\n        return this;\n\n    }\n\n    copyVector2sArray(vectors) {\n\n        var array = this.array, offset = 0;\n\n        for (var i = 0, l = vectors.length; i < l; i++) {\n\n            var vector = vectors[i];\n\n            if (vector === undefined) {\n\n                console.warn('BufferAttribute.copyVector2sArray(): vector is undefined', i);\n                vector = new Vector2();\n\n            }\n\n            array[offset++] = vector.x;\n            array[offset++] = vector.y;\n\n        }\n\n        return this;\n\n    }\n\n    //todo 相关的方法使用到再定义\n\n}\n\n/**\n * @description\n * Int8Array 类型数组表示二进制补码8位有符号整数的数组。内容初始化为0。\n * 范围在[-255,255]\n * 数组中每个元素的大小值为1\n */\nclass Int8BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Int8Array(array), itemSize, normalized)\n    }\n}\n/**\n * @description \n * Uint8Array 数组类型表示一个8位无符号整型数组，创建时内容被初始化为0。\n * 范围在[0,255]\n * 数组中每个元素的大小值为1\n */\nclass Uint8BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint8Array(array), itemSize, normalized)\n    }\n}\n/**\n * @description\n * Uint8ClampedArray（8位无符号整型固定数组）如果你指定一个在 [0,255] 区间外的值，它将被替换为0或255；如果你指定一个非整数，那么它将被设置为最接近它的整数。（数组）内容被初始化为0。\n * 范围在[0,255]\n * 数组中每个元素的大小值为1\n */\nclass Uint8ClampedBufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint8ClampedArray(array), itemSize, normalized)\n    }\n}\n\n/**\n * @description\n * Int16Array 类型数组表示二进制补码16位有符号整数的数组。内容初始化为0。\n * 范围在[-65535,65536]\n * 数组中每个元素的大小值为2\n */\nclass Int16BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Int16Array(array), itemSize, normalized)\n    }\n}\n\n/**\n * @description\n * Uint16Array 类型数组表示二进制补码16位无符号整数的数组。内容初始化为0。\n * 范围在[0,65536]\n * 数组中每个元素的大小值为2\n */\nclass Uint16BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint16Array(array), itemSize, normalized)\n    }\n}\n\n/**\n * @description\n * Int32Array 类型数组表示二进制补码32位有符号整数的数组。内容初始化为0。\n * 范围在[-4294967295,4294967296]\n * 数组中每个元素的大小值为4\n */\nclass Int32BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Int32Array(array), itemSize, normalized)\n    }\n}\n\n/**\n * @description\n * Uint32Array 类型数组表示二进制补码32位无符号整数的数组。内容初始化为0。\n * 范围在[0,4294967296]\n * 数组中每个元素的大小值为4\n */\nclass Uint32BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Uint32Array(array), itemSize, normalized)\n    }\n}\n\n/**\n * @description\n * Float32Array 类型数组表示二进制补码32位的浮点数型数组。内容初始化为0。\n * 范围在[0,4294967296]\n * 数组中每个元素的大小值为4\n */\nclass Float32BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Float32Array(array), itemSize, normalized)\n    }\n}\n\n/**\n * @description\n * Float64Array 类型数组表示二进制补码64位的浮点数型数组。内容初始化为0。\n * 数组中每个元素的大小值为8\n */\nclass Float64BufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, normalized) {\n        super(new Float64Array(array), itemSize, normalized)\n    }\n}\n\n\n\nexport {\n    Float64BufferAttribute,\n    Float32BufferAttribute,\n    Uint32BufferAttribute,\n    Int32BufferAttribute,\n    Uint16BufferAttribute,\n    Int16BufferAttribute,\n    Uint8ClampedBufferAttribute,\n    Uint8BufferAttribute,\n    Int8BufferAttribute,\n    BufferAttribute\n}\n\n\n","import { Vector2 } from '../maths/Vector2.js';\n/**\n * @class DirectGeometry 缓存属性\n * @description 主要对一个几何体的不同面,采用不同Material 渲染\n * @author bujue\n */\n\n\nclass DirectGeometry {\n    constructor() {\n        this.vertices = [];\n        this.normals = [];\n        this.colors = [];\n        this.uvs = [];\n        this.uvs2 = [];\n\n        this.groups = [];\n\n\n\n        this.boundingBox = null;\n        this.boundingSphere = null;\n\n        // update flags\n\n        this.verticesNeedUpdate = false;\n        this.normalsNeedUpdate = false;\n        this.colorsNeedUpdate = false;\n        this.uvsNeedUpdate = false;\n        this.groupsNeedUpdate = false;\n    }\n\n    computeGroups(geometry) {\n\n        let group;\n        let groups = [];\n        let materialIndex = undefined;\n\n        let faces = geometry.faces;\n        let i = 0;\n\n        for (i = 0; i < faces.length; i++) {\n\n            let face = faces[i];\n\n            // materials\n\n            if (face.materialIndex !== materialIndex) {\n\n                materialIndex = face.materialIndex;\n\n                if (group !== undefined) {\n\n                    group.count = (i * 3) - group.start;\n                    groups.push(group);\n\n                }\n\n                group = {\n                    start: i * 3,\n                    materialIndex: materialIndex\n                };\n\n            }\n\n        }\n\n        if (group !== undefined) {\n\n            group.count = (i * 3) - group.start;\n            groups.push(group);\n\n        }\n\n        this.groups = groups;\n\n    }\n\n    fromGeometry(geometry) {\n\n        let faces = geometry.faces;\n        let vertices = geometry.vertices;\n        let faceVertexUvs = geometry.faceVertexUvs;\n\n        var hasFaceVertexUv = faceVertexUvs[0] && faceVertexUvs[0].length > 0;\n        var hasFaceVertexUv2 = faceVertexUvs[1] && faceVertexUvs[1].length > 0;\n\n        //todo  morphs 暂不开放\n\n\n        //\n\n        for (let i = 0; i < faces.length; i++) {\n\n            let face = faces[i];\n\n            this.vertices.push(vertices[face.a], vertices[face.b], vertices[face.c]);\n\n            let vertexNormals = face.vertexNormals;\n\n            if (vertexNormals.length === 3) {\n\n                this.normals.push(vertexNormals[0], vertexNormals[1], vertexNormals[2]);\n\n            } else {\n\n                let normal = face.normal;\n\n                this.normals.push(normal, normal, normal);\n\n            }\n\n            let vertexColors = face.vertexColors;\n\n            if (vertexColors.length === 3) {\n\n                this.colors.push(vertexColors[0], vertexColors[1], vertexColors[2]);\n\n            } else {\n\n                let color = face.color;\n\n                this.colors.push(color, color, color);\n\n            }\n            if (hasFaceVertexUv === true) {\n\n                var vertexUvs = faceVertexUvs[0][i];\n\n                if (vertexUvs !== undefined) {\n\n                    this.uvs.push(vertexUvs[0], vertexUvs[1], vertexUvs[2]);\n\n                } else {\n\n                    console.warn('DirectGeometry.fromGeometry(): Undefined vertexUv ', i);\n\n                    this.uvs.push(new Vector2(), new Vector2(), new Vector2());\n\n                }\n\n            }\n\n            if (hasFaceVertexUv2 === true) {\n\n                var vertexUvs = faceVertexUvs[1][i];\n\n                if (vertexUvs !== undefined) {\n\n                    this.uvs2.push(vertexUvs[0], vertexUvs[1], vertexUvs[2]);\n\n                } else {\n\n                    console.warn('DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i);\n\n                    this.uvs2.push(new Vector2(), new Vector2(), new Vector2());\n\n                }\n\n            }\n\n        }\n\n        this.computeGroups(geometry);\n\n        this.verticesNeedUpdate = geometry.verticesNeedUpdate;\n        this.normalsNeedUpdate = geometry.normalsNeedUpdate;\n        this.colorsNeedUpdate = geometry.colorsNeedUpdate;\n        this.uvsNeedUpdate = geometry.uvsNeedUpdate;\n        this.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n        return this;\n\n    }\n\n\n}\n\nexport { DirectGeometry };\n","import { Events } from './Events';\nimport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute } from './BufferAttribute.js';\nimport { DirectGeometry } from './DirectGeometry';\nimport { Box3 } from '../maths/Box3'\nimport { Vector3 } from '../maths/Vector3'\nimport { Sphere } from '../maths/Sphere';\nimport { _Math } from '../maths/Math';\n\n/**\n * @class BufferGeometry 三维几何体的缓存基类\n * @description 实现三维几何体的一些基本操作\n * @author bujue\n */\n\nlet bufferGeometryId = 1;\nclass BufferGeometry extends Events {\n    constructor() {\n        super();\n        Object.defineProperty(this, 'id', { value: bufferGeometryId += 2 });\n        this.type = 'BufferGeometry';\n\n        // 顶点索引\n        this.index = null;\n\n        //包含 position  normal uv\n        this.attributes = {};\n\n        this.isBufferGeometry = true;\n\n        this.drawRange = { start: 0, count: Infinity };\n\n        this.groups = [];\n\n        this.boundingBox = null;\n        this.boundingSphere = null;\n\n        this.isBufferGeometry = true;\n\n\n    }\n\n    setIndex(index) {\n\n        if (Array.isArray(index)) {\n\n            this.index = new (_Math.arrayMax(index) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute)(index, 1);\n\n        } else {\n\n            this.index = index;\n\n        }\n\n    }\n\n    getIndex() {\n\n        return this.index;\n\n    }\n\n    addAttribute(name, attribute) {\n\n        if (!(attribute && attribute.isBufferAttribute) && !(attribute && attribute.isInterleavedBufferAttribute)) {\n\n            console.warn('BufferGeometry: .addAttribute() now expects ( name, attribute ).');\n\n            this.addAttribute(name, new BufferAttribute(arguments[1], arguments[2]));\n\n            return;\n\n        }\n\n        if (name === 'index') {\n\n            console.warn('BufferGeometry.addAttribute: Use .setIndex() for index attribute.');\n            this.setIndex(attribute);\n\n            return;\n\n        }\n\n        this.attributes[name] = attribute;\n\n        return this;\n\n    }\n\n    getAttribute(name) {\n\n        return this.attributes[name];\n\n    }\n\n    removeAttribute(name) {\n\n        delete this.attributes[name];\n\n        return this;\n\n    }\n    setFromObject(object) {\n\n\n        let geometry = object.geometry;\n\n        if (object.isPoints || object.isLine) {\n\n            let positions = new Float32BufferAttribute(geometry.vertices.length * 3, 3);\n            let colors = new Float32BufferAttribute(geometry.colors.length * 3, 3);\n\n            this.addAttribute('position', positions.copyVector3sArray(geometry.vertices));\n            this.addAttribute('color', colors.copyColorsArray(geometry.colors));\n\n            if (geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length) {\n\n                let lineDistances = new Float32BufferAttribute(geometry.lineDistances.length, 1);\n\n                this.addAttribute('lineDistance', lineDistances.copyArray(geometry.lineDistances));\n\n            }\n\n            if (geometry.boundingSphere !== null) {\n\n                this.boundingSphere = geometry.boundingSphere.clone();\n\n            }\n\n            if (geometry.boundingBox !== null) {\n\n                this.boundingBox = geometry.boundingBox.clone();\n\n            }\n\n        } else if (object.isMesh) {\n\n            if (geometry && geometry.isGeometry) {\n\n                this.fromGeometry(geometry);\n\n            }\n\n        }\n\n        return this;\n\n    }\n\n    fromGeometry(geometry) {\n\n        geometry.__directGeometry = new DirectGeometry().fromGeometry(geometry);\n\n        return this.fromDirectGeometry(geometry.__directGeometry);\n\n    }\n\n    fromDirectGeometry(geometry) {\n\n        let positions = new Float32Array(geometry.vertices.length * 3);\n        this.addAttribute('position', new BufferAttribute(positions, 3).copyVector3sArray(geometry.vertices));\n\n        if (geometry.normals.length > 0) {\n\n            let normals = new Float32Array(geometry.normals.length * 3);\n            this.addAttribute('normal', new BufferAttribute(normals, 3).copyVector3sArray(geometry.normals));\n\n        }\n\n        if (geometry.colors.length > 0) {\n\n            let colors = new Float32Array(geometry.colors.length * 3);\n            this.addAttribute('color', new BufferAttribute(colors, 3).copyColorsArray(geometry.colors));\n\n        }\n\n        if (geometry.uvs.length > 0) {\n\n            let uvs = new Float32Array(geometry.uvs.length * 2);\n            this.addAttribute('uv', new BufferAttribute(uvs, 2).copyVector2sArray(geometry.uvs));\n\n        }\n\n        if (geometry.uvs2.length > 0) {\n\n            let uvs2 = new Float32Array(geometry.uvs2.length * 2);\n            this.addAttribute('uv2', new BufferAttribute(uvs2, 2).copyVector2sArray(geometry.uvs2));\n\n        }\n\n        // groups\n\n        this.groups = geometry.groups;\n\n        //todo  morphs 暂不开发\n\n\n\n        //todo  skinning 暂不开发\n\n\n\n        if (geometry.boundingSphere !== null) {\n\n            this.boundingSphere = geometry.boundingSphere.clone();\n\n        }\n\n        if (geometry.boundingBox !== null) {\n\n            this.boundingBox = geometry.boundingBox.clone();\n\n        }\n\n        return this;\n\n    }\n    updateFromObject(object) {\n\n        var geometry = object.geometry;\n\n        if (object.isMesh) {\n\n            var direct = geometry.__directGeometry;\n\n            if (geometry.elementsNeedUpdate === true) {\n\n                direct = undefined;\n                geometry.elementsNeedUpdate = false;\n\n            }\n\n            if (direct === undefined) {\n\n                return this.fromGeometry(geometry);\n\n            }\n\n            direct.verticesNeedUpdate = geometry.verticesNeedUpdate;\n            direct.normalsNeedUpdate = geometry.normalsNeedUpdate;\n            direct.colorsNeedUpdate = geometry.colorsNeedUpdate;\n            direct.uvsNeedUpdate = geometry.uvsNeedUpdate;\n            direct.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n            geometry.verticesNeedUpdate = false;\n            geometry.normalsNeedUpdate = false;\n            geometry.colorsNeedUpdate = false;\n            geometry.uvsNeedUpdate = false;\n            geometry.groupsNeedUpdate = false;\n\n            geometry = direct;\n\n        }\n\n\n    }\n\n    computeBoundingBox() {\n\n        if (this.boundingBox === null) {\n\n            this.boundingBox = new Box3();\n\n        }\n\n        var position = this.attributes.position;\n\n        if (position !== undefined) {\n\n            this.boundingBox.setFromBufferAttribute(position);\n\n        } else {\n\n            this.boundingBox.makeEmpty();\n\n        }\n\n        if (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) {\n\n            console.error('BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this);\n\n        }\n\n    }\n\n    computeBoundingSphere() {\n\n        computeBoundingSphere.call(this);\n    }\n    computeVertexNormals() {\n\n        var index = this.index;\n        var attributes = this.attributes;\n        var groups = this.groups;\n\n        if (attributes.position) {\n\n            var positions = attributes.position.array;\n\n            if (attributes.normal === undefined) {\n\n                this.addAttribute('normal', new BufferAttribute(new Float32Array(positions.length), 3));\n\n            } else {\n\n                // reset existing normals to zero\n\n                var array = attributes.normal.array;\n\n                for (var i = 0, il = array.length; i < il; i++) {\n\n                    array[i] = 0;\n\n                }\n\n            }\n\n            var normals = attributes.normal.array;\n\n            var vA, vB, vC;\n            var pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n            var cb = new Vector3(), ab = new Vector3();\n\n            // indexed elements\n\n            if (index) {\n\n                var indices = index.array;\n\n                if (groups.length === 0) {\n\n                    this.addGroup(0, indices.length);\n\n                }\n\n                for (var j = 0, jl = groups.length; j < jl; ++j) {\n\n                    var group = groups[j];\n\n                    var start = group.start;\n                    var count = group.count;\n\n                    for (var i = start, il = start + count; i < il; i += 3) {\n\n                        vA = indices[i + 0] * 3;\n                        vB = indices[i + 1] * 3;\n                        vC = indices[i + 2] * 3;\n\n                        pA.fromArray(positions, vA);\n                        pB.fromArray(positions, vB);\n                        pC.fromArray(positions, vC);\n\n                        cb.subVectors(pC, pB);\n                        ab.subVectors(pA, pB);\n                        cb.cross(ab);\n\n                        normals[vA] += cb.x;\n                        normals[vA + 1] += cb.y;\n                        normals[vA + 2] += cb.z;\n\n                        normals[vB] += cb.x;\n                        normals[vB + 1] += cb.y;\n                        normals[vB + 2] += cb.z;\n\n                        normals[vC] += cb.x;\n                        normals[vC + 1] += cb.y;\n                        normals[vC + 2] += cb.z;\n\n                    }\n\n                }\n\n            } else {\n\n                // non-indexed elements (unconnected triangle soup)\n\n                for (var i = 0, il = positions.length; i < il; i += 9) {\n\n                    pA.fromArray(positions, i);\n                    pB.fromArray(positions, i + 3);\n                    pC.fromArray(positions, i + 6);\n\n                    cb.subVectors(pC, pB);\n                    ab.subVectors(pA, pB);\n                    cb.cross(ab);\n\n                    normals[i] = cb.x;\n                    normals[i + 1] = cb.y;\n                    normals[i + 2] = cb.z;\n\n                    normals[i + 3] = cb.x;\n                    normals[i + 4] = cb.y;\n                    normals[i + 5] = cb.z;\n\n                    normals[i + 6] = cb.x;\n                    normals[i + 7] = cb.y;\n                    normals[i + 8] = cb.z;\n\n                }\n\n            }\n\n            this.normalizeNormals();\n\n            attributes.normal.needsUpdate = true;\n\n        }\n\n    }\n\n    normalizeNormals() {\n        var vector = new Vector3();\n        var normals = this.attributes.normal;\n\n        for (var i = 0, il = normals.count; i < il; i++) {\n\n            vector.x = normals.getX(i);\n            vector.y = normals.getY(i);\n            vector.z = normals.getZ(i);\n\n            vector.normalize();\n\n            normals.setXYZ(i, vector.x, vector.y, vector.z);\n\n        }\n        vector = null;\n\n    }\n\n    addGroup(start, count, materialIndex) {\n\n        this.groups.push({\n\n            start: start,\n            count: count,\n            materialIndex: materialIndex !== undefined ? materialIndex : 0\n\n        });\n\n    }\n\n    clearGroups() {\n\n        this.groups = [];\n\n    }\n\n    clone() {\n\n        return new BufferGeometry().copy(this);\n\n    }\n\n    copy(source) {\n\n        var name, i, l;\n\n        // reset\n\n        this.index = null;\n        this.attributes = {};\n        this.morphAttributes = {};\n        this.groups = [];\n        this.boundingBox = null;\n        this.boundingSphere = null;\n\n        // name\n\n        this.name = source.name;\n\n        // index\n\n        var index = source.index;\n\n        if (index !== null) {\n\n            this.setIndex(index.clone());\n\n        }\n\n        // attributes\n\n        var attributes = source.attributes;\n\n        for (name in attributes) {\n\n            var attribute = attributes[name];\n            this.addAttribute(name, attribute.clone());\n\n        }\n\n\n\n        // groups\n\n        var groups = source.groups;\n\n        for (i = 0, l = groups.length; i < l; i++) {\n\n            var group = groups[i];\n            this.addGroup(group.start, group.count, group.materialIndex);\n\n        }\n\n        // bounding box\n\n        var boundingBox = source.boundingBox;\n\n        if (boundingBox !== null) {\n\n            this.boundingBox = boundingBox.clone();\n\n        }\n\n        // bounding sphere\n\n        var boundingSphere = source.boundingSphere;\n\n        if (boundingSphere !== null) {\n\n            this.boundingSphere = boundingSphere.clone();\n\n        }\n\n        // draw range\n\n        this.drawRange.start = source.drawRange.start;\n        this.drawRange.count = source.drawRange.count;\n\n        return this;\n\n    }\n\n    dispose() {\n\n        this.fire({ type: 'dispose' });\n\n    }\n}\n\n\nlet computeBoundingSphere = (function () {\n\n    var box = new Box3();\n    var vector = new Vector3();\n\n    return function computeBoundingSphere() {\n\n        if (this.boundingSphere === null) {\n\n            this.boundingSphere = new Sphere();\n\n        }\n\n        var position = this.attributes.position;\n\n        if (position) {\n\n            var center = this.boundingSphere.center;\n\n            box.setFromBufferAttribute(position);\n            box.getCenter(center);\n\n            // hoping to find a boundingSphere with a radius smaller than the\n            // boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n            var maxRadiusSq = 0;\n\n            for (var i = 0, il = position.count; i < il; i++) {\n\n                vector.x = position.getX(i);\n                vector.y = position.getY(i);\n                vector.z = position.getZ(i);\n                maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(vector));\n\n            }\n\n            this.boundingSphere.radius = Math.sqrt(maxRadiusSq);\n\n            if (isNaN(this.boundingSphere.radius)) {\n\n                console.error('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this);\n\n            }\n\n        }\n\n    };\n\n})()\n\nexport { BufferGeometry };","import { Uint16BufferAttribute, Uint32BufferAttribute } from '../../core/BufferAttribute.js';\nimport { BufferGeometry } from '../../core/BufferGeometry.js';\nimport { _Math } from '../../maths/Math';\n\n/**\n * @class WebGLGeometries\n * @description 将上层的顶点属性分解后保存到WebGLAttribute对象中 update更新 WebGLAttribute的update \n * @author bujue\n */\n\nclass WebGLGeometries {\n    constructor(gl, attributes, info) {\n        this._gl = gl;\n        this._geometries = {};\n        this._attributes = attributes;\n        this._info = info;\n        this._wireframeAttributes = {}\n\n    }\n\n\n    get(object, geometry) {\n\n        let buffergeometry = this._geometries[geometry.id];\n\n        if (buffergeometry) return buffergeometry;\n\n        this._onGeometryDisposeBind = onGeometryDispose.bind(this);\n        geometry.on('dispose', this._onGeometryDisposeBind);\n\n        if (geometry.isBufferGeometry) {\n\n            buffergeometry = geometry;\n\n        } else if (geometry.isGeometry) {\n\n            if (geometry._bufferGeometry === undefined) {\n\n                geometry._bufferGeometry = new BufferGeometry().setFromObject(object);\n\n            }\n\n            buffergeometry = geometry._bufferGeometry;\n\n        }\n\n        this._geometries[geometry.id] = buffergeometry;\n\n        this._info.memory.geometries++;\n\n        return buffergeometry;\n\n    }\n\n    update(geometry) {\n\n        let gl = this._gl;\n        let index = geometry.index;\n        let geometryAttributes = geometry.attributes;\n\n        if (index !== null) {\n\n            this._attributes.update(index, gl.ELEMENT_ARRAY_BUFFER);\n\n        }\n\n        for (let name in geometryAttributes) {\n\n            this._attributes.update(geometryAttributes[name], gl.ARRAY_BUFFER);\n\n        }\n\n        // todo morph targets 暂时不开发\n\n\n    }\n    getWireframeAttribute(geometry) {\n\n        let gl = this._gl;\n        let arrayMax = _Math.arrayMax;\n        let attribute = this._wireframeAttributes[geometry.id];\n\n        if (attribute) return attribute;\n\n        let indices = [];\n\n        let geometryIndex = geometry.index;\n        let geometryAttributes = geometry.attributes;\n\n        // console.time( 'wireframe' );\n\n        if (geometryIndex !== null) {\n\n            let array = geometryIndex.array;\n\n            for (let i = 0, l = array.length; i < l; i += 3) {\n\n                let a = array[i + 0];\n                let b = array[i + 1];\n                let c = array[i + 2];\n\n                indices.push(a, b, b, c, c, a);\n\n            }\n\n        } else {\n\n            let array = geometryAttributes.position.array;\n\n            for (let i = 0, l = (array.length / 3) - 1; i < l; i += 3) {\n\n                let a = i + 0;\n                let b = i + 1;\n                let c = i + 2;\n\n                indices.push(a, b, b, c, c, a);\n\n            }\n\n        }\n\n        // console.timeEnd( 'wireframe' );\n\n        attribute = new (arrayMax(indices) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute)(indices, 1);\n\n        this._attributes.update(attribute, gl.ELEMENT_ARRAY_BUFFER);\n\n        this._wireframeAttributes[geometry.id] = attribute;\n\n        return attribute;\n\n    }\n}\n\nfunction onGeometryDispose(event) {\n\n    let geometry = event.target;\n    let buffergeometry = this._geometries[geometry.id];\n    if (!buffergeometry) return;\n\n    if (buffergeometry.index !== null) {\n\n        this._attributes.remove(buffergeometry.index);\n\n    }\n\n    for (let name in buffergeometry.attributes) {\n\n        this._attributes.remove(buffergeometry.attributes[name]);\n\n    }\n\n    geometry.off('dispose', this._onGeometryDisposeBind);\n\n    this._onGeometryDisposeBind = null;\n    \n    delete this._geometries[geometry.id];\n\n    // TODO Remove duplicate code\n\n    let attribute = this._wireframeAttributes[geometry.id];\n\n    if (attribute) {\n\n        this._attributes.remove(attribute);\n        delete this._wireframeAttributes[geometry.id];\n\n    }\n\n    // attribute = this._wireframeAttributes[buffergeometry.id];\n\n    // if (attribute) {\n\n    //     this._attributes.remove(attribute);\n    //     delete this._wireframeAttributes[buffergeometry.id];\n\n    // }\n\n    //\n\n    this._info.memory.geometries--;\n\n}\n\nexport { WebGLGeometries };","import { Color } from '../../maths/Color';\nimport { Matrix3 } from '../../maths/Matrix3';\nimport {Vector2} from '../../maths/Vector2';\n\nlet UniformsLib = {\n\tcommon: {\n\n\t\tdiffuse: { value: new Color(0xeeeeee) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\n\n\t},\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tdirectionalLights: {\n\t\t\tvalue: [], properties: {\n\t\t\t\tdirection: {},\n\t\t\t\tcolor: {}\n\t\t\t}\n\t\t},\n\n\t\tspotLights: {\n\t\t\tvalue: [], properties: {\n\t\t\t\tcolor: {},\n\t\t\t\tposition: {},\n\t\t\t\tdirection: {},\n\t\t\t\tdistance: {},\n\t\t\t\tconeCos: {},\n\t\t\t\tpenumbraCos: {},\n\t\t\t\tdecay: {}\n\t\t\t}\n\t\t},\n\n\t\tpointLights: {\n\t\t\tvalue: [], properties: {\n\t\t\t\tcolor: {},\n\t\t\t\tposition: {},\n\t\t\t\tdecay: {},\n\t\t\t\tdistance: {}\n\t\t\t}\n\t\t},\n\n\t},\n\tpoints: {\n\n\t\tdiffuse: { value: new Color(0xeeeeee) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t},\n\tline: {\n\t\tscale: { value: 1 },\n\t\tdashSize: { value: 1 },\n\t\ttotalSize: { value: 2 }\n\t},\n\tsprite: {\n\n\t\tdiffuse: { value: new Color(0xeeeeee) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: new Vector2(0.5, 0.5) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n}\n\nexport { UniformsLib };","const UniformsUtils = {\n\n\tmerge: function ( uniforms ) {\n\n\t\tvar merged = {};\n\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\n\n\t\t\tfor ( var p in tmp ) {\n\n\t\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn merged;\n\n\t},\n\n\tclone: function ( uniforms_src ) {\n\n\t\tvar uniforms_dst = {};\n\n\t\tfor ( var u in uniforms_src ) {\n\n\t\t\tuniforms_dst[ u ] = {};\n\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\n\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\n\n\t\t\t\tif ( parameter_src && ( parameter_src.isColor ||\n\t\t\t\t\tparameter_src.isMatrix3 || parameter_src.isMatrix4 ||\n\t\t\t\t\tparameter_src.isVector2 || parameter_src.isVector3 || parameter_src.isVector4 ||\n\t\t\t\t\tparameter_src.isTexture ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\n\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn uniforms_dst;\n\n\t}\n\n};\n\n\nexport { UniformsUtils };","\nimport meshbasic_frag from './ShaderLib/meshbasic_frag.glsl';\nimport meshbasic_vert from './ShaderLib/meshbasic_vert.glsl';\n\nimport linedashed_frag from './ShaderLib/linedashed_frag.glsl';\nimport linedashed_vert from './ShaderLib/linedashed_vert.glsl';\n\nimport points_frag from './ShaderLib/points_frag.glsl';\nimport points_vert from './ShaderLib/points_vert.glsl';\n\n\nimport meshlambert_frag from './ShaderLib/meshlambert_frag.glsl';\nimport meshlambert_vert from './ShaderLib/meshlambert_vert.glsl';\n\nimport meshphong_frag from './ShaderLib/meshphong_frag.glsl';\nimport meshphong_vert from './ShaderLib/meshphong_vert.glsl';\n\nimport linemesh_frag from './ShaderLib/linemesh_frag.glsl';\nimport linemesh_vert from './ShaderLib/linemesh_vert.glsl';\n\nimport sprite_frag from './ShaderLib/sprite_frag.glsl';\nimport sprite_vert from './ShaderLib/sprite_vert.glsl';\n\nexport const ShaderChunk = {\n\n\tmeshbasic_frag,\n\tmeshbasic_vert,\n\n\tlinedashed_vert,\n\tlinedashed_frag,\n\n\tpoints_vert,\n\tpoints_frag,\n\n\tmeshlambert_vert,\n\tmeshlambert_frag,\n\n\tmeshphong_vert,\n\tmeshphong_frag,\n\n\tlinemesh_vert,\n\tlinemesh_frag,\n\n\tsprite_vert,\n\tsprite_frag\n\n};","\nimport { UniformsLib } from './UniformsLib';\nimport { UniformsUtils } from './UniformsUtils.js';\nimport { ShaderChunk } from './ShaderChunk.js';\nimport { Color } from '../../maths/Color';\nimport { Vector2 } from '../../maths/Vector2';\n\nlet ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: UniformsUtils.merge([\n\t\t\tUniformsLib.common\n\t\t]),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\tlambert: {\n\n\t\tuniforms: UniformsUtils.merge([\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color(0x000000) }\n\t\t\t}\n\t\t]),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\tphong: {\n\n\t\tuniforms: UniformsUtils.merge([\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color(0x000000) },\n\t\t\t\tspecular: { value: new Color(0x111111) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t]),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\tdashed: {\n\t\tuniforms: UniformsUtils.merge([\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.line\n\n\t\t]),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\tlinemesh: {\n\t\tuniforms: UniformsUtils.merge([\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.line,\n\t\t\t{\n\t\t\t\tlinewidth: { value: 1 },\n\t\t\t\tresolution: { value: new Vector2(1, 1) },\n\t\t\t}\n\n\t\t]),\n\t\tvertexShader: ShaderChunk.linemesh_vert,\n\t\tfragmentShader: ShaderChunk.linemesh_frag\n\t},\n\tpoints: {\n\t\tuniforms: UniformsUtils.merge([\n\t\t\tUniformsLib.points,\n\t\t\t//UniformsLib.fog\n\t\t]),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\tsprite: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.sprite,\n\t\t\t//UniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t}\n\n}\n\nexport { ShaderLib }","\n\n/**\n * @class WebGLInfo\n * @description 保存渲染的基本数据\n * @author bujue\n */\n\nclass WebGLInfo {\n    constructor(gl) {\n        this.gl = gl;\n\n        this.memory = {\n            geometries: 0,\n            textures: 0\n        };\n\n        this.render = {\n            frame: 0,\n            calls: 0,\n            triangles: 0,\n            points: 0,\n            lines: 0\n        };\n\n        this.programs = null;\n        this.autoReset = true;\n\n\n    }\n\n    update(count, mode, instanceCount) {\n\n        let gl = this.gl;\n        instanceCount = instanceCount || 1;\n\n        this.render.calls++;\n\n        switch (mode) {\n\n            case gl.TRIANGLES:\n                this.render.triangles += instanceCount * (count / 3);\n                break;\n\n            case gl.TRIANGLE_STRIP:\n            case gl.TRIANGLE_FAN:\n                this.render.triangles += instanceCount * (count - 2);\n                break;\n\n            case gl.LINES:\n                this.render.lines += instanceCount * (count / 2);\n                break;\n\n            case gl.LINE_STRIP:\n                this.render.lines += instanceCount * (count - 1);\n                break;\n\n            case gl.LINE_LOOP:\n                this.render.lines += instanceCount * count;\n                break;\n\n            case gl.POINTS:\n                this.render.points += instanceCount * count;\n                break;\n\n            default:\n                console.error('WebGLInfo: Unknown draw mode:', mode);\n                break;\n\n        }\n\n    }\n\n    reset() {\n        this.render.frame++;\n        this.render.calls = 0;\n        this.render.triangles = 0;\n        this.render.points = 0;\n        this.render.lines = 0;\n\n    }\n\n}\n\nexport { WebGLInfo };\n","import { Events } from \"../core/Events\";\nimport {\n    ClampToEdgeWrapping,\n    LinearFilter,\n    LinearMipMapLinearFilter,\n    RGBAFormat,\n    UnsignedByteType,\n    UVMapping\n} from '../constants';\n\nimport { Vector2 } from '../maths/Vector2.js';\nimport { Matrix3 } from '../maths/Matrix3.js';\n\nlet textureId = 0;\nclass Texture extends Events {\n    constructor(image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding) {\n        super();\n        Object.defineProperty(this, 'id', { value: textureId++ });\n        this.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\n        this.mipmaps = [];\n        this.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n        this.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n        this.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n        this.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n        this.minFilter = minFilter !== undefined ? minFilter : LinearMipMapLinearFilter;\n\n        this.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n        this.format = format !== undefined ? format : RGBAFormat;\n        this.type = type !== undefined ? type : UnsignedByteType;\n\n        this.offset = new Vector2(0, 0);\n        this.repeat = new Vector2(1, 1);\n        this.center = new Vector2(0, 0);\n        this.rotation = 0;\n\n        this.matrixAutoUpdate = true;\n        this.matrix = new Matrix3();\n\n        this.generateMipmaps = true;\n        this.premultiplyAlpha = false;\n        this.flipY = true;\n        this.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n        //\n        // Also changing the encoding after already used by a Material will not automatically make the Material\n        // update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\n        //this.encoding = encoding !== undefined ? encoding :  LinearEncoding;\n\n        this.version = 0;\n        this.onUpdate = null;\n\n        this.isTexture = true;\n\n    }\n\n    set needsUpdate(value) {\n        if (value === true) this.version++;\n    }\n\n    updateMatrix () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t}\n\n    dispose () {\n\n\t\tthis.fire( { type: 'dispose' } );\n\n\t}\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nexport { Texture };","\n// import { CubeTexture } from '../../textures/CubeTexture.js';\nimport { Texture } from '../../textures/Texture.js';\n\n/**\n * @class WebGLUniforms\n * @description Uniform 变量的赋值,不同类型,底层提供不同的赋值方法\n * @author bujue\n * gl.uniform1f (floatUniformLoc, v); // for float\n * gl.uniform1fv(floatUniformLoc, [v]);   // for float or float array\n * gl.uniform2f (vec2UniformLoc,  v0, v1);// for vec2\n * gl.uniform2fv(vec2UniformLoc,  [v0, v1]);  // for vec2 or vec2 array\n * gl.uniform3f (vec3UniformLoc,  v0, v1, v2);// for vec3\n * gl.uniform3fv(vec3UniformLoc,  [v0, v1, v2]);  // for vec3 or vec3 array\n * gl.uniform4f (vec4UniformLoc,  v0, v1, v2, v4);// for vec4\n * gl.uniform4fv(vec4UniformLoc,  [v0, v1, v2, v4]);  // for vec4 or vec4 array\n\n * gl.uniformMatrix2fv(mat2UniformLoc, false, [  4x element array ])  // for mat2 or mat2 array\n * gl.uniformMatrix3fv(mat3UniformLoc, false, [  9x element array ])  // for mat3 or mat3 array\n * gl.uniformMatrix4fv(mat4UniformLoc, false, [ 17x element array ])  // for mat4 or mat4 array\n\n * gl.uniform1i (intUniformLoc,   v); // for int\n * gl.uniform1iv(intUniformLoc, [v]); // for int or int array\n * gl.uniform2i (ivec2UniformLoc, v0, v1);// for ivec2\n * gl.uniform2iv(ivec2UniformLoc, [v0, v1]);  // for ivec2 or ivec2 array\n * gl.uniform3i (ivec3UniformLoc, v0, v1, v2);// for ivec3\n * gl.uniform3iv(ivec3UniformLoc, [v0, v1, v2]);  // for ivec3 or ivec3 array\n * gl.uniform4i (ivec4UniformLoc, v0, v1, v2, v4);// for ivec4\n * gl.uniform4iv(ivec4UniformLoc, [v0, v1, v2, v4]);  // for ivec4 or ivec4 array\n\n * gl.uniform1i (sampler2DUniformLoc,   v);   // for sampler2D (textures)\n * gl.uniform1iv(sampler2DUniformLoc, [v]);   // for sampler2D or sampler2D array\n\n * gl.uniform1i (samplerCubeUniformLoc,   v); // for samplerCube (textures)\n * gl.uniform1iv(samplerCubeUniformLoc, [v]); // for samplerCube or samplerCube array\n */\n\n\nclass WebGLUniforms {\n\n    constructor(gl, program, renderer) {\n        this._gl = gl;\n        this._program = program;\n        this._renderer = renderer;\n        this.seq = [];\n        this.map = {};\n\n        let n = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n        for (let i = 0; i < n; ++i) {\n\n            let info = gl.getActiveUniform(program, i),\n                addr = gl.getUniformLocation(program, info.name);\n\n            parseUniform(info, addr, this);\n\n        }\n\n    }\n\n    setValue(name, value) {\n\n        var u = this.map[name];\n\n        if (u !== undefined) u.setValue(value, this._renderer);\n\n    }\n\n    setOptional(object, name) { //保留,暂时用不到\n\n        var v = object[name];\n\n        if (v !== undefined) this.setValue(name, v);\n\n    }\n    static upload(gl, seq, values, renderer) {\n\n        for (var i = 0, n = seq.length; i !== n; ++i) {\n\n            var u = seq[i],\n                v = values[u.id];\n\n            if (v.needsUpdate !== false) {\n\n                // note: always updating when .needsUpdate is undefined\n                u.setValue(v.value, renderer);\n\n            }\n\n        }\n\n    }\n    static seqWithValue(seq, values) {\n\n        var r = [];\n\n        for (var i = 0, n = seq.length; i !== n; ++i) {\n\n            var u = seq[i];\n            if (u.id in values) r.push(u);\n\n        }\n\n        return r;\n\n    }\n\n}\n\nclass StructuredUniform {\n    constructor(gl, id) {\n\n        this._gl = gl;\n        this.id = id;\n        this.seq = [];\n        this.map = {};\n    }\n\n    setValue(value) {\n\n        // Note: Don't need an extra 'renderer' parameter, since samplers\n        // are not allowed in structured uniforms.\n\n        var seq = this.seq;\n\n        for (var i = 0, n = seq.length; i !== n; ++i) {\n\n            var u = seq[i];\n            u.setValue(value[u.id]);\n\n        }\n\n    }\n}\n\n\n// --- Uniform Classes ---\n\nclass SingleUniform {\n    constructor(gl, id, activeInfo, addr) {\n        this._gl = gl;\n        this.id = id;\n        this.addr = addr;\n        this.cache = [];\n        this.setValue = getSingularSetter(activeInfo.type);\n\n        // this.path = activeInfo.name; // DEBUG\n\n    }\n\n}\n\n\n\nclass PureArrayUniform {\n    constructor(gl, id, activeInfo, addr) {\n        this._gl = gl\n        this.id = id;\n        this.addr = addr;\n        this.cache = [];\n        this.size = activeInfo.size;\n        this.setValue = getPureArraySetter(activeInfo.type);\n\n        // this.path = activeInfo.name; // DEBUG\n\n    }\n\n\n}\n\nfunction getSingularSetter(type) {\n    switch (type) {\n\n        case 0x1406: return setValue1f; // FLOAT\n        case 0x8b50: return setValue2fv; // _VEC2\n        case 0x8b51: return setValue3fv; // _VEC3\n        case 0x8b52: return setValue4fv; // _VEC4\n\n        case 0x8b5a: return setValue2fm; // _MAT2\n        case 0x8b5b: return setValue3fm; // _MAT3\n        case 0x8b5c: return setValue4fm; // _MAT4\n\n        case 0x8b5e: case 0x8d66: return setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\n        // case 0x8b60: return setValueT6; // SAMPLER_CUBE\n\n        case 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\n        case 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n        case 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n        case 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n    }\n}\n\nfunction getPureArraySetter(type) {\n\n    switch (type) {\n\n        case 0x1406: return setValue1fv; // FLOAT\n        case 0x8b50: return setValueV2a; // _VEC2\n        case 0x8b51: return setValueV3a; // _VEC3\n        case 0x8b52: return setValueV4a; // _VEC4\n\n        case 0x8b5a: return setValueM2a; // _MAT2\n        case 0x8b5b: return setValueM3a; // _MAT3\n        case 0x8b5c: return setValueM4a; // _MAT4\n\n        case 0x8b5e: return setValueT1a; // SAMPLER_2D\n        //  case 0x8b60: return setValueT6a; // SAMPLER_CUBE\n\n        case 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\n        case 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n        case 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n        case 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n    }\n\n}\n\n\nfunction parseUniform(activeInfo, addr, container) {\n\n    let RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n    let path = activeInfo.name,\n        pathLength = path.length;\n\n    // reset RegExp object, because of the early exit of a previous run\n    RePathPart.lastIndex = 0;\n\n    while (true) {\n\n        let match = RePathPart.exec(path),\n            matchEnd = RePathPart.lastIndex,\n\n            id = match[1],\n            idIsIndex = match[2] === ']',\n            subscript = match[3];\n\n        if (idIsIndex) id = id | 0; // convert to integer\n\n        if (subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength) {\n\n            // bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n            addUniform(container, subscript === undefined ?\n                new SingleUniform(container._gl, id, activeInfo, addr) :\n                new PureArrayUniform(container._gl, id, activeInfo, addr));\n\n            break;\n\n        } else {\n\n            // step into inner node / create it in case it doesn't exist\n\n            let map = container.map, next = map[id];\n\n            if (next === undefined) {\n\n                next = new StructuredUniform(container._gl,id);\n                addUniform(container, next);\n\n            }\n\n            container = next;\n\n        }\n\n    }\n\n}\n\nfunction addUniform(container, uniformObject) {\n\n    container.seq.push(uniformObject);\n    container.map[uniformObject.id] = uniformObject;\n\n}\n// Array Caches (provide typed arrays for temporary by size)\n\nlet arrayCacheF32 = [];\nlet arrayCacheI32 = [];\n\nlet arrayUtils = {\n    mat2array: new Float32Array(4),\n    mat3array: new Float32Array(9),\n    mat4array: new Float32Array(16),\n    emptyTexture: new Texture(),\n    // emptyCubeTexture: new CubeTexture(),\n    arraysEqual(a, b) {\n\n        if (a.length !== b.length) return false;\n\n        for (let i = 0, l = a.length; i < l; i++) {\n\n            if (a[i] !== b[i]) return false;\n\n        }\n\n        return true;\n\n    },\n    copyArray(a, b) {\n\n        for (let i = 0, l = b.length; i < l; i++) {\n\n            a[i] = b[i];\n\n        }\n\n    },\n    flatten(array, nBlocks, blockSize) {\n\n        var firstElem = array[0];\n\n        if (firstElem <= 0 || firstElem > 0) return array;\n        // unoptimized: ! isNaN( firstElem )\n        // see http://jacksondunstan.com/articles/983\n\n        var n = nBlocks * blockSize,\n            r = arrayCacheF32[n];\n\n        if (r === undefined) {\n\n            r = new Float32Array(n);\n            arrayCacheF32[n] = r;\n\n        }\n\n        if (nBlocks !== 0) {\n\n            firstElem.toArray(r, 0);\n\n            for (var i = 1, offset = 0; i !== nBlocks; ++i) {\n\n                offset += blockSize;\n                array[i].toArray(r, offset);\n\n            }\n\n        }\n\n        return r;\n\n    },\n    allocTexUnits(renderer, n) {\n\n        var r = arrayCacheI32[n];\n\n        if (r === undefined) {\n\n            r = new Int32Array(n);\n            arrayCacheI32[n] = r;\n\n        }\n\n        for (var i = 0; i !== n; ++i)\n            r[i] = renderer.allocTextureUnit();\n\n        return r;\n\n    }\n}\n\n// --- Setters ---\n\n\nfunction setValue1f(v) {\n\n    let cache = this.cache;\n\n    if (cache[0] === v) return;\n\n    this._gl.uniform1f(this.addr, v);\n\n    cache[0] = v;\n\n}\n\nfunction setValue1i(v) {\n\n    let cache = this.cache;\n\n    if (cache[0] === v) return;\n\n    this._gl.uniform1i(this.addr, v);\n\n    cache[0] = v;\n\n}\n\n// Single float vector (from flat array or MMGL.VectorN)\n\nfunction setValue2fv(v) {\n\n    let cache = this.cache;\n\n    if (v.x !== undefined) { //XY\n\n        if (cache[0] !== v.x || cache[1] !== v.y) {\n\n            this._gl.uniform2f(this.addr, v.x, v.y);\n\n            cache[0] = v.x;\n            cache[1] = v.y;\n\n        }\n\n    } else { //arr[2]\n\n        if (arrayUtils.arraysEqual(cache, v)) return;\n\n        this._gl.uniform2fv(this.addr, v);\n\n        arrayUtils.copyArray(cache, v);\n\n    }\n\n}\n\nfunction setValue3fv(v) {\n\n    let cache = this.cache;\n\n    if (v.x !== undefined) { //XYZ\n\n        if (cache[0] !== v.x || cache[1] !== v.y || cache[2] !== v.z) {\n\n            this._gl.uniform3f(this.addr, v.x, v.y, v.z);\n\n            cache[0] = v.x;\n            cache[1] = v.y;\n            cache[2] = v.z;\n\n        }\n\n    } else if (v.r !== undefined) { //RGB\n\n        if (cache[0] !== v.r || cache[1] !== v.g || cache[2] !== v.b) {\n\n            this._gl.uniform3f(this.addr, v.r, v.g, v.b);\n\n            cache[0] = v.r;\n            cache[1] = v.g;\n            cache[2] = v.b;\n\n        }\n\n    } else { //arr[3]\n\n        if (arrayUtils.arraysEqual(cache, v)) return;\n\n        this._gl.uniform3fv(this.addr, v);\n\n        arrayUtils.copyArray(cache, v);\n\n    }\n\n}\n\nfunction setValue4fv(v) {\n\n    let cache = this.cache;\n\n    if (v.x !== undefined) { //XYZW\n\n        if (cache[0] !== v.x || cache[1] !== v.y || cache[2] !== v.z || cache[3] !== v.w) {\n\n            this._gl.uniform4f(this.addr, v.x, v.y, v.z, v.w);\n\n            cache[0] = v.x;\n            cache[1] = v.y;\n            cache[2] = v.z;\n            cache[3] = v.w;\n\n        }\n\n    }else if(v.r !==undefined){ //rgba\n        if (cache[0] !== v.r || cache[1] !== v.g || cache[2] !== v.b || cache[3]!==v.a) {\n\n            this._gl.uniform4f(this.addr, v.r, v.g, v.b,v.a);\n\n            cache[0] = v.r;\n            cache[1] = v.g;\n            cache[2] = v.b;\n            cache[2] = v.a;\n\n        }\n    } else { //arr[4]\n\n        if (arrayUtils.arraysEqual(cache, v)) return;\n\n        this._gl.uniform4fv(this.addr, v);\n\n        arrayUtils.copyArray(cache, v);\n\n    }\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValue2fm(v) {\n\n    let cache = this.cache;\n    let elements = v.elements;\n\n    if (elements === undefined) {  //v is Float32Array 4\n\n        if (arrayUtils.arraysEqual(cache, v)) return;\n\n        this._gl.uniformMatrix2fv(this.addr, false, v);\n\n        arrayUtils.copyArray(cache, v);\n\n    } else {\n\n        if (arrayUtils.arraysEqual(cache, elements)) return;\n\n        arrayUtils.mat2array.set(elements);\n\n        this._gl.uniformMatrix2fv(this.addr, false, arrayUtils.mat2array);\n\n        arrayUtils.copyArray(cache, elements);\n\n    }\n\n}\n\nfunction setValue3fm(v) {\n\n    let cache = this.cache;\n    let elements = v.elements;\n\n    if (elements === undefined) {\n\n        if (arrayUtils.arraysEqual(cache, v)) return;\n\n        this._gl.uniformMatrix3fv(this.addr, false, v);\n\n        arrayUtils.copyArray(cache, v);\n\n    } else {\n\n        if (arrayUtils.arraysEqual(cache, elements)) return;\n\n        arrayUtils.mat3array.set(elements);\n\n        this._gl.uniformMatrix3fv(this.addr, false, arrayUtils.mat3array);\n\n        arrayUtils.copyArray(cache, elements);\n\n    }\n\n}\n\nfunction setValue4fm(v) {\n\n    let cache = this.cache;\n    let elements = v.elements;\n\n    if (elements === undefined) {\n\n        if (arrayUtils.arraysEqual(cache, v)) return;\n\n        this._gl.uniformMatrix4fv(this.addr, false, v);\n\n        arrayUtils.copyArray(cache, v);\n\n    } else {\n\n        if (arrayUtils.arraysEqual(cache, elements)) return;\n\n        arrayUtils.mat4array.set(elements);\n\n        this._gl.uniformMatrix4fv(this.addr, false, arrayUtils.mat4array);\n\n        arrayUtils.copyArray(cache, elements);\n\n    }\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1(v, renderer) {\n\n    let cache = this.cache;\n    let unit = renderer.allocTextureUnit();\n\n    if (cache[0] !== unit) {\n\n        this._gl.uniform1i(this.addr, unit);\n        cache[0] = unit;\n\n    }\n\n    renderer.setTexture2D(v || arrayUtils.emptyTexture, unit);\n\n}\n\n// function setValueT6(v, renderer) {\n\n//     let cache = this.cache;\n//     let unit = renderer.allocTextureUnit();\n\n//     if (cache[0] !== unit) {\n\n//         this._gl.uniform1i(this.addr, unit);\n//         cache[0] = unit;\n\n//     }\n\n//     renderer.setTextureCube(v || arrayUtils.emptyCubeTexture, unit);\n\n// }\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValue2iv(v) {\n\n    let cache = this.cache;\n\n    if (arrayUtils.arraysEqual(cache, v)) return;\n\n    this._gl.uniform2iv(this.addr, v);\n\n    arrayUtils.copyArray(cache, v);\n\n}\n\nfunction setValue3iv(v) {\n\n    let cache = this.cache;\n\n    if (arrayUtils.arraysEqual(cache, v)) return;\n\n    this._gl.uniform3iv(this.addr, v);\n\n    arrayUtils.copyArray(cache, v);\n\n}\n\nfunction setValue4iv(v) {\n\n    let cache = this.cache;\n\n    if (arrayUtils.arraysEqual(cache, v)) return;\n\n    this._gl.uniform4iv(this.addr, v);\n\n    arrayUtils.copyArray(cache, v);\n\n}\n\n\n// Array of scalars\n\nfunction setValue1fv(v) {\n\n    let cache = this.cache;\n\n    if (arrayUtils.arraysEqual(cache, v)) return;\n\n    this._gl.uniform1fv(this.addr, v);\n\n    arrayUtils.copyArray(cache, v);\n\n}\nfunction setValue1iv(v) {\n\n    let cache = this.cache;\n\n    if (arrayUtils.arraysEqual(cache, v)) return;\n\n    this._gl.uniform1iv(this.addr, v);\n\n    arrayUtils.copyArray(cache, v);\n\n}\n\n\nfunction setValueV2a(v) {\n\n    this._gl.uniform2fv(this.addr, arrayUtils.flatten(v, this.size, 2));\n\n}\n\nfunction setValueV3a(v) {\n\n    this._gl.uniform3fv(this.addr, arrayUtils.flatten(v, this.size, 3));\n\n}\n\nfunction setValueV4a(v) {\n\n    this._gl.uniform4fv(this.addr, arrayUtils.flatten(v, this.size, 4));\n\n}\n\n\nfunction setValueM2a(v) {\n\n    this._gl.uniformMatrix2fv(this.addr, false, arrayUtils.flatten(v, this.size, 4));\n\n}\n\nfunction setValueM3a(v) {\n\n    this._gl.uniformMatrix3fv(this.addr, false, arrayUtils.flatten(v, this.size, 9));\n\n}\n\nfunction setValueM4a(v) {\n\n    this._gl.uniformMatrix4fv(this.addr, false, arrayUtils.flatten(v, this.size, 16));\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1a(v, renderer) {\n\n    let cache = this.cache;\n    let n = v.length;\n\n    let units = arrayUtils.allocTexUnits(renderer, n);\n\n    if (arrayUtils.arraysEqual(cache, units) === false) {\n\n        this._gl.uniform1iv(this.addr, units);\n        arrayUtils.copyArray(cache, units);\n\n    }\n\n    for (let i = 0; i !== n; ++i) {\n\n        renderer.setTexture2D(v[i] || arrayUtils.emptyTexture, units[i]);\n\n    }\n\n}\n\n// function setValueT6a(v, renderer) {\n\n//     let cache = this.cache;\n//     let n = v.length;\n\n//     let units = arrayUtils.allocTexUnits(renderer, n);\n\n//     if (arrayUtils.arraysEqual(cache, units) === false) {\n\n//         this._gl.uniform1iv(this.addr, units);\n//         arrayUtils.copyArray(cache, units);\n\n//     }\n\n//     for (let i = 0; i !== n; ++i) {\n\n//         renderer.setTextureCube(v[i] || arrayUtils.emptyCubeTexture, units[i]);\n\n//     }\n\n// }\n\n\n\nexport { WebGLUniforms };","\nfunction addLineNumbers( string ) {\n\n\tvar lines = string.split( '\\n' );\n\n\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction WebGLShader( gl, type, string ) {\n\n\tvar shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\n\n\t\tconsole.error( 'WebGLShader: Shader couldn\\'t compile.' );\n\n\t}\n\n\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\n\n\t\tconsole.warn( 'WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\n\n\t}\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\treturn shader;\n\n}\n\n\nexport { WebGLShader };","import { WebGLUniforms } from './WebGLUniforms';\n\nimport { WebGLShader } from './WebGLShader.js';\n\n/**\n * @class WebGLProgram\n * @description  组织shader code ,生成 program 对象\n * @author bujue\n */\nlet programIdCount = 0;\n\nclass WebGLProgram {\n    constructor(gl, extensions, material, code, shader, parameters) {\n        this._gl = gl;\n        this._defines = material.defines;\n\n        this._cachedUniforms = undefined;\n        this._cachedAttributes = undefined;\n\n        this.name = shader.name;\n        this.id = programIdCount++;\n        this.code = code;\n        this.usedTimes = 1;\n        this.program = null;\n        this.vertexShader = '';\n        this.fragmentShader = '';\n\n\n        this._init(gl, extensions, material, shader, parameters);\n\n    }\n    _init(gl, extensions, material, shader, parameters) {\n\n        let vertexShader = shader.vertexShader;\n        let fragmentShader = shader.fragmentShader;\n\n        let customExtensions = generateExtensions(material.extensions, parameters, extensions);\n\n        let customDefines = generateDefines(this._defines);\n\n        let program = this.program = gl.createProgram();\n\n        let prefixVertex, prefixFragment;\n\n        if (material.isRawShaderMaterial) {\n\n            prefixVertex = [\n\n                customDefines\n\n            ].filter(filterEmptyLine).join('\\n');\n\n            if (prefixVertex.length > 0) {\n\n                prefixVertex += '\\n';\n\n            }\n\n            prefixFragment = [\n\n                customExtensions,\n                customDefines\n\n            ].filter(filterEmptyLine).join('\\n');\n\n            if (prefixFragment.length > 0) {\n\n                prefixFragment += '\\n';\n\n            }\n\n        } else {\n            prefixVertex = [\n\n                'precision ' + parameters.precision + ' float;',\n                'precision ' + parameters.precision + ' int;',\n\n                '#define SHADER_NAME ' + shader.name,\n\n                //运用纹理作色\n                parameters.map ? '#define USE_MAP' : '',\n\n                //采用顶点作色\n                parameters.vertexColors ? '#define USE_COLOR' : '',\n\n                parameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n                parameters.flipSided ? '#define FLIP_SIDED' : '',\n\n                //根据Z值的不同,点的大小递减\n                parameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n                //linemesh 是否是虚线\n                parameters.dashed ? '#define USE_DASH' : '',\n\n                'uniform mat4 modelMatrix;',\n                'uniform mat4 modelViewMatrix;',\n                'uniform mat4 projectionMatrix;',\n                'uniform mat4 viewMatrix;',\n                'uniform mat3 normalMatrix;',\n                'uniform vec3 cameraPosition;',\n\n                'attribute vec3 position;',\n                'attribute vec3 normal;',\n                'attribute vec2 uv;',\n\n                '#ifdef USE_COLOR',\n\n                '\tattribute vec3 color;',\n\n                '#endif',\n\n                '\\n'\n\n            ].filter(filterEmptyLine).join('\\n');\n\n            prefixFragment = [\n\n                'precision ' + parameters.precision + ' float;',\n                'precision ' + parameters.precision + ' int;',\n\n                '#define SHADER_NAME ' + shader.name,\n\n\n                parameters.map ? '#define USE_MAP' : '',\n                parameters.vertexColors ? '#define USE_COLOR' : '',\n\n                parameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n                parameters.flipSided ? '#define FLIP_SIDED' : '',\n\n                parameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n                //linemesh 是否是虚线\n                parameters.dashed ? '#define USE_DASH' : '',\n\n                'uniform mat4 viewMatrix;',\n                'uniform vec3 cameraPosition;',\n\n                '\\n'\n\n            ].filter(filterEmptyLine).join('\\n');\n        }\n        vertexShader = replaceLightNums(vertexShader, parameters);\n        fragmentShader = replaceLightNums(fragmentShader, parameters);\n\n        vertexShader = unrollLoops(vertexShader);\n        fragmentShader = unrollLoops(fragmentShader);\n\n        let vertexGlsl = prefixVertex + vertexShader;\n        let fragmentGlsl = prefixFragment + fragmentShader;\n\n        // console.log('*VERTEX*', vertexGlsl);\n        // console.log('*FRAGMENT*', fragmentGlsl);\n\n        let glVertexShader = this.vertexShader = WebGLShader(gl, gl.VERTEX_SHADER, vertexGlsl);\n        let glFragmentShader = this.fragmentShader = WebGLShader(gl, gl.FRAGMENT_SHADER, fragmentGlsl);\n\n        gl.attachShader(program, glVertexShader);\n        gl.attachShader(program, glFragmentShader);\n\n\n        gl.linkProgram(program);\n\n        let programLog = gl.getProgramInfoLog(program).trim();\n        let vertexLog = gl.getShaderInfoLog(glVertexShader).trim();\n        let fragmentLog = gl.getShaderInfoLog(glFragmentShader).trim();\n\n\n        // console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n        // console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n\n        if (gl.getProgramParameter(program, gl.LINK_STATUS) === false) {\n\n\n            console.error('WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter(program, gl.VALIDATE_STATUS), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog);\n\n        } else if (programLog !== '') {\n\n            console.warn('WebGLProgram: gl.getProgramInfoLog()', programLog);\n\n        }\n\n\n        // clean up\n\n        gl.deleteShader(glVertexShader);\n        gl.deleteShader(glFragmentShader);\n    }\n    getUniforms() {\n\n        let gl = this._gl;\n        let program = this.program;\n\n        if (this._cachedUniforms === undefined) {\n            //todo 多重纹理的时候需要传递 renderer \n            //setTexture2D(texture , unit )\n            //this._cachedUniforms = new WebGLUniforms(gl, program, renderer);\n            this._cachedUniforms = new WebGLUniforms(gl, program);\n\n        }\n\n        return this._cachedUniforms;\n\n    }\n\n    getAttributes() { //获取shader中 atttribute对象的handle\n        let gl = this._gl;\n        let program = this.program;\n\n        if (this._cachedAttributes === undefined) {\n            this._cachedAttributes = {};\n            let n = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n\n            for (var i = 0; i < n; i++) {\n\n                var info = gl.getActiveAttrib(program, i);\n                var name = info.name;\n\n                //console.log('WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i);\n\n                this._cachedAttributes[name] = gl.getAttribLocation(program, name);\n\n            }\n\n        }\n\n        return this._cachedAttributes;\n\n    };\n    destroy() {\n\n        this._gl.deleteProgram(this.program);\n        this.program = undefined;\n    }\n}\n\nfunction replaceLightNums(string, parameters) {\n\n    return string\n        .replace(/NUM_DIR_LIGHTS/g, parameters.numDirLights)\n        .replace(/NUM_SPOT_LIGHTS/g, parameters.numSpotLights)\n        .replace(/NUM_POINT_LIGHTS/g, parameters.numPointLights);\n\n}\n\nfunction unrollLoops(string) {\n\n    var pattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\n    function replace(match, start, end, snippet) {\n\n        var unroll = '';\n\n        for (var i = parseInt(start); i < parseInt(end); i++) {\n\n            unroll += snippet.replace(/\\[ i \\]/g, '[ ' + i + ' ]');\n\n        }\n\n        return unroll;\n\n    }\n\n    return string.replace(pattern, replace);\n\n}\n\nfunction generateExtensions(extensions, parameters, rendererExtensions) {\n\n    extensions = extensions || {};\n\n    var chunks = [\n        (extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading) ? '#extension GL_OES_standard_derivatives : enable' : '',\n        (extensions.fragDepth || parameters.logarithmicDepthBuffer) && rendererExtensions.get('EXT_frag_depth') ? '#extension GL_EXT_frag_depth : enable' : '',\n        (extensions.drawBuffers) && rendererExtensions.get('WEBGL_draw_buffers') ? '#extension GL_EXT_draw_buffers : require' : '',\n        (extensions.shaderTextureLOD || parameters.envMap) && rendererExtensions.get('EXT_shader_texture_lod') ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n    ];\n\n    return chunks.filter(filterEmptyLine).join('\\n');\n\n}\n\nfunction generateDefines(defines) {\n\n    var chunks = [];\n\n    for (var name in defines) {\n\n        var value = defines[name];\n\n        if (value === false) continue;\n\n        chunks.push('#define ' + name + ' ' + value);\n\n    }\n\n    return chunks.join('\\n');\n\n}\n\nfunction filterEmptyLine(string) {\n\n    return string !== '';\n\n}\n\nexport { WebGLProgram };","import { WebGLProgram } from './WebGLProgram';\nimport { BackSide, DoubleSide } from '../../constants.js';\n\nclass WebGLPrograms {\n    constructor(gl, extensions, capabilities) {\n        this.programs = [];\n        this._gl = gl;\n        this._extensions = extensions;\n        this._capabilities = capabilities;\n\n        this._shaderIDs = {\n\n            MeshBasicMaterial: 'basic',\n            LineBasicMaterial: 'basic',\n            LineDashedMaterial: 'dashed',\n            PointsMaterial: 'points',\n            MeshLambertMaterial: 'lambert',\n            MeshPhongMaterial: 'phong',\n            LineMeshMaterial: 'linemesh',\n            SpriteMaterial: 'sprite'\n        };\n\n    }\n\n    getParameters(material, lights) {\n\n        let shaderID = this._shaderIDs[material.type];\n        let precision = this._capabilities.precision;\n\n        if (material.precision !== null) {\n\n            precision = this._capabilities.getMaxPrecision(material.precision);\n\n            if (precision !== material.precision) {\n\n                console.warn('WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.');\n\n            }\n\n        }\n        //shader Define值从这里取\n        let parameters = {\n            shaderID,\n            precision,\n            map: !!material.map,\n            vertexColors: material.vertexColors,\n            alphaTest: material.alphaTest,\n            doubleSided: material.side === DoubleSide,\n            flipSided: material.side === BackSide,\n            dashed: !!material.dashed,\n            sizeAttenuation:!!material.sizeAttenuation,\n            premultipliedAlpha:!!material.premultipliedAlpha,\n\n            numDirLights: lights.directional.length,\n            numPointLights: lights.point.length,\n            numSpotLights: lights.spot.length,\n\n        }\n\n        return parameters;\n\n    }\n\n    getProgramCode(material, parameters) {\n        let array = [];\n        //todo  关键字暂时都保留,后面优化去掉\n        let parameterNames = [\n            \"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\n            \"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\n            \"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n            \"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\n            \"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n            \"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n            \"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n            \"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n            \"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n            \"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\", \"dashed\"\n        ];\n        if (parameters.shaderID) {\n\n            array.push(parameters.shaderID);\n\n        } else {\n\n            array.push(material.fragmentShader);\n            array.push(material.vertexShader);\n\n        }\n\n        if (material.defines !== undefined) {\n\n            for (let name in material.defines) {\n\n                array.push(name);\n                array.push(material.defines[name]);\n\n            }\n\n        }\n\n        for (let i = 0; i < parameterNames.length; i++) {\n\n            array.push(parameters[parameterNames[i]]);\n\n        }\n\n        //array.push(material.onBeforeCompile.toString());\n\n\n        return array.join();\n    }\n\n    acquireProgram(material, shader, parameters, code) {\n        let program;\n\n        // Check if code has been already compiled\n        for (let p = 0, pl = this.programs.length; p < pl; p++) {\n\n            let programInfo = this.programs[p];\n\n            if (programInfo.code === code) {\n\n                program = programInfo;\n                ++program.usedTimes;\n\n                break;\n\n            }\n\n        }\n\n        if (program === undefined) {\n\n            program = new WebGLProgram(this._gl, this._extensions, material, code, shader, parameters);\n            this.programs.push(program);\n\n        }\n\n        return program;\n    }\n\n    releaseProgram(program) {\n        if (--program.usedTimes === 0) {\n\n            // Remove from unordered set\n            let i = this.programs.indexOf(program);\n\n            this.programs[i] = this.programs[this.programs.length - 1];\n            this.programs.pop();\n\n            // Free WebGL resources\n            program.destroy();\n\n        }\n    }\n}\n\nexport { WebGLPrograms };","\nclass WebGLRenderList {\n    constructor() {\n        this.renderItems = [];\n        this.renderItemsIndex = 0;\n\n        this.opaque = [];\n        this.transparent = [];\n    }\n    init() {\n        this.renderItemsIndex = 0;\n\n        this.opaque.length = 0;\n        this.transparent.length = 0;\n    }\n    push(object, geometry, material, z, group) {\n\n        var renderItem = this.renderItems[this.renderItemsIndex];\n\n        if (renderItem === undefined) {\n\n            renderItem = {\n                id: object.id,\n                object: object,\n                geometry: geometry,\n                material: material,\n                program: material.program,\n                renderOrder: object.renderOrder,\n                z: z,\n                group: group\n            };\n\n            this.renderItems[this.renderItemsIndex] = renderItem;\n\n        } else {\n\n            renderItem.id = object.id;\n            renderItem.object = object;\n            renderItem.geometry = geometry;\n            renderItem.material = material;\n            renderItem.program = material.program;\n            renderItem.renderOrder = object.renderOrder;\n            renderItem.z = z;\n            renderItem.group = group;\n\n        }\n\n        (material.transparent === true ? this.transparent : this.opaque).push(renderItem);\n\n        this.renderItemsIndex++;\n\n    }\n\n    sort() {\n\n        if (this.opaque.length > 1) this.opaque.sort(painterSortStable);\n        if (this.transparent.length > 1) this.transparent.sort(reversePainterSortStable);\n\n    }\n\n\n}\n\nfunction painterSortStable(a, b) {\n\n    if (a.renderOrder !== b.renderOrder) {\n\n        return a.renderOrder - b.renderOrder;\n\n    } else if (a.program && b.program && a.program !== b.program) {\n\n        return a.program.id - b.program.id;\n\n    } else if (a.material.id !== b.material.id) {\n\n        return a.material.id - b.material.id;\n\n    } else if (a.z !== b.z) {\n\n        return a.z - b.z;\n\n    } else {\n\n        return a.id - b.id;\n\n    }\n\n}\n\nfunction reversePainterSortStable(a, b) {\n\n    if (a.renderOrder !== b.renderOrder) {\n\n        return a.renderOrder - b.renderOrder;\n\n    } if (a.z !== b.z) {\n\n        return b.z - a.z;\n\n    } else {\n\n        return a.id - b.id;\n\n    }\n\n}\n\nclass WebGLRenderLists {\n\n    constructor() {\n        this._lists = {};\n    }\n\n    get(scene, camera) {\n\n        var hash = scene.id + ',' + camera.id;\n        var list = this._lists[hash];\n\n        if (list === undefined) {\n\n            //console.log('WebGLRenderLists:', hash);\n\n            list = new WebGLRenderList();\n            this._lists[hash] = list;\n\n        }\n\n        return list;\n\n    }\n\n    dispose() {\n\n        this._lists = {};\n\n    }\n\n\n}\n\nexport { WebGLRenderLists };","\nclass WebGLBufferRenderer {\n    constructor(gl, extensions,info) {\n        this._mode = gl.TRIANGLES;\n        this._gl = gl;\n        this._info = info;\n        this._extensions = extensions;\n    }\n    setMode(value) {\n\n        this._mode = value;\n\n    }\n\n    render(start, count) {\n\n        this._gl.drawArrays(this._mode, start, count);\n        this._info.update(count, this._mode);\n    }\n\n    renderInstances( geometry, start, count ) {\n\n\t\tlet extension = this._extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'WebGLBufferRenderer: using InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._extension.drawArraysInstancedANGLE( mode, start, count, geometry.maxInstancedCount );\n\n\t\tthis._info.update( count, this._mode, geometry.maxInstancedCount );\n\n\t}\n\n}\nexport { WebGLBufferRenderer };","/**\n * @class WebGLObjects\n * @description 通过更新帧来控制更新WebGLGemetries update\n * @author bujue\n */\n\nclass WebGLObjects {\n    constructor(geometries, info) {\n        this._infoRender = info.render;\n        this._updateList = {};\n        this._geometries = geometries;\n    }\n\n    update(object) {\n\n        let frame = this._infoRender.frame;\n        let geometries = this._geometries;\n\n\n        let geometry = object.geometry;\n        var buffergeometry = geometries.get(object, geometry);\n\n        // Update once per frame\n\n        if (this._updateList[buffergeometry.id] !== frame) {\n\n            if (geometry.isGeometry) {\n\n                buffergeometry.updateFromObject(object);\n\n            }\n            //创建buffer\n            geometries.update(buffergeometry);\n\n            this._updateList[buffergeometry.id] = frame;\n\n        }\n\n        return buffergeometry;\n\n    }\n    dispose() {\n\n        this._updateList = {};\n\n    }\n\n}\n\nexport { WebGLObjects };","\nclass WebGLIndexedBufferRenderer {\n    constructor(gl, extensions, info) {\n        this._mode = gl.TRIANGLES;\n        this._gl = gl;\n        this._info = info;\n        this._extensions = extensions;\n        this._type = undefined;\n        this._bytesPerElement = undefined;\n    }\n\n    setMode(value) {\n\n        this._mode = value;\n\n    }\n\n    setIndex(value) {\n\n        this._type = value.type;\n        this._bytesPerElement = value.bytesPerElement;\n\n    }\n\n    render(start, count) {\n\n        this._gl.drawElements(this._mode, count, this._type, start * this._bytesPerElement);\n\n        this._info.update(count, this._mode);\n\n    }\n\n    renderInstances(geometry, start, count) {\n\n        let extension = this._extensions.get('ANGLE_instanced_arrays');\n\n        if (extension === null) {\n\n            console.error('WebGLIndexedBufferRenderer: using InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');\n            return;\n\n        }\n\n        extension.drawElementsInstancedANGLE(this._mode, count, this._type, start * this._bytesPerElement, geometry.maxInstancedCount);\n\n        this._info.update(count, this._mode, geometry.maxInstancedCount);\n\n    }\n\n\n}\nexport { WebGLIndexedBufferRenderer };","\nimport { LinearFilter, NearestFilter, RGBFormat, RGBAFormat, DepthFormat, DepthStencilFormat, UnsignedShortType, UnsignedIntType, UnsignedInt248Type, FloatType, HalfFloatType, ClampToEdgeWrapping, NearestMipMapLinearFilter, NearestMipMapNearestFilter } from '../../constants.js';\nimport { _Math } from '../../maths/Math';\n\nclass WebGLTextures {\n    constructor(_gl, extensions, state, properties, capabilities, utils, info) {\n        this.gl = _gl;\n        this._properties = properties;\n        this._info = info;\n        this._state = state;\n        this.extensions = extensions;\n        this._capabilities = capabilities;\n        this._utils = utils;\n    }\n\n    setTexture2D(texture, slot) {\n\n        let _gl = this.gl;\n        let textureProperties = this._properties.get(texture);\n\n        if (texture.version > 0 && textureProperties.__version !== texture.version) {\n\n            let image = texture.image;\n\n            if (image === undefined) {\n\n                console.warn('WebGLRenderer: Texture marked for update but image is undefined', texture);\n\n            } else if (image.complete === false) {\n\n                console.warn('WebGLRenderer: Texture marked for update but image is incomplete', texture);\n\n            } else {\n\n                this._uploadTexture(textureProperties, texture, slot);\n                return;\n\n            }\n\n        }\n\n        this._state.activeTexture(_gl.TEXTURE0 + slot);\n        this._state.bindTexture(_gl.TEXTURE_2D, textureProperties.__webglTexture);\n    }\n\n    _uploadTexture(textureProperties, texture, slot) {\n\n        let _gl = this.gl;\n        let state = this._state;\n        let utils = this._utils;\n\n        if (textureProperties.__webglInit === undefined) {\n\n            textureProperties.__webglInit = true;\n\n            this._onTextureDisposeBind = onTextureDispose.bind(this);\n\n            texture.on('dispose', this._onTextureDisposeBind);\n\n            textureProperties.__webglTexture = _gl.createTexture();\n\n            this._info.memory.textures++;\n\n        }\n\n        state.activeTexture(_gl.TEXTURE0 + slot);\n        state.bindTexture(_gl.TEXTURE_2D, textureProperties.__webglTexture);\n\n        //UNPACK_FLIP_Y_WEBGL 是否将纹理上下颠倒进行映射\n        //https://yq.aliyun.com/articles/62464\n        _gl.pixelStorei(_gl.UNPACK_FLIP_Y_WEBGL, texture.flipY);\n        //对图片纹理的每个像素的R、G、B通道，乘以A的值后，并替换原先的值\n        _gl.pixelStorei(_gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha);\n        //纹理的像素对齐\n        _gl.pixelStorei(_gl.UNPACK_ALIGNMENT, texture.unpackAlignment);\n\n        let image = clampToMaxSize(texture.image, this._capabilities.maxTextureSize);\n\n        if (textureNeedsPowerOfTwo(texture) && isPowerOfTwo(image) === false) {\n\n            image = makePowerOfTwo(image);\n\n        }\n\n        let isPowerOfTwoImage = isPowerOfTwo(image),\n            glFormat = utils.convert(texture.format),\n            glType = utils.convert(texture.type);\n\n        setTextureParameters.call(this, _gl.TEXTURE_2D, texture, isPowerOfTwoImage);\n\n        let mipmap, mipmaps = texture.mipmaps;\n\n\n\n        // regular Texture (image, video, canvas)\n\n        // use manually created mipmaps if available\n        // if there are no manual mipmaps\n        // set 0 level mipmap and then use GL to generate other mipmap levels\n\n        if (mipmaps.length > 0 && isPowerOfTwoImage) {\n\n            for (var i = 0, il = mipmaps.length; i < il; i++) {\n\n                mipmap = mipmaps[i];\n                state.texImage2D(_gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap);\n\n            }\n\n            texture.generateMipmaps = false;\n            textureProperties.__maxMipLevel = mipmaps.length - 1;\n\n        } else {\n\n            state.texImage2D(_gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image);\n            textureProperties.__maxMipLevel = 0;\n\n        }\n\n\n\n        if (textureNeedsGenerateMipmaps(texture, isPowerOfTwoImage)) {\n\n            generateMipmap.call(this, _gl.TEXTURE_2D, texture, image.width, image.height);\n\n        }\n\n        textureProperties.__version = texture.version;\n\n        if (texture.onUpdate) texture.onUpdate(texture);\n    }\n}\n\nfunction onTextureDispose(event) {\n\n    var texture = event.target;\n\n    texture.off('dispose', this._onTextureDisposeBind);\n\n    this._onTextureDisposeBind = null;\n\n    deallocateTexture.call(this, texture);\n\n    this._info.memory.textures--;\n}\nfunction clampToMaxSize(image, maxSize) {\n\n    if (image.width > maxSize || image.height > maxSize) {\n\n        if ('data' in image) {\n\n            console.warn('WebGLRenderer: image in DataTexture is too big (' + image.width + 'x' + image.height + ').');\n            return;\n\n        }\n\n        // Warning: Scaling through the canvas will only work with images that use\n        // premultiplied alpha.\n\n        let scale = maxSize / Math.max(image.width, image.height);\n\n        let canvas = document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');\n        canvas.width = Math.floor(image.width * scale);\n        canvas.height = Math.floor(image.height * scale);\n\n        let context = canvas.getContext('2d');\n        context.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\n\n        console.warn('WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image);\n\n        return canvas;\n\n    }\n\n    return image;\n\n}\n\nfunction textureNeedsPowerOfTwo(texture) {\n\n    return (texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping) ||\n        (texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter);\n\n}\n\nfunction isPowerOfTwo(image) {\n\n    return _Math.isPowerOfTwo(image.width) && _Math.isPowerOfTwo(image.height);\n\n}\n\nlet _canvas;\nfunction makePowerOfTwo(image) {\n\n    if (image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof ImageBitmap) {\n\n        if (_canvas === undefined) _canvas = document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');\n\n        _canvas.width = _Math.floorPowerOfTwo(image.width);\n        _canvas.height = _Math.floorPowerOfTwo(image.height);\n\n        var context = _canvas.getContext('2d');\n        context.drawImage(image, 0, 0, _canvas.width, _canvas.height);\n\n        console.warn('WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + _canvas.width + 'x' + _canvas.height, image);\n\n        return _canvas;\n\n    }\n\n    return image;\n\n}\n\nfunction setTextureParameters(textureType, texture, isPowerOfTwoImage) {\n\n    let _gl = this.gl,\n        extensions = this.extensions,\n        utils = this._utils,\n        properties = this._properties,\n        extension;\n\n    if (isPowerOfTwoImage) {\n\n        _gl.texParameteri(textureType, _gl.TEXTURE_WRAP_S, utils.convert(texture.wrapS));\n        _gl.texParameteri(textureType, _gl.TEXTURE_WRAP_T, utils.convert(texture.wrapT));\n\n        _gl.texParameteri(textureType, _gl.TEXTURE_MAG_FILTER, utils.convert(texture.magFilter));\n        _gl.texParameteri(textureType, _gl.TEXTURE_MIN_FILTER, utils.convert(texture.minFilter));\n\n    } else {\n\n        _gl.texParameteri(textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE);\n        _gl.texParameteri(textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE);\n\n        if (texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping) {\n\n            console.warn('WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to ClampToEdgeWrapping.', texture);\n\n        }\n\n        _gl.texParameteri(textureType, _gl.TEXTURE_MAG_FILTER, filterFallback.call(this, texture.magFilter));\n        _gl.texParameteri(textureType, _gl.TEXTURE_MIN_FILTER, filterFallback.call(this, texture.minFilter));\n\n        if (texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter) {\n\n            console.warn('WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to NearestFilter or LinearFilter.', texture);\n\n        }\n\n    }\n\n    extension = extensions.get('EXT_texture_filter_anisotropic');\n\n    if (extension) {\n\n        if (texture.type === FloatType && extensions.get('OES_texture_float_linear') === null) return;\n        if (texture.type === HalfFloatType && extensions.get('OES_texture_half_float_linear') === null) return;\n\n        if (texture.anisotropy > 1 || properties.get(texture).__currentAnisotropy) {\n\n            _gl.texParameterf(textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(texture.anisotropy, capabilities.getMaxAnisotropy()));\n            properties.get(texture).__currentAnisotropy = texture.anisotropy;\n\n        }\n\n    }\n\n\n\n}\n\n// Fallback filters for non-power-of-2 textures\n\nfunction filterFallback(f) {\n\n    let _gl = this.gl;\n\n    if (f === NearestFilter || f === NearestMipMapNearestFilter || f === NearestMipMapLinearFilter) {\n\n        return _gl.NEAREST;\n\n    }\n\n    return _gl.LINEAR;\n\n}\n\nfunction deallocateTexture(texture) {\n    let _gl = this.gl;\n    let textureProperties = this._properties.get(texture);\n\n    if (texture.image && textureProperties.__image__webglTextureCube) {\n\n        // cube texture\n\n        _gl.deleteTexture(textureProperties.__image__webglTextureCube);\n\n    } else {\n\n        // 2D texture\n\n        if (textureProperties.__webglInit === undefined) return;\n\n        _gl.deleteTexture(textureProperties.__webglTexture);\n\n    }\n\n    // remove all webgl properties\n    this._properties.remove(texture);\n\n}\n\nfunction textureNeedsGenerateMipmaps(texture, isPowerOfTwo) {\n\n    return texture.generateMipmaps && isPowerOfTwo &&\n        texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n}\n\nfunction generateMipmap(target, texture, width, height) {\n\n    //生成多级纹理图\n    this.gl.generateMipmap(target);\n\n    var textureProperties = this._properties.get(texture);\n\n    // Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n    textureProperties.__maxMipLevel = Math.log(Math.max(width, height)) * Math.LOG2E;\n\n}\n\nexport { WebGLTextures };","import { Color } from '../../maths/Color.js';\nimport { Vector3 } from '../../maths/Vector3.js';\n\nlet webglLightsCount = 0\nlet _webGLLightsVector3 = new Vector3();\nclass WebGLLights {\n    constructor() {\n        this.cache = new UniformsCache();\n        this.state = {\n            id: webglLightsCount++,\n            hash: '',\n            ambient: [0, 0, 0],\n            directional: [],\n            spot: [],\n            point: []\n        };\n    }\n\n    setup(lights, shadows, camera) {\n        let r = 0, g = 0, b = 0;\n\n        let directionalLength = 0;\n        let pointLength = 0;\n        let spotLength = 0;\n\n        let state = this.state;\n        let cache = this.cache;\n\n        let viewMatrix = camera.matrixWorldInverse;\n\n        for (let i = 0, l = lights.length; i < l; i++) {\n\n            let light = lights[i];\n\n            let color = light.color;\n            let intensity = light.intensity;\n            let distance = light.distance;\n\n\n\n\n            if (light.isAmbientLight) {\n\n                r += color.r * intensity;\n                g += color.g * intensity;\n                b += color.b * intensity;\n\n            } else if (light.isDirectionalLight) {\n\n                let uniforms = cache.get(light);\n\n                uniforms.color.copy(light.color).multiplyScalar(light.intensity);\n                uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                _webGLLightsVector3.setFromMatrixPosition(light.target.matrixWorld);\n                uniforms.direction.sub(_webGLLightsVector3);\n                uniforms.direction.transformDirection(viewMatrix);\n\n\n                state.directional[directionalLength] = uniforms;\n\n                directionalLength++;\n\n            } else if (light.isSpotLight) {\n\n                var uniforms = cache.get(light);\n\n                uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                uniforms.position.applyMatrix4(viewMatrix);\n\n                uniforms.color.copy(color).multiplyScalar(intensity);\n                uniforms.distance = distance;\n\n                uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                _webGLLightsVector3.setFromMatrixPosition(light.target.matrixWorld);\n                uniforms.direction.sub(_webGLLightsVector3);\n                uniforms.direction.transformDirection(viewMatrix);\n\n                uniforms.coneCos = Math.cos(light.angle);\n                uniforms.penumbraCos = Math.cos(light.angle * (1 - light.penumbra));\n                uniforms.decay = (light.distance === 0) ? 0.0 : light.decay;\n\n                state.spot[spotLength] = uniforms;\n\n                spotLength++;\n\n            } else if (light.isPointLight) {\n\n                var uniforms = cache.get(light);\n\n                uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                uniforms.position.applyMatrix4(viewMatrix);\n\n                uniforms.color.copy(light.color).multiplyScalar(light.intensity);\n                uniforms.distance = light.distance;\n                uniforms.decay = (light.distance === 0) ? 0.0 : light.decay;\n\n                state.point[pointLength] = uniforms;\n\n                pointLength++;\n\n            }\n\n        }\n\n        state.ambient[0] = r;\n        state.ambient[1] = g;\n        state.ambient[2] = b;\n\n        state.directional.length = directionalLength;\n        state.spot.length = spotLength;\n        state.point.length = pointLength;\n\n        state.hash = state.id + ',' + directionalLength + ',' + pointLength + ',' + spotLength;\n\n    }\n    dispose() {\n        this.cache.dispose();\n        this.cache = null;\n        this.state = null;\n    }\n\n}\n\nclass UniformsCache {\n    constructor() {\n        this._lights = {};\n    }\n\n    get(light) {\n\n        let lights = this._lights;\n\n        if (lights[light.id] !== undefined) {\n\n            return lights[light.id];\n        }\n\n        let uniforms;\n\n        switch (light.type) {\n\n            case 'DirectionalLight':\n                uniforms = {\n                    direction: new Vector3(),\n                    color: new Color()\n                };\n                break;\n\n            case 'SpotLight':\n                uniforms = {\n                    position: new Vector3(),\n                    direction: new Vector3(),\n                    color: new Color(),\n                    distance: 0,\n                    coneCos: 0,\n                    penumbraCos: 0,\n                    decay: 0\n                };\n                break;\n\n            case 'PointLight':\n                uniforms = {\n                    position: new Vector3(),\n                    color: new Color(),\n                    distance: 0,\n                    decay: 0\n                };\n                break;\n\n            case 'HemisphereLight':\n            case 'RectAreaLight':\n                console.error('没有实现 HemisphereLight 和 RectAreaLight 灯光')\n        }\n\n        lights[light.id] = uniforms;\n\n        return uniforms;\n\n    }\n    dispose() {\n        this._lights = null;\n    }\n\n}\n\nexport { WebGLLights };","import { WebGLLights } from \"./WebGLLights\";\n\nclass WebGLRenderState {\n    constructor() {\n\n        this.state = {\n            lights: new WebGLLights(),\n            lightsArray: [],\n            spritesArray: []\n        };\n\n    }\n    init() {\n        this.state.spritesArray.length = 0;\n        this.state.lightsArray.length = 0;\n    }\n\n    pushLight(light) {\n\n        this.state.lightsArray.push(light);\n\n    }\n\n    pushSprite(sprite) {\n\n        this.state.spritesArray.push(sprite);\n    }\n\n    setupLights(camera) {\n\n        //todo 阴影为空\n        let shadowsArray = [];\n\n        this.state.lights.setup(this.state.lightsArray, shadowsArray, camera);\n\n    }\n    dispose() {\n        this.state.lights.dispose();\n        this.state = null;\n    }\n\n}\n\n\nclass WebGLRenderStates {\n    constructor() {\n        this._renderStates = {};\n    }\n\n    get(scene, camera) {\n\n        let hash = scene.id + ',' + camera.id;\n\n        let renderState = this._renderStates[hash];\n\n        if (renderState === undefined) {\n\n            renderState = new WebGLRenderState();\n            this._renderStates[hash] = renderState;\n\n        }\n\n        return renderState;\n\n    }\n\n    dispose() {\n\n        for (let key in this._renderStates) {\n            this._renderStates[key] && this._renderStates[key].dispose();\n        }\n\n        this._renderStates = {};\n\n    }\n\n}\n\nexport { WebGLRenderStates }","import { Events } from '../core/Events';\nimport {\n    REVISION,\n    TriangleFanDrawMode,\n    TriangleStripDrawMode,\n    TrianglesDrawMode,\n    LinesMode,\n    LineLoopMode,\n    LineStripMode\n} from '../constants';\n\nimport { Vector4 } from '../maths/Vector4';\nimport { Vector3 } from '../maths/Vector3';\nimport { Color } from '../maths/Color';\nimport { Matrix4 } from '../maths/Matrix4';\nimport { Frustum } from '../maths/Frustum';\n\nimport { WebGLExtensions } from './webgl/WebGLExtensions';\nimport { WebGLProperties } from './webgl/WebGLProperties';\nimport { WebGLCapabilities } from './webgl/WebGLCapabilities';\nimport { WebGLState } from './webgl/WebGLState';\nimport { WebGLAttributes } from './webgl/WebGLAttributes';\nimport { WebGLGeometries } from './webgl/WebGLGeometries';\nimport { ShaderLib } from './shaders/ShaderLib.js';\nimport { WebGLInfo } from './webgl/WebGLInfo';\nimport { WebGLPrograms } from './webgl/WebGLPrograms';\nimport { WebGLUniforms } from './webgl/WebGLUniforms';\nimport { UniformsUtils } from './shaders/UniformsUtils';\nimport { WebGLRenderLists } from './webgl/WebGLRenderList';\nimport { WebGLBufferRenderer } from './webgl/WebGLBufferRenderer';\nimport { WebGLObjects } from './webgl/WebGLObjects';\nimport { WebGLIndexedBufferRenderer } from './webgl/WebGLIndexedBufferRenderer';\nimport { WebGLTextures } from './webgl/WebGLTextures';\nimport { WebGLUtils } from './webgl/WebGLUtils';\nimport { WebGLRenderStates } from './webgl/WebGLRenderStates';\n\n\n/**\n * @class WebGL渲染对象\n * @author bujue\n */\nclass WebGLRenderer extends Events {\n    constructor(params) {\n        super();\n\n        params = params || {};\n        //canvas context 渲染对象的上下文\n        this.gl = null;\n\n        //canvasDOM 对象\n        this.domElement = null;\n\n        //私有变量\n        this._width = 0;\n        this._height = 0;\n        this._isContextLost = false;                //是否丢失上下文\n\n        this._pixelRatio = 1;                        //屏幕的pixelRatio,\n        this._currentViewport = new Vector4();       //当前的渲染视口大小\n        this._currentRenderList = null;\n        this._currentRenderState = null;\n\n        this._currentMaterialId = -1;                //初始化materialId\n        this._currentCamera = null;                  //当前的相机\n        this._currClearColor = new Color(0x000000);\n\n        this._capabilities = null;                          //GPU渲染能力 \n        this._state = null;                                 //GPU的状态管理 \n\n\n\n        this._sortObjects = true;   // scene graph\n\n        this._projScreenMatrix = new Matrix4();\n        this._vector3 = new Vector3();\n        this._frustum = new Frustum();\n\n        // clearing\n\n        this.autoClear = true;\n        this.autoClearColor = true;\n        this.autoClearDepth = true;\n        this.autoClearStencil = true;\n\n\n        this._init(params);\n        this._initGLContext(params);\n    }\n\n    _init(parameters) {  //创建webGL对象上下文\n        let me = this;\n        parameters = parameters || {};\n\n        console.log('WebGLRenderer', REVISION);\n\n        /*\n        * `alpha`：值为true，表示为上下文创建一个Alpha通道缓冲区；默认值为true；\n        * `depth`：值为true，表示可以使用16位深缓冲区；默认值为true；\n        * `stencil`：值为true，表示可以使用8位模板缓冲区；默认值为false；\n        * `antialias`：值为true，表示将使用默认机制执行抗锯齿操作；默认值为true。\n        * `premultipliedAlpha`：值为true，表示绘图缓冲区有预乘Alpha值；默认为true;\n        * `preserveDrawingBuffer`：值为true；表示在绘图完成后保留绘图缓冲区；默认值为false。\n        */\n        let _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas'),\n            _context = parameters.context !== undefined ? parameters.context : null,\n\n            _alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n            _depth = parameters.depth !== undefined ? parameters.depth : true,\n            _stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n            _antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n            _premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n            _preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n            _powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default';\n\n        me.domElement = _canvas;\n        me.gl = _context;\n        me._width = _canvas.width;\n        me._height = _canvas.height;\n        me._premultipliedAlpha = _premultipliedAlpha;\n\n        try {\n\n            let contextAttributes = {\n                alpha: _alpha,\n                depth: _depth,\n                stencil: _stencil,\n                antialias: _antialias,\n                premultipliedAlpha: _premultipliedAlpha,\n                preserveDrawingBuffer: _preserveDrawingBuffer,\n                powerPreference: _powerPreference\n            };\n\n            let _gl = _context || _canvas.getContext('webgl', contextAttributes) || _canvas.getContext('experimental-webgl', contextAttributes);\n\n            if (_gl === null) {\n\n                if (_canvas.getContext('webgl') !== null) {\n\n                    throw 'Error creating WebGL context with your selected attributes.';\n\n                } else {\n\n                    throw 'Error creating WebGL context.';\n\n                }\n\n            }\n\n            me.gl = _gl;\n\n            me._onContextLostBind = onContextLost.bind(me);\n            me._onContextRestoreBind = onContextRestore.bind(me);\n            _canvas.addEventListener('webglcontextlost', me._onContextLostBind, false);\n            _canvas.addEventListener('webglcontextrestored', me._onContextRestoreBind, false);\n\n            // Some experimental-webgl implementations do not have getShaderPrecisionFormat\n            if (_gl.getShaderPrecisionFormat === undefined) {\n\n                _gl.getShaderPrecisionFormat = function () {\n\n                    return { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n                };\n\n            }\n\n        } catch (error) {\n\n            console.error('WebGLRenderer: ' + error);\n\n        }\n\n\n\n    }\n    _initGLContext(parameters) {\n        let me = this;\n        let _gl = this.gl;\n        let _width = this._width;\n        let _height = this._height;\n        let _viewport = new Vector4(0, 0, _width, _height)\n\n        /**  \n        *  \n        *  WebGLUtils              gl常量管理\n        *  WebGLCapabilities       gl能力数据\n        *  WebGLState              gl状态管理\n        *  WebGLInfo               保存渲染的基本数据\n        *  WebGLProperties         可以有效的将上层Material传过来的对象与底层渲染的对象做关联但有不改变原对象,利用WeapMap实现\n        *  WebGLAttributes         根据上层的顶点属性Geometry数据,利用WeapMap绑定buffer相关数据,提供get update remove 方法\n        *  WebGLGeometries         将上层的顶点属性分解后保存到WebGLAttribute对象中 update更新 WebGLAttribute的update \n        *  WebGLObjects            通过更新帧来控制更新WebGLGemetries update\n        *  WebGLMorphtargets       顶点动画,图表动画可以参考使用\n        *  WebGLPrograms           programs的管理 \n        *  WebGLTextures           纹理的预处理与参数设置与上传\n        *  WebGLRenderLists        通过hash 构建一个Map WebGLRenderList 是真正的渲染列表 opaque transparent \n        *  WebGLRenderStates       灯光阴影的管理   WebGLLights.setup 将上次的灯光参数转换为shader格式的参数\n        *  WebGLBackground         背景的绘制与更新, scene.background 可以是颜色 纹理 cube纹理\n        *  WebGLBufferRenderer     drawArrays的提取及利用扩展 同一几何体多次绘制的实现\n        *  WebGLIndexedBufferRenderer  drawElements 的提取,同上\n        */\n\n        this._extensions = new WebGLExtensions(_gl);\n        this._extensions.get('ANGLE_instanced_arrays');\n\n        this._utils = new WebGLUtils(_gl);\n        this._info = new WebGLInfo(_gl);\n        this._properties = new WebGLProperties();\n        this._capabilities = new WebGLCapabilities(_gl, parameters);\n        this._state = new WebGLState(_gl, this._extensions, this._capabilities);\n        this._renderStates = new WebGLRenderStates();\n        this._textures = new WebGLTextures(_gl, this._extensions, this._state, this._properties, this._capabilities, this._utils, this._info);\n        this._attributes = new WebGLAttributes(_gl);\n        this._geometries = new WebGLGeometries(_gl, this._attributes, this._info);\n        this._objects = new WebGLObjects(this._geometries, this._info);\n        this._programCache = new WebGLPrograms(_gl, this._extensions, this._capabilities);\n        this._renderLists = new WebGLRenderLists();\n        this._bufferRenderer = new WebGLBufferRenderer(_gl, this._extensions, this._info);\n        this._indexedBufferRenderer = new WebGLIndexedBufferRenderer(_gl, this._extensions, this._info);\n        this._state.viewport(this._currentViewport.copy(_viewport).multiplyScalar(this._pixelRatio));\n\n\n        //console.dir(this._capabilities);\n        this._info.programs = this._programCache.programs;\n\n        //me.setSize(_width, _height, true);\n\n    }\n\n    getContext() {\n        return this.gl;\n    }\n\n    getPixelRatio() {\n        return this._pixelRatio;\n    }\n\n    getCurrentViewport() {\n        return this._currentViewport;\n    }\n\n    getClearColor() {\n        return this._currClearColor;\n    }\n\n\n\n    //设置设备像素比,默认是 1    \n    setPixelRatio(value) {\n        let _width = this._width;\n        let _height = this._height;\n\n        this._pixelRatio = value;\n        this.setSize(_width, _height, false);\n    }\n\n    //设置可视区域大小\n    setSize(width, height, updateStyle) {\n        let me = this;\n        let _pixelRatio = this._pixelRatio;\n        let _canvas = me.domElement;\n        this._width = width;\n        this._height = height;\n\n\n        _canvas.width = width * _pixelRatio;\n        _canvas.height = height * _pixelRatio;\n\n        //注意:updateStyle 只有完全等于false才不更新style\n        if (updateStyle !== false) {\n\n            _canvas.style.width = width + 'px';\n            _canvas.style.height = height + 'px';\n\n        }\n\n        me.setViewport(0, 0, width, height);\n\n    }\n\n    //设置视口大小\n    setViewport(x, y, width, height) {\n        let gl = this.gl;\n        let viewport = new Vector4(x, y, width, height);\n\n        //if (this._currentViewport.equals(viewport) === false) {\n\n        this._currentViewport.copy(viewport).multiplyScalar(this._pixelRatio);\n\n        this._state.viewport(this._currentViewport);\n        //}\n\n    }\n    //设置清除色\n    setClearColor() {\n        let _gl = this.gl;\n        let [r, g, b, a] = arguments\n        let _color = this._currClearColor.set(r, g, b, a);\n        this._state.buffers.color.setClear(_color.r, _color.g, _color.b, _color.a, this._premultipliedAlpha);\n    }\n\n    getClearAlpha() {\n        return this._currClearColor.a;\n    }\n\n    setClearAlpha(alpha) {\n        let _gl = this.gl;\n        this._currClearColor.a = alpha;\n        let _color = this._currClearColor;\n        this._state.buffers.color.setClear(_color.r, _color.g, _color.b, _color.a, this._premultipliedAlpha);\n    };\n\n    //清除缓冲\n    clear(color, depth, stencil) {\n        let _gl = this.gl\n        let bits = 0;\n\n        if (color === undefined || color) bits |= _gl.COLOR_BUFFER_BIT;\n        if (depth === undefined || depth) bits |= _gl.DEPTH_BUFFER_BIT;\n        if (stencil === undefined || stencil) bits |= _gl.STENCIL_BUFFER_BIT;\n\n        _gl.clear(bits);\n\n    }\n    //清除颜色缓冲\n    clearColor() {\n        this.clear(true, false, false);\n    }\n    //清除深度缓冲\n    clearDepth() {\n        this.clear(false, true, false);\n    }\n    //清除模版缓冲\n    clearStencil() {\n        this.clear(false, false, true);\n    }\n\n    render(scene, camera, forceClear) {\n\n        if (!(camera && camera.isCamera)) {\n\n            console.error('WebGLRenderer.render: camera is not an instance of Camera.');\n            return;\n\n        }\n        _currentGeometryProgram = '';\n        this._currentMaterialId = - 1;\n        this._currentCamera = null;\n\n        if (this._isContextLost) return;\n\n        // 更新场景\n        if (scene.autoUpdate === true) scene.updateMatrixWorld();\n\n        //更新相机矩阵\n        if (camera.parent === null) camera.updateMatrixWorld();\n\n        this._projScreenMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n        this._frustum.setFromMatrix(this._projScreenMatrix);\n\n        //初始化渲染队列\n\n        this._currentRenderState = this._renderStates.get(scene, camera);\n        this._currentRenderState.init();\n\n        this._currentRenderList = this._renderLists.get(scene, camera);\n\n        this._currentRenderList.init();\n\n        //将渲染的几何对象和材质存放到渲染队列中\n        projectObject.call(this, scene, camera, this._sortObjects)\n\n        if (this._sortObjects === true) {\n            this._currentRenderList.sort();\n        }\n\n        this._currentRenderState.setupLights(camera);\n\n        if (this._info.autoReset) this._info.reset();\n\n       \n        if (this.autoClear || forceClear) {\n            scene.background === null ? this.setClearColor(this._currClearColor) : this.setClearColor(scene.background);\n            this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil);\n        }\n\n\n        let opaqueObjects = this._currentRenderList.opaque;\n        let transparentObjects = this._currentRenderList.transparent;\n\n        // opaque pass (front-to-back order)\n\n        if (opaqueObjects.length) renderObjects.call(this, opaqueObjects, scene, camera);\n\n        // transparent pass (back-to-front order)\n\n        if (transparentObjects.length) renderObjects.call(this, transparentObjects, scene, camera);\n\n\n\n\n\n        this._state.buffers.depth.setTest(true);\n        this._state.buffers.depth.setMask(true);\n        this._state.buffers.color.setMask(true);\n\n        this._state.setPolygonOffset(false);\n\n\n        this._currentRenderList = null;\n        this._currentRenderState = null;\n\n\n    }\n    renderBufferDirect(camera, fog, geometry, material, object, group) {\n\n        let me = this;\n        let _gl = this.gl;\n\n\n        let frontFaceCW = (object.isMesh && object.matrixWorld.determinant() < 0);\n\n        //通过Materail设置 CULL_FACE  Blend clearColor ClearDepth\n        this._state.setMaterial(material, frontFaceCW);\n\n        let program = setProgram.call(me, camera, fog, material, object);\n\n        let updateBuffers = isUpdateBuffers(geometry, program, material);\n\n\n        let index = geometry.index;\n        let position = geometry.attributes.position;\n        let rangeFactor = 1;\n\n        if (material.wireframe === true) {\n\n            index = this._geometries.getWireframeAttribute(geometry);\n            rangeFactor = 2;\n\n        }\n\n        let attribute;\n        let renderer = this._bufferRenderer;\n\n        if (index !== null) {\n\n            attribute = this._attributes.get(index);\n\n            renderer = this._indexedBufferRenderer;\n            renderer.setIndex(attribute);\n\n        }\n\n        if (updateBuffers) {\n\n            setupVertexAttributes.call(this, material, program, geometry);\n\n            if (index !== null) {\n\n                _gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER, attribute.buffer);\n\n            }\n\n        }\n\n\n\n        let dataCount = Infinity;\n\n        if (index !== null) {\n\n            dataCount = index.count;\n\n        } else if (position !== undefined) {\n\n            dataCount = position.count;\n\n        }\n\n        let rangeStart = geometry.drawRange.start * rangeFactor;\n        let rangeCount = geometry.drawRange.count * rangeFactor;\n\n        let groupStart = group !== null ? group.start * rangeFactor : 0;\n        let groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n        let drawStart = Math.max(rangeStart, groupStart);\n        let drawEnd = Math.min(dataCount, rangeStart + rangeCount, groupStart + groupCount) - 1;\n\n        let drawCount = Math.max(0, drawEnd - drawStart + 1);\n\n        if (drawCount === 0) return;\n\n        if (object.isMesh) {\n\n            if (material.wireframe === true) {\n\n                this._state.setLineWidth(material.wireframeLinewidth * this._pixelRatio);\n                renderer.setMode(_gl.LINES);\n\n            } else {\n\n                switch (object.drawMode) {\n\n                    case TrianglesDrawMode:\n                        renderer.setMode(_gl.TRIANGLES);\n                        break;\n\n                    case TriangleStripDrawMode:\n                        renderer.setMode(_gl.TRIANGLE_STRIP);\n                        break;\n\n                    case TriangleFanDrawMode:\n                        renderer.setMode(_gl.TRIANGLE_FAN);\n                        break;\n\n                }\n            }\n        } else if (object.isLine) {\n            let lineWidth = material.linewidth;\n\n            if (lineWidth === undefined) lineWidth = 1; // Not using Line*Material\n\n            this._state.setLineWidth(lineWidth * this._pixelRatio);\n\n\n            switch (object.drawMode) {\n\n                case LinesMode:\n                    renderer.setMode(_gl.LINES);\n                    break;\n\n                case LineLoopMode:\n                    renderer.setMode(_gl.LINE_LOOP);\n                    break;\n\n                case LineStripMode:\n                    renderer.setMode(_gl.LINE_STRIP);\n                    break;\n\n            }\n\n        } else if (object.isPoints) {\n\n            renderer.setMode(_gl.POINTS);\n\n        } else if (object.isSprite) {\n\n            renderer.setMode(_gl.TRIANGLES);\n\n        }\n\n        if (geometry && geometry.isInstancedBufferGeometry) {\n\n            if (geometry.maxInstancedCount > 0) {\n\n                renderer.renderInstances(geometry, drawStart, drawCount);\n\n            }\n\n        } else {\n\n            renderer.render(drawStart, drawCount);\n\n        }\n\n    }\n\n    allocTextureUnit() {\n        var textureUnit = _usedTextureUnits;\n\n        if (textureUnit >= this._capabilities.maxTextures) {\n\n            console.warn('WebGLRenderer: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures);\n\n        }\n\n        _usedTextureUnits += 1;\n\n        return textureUnit;\n    }\n\n    setTexture2D(texture, slot) {\n        //todo Use in WebGLUniforms\n        this._textures.setTexture2D(texture, slot);\n    }\n\n    setTextureCube() {\n        //todo Use in WebGLUniforms\n    }\n\n    dispose() {\n\n        this.domElement.removeEventListener('webglcontextlost', this._onContextLostBind, false);\n        this.domElement.removeEventListener('webglcontextrestored', this._onContextRestoreBind, false);\n\n        this._onContextLostBind = null;\n        this._onContextRestoreBind = null;\n        this._renderLists.dispose();\n        this._renderStates.dispose();\n        this._properties.dispose();\n        this._objects.dispose();\n\n        //vr.dispose();\n\n        //stopAnimation();\n\n    };\n}\n\n//判断是否更新了Buffer\nlet _currentGeometryProgram = '';\nfunction isUpdateBuffers(geometry, program, material) {\n\n    let geometryProgram = geometry.id + '_' + program.id + '_' + (material.wireframe === true);\n\n    let updateBuffers = false;\n\n    if (geometryProgram !== _currentGeometryProgram) {\n\n\n        updateBuffers = true;\n        _currentGeometryProgram = geometryProgram;\n\n    }\n\n    return updateBuffers;\n}\n\n//将渲染的几何对象和材质存放到渲染队列中\nfunction projectObject(object, camera, sortObjects) {\n\n    if (object.visible === false) return;\n\n\n\n    if (object.isLight) {\n\n        this._currentRenderState.pushLight(object);\n\n    } else if (object.isSprite) {\n\n        if (!object.frustumCulled || this._frustum.intersectsSprite(object)) {\n\n            if (sortObjects) {\n\n                this._vector3.setFromMatrixPosition(object.matrixWorld)\n                    .applyMatrix4(this._projScreenMatrix);\n\n            }\n\n            var geometry = this._objects.update(object);\n            var material = object.material;\n\n            this._currentRenderList.push(object, geometry, material, this._vector3.z, null);\n\n        }\n\n    } else if (object.isMesh || object.isLine || object.isPoints) {\n\n        if (!object.frustumCulled || this._frustum.intersectsObject(object)) {\n\n            if (sortObjects) {\n\n                this._vector3.setFromMatrixPosition(object.matrixWorld)\n                    .applyMatrix4(this._projScreenMatrix);\n\n            }\n            //创建好了attribute buffer\n            let geometry = this._objects.update(object);\n            let material = object.material;\n\n            //如果是数组,表示geometry根据groups的分组进行分别绘制\n            if (Array.isArray(material)) {\n\n                let groups = geometry.groups;\n\n                for (let i = 0, l = groups.length; i < l; i++) {\n\n                    let group = groups[i];\n                    let groupMaterial = material[group.materialIndex];\n\n                    if (groupMaterial && groupMaterial.visible) {\n\n                        this._currentRenderList.push(object, geometry, groupMaterial, this._vector3.z, group);\n\n                    }\n\n                }\n\n            } else if (material.visible) {\n\n                this._currentRenderList.push(object, geometry, material, this._vector3.z, null);\n\n            }\n\n        }\n\n\n\n    }\n\n    let children = object.children;\n\n    for (let i = 0, l = children.length; i < l; i++) {\n\n        projectObject.call(this, children[i], camera, sortObjects);\n\n    }\n\n}\n\nfunction renderObjects(renderList, scene, camera) {\n    for (let i = 0, l = renderList.length; i < l; i++) {\n\n        let renderItem = renderList[i];\n\n        let object = renderItem.object;\n        let geometry = renderItem.geometry;\n        let material = renderItem.material;\n        let group = renderItem.group;\n\n        renderObject.call(this, object, scene, camera, geometry, material, group);\n\n    }\n}\n\nfunction renderObject(object, scene, camera, geometry, material, group) {\n\n    object.onBeforeRender(this, scene, camera, geometry, material, group);\n    this._currentRenderState = this._renderStates.get(scene, camera);\n\n    object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, object.matrixWorld);\n    object.normalMatrix.getNormalMatrix(object.modelViewMatrix);\n\n    this.renderBufferDirect(camera, scene.fog, geometry, material, object, group);\n\n    object.onAfterRender(this, scene, camera, geometry, material, group);\n    // this._currentRenderState = renderStates.get( scene,  camera );\n}\n\n\nlet _usedTextureUnits = 0;                  //当前纹理单元\nfunction setProgram(camera, fog, material, object) {\n    _usedTextureUnits = 0;\n\n    let materialProperties = this._properties.get(material);\n    let lights = this._currentRenderState.state.lights;\n\n\n    if (material.needsUpdate === false) {\n\n        if (materialProperties.program === undefined) {\n\n            material.needsUpdate = true;\n\n        } else if (material.lights && materialProperties.lightsHash !== lights.state.hash) {\n\n            material.needsUpdate = true;\n\n        }\n\n    }\n\n\n    if (material.needsUpdate) {\n\n        initMaterial.call(this, material, fog, object);\n        material.needsUpdate = false;\n\n    }\n\n    let refreshProgram = false;\n    let refreshMaterial = false;\n    let refreshLights = false;\n\n    let program = materialProperties.program,\n        p_uniforms = program.getUniforms(),\n        m_uniforms = materialProperties.shader.uniforms;\n\n    if (this._state.useProgram(program.program)) {\n\n        refreshProgram = true;\n        refreshMaterial = true;\n        refreshLights = true;\n\n    }\n\n    if (material.id !== this._currentMaterialId) {\n\n        this._currentMaterialId = material.id;\n\n        refreshMaterial = true;\n\n    }\n\n    if (refreshProgram || camera !== this._currentCamera) {\n\n        p_uniforms.setValue('projectionMatrix', camera.projectionMatrix);\n\n        if (camera !== this._currentCamera) {\n\n            this._currentCamera = camera;\n            refreshMaterial = true;\n            refreshLights = true;\n\n        }\n    }\n\n\n    if (refreshMaterial) {\n\n\n        if (material.lights) {\n\n            // the current material requires lighting info\n\n            // note: all lighting uniforms are always set correctly\n            // they simply reference the renderer's state for their\n            // values\n            //\n            // use the current material's .needsUpdate flags to set\n            // the GL state when required\n\n            markUniformsLightsNeedsUpdate(m_uniforms, refreshLights);\n\n        }\n\n        if (material.isMeshBasicMaterial\n            || material.isLineBasicMaterial\n            || material.isMeshLambertMaterial\n            || material.isMeshPhongMaterial\n            || material.isPointsMaterial\n            || material.isLineMeshMaterial\n            || material.isSpriteMaterial) {\n            if (material.color) {\n                m_uniforms.diffuse.value = material.color;\n            }\n\n            if (material.map) {\n                m_uniforms.map.value = material.map;\n            }\n\n            m_uniforms.opacity.value = material.opacity;\n\n            if (material.emissive) {\n\n                m_uniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity);\n\n            }\n\n            if (material.map) {\n\n                if (material.map.matrixAutoUpdate === true) {\n                    //更新纹理映射矩阵\n                    material.map.updateMatrix();\n\n                }\n\n                m_uniforms.uvTransform.value.copy(material.map.matrix);\n            }\n\n        }\n\n        function updateLineMaterial() {\n            m_uniforms.dashSize.value = material.dashSize;\n            m_uniforms.totalSize.value = material.dashSize + material.gapSize;\n            m_uniforms.scale.value = material.scale;\n        }\n\n        if (material.isLineBasicMaterial) {\n\n            if (material.isLineDashedMaterial) {\n                updateLineMaterial();\n            }\n\n        } else if (material.isMeshPhongMaterial) {\n\n            m_uniforms.specular.value = material.specular;\n            m_uniforms.shininess.value = Math.max(material.shininess, 1e-4); // to prevent pow( 0.0, 0.0 )\n\n        }\n\n        else if (material.isPointsMaterial) {\n\n            m_uniforms.size.value = material.size * this._pixelRatio;\n            m_uniforms.scale.value = this._height * 0.5;\n\n        } else if (material.isSpriteMaterial) {\n\n            m_uniforms.rotation.value = material.rotation;\n\n\n        } else if (material.isLineMeshMaterial) {\n\n            updateLineMaterial();\n            m_uniforms.linewidth.value = material.linewidth;\n            m_uniforms.resolution.value.copy(material.resolution);\n\n        }\n\n\n\n        WebGLUniforms.upload(this.gl, materialProperties.uniformsList, m_uniforms, this);\n\n    }\n    if (material.isShaderMaterial && material.uniformsNeedUpdate === true) {\n\n        WebGLUniforms.upload(this.gl, materialProperties.uniformsList, m_uniforms, this);\n        material.uniformsNeedUpdate = false;\n\n    }\n\n    if (material.isSpriteMaterial) {\n\n        p_uniforms.setValue('center', object.center);\n\n    }\n\n\n    // common matrices\n\n    p_uniforms.setValue('modelViewMatrix', object.modelViewMatrix);\n    p_uniforms.setValue('normalMatrix', object.normalMatrix);\n    p_uniforms.setValue('modelMatrix', object.matrixWorld);\n\n    return program;\n\n}\n\nfunction initMaterial(material, fog, object) {\n\n    let materialProperties = this._properties.get(material);\n    let lights = this._currentRenderState.state.lights;\n    let parameters = this._programCache.getParameters(material, lights.state);\n\n    let code = this._programCache.getProgramCode(material, parameters);\n\n    let program = materialProperties.program;\n    let programChange = true;\n\n    if (program === undefined) {\n\n        // new material\n\n        this._onMaterialDispose = onMaterialDispose.bind(this);\n\n        material.on('dispose', this._onMaterialDispose);\n\n    } else if (program.code !== code) {\n\n        // changed glsl or parameters\n        releaseMaterialProgramReference.call(this, material);\n\n    } else if (materialProperties.lightsHash !== lights.state.hash) {\n\n        properties.update(material, 'lightsHash', lights.state.hash);\n        programChange = false;\n\n    } else if (parameters.shaderID !== undefined) {\n\n        // same glsl and uniform list\n        return;\n\n    } else {\n\n        // only rebuild uniform list\n        programChange = false;\n\n    }\n\n    if (programChange) {\n\n        if (parameters.shaderID) {\n\n            var shader = ShaderLib[parameters.shaderID];\n\n            materialProperties.shader = {\n                name: material.type,\n                uniforms: UniformsUtils.clone(shader.uniforms),\n                vertexShader: shader.vertexShader,\n                fragmentShader: shader.fragmentShader\n            };\n\n        } else {\n            //自定义shader\n            materialProperties.shader = {\n                name: material.type,\n                uniforms: material.uniforms,\n                vertexShader: material.vertexShader,\n                fragmentShader: material.fragmentShader\n            };\n\n        }\n\n\n        material.onBeforeCompile(materialProperties.shader, this);\n\n        //WebGLProgram 对象\n        program = this._programCache.acquireProgram(material, materialProperties.shader, parameters, code);\n\n        materialProperties.program = program;\n        material.program = program;\n\n    }\n\n    let programAttributes = program.getAttributes();\n\n\n    let uniforms = materialProperties.shader.uniforms;\n\n\n    // store the light setup it was created for\n\n    materialProperties.lightsHash = lights.state.hash;\n\n    if (material.lights) {\n\n        // wire up the material to this renderer's lighting state\n\n        uniforms.ambientLightColor.value = lights.state.ambient;\n        uniforms.directionalLights.value = lights.state.directional;\n        uniforms.spotLights.value = lights.state.spot;\n        uniforms.pointLights.value = lights.state.point;\n\n    }\n\n    let progUniforms = materialProperties.program.getUniforms();\n    let uniformsList = WebGLUniforms.seqWithValue(progUniforms.seq, uniforms);\n\n    materialProperties.uniformsList = uniformsList;\n\n}\n\nfunction onMaterialDispose(event) {\n    let me = this;\n    let material = event.target;\n\n    material.off('dispose', this._onMaterialDispose);\n\n    this._onMaterialDispose = null;\n\n    deallocateMaterial.call(this, material);\n}\n\n// Buffer deallocation\n\nfunction deallocateMaterial(material) {\n\n    releaseMaterialProgramReference.call(this, material);\n\n    this._properties.remove(material);\n\n}\n\nfunction releaseMaterialProgramReference(material) {\n    var programInfo = this._properties.get(material).program;\n\n    material.program = undefined;\n\n    if (programInfo !== undefined) {\n\n        this._programCache.releaseProgram(programInfo);\n\n    }\n}\n\nfunction setupVertexAttributes(material, program, geometry) {\n\n    if (geometry && geometry.isInstancedBufferGeometry) {\n\n        if (this._extensions.get('ANGLE_instanced_arrays') === null) {\n\n            console.error('WebGLRenderer.setupVertexAttributes: using InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');\n            return;\n\n        }\n\n    }\n\n\n    this._state.initAttributes();\n    let _gl = this.gl;\n    let geometryAttributes = geometry.attributes;\n\n    let programAttributes = program.getAttributes();\n    let materialDefaultAttributeValues = material.defaultAttributeValues;\n\n    for (let name in programAttributes) {\n\n        let programAttribute = programAttributes[name];\n\n        if (programAttribute >= 0) {\n\n            let geometryAttribute = geometryAttributes[name];\n\n            if (geometryAttribute !== undefined) {\n\n                let normalized = geometryAttribute.normalized;\n                let size = geometryAttribute.itemSize;\n\n                let attribute = this._attributes.get(geometryAttribute);\n\n                // TODO Attribute may not be available on context restore\n\n                if (attribute === undefined) continue;\n\n                let buffer = attribute.buffer;\n                let type = attribute.type;\n                let bytesPerElement = attribute.bytesPerElement;\n\n                if (geometryAttribute.isInterleavedBufferAttribute) {\n\n                    var data = geometryAttribute.data;\n                    var stride = data.stride;\n                    var offset = geometryAttribute.offset;\n\n                    if (data && data.isInstancedInterleavedBuffer) {\n\n                        this._state.enableAttributeAndDivisor(programAttribute, data.meshPerAttribute);\n\n                        if (geometry.maxInstancedCount === undefined) {\n\n                            geometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n                        }\n\n                    } else {\n\n                        this._state.enableAttribute(programAttribute);\n\n                    }\n\n                    _gl.bindBuffer(_gl.ARRAY_BUFFER, buffer);\n                    _gl.vertexAttribPointer(programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement);\n\n                } else {\n\n                    if (geometryAttribute.isInstancedBufferAttribute) {\n\n                        this._state.enableAttributeAndDivisor(programAttribute, geometryAttribute.meshPerAttribute);\n\n                        if (geometry.maxInstancedCount === undefined) {\n\n                            geometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n                        }\n\n                    } else {\n\n                        this._state.enableAttribute(programAttribute);\n                    }\n\n\n                    _gl.bindBuffer(_gl.ARRAY_BUFFER, buffer);\n                    _gl.vertexAttribPointer(programAttribute, size, type, normalized, 0, 0);\n\n                }\n\n            } else if (materialDefaultAttributeValues !== undefined) {\n                var value = materialDefaultAttributeValues[name];\n\n                if (value !== undefined) {\n\n                    switch (value.length) {\n\n                        case 2:\n                            _gl.vertexAttrib2fv(programAttribute, value);\n                            break;\n\n                        case 3:\n                            _gl.vertexAttrib3fv(programAttribute, value);\n                            break;\n\n                        case 4:\n                            _gl.vertexAttrib4fv(programAttribute, value);\n                            break;\n\n                        default:\n                            _gl.vertexAttrib1fv(programAttribute, value);\n\n                    }\n\n                }\n            }\n\n        }\n\n    }\n\n    this._state.disableUnusedAttributes();\n\n}\n\n// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\nfunction markUniformsLightsNeedsUpdate(uniforms, value) {\n\n    uniforms.ambientLightColor.needsUpdate = value;\n\n    uniforms.directionalLights.needsUpdate = value;\n    uniforms.pointLights.needsUpdate = value;\n    uniforms.spotLights.needsUpdate = value;\n\n}\n\n/**\n* @private\n* @description 上下文丢失\n* @param {*} event \n*/\nfunction onContextLost(event) {\n\n    event.preventDefault();\n    console.log('WebGLRenderer: Context Lost.');\n    this._isContextLost = true;\n    this.fire({ type: 'contextlost' });\n}\n/**\n* @private\n* @description 上下文恢复\n*/\nfunction onContextRestore() {\n\n    console.log('WebGLRenderer: Context Restored.');\n    this._isContextLost = true;\n    this._initGLContext(parametersÎ);\n    this.fire({ type: 'contextrestore' })\n}\n\n\nexport { WebGLRenderer };","import { Vector3 } from './Vector3';\n\nvar v1 = new Vector3();\nvar r;\n\nvar EPS = 0.000001;\nclass Quaternion {\n    constructor(x, y, z, w) {\n        this._x = x || 0;\n        this._y = y || 0;\n        this._z = z || 0;\n        this._w = (w !== undefined) ? w : 1;\n    }\n\n\n\n    get x() {\n        return this._x;\n    }\n    set x(value) {\n        this._x = value;\n        this.onChangeCallback();\n    }\n\n    get y() {\n        return this._y;\n    }\n\n    set y(value) {\n        this._y = value;\n        this.onChangeCallback();\n    }\n\n    get z() {\n        return this._z;\n    }\n\n    set z(value) {\n        this._z = value;\n        this.onChangeCallback();\n\n    }\n\n    get w() {\n        return this._w;\n    }\n\n    set w(value) {\n        this._w = value;\n        this.onChangeCallback();\n    }\n\n\n\n    static slerp(qa, qb, qm, t) {\n\n        return qm.copy(qa).slerp(qb, t);\n\n    }\n\n    static slerpFlat(dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t) {\n\n        // fuzz-free, array-based Quaternion SLERP operation\n\n        var x0 = src0[srcOffset0 + 0],\n            y0 = src0[srcOffset0 + 1],\n            z0 = src0[srcOffset0 + 2],\n            w0 = src0[srcOffset0 + 3],\n\n            x1 = src1[srcOffset1 + 0],\n            y1 = src1[srcOffset1 + 1],\n            z1 = src1[srcOffset1 + 2],\n            w1 = src1[srcOffset1 + 3];\n\n        if (w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1) {\n\n            var s = 1 - t,\n\n                cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n                dir = (cos >= 0 ? 1 : - 1),\n                sqrSin = 1 - cos * cos;\n\n            // Skip the Slerp for tiny steps to avoid numeric problems:\n            if (sqrSin > Number.EPSILON) {\n\n                var sin = Math.sqrt(sqrSin),\n                    len = Math.atan2(sin, cos * dir);\n\n                s = Math.sin(s * len) / sin;\n                t = Math.sin(t * len) / sin;\n\n            }\n\n            var tDir = t * dir;\n\n            x0 = x0 * s + x1 * tDir;\n            y0 = y0 * s + y1 * tDir;\n            z0 = z0 * s + z1 * tDir;\n            w0 = w0 * s + w1 * tDir;\n\n            // Normalize in case we just did a lerp:\n            if (s === 1 - t) {\n\n                var f = 1 / Math.sqrt(x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0);\n\n                x0 *= f;\n                y0 *= f;\n                z0 *= f;\n                w0 *= f;\n\n            }\n\n        }\n\n        dst[dstOffset] = x0;\n        dst[dstOffset + 1] = y0;\n        dst[dstOffset + 2] = z0;\n        dst[dstOffset + 3] = w0;\n\n    }\n\n    set(x, y, z, w) {\n\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._w = w;\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new this.constructor(this._x, this._y, this._z, this._w);\n\n    }\n\n    copy(quaternion) {\n\n        this._x = quaternion.x;\n        this._y = quaternion.y;\n        this._z = quaternion.z;\n        this._w = quaternion.w;\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n    setFromEuler(euler, update) {\n\n        if (!(euler && euler.isEuler)) {\n\n            throw new Error('Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.');\n\n        }\n\n        var x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n        // http://www.mathworks.com/matlabcentral/fileexchange/\n        // \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n        //\tcontent/SpinCalc.m\n\n        var cos = Math.cos;\n        var sin = Math.sin;\n\n        var c1 = cos(x / 2);\n        var c2 = cos(y / 2);\n        var c3 = cos(z / 2);\n\n        var s1 = sin(x / 2);\n        var s2 = sin(y / 2);\n        var s3 = sin(z / 2);\n\n        if (order === 'XYZ') {\n\n            this._x = s1 * c2 * c3 + c1 * s2 * s3;\n            this._y = c1 * s2 * c3 - s1 * c2 * s3;\n            this._z = c1 * c2 * s3 + s1 * s2 * c3;\n            this._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n        } else if (order === 'YXZ') {\n\n            this._x = s1 * c2 * c3 + c1 * s2 * s3;\n            this._y = c1 * s2 * c3 - s1 * c2 * s3;\n            this._z = c1 * c2 * s3 - s1 * s2 * c3;\n            this._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n        } else if (order === 'ZXY') {\n\n            this._x = s1 * c2 * c3 - c1 * s2 * s3;\n            this._y = c1 * s2 * c3 + s1 * c2 * s3;\n            this._z = c1 * c2 * s3 + s1 * s2 * c3;\n            this._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n        } else if (order === 'ZYX') {\n\n            this._x = s1 * c2 * c3 - c1 * s2 * s3;\n            this._y = c1 * s2 * c3 + s1 * c2 * s3;\n            this._z = c1 * c2 * s3 - s1 * s2 * c3;\n            this._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n        } else if (order === 'YZX') {\n\n            this._x = s1 * c2 * c3 + c1 * s2 * s3;\n            this._y = c1 * s2 * c3 + s1 * c2 * s3;\n            this._z = c1 * c2 * s3 - s1 * s2 * c3;\n            this._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n        } else if (order === 'XZY') {\n\n            this._x = s1 * c2 * c3 - c1 * s2 * s3;\n            this._y = c1 * s2 * c3 - s1 * c2 * s3;\n            this._z = c1 * c2 * s3 + s1 * s2 * c3;\n            this._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n        }\n\n        if (update !== false) this.onChangeCallback();\n\n        return this;\n\n    }\n\n    setFromAxisAngle(axis, angle) {\n\n        // http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n        // assumes axis is normalized\n\n        var halfAngle = angle / 2, s = Math.sin(halfAngle);\n\n        this._x = axis.x * s;\n        this._y = axis.y * s;\n        this._z = axis.z * s;\n        this._w = Math.cos(halfAngle);\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n    setFromRotationMatrix(m) {\n\n        // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n        // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n        var te = m.elements,\n\n            m11 = te[0], m12 = te[4], m13 = te[8],\n            m21 = te[1], m22 = te[5], m23 = te[9],\n            m31 = te[2], m32 = te[6], m33 = te[10],\n\n            trace = m11 + m22 + m33,\n            s;\n\n        if (trace > 0) {\n\n            s = 0.5 / Math.sqrt(trace + 1.0);\n\n            this._w = 0.25 / s;\n            this._x = (m32 - m23) * s;\n            this._y = (m13 - m31) * s;\n            this._z = (m21 - m12) * s;\n\n        } else if (m11 > m22 && m11 > m33) {\n\n            s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n\n            this._w = (m32 - m23) / s;\n            this._x = 0.25 * s;\n            this._y = (m12 + m21) / s;\n            this._z = (m13 + m31) / s;\n\n        } else if (m22 > m33) {\n\n            s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n\n            this._w = (m13 - m31) / s;\n            this._x = (m12 + m21) / s;\n            this._y = 0.25 * s;\n            this._z = (m23 + m32) / s;\n\n        } else {\n\n            s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n\n            this._w = (m21 - m12) / s;\n            this._x = (m13 + m31) / s;\n            this._y = (m23 + m32) / s;\n            this._z = 0.25 * s;\n\n        }\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n\n\n    // assumes direction vectors vFrom and vTo are normalized\n\n\n    setFromUnitVectors(vFrom, vTo) {\n\n        if (v1 === undefined) v1 = new Vector3();\n\n        r = vFrom.dot(vTo) + 1;\n\n        if (r < EPS) {\n\n            r = 0;\n\n            if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n\n                v1.set(- vFrom.y, vFrom.x, 0);\n\n            } else {\n\n                v1.set(0, - vFrom.z, vFrom.y);\n\n            }\n\n        } else {\n\n            v1.crossVectors(vFrom, vTo);\n\n        }\n\n        this._x = v1.x;\n        this._y = v1.y;\n        this._z = v1.z;\n        this._w = r;\n\n        return this.normalize();\n\n    }\n\n    inverse() {\n\n        return this.conjugate().normalize();\n\n    }\n\n    conjugate() {\n\n        this._x *= - 1;\n        this._y *= - 1;\n        this._z *= - 1;\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n    dot(v) {\n\n        return this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n    }\n\n    lengthSq() {\n\n        return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n    }\n\n    length() {\n\n        return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);\n\n    }\n\n    normalize() {\n\n        var l = this.length();\n\n        if (l === 0) {\n\n            this._x = 0;\n            this._y = 0;\n            this._z = 0;\n            this._w = 1;\n\n        } else {\n\n            l = 1 / l;\n\n            this._x = this._x * l;\n            this._y = this._y * l;\n            this._z = this._z * l;\n            this._w = this._w * l;\n\n        }\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n    multiply(q, p) {\n\n        if (p !== undefined) {\n\n            console.warn('Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.');\n            return this.multiplyQuaternions(q, p);\n\n        }\n\n        return this.multiplyQuaternions(this, q);\n\n    }\n\n    premultiply(q) {\n\n        return this.multiplyQuaternions(q, this);\n\n    }\n\n    multiplyQuaternions(a, b) {\n\n        // from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n        var qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n        var qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n        this._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n        this._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n        this._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n        this._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n    slerp(qb, t) {\n\n        if (t === 0) return this;\n        if (t === 1) return this.copy(qb);\n\n        var x = this._x, y = this._y, z = this._z, w = this._w;\n\n        // http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n        var cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n        if (cosHalfTheta < 0) {\n\n            this._w = - qb._w;\n            this._x = - qb._x;\n            this._y = - qb._y;\n            this._z = - qb._z;\n\n            cosHalfTheta = - cosHalfTheta;\n\n        } else {\n\n            this.copy(qb);\n\n        }\n\n        if (cosHalfTheta >= 1.0) {\n\n            this._w = w;\n            this._x = x;\n            this._y = y;\n            this._z = z;\n\n            return this;\n\n        }\n\n        var sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta);\n\n        if (Math.abs(sinHalfTheta) < 0.001) {\n\n            this._w = 0.5 * (w + this._w);\n            this._x = 0.5 * (x + this._x);\n            this._y = 0.5 * (y + this._y);\n            this._z = 0.5 * (z + this._z);\n\n            return this;\n\n        }\n\n        var halfTheta = Math.atan2(sinHalfTheta, cosHalfTheta);\n        var ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta,\n            ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n\n        this._w = (w * ratioA + this._w * ratioB);\n        this._x = (x * ratioA + this._x * ratioB);\n        this._y = (y * ratioA + this._y * ratioB);\n        this._z = (z * ratioA + this._z * ratioB);\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n    equals(quaternion) {\n\n        return (quaternion._x === this._x) && (quaternion._y === this._y) && (quaternion._z === this._z) && (quaternion._w === this._w);\n\n    }\n\n    fromArray(array, offset) {\n\n        if (offset === undefined) offset = 0;\n\n        this._x = array[offset];\n        this._y = array[offset + 1];\n        this._z = array[offset + 2];\n        this._w = array[offset + 3];\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n    toArray(array, offset) {\n\n        if (array === undefined) array = [];\n        if (offset === undefined) offset = 0;\n\n        array[offset] = this._x;\n        array[offset + 1] = this._y;\n        array[offset + 2] = this._z;\n        array[offset + 3] = this._w;\n\n        return array;\n\n    }\n\n    onChange(callback) {\n\n        this.onChangeCallback = callback;\n\n        return this;\n\n    }\n\n    onChangeCallback() { }\n\n}\n\nexport { Quaternion };","\nimport { Vector3 } from './Vector3';\nimport { Matrix4 } from './Matrix4';\nimport { _Math } from './Math';\nimport { Quaternion } from './Quaternion';\n\nvar matrix = new Matrix4();\nvar q = new Quaternion();\nclass Euler {\n    constructor(x, y, z, order) {\n        this._x = x || 0;\n        this._y = y || 0;\n        this._z = z || 0;\n        this._order = order || Euler.DefaultOrder;\n\n        this.isEuler = true;\n    }\n\n    get x() {\n\n        return this._x;\n\n    }\n\n    set x(value) {\n\n        this._x = value;\n        this.onChangeCallback();\n\n    }\n\n\n\n    get y() {\n\n        return this._y;\n\n    }\n\n    set y(value) {\n\n        this._y = value;\n        this.onChangeCallback();\n\n    }\n\n\n    get z() {\n\n        return this._z;\n\n    }\n\n    set z(value) {\n\n        this._z = value;\n        this.onChangeCallback();\n\n    }\n\n\n\n    get order() {\n\n        return this._order;\n\n    }\n\n    set order(value) {\n\n        this._order = value;\n        this.onChangeCallback();\n\n    }\n\n    set(x, y, z, order) {\n\n        this._x = x;\n        this._y = y;\n        this._z = z;\n        this._order = order || this._order;\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new this.constructor(this._x, this._y, this._z, this._order);\n\n    }\n\n    copy(euler) {\n\n        this._x = euler._x;\n        this._y = euler._y;\n        this._z = euler._z;\n        this._order = euler._order;\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n    setFromRotationMatrix(m, order, update) {\n\n        var clamp = _Math.clamp;\n\n        // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n        var te = m.elements;\n        var m11 = te[0], m12 = te[4], m13 = te[8];\n        var m21 = te[1], m22 = te[5], m23 = te[9];\n        var m31 = te[2], m32 = te[6], m33 = te[10];\n\n        order = order || this._order;\n\n        if (order === 'XYZ') {\n\n            this._y = Math.asin(clamp(m13, - 1, 1));\n\n            if (Math.abs(m13) < 0.99999) {\n\n                this._x = Math.atan2(- m23, m33);\n                this._z = Math.atan2(- m12, m11);\n\n            } else {\n\n                this._x = Math.atan2(m32, m22);\n                this._z = 0;\n\n            }\n\n        } else if (order === 'YXZ') {\n\n            this._x = Math.asin(- clamp(m23, - 1, 1));\n\n            if (Math.abs(m23) < 0.99999) {\n\n                this._y = Math.atan2(m13, m33);\n                this._z = Math.atan2(m21, m22);\n\n            } else {\n\n                this._y = Math.atan2(- m31, m11);\n                this._z = 0;\n\n            }\n\n        } else if (order === 'ZXY') {\n\n            this._x = Math.asin(clamp(m32, - 1, 1));\n\n            if (Math.abs(m32) < 0.99999) {\n\n                this._y = Math.atan2(- m31, m33);\n                this._z = Math.atan2(- m12, m22);\n\n            } else {\n\n                this._y = 0;\n                this._z = Math.atan2(m21, m11);\n\n            }\n\n        } else if (order === 'ZYX') {\n\n            this._y = Math.asin(- clamp(m31, - 1, 1));\n\n            if (Math.abs(m31) < 0.99999) {\n\n                this._x = Math.atan2(m32, m33);\n                this._z = Math.atan2(m21, m11);\n\n            } else {\n\n                this._x = 0;\n                this._z = Math.atan2(- m12, m22);\n\n            }\n\n        } else if (order === 'YZX') {\n\n            this._z = Math.asin(clamp(m21, - 1, 1));\n\n            if (Math.abs(m21) < 0.99999) {\n\n                this._x = Math.atan2(- m23, m22);\n                this._y = Math.atan2(- m31, m11);\n\n            } else {\n\n                this._x = 0;\n                this._y = Math.atan2(m13, m33);\n\n            }\n\n        } else if (order === 'XZY') {\n\n            this._z = Math.asin(- clamp(m12, - 1, 1));\n\n            if (Math.abs(m12) < 0.99999) {\n\n                this._x = Math.atan2(m32, m22);\n                this._y = Math.atan2(m13, m11);\n\n            } else {\n\n                this._x = Math.atan2(- m23, m33);\n                this._y = 0;\n\n            }\n\n        } else {\n\n            console.warn('Euler: .setFromRotationMatrix() given unsupported order: ' + order);\n\n        }\n\n        this._order = order;\n\n        if (update !== false) this.onChangeCallback();\n\n        return this;\n\n    }\n\n    setFromQuaternion(q, order, update) {\n\n        matrix.makeRotationFromQuaternion(q);\n\n        return this.setFromRotationMatrix(matrix, order, update);\n\n    }\n\n    setFromVector3(v, order) {\n\n        return this.set(v.x, v.y, v.z, order || this._order);\n\n    }\n\n\n    // WARNING: this discards revolution information -bhouston\n\n\n\n    reorder(newOrder) {\n\n        q.setFromEuler(this);\n\n        return this.setFromQuaternion(q, newOrder);\n\n    }\n\n    equals(euler) {\n\n        return (euler._x === this._x) && (euler._y === this._y) && (euler._z === this._z) && (euler._order === this._order);\n\n    }\n\n    fromArray(array) {\n\n        this._x = array[0];\n        this._y = array[1];\n        this._z = array[2];\n        if (array[3] !== undefined) this._order = array[3];\n\n        this.onChangeCallback();\n\n        return this;\n\n    }\n\n    toArray(array, offset) {\n\n        if (array === undefined) array = [];\n        if (offset === undefined) offset = 0;\n\n        array[offset] = this._x;\n        array[offset + 1] = this._y;\n        array[offset + 2] = this._z;\n        array[offset + 3] = this._order;\n\n        return array;\n\n    }\n\n    toVector3(optionalResult) {\n\n        if (optionalResult) {\n\n            return optionalResult.set(this._x, this._y, this._z);\n\n        } else {\n\n            return new Vector3(this._x, this._y, this._z);\n\n        }\n\n    }\n\n    onChange(callback) {\n\n        this.onChangeCallback = callback;\n\n        return this;\n\n    }\n\n    onChangeCallback() { }\n\n\n}\n\nEuler.RotationOrders = ['XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX'];\n\nEuler.DefaultOrder = 'XYZ';\n\nexport { Euler };","\nimport { Events } from './Events';\n\nimport { Vector3 } from '../maths/Vector3';\nimport { Matrix4 } from '../maths/Matrix4';\nimport { Euler } from '../maths/Euler';\nimport { Matrix3 } from '../maths/Matrix3';\nimport { _Math } from '../maths/Math';\nimport { Quaternion } from '../maths/Quaternion';\n\n/**\n * @class Object3D 三维对象的基类\n * @description 实现三维对象的的一些基本操作\n * @author bujue\n */\nlet object3DId = 0;\nclass Object3D extends Events {\n\n    constructor() {\n        super();\n        Object.defineProperty(this, 'id', { value: object3DId++ });\n\n        this.parent = null;\n        this.children = [];\n\n\n        this.up = Object3D.DefaultUp.clone();\n\n        let position = new Vector3();\n        let rotation = new Euler();\n        let quaternion = new Quaternion();\n        let scale = new Vector3(1, 1, 1);\n\n        function onRotationChange() {\n\n            quaternion.setFromEuler(rotation, false);\n\n        }\n\n        function onQuaternionChange() {\n\n            rotation.setFromQuaternion(quaternion, undefined, false);\n\n        }\n\n        rotation.onChange(onRotationChange);\n        quaternion.onChange(onQuaternionChange);\n\n        Object.defineProperties(this, {\n            position: {\n                enumerable: true,\n                value: position\n            },\n            rotation: {\n                enumerable: true,\n                value: rotation\n            },\n            quaternion: {\n                enumerable: true,\n                value: quaternion\n            },\n            scale: {\n                enumerable: true,\n                value: scale\n            },\n            modelViewMatrix: {\n                value: new Matrix4()\n            },\n            normalMatrix: {\n                value: new Matrix3()\n            }\n        });\n\n\n        this.matrix = new Matrix4();\n        this.matrixWorld = new Matrix4();\n\n        this.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n        this.matrixWorldNeedsUpdate = false;\n\n        this.visible = true;\n\n        this.castShadow = false;\n        this.receiveShadow = false;\n\n        this.frustumCulled = true;\n        this.renderOrder = 0;\n\n        this.userData = {};\n\n    }\n\n    get isObject3D() {\n        return true;\n    }\n\n    onBeforeRender(renderer, scene, camera, geometry, material, group) {\n        //继承实现 渲染前调用\n    }\n    onAfterRender(renderer, scene, camera, geometry, material, group) {\n        //继承实现 渲染后调用\n    }\n\n    applyMatrix(matrix) {\n\n        this.matrix.multiplyMatrices(matrix, this.matrix);\n\n        this.matrix.decompose(this.position, this.quaternion, this.scale);\n\n    }\n\n    lookAt(x, y, z) {\n\n        lookAt.call(this, x, y, z);\n    }\n\n\n    add(object) {\n        if (arguments.length > 1) {\n\n            for (let i = 0; i < arguments.length; i++) {\n\n                this.add(arguments[i]);\n\n            }\n\n            return this;\n\n        }\n\n        if (object === this) {\n\n            console.error(\"Object3D.add: object can't be added as a child of itself.\", object);\n            return this;\n\n        }\n\n        if ((object && object.isObject3D)) {\n\n            if (object.parent !== null) {\n\n                object.parent.remove(object);\n\n            }\n\n            object.parent = this;\n\n            object.fire({ type: 'added' });\n\n            this.children.push(object);\n\n        } else {\n\n            console.error(\"Object3D.add: object not an instance of Object3D.\", object);\n\n        }\n\n        return this;\n    }\n\n    remove(object) {\n\n        if (arguments.length > 1) {\n\n            for (let i = 0; i < arguments.length; i++) {\n\n                this.remove(arguments[i]);\n\n            }\n\n            return this;\n\n        }\n\n        let index = this.children.indexOf(object);\n\n        if (index !== - 1) {\n\n            object.parent = null;\n\n            object.fire({ type: 'removed' });\n\n            this.children.splice(index, 1);\n\n        }\n\n        return this;\n    }\n\n    traverse(callback) {\n\n        callback(this);\n\n        let children = this.children;\n\n        for (let i = 0, l = children.length; i < l; i++) {\n\n            children[i].traverse(callback);\n\n        }\n\n    }\n\n\n    updateMatrixWorld(force) {\n\n        if (this.matrixAutoUpdate) this.updateMatrix();\n\n        if (this.matrixWorldNeedsUpdate || force) {\n\n            if (this.parent === null) {\n\n                this.matrixWorld.copy(this.matrix);\n\n            } else {\n\n                this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n\n            }\n\n            this.matrixWorldNeedsUpdate = false;\n\n            force = true;\n\n        }\n\n        // update children\n\n        let children = this.children;\n\n        for (let i = 0, l = children.length; i < l; i++) {\n\n            children[i].updateMatrixWorld(force);\n\n        }\n\n    }\n\n    applyQuaternion(q) {\n\n        this.quaternion.premultiply(q);\n\n        return this;\n\n    }\n\n    setRotationFromAxisAngle(axis, angle) {\n\n        // assumes axis is normalized\n\n        this.quaternion.setFromAxisAngle(axis, angle);\n\n    }\n\n    setRotationFromEuler(euler) {\n\n        this.quaternion.setFromEuler(euler, true);\n\n    }\n\n    setRotationFromMatrix(m) {\n\n        // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n        this.quaternion.setFromRotationMatrix(m);\n\n    }\n\n    setRotationFromQuaternion(q) {\n\n        // assumes q is normalized\n\n        this.quaternion.copy(q);\n\n    }\n\n    updateMatrix() {\n\n        this.matrix.compose(this.position, this.quaternion, this.scale);\n\n        this.matrixWorldNeedsUpdate = true;\n\n    }\n\n    rotateX(angle) {\n\n        let v1 = new Vector3(1, 0, 0);\n\n        this.rotateOnAxis(v1, angle);\n\n        v1 = null;\n\n        return this;\n\n\n    }\n\n    rotateY(angle) {\n\n        let v1 = new Vector3(0, 1, 0);\n\n        this.rotateOnAxis(v1, angle);\n\n        v1 = null;\n\n        return this;\n\n\n\n    }\n\n    rotateZ(angle) {\n\n        let v1 = new Vector3(0, 0, 1);\n\n        this.rotateOnAxis(v1, angle);\n\n        v1 = null;\n\n        return this;\n\n    }\n\n    rotateOnAxis(axis, angle) {\n\n        // rotate object on axis in object space\n        // axis is assumed to be normalized\n\n        let q1 = new Quaternion();\n\n        q1.setFromAxisAngle(axis, angle);\n\n        this.quaternion.multiply(q1);\n\n        q1 = null;\n\n        return this;\n    }\n\n    rotateOnWorldAxis(axis, angle) {\n\n        // rotate object on axis in world space\n        // axis is assumed to be normalized\n        // method assumes no rotated parent\n\n        let q1 = new Quaternion();\n\n        q1.setFromAxisAngle(axis, angle);\n\n        this.quaternion.premultiply(q1);\n\n        return this;\n\n\n    }\n\n    translateOnAxis(axis, distance) {\n\n        // translate object by distance along axis in object space\n        // axis is assumed to be normalized\n\n        let v1 = new Vector3();\n\n        v1.copy(axis).applyQuaternion(this.quaternion);\n\n        this.position.add(v1.multiplyScalar(distance));\n\n        v1 = null;\n\n        return this;\n\n    }\n\n    translateX(distance) {\n\n        let v1 = new Vector3(1, 0, 0);\n\n        this.translateOnAxis(v1, distance);\n\n        v1 = null\n\n        return this;\n\n\n    }\n\n    translateY(distance) {\n\n        let v1 = new Vector3(0, 1, 0);\n\n        this.translateOnAxis(v1, distance);\n\n        v1 = null\n\n        return this;\n\n    }\n\n    translateZ(distance) {\n\n        let v1 = new Vector3(0, 0, 1);\n        this.translateOnAxis(v1, distance);\n\n        v1 = null\n\n        return this;\n\n\n    }\n\n    localToWorld(vector) {\n        return vector.applyMatrix4(this.matrixWorld);\n    }\n\n    worldToLocal(vector) {\n\n        let m1 = new Matrix4();\n        return vector.applyMatrix4(m1.getInverse(this.matrixWorld));\n    }\n    getWorldPosition(target) {\n\n        if (target === undefined) {\n\n            console.warn('Object3D: .getWorldPosition() target is now required');\n            target = new Vector3();\n\n        }\n\n        this.updateMatrixWorld(true);\n\n        return target.setFromMatrixPosition(this.matrixWorld);\n\n    }\n\n    getWorldQuaternion(target) {\n\n        return getWorldQuaternion.call(this, target)\n\n    }\n\n    getWorldScale(target) {\n\n        return getWorldScale.call(this, target)\n\n    }\n    getWorldDirection(target) {\n        return getWorldDirection.call(this, target);\n\n    }\n\n    raycast() { }\n\n}\n\nObject3D.DefaultUp = new Vector3(0, 1, 0);\nObject3D.DefaultMatrixAutoUpdate = true;\n\n\nlet lookAt = (function () {\n\n    // This method does not support objects with rotated and/or translated parent(s)\n\n    let m1 = new Matrix4();\n    let vector = new Vector3();\n\n    return function lookAt(x, y, z) {\n\n        if (x.isVector3) {\n\n            vector.copy(x);\n\n        } else {\n\n            vector.set(x, y, z);\n\n        }\n\n        if (this.isCamera) {\n\n            m1.lookAt(this.position, vector, this.up);\n\n        } else {\n\n            m1.lookAt(vector, this.position, this.up);\n\n        }\n\n        this.quaternion.setFromRotationMatrix(m1);\n\n    };\n\n})()\n\n\nlet getWorldQuaternion = (function () {\n\n    var position = new Vector3();\n    var scale = new Vector3();\n\n    return function getWorldQuaternion(target) {\n\n        if (target === undefined) {\n\n            console.warn('Object3D: .getWorldQuaternion() target is now required');\n            target = new Quaternion();\n\n        }\n\n        this.updateMatrixWorld(true);\n\n        this.matrixWorld.decompose(position, target, scale);\n\n        return target;\n\n    };\n\n})();\n\n\nlet getWorldScale = (function () {\n\n    var position = new Vector3();\n    var quaternion = new Quaternion();\n\n    return function getWorldScale(target) {\n\n        if (target === undefined) {\n\n            console.warn('Object3D: .getWorldScale() target is now required');\n            target = new Vector3();\n\n        }\n\n        this.updateMatrixWorld(true);\n\n        this.matrixWorld.decompose(position, quaternion, target);\n\n        return target;\n\n    };\n\n})();\n\nlet getWorldDirection = (function () {\n\n    var quaternion = new Quaternion();\n\n    return function getWorldDirection(target) {\n\n        if (target === undefined) {\n\n            console.warn('Object3D: .getWorldDirection() target is now required');\n            target = new Vector3();\n\n        }\n\n        this.getWorldQuaternion(quaternion);\n\n        return target.set(0, 0, 1).applyQuaternion(quaternion);\n\n    };\n\n})();\n\nexport { Object3D };","import { Object3D } from '../core/Object3D'\n\n/**\n * @class 场景对象\n * @author bujue\n */\n\n\nclass Scene extends Object3D {\n    constructor() {\n        super();\n        this.background=null;\n        this.isScene = true;\n        this.autoUpdate = true; // checked by the renderer\n    }\n\n}\n\nexport { Scene };","\nimport { Object3D } from \"../core/Object3D\";\n\n/**\n * @class  分组\n * @description 主要是为了将部分对象做批量变换,同Sence,名称上更容易让读者理解\n * @author bujue\n */\n\nclass Group extends Object3D {\n    constructor() {\n        super();\n        this.type = 'Group';\n    }\n    \n    get isGroup(){\n        return true;\n    }\n}\n\nexport { Group };","import { Vector3 } from './Vector3';\n\n\nvar v = new Vector3();\nvar v1 = new Vector3();\nvar v2 = new Vector3();\nvar v3 = new Vector3();\n\nvar segCenter = new Vector3();\nvar segDir = new Vector3();\nvar diff = new Vector3();\n\nvar diff = new Vector3();\nvar edge1 = new Vector3();\nvar edge2 = new Vector3();\nvar normal = new Vector3();\n\nclass Ray {\n    constructor(origin, direction) {\n        this.origin = (origin !== undefined) ? origin : new Vector3();\n        this.direction = (direction !== undefined) ? direction : new Vector3();\n    }\n\n    set(origin, direction) {\n\n        this.origin.copy(origin);\n        this.direction.copy(direction);\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new this.constructor().copy(this);\n\n    }\n\n    copy(ray) {\n\n        this.origin.copy(ray.origin);\n        this.direction.copy(ray.direction);\n\n        return this;\n\n    }\n\n    at(t, optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n\n        return result.copy(this.direction).multiplyScalar(t).add(this.origin);\n\n    }\n\n    lookAt(v) {\n\n        this.direction.copy(v).sub(this.origin).normalize();\n\n        return this;\n\n    }\n\n    recast(t) {\n\n        this.origin.copy(this.at(t, v1));\n\n        return this;\n\n    }\n\n    closestPointToPoint(point, optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n        result.subVectors(point, this.origin);\n        var directionDistance = result.dot(this.direction);\n\n        if (directionDistance < 0) {\n\n            return result.copy(this.origin);\n\n        }\n\n        return result.copy(this.direction).multiplyScalar(directionDistance).add(this.origin);\n\n    }\n\n    distanceToPoint(point) {\n\n        return Math.sqrt(this.distanceSqToPoint(point));\n\n    }\n    distanceSqToPoint(point) {\n\n        var directionDistance = v2.subVectors(point, this.origin).dot(this.direction);\n\n        // point behind the ray\n\n        if (directionDistance < 0) {\n\n            return this.origin.distanceToSquared(point);\n\n        }\n\n        v2.copy(this.direction).multiplyScalar(directionDistance).add(this.origin);\n\n        return v2.distanceToSquared(point);\n\n    }\n\n    distanceSqToSegment(v0, v1, optionalPointOnRay, optionalPointOnSegment) {\n\n        // from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n        // It returns the min distance between the ray and the segment\n        // defined by v0 and v1\n        // It can also set two optional targets :\n        // - The closest point on the ray\n        // - The closest point on the segment\n\n        segCenter.copy(v0).add(v1).multiplyScalar(0.5);\n        segDir.copy(v1).sub(v0).normalize();\n        diff.copy(this.origin).sub(segCenter);\n\n        var segExtent = v0.distanceTo(v1) * 0.5;\n        var a01 = - this.direction.dot(segDir);\n        var b0 = diff.dot(this.direction);\n        var b1 = - diff.dot(segDir);\n        var c = diff.lengthSq();\n        var det = Math.abs(1 - a01 * a01);\n        var s0, s1, sqrDist, extDet;\n\n        if (det > 0) {\n\n            // The ray and segment are not parallel.\n\n            s0 = a01 * b1 - b0;\n            s1 = a01 * b0 - b1;\n            extDet = segExtent * det;\n\n            if (s0 >= 0) {\n\n                if (s1 >= - extDet) {\n\n                    if (s1 <= extDet) {\n\n                        // region 0\n                        // Minimum at interior points of ray and segment.\n\n                        var invDet = 1 / det;\n                        s0 *= invDet;\n                        s1 *= invDet;\n                        sqrDist = s0 * (s0 + a01 * s1 + 2 * b0) + s1 * (a01 * s0 + s1 + 2 * b1) + c;\n\n                    } else {\n\n                        // region 1\n\n                        s1 = segExtent;\n                        s0 = Math.max(0, - (a01 * s1 + b0));\n                        sqrDist = - s0 * s0 + s1 * (s1 + 2 * b1) + c;\n\n                    }\n\n                } else {\n\n                    // region 5\n\n                    s1 = - segExtent;\n                    s0 = Math.max(0, - (a01 * s1 + b0));\n                    sqrDist = - s0 * s0 + s1 * (s1 + 2 * b1) + c;\n\n                }\n\n            } else {\n\n                if (s1 <= - extDet) {\n\n                    // region 4\n\n                    s0 = Math.max(0, - (- a01 * segExtent + b0));\n                    s1 = (s0 > 0) ? - segExtent : Math.min(Math.max(- segExtent, - b1), segExtent);\n                    sqrDist = - s0 * s0 + s1 * (s1 + 2 * b1) + c;\n\n                } else if (s1 <= extDet) {\n\n                    // region 3\n\n                    s0 = 0;\n                    s1 = Math.min(Math.max(- segExtent, - b1), segExtent);\n                    sqrDist = s1 * (s1 + 2 * b1) + c;\n\n                } else {\n\n                    // region 2\n\n                    s0 = Math.max(0, - (a01 * segExtent + b0));\n                    s1 = (s0 > 0) ? segExtent : Math.min(Math.max(- segExtent, - b1), segExtent);\n                    sqrDist = - s0 * s0 + s1 * (s1 + 2 * b1) + c;\n\n                }\n\n            }\n\n        } else {\n\n            // Ray and segment are parallel.\n\n            s1 = (a01 > 0) ? - segExtent : segExtent;\n            s0 = Math.max(0, - (a01 * s1 + b0));\n            sqrDist = - s0 * s0 + s1 * (s1 + 2 * b1) + c;\n\n        }\n\n        if (optionalPointOnRay) {\n\n            optionalPointOnRay.copy(this.direction).multiplyScalar(s0).add(this.origin);\n\n        }\n\n        if (optionalPointOnSegment) {\n\n            optionalPointOnSegment.copy(segDir).multiplyScalar(s1).add(segCenter);\n\n        }\n\n        return sqrDist;\n\n    }\n\n    intersectSphere(sphere, optionalTarget) {\n\n        v3.subVectors(sphere.center, this.origin);\n        var tca = v3.dot(this.direction);\n        var d2 = v3.dot(v3) - tca * tca;\n        var radius2 = sphere.radius * sphere.radius;\n\n        if (d2 > radius2) return null;\n\n        var thc = Math.sqrt(radius2 - d2);\n\n        // t0 = first intersect point - entrance on front of sphere\n        var t0 = tca - thc;\n\n        // t1 = second intersect point - exit point on back of sphere\n        var t1 = tca + thc;\n\n        // test to see if both t0 and t1 are behind the ray - if so, return null\n        if (t0 < 0 && t1 < 0) return null;\n\n        // test to see if t0 is behind the ray:\n        // if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n        // in order to always return an intersect point that is in front of the ray.\n        if (t0 < 0) return this.at(t1, optionalTarget);\n\n        // else t0 is in front of the ray, so return the first collision point scaled by t0\n        return this.at(t0, optionalTarget);\n\n    }\n\n    intersectsSphere(sphere) {\n\n        return this.distanceToPoint(sphere.center) <= sphere.radius;\n\n    }\n\n    distanceToPlane(plane) {\n\n        var denominator = plane.normal.dot(this.direction);\n\n        if (denominator === 0) {\n\n            // line is coplanar, return origin\n            if (plane.distanceToPoint(this.origin) === 0) {\n\n                return 0;\n\n            }\n\n            // Null is preferable to undefined since undefined means.... it is undefined\n\n            return null;\n\n        }\n\n        var t = - (this.origin.dot(plane.normal) + plane.constant) / denominator;\n\n        // Return if the ray never intersects the plane\n\n        return t >= 0 ? t : null;\n\n    }\n\n    intersectPlane(plane, optionalTarget) {\n\n        var t = this.distanceToPlane(plane);\n\n        if (t === null) {\n\n            return null;\n\n        }\n\n        return this.at(t, optionalTarget);\n\n    }\n\n    intersectsPlane(plane) {\n\n        // check if the ray lies on the plane first\n\n        var distToPoint = plane.distanceToPoint(this.origin);\n\n        if (distToPoint === 0) {\n\n            return true;\n\n        }\n\n        var denominator = plane.normal.dot(this.direction);\n\n        if (denominator * distToPoint < 0) {\n\n            return true;\n\n        }\n\n        // ray origin is behind the plane (and is pointing behind it)\n\n        return false;\n\n    }\n\n    intersectBox(box, optionalTarget) {\n\n        var tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n        var invdirx = 1 / this.direction.x,\n            invdiry = 1 / this.direction.y,\n            invdirz = 1 / this.direction.z;\n\n        var origin = this.origin;\n\n        if (invdirx >= 0) {\n\n            tmin = (box.min.x - origin.x) * invdirx;\n            tmax = (box.max.x - origin.x) * invdirx;\n\n        } else {\n\n            tmin = (box.max.x - origin.x) * invdirx;\n            tmax = (box.min.x - origin.x) * invdirx;\n\n        }\n\n        if (invdiry >= 0) {\n\n            tymin = (box.min.y - origin.y) * invdiry;\n            tymax = (box.max.y - origin.y) * invdiry;\n\n        } else {\n\n            tymin = (box.max.y - origin.y) * invdiry;\n            tymax = (box.min.y - origin.y) * invdiry;\n\n        }\n\n        if ((tmin > tymax) || (tymin > tmax)) return null;\n\n        // These lines also handle the case where tmin or tmax is NaN\n        // (result of 0 * Infinity). x !== x returns true if x is NaN\n\n        if (tymin > tmin || tmin !== tmin) tmin = tymin;\n\n        if (tymax < tmax || tmax !== tmax) tmax = tymax;\n\n        if (invdirz >= 0) {\n\n            tzmin = (box.min.z - origin.z) * invdirz;\n            tzmax = (box.max.z - origin.z) * invdirz;\n\n        } else {\n\n            tzmin = (box.max.z - origin.z) * invdirz;\n            tzmax = (box.min.z - origin.z) * invdirz;\n\n        }\n\n        if ((tmin > tzmax) || (tzmin > tmax)) return null;\n\n        if (tzmin > tmin || tmin !== tmin) tmin = tzmin;\n\n        if (tzmax < tmax || tmax !== tmax) tmax = tzmax;\n\n        //return point closest to the ray (positive side)\n\n        if (tmax < 0) return null;\n\n        return this.at(tmin >= 0 ? tmin : tmax, optionalTarget);\n\n    }\n\n    intersectsBox(box) {\n\n        return this.intersectBox(box, v) !== null;\n\n    }\n\n\n\n    // Compute the offset origin, edges, and normal.\n    intersectTriangle(a, b, c, backfaceCulling, optionalTarget) {\n\n        // from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n        edge1.subVectors(b, a);\n        edge2.subVectors(c, a);\n        normal.crossVectors(edge1, edge2);\n\n        // Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n        // E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n        //   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n        //   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n        //   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n        var DdN = this.direction.dot(normal);\n        var sign;\n\n        if (DdN > 0) {\n\n            if (backfaceCulling) return null;\n            sign = 1;\n\n        } else if (DdN < 0) {\n\n            sign = - 1;\n            DdN = - DdN;\n\n        } else {\n\n            return null;\n\n        }\n\n        diff.subVectors(this.origin, a);\n        var DdQxE2 = sign * this.direction.dot(edge2.crossVectors(diff, edge2));\n\n        // b1 < 0, no intersection\n        if (DdQxE2 < 0) {\n\n            return null;\n\n        }\n\n        var DdE1xQ = sign * this.direction.dot(edge1.cross(diff));\n\n        // b2 < 0, no intersection\n        if (DdE1xQ < 0) {\n\n            return null;\n\n        }\n\n        // b1+b2 > 1, no intersection\n        if (DdQxE2 + DdE1xQ > DdN) {\n\n            return null;\n\n        }\n\n        // Line intersects triangle, check if ray does.\n        var QdN = - sign * diff.dot(normal);\n\n        // t < 0, no intersection\n        if (QdN < 0) {\n\n            return null;\n\n        }\n\n        // Ray intersects triangle.\n        return this.at(QdN / DdN, optionalTarget);\n\n    }\n\n    applyMatrix4(matrix4) {\n\n        this.origin.applyMatrix4(matrix4);\n        this.direction.transformDirection(matrix4);\n\n        return this;\n\n    }\n\n    equals(ray) {\n\n        return ray.origin.equals(this.origin) && ray.direction.equals(this.direction);\n\n    }\n}\n\nexport { Ray };","import { Vector3 } from './Vector3';\nimport { _Math } from './Math';\n\nvar startP = new Vector3();\nvar startEnd = new Vector3();\nclass Line3 {\n    constructor(start, end) {\n        this.start = (start !== undefined) ? start : new Vector3();\n        this.end = (end !== undefined) ? end : new Vector3();\n    }\n\n    set(start, end) {\n\n        this.start.copy(start);\n        this.end.copy(end);\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new this.constructor().copy(this);\n\n    }\n\n    copy(line) {\n\n        this.start.copy(line.start);\n        this.end.copy(line.end);\n\n        return this;\n\n    }\n\n    getCenter(optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n        return result.addVectors(this.start, this.end).multiplyScalar(0.5);\n\n    }\n\n    delta(optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n        return result.subVectors(this.end, this.start);\n\n    }\n\n    distanceSq() {\n\n        return this.start.distanceToSquared(this.end);\n\n    }\n\n    distance() {\n\n        return this.start.distanceTo(this.end);\n\n    }\n\n    at(t, optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n\n        return this.delta(result).multiplyScalar(t).add(this.start);\n\n    }\n\n    closestPointToPointParameter(point, clampToLine) {\n\n        startP.subVectors(point, this.start);\n        startEnd.subVectors(this.end, this.start);\n\n        var startEnd2 = startEnd.dot(startEnd);\n        var startEnd_startP = startEnd.dot(startP);\n\n        var t = startEnd_startP / startEnd2;\n\n        if (clampToLine) {\n\n            t = _Math.clamp(t, 0, 1);\n\n        }\n\n        return t;\n\n    }\n\n    closestPointToPoint(point, clampToLine, optionalTarget) {\n\n        var t = this.closestPointToPointParameter(point, clampToLine);\n\n        var result = optionalTarget || new Vector3();\n\n        return this.delta(result).multiplyScalar(t).add(this.start);\n\n    }\n\n    applyMatrix4(matrix) {\n\n        this.start.applyMatrix4(matrix);\n        this.end.applyMatrix4(matrix);\n\n        return this;\n\n    }\n\n    equals(line) {\n\n        return line.start.equals(this.start) && line.end.equals(this.end);\n\n    }\n}\n\nexport { Line3 };","import { Vector3 } from './Vector3';\nimport { Line3 } from './Line3';\nimport { Plane } from './Plane';\n\nvar v = new Vector3();\n\nvar v0 = new Vector3();\nvar v1 = new Vector3();\nvar v2 = new Vector3();\n\nvar v4 = new Vector3();\n\nvar v5 = new Vector3();\nvar v6 = new Vector3();\n\nvar plane = new Plane();\nvar edgeList = [new Line3(), new Line3(), new Line3()];\nvar projectedPoint = new Vector3();\nvar closestPoint = new Vector3();\n\n\nclass Triangle {\n    constructor(a, b, c) {\n        this.a = (a !== undefined) ? a : new Vector3();\n        this.b = (b !== undefined) ? b : new Vector3();\n        this.c = (c !== undefined) ? c : new Vector3();\n    }\n\n    static normal(a, b, c, optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n\n        result.subVectors(c, b);\n        v.subVectors(a, b);\n        result.cross(v);\n\n        var resultLengthSq = result.lengthSq();\n        if (resultLengthSq > 0) {\n\n            return result.multiplyScalar(1 / Math.sqrt(resultLengthSq));\n\n        }\n\n        return result.set(0, 0, 0);\n\n    }\n\n    static getNormal(a, b, c, target) {\n        return getNormal.call(this, a, b, c, target);\n    }\n\n    // static/instance method to calculate barycentric coordinates\n    // based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n    static barycoordFromPoint(point, a, b, c, optionalTarget) {\n\n        v0.subVectors(c, a);\n        v1.subVectors(b, a);\n        v2.subVectors(point, a);\n\n        var dot00 = v0.dot(v0);\n        var dot01 = v0.dot(v1);\n        var dot02 = v0.dot(v2);\n        var dot11 = v1.dot(v1);\n        var dot12 = v1.dot(v2);\n\n        var denom = (dot00 * dot11 - dot01 * dot01);\n\n        var result = optionalTarget || new Vector3();\n\n        // collinear or singular triangle\n        if (denom === 0) {\n\n            // arbitrary location outside of triangle?\n            // not sure if this is the best idea, maybe should be returning undefined\n            return result.set(- 2, - 1, - 1);\n\n        }\n\n        var invDenom = 1 / denom;\n        var u = (dot11 * dot02 - dot01 * dot12) * invDenom;\n        var v = (dot00 * dot12 - dot01 * dot02) * invDenom;\n\n        // barycentric coordinates must always sum to 1\n        return result.set(1 - u - v, v, u);\n\n    }\n\n    static containsPoint(point, a, b, c) {\n\n        var result = Triangle.barycoordFromPoint(point, a, b, c, v4);\n\n        return (result.x >= 0) && (result.y >= 0) && ((result.x + result.y) <= 1);\n\n    }\n\n    set(a, b, c) {\n\n        this.a.copy(a);\n        this.b.copy(b);\n        this.c.copy(c);\n\n        return this;\n\n    }\n\n    setFromPointsAndIndices(points, i0, i1, i2) {\n\n        this.a.copy(points[i0]);\n        this.b.copy(points[i1]);\n        this.c.copy(points[i2]);\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new this.constructor().copy(this);\n\n    }\n\n    copy(triangle) {\n\n        this.a.copy(triangle.a);\n        this.b.copy(triangle.b);\n        this.c.copy(triangle.c);\n\n        return this;\n\n    }\n\n    // static/instance method to calculate barycentric coordinates\n    // based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n    static getBarycoord(point, a, b, c, target) {\n        return getBarycoord.call(this, point, a, b, c, target)\n    }\n\n    area() {\n\n        v5.subVectors(this.c, this.b);\n        v6.subVectors(this.a, this.b);\n\n        return v5.cross(v6).length() * 0.5;\n\n    }\n\n    midpoint(optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n        return result.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3);\n\n    }\n\n    normal(optionalTarget) {\n\n        return Triangle.normal(this.a, this.b, this.c, optionalTarget);\n\n    }\n\n    plane(optionalTarget) {\n\n        var result = optionalTarget || new Plane();\n\n        return result.setFromCoplanarPoints(this.a, this.b, this.c);\n\n    }\n\n    barycoordFromPoint(point, optionalTarget) {\n\n        return Triangle.barycoordFromPoint(point, this.a, this.b, this.c, optionalTarget);\n\n    }\n\n    containsPoint(point) {\n\n        return Triangle.containsPoint(point, this.a, this.b, this.c);\n\n    }\n\n    closestPointToPoint(point, optionalTarget) {\n\n        var result = optionalTarget || new Vector3();\n        var minDistance = Infinity;\n\n        // project the point onto the plane of the triangle\n\n        plane.setFromCoplanarPoints(this.a, this.b, this.c);\n        plane.projectPoint(point, projectedPoint);\n\n        // check if the projection lies within the triangle\n\n        if (this.containsPoint(projectedPoint) === true) {\n\n            // if so, this is the closest point\n\n            result.copy(projectedPoint);\n\n        } else {\n\n            // if not, the point falls outside the triangle. the result is the closest point to the triangle's edges or vertices\n\n            edgeList[0].set(this.a, this.b);\n            edgeList[1].set(this.b, this.c);\n            edgeList[2].set(this.c, this.a);\n\n            for (var i = 0; i < edgeList.length; i++) {\n\n                edgeList[i].closestPointToPoint(projectedPoint, true, closestPoint);\n\n                var distance = projectedPoint.distanceToSquared(closestPoint);\n\n                if (distance < minDistance) {\n\n                    minDistance = distance;\n\n                    result.copy(closestPoint);\n\n                }\n\n            }\n\n        }\n\n        return result;\n\n    }\n\n    equals(triangle) {\n\n        return triangle.a.equals(this.a) && triangle.b.equals(this.b) && triangle.c.equals(this.c);\n\n    }\n    static getUV(point, p1, p2, p3, uv1, uv2, uv3, target) {\n        return getUV.call(this, point, p1, p2, p3, uv1, uv2, uv3, target)\n    }\n\n}\n\nlet getUV = (function () {\n\n    var barycoord = new Vector3();\n\n    return function getUV(point, p1, p2, p3, uv1, uv2, uv3, target) {\n\n        this.getBarycoord(point, p1, p2, p3, barycoord);\n\n        target.set(0, 0);\n        target.addScaledVector(uv1, barycoord.x);\n        target.addScaledVector(uv2, barycoord.y);\n        target.addScaledVector(uv3, barycoord.z);\n\n        return target;\n\n    };\n\n})();\nlet getBarycoord = (function () {\n\n    var v0 = new Vector3();\n    var v1 = new Vector3();\n    var v2 = new Vector3();\n\n    return function getBarycoord(point, a, b, c, target) {\n\n        v0.subVectors(c, a);\n        v1.subVectors(b, a);\n        v2.subVectors(point, a);\n\n        var dot00 = v0.dot(v0);\n        var dot01 = v0.dot(v1);\n        var dot02 = v0.dot(v2);\n        var dot11 = v1.dot(v1);\n        var dot12 = v1.dot(v2);\n\n        var denom = (dot00 * dot11 - dot01 * dot01);\n\n        if (target === undefined) {\n\n            console.warn('Triangle: .getBarycoord() target is now required');\n            target = new Vector3();\n\n        }\n\n        // collinear or singular triangle\n        if (denom === 0) {\n\n            // arbitrary location outside of triangle?\n            // not sure if this is the best idea, maybe should be returning undefined\n            return target.set(- 2, - 1, - 1);\n\n        }\n\n        var invDenom = 1 / denom;\n        var u = (dot11 * dot02 - dot01 * dot12) * invDenom;\n        var v = (dot00 * dot12 - dot01 * dot02) * invDenom;\n\n        // barycentric coordinates must always sum to 1\n        return target.set(1 - u - v, v, u);\n\n    };\n\n}());\n\n\nlet getNormal = (function () {\n\n    var v0 = new Vector3();\n\n    return function getNormal(a, b, c, target) {\n\n        if (target === undefined) {\n\n            console.warn('THREE.Triangle: .getNormal() target is now required');\n            target = new Vector3();\n\n        }\n\n        target.subVectors(c, b);\n        v0.subVectors(a, b);\n        target.cross(v0);\n\n        var targetLengthSq = target.lengthSq();\n        if (targetLengthSq > 0) {\n\n            return target.multiplyScalar(1 / Math.sqrt(targetLengthSq));\n\n        }\n\n        return target.set(0, 0, 0);\n\n    };\n\n}())\n\nexport { Triangle }","import { Color } from '../maths/Color.js';\nimport { Vector3 } from '../maths/Vector3.js';\n\nclass Face3 {\n    constructor(a, b, c, normal, color, materialIndex) {\n        this.a = a;\n        this.b = b;\n        this.c = c;\n\n        this.normal = (normal && normal.isVector3) ? normal : new Vector3();\n        this.vertexNormals = Array.isArray(normal) ? normal : [];\n\n        this.color = (color && color.isColor) ? color : new Color();\n        this.vertexColors = Array.isArray(color) ? color : [];\n\n        this.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n    }\n    clone() {\n\n        return new this.constructor().copy(this);\n\n    }\n\n    copy(source) {\n\n        this.a = source.a;\n        this.b = source.b;\n        this.c = source.c;\n\n        this.normal.copy(source.normal);\n        this.color.copy(source.color);\n\n        this.materialIndex = source.materialIndex;\n\n        for (var i = 0, il = source.vertexNormals.length; i < il; i++) {\n\n            this.vertexNormals[i] = source.vertexNormals[i].clone();\n\n        }\n\n        for (var i = 0, il = source.vertexColors.length; i < il; i++) {\n\n            this.vertexColors[i] = source.vertexColors[i].clone();\n\n        }\n\n        return this;\n\n    }\n}\n\nexport { Face3 };","import { Events } from '../core/Events';\nimport { NoColors, LessEqualDepth, FrontSide, NormalBlending, SrcAlphaFactor, OneMinusSrcAlphaFactor, AddEquation } from '../constants';\n/**\n * @class  材质基类\n * @author bujue\n */\nlet materialId = 0;\n\nclass Material extends Events {\n    constructor() {\n        super();\n\n        this.type = 'Material';\n        Object.defineProperty(this, 'id', { value: materialId++ });\n\n        this.opacity = 1;\n        this.transparent = false;\n\n        this.lights = true;\n        this.depthFunc = LessEqualDepth;\n        this.depthTest = true;\n        this.depthWrite = true;\n\n        this.blending = NormalBlending;\n        this.side = FrontSide;\n        this.vertexColors = NoColors;\n\n        this.visible = true;\n        this.needsUpdate = true;\n\n        this.colorWrite = true;\n        this.precision = null;\n\n        this.polygonOffset = false;\n        this.polygonOffsetFactor = 0;\n        this.polygonOffsetUnits = 0;\n\n        this.blendSrc = SrcAlphaFactor;\n        this.blendDst = OneMinusSrcAlphaFactor;\n        this.blendEquation = AddEquation;\n        this.blendSrcAlpha = null;\n        this.blendDstAlpha = null;\n        this.blendEquationAlpha = null;\n\n        this.premultipliedAlpha = false;\n\n        this.userData = {};\n\n        this.onBeforeCompile = function () { };\n    }\n\n\n\n    setValues(values) {\n\n        if (values === undefined) return;\n\n        for (var key in values) {\n\n            var newValue = values[key];\n\n            if (newValue === undefined) {\n\n                console.warn(\"Material: '\" + key + \"' parameter is undefined.\");\n                continue;\n\n            }\n\n            // for backward compatability if shading is set in the constructor\n            // if (key === 'shading') {\n\n            //     console.warn(this.type + ': .shading has been removed. Use the boolean .flatShading instead.');\n            //     this.flatShading = (newValue === FlatShading) ? true : false;\n            //     continue;\n\n            // }\n\n            var currentValue = this[key];\n\n            if (currentValue === undefined) {\n\n                console.warn(this.type + \": '\" + key + \"' is not a property of this material.\");\n                continue;\n\n            }\n\n            if (currentValue && currentValue.isColor) {\n\n                currentValue.set(newValue);\n\n            } else if ((currentValue && currentValue.isVector3) && (newValue && newValue.isVector3)) {\n\n                currentValue.copy(newValue);\n\n            } else if (key === 'overdraw') {\n\n                // ensure overdraw is backwards-compatible with legacy boolean type\n                this[key] = Number(newValue);\n\n            } else {\n\n                this[key] = newValue;\n\n            }\n\n        }\n\n    }\n\n    clone() {\n\n        return new this.constructor().copy(this);\n\n    }\n\n    copy(source) {\n\n        this.name = source.name;\n\n        this.lights = source.lights;\n\n        this.blending = source.blending;\n        this.side = source.side;\n        this.flatShading = source.flatShading;\n        this.vertexColors = source.vertexColors;\n\n        this.opacity = source.opacity;\n        this.transparent = source.transparent;\n\n        this.blendSrc = source.blendSrc;\n        this.blendDst = source.blendDst;\n        this.blendEquation = source.blendEquation;\n        this.blendSrcAlpha = source.blendSrcAlpha;\n        this.blendDstAlpha = source.blendDstAlpha;\n        this.blendEquationAlpha = source.blendEquationAlpha;\n\n        this.depthFunc = source.depthFunc;\n        this.depthTest = source.depthTest;\n        this.depthWrite = source.depthWrite;\n\n        this.colorWrite = source.colorWrite;\n\n        this.precision = source.precision;\n\n        this.polygonOffset = source.polygonOffset;\n        this.polygonOffsetFactor = source.polygonOffsetFactor;\n        this.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\n        this.alphaTest = source.alphaTest;\n        this.premultipliedAlpha = source.premultipliedAlpha;\n\n        this.visible = source.visible;\n\n        return this;\n\n    }\n    get isMaterial() {\n        return true;\n    }\n\n    dispose() {\n\n        this.fire({ type: 'dispose' });\n\n    }\n}\n\nexport { Material };\n\n","import { Material } from \"./Material\";\nimport { Color } from \"..\";\n\nclass MeshBasicMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.color = new Color(0xffffff); // emissive\n        this.map = null;\n\n        this.type = 'MeshBasicMaterial';\n        this.wireframe = false;\n        this.wireframeLinewidth = 1;\n\n        //不接受灯光\n        this.lights = false;\n\n        this.setValues(parameters);\n    }\n\n    get isMeshBasicMaterial() {\n        return true;\n    }\n\n    copy(source) {\n        super.copy(source);\n\n        this.color.copy(source.color);\n        this.map = source.map;\n        this.wireframe = source.wireframe;\n\n        return this;\n    }\n}\n\nexport { MeshBasicMaterial };","import { Vector3 } from '../maths/Vector3.js';\nimport { Vector2 } from '../maths/Vector2.js';\nimport { Sphere } from '../maths/Sphere.js';\nimport { Ray } from '../maths/Ray.js';\nimport { Matrix4 } from '../maths/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Triangle } from '../maths/Triangle.js';\nimport { Face3 } from '../core/Face3.js';\nimport { DoubleSide, BackSide, TrianglesDrawMode } from '../constants.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\n/**\n * @class Mesh 渲染网格对象\n * @description 渲染的网格对象,包括geometry material\n * @author bujue\n */\n\nclass Mesh extends Object3D {\n    constructor(geometry, material) {\n        super();\n\n        this.geometry = geometry;\n        this.material = material;\n\n        this.drawMode = TrianglesDrawMode\n\n    }\n\n    get isMesh(){\n        return true;\n    }\n\n    setDrawMode(value) {\n\n        this.drawMode = value;\n\n    }\n\n    raycast(raycaster, intersects) {\n        raycast.call(this, raycaster, intersects);\n    }\n\n\n}\n\nlet raycast = (function () {\n\n    var inverseMatrix = new Matrix4();\n    var ray = new Ray();\n    var sphere = new Sphere();\n\n    var vA = new Vector3();\n    var vB = new Vector3();\n    var vC = new Vector3();\n\n    var tempA = new Vector3();\n    var tempB = new Vector3();\n    var tempC = new Vector3();\n\n    var uvA = new Vector2();\n    var uvB = new Vector2();\n    var uvC = new Vector2();\n\n    var barycoord = new Vector3();\n\n    var intersectionPoint = new Vector3();\n    var intersectionPointWorld = new Vector3();\n\n    function uvIntersection(point, p1, p2, p3, uv1, uv2, uv3) {\n\n        Triangle.getBarycoord(point, p1, p2, p3, barycoord);\n\n        uv1.multiplyScalar(barycoord.x);\n        uv2.multiplyScalar(barycoord.y);\n        uv3.multiplyScalar(barycoord.z);\n\n        uv1.add(uv2).add(uv3);\n\n        return uv1.clone();\n\n    }\n\n    function checkIntersection(object, material, raycaster, ray, pA, pB, pC, point) {\n\n        var intersect;\n\n        if (material.side === BackSide) {\n\n            intersect = ray.intersectTriangle(pC, pB, pA, true, point);\n\n        } else {\n\n            intersect = ray.intersectTriangle(pA, pB, pC, material.side !== DoubleSide, point);\n\n        }\n\n        if (intersect === null) return null;\n\n        intersectionPointWorld.copy(point);\n        intersectionPointWorld.applyMatrix4(object.matrixWorld);\n\n        var distance = raycaster.ray.origin.distanceTo(intersectionPointWorld);\n\n        if (distance < raycaster.near || distance > raycaster.far) return null;\n\n        return {\n            distance: distance,\n            point: intersectionPointWorld.clone(),\n            object: object\n        };\n\n    }\n\n    function checkBufferGeometryIntersection(object, raycaster, ray, position, uv, a, b, c) {\n\n        vA.fromBufferAttribute(position, a);\n        vB.fromBufferAttribute(position, b);\n        vC.fromBufferAttribute(position, c);\n\n        var intersection = checkIntersection(object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint);\n\n        if (intersection) {\n\n            if (uv) {\n\n                uvA.fromBufferAttribute(uv, a);\n                uvB.fromBufferAttribute(uv, b);\n                uvC.fromBufferAttribute(uv, c);\n\n                intersection.uv = uvIntersection(intersectionPoint, vA, vB, vC, uvA, uvB, uvC);\n\n            }\n\n            var face = new Face3(a, b, c);\n            Triangle.getNormal(vA, vB, vC, face.normal);\n\n            intersection.face = face;\n\n        }\n\n        return intersection;\n\n    }\n\n    return function raycast(raycaster, intersects) {\n\n        var geometry = this.geometry;\n        var material = this.material;\n        var matrixWorld = this.matrixWorld;\n\n        if (material === undefined) return;\n\n        // Checking boundingSphere distance to ray\n\n        if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n        sphere.copy(geometry.boundingSphere);\n        sphere.applyMatrix4(matrixWorld);\n\n        if (raycaster.ray.intersectsSphere(sphere) === false) return;\n\n        //\n\n        inverseMatrix.getInverse(matrixWorld);\n        ray.copy(raycaster.ray).applyMatrix4(inverseMatrix);\n\n        // Check boundingBox before continuing\n\n        if (geometry.boundingBox !== null) {\n\n            if (ray.intersectsBox(geometry.boundingBox) === false) return;\n\n        }\n\n        var intersection;\n\n        if (geometry.isBufferGeometry) {\n\n            var a, b, c;\n            var index = geometry.index;\n            var position = geometry.attributes.position;\n            var uv = geometry.attributes.uv;\n            var i, l;\n\n            if (index !== null) {\n\n                // indexed buffer geometry\n\n                for (i = 0, l = index.count; i < l; i += 3) {\n\n                    a = index.getX(i);\n                    b = index.getX(i + 1);\n                    c = index.getX(i + 2);\n\n                    intersection = checkBufferGeometryIntersection(this, raycaster, ray, position, uv, a, b, c);\n\n                    if (intersection) {\n\n                        intersection.faceIndex = Math.floor(i / 3); // triangle number in indexed buffer semantics\n                        intersects.push(intersection);\n\n                    }\n\n                }\n\n            } else if (position !== undefined) {\n\n                // non-indexed buffer geometry\n\n                for (i = 0, l = position.count; i < l; i += 3) {\n\n                    a = i;\n                    b = i + 1;\n                    c = i + 2;\n\n                    intersection = checkBufferGeometryIntersection(this, raycaster, ray, position, uv, a, b, c);\n\n                    if (intersection) {\n\n                        intersection.faceIndex = Math.floor(i / 3); // triangle number in non-indexed buffer semantics\n                        intersects.push(intersection);\n\n                    }\n\n                }\n\n            }\n\n        } else if (geometry.isGeometry) {\n\n            var fvA, fvB, fvC;\n            var isMultiMaterial = Array.isArray(material);\n\n            var vertices = geometry.vertices;\n            var faces = geometry.faces;\n            var uvs;\n\n            var faceVertexUvs = geometry.faceVertexUvs[0];\n            if (faceVertexUvs.length > 0) uvs = faceVertexUvs;\n\n            for (var f = 0, fl = faces.length; f < fl; f++) {\n\n                var face = faces[f];\n                var faceMaterial = isMultiMaterial ? material[face.materialIndex] : material;\n\n                if (faceMaterial === undefined) continue;\n\n                fvA = vertices[face.a];\n                fvB = vertices[face.b];\n                fvC = vertices[face.c];\n\n                if (faceMaterial.morphTargets === true) {\n\n                    var morphTargets = geometry.morphTargets;\n                    var morphInfluences = this.morphTargetInfluences;\n\n                    vA.set(0, 0, 0);\n                    vB.set(0, 0, 0);\n                    vC.set(0, 0, 0);\n\n                    for (var t = 0, tl = morphTargets.length; t < tl; t++) {\n\n                        var influence = morphInfluences[t];\n\n                        if (influence === 0) continue;\n\n                        var targets = morphTargets[t].vertices;\n\n                        vA.addScaledVector(tempA.subVectors(targets[face.a], fvA), influence);\n                        vB.addScaledVector(tempB.subVectors(targets[face.b], fvB), influence);\n                        vC.addScaledVector(tempC.subVectors(targets[face.c], fvC), influence);\n\n                    }\n\n                    vA.add(fvA);\n                    vB.add(fvB);\n                    vC.add(fvC);\n\n                    fvA = vA;\n                    fvB = vB;\n                    fvC = vC;\n\n                }\n\n                intersection = checkIntersection(this, faceMaterial, raycaster, ray, fvA, fvB, fvC, intersectionPoint);\n\n                if (intersection) {\n\n                    if (uvs && uvs[f]) {\n\n                        var uvs_f = uvs[f];\n                        uvA.copy(uvs_f[0]);\n                        uvB.copy(uvs_f[1]);\n                        uvC.copy(uvs_f[2]);\n\n                        intersection.uv = uvIntersection(intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC);\n\n                    }\n\n                    intersection.face = face;\n                    intersection.faceIndex = f;\n                    intersects.push(intersection);\n\n                }\n\n            }\n\n        }\n\n    };\n\n}())\n\nexport { Mesh };","import { Material } from \"./Material\";\nimport { Color } from \"../maths/Color\";\n\n\nclass LineBasicMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = 'LineBasicMaterial';\n        this.color = new Color(0xffffff);\n        this.linewidth = 1;\n\n        //todo 暂不需要\n        this.lights = false;\n\n\n        this.setValues(parameters);\n    }\n    \n    get isLineBasicMaterial() {\n        return true;\n    }\n\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.linewidth = source.linewidth;\n\n        return this;\n\n    }\n}\n\nexport { LineBasicMaterial };","import { Sphere } from '../maths/Sphere.js';\nimport { Ray } from '../maths/Ray.js';\nimport { Matrix4 } from '../maths/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../maths/Vector3.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\nimport { LinesMode } from '../constants';\n\n\n/**\n * @class  线条\n * @description 线条对象\n * @author bujue\n */\n\nclass Line extends Object3D {\n    constructor(geometry, material) {\n        super();\n        this.type = 'Line';\n\n        this.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n        this.material = material !== undefined ? material : new LineBasicMaterial({ color: Math.random() * 0xffffff });\n        this.drawMode = LinesMode;\n\n        if (this.material.isLineDashedMaterial) {\n            this.computeLineDistances();\n        }\n\n    }\n\n    get isLine(){\n        return true;\n    }\n\n    setDrawMode(value) {\n        this.drawMode = value;\n    }\n\n    computeLineDistances() {\n        computeLineDistances.call(this);\n    }\n\n    raycast(raycaster, intersects) {\n        raycast.call(this, raycaster, intersects)\n    }\n\n}\n\nlet computeLineDistances = (function () {\n\n    var start = new Vector3();\n    var end = new Vector3();\n\n    return function computeLineDistances() {\n\n        var geometry = this.geometry;\n\n        if (geometry.isBufferGeometry) {\n\n            // we assume non-indexed geometry\n\n            if (geometry.index === null) {\n\n                var positionAttribute = geometry.attributes.position;\n                var lineDistances = [];\n\n                for (var i = 0, l = positionAttribute.count; i < l; i += 2) {\n\n                    start.fromBufferAttribute(positionAttribute, i);\n                    end.fromBufferAttribute(positionAttribute, i + 1);\n\n                    lineDistances[i] = (i === 0) ? 0 : lineDistances[i - 1];\n                    lineDistances[i + 1] = lineDistances[i] + start.distanceTo(end);\n\n                }\n\n                geometry.addAttribute('lineDistance', new Float32BufferAttribute(lineDistances, 1));\n\n            } \n\n        } else if (geometry.isGeometry) {\n\n            var vertices = geometry.vertices;\n            var lineDistances = geometry.lineDistances;\n\n            for (var i = 0, l = vertices.length; i < l; i += 2) {\n\n                start.copy(vertices[i]);\n                end.copy(vertices[i + 1]);\n\n                lineDistances[i] = (i === 0) ? 0 : lineDistances[i - 1];\n                lineDistances[i + 1] = lineDistances[i] + start.distanceTo(end);\n\n            }\n\n\n        }\n\n        return this;\n\n    };\n\n})()\n\n\nlet raycast = (function () {\n\n    var inverseMatrix = new Matrix4();\n    var ray = new Ray();\n    var sphere = new Sphere();\n\n    return function raycast(raycaster, intersects) {\n\n        var precision = raycaster.linePrecision;\n        var precisionSq = precision * precision;\n\n        var geometry = this.geometry;\n        var matrixWorld = this.matrixWorld;\n\n        // Checking boundingSphere distance to ray\n\n        if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n        sphere.copy(geometry.boundingSphere);\n        sphere.applyMatrix4(matrixWorld);\n\n        if (raycaster.ray.intersectsSphere(sphere) === false) return;\n\n        //\n\n        inverseMatrix.getInverse(matrixWorld);\n        ray.copy(raycaster.ray).applyMatrix4(inverseMatrix);\n\n        var vStart = new Vector3();\n        var vEnd = new Vector3();\n        var interSegment = new Vector3();\n        var interRay = new Vector3();\n        var step =  1;\n\n        if (geometry.isBufferGeometry) {\n\n            var index = geometry.index;\n            var attributes = geometry.attributes;\n            var positions = attributes.position.array;\n\n            if (index !== null) {\n\n                var indices = index.array;\n\n                for (var i = 0, l = indices.length - 1; i < l; i += step) {\n\n                    var a = indices[i];\n                    var b = indices[i + 1];\n\n                    vStart.fromArray(positions, a * 3);\n                    vEnd.fromArray(positions, b * 3);\n\n                    var distSq = ray.distanceSqToSegment(vStart, vEnd, interRay, interSegment);\n\n                    if (distSq > precisionSq) continue;\n\n                    interRay.applyMatrix4(this.matrixWorld); //Move back to world space for distance calculation\n\n                    var distance = raycaster.ray.origin.distanceTo(interRay);\n\n                    if (distance < raycaster.near || distance > raycaster.far) continue;\n\n                    intersects.push({\n\n                        distance: distance,\n                        // What do we want? intersection point on the ray or on the segment??\n                        // point: raycaster.ray.at( distance ),\n                        point: interSegment.clone().applyMatrix4(this.matrixWorld),\n                        index: i,\n                        face: null,\n                        faceIndex: null,\n                        object: this\n\n                    });\n\n                }\n\n            } else {\n\n                for (var i = 0, l = positions.length / 3 - 1; i < l; i += step) {\n\n                    vStart.fromArray(positions, 3 * i);\n                    vEnd.fromArray(positions, 3 * i + 3);\n\n                    var distSq = ray.distanceSqToSegment(vStart, vEnd, interRay, interSegment);\n\n                    if (distSq > precisionSq) continue;\n\n                    interRay.applyMatrix4(this.matrixWorld); //Move back to world space for distance calculation\n\n                    var distance = raycaster.ray.origin.distanceTo(interRay);\n\n                    if (distance < raycaster.near || distance > raycaster.far) continue;\n\n                    intersects.push({\n\n                        distance: distance,\n                        // What do we want? intersection point on the ray or on the segment??\n                        // point: raycaster.ray.at( distance ),\n                        point: interSegment.clone().applyMatrix4(this.matrixWorld),\n                        index: i,\n                        face: null,\n                        faceIndex: null,\n                        object: this\n\n                    });\n\n                }\n\n            }\n\n        } else if (geometry.isGeometry) {\n\n            var vertices = geometry.vertices;\n            var nbVertices = vertices.length;\n\n            for (var i = 0; i < nbVertices - 1; i += step) {\n\n                var distSq = ray.distanceSqToSegment(vertices[i], vertices[i + 1], interRay, interSegment);\n\n                if (distSq > precisionSq) continue;\n\n                interRay.applyMatrix4(this.matrixWorld); //Move back to world space for distance calculation\n\n                var distance = raycaster.ray.origin.distanceTo(interRay);\n\n                if (distance < raycaster.near || distance > raycaster.far) continue;\n\n                intersects.push({\n\n                    distance: distance,\n                    // What do we want? intersection point on the ray or on the segment??\n                    // point: raycaster.ray.at( distance ),\n                    point: interSegment.clone().applyMatrix4(this.matrixWorld),\n                    index: i,\n                    face: null,\n                    faceIndex: null,\n                    object: this\n\n                });\n\n            }\n\n        }\n\n    };\n\n}())\n\nexport { Line };","import { BufferGeometry } from './BufferGeometry';\n\nclass InstancedBufferGeometry extends BufferGeometry {\n    constructor() {\n\n        super()\n\n        this.type = 'InstancedBufferGeometry';\n        this.maxInstancedCount = undefined;\n        this.isInstancedBufferGeometry = true;\n\n    }\n\n    copy(source) {\n\n        super.copy(source);\n\n        this.maxInstancedCount = source.maxInstancedCount;\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new this.coFnstructor().copy(this);\n\n    }\n}\n\n\n\nexport { InstancedBufferGeometry };","\nclass InterleavedBuffer {\n    constructor(array, stride) {\n\n        this.array = array;\n        this.stride = stride;\n        this.count = array !== undefined ? array.length / stride : 0;\n\n        this.dynamic = false;\n        this.updateRange = { offset: 0, count: - 1 };\n\n        this.version = 0;\n\n        this.isInterleavedBuffer = true;\n\n    }\n    set needsUpdate(value) {\n        if (value === true) this.version++;\n    }\n\n    onUploadCallback() { }\n\n    setArray(array) {\n\n        if (Array.isArray(array)) {\n\n            throw new TypeError('BufferAttribute: array should be a Typed Array.');\n\n        }\n\n        this.count = array !== undefined ? array.length / this.stride : 0;\n        this.array = array;\n\n        return this;\n\n    }\n\n    setDynamic(value) {\n\n        this.dynamic = value;\n\n        return this;\n\n    }\n\n    copy(source) {\n\n        this.array = new source.array.constructor(source.array);\n        this.count = source.count;\n        this.stride = source.stride;\n        this.dynamic = source.dynamic;\n\n        return this;\n\n    }\n\n    copyAt(index1, attribute, index2) {\n\n        index1 *= this.stride;\n        index2 *= attribute.stride;\n\n        for (var i = 0, l = this.stride; i < l; i++) {\n\n            this.array[index1 + i] = attribute.array[index2 + i];\n\n        }\n\n        return this;\n\n    }\n\n    set(value, offset) {\n\n        if (offset === undefined) offset = 0;\n\n        this.array.set(value, offset);\n\n        return this;\n\n    }\n\n    clone() {\n\n        return new this.constructor().copy(this);\n\n    }\n\n    onUpload(callback) {\n\n        this.onUploadCallback = callback;\n\n        return this;\n\n    }\n\n\n}\n\n\n\n\n\n\nexport { InterleavedBuffer };","import { InterleavedBuffer } from './InterleavedBuffer.js';\n\n\nclass InstancedInterleavedBuffer extends InterleavedBuffer {\n    constructor(array, stride, meshPerAttribute) {\n\n        super(array, stride);\n\n        this.meshPerAttribute = meshPerAttribute || 1;\n        this.isInstancedInterleavedBuffer = true;\n\n    }\n\n    copy(source) {\n\n        super.copy(source);\n\n        this.meshPerAttribute = source.meshPerAttribute;\n\n        return this;\n\n    }\n}\n\n\n\nexport { InstancedInterleavedBuffer };","class InterleavedBufferAttribute {\n    constructor(interleavedBuffer, itemSize, offset, normalized) {\n\n        this.data = interleavedBuffer;\n        this.itemSize = itemSize;\n        this.offset = offset;\n\n        this.normalized = normalized === true;\n\n        this.isInterleavedBufferAttribute = true;\n\n    }\n    get count() {\n        return this.data.count;\n    }\n\n    get array() {\n        return this.data.array;\n    }\n\n    setX(index, x) {\n\n        this.data.array[index * this.data.stride + this.offset] = x;\n\n        return this;\n\n    }\n\n    setY(index, y) {\n\n        this.data.array[index * this.data.stride + this.offset + 1] = y;\n\n        return this;\n\n    }\n\n    setZ(index, z) {\n\n        this.data.array[index * this.data.stride + this.offset + 2] = z;\n\n        return this;\n\n    }\n\n    setW(index, w) {\n\n        this.data.array[index * this.data.stride + this.offset + 3] = w;\n\n        return this;\n\n    }\n\n    getX(index) {\n\n        return this.data.array[index * this.data.stride + this.offset];\n\n    }\n\n    getY(index) {\n\n        return this.data.array[index * this.data.stride + this.offset + 1];\n\n    }\n\n    getZ(index) {\n\n        return this.data.array[index * this.data.stride + this.offset + 2];\n\n    }\n\n    getW(index) {\n\n        return this.data.array[index * this.data.stride + this.offset + 3];\n\n    }\n\n    setXY(index, x, y) {\n\n        this.setX(index, x);\n        this.setY(index, y);\n\n        return this;\n\n    }\n\n    setXYZ(index, x, y, z) {\n\n        this.setX(index, x);\n        this.setY(index, y);\n        this.setZ(index, z);\n\n        return this;\n\n    }\n\n    setXYZW(index, x, y, z, w) {\n\n        this.setX(index, x);\n        this.setY(index, y);\n        this.setZ(index, z);\n        this.setW(index, w);\n\n        return this;\n\n    }\n\n}\n\n\nexport { InterleavedBufferAttribute };","import { InstancedBufferGeometry } from '../core/InstancedBufferGeometry';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\nimport { InstancedInterleavedBuffer } from '../core/InstancedInterleavedBuffer';\nimport { InterleavedBufferAttribute } from '../core/InterleavedBufferAttribute';\nimport { Box3 } from '../maths/Box3';\nimport { Vector3 } from '../maths/Vector3';\nimport { Sphere } from '../maths/Sphere';\n\nclass LineSegmentsGeometry extends InstancedBufferGeometry {\n    constructor() {\n        super();\n        this.type = 'LineSegmentsGeometry';\n\n        let positions = [- 1, 2, 0, 1, 2, 0, - 1, 1, 0, 1, 1, 0, - 1, 0, 0, 1, 0, 0, - 1, - 1, 0, 1, - 1, 0];\n        let uvs = [- 1, 2, 1, 2, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 2, 1, - 2];\n        let index = [0, 2, 1, 2, 3, 1, 2, 4, 3, 4, 5, 3, 4, 6, 5, 6, 7, 5];\n\n        this.setIndex(index);\n        this.addAttribute('position', new Float32BufferAttribute(positions, 3));\n        this.addAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n        this.isLineSegmentsGeometry = true;\n    }\n\n    applyMatrix(matrix) {\n\n        let start = this.attributes.instanceStart;\n        let end = this.attributes.instanceEnd;\n\n        if (start !== undefined) {\n\n            matrix.applyToBufferAttribute(start);\n\n            matrix.applyToBufferAttribute(end);\n\n            start.data.needsUpdate = true;\n\n        }\n\n        if (this.boundingBox !== null) {\n\n            this.computeBoundingBox();\n\n        }\n\n        if (this.boundingSphere !== null) {\n\n            this.computeBoundingSphere();\n\n        }\n\n        return this;\n\n    }\n\n    setPositions(array) {\n\n        let instanceBuffer = getTypeArray(array); // xyz, xyz\n\n        this.addAttribute('instanceStart', new InterleavedBufferAttribute(instanceBuffer, 3, 0)); // xyz\n        this.addAttribute('instanceEnd', new InterleavedBufferAttribute(instanceBuffer, 3, 3)); // xyz\n\n        //默认顶点颜色为白色\n        if (this.getAttribute('instanceColorStart') === undefined &&\n            this.getAttribute('instanceColorEnd') === undefined) {\n\n            let colors = array.map(() => {\n                return 1.0;\n            });\n            setColors.call(this, colors);\n        }\n\n        this.computeBoundingBox();\n        this.computeBoundingSphere();\n\n        return this;\n\n    }\n\n    setColors(array) {\n        return setColors.call(this, array);\n    }\n\n    computeBoundingBox() {\n\n        computeBoundingBox.call(this);\n\n    }\n\n    computeBoundingSphere() {\n        computeBoundingSphere.call(this);\n    }\n\n}\n\nlet setColors = function (array) {\n\n    let instanceColorBuffer = getTypeArray(array);\n\n    this.addAttribute('instanceColorStart', new InterleavedBufferAttribute(instanceColorBuffer, 3, 0)); // rgb\n    this.addAttribute('instanceColorEnd', new InterleavedBufferAttribute(instanceColorBuffer, 3, 3)); // rgb\n\n    return this;\n}\n\nlet computeBoundingBox = (function () {\n\n    let box = new Box3();\n\n    return function computeBoundingBox() {\n\n        if (this.boundingBox === null) {\n\n            this.boundingBox = new Box3();\n\n        }\n\n        let start = this.attributes.instanceStart;\n        let end = this.attributes.instanceEnd;\n\n        if (start !== undefined && end !== undefined) {\n\n            this.boundingBox.setFromBufferAttribute(start);\n\n            box.setFromBufferAttribute(end);\n\n            this.boundingBox.union(box);\n\n        }\n\n    };\n\n})();\n\nlet computeBoundingSphere = (function () {\n\n    let vector = new Vector3();\n\n    return function computeBoundingSphere() {\n\n        if (this.boundingSphere === null) {\n\n            this.boundingSphere = new Sphere();\n\n        }\n\n        if (this.boundingBox === null) {\n\n            this.computeBoundingBox();\n\n        }\n\n        var start = this.attributes.instanceStart;\n        var end = this.attributes.instanceEnd;\n\n        if (start !== undefined && end !== undefined) {\n\n            var center = this.boundingSphere.center;\n\n            this.boundingBox.getCenter(center);\n\n            var maxRadiusSq = 0;\n\n            for (var i = 0, il = start.count; i < il; i++) {\n\n                vector.fromBufferAttribute(start, i);\n                maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(vector));\n\n                vector.fromBufferAttribute(end, i);\n                maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(vector));\n\n            }\n\n            this.boundingSphere.radius = Math.sqrt(maxRadiusSq);\n\n            if (isNaN(this.boundingSphere.radius)) {\n\n                console.error('LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.', this);\n\n            }\n\n        }\n\n    };\n\n})()\n\n\nfunction getTypeArray(array) {\n\n    let typeArray;\n\n    if (array instanceof Float32Array) {\n\n        typeArray = array;\n\n    } else if (Array.isArray(array)) {\n\n        typeArray = new Float32Array(array);\n\n    }\n\n    return new InstancedInterleavedBuffer(typeArray, 6, 1);\n\n}\n\nexport { LineSegmentsGeometry };\n\n\n","import { LineSegmentsGeometry } from './LineSegmentsGeometry';\n\nclass LineGeometry extends LineSegmentsGeometry {\n    constructor() {\n        super();\n        this.type = 'LineGeometry';\n        this.isLineGeometry = true;\n    }\n\n    setPositions(array) {\n\n        let points = createVertexs(array);\n\n        super.setPositions(points);\n\n        return this;\n\n    }\n\n    setColors(array) {\n\n        let colors = createVertexs(array);\n\n        super.setColors(colors);\n\n        return this;\n\n    }\n\n    fromLine(line) {\n\n        var geometry = line.geometry;\n\n        if (geometry.isGeometry) {\n\n            this.setPositions(geometry.vertices);\n\n        } else if (geometry.isBufferGeometry) {\n\n            this.setPositions(geometry.position.array); // assumes non-indexed\n\n        }\n\n        // set colors, maybe\n\n        return this;\n\n    }\n\n}\n\nfunction createVertexs(array) {\n    // converts [ x1, y1, z1,  x2, y2, z2, ... ] to pairs format\n    let length = array.length - 3;\n    let Vertexs = new Float32Array(2 * length);\n\n    for (let i = 0; i < length; i += 3) {\n\n        Vertexs[2 * i] = array[i];\n        Vertexs[2 * i + 1] = array[i + 1];\n        Vertexs[2 * i + 2] = array[i + 2];\n\n        Vertexs[2 * i + 3] = array[i + 3];\n        Vertexs[2 * i + 4] = array[i + 4];\n        Vertexs[2 * i + 5] = array[i + 5];\n\n    }\n\n    return Vertexs;\n\n}\n\n\nexport { LineGeometry };\n","import { Material } from \"./Material\";\nimport { Color } from \"../maths/Color\";\nimport { Vector2 } from \"../maths/Vector2\";\n\n\nclass LineMeshMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = 'LineMeshMaterial';\n        this.color = new Color(0xffffff);\n        this.linewidth = 1;\n\n        this.dashed = false;\n        this.scale = 1;        //虚线整体的缩放 \n        this.dashSize = 3;     //虚线点的长度  \n        this.gapSize = 1;      //虚线间距的大小\n\n        this.resolution = new Vector2();\n\n        //todo 暂不需要\n        this.lights = false;\n\n\n        this.setValues(parameters);\n    }\n\n    get isLineMeshMaterial() {\n        return true;\n    }\n\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n        this.linewidth = source.linewidth;\n        this.scale = source.scale;\n        this.dashSize = source.dashSize;\n        this.gapSize = source.gapSize;\n        this.dashed = source.dashed;\n\n        this.resolution.copy(source.resolution);\n\n        return this;\n\n    }\n}\n\nexport { LineMeshMaterial };","import { Mesh } from \"./Mesh\";\nimport { Vector3 } from '../maths/Vector3';\nimport { LineGeometry } from '../geometries/LineGeometry';\nimport { LineMeshMaterial } from '../materials/LineMeshMaterial'\n\nimport { InterleavedBufferAttribute } from '../core/InterleavedBufferAttribute';\nimport { InstancedInterleavedBuffer } from '../core/InstancedInterleavedBuffer';\n\n\nclass Line2 extends Mesh {\n    constructor(geometry, material) {\n\n        super(geometry, material);\n\n        this.geometry = geometry !== undefined ? geometry : new LineGeometry();\n        this.material = material !== undefined ? material : new LineMeshMaterial({ color: Math.random() * 0xffffff });\n    }\n\n    get isLine2() {\n        return true;\n    }\n\n    computeLineDistances() {\n        computeLineDistances.call(this);\n    }\n\n}\n\nlet computeLineDistances = (function () { // for backwards-compatability, but could be a method of LineSegmentsGeometry...\n\n    var start = new Vector3();\n    var end = new Vector3();\n\n    return function computeLineDistances() {\n\n        var geometry = this.geometry;\n\n        var instanceStart = geometry.attributes.instanceStart;\n        var instanceEnd = geometry.attributes.instanceEnd;\n        var lineDistances = new Float32Array(2 * instanceStart.data.count);\n\n        for (var i = 0, j = 0, l = instanceStart.data.count; i < l; i++ , j += 2) {\n\n            start.fromBufferAttribute(instanceStart, i);\n            end.fromBufferAttribute(instanceEnd, i);\n\n            lineDistances[j] = (j === 0) ? 0 : lineDistances[j - 1];\n            lineDistances[j + 1] = lineDistances[j] + start.distanceTo(end);\n\n        }\n\n        var instanceDistanceBuffer = new InstancedInterleavedBuffer(lineDistances, 2, 1); // d0, d1\n\n        geometry.addAttribute('instanceDistanceStart', new InterleavedBufferAttribute(instanceDistanceBuffer, 1, 0)); // d0\n        geometry.addAttribute('instanceDistanceEnd', new InterleavedBufferAttribute(instanceDistanceBuffer, 1, 1)); // d1\n\n        return this;\n\n    };\n\n}());\n\nexport { Line2 };","import { Material } from \"./Material\";\nimport { Color } from \"../maths/Color\";\n\n\nclass PointsMaterial extends Material {\n    constructor(parameters) {\n        super();\n\n        this.type = 'PointsMaterial';\n        this.color = new Color(0xffffff);\n\n        this.map = null;\n        //点的大小\n        this.size = 1;\n        //启用/禁用随距离而发生尺寸衰减\n        this.sizeAttenuation = true;\n        //不接受灯光\n        this.lights = false;\n\n        this.setValues(parameters);\n\n\n    }\n\n    get isPointsMaterial() {\n        return true;\n    }\n\n    copy(source) {\n        super.copy(source);\n        this.color.copy(source.color);\n\n        this.map = source.map;\n\n        this.size = source.size;\n        this.sizeAttenuation = source.sizeAttenuation;\n\n        return this;\n    }\n}\n\nexport { PointsMaterial };\n","import { Sphere } from '../maths/Sphere.js';\nimport { Ray } from '../maths/Ray.js';\nimport { Matrix4 } from '../maths/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../maths/Vector3.js';\nimport { PointsMaterial } from '../materials/PointsMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\n\n\nclass Points extends Object3D {\n    constructor(geometry, material) {\n        super();\n\n        this.type = 'Points';\n\n        this.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n        this.material = material !== undefined ? material : new PointsMaterial({ color: Math.random() * 0xffffff });\n    }\n\n    get isPoints(){\n        return true;\n    }\n\n    raycast(raycaster, intersects) {\n        raycast.call(this, raycaster, intersects)\n    }\n}\n\n\nlet raycast = (function () {\n\n    var inverseMatrix = new Matrix4();\n    var ray = new Ray();\n    var sphere = new Sphere();\n\n    return function raycast(raycaster, intersects) {\n\n        var object = this;\n        var geometry = this.geometry;\n        var matrixWorld = this.matrixWorld;\n        var threshold = raycaster.params.Points.threshold;\n\n        // Checking boundingSphere distance to ray\n\n        if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n        sphere.copy(geometry.boundingSphere);\n        sphere.applyMatrix4(matrixWorld);\n        sphere.radius += threshold;\n\n        if (raycaster.ray.intersectsSphere(sphere) === false) return;\n\n        //\n\n        inverseMatrix.getInverse(matrixWorld);\n        ray.copy(raycaster.ray).applyMatrix4(inverseMatrix);\n\n        var localThreshold = threshold / ((this.scale.x + this.scale.y + this.scale.z) / 3);\n        var localThresholdSq = localThreshold * localThreshold;\n        var position = new Vector3();\n        var intersectPoint = new Vector3();\n\n        function testPoint(point, index) {\n\n            var rayPointDistanceSq = ray.distanceSqToPoint(point);\n\n            if (rayPointDistanceSq < localThresholdSq) {\n\n                ray.closestPointToPoint(point, intersectPoint);\n                intersectPoint.applyMatrix4(matrixWorld);\n\n                var distance = raycaster.ray.origin.distanceTo(intersectPoint);\n\n                if (distance < raycaster.near || distance > raycaster.far) return;\n\n                intersects.push({\n\n                    distance: distance,\n                    distanceToRay: Math.sqrt(rayPointDistanceSq),\n                    point: intersectPoint.clone(),\n                    index: index,\n                    face: null,\n                    object: object\n\n                });\n\n            }\n\n        }\n\n        if (geometry.isBufferGeometry) {\n\n            var index = geometry.index;\n            var attributes = geometry.attributes;\n            var positions = attributes.position.array;\n\n            if (index !== null) {\n\n                var indices = index.array;\n\n                for (var i = 0, il = indices.length; i < il; i++) {\n\n                    var a = indices[i];\n\n                    position.fromArray(positions, a * 3);\n\n                    testPoint(position, a);\n\n                }\n\n            } else {\n\n                for (var i = 0, l = positions.length / 3; i < l; i++) {\n\n                    position.fromArray(positions, i * 3);\n\n                    testPoint(position, i);\n\n                }\n\n            }\n\n        } else {\n\n            var vertices = geometry.vertices;\n\n            for (var i = 0, l = vertices.length; i < l; i++) {\n\n                testPoint(vertices[i], i);\n\n            }\n\n        }\n\n    };\n\n}())\n\nexport { Points };","import { Material } from \"./Material\";\nimport { Color } from \"..\";\n\nclass SpriteMaterial extends Material {\n    constructor(parameters) {\n        super();\n        this.type = 'SpriteMaterial';\n\n        this.color = new Color(0xffffff);\n        this.map = null;\n\n        this.rotation = 0;\n\n        this.sizeAttenuation = true;\n\n        this.lights = false;\n        this.transparent = true;\n\n        this.setValues(parameters);\n\n    }\n\n    get isSpriteMaterial() {\n        return true\n    }\n\n    copy(source) {\n        super.copy(source);\n\n        this.color.copy(source.color);\n        this.map = source.map;\n\n        this.rotation = source.rotation;\n\n        this.sizeAttenuation = source.sizeAttenuation;\n\n        return this;\n    }\n\n}\nexport { SpriteMaterial };","import { Vector2 } from '../maths/Vector2.js';\nimport { Vector3 } from '../maths/Vector3.js';\nimport { Matrix4 } from '../maths/Matrix4.js';\nimport { Triangle } from '../maths/Triangle.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { InterleavedBuffer } from '../core/InterleavedBuffer.js';\nimport { InterleavedBufferAttribute } from '../core/InterleavedBufferAttribute.js';\nimport { SpriteMaterial } from '../materials/SpriteMaterial.js';\n\n\nvar geometry;\n\nclass Sprite extends Object3D {\n\n    constructor(material) {\n        super();\n        this.type = 'Sprite';\n\n        if (geometry === undefined) {\n\n            geometry = new BufferGeometry();\n\n            var float32Array = new Float32Array([\n                - 0.5, - 0.5, 0, 0, 0,\n                0.5, - 0.5, 0, 1, 0,\n                0.5, 0.5, 0, 1, 1,\n                - 0.5, 0.5, 0, 0, 1\n            ]);\n\n            var interleavedBuffer = new InterleavedBuffer(float32Array, 5);\n\n            geometry.setIndex([0, 1, 2, 0, 2, 3]);\n            geometry.addAttribute('position', new InterleavedBufferAttribute(interleavedBuffer, 3, 0, false));\n            geometry.addAttribute('uv', new InterleavedBufferAttribute(interleavedBuffer, 2, 3, false));\n\n        }\n\n        this.geometry = geometry;\n\n        this.material = (material !== undefined) ? material : new SpriteMaterial();\n\n        this.center = new Vector2(0.5, 0.5);\n    }\n\n    get isSprite() {\n        return true;\n    }\n\n    raycast(raycaster, intersects) {\n        raycast.call(this, raycaster, intersects);\n    }\n    clone() {\n\n        return new this.constructor(this.material).copy(this);\n\n    }\n\n    copy(source) {\n\n        Object3D.prototype.copy.call(this, source);\n\n        if (source.center !== undefined) this.center.copy(source.center);\n\n        return this;\n\n    }\n\n}\n\nlet raycast = (function () {\n    var intersectPoint = new Vector3();\n    var worldScale = new Vector3();\n    var mvPosition = new Vector3();\n\n    var alignedPosition = new Vector2();\n    var rotatedPosition = new Vector2();\n    var viewWorldMatrix = new Matrix4();\n\n    var vA = new Vector3();\n    var vB = new Vector3();\n    var vC = new Vector3();\n\n    var uvA = new Vector2();\n    var uvB = new Vector2();\n    var uvC = new Vector2();\n\n    function transformVertex(vertexPosition, mvPosition, center, scale, sin, cos) {\n\n        // compute position in camera space\n        alignedPosition.subVectors(vertexPosition, center).addScalar(0.5).multiply(scale);\n\n        // to check if rotation is not zero\n        if (sin !== undefined) {\n\n            rotatedPosition.x = (cos * alignedPosition.x) - (sin * alignedPosition.y);\n            rotatedPosition.y = (sin * alignedPosition.x) + (cos * alignedPosition.y);\n\n        } else {\n\n            rotatedPosition.copy(alignedPosition);\n\n        }\n\n\n        vertexPosition.copy(mvPosition);\n        vertexPosition.x += rotatedPosition.x;\n        vertexPosition.y += rotatedPosition.y;\n\n        // transform to world space\n        vertexPosition.applyMatrix4(viewWorldMatrix);\n\n    }\n\n    return function raycast(raycaster, intersects) {\n\n        worldScale.setFromMatrixScale(this.matrixWorld);\n        viewWorldMatrix.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld);\n        mvPosition.setFromMatrixPosition(this.modelViewMatrix);\n\n        var rotation = this.material.rotation;\n        var sin, cos;\n        if (rotation !== 0) {\n\n            cos = Math.cos(rotation);\n            sin = Math.sin(rotation);\n\n        }\n\n        var center = this.center;\n\n        transformVertex(vA.set(- 0.5, - 0.5, 0), mvPosition, center, worldScale, sin, cos);\n        transformVertex(vB.set(0.5, - 0.5, 0), mvPosition, center, worldScale, sin, cos);\n        transformVertex(vC.set(0.5, 0.5, 0), mvPosition, center, worldScale, sin, cos);\n\n        uvA.set(0, 0);\n        uvB.set(1, 0);\n        uvC.set(1, 1);\n\n        // check first triangle\n        var intersect = raycaster.ray.intersectTriangle(vA, vB, vC, false, intersectPoint);\n\n        if (intersect === null) {\n\n            // check second triangle\n            transformVertex(vB.set(- 0.5, 0.5, 0), mvPosition, center, worldScale, sin, cos);\n            uvB.set(0, 1);\n\n            intersect = raycaster.ray.intersectTriangle(vA, vC, vB, false, intersectPoint);\n            if (intersect === null) {\n\n                return;\n\n            }\n\n        }\n\n        var distance = raycaster.ray.origin.distanceTo(intersectPoint);\n\n        if (distance < raycaster.near || distance > raycaster.far) return;\n\n        intersects.push({\n\n            distance: distance,\n            point: intersectPoint.clone(),\n            uv: Triangle.getUV(intersectPoint, vA, vB, vC, uvA, uvB, uvC, new Vector2()),\n            face: null,\n            object: this\n\n        });\n\n    };\n\n}\n)()\n\n\n\nexport { Sprite };","import { Texture } from './Texture';\nimport { LinearFilter } from '../constants';\n\nclass TextTexture extends Texture {\n    constructor(\n        { autoRedraw = true,\n            text = '',\n            textAlign = 'center',\n            textLineHeight = 1.15,\n            fontFamily = 'sans-serif',\n            fontSize = 16,\n            fontWeight = 'normal',\n            fontVariant = 'normal',\n            fontStyle = 'normal',\n            fillStyle = 'white',\n            lineWidth = 0,\n            strokeStyle = 'black',\n            padding = 0.25,\n            magFilter = LinearFilter,\n            minFilter = LinearFilter,\n            mapping,\n            wrapS,\n            wrapT,\n            format,\n            type,\n            anisotropy } = {}) {\n\n        super(\n            createCanvas(),\n            mapping,\n            wrapS,\n            wrapT,\n            magFilter,\n            minFilter,\n            format,\n            type,\n            anisotropy\n        );\n\n        this.autoRedraw = autoRedraw;\n        this._text = text;\n        this._textAlign = textAlign;\n        this._textLineHeight = textLineHeight;\n        this._fontFamily = fontFamily;\n        this._fontSize = fontSize;\n        this._fontWeight = fontWeight;\n        this._fontVariant = fontVariant;\n        this._fontStyle = fontStyle;\n        this._fillStyle = fillStyle;\n        this._lineWidth = lineWidth;\n        this._strokeStyle = strokeStyle;\n        this._padding = padding;\n\n        this.redraw();\n\n\n    }\n    get isTextTexture() {\n        return true;\n    }\n    redraw() {\n\n        let ctx = this.image.getContext('2d');\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        if (this.textWidthInPixels && this.textHeightInPixels) {\n            ctx.canvas.width = this.imageWidthInPixels;\n            ctx.canvas.height = this.imageHeightInPixels;\n\n            ctx.font = this.font;\n            ctx.textBaseline = 'middle';\n            let left;\n            switch (this.textAlign) {\n                case 'left':\n                    ctx.textAlign = 'left';\n                    left = this.paddingInPixels + this.lineWidthInPixels / 2;\n                    break;\n                case 'right':\n                    ctx.textAlign = 'right';\n                    left = this.paddingInPixels + this.lineWidthInPixels / 2 + this.textWidthInPixels;\n                    break;\n                case 'center':\n                    ctx.textAlign = 'center';\n                    left = this.paddingInPixels + this.lineWidthInPixels / 4 + this.textWidthInPixels / 2;\n                    break;\n            }\n            let top = this.paddingInPixels + this.lineWidthInPixels / 2 + this.fontSize / 2;\n            ctx.fillStyle = this.fillStyle;\n            ctx.miterLimit = 1;\n            ctx.lineWidth = this.lineWidthInPixels;\n            ctx.strokeStyle = this.strokeStyle;\n            \n            this.textLines.forEach(text => {\n                if (this.lineWidth) {\n                    ctx.strokeText(text, left, top);\n                }\n                ctx.fillText(text, left, top);\n                top += this.textLineHeightInPixels;\n            });\n        } else {\n            ctx.canvas.width = ctx.canvas.height = 1;\n        }\n        this.needsUpdate = true;\n    }\n\n    _redrawIfAuto() {\n        if (this.autoRedraw) {\n            this.redraw();\n        }\n    }\n\n    get text() {\n        return this._text;\n    }\n\n    set text(value) {\n        if (this._text !== value) {\n            this._text = value;\n            this._textLines = undefined;\n            this._textWidthInPixels = undefined;\n            this._redrawIfAuto();\n        }\n    }\n\n    get textAlign() {\n        return this._textAlign;\n    }\n\n    set textAlign(value) {\n        if (this._textAlign !== value) {\n            this._textAlign = value;\n            this._redrawIfAuto();\n        }\n    }\n\n    get textLines() {\n        if (Lang_isUndefined(this._textLines)) {\n            this._textLines = getTextLines(this.text);\n        }\n        return this._textLines;\n    }\n\n    get textLineHeight() {\n        return this._textLineHeight;\n    }\n\n    set textLineHeight(value) {\n        if (this._textLineHeight !== value) {\n            this._textLineHeight = value;\n            this._redrawIfAuto();\n        }\n    }\n\n    get textLineHeightInPixels() {\n        return this.fontSize * this.textLineHeight;\n    }\n\n    get fontFamily() {\n        return this._fontFamily;\n    }\n\n    set fontFamily(value) {\n        if (this._fontFamily !== value) {\n            this._fontFamily = value;\n            this._textWidthInPixels = undefined;\n            this._redrawIfAuto();\n        }\n    }\n\n    get fontSize() {\n        return this._fontSize;\n    }\n\n    set fontSize(value) {\n        if (this._fontSize !== value) {\n            this._fontSize = value;\n            this._textWidthInPixels = undefined;\n            this._redrawIfAuto();\n        }\n    }\n\n    get fontWeight() {\n        return this._fontWeight;\n    }\n\n    set fontWeight(value) {\n        if (this._fontWeight !== value) {\n            this._fontWeight = value;\n            this._textWidthInPixels = undefined;\n            this._redrawIfAuto();\n        }\n    }\n\n    get fontVariant() {\n        return this._fontVariant;\n    }\n\n    set fontVariant(value) {\n        if (this._fontVariant !== value) {\n            this._fontVariant = value;\n            this._textWidthInPixels = undefined;\n            this._redrawIfAuto();\n        }\n    }\n\n    get fontStyle() {\n        return this._fontStyle;\n    }\n\n    set fontStyle(value) {\n        if (this._fontStyle !== value) {\n            this._fontStyle = value;\n            this._textWidthInPixels = undefined;\n            this._redrawIfAuto();\n        }\n    }\n\n    get font() {\n        return getFont(\n            this.fontStyle,\n            this.fontVariant,\n            this.fontWeight,\n            this.fontSize,\n            this.fontFamily,\n        );\n    }\n\n    get fillStyle() {\n        return this._fillStyle;\n    }\n\n    set fillStyle(value) {\n        if (this._fillStyle !== value) {\n            this._fillStyle = value;\n            this._redrawIfAuto();\n        }\n    }\n\n    get lineWidth() {\n        return this._lineWidth;\n    }\n\n    set lineWidth(value) {\n        if (this._lineWidth !== value) {\n            this._lineWidth = value;\n            this._redrawIfAuto();\n        }\n    }\n\n    get lineWidthInPixels() {\n        return this._lineWidth * this.fontSize;\n    }\n\n    get strokeStyle() {\n        return this._strokeStyle;\n    }\n\n    set strokeStyle(value) {\n        if (this._strokeStyle !== value) {\n            this._strokeStyle = value;\n            this._redrawIfAuto();\n        }\n    }\n\n    get textWidthInPixels() {\n        if (Lang_isUndefined(this._textWidthInPixels)) {\n            this._textWidthInPixels = getTextWidth(\n                this.textLines,\n                this.font,\n            );\n        }\n        return this._textWidthInPixels;\n    }\n\n    get textHeight() {\n        return this.textLineHeight * (this.textLines.length - 1) + 1;\n    }\n\n    get textHeightInPixels() {\n        return this.textHeight * this.fontSize;\n    }\n\n    get padding() {\n        return this._padding;\n    }\n\n    set padding(value) {\n        if (this._padding !== value) {\n            this._padding = value;\n            this._redrawIfAuto();\n        }\n    }\n\n    get paddingInPixels() {\n        return this.padding * this.fontSize;\n    }\n\n    get imageWidthInPixels() {\n        return this.textWidthInPixels + this.lineWidthInPixels + this.paddingInPixels * 2;\n    }\n\n    get imageHeight() {\n        return this.textHeight + this.lineWidth + this.padding * 2;\n    }\n\n    get imageHeightInPixels() {\n        return this.imageHeight * this.fontSize;\n    }\n\n    get imageAspect() {\n        if (this.image.width && this.image.height) {\n            return this.image.width / this.image.height;\n        }\n        return 1;\n    }\n    static getTextWidth(textLines, font) {\n        return getTextWidth(textLines, font);\n    }\n\n}\n\nfunction Lang_isUndefined(value) {\n    return value === undefined;\n};\n\nfunction getTextLines(text) {\n    return text ? text.split('\\n') : [];\n}\n\nfunction getFont(fontStyle, fontVariant, fontWeight, fontSize, fontFamily) {\n    return [fontStyle, fontVariant, fontWeight, `${fontSize}px`, fontFamily].join(' ');\n}\n\n\nfunction getTextWidth(textLines, font) {\n    if (textLines.length) {\n        let ctx = createCanvas().getContext('2d');\n        ctx.font = font;\n        return Array_max(textLines.map(text => ctx.measureText(text).width));\n    }\n    return 0;\n}\n\n\nfunction Array_max(array) {\n    if (array.length > 0) {\n        return array.reduce((maxValue, value) => Math.max(maxValue, value));\n    }\n}\n\n\nfunction createCanvas() {\n    return document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');\n};\n\nexport { TextTexture };","import { Sprite } from './Sprite';\nimport { _Math } from '../maths/Math';\nimport { Vector3 } from '../maths/Vector3';\nimport { SpriteMaterial } from '../materials/SpriteMaterial';\nimport { TextTexture } from '../textures/TextTexture';\n\nclass TextSprite extends Sprite {\n    constructor({\n        fontSize = 16,\n        redrawInterval = 1,\n        material = {},\n        texture = {},\n    } = {}) {\n        let params = {};\n        for (let key in material) {\n            params[key] = material[key];\n        }\n        params['map'] = new TextTexture(texture);\n        super(new SpriteMaterial(params));\n\n        this.fontSize = fontSize;\n        this.redrawInterval = redrawInterval;\n        this.lastRedraw = 0;\n    }\n\n    get isTextSprite() {\n        return true;\n    }\n\n    onBeforeRender(renderer, scene, camera) {\n        this.redraw(renderer, camera);\n    }\n    updateScale(renderer, camera) {\n\n        let actualFontSize = 1;\n        let fontsize = this.fontSize;\n        let height = 0;\n        let screenHeight = renderer.domElement.clientHeight;\n        if (camera.isOrthographicCamera) {\n            height = camera.top - camera.bottom;\n        } else {\n            let cameraWorldPos = new Vector3();\n            camera.updateMatrixWorld(true);\n            cameraWorldPos.applyMatrix4(camera.matrixWorld);\n\n            let pos = new Vector3();\n            this.updateMatrixWorld(true);\n            pos.applyMatrix4(this.matrixWorld);\n\n            let dist = cameraWorldPos.distanceTo(pos);\n            var vFOV = _Math.degToRad(camera.fov); // convert vertical fov to radians\n            height = 2 * Math.tan(vFOV / 2) * dist; // visible height\n            //投影位置全屏的Height 与 屏幕的高度比乘以字体的高度  \n        }\n\n        actualFontSize = height / screenHeight * fontsize;\n\n        this.scale.set(this.material.map.imageAspect, 1, 1).multiplyScalar(actualFontSize);\n\n    }\n\n    // updateMatrix(...args) {\n    //     this.updateScale(...args);\n    //     return super.updateMatrix(...args);\n    // }\n\n    redraw(renderer, camera) {\n        if (this.lastRedraw + this.redrawInterval < Date.now()) {\n            if (this.redrawInterval) {\n                setTimeout(() => {\n                    this.redrawNow(renderer, camera);\n                }, 1);\n            } else {\n                this.redrawNow(renderer, camera);\n            }\n        }\n    }\n\n    redrawNow(renderer, camera) {\n        this.updateScale(renderer, camera);\n        this.material.map.autoRedraw = true;\n\n        this.material.map.fontSize = _Math.ceilPowerOfTwo(getOptimalFontSize(this, renderer, camera));\n\n        this.lastRedraw = Date.now();\n    }\n\n    dispose() {\n        //todo 更改sprite 的渲染,不然回收有问题\n        this.material.map.dispose();\n        this.material.dispose();\n    }\n\n}\n\nlet getOptimalFontSize = (function () {\n    const objectWorldPosition = new Vector3();\n    const cameraWorldPosition = new Vector3();\n    const objectWorldScale = new Vector3();\n    return function getOptimalFontSize(object, renderer, camera) {\n        if (renderer.domElement.width && renderer.domElement.height && object.material.map.textLines.length) {\n            let distance = object.getWorldPosition(objectWorldPosition).distanceTo(camera.getWorldPosition(cameraWorldPosition));\n            if (distance) {\n                let heightInPixels = object.getWorldScale(objectWorldScale).y * renderer.domElement.height / distance;\n                if (heightInPixels) {\n                    return Math.round(heightInPixels / object.material.map.imageHeight);\n                }\n            }\n        }\n        return 0;\n    }\n\n})();\n\n\n\n\nexport { TextSprite };","import { Events } from './Events';\nimport { Box3 } from '../maths/Box3';\nimport { Sphere } from '../maths/Sphere';\nimport { Face3 } from './Face3';\nimport { Vector3 } from '../maths/Vector3';\nimport { Vector2 } from '../maths/Vector2';\n\n\n/**\n * @class BufferGeometry 三维几何体的基类\n * @description 实现三维几何体的一些基本操作\n * @author bujue\n */\n\n\nlet geometryId = 0\nclass Geometry extends Events {\n    constructor() {\n        super();\n        Object.defineProperty(this, 'id', { value: geometryId += 2 });\n        this.type = 'Geometry';\n\n        this.vertices = [];\n        this.colors = [];\n        this.faces = [];\n        this.faceVertexUvs = [[]];\n\n        this.isGeometry = true;\n\n        this.lineDistances = [];     //计算虚线需要\n        this.boundingSphere = null;\n        this.boundingBox = null;\n\n        // update flags\n\n        this.elementsNeedUpdate = false;\n        this.verticesNeedUpdate = false;\n        this.uvsNeedUpdate = false;\n        this.normalsNeedUpdate = false;\n        this.colorsNeedUpdate = false;\n        this.lineDistancesNeedUpdate = false;\n        this.groupsNeedUpdate = false;\n    }\n\n    fromBufferGeometry(geometry) {\n\n        var scope = this;\n\n        var indices = geometry.index !== null ? geometry.index.array : undefined;\n        var attributes = geometry.attributes;\n\n        var positions = attributes.position.array;\n        var normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n        var colors = attributes.color !== undefined ? attributes.color.array : undefined;\n        var uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n        var uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n        if (uvs2 !== undefined) this.faceVertexUvs[1] = [];\n\n        var tempNormals = [];\n        var tempUVs = [];\n        var tempUVs2 = [];\n\n        for (var i = 0, j = 0; i < positions.length; i += 3, j += 2) {\n\n            scope.vertices.push(new Vector3(positions[i], positions[i + 1], positions[i + 2]));\n\n            if (normals !== undefined) {\n\n                tempNormals.push(new Vector3(normals[i], normals[i + 1], normals[i + 2]));\n\n            }\n\n            if (colors !== undefined) {\n\n                scope.colors.push(new Color(colors[i], colors[i + 1], colors[i + 2]));\n\n            }\n\n            if (uvs !== undefined) {\n\n                tempUVs.push(new Vector2(uvs[j], uvs[j + 1]));\n\n            }\n\n            if (uvs2 !== undefined) {\n\n                tempUVs2.push(new Vector2(uvs2[j], uvs2[j + 1]));\n\n            }\n\n        }\n\n        function addFace(a, b, c, materialIndex) {\n\n            var vertexNormals = normals !== undefined ? [tempNormals[a].clone(), tempNormals[b].clone(), tempNormals[c].clone()] : [];\n            var vertexColors = colors !== undefined ? [scope.colors[a].clone(), scope.colors[b].clone(), scope.colors[c].clone()] : [];\n\n            var face = new Face3(a, b, c, vertexNormals, vertexColors, materialIndex);\n\n            scope.faces.push(face);\n\n            if (uvs !== undefined) {\n\n                scope.faceVertexUvs[0].push([tempUVs[a].clone(), tempUVs[b].clone(), tempUVs[c].clone()]);\n\n            }\n\n            if (uvs2 !== undefined) {\n\n                scope.faceVertexUvs[1].push([tempUVs2[a].clone(), tempUVs2[b].clone(), tempUVs2[c].clone()]);\n\n            }\n\n        }\n\n        var groups = geometry.groups;\n\n        if (groups.length > 0) {\n\n            for (var i = 0; i < groups.length; i++) {\n\n                var group = groups[i];\n\n                var start = group.start;\n                var count = group.count;\n\n                for (var j = start, jl = start + count; j < jl; j += 3) {\n\n                    if (indices !== undefined) {\n\n                        addFace(indices[j], indices[j + 1], indices[j + 2], group.materialIndex);\n\n                    } else {\n\n                        addFace(j, j + 1, j + 2, group.materialIndex);\n\n                    }\n\n                }\n\n            }\n\n        } else {\n\n            if (indices !== undefined) {\n\n                for (var i = 0; i < indices.length; i += 3) {\n\n                    addFace(indices[i], indices[i + 1], indices[i + 2]);\n\n                }\n\n            } else {\n\n                for (var i = 0; i < positions.length / 3; i += 3) {\n\n                    addFace(i, i + 1, i + 2);\n\n                }\n\n            }\n\n        }\n\n        this.computeFaceNormals();\n\n        if (geometry.boundingBox !== null) {\n\n            this.boundingBox = geometry.boundingBox.clone();\n\n        }\n\n        if (geometry.boundingSphere !== null) {\n\n            this.boundingSphere = geometry.boundingSphere.clone();\n\n        }\n\n        return this;\n\n    }\n\n    computeBoundingBox() {\n\n        if (this.boundingBox === null) {\n\n            this.boundingBox = new Box3();\n\n        }\n\n        this.boundingBox.setFromPoints(this.vertices);\n\n    }\n\n    computeBoundingSphere() {\n\n        if (this.boundingSphere === null) {\n\n            this.boundingSphere = new Sphere();\n\n        }\n\n        this.boundingSphere.setFromPoints(this.vertices);\n\n    }\n\n    computeFaceNormals() {\n\n        var cb = new Vector3(), ab = new Vector3();\n\n        for (var f = 0, fl = this.faces.length; f < fl; f++) {\n\n            var face = this.faces[f];\n\n            var vA = this.vertices[face.a];\n            var vB = this.vertices[face.b];\n            var vC = this.vertices[face.c];\n\n            cb.subVectors(vC, vB);\n            ab.subVectors(vA, vB);\n            cb.cross(ab);\n\n            cb.normalize();\n\n            face.normal.copy(cb);\n\n        }\n\n    }\n\n    /*\n * Checks for duplicate vertices with hashmap.\n * Duplicated vertices are removed\n * and faces' vertices are updated.\n */\n\n    mergeVertices() {\n\n        var verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n        var unique = [], changes = [];\n\n        var v, key;\n        var precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n        var precision = Math.pow(10, precisionPoints);\n        var i, il, face;\n        var indices, j, jl;\n\n        for (i = 0, il = this.vertices.length; i < il; i++) {\n\n            v = this.vertices[i];\n            key = Math.round(v.x * precision) + '_' + Math.round(v.y * precision) + '_' + Math.round(v.z * precision);\n\n            if (verticesMap[key] === undefined) {\n\n                verticesMap[key] = i;\n                unique.push(this.vertices[i]);\n                changes[i] = unique.length - 1;\n\n            } else {\n\n                //console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n                changes[i] = changes[verticesMap[key]];\n\n            }\n\n        }\n\n\n        // if faces are completely degenerate after merging vertices, we\n        // have to remove them from the geometry.\n        var faceIndicesToRemove = [];\n\n        for (i = 0, il = this.faces.length; i < il; i++) {\n\n            face = this.faces[i];\n\n            face.a = changes[face.a];\n            face.b = changes[face.b];\n            face.c = changes[face.c];\n\n            indices = [face.a, face.b, face.c];\n\n            // if any duplicate vertices are found in a Face3\n            // we have to remove the face as nothing can be saved\n            for (var n = 0; n < 3; n++) {\n\n                if (indices[n] === indices[(n + 1) % 3]) {\n\n                    faceIndicesToRemove.push(i);\n                    break;\n\n                }\n\n            }\n\n        }\n\n        for (i = faceIndicesToRemove.length - 1; i >= 0; i--) {\n\n            var idx = faceIndicesToRemove[i];\n\n            this.faces.splice(idx, 1);\n\n            for (j = 0, jl = this.faceVertexUvs.length; j < jl; j++) {\n\n                this.faceVertexUvs[j].splice(idx, 1);\n\n            }\n\n        }\n\n        // Use unique set of vertices\n\n        var diff = this.vertices.length - unique.length;\n        this.vertices = unique;\n        return diff;\n\n    }\n\n    clone() {\n\n        return new Geometry().copy(this);\n\n    }\n\n    copy(source) {\n\n        let i, il, j, jl, k, kl;\n\n        // reset\n\n        this.vertices = [];\n        this.colors = [];\n        this.faces = [];\n        this.faceVertexUvs = [[]];\n        this.boundingBox = null;\n        this.boundingSphere = null;\n\n        // name\n\n        this.name = source.name;\n\n        // vertices\n\n        let vertices = source.vertices;\n\n        for (i = 0, il = vertices.length; i < il; i++) {\n\n            this.vertices.push(vertices[i].clone());\n\n        }\n\n        // colors\n\n        let colors = source.colors;\n\n        for (i = 0, il = colors.length; i < il; i++) {\n\n            this.colors.push(colors[i].clone());\n\n        }\n\n        // faces\n\n        let faces = source.faces;\n\n        for (i = 0, il = faces.length; i < il; i++) {\n\n            this.faces.push(faces[i].clone());\n\n        }\n\n        // face vertex uvs\n\n        for (i = 0, il = source.faceVertexUvs.length; i < il; i++) {\n\n            var faceVertexUvs = source.faceVertexUvs[i];\n\n            if (this.faceVertexUvs[i] === undefined) {\n\n                this.faceVertexUvs[i] = [];\n\n            }\n\n            for (j = 0, jl = faceVertexUvs.length; j < jl; j++) {\n\n                var uvs = faceVertexUvs[j], uvsCopy = [];\n\n                for (k = 0, kl = uvs.length; k < kl; k++) {\n\n                    var uv = uvs[k];\n\n                    uvsCopy.push(uv.clone());\n\n                }\n\n                this.faceVertexUvs[i].push(uvsCopy);\n\n            }\n\n        }\n\n\n        // bounding box\n\n        var boundingBox = source.boundingBox;\n\n        if (boundingBox !== null) {\n\n            this.boundingBox = boundingBox.clone();\n\n        }\n\n        // bounding sphere\n\n        var boundingSphere = source.boundingSphere;\n\n        if (boundingSphere !== null) {\n\n            this.boundingSphere = boundingSphere.clone();\n\n        }\n\n        // update flags\n\n        this.elementsNeedUpdate = source.elementsNeedUpdate;\n        this.verticesNeedUpdate = source.verticesNeedUpdate;\n        this.uvsNeedUpdate = source.uvsNeedUpdate;\n        this.normalsNeedUpdate = source.normalsNeedUpdate;\n        this.colorsNeedUpdate = source.colorsNeedUpdate;\n        this.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n        this.groupsNeedUpdate = source.groupsNeedUpdate;\n\n        return this;\n\n    }\n\n    dispose() {\n\n        this.fire({ type: 'dispose' });\n\n    }\n\n}\n\n\nexport { Geometry };\n\n\n","import { Geometry } from '../core/Geometry';\nimport { BufferGeometry } from '../core/BufferGeometry';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\nimport { Vector3 } from '../maths/Vector3';\nimport { Vector2 } from '../maths/Vector2';\n\n// CircleGeometry\n\nclass CircleGeometry extends Geometry {\n    constructor(radius, segments, thetaStart, thetaLength) {\n\n        super();\n\n        this.type = 'CircleGeometry';\n\n        this.parameters = {\n            radius: radius,\n            segments: segments,\n            thetaStart: thetaStart,\n            thetaLength: thetaLength\n        };\n\n        this.fromBufferGeometry(new CircleBufferGeometry(radius, segments, thetaStart, thetaLength));\n        this.mergeVertices();\n\n    }\n}\n\n// CircleBufferGeometry\n\nclass CircleBufferGeometry extends BufferGeometry {\n    constructor(radius, segments, thetaStart, thetaLength) {\n\n        super();\n\n        this.type = 'CircleBufferGeometry';\n\n        this.parameters = {\n            radius: radius,\n            segments: segments,\n            thetaStart: thetaStart,\n            thetaLength: thetaLength\n        };\n\n        radius = radius || 50;\n        segments = segments !== undefined ? Math.max(3, segments) : 8;\n\n        thetaStart = thetaStart !== undefined ? thetaStart : 0;\n        thetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n        // buffers\n\n        var indices = [];\n        var vertices = [];\n        var normals = [];\n        var uvs = [];\n\n        // helper variables\n\n        var i, s;\n        var vertex = new Vector3();\n        var uv = new Vector2();\n\n        // center point\n\n        vertices.push(0, 0, 0);\n        normals.push(0, 0, 1);\n        uvs.push(0.5, 0.5);\n\n        for (s = 0, i = 3; s <= segments; s++ , i += 3) {\n\n            var segment = thetaStart + s / segments * thetaLength;\n\n            // vertex\n\n            vertex.x = radius * Math.cos(segment);\n            vertex.y = radius * Math.sin(segment);\n\n            vertices.push(vertex.x, vertex.y, vertex.z);\n\n            // normal\n\n            normals.push(0, 0, 1);\n\n            // uvs\n\n            uv.x = (vertices[i] / radius + 1) / 2;\n            uv.y = (vertices[i + 1] / radius + 1) / 2;\n\n            uvs.push(uv.x, uv.y);\n\n        }\n\n        // indices\n\n        for (i = 1; i <= segments; i++) {\n\n            indices.push(i, i + 1, 0);\n\n        }\n\n        // build geometry\n\n        this.setIndex(indices);\n        this.addAttribute('position', new Float32BufferAttribute(vertices, 3));\n        this.addAttribute('normal', new Float32BufferAttribute(normals, 3));\n        this.addAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n    }\n}\n\n\n\nexport { CircleGeometry, CircleBufferGeometry };\n","import { Geometry } from '../core/Geometry';\nimport { BufferGeometry } from '../core/BufferGeometry';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\n\n// PlaneGeometry\n\nclass PlaneGeometry extends Geometry {\n    constructor(width, height, widthSegments, heightSegments) {\n\n        super();\n\n        this.type = 'PlaneGeometry';\n\n        this.parameters = {\n            width: width,\n            height: height,\n            widthSegments: widthSegments,\n            heightSegments: heightSegments\n        };\n\n        this.fromBufferGeometry(new PlaneBufferGeometry(width, height, widthSegments, heightSegments));\n        this.mergeVertices();\n\n    }\n}\n\n// PlaneBufferGeometry\n\nclass PlaneBufferGeometry extends BufferGeometry {\n    constructor(width, height, widthSegments, heightSegments) {\n\n        super();\n\n        this.type = 'PlaneBufferGeometry';\n\n        this.parameters = {\n            width: width,\n            height: height,\n            widthSegments: widthSegments,\n            heightSegments: heightSegments\n        };\n\n        var width_half = width / 2;\n        var height_half = height / 2;\n\n        var gridX = Math.floor(widthSegments) || 1;\n        var gridY = Math.floor(heightSegments) || 1;\n\n        var gridX1 = gridX + 1;\n        var gridY1 = gridY + 1;\n\n        var segment_width = width / gridX;\n        var segment_height = height / gridY;\n\n        var ix, iy;\n\n        // buffers\n\n        var indices = [];\n        var vertices = [];\n        var normals = [];\n        var uvs = [];\n\n        // generate vertices, normals and uvs\n\n        for (iy = 0; iy < gridY1; iy++) {\n\n            var y = iy * segment_height - height_half;\n\n            for (ix = 0; ix < gridX1; ix++) {\n\n                var x = ix * segment_width - width_half;\n\n                vertices.push(x, - y, 0);\n\n                normals.push(0, 0, 1);\n\n                uvs.push(ix / gridX);\n                uvs.push(1 - (iy / gridY));\n\n            }\n\n        }\n\n        // indices\n\n        for (iy = 0; iy < gridY; iy++) {\n\n            for (ix = 0; ix < gridX; ix++) {\n\n                var a = ix + gridX1 * iy;\n                var b = ix + gridX1 * (iy + 1);\n                var c = (ix + 1) + gridX1 * (iy + 1);\n                var d = (ix + 1) + gridX1 * iy;\n\n                // faces\n\n                indices.push(a, b, d);\n                indices.push(b, c, d);\n\n            }\n\n        }\n\n        // build geometry\n\n        this.setIndex(indices);\n        this.addAttribute('position', new Float32BufferAttribute(vertices, 3));\n        this.addAttribute('normal', new Float32BufferAttribute(normals, 3));\n        this.addAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n    }\n}\n\n\n\nexport { PlaneGeometry, PlaneBufferGeometry };\n","import { Float32BufferAttribute } from '../core/BufferAttribute';\nimport { BufferGeometry } from '../core/BufferGeometry';\nimport { Vector3 } from '../maths/Vector3';\nimport { Geometry } from '../core/Geometry';\n\n// BoxGeometry\n\nclass BoxGeometry extends Geometry {\n    constructor(width, height, depth, widthSegments, heightSegments, depthSegments) {\n        super();\n        this.type = 'BoxGeometry';\n        this.parameters = {\n            width: width,\n            height: height,\n            depth: depth,\n            widthSegments: widthSegments,\n            heightSegments: heightSegments,\n            depthSegments: depthSegments\n        };\n\n        this.fromBufferGeometry(new BoxBufferGeometry(width, height, depth, widthSegments, heightSegments, depthSegments));\n        this.mergeVertices();\n    }\n}\n// BoxBufferGeometry\n\nclass BoxBufferGeometry extends BufferGeometry {\n    constructor(width, height, depth, widthSegments, heightSegments, depthSegments) {\n        super();\n\n        this.type = 'BoxBufferGeometry';\n\n        this.parameters = {\n            width: width,\n            height: height,\n            depth: depth,\n            widthSegments: widthSegments,\n            heightSegments: heightSegments,\n            depthSegments: depthSegments\n        };\n\n        var scope = this;\n\n        // segments\n\n        widthSegments = Math.floor(widthSegments) || 1;\n        heightSegments = Math.floor(heightSegments) || 1;\n        depthSegments = Math.floor(depthSegments) || 1;\n\n        // buffers\n\n        var indices = [];\n        var vertices = [];\n        var normals = [];\n        var uvs = [];\n\n        // helper variables\n\n        var numberOfVertices = 0;\n        var groupStart = 0;\n\n        // build each side of the box geometry\n\n        buildPlane('z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0); // px\n        buildPlane('z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1); // nx\n        buildPlane('x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2); // py\n        buildPlane('x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3); // ny\n        buildPlane('x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4); // pz\n        buildPlane('x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5); // nz\n\n        // build geometry\n\n        this.setIndex(indices);\n        this.addAttribute('position', new Float32BufferAttribute(vertices, 3));\n        this.addAttribute('normal', new Float32BufferAttribute(normals, 3));\n        this.addAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n        function buildPlane(u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex) {\n\n            var segmentWidth = width / gridX;\n            var segmentHeight = height / gridY;\n\n            var widthHalf = width / 2;\n            var heightHalf = height / 2;\n            var depthHalf = depth / 2;\n\n            var gridX1 = gridX + 1;\n            var gridY1 = gridY + 1;\n\n            var vertexCounter = 0;\n            var groupCount = 0;\n\n            var ix, iy;\n\n            var vector = new Vector3();\n\n            // generate vertices, normals and uvs\n\n            for (iy = 0; iy < gridY1; iy++) {\n\n                var y = iy * segmentHeight - heightHalf;\n\n                for (ix = 0; ix < gridX1; ix++) {\n\n                    var x = ix * segmentWidth - widthHalf;\n\n                    // set values to correct vector component\n\n                    vector[u] = x * udir;\n                    vector[v] = y * vdir;\n                    vector[w] = depthHalf;\n\n                    // now apply vector to vertex buffer\n\n                    vertices.push(vector.x, vector.y, vector.z);\n\n                    // set values to correct vector component\n\n                    vector[u] = 0;\n                    vector[v] = 0;\n                    vector[w] = depth > 0 ? 1 : - 1;\n\n                    // now apply vector to normal buffer\n\n                    normals.push(vector.x, vector.y, vector.z);\n\n                    // uvs\n\n                    uvs.push(ix / gridX);\n                    uvs.push(1 - (iy / gridY));\n\n                    // counters\n\n                    vertexCounter += 1;\n\n                }\n\n            }\n\n            // indices\n\n            // 1. you need three indices to draw a single face\n            // 2. a single segment consists of two faces\n            // 3. so we need to generate six (2*3) indices per segment\n\n            for (iy = 0; iy < gridY; iy++) {\n\n                for (ix = 0; ix < gridX; ix++) {\n\n                    var a = numberOfVertices + ix + gridX1 * iy;\n                    var b = numberOfVertices + ix + gridX1 * (iy + 1);\n                    var c = numberOfVertices + (ix + 1) + gridX1 * (iy + 1);\n                    var d = numberOfVertices + (ix + 1) + gridX1 * iy;\n\n                    // faces\n\n                    indices.push(a, b, d);\n                    indices.push(b, c, d);\n\n                    // increase counter\n\n                    groupCount += 6;\n\n                }\n\n            }\n\n            // add a group to the geometry. this will ensure multi material support\n\n            scope.addGroup(groupStart, groupCount, materialIndex);\n\n            // calculate new start value for groups\n\n            groupStart += groupCount;\n\n            // update total number of vertices\n\n            numberOfVertices += vertexCounter;\n        }\n    }\n}\n\n\nexport { BoxGeometry, BoxBufferGeometry };\n","import { Geometry } from '../core/Geometry';\nimport { BufferGeometry } from '../core/BufferGeometry';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\nimport { Vector3 } from '../maths/Vector3';\n\n// SphereGeometry\n\nclass SphereGeometry extends Geometry {\n    constructor(radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength) {\n\n        super();\n        \n        this.type = 'SphereGeometry';\n\n        this.parameters = {\n            radius: radius,\n            widthSegments: widthSegments,\n            heightSegments: heightSegments,\n            phiStart: phiStart,\n            phiLength: phiLength,\n            thetaStart: thetaStart,\n            thetaLength: thetaLength\n        };\n\n        this.fromBufferGeometry(new SphereBufferGeometry(radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength));\n        this.mergeVertices();\n\n    }\n}\n\n// SphereBufferGeometry\n\nclass SphereBufferGeometry extends BufferGeometry {\n    constructor(radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength) {\n\n        super();\n\n        this.type = 'SphereBufferGeometry';\n\n        this.parameters = {\n            radius: radius,\n            widthSegments: widthSegments,\n            heightSegments: heightSegments,\n            phiStart: phiStart,\n            phiLength: phiLength,\n            thetaStart: thetaStart,\n            thetaLength: thetaLength\n        };\n\n        radius = radius || 50;\n\n        widthSegments = Math.max(3, Math.floor(widthSegments) || 8);\n        heightSegments = Math.max(2, Math.floor(heightSegments) || 6);\n\n        phiStart = phiStart !== undefined ? phiStart : 0;\n        phiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n        thetaStart = thetaStart !== undefined ? thetaStart : 0;\n        thetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n        var thetaEnd = thetaStart + thetaLength;\n\n        var ix, iy;\n\n        var index = 0;\n        var grid = [];\n\n        var vertex = new Vector3();\n        var normal = new Vector3();\n\n        // buffers\n\n        var indices = [];\n        var vertices = [];\n        var normals = [];\n        var uvs = [];\n\n        // generate vertices, normals and uvs\n\n        for (iy = 0; iy <= heightSegments; iy++) {\n\n            var verticesRow = [];\n\n            var v = iy / heightSegments;\n\n            for (ix = 0; ix <= widthSegments; ix++) {\n\n                var u = ix / widthSegments;\n\n                // vertex\n\n                vertex.x = - radius * Math.cos(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\n                vertex.y = radius * Math.cos(thetaStart + v * thetaLength);\n                vertex.z = radius * Math.sin(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\n\n                vertices.push(vertex.x, vertex.y, vertex.z);\n\n                // normal\n\n                normal.set(vertex.x, vertex.y, vertex.z).normalize();\n                normals.push(normal.x, normal.y, normal.z);\n\n                // uv\n\n                uvs.push(u, 1 - v);\n\n                verticesRow.push(index++);\n\n            }\n\n            grid.push(verticesRow);\n\n        }\n\n        // indices\n\n        for (iy = 0; iy < heightSegments; iy++) {\n\n            for (ix = 0; ix < widthSegments; ix++) {\n\n                var a = grid[iy][ix + 1];\n                var b = grid[iy][ix];\n                var c = grid[iy + 1][ix];\n                var d = grid[iy + 1][ix + 1];\n\n                if (iy !== 0 || thetaStart > 0) indices.push(a, b, d);\n                if (iy !== heightSegments - 1 || thetaEnd < Math.PI) indices.push(b, c, d);\n\n            }\n\n        }\n\n        // build geometry\n\n        this.setIndex(indices);\n        this.addAttribute('position', new Float32BufferAttribute(vertices, 3));\n        this.addAttribute('normal', new Float32BufferAttribute(normals, 3));\n        this.addAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n    }\n}\nexport { SphereGeometry, SphereBufferGeometry };\n","import { Geometry } from '../core/Geometry';\nimport { BufferGeometry } from '../core/BufferGeometry';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\nimport { Vector3 } from '../maths/Vector3';\nimport { Vector2 } from '../maths/Vector2';\n\n// CylinderGeometry\n\nclass CylinderGeometry extends Geometry {\n    constructor(radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength) {\n\n        super();\n\n        this.type = 'CylinderGeometry';\n\n        this.parameters = {\n            radiusTop: radiusTop,\n            radiusBottom: radiusBottom,\n            height: height,\n            radialSegments: radialSegments,\n            heightSegments: heightSegments,\n            openEnded: openEnded,\n            thetaStart: thetaStart,\n            thetaLength: thetaLength\n        };\n\n        this.fromBufferGeometry(new CylinderBufferGeometry(radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength));\n        this.mergeVertices();\n\n    }\n}\n\n// CylinderBufferGeometry\n\nclass CylinderBufferGeometry extends BufferGeometry {\n    constructor(radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength) {\n\n        super();\n\n        this.type = 'CylinderBufferGeometry';\n\n        this.parameters = {\n            radiusTop: radiusTop,\n            radiusBottom: radiusBottom,\n            height: height,\n            radialSegments: radialSegments,\n            heightSegments: heightSegments,\n            openEnded: openEnded,\n            thetaStart: thetaStart,\n            thetaLength: thetaLength\n        };\n\n        var scope = this;\n\n        radiusTop = radiusTop !== undefined ? radiusTop : 20;\n        radiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\n        height = height !== undefined ? height : 100;\n\n        radialSegments = Math.floor(radialSegments) || 8;\n        heightSegments = Math.floor(heightSegments) || 1;\n\n        openEnded = openEnded !== undefined ? openEnded : false;\n        thetaStart = thetaStart !== undefined ? thetaStart : 0.0;\n        thetaLength = thetaLength !== undefined ? thetaLength : 2.0 * Math.PI;\n\n        // buffers\n\n        var indices = [];\n        var vertices = [];\n        var normals = [];\n        var uvs = [];\n\n        // helper variables\n\n        var index = 0;\n        var indexArray = [];\n        var halfHeight = height / 2;\n        var groupStart = 0;\n\n        // generate geometry\n\n        generateTorso();\n\n        if (openEnded === false) {\n\n            if (radiusTop > 0) generateCap(true);\n            if (radiusBottom > 0) generateCap(false);\n\n        }\n\n        // build geometry\n\n        this.setIndex(indices);\n        this.addAttribute('position', new Float32BufferAttribute(vertices, 3));\n        this.addAttribute('normal', new Float32BufferAttribute(normals, 3));\n        this.addAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n        function generateTorso() {\n\n            var x, y;\n            var normal = new Vector3();\n            var vertex = new Vector3();\n\n            var groupCount = 0;\n\n            // this will be used to calculate the normal\n            var slope = (radiusBottom - radiusTop) / height;\n\n            // generate vertices, normals and uvs\n\n            for (y = 0; y <= heightSegments; y++) {\n\n                var indexRow = [];\n\n                var v = y / heightSegments;\n\n                // calculate the radius of the current row\n\n                var radius = v * (radiusBottom - radiusTop) + radiusTop;\n\n                for (x = 0; x <= radialSegments; x++) {\n\n                    var u = x / radialSegments;\n\n                    var theta = u * thetaLength + thetaStart;\n\n                    var sinTheta = Math.sin(theta);\n                    var cosTheta = Math.cos(theta);\n\n                    // vertex\n\n                    vertex.x = radius * sinTheta;\n                    vertex.y = - v * height + halfHeight;\n                    vertex.z = radius * cosTheta;\n                    vertices.push(vertex.x, vertex.y, vertex.z);\n\n                    // normal\n\n                    normal.set(sinTheta, slope, cosTheta).normalize();\n                    normals.push(normal.x, normal.y, normal.z);\n\n                    // uv\n\n                    uvs.push(u, 1 - v);\n\n                    // save index of vertex in respective row\n\n                    indexRow.push(index++);\n\n                }\n\n                // now save vertices of the row in our index array\n\n                indexArray.push(indexRow);\n\n            }\n\n            // generate indices\n\n            for (x = 0; x < radialSegments; x++) {\n\n                for (y = 0; y < heightSegments; y++) {\n\n                    // we use the index array to access the correct indices\n\n                    var a = indexArray[y][x];\n                    var b = indexArray[y + 1][x];\n                    var c = indexArray[y + 1][x + 1];\n                    var d = indexArray[y][x + 1];\n\n                    // faces\n\n                    indices.push(a, b, d);\n                    indices.push(b, c, d);\n\n                    // update group counter\n\n                    groupCount += 6;\n\n                }\n\n            }\n\n            // add a group to the geometry. this will ensure multi material support\n\n            scope.addGroup(groupStart, groupCount, 0);\n\n            // calculate new start value for groups\n\n            groupStart += groupCount;\n\n        }\n\n        function generateCap(top) {\n\n            var x, centerIndexStart, centerIndexEnd;\n\n            var uv = new Vector2();\n            var vertex = new Vector3();\n\n            var groupCount = 0;\n\n            var radius = (top === true) ? radiusTop : radiusBottom;\n            var sign = (top === true) ? 1 : - 1;\n\n            // save the index of the first center vertex\n            centerIndexStart = index;\n\n            // first we generate the center vertex data of the cap.\n            // because the geometry needs one set of uvs per face,\n            // we must generate a center vertex per face/segment\n\n            for (x = 1; x <= radialSegments; x++) {\n\n                // vertex\n\n                vertices.push(0, halfHeight * sign, 0);\n\n                // normal\n\n                normals.push(0, sign, 0);\n\n                // uv\n\n                uvs.push(0.5, 0.5);\n\n                // increase index\n\n                index++;\n\n            }\n\n            // save the index of the last center vertex\n\n            centerIndexEnd = index;\n\n            // now we generate the surrounding vertices, normals and uvs\n\n            for (x = 0; x <= radialSegments; x++) {\n\n                var u = x / radialSegments;\n                var theta = u * thetaLength + thetaStart;\n\n                var cosTheta = Math.cos(theta);\n                var sinTheta = Math.sin(theta);\n\n                // vertex\n\n                vertex.x = radius * sinTheta;\n                vertex.y = halfHeight * sign;\n                vertex.z = radius * cosTheta;\n                vertices.push(vertex.x, vertex.y, vertex.z);\n\n                // normal\n\n                normals.push(0, sign, 0);\n\n                // uv\n\n                uv.x = (cosTheta * 0.5) + 0.5;\n                uv.y = (sinTheta * 0.5 * sign) + 0.5;\n                uvs.push(uv.x, uv.y);\n\n                // increase index\n\n                index++;\n\n            }\n\n            // generate indices\n\n            for (x = 0; x < radialSegments; x++) {\n\n                var c = centerIndexStart + x;\n                var i = centerIndexEnd + x;\n\n                if (top === true) {\n\n                    // face top\n\n                    indices.push(i, i + 1, c);\n\n                } else {\n\n                    // face bottom\n\n                    indices.push(i + 1, i, c);\n\n                }\n\n                groupCount += 3;\n\n            }\n\n            // add a group to the geometry. this will ensure multi material support\n\n            scope.addGroup(groupStart, groupCount, top === true ? 1 : 2);\n\n            // calculate new start value for groups\n\n            groupStart += groupCount;\n\n        }\n\n    }\n}\n\n\nexport { CylinderGeometry, CylinderBufferGeometry };\n","import { Geometry } from '../core/Geometry';\nimport { BufferGeometry } from '../core/BufferGeometry';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\nimport { Vector3 } from '../maths/Vector3';\nimport { Vector2 } from '../maths/Vector2';\n\n// DoughnutGemetry\n\nclass DoughnutGeometry extends Geometry {\n    /**\n     * \n     * @param {number} outterRadius 外径 \n     * @param {number} height 高度 \n     * @param {number} innerRadius 内径\n     * @param {number} radialSegments 顶面拆分个数\n     * @param {number} thetaStart 开始弧度\n     * @param {number} thetaLength 结束弧度\n     */\n    constructor(outterRadius, height, innerRadius = 0, radialSegments, thetaStart, thetaLength) {\n\n        super();\n\n        this.type = 'DoughnutGeometry';\n\n        this.parameters = {\n            outterRadius,\n            height,\n            innerRadius,\n            radialSegments,\n            thetaStart,\n            thetaLength\n        };\n\n        this.fromBufferGeometry(new DoughnutBufferGeometry(outterRadius, height, innerRadius, radialSegments, thetaStart, thetaLength));\n        this.mergeVertices();\n\n    }\n}\n\n// DoughnutBufferGeometry\n\nclass DoughnutBufferGeometry extends BufferGeometry {\n    constructor(outterRadius, height, innerRadius = 0, radialSegments = 32, thetaStart = 0, thetaLength = 2.0 * Math.PI) {\n\n        super();\n        this.type = 'DoughnutBufferGeometry';\n\n        this.parameters = {\n            outterRadius,\n            height,\n            innerRadius,\n            radialSegments,\n            thetaStart,\n            thetaLength\n        };\n\n        var scope = this;\n\n        // buffers\n\n        var indices = [];\n        var vertices = [];\n        var normals = [];\n        var uvs = [];\n\n        // helper variables\n\n        var index = 0;\n        var indexArray = [];\n        var halfHeight = height / 2;\n        var groupStart = 0;\n\n        thetaLength = Math.min(thetaLength, Math.PI * 2);\n\n        // generate geometry\n\n        generateTopBottom(outterRadius, innerRadius, height);\n        generateOutterInnerFace(outterRadius, innerRadius, height);\n        if (thetaLength !== Math.PI * 2) {\n            generateLeftRightFace();\n        }\n\n        // build geometry\n\n        this.setIndex(indices);\n        this.addAttribute('position', new Float32BufferAttribute(vertices, 3));\n      //  this.addAttribute('normal', new Float32BufferAttribute(normals, 3));\n        this.addAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n\n\n        function generateTopBottom(outterRadius, innerRadius, height) {\n\n            var groupCount = 0;\n            var x, y;\n            var normal = new Vector3();\n            var vertex = new Vector3();\n            var heightSegments = 1;\n\n\n            for (y = 0; y <= heightSegments; y++) {\n                var indexRow = [];\n                var v = y / heightSegments;\n\n                for (x = 0; x <= radialSegments; x++) {\n\n                    var u = x / radialSegments;\n\n                    var theta = u * thetaLength + thetaStart;\n\n                    var sinTheta = Math.sin(theta);\n                    var cosTheta = Math.cos(theta);\n\n\n\n                    if (innerRadius > 0) {\n\n                        vertex.x = innerRadius * sinTheta;\n                        vertex.y = - v * height + halfHeight;\n                        vertex.z = innerRadius * cosTheta;\n                        vertices.push(vertex.x, vertex.y, vertex.z);\n\n                        indexRow.push(index++);\n\n                        uvs.push(u, v);\n\n                        normal.set(0, -1, 0);\n                        normals.push(normal.x, normal.y, normal.z);\n\n                    } else {\n                        if (indexRow.length === 0) {\n                            indexRow.push(index++);\n                            let length = vertices.length;\n                            vertices[length] = 0;\n                            vertices[length + 1] = - v * height + halfHeight;\n                            vertices[length + 2] = 0;\n\n\n                            // uv\n                            let uvLen = uvs.length;\n                            uvs[uvLen] = 0.5;\n                            uvs[uvLen + 1] = 0;\n\n\n\n                            // // normal\n                            // if (y == heightSegments) {\n                            //     normal.set(0, 1, 0);\n                            // } else {\n                            normal.set(0, -1, 0);\n                            // }\n\n                            normals.push(normal.x, normal.y, normal.z);\n                        }\n\n\n                    }\n\n\n                    // vertex\n\n                    vertex.x = outterRadius * sinTheta;\n                    vertex.y = - v * height + halfHeight;\n                    vertex.z = outterRadius * cosTheta;\n                    vertices.push(vertex.x, vertex.y, vertex.z);\n\n                    // uv\n\n                    uvs.push(u, 1 - v);\n\n\n                    // normal\n                    // if (y == heightSegments) {\n                    //     normal.set(0, 1, 0);\n                    // } else {\n                    normal.set(0, -1, 0);\n                    //}\n\n                    normals.push(normal.x, normal.y, normal.z);\n\n                    indexRow.push(index++);\n\n                }\n\n                // now save vertices of the row in our index array\n\n                indexArray.push(indexRow);\n\n            }\n            // top bottom indices\n            for (y = 0; y <= heightSegments; y++) {\n\n                groupCount = 0;\n\n                for (x = 0; x < radialSegments; x++) {\n\n\n                    if (innerRadius > 0) {\n                        var a = indexArray[y][2 * x + 1];\n                        var b = indexArray[y][2 * x];\n                        var c = indexArray[y][2 * x + 2];\n                        var d = indexArray[y][2 * x + 3];\n\n                        // faces\n                        indices.push(a, b, d);\n                        indices.push(b, c, d);\n\n                        // update group counter\n\n                        groupCount += 6;\n\n                    } else {\n                        var a = indexArray[y][x + 1];\n                        var b = indexArray[y][0];\n                        var c = indexArray[y][x + 2];\n\n                        // faces\n                        indices.push(a, b, c);\n                        groupCount += 3;\n                    }\n                }\n\n                // add a group to the geometry. this will ensure multi material support\n\n                scope.addGroup(groupStart, groupCount, 0);\n\n\n                // calculate new start value for groups\n\n                groupStart += groupCount;\n            }\n\n\n        }\n\n\n        function generateOutterInnerFace(outterRadius, innerRadius, height) {\n\n            var groupCount = 0;\n            var x, y;\n            var normal = new Vector3();\n            var vertex = new Vector3();\n            var heightSegments = 1;\n            for (y = 0; y <= heightSegments; y++) {\n                var indexRow = [];\n                var v = y / heightSegments;\n\n                for (x = 0; x <= radialSegments; x++) {\n\n                    var u = x / radialSegments;\n\n                    var theta = u * thetaLength + thetaStart;\n\n                    var sinTheta = Math.sin(theta);\n                    var cosTheta = Math.cos(theta);\n\n\n\n                    if (innerRadius > 0) {\n\n                        vertex.x = innerRadius * sinTheta;\n                        vertex.y = - v * height + halfHeight;\n                        vertex.z = innerRadius * cosTheta;\n                        vertices.push(vertex.x, vertex.y, vertex.z);\n\n                        indexRow.push(index++);\n\n                        uvs.push(u, v);\n\n                        normal.set(sinTheta, 0, cosTheta).normalize();\n                        normals.push(normal.x, normal.y, normal.z);\n\n                    }\n\n\n                    // vertex\n\n                    vertex.x = outterRadius * sinTheta;\n                    vertex.y = - v * height + halfHeight;\n                    vertex.z = outterRadius * cosTheta;\n                    vertices.push(vertex.x, vertex.y, vertex.z);\n\n                    // uv\n\n                    uvs.push(u, 1 - v);\n\n\n                    // normal\n                    // if (y == heightSegments) {\n                    //     normal.set(0, 1, 0);\n                    // } else {\n                    normal.set(sinTheta, 0, cosTheta).normalize();\n                    //}\n\n                    normals.push(normal.x, normal.y, normal.z);\n\n                    indexRow.push(index++);\n\n                }\n\n                // now save vertices of the row in our index array\n\n                indexArray.push(indexRow);\n\n            }\n\n            // outter inner indices\n            //如果内径为0,内侧面就不需要绘制了\n            let faceNum = innerRadius === 0 ? 0 : 1;\n            let indexLen = indexArray.length - 2;\n            let a, b, c, d;\n            for (let t = 0; t <= faceNum; t++) {\n\n                groupCount = 0;\n\n                for (x = 0; x < radialSegments; x++) {\n\n                    if (t == 0) {\n                        if (faceNum === t) {\n                            a = indexArray[y][x];\n                            b = indexArray[y + 1][x];\n                            c = indexArray[y + 1][x + 1];\n                            d = indexArray[y][x + 1];\n                        } else {\n                            a = indexArray[indexLen][2 * x + 1];\n                            b = indexArray[indexLen + 1][2 * x + 1];\n\n                            c = indexArray[indexLen + 1][2 * x + 3];\n                            d = indexArray[indexLen][2 * x + 3];\n                        }\n\n\n\n                    } else {\n                        a = indexArray[indexLen][2 * x];\n                        b = indexArray[indexLen + 1][2 * x];\n\n                        c = indexArray[indexLen + 1][2 * x + 2];\n                        d = indexArray[indexLen][2 * x + 2];\n                    }\n                    // faces\n                    indices.push(a, b, d);\n                    indices.push(b, c, d);\n\n                    // update group counter\n\n                    groupCount += 6;\n                }\n\n                // add a group to the geometry. this will ensure multi material support\n\n                scope.addGroup(groupStart, groupCount, 0);\n\n\n                // calculate new start value for groups\n\n                groupStart += groupCount;\n            }\n\n        }\n\n        function generateLeftRightFace() {\n            //left\n            let a, b, c, d;\n\n            a = indexArray[0][1];\n            b = indexArray[1][1];\n            c = indexArray[1][0];\n            d = indexArray[0][0];\n\n            function generateFace(a, b, c, d) {\n                let groupCount = 0;\n                let indexRow = [];\n                let normal = new Vector3();\n\n                [a, b, c, d].forEach((no, ind) => {\n\n                    vertices.push(vertices[3 * no], vertices[3 * no + 1], vertices[3 * no + 2]);\n                    // uv\n                    uvs.push(ind < 2 ? 0 : 1, ind == 0 || ind == 3 ? 1 : 0);\n\n                    let vec1 = new Vector3(vertices[3 * d], vertices[3 * d + 1], vertices[3 * d + 2]);\n                    vec1.sub(new Vector3(vertices[3 * a], vertices[3 * a + 1], vertices[3 * a + 2]));\n                    let vec2 = new Vector3(0, -1, 0)\n                    normal = vec1.cross(vec2);\n                    normal.normalize();\n                    normals.push(normal.x, normal.y, normal.z);\n\n                    indexRow.push(index++);\n                });\n\n                indexArray.push(indexRow);\n\n                a = indexRow[0];\n                b = indexRow[1];\n                c = indexRow[2];\n                d = indexRow[3];\n\n                // faces\n                indices.push(a, b, d);\n                indices.push(b, c, d);\n\n                // update group counter\n\n                groupCount += 6;\n\n                scope.addGroup(groupStart, groupCount, 0);\n\n                groupStart += groupCount;\n            }\n            generateFace(a, b, c, d);\n\n            //right\n            let len = indexArray[0].length - 1;\n            if (innerRadius > 0) {\n                a = indexArray[0][len - 1];\n                b = indexArray[1][len - 1];\n                c = indexArray[1][len];\n                d = indexArray[0][len];\n            } else {\n                a = indexArray[0][len];\n                b = indexArray[1][len];\n                c = indexArray[1][0];\n                d = indexArray[0][0];\n            }\n\n            generateFace(a, b, c, d);\n\n        }\n\n    }\n}\n\n\n\nexport { DoughnutGeometry, DoughnutBufferGeometry };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n * Port from https://github.com/mapbox/earcut (v2.1.2)\n */\n\nvar Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim ) {\n\n\t\tdim = dim || 2;\n\n\t\tvar hasHoles = holeIndices && holeIndices.length,\n\t\t\touterLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\n\t\t\touterNode = linkedList( data, 0, outerLen, dim, true ),\n\t\t\ttriangles = [];\n\n\t\tif ( ! outerNode ) return triangles;\n\n\t\tvar minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( var i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\n\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tvar i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\n\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tvar p = start, again;\n\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\n\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tvar stop = ear, prev, next;\n\n\t// iterate through ears, slicing them one by one\n\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertice leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( ear, triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\n\nfunction isEar( ear ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tvar p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\n\tvar minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\n\tvar minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\t// first look for points inside the triangle in increasing z-order\n\n\tvar p = ear.nextZ;\n\n\twhile ( p && p.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.nextZ;\n\n\t}\n\n\t// then look for points in decreasing z-order\n\n\tp = ear.prevZ;\n\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\n\t\tp = p.prevZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\n\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tvar p = start;\n\n\tdo {\n\n\t\tvar a = p.prev, b = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn p;\n\n}\n\n// try splitting polygon into two and triangulate them independently\n\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\n\tvar a = start;\n\n\tdo {\n\n\t\tvar b = a.next.next;\n\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\n\t\t\t\tvar c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\n\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tvar queue = [], i, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\n\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\n\tif ( outerNode ) {\n\n\t\tvar b = splitPolygon( outerNode, hole );\n\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\n\nfunction findHoleBridge( hole, outerNode ) {\n\n\tvar p = outerNode,\n\t\thx = hole.x,\n\t\thy = hole.y,\n\t\tqx = - Infinity,\n\t\tm;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tvar x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m.prev; // hole touches outer segment; pick lower endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tvar stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y,\n\t\ttanMin = Infinity,\n\t\ttan;\n\n\tp = m.next;\n\n\twhile ( p !== stop ) {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( ( tan < tanMin || ( tan === tanMin && p.x > m.x ) ) && locallyInside( p, hole ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t}\n\n\treturn m;\n\n}\n\n// interlink polygon nodes in z-order\n\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tvar p = start;\n\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\n\nfunction sortLinked( list ) {\n\n\tvar i, p, q, e, tail, numMerges, pSize, qSize, inSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\n\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\n\nfunction getLeftmost( start ) {\n\n\tvar p = start, leftmost = start;\n\n\tdo {\n\n\t\tif ( p.x < leftmost.x ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\n\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t ( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t ( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\n\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) &&\n\t\tlocallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b );\n\n}\n\n// signed area of a triangle\n\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\n\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\n\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tif ( ( equals( p1, q1 ) && equals( p2, q2 ) ) ||\n\t\t\t( equals( p1, q2 ) && equals( p2, q1 ) ) ) return true;\n\n\treturn area( p1, q1, p2 ) > 0 !== area( p1, q1, q2 ) > 0 &&\n\t\t\t\t area( p2, q2, p1 ) > 0 !== area( p2, q2, q1 ) > 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\n\nfunction intersectsPolygon( a, b ) {\n\n\tvar p = a;\n\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\t\t\tintersects( p, p.next, a, b ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\n\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\n\nfunction middleInside( a, b ) {\n\n\tvar p = a,\n\t\tinside = false,\n\t\tpx = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) ) {\n\n\t\t\tinside = ! inside;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\n\nfunction splitPolygon( a, b ) {\n\n\tvar a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\n\nfunction insertNode( i, x, y, last ) {\n\n\tvar p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertice index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertice nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tvar sum = 0;\n\n\tfor ( var i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nexport { Earcut };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nimport { Earcut } from './Earcut.js';\n\nvar ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tvar n = contour.length;\n\t\tvar a = 0.0;\n\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t},\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tvar vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tvar holeIndices = []; // array of hole indices\n\t\tvar faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tvar holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( var i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tvar triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( var i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n};\n\nfunction removeDupEndPts( points ) {\n\n\tvar l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( var i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\nexport { ShapeUtils };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline is bevel\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector2 } from '../maths/Vector2.js';\nimport { Vector3 } from '../maths/Vector3.js';\nimport { ShapeUtils } from '../extras/ShapeUtils.js';\n\n// ExtrudeGeometry\n\nclass ExtrudeGeometry extends Geometry {\n    constructor(shapes, options) {\n\n        super();\n\n        this.type = 'ExtrudeGeometry';\n\n        this.parameters = {\n            shapes: shapes,\n            options: options\n        };\n\n        this.fromBufferGeometry(new ExtrudeBufferGeometry(shapes, options));\n        this.mergeVertices();\n\n    }\n}\n\n\n// ExtrudeBufferGeometry\n\nclass ExtrudeBufferGeometry extends BufferGeometry {\n    constructor(shapes, options) {\n\n        super();\n\n        this.type = 'ExtrudeBufferGeometry';\n\n        this.parameters = {\n            shapes: shapes,\n            options: options\n        };\n\n        shapes = Array.isArray(shapes) ? shapes : [shapes];\n\n        var scope = this;\n\n        var verticesArray = [];\n        var uvArray = [];\n\n        for (var i = 0, l = shapes.length; i < l; i++) {\n\n            var shape = shapes[i];\n            addShape(shape);\n\n        }\n\n        // build geometry\n\n        this.addAttribute('position', new Float32BufferAttribute(verticesArray, 3));\n        this.addAttribute('uv', new Float32BufferAttribute(uvArray, 2));\n\n        this.computeVertexNormals();\n\n        // functions\n\n        function addShape(shape) {\n\n            var placeholder = [];\n\n            // options\n\n            var curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n            var steps = options.steps !== undefined ? options.steps : 1;\n            var depth = options.depth !== undefined ? options.depth : 100;\n\n            var bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n            var bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\n            var bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\n            var bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n            var extrudePath = options.extrudePath;\n\n            var uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n            // deprecated options\n\n            if (options.amount !== undefined) {\n\n                console.warn('THREE.ExtrudeBufferGeometry: amount has been renamed to depth.');\n                depth = options.amount;\n\n            }\n\n            //\n\n            var extrudePts, extrudeByPath = false;\n            var splineTube, binormal, normal, position2;\n\n            if (extrudePath) {\n\n                extrudePts = extrudePath.getSpacedPoints(steps);\n\n                extrudeByPath = true;\n                bevelEnabled = false; // bevels not supported for path extrusion\n\n                // SETUP TNB variables\n\n                // TODO1 - have a .isClosed in spline?\n\n                splineTube = extrudePath.computeFrenetFrames(steps, false);\n\n                // console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n                binormal = new Vector3();\n                normal = new Vector3();\n                position2 = new Vector3();\n\n            }\n\n            // Safeguards if bevels are not enabled\n\n            if (!bevelEnabled) {\n\n                bevelSegments = 0;\n                bevelThickness = 0;\n                bevelSize = 0;\n\n            }\n\n            // Variables initialization\n\n            var ahole, h, hl; // looping of holes\n\n            var shapePoints = shape.extractPoints(curveSegments);\n\n            var vertices = shapePoints.shape;\n            var holes = shapePoints.holes;\n\n            var reverse = !ShapeUtils.isClockWise(vertices);\n\n            if (reverse) {\n\n                vertices = vertices.reverse();\n\n                // Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n                for (h = 0, hl = holes.length; h < hl; h++) {\n\n                    ahole = holes[h];\n\n                    if (ShapeUtils.isClockWise(ahole)) {\n\n                        holes[h] = ahole.reverse();\n\n                    }\n\n                }\n\n            }\n\n\n            var faces = ShapeUtils.triangulateShape(vertices, holes);\n\n            /* Vertices */\n\n            var contour = vertices; // vertices has all points but contour has only points of circumference\n\n            for (h = 0, hl = holes.length; h < hl; h++) {\n\n                ahole = holes[h];\n\n                vertices = vertices.concat(ahole);\n\n            }\n\n\n            function scalePt2(pt, vec, size) {\n\n                if (!vec) console.error(\"THREE.ExtrudeGeometry: vec does not exist\");\n\n                return vec.clone().multiplyScalar(size).add(pt);\n\n            }\n\n            var b, bs, t, z,\n                vert, vlen = vertices.length,\n                face, flen = faces.length;\n\n\n            // Find directions for point movement\n\n\n            function getBevelVec(inPt, inPrev, inNext) {\n\n                // computes for inPt the corresponding point inPt' on a new contour\n                //   shifted by 1 unit (length of normalized vector) to the left\n                // if we walk along contour clockwise, this new contour is outside the old one\n                //\n                // inPt' is the intersection of the two lines parallel to the two\n                //  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n                var v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n                // good reading for geometry algorithms (here: line-line intersection)\n                // http://geomalgorithms.com/a05-_intersect-1.html\n\n                var v_prev_x = inPt.x - inPrev.x,\n                    v_prev_y = inPt.y - inPrev.y;\n                var v_next_x = inNext.x - inPt.x,\n                    v_next_y = inNext.y - inPt.y;\n\n                var v_prev_lensq = (v_prev_x * v_prev_x + v_prev_y * v_prev_y);\n\n                // check for collinear edges\n                var collinear0 = (v_prev_x * v_next_y - v_prev_y * v_next_x);\n\n                if (Math.abs(collinear0) > Number.EPSILON) {\n\n                    // not collinear\n\n                    // length of vectors for normalizing\n\n                    var v_prev_len = Math.sqrt(v_prev_lensq);\n                    var v_next_len = Math.sqrt(v_next_x * v_next_x + v_next_y * v_next_y);\n\n                    // shift adjacent points by unit vectors to the left\n\n                    var ptPrevShift_x = (inPrev.x - v_prev_y / v_prev_len);\n                    var ptPrevShift_y = (inPrev.y + v_prev_x / v_prev_len);\n\n                    var ptNextShift_x = (inNext.x - v_next_y / v_next_len);\n                    var ptNextShift_y = (inNext.y + v_next_x / v_next_len);\n\n                    // scaling factor for v_prev to intersection point\n\n                    var sf = ((ptNextShift_x - ptPrevShift_x) * v_next_y -\n                        (ptNextShift_y - ptPrevShift_y) * v_next_x) /\n                        (v_prev_x * v_next_y - v_prev_y * v_next_x);\n\n                    // vector from inPt to intersection point\n\n                    v_trans_x = (ptPrevShift_x + v_prev_x * sf - inPt.x);\n                    v_trans_y = (ptPrevShift_y + v_prev_y * sf - inPt.y);\n\n                    // Don't normalize!, otherwise sharp corners become ugly\n                    //  but prevent crazy spikes\n                    var v_trans_lensq = (v_trans_x * v_trans_x + v_trans_y * v_trans_y);\n                    if (v_trans_lensq <= 2) {\n\n                        return new Vector2(v_trans_x, v_trans_y);\n\n                    } else {\n\n                        shrink_by = Math.sqrt(v_trans_lensq / 2);\n\n                    }\n\n                } else {\n\n                    // handle special case of collinear edges\n\n                    var direction_eq = false; // assumes: opposite\n                    if (v_prev_x > Number.EPSILON) {\n\n                        if (v_next_x > Number.EPSILON) {\n\n                            direction_eq = true;\n\n                        }\n\n                    } else {\n\n                        if (v_prev_x < - Number.EPSILON) {\n\n                            if (v_next_x < - Number.EPSILON) {\n\n                                direction_eq = true;\n\n                            }\n\n                        } else {\n\n                            if (Math.sign(v_prev_y) === Math.sign(v_next_y)) {\n\n                                direction_eq = true;\n\n                            }\n\n                        }\n\n                    }\n\n                    if (direction_eq) {\n\n                        // console.log(\"Warning: lines are a straight sequence\");\n                        v_trans_x = - v_prev_y;\n                        v_trans_y = v_prev_x;\n                        shrink_by = Math.sqrt(v_prev_lensq);\n\n                    } else {\n\n                        // console.log(\"Warning: lines are a straight spike\");\n                        v_trans_x = v_prev_x;\n                        v_trans_y = v_prev_y;\n                        shrink_by = Math.sqrt(v_prev_lensq / 2);\n\n                    }\n\n                }\n\n                return new Vector2(v_trans_x / shrink_by, v_trans_y / shrink_by);\n\n            }\n\n\n            var contourMovements = [];\n\n            for (var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i++ , j++ , k++) {\n\n                if (j === il) j = 0;\n                if (k === il) k = 0;\n\n                //  (j)---(i)---(k)\n                // console.log('i,j,k', i, j , k)\n\n                contourMovements[i] = getBevelVec(contour[i], contour[j], contour[k]);\n\n            }\n\n            var holesMovements = [],\n                oneHoleMovements, verticesMovements = contourMovements.concat();\n\n            for (h = 0, hl = holes.length; h < hl; h++) {\n\n                ahole = holes[h];\n\n                oneHoleMovements = [];\n\n                for (i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i++ , j++ , k++) {\n\n                    if (j === il) j = 0;\n                    if (k === il) k = 0;\n\n                    //  (j)---(i)---(k)\n                    oneHoleMovements[i] = getBevelVec(ahole[i], ahole[j], ahole[k]);\n\n                }\n\n                holesMovements.push(oneHoleMovements);\n                verticesMovements = verticesMovements.concat(oneHoleMovements);\n\n            }\n\n\n            // Loop bevelSegments, 1 for the front, 1 for the back\n\n            for (b = 0; b < bevelSegments; b++) {\n\n                //for ( b = bevelSegments; b > 0; b -- ) {\n\n                t = b / bevelSegments;\n                z = bevelThickness * Math.cos(t * Math.PI / 2);\n                bs = bevelSize * Math.sin(t * Math.PI / 2);\n\n                // contract shape\n\n                for (i = 0, il = contour.length; i < il; i++) {\n\n                    vert = scalePt2(contour[i], contourMovements[i], bs);\n\n                    v(vert.x, vert.y, - z);\n\n                }\n\n                // expand holes\n\n                for (h = 0, hl = holes.length; h < hl; h++) {\n\n                    ahole = holes[h];\n                    oneHoleMovements = holesMovements[h];\n\n                    for (i = 0, il = ahole.length; i < il; i++) {\n\n                        vert = scalePt2(ahole[i], oneHoleMovements[i], bs);\n\n                        v(vert.x, vert.y, - z);\n\n                    }\n\n                }\n\n            }\n\n            bs = bevelSize;\n\n            // Back facing vertices\n\n            for (i = 0; i < vlen; i++) {\n\n                vert = bevelEnabled ? scalePt2(vertices[i], verticesMovements[i], bs) : vertices[i];\n\n                if (!extrudeByPath) {\n\n                    v(vert.x, vert.y, 0);\n\n                } else {\n\n                    // v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n                    normal.copy(splineTube.normals[0]).multiplyScalar(vert.x);\n                    binormal.copy(splineTube.binormals[0]).multiplyScalar(vert.y);\n\n                    position2.copy(extrudePts[0]).add(normal).add(binormal);\n\n                    v(position2.x, position2.y, position2.z);\n\n                }\n\n            }\n\n            // Add stepped vertices...\n            // Including front facing vertices\n\n            var s;\n\n            for (s = 1; s <= steps; s++) {\n\n                for (i = 0; i < vlen; i++) {\n\n                    vert = bevelEnabled ? scalePt2(vertices[i], verticesMovements[i], bs) : vertices[i];\n\n                    if (!extrudeByPath) {\n\n                        v(vert.x, vert.y, depth / steps * s);\n\n                    } else {\n\n                        // v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n                        normal.copy(splineTube.normals[s]).multiplyScalar(vert.x);\n                        binormal.copy(splineTube.binormals[s]).multiplyScalar(vert.y);\n\n                        position2.copy(extrudePts[s]).add(normal).add(binormal);\n\n                        v(position2.x, position2.y, position2.z);\n\n                    }\n\n                }\n\n            }\n\n\n            // Add bevel segments planes\n\n            //for ( b = 1; b <= bevelSegments; b ++ ) {\n            for (b = bevelSegments - 1; b >= 0; b--) {\n\n                t = b / bevelSegments;\n                z = bevelThickness * Math.cos(t * Math.PI / 2);\n                bs = bevelSize * Math.sin(t * Math.PI / 2);\n\n                // contract shape\n\n                for (i = 0, il = contour.length; i < il; i++) {\n\n                    vert = scalePt2(contour[i], contourMovements[i], bs);\n                    v(vert.x, vert.y, depth + z);\n\n                }\n\n                // expand holes\n\n                for (h = 0, hl = holes.length; h < hl; h++) {\n\n                    ahole = holes[h];\n                    oneHoleMovements = holesMovements[h];\n\n                    for (i = 0, il = ahole.length; i < il; i++) {\n\n                        vert = scalePt2(ahole[i], oneHoleMovements[i], bs);\n\n                        if (!extrudeByPath) {\n\n                            v(vert.x, vert.y, depth + z);\n\n                        } else {\n\n                            v(vert.x, vert.y + extrudePts[steps - 1].y, extrudePts[steps - 1].x + z);\n\n                        }\n\n                    }\n\n                }\n\n            }\n\n            /* Faces */\n\n            // Top and bottom faces\n\n            buildLidFaces();\n\n            // Sides faces\n\n            buildSideFaces();\n\n\n            /////  Internal functions\n\n            function buildLidFaces() {\n\n                var start = verticesArray.length / 3;\n\n                if (bevelEnabled) {\n\n                    var layer = 0; // steps + 1\n                    var offset = vlen * layer;\n\n                    // Bottom faces\n\n                    for (i = 0; i < flen; i++) {\n\n                        face = faces[i];\n                        f3(face[2] + offset, face[1] + offset, face[0] + offset);\n\n                    }\n\n                    layer = steps + bevelSegments * 2;\n                    offset = vlen * layer;\n\n                    // Top faces\n\n                    for (i = 0; i < flen; i++) {\n\n                        face = faces[i];\n                        f3(face[0] + offset, face[1] + offset, face[2] + offset);\n\n                    }\n\n                } else {\n\n                    // Bottom faces\n\n                    for (i = 0; i < flen; i++) {\n\n                        face = faces[i];\n                        f3(face[2], face[1], face[0]);\n\n                    }\n\n                    // Top faces\n\n                    for (i = 0; i < flen; i++) {\n\n                        face = faces[i];\n                        f3(face[0] + vlen * steps, face[1] + vlen * steps, face[2] + vlen * steps);\n\n                    }\n\n                }\n\n                scope.addGroup(start, verticesArray.length / 3 - start, 0);\n\n            }\n\n            // Create faces for the z-sides of the shape\n\n            function buildSideFaces() {\n\n                var start = verticesArray.length / 3;\n                var layeroffset = 0;\n                sidewalls(contour, layeroffset);\n                layeroffset += contour.length;\n\n                for (h = 0, hl = holes.length; h < hl; h++) {\n\n                    ahole = holes[h];\n                    sidewalls(ahole, layeroffset);\n\n                    //, true\n                    layeroffset += ahole.length;\n\n                }\n\n\n                scope.addGroup(start, verticesArray.length / 3 - start, 1);\n\n\n            }\n\n            function sidewalls(contour, layeroffset) {\n\n                var j, k;\n                i = contour.length;\n\n                while (--i >= 0) {\n\n                    j = i;\n                    k = i - 1;\n                    if (k < 0) k = contour.length - 1;\n\n                    //console.log('b', i,j, i-1, k,vertices.length);\n\n                    var s = 0,\n                        sl = steps + bevelSegments * 2;\n\n                    for (s = 0; s < sl; s++) {\n\n                        var slen1 = vlen * s;\n                        var slen2 = vlen * (s + 1);\n\n                        var a = layeroffset + j + slen1,\n                            b = layeroffset + k + slen1,\n                            c = layeroffset + k + slen2,\n                            d = layeroffset + j + slen2;\n\n                        f4(a, b, c, d);\n\n                    }\n\n                }\n\n            }\n\n            function v(x, y, z) {\n\n                placeholder.push(x);\n                placeholder.push(y);\n                placeholder.push(z);\n\n            }\n\n\n            function f3(a, b, c) {\n\n                addVertex(a);\n                addVertex(b);\n                addVertex(c);\n\n                var nextIndex = verticesArray.length / 3;\n                var uvs = uvgen.generateTopUV(scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1);\n\n                addUV(uvs[0]);\n                addUV(uvs[1]);\n                addUV(uvs[2]);\n\n            }\n\n            function f4(a, b, c, d) {\n\n                addVertex(a);\n                addVertex(b);\n                addVertex(d);\n\n                addVertex(b);\n                addVertex(c);\n                addVertex(d);\n\n\n                var nextIndex = verticesArray.length / 3;\n                var uvs = uvgen.generateSideWallUV(scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1);\n\n                addUV(uvs[0]);\n                addUV(uvs[1]);\n                addUV(uvs[3]);\n\n                addUV(uvs[1]);\n                addUV(uvs[2]);\n                addUV(uvs[3]);\n\n            }\n\n            function addVertex(index) {\n\n                verticesArray.push(placeholder[index * 3 + 0]);\n                verticesArray.push(placeholder[index * 3 + 1]);\n                verticesArray.push(placeholder[index * 3 + 2]);\n\n            }\n\n\n            function addUV(vector2) {\n\n                uvArray.push(vector2.x);\n                uvArray.push(vector2.y);\n\n            }\n\n        }\n    }\n}\n\nlet WorldUVGenerator = {\n\n    generateTopUV: function (geometry, vertices, indexA, indexB, indexC) {\n\n        var a_x = vertices[indexA * 3];\n        var a_y = vertices[indexA * 3 + 1];\n        var b_x = vertices[indexB * 3];\n        var b_y = vertices[indexB * 3 + 1];\n        var c_x = vertices[indexC * 3];\n        var c_y = vertices[indexC * 3 + 1];\n\n        return [\n            new Vector2(a_x, a_y),\n            new Vector2(b_x, b_y),\n            new Vector2(c_x, c_y)\n        ];\n\n    },\n\n    generateSideWallUV: function (geometry, vertices, indexA, indexB, indexC, indexD) {\n\n        var a_x = vertices[indexA * 3];\n        var a_y = vertices[indexA * 3 + 1];\n        var a_z = vertices[indexA * 3 + 2];\n        var b_x = vertices[indexB * 3];\n        var b_y = vertices[indexB * 3 + 1];\n        var b_z = vertices[indexB * 3 + 2];\n        var c_x = vertices[indexC * 3];\n        var c_y = vertices[indexC * 3 + 1];\n        var c_z = vertices[indexC * 3 + 2];\n        var d_x = vertices[indexD * 3];\n        var d_y = vertices[indexD * 3 + 1];\n        var d_z = vertices[indexD * 3 + 2];\n\n        if (Math.abs(a_y - b_y) < 0.01) {\n\n            return [\n                new Vector2(a_x, 1 - a_z),\n                new Vector2(b_x, 1 - b_z),\n                new Vector2(c_x, 1 - c_z),\n                new Vector2(d_x, 1 - d_z)\n            ];\n\n        } else {\n\n            return [\n                new Vector2(a_y, 1 - a_z),\n                new Vector2(b_y, 1 - b_z),\n                new Vector2(c_y, 1 - c_z),\n                new Vector2(d_y, 1 - d_z)\n            ];\n\n        }\n\n    }\n};\n\n\nexport { ExtrudeGeometry, ExtrudeBufferGeometry };\n","//所有的预定几何体\n\n\nexport { CircleGeometry, CircleBufferGeometry } from './CircleGeometry';\nexport { PlaneGeometry, PlaneBufferGeometry } from './PlaneGeometry';\n\nexport { BoxGeometry, BoxBufferGeometry } from './BoxGeometry';\nexport { SphereGeometry, SphereBufferGeometry } from './SphereGeometry';\nexport { CylinderGeometry, CylinderBufferGeometry } from './CylinderGeometry';\n\nexport { DoughnutGeometry, DoughnutBufferGeometry } from './DoughnutGeometry';\nexport { ExtrudeGeometry, ExtrudeBufferGeometry } from './ExtrudeGeometry';\n\n\n\nexport { LineSegmentsGeometry } from './LineSegmentsGeometry'\nexport { LineGeometry } from './LineGeometry';","import { Material } from \"./Material\";\nimport { Color } from '../maths/Color'\n\nclass MeshLambertMaterial extends Material {\n    constructor(parameters) {\n        super();\n\n        this.type = 'MeshLambertMaterial';\n\n        this.color = new Color(0xffffff); // diffuse\n\n        this.map = null;\n\n        //设置放射光颜色\n        this.emissive = new Color(0x000000);\n        //设置放射光贴图强度\n        this.emissiveIntensity = 1.0;\n\n        this.wireframe = false;\n        this.wireframeLinewidth = 1;\n\n\n        this.setValues(parameters);\n\n\n    }\n\n    get isMeshLambertMaterial() {\n        return true;\n    }\n\n    copy(source) {\n        super.copy(source);\n\n        this.color.copy(source.color);\n\n        this.map = source.map;\n\n        this.emissive.copy(source.emissive);\n        this.emissiveIntensity = source.emissiveIntensity;\n\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n\n        return this;\n    }\n}\n\nexport { MeshLambertMaterial };","import { Color } from '../maths/Color'\nimport { Material } from \"./Material\";\n\nclass MeshPhongMaterial extends Material {\n    constructor(parameters) {\n\n        super();\n\n        this.type = 'MeshPhongMaterial';\n\n        this.color = new Color(0xffffff); // diffuse\n        //高亮的颜色 todo:目前测试没有效果\n        this.specular = new Color(0x111111);\n\n        //设置亮度\n        this.shininess = 30;\n\n        this.map = null;\n\n        //设置放射光颜色\n        this.emissive = new Color(0x000000);\n        //设置放射光贴图强度\n        this.emissiveIntensity = 1.0;\n\n\n        this.wireframe = false;\n        this.wireframeLinewidth = 1;\n        this.setValues(parameters);\n\n    }\n\n    get isMeshPhongMaterial() {\n        return true;\n    }\n\n    copy(source) {\n        super.copy(source);\n\n        this.color.copy(source.color);\n        this.specular.copy(source.specular);\n        this.shininess = source.shininess;\n\n        this.map = source.map;\n\n        this.emissive.copy(source.emissive);\n        this.emissiveIntensity = source.emissiveIntensity;\n\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n\n        return this;\n    }\n}\n\nexport { MeshPhongMaterial };","import { LineBasicMaterial } from \"./LineBasicMaterial\";\n\n\nclass LineDashedMaterial extends LineBasicMaterial {\n    constructor(parameters) {\n        super();\n\n        this.type = 'LineDashedMaterial';\n\n        //以下三个参数的配置与顶点数据的大小有关 \n\n        this.scale = 1;        //虚线整体的缩放 \n        this.dashSize = 3;     //虚线点的长度  \n        this.gapSize = 1;      //虚线间距的大小\n\n        this.setValues(parameters);\n\n    }\n\n    get isLineDashedMaterial() {\n        return true;\n    }\n\n    copy(source) {\n\n        super.copy(source);\n        this.scale = source.scale;\n        this.dashSize = source.dashSize;\n        this.gapSize = source.gapSize;\n\n        return this;\n    }\n}\n\n\nexport { LineDashedMaterial };","import { Material } from \"./Material\";\n\n\nclass ShaderMaterial extends Material {\n    constructor(parameters) {\n        super();\n\n        this.type = 'ShaderMaterial';\n\n        this.defines = {};\n        this.uniforms = {};\n\n        this.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\n        this.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\n\n        this.linewidth = 1;\n\n        this.wireframe = false;\n        this.wireframeLinewidth = 1;\n\n        this.lights = false;\n\n        // When rendered geometry doesn't include these attributes but the material does,\n        // use these default values in WebGL. This avoids errors when buffer data is missing.\n        this.defaultAttributeValues = {\n            'color': [1, 1, 1],\n            'uv': [0, 0],\n            'uv2': [0, 0]\n        };\n\n        this.index0AttributeName = undefined;\n        this.uniformsNeedUpdate = false;\n\n        if (parameters !== undefined) {\n\n            if (parameters.attributes !== undefined) {\n\n                console.error('ShaderMaterial: attributes should now be defined in BufferGeometry instead.');\n\n            }\n\n            this.setValues(parameters);\n\n        }\n\n    }\n\n    get isShaderMaterial(){\n        return true;\n    }\n\n    copy(source) {\n\n        super.copy(source);\n        this.fragmentShader = source.fragmentShader;\n        this.vertexShader = source.vertexShader;\n\n        this.uniforms = UniformsUtils.clone(source.uniforms);\n\n        this.defines = Object.assign({}, source.defines);\n\n        this.wireframe = source.wireframe;\n        this.wireframeLinewidth = source.wireframeLinewidth;\n\n        this.lights = source.lights;\n\n        return this;\n\n\n    }\n\n}\n\nexport { ShaderMaterial }","\nimport { ShaderMaterial } from './ShaderMaterial.js';\n\n\nclass RawShaderMaterial extends ShaderMaterial {\n    constructor(parameters) {\n\n        super(parameters);\n\n        this.type = 'RawShaderMaterial';\n\n    }\n    get isRawShaderMaterial(){\n        return true;\n    }\n}\n\n\nexport { RawShaderMaterial };","//所有的材质\n//mesh\nexport { MeshBasicMaterial } from './MeshBasicMaterial';\nexport { MeshLambertMaterial } from './MeshLambertMaterial';\nexport { MeshPhongMaterial } from './MeshPhongMaterial';\n\n//line \nexport { LineBasicMaterial } from './LineBasicMaterial';\nexport { LineDashedMaterial } from './LineDashedMaterial';\n\nexport { LineMeshMaterial } from './LineMeshMaterial';\n\n//point\nexport { PointsMaterial } from './PointsMaterial';\n\n//精灵\nexport { SpriteMaterial } from './SpriteMaterial';\n\n//自定义shader\nexport { ShaderMaterial } from './ShaderMaterial';\nexport { RawShaderMaterial } from './RawShaderMaterial';\n\n\n\n\n","import { Object3D } from '../core/Object3D';\nimport { Color } from '../maths/Color';\n\nclass Light extends Object3D {\n    constructor(color, intensity) {\n        super();\n        this.type = 'Light';\n\n        this.color = new Color(color);\n        this.intensity = intensity !== undefined ? intensity : 1;\n\n    }\n    get isLight() {\n        return true;\n    }\n\n}\n\nexport { Light };","import { Light } from \"./Light\";\nimport { Object3D } from '../core/Object3D';\n\nclass SpotLight extends Light {\n    constructor(color, intensity, distance, angle, penumbra, decay) {\n        super(color, intensity);\n\n        this.type = 'SpotLight';\n\n        this.position.copy(Object3D.DefaultUp);\n        this.updateMatrix();\n\n        this.target = new Object3D();\n\n        this.distance = (distance !== undefined) ? distance : 0;\n        this.angle = (angle !== undefined) ? angle : Math.PI / 3;\n        this.penumbra = (penumbra !== undefined) ? penumbra : 0;\n        this.decay = (decay !== undefined) ? decay : 1;\t// for physically correct lights, should be 2.\n        \n\n    }\n\n    get isSpotLight(){\n        return true;\n    }\n\n    // intensity = power per solid angle.\n    // ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n    get power() {\n        return this.intensity * Math.PI;\n    }\n    set power(power) {\n\n        this.intensity = power / Math.PI;\n\n    }\n}\n\nexport { SpotLight };","import { Light } from \"./Light\";\n\n\nclass PointLight extends Light {\n    constructor(color, intensity, distance, decay) {\n        super(color, intensity);\n        this.type = 'PointLight';\n\n        this.distance = (distance !== undefined) ? distance : 0;\n        this.decay = (decay !== undefined) ? decay : 1;\t// for physically correct lights, should be 2.\n\n    }\n    get isPointLight(){\n        return true;\n    }\n    // intensity = power per solid angle.\n    // ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n    get power() {\n        return this.intensity * 4 * Math.PI;\n    }\n    set power(power) {\n\n        this.intensity = power / (4 * Math.PI);\n\n    }\n\n}\n\nexport { PointLight };","import { Light } from \"./Light\";\nimport { Object3D } from '../core/Object3D';\n\n\nclass DirectionalLight extends Light {\n    constructor(color, intensity) {\n        super(color, intensity);\n\n        this.type = 'DirectionalLight';\n\n        this.position.copy(Object3D.DefaultUp);\n        this.updateMatrix();\n\n        this.target = new Object3D();\n\n\n    }\n    \n    get isDirectionalLight() {\n        return true;\n    }\n}\n\nexport { DirectionalLight };","import { Light } from \"./Light\";\n\n\nclass AmbientLight extends Light {\n    constructor(color, intensity) {\n        super(color, intensity);\n        this.type = 'AmbientLight';\n    }\n    get isAmbientLight() {\n        return true;\n    }\n}\n\nexport { AmbientLight };","import { Object3D } from '../core/Object3D';\nimport { Matrix4 } from '../maths/Matrix4';\nimport { Quaternion } from '../maths/Quaternion'\nimport { Vector3 } from '../maths/Vector3';\n\n\nclass Camera extends Object3D {\n    constructor() {\n        super();\n\n        //viewMatrix\n        this.matrixWorldInverse = new Matrix4();\n        this.projectionMatrix = new Matrix4();\n\n        this.isCamera = true;\n    }\n\n    updateMatrixWorld(force) {\n\n        super.updateMatrixWorld(force);\n\n        this.matrixWorldInverse.getInverse(this.matrixWorld);\n\n    }\n\n    getWorldDirection(target) {\n        return getWorldDirection.call(this, target);\n    }\n\n\n}\n\nlet getWorldDirection = (function () {\n\n    let quaternion = new Quaternion();\n\n    return function getWorldDirection(target) {\n\n        if (target === undefined) {\n\n            console.warn('Camera: .getWorldDirection() target is now required');\n            target = new Vector3();\n\n        }\n\n        this.getWorldQuaternion(quaternion);\n\n        return target.set(0, 0, - 1).applyQuaternion(quaternion);\n\n    };\n\n})()\n\nexport { Camera };\n\n\n","import { Camera } from \"./Camera\";\nimport { _Math } from '../maths/Math';\n\n/**\n * @class 透视相机\n * @author bujue\n */\n\nclass PerspectiveCamera extends Camera {\n    constructor(fov, aspect, near, far) {\n        super();\n\n        this.type = 'PerspectiveCamera';\n\n        this.fov = fov !== undefined ? fov : 50;\n        this.zoom = 1;\n\n        this.near = near !== undefined ? near : 0.1;\n        this.far = far !== undefined ? far : 2000;\n        this.focus = 10;\n\n        this.aspect = aspect !== undefined ? aspect : 1;\n        this.view = null;\n\n\n        this.updateProjectionMatrix();\n\n        this.isPerspectiveCamera = true;\n    }\n\n    updateProjectionMatrix() {\n\n        var near = this.near,\n            top = near * Math.tan(\n                _Math.DEG2RAD * 0.5 * this.fov) / this.zoom,\n            height = 2 * top,\n            width = this.aspect * height,\n            left = - 0.5 * width,\n            view = this.view;\n\n        this.projectionMatrix.makePerspective(left, left + width, top, top - height, near, this.far);\n\n    }\n}\n\n\nexport { PerspectiveCamera };","import { Camera } from \"./Camera\";\n\n/**\n * @class 正交投影相机\n * @author bujue\n */\n\nclass OrthographicCamera extends Camera {\n    constructor(left, right, top, bottom, near, far ) {\n        super();\n        this.type = 'OrthographicCamera';\n\n        this.zoom = 1;\n        this.view = null;\n\n        this.left = left;\n        this.right = right;\n        this.top = top;\n        this.bottom = bottom;\n\n        this.near = (near !== undefined) ? near : 0.1;\n        this.far = (far !== undefined) ? far : 2000;\n\n        this.isOrthographicCamera = true;\n\n        this.updateProjectionMatrix();\n    }\n\n    updateProjectionMatrix() {\n\n        var dx = (this.right - this.left) / (2 * this.zoom);\n        var dy = (this.top - this.bottom) / (2 * this.zoom);\n        var cx = (this.right + this.left) / 2;\n        var cy = (this.top + this.bottom) / 2;\n\n        var left = cx - dx;\n        var right = cx + dx;\n        var top = cy + dy;\n        var bottom = cy - dy;\n\n        this.projectionMatrix.makeOrthographic(left, right, top, bottom, this.near, this.far);\n\n    }\n\n}\n\nexport { OrthographicCamera };","import { BufferAttribute } from './BufferAttribute';\n\nclass InstancedBufferAttribute extends BufferAttribute {\n    constructor(array, itemSize, meshPerAttribute) {\n        super()\n\n        BufferAttribute.call(this, array, itemSize);\n\n        this.meshPerAttribute = meshPerAttribute || 1;\n\n        this.isInstancedBufferAttribute = true;\n\n    }\n    copy(source) {\n\n        super.copy(source);\n\n        this.meshPerAttribute = source.meshPerAttribute;\n\n        return this;\n\n    }\n}\n\n\n\n\n\nexport { InstancedBufferAttribute };","import { Ray } from \"../maths/Ray\";\nimport { Matrix4 } from \"..\";\n\n\nclass Raycaster {\n    constructor(origin, direction, near, far) {\n\n        //direction is assumed to be normalized (for accurate distance calculations)\n        this.ray = new Ray(origin, direction);\n\n        this.near = near || 0;\n        this.far = far || Infinity;\n\n        this.params = {\n            Mesh: {},\n            Line: {},\n            LOD: {},\n            Points: { threshold: 1 },\n            Sprite: {}\n        }\n\n        this.linePrecision = 1;\n    }\n\n    set(origin, direction) {\n\n        // direction is assumed to be normalized (for accurate distance calculations)\n        this.ray.set(origin, direction);\n    }\n\n    setFromCamera(coords, camera) {\n\n        //upproject\n        let matrix1 = new Matrix4();\n        matrix1.multiplyMatrices(camera.matrixWorld, matrix1.getInverse(camera.projectionMatrix));\n\n        if ((camera && camera.isPerspectiveCamera)) {\n\n            this.ray.origin.setFromMatrixPosition(camera.matrixWorld);\n\n            this.ray.direction.set(coords.x, coords.y, 0.5).applyMatrix4(matrix1).sub(this.ray.origin).normalize();\n\n        } else if ((camera && camera.isOrthographicCamera)) {\n\n            this.ray.origin.set(coords.x, coords.y, (camera.near + camera.far) / (camera.near - camera.far)).applyMatrix4(matrix1); // set origin in plane of camera\n            this.ray.direction.set(0, 0, - 1).transformDirection(camera.matrixWorld);\n\n        } else {\n\n            console.error('Raycaster: Unsupported camera type.');\n\n        }\n\n    }\n\n    intersectObject(object, recursive, optionalTarget) {\n\n        var intersects = optionalTarget || [];\n\n        intersectObject(object, this, intersects, recursive);\n\n        intersects.sort(ascSort);\n\n        return intersects;\n\n    }\n\n    //返回值结构 [ { distance, point, face, faceIndex, indices, object }, ... ]\n    //*注意*，对于网格，面（faces）必须朝向射线原点，这样才能被检测到；通过背面的射线的交叉点将不被检测到。 为了光线投射一个对象的正反两面，你得设置 material 的 side 属性为 THREE.DoubleSide\n    intersectObjects(objects, recursive, optionalTarget) {\n\n        var intersects = optionalTarget || [];\n\n        if (Array.isArray(objects) === false) {\n\n            console.warn('Raycaster.intersectObjects: objects is not an Array.');\n            return intersects;\n\n        }\n\n        for (var i = 0, l = objects.length; i < l; i++) {\n\n            intersectObject(objects[i], this, intersects, recursive);\n\n        }\n\n        intersects.sort(ascSort);\n\n        return intersects;\n\n    }\n\n}\n\nfunction ascSort(a, b) {\n\n    return a.distance - b.distance;\n\n}\n\nfunction intersectObject(object, raycaster, intersects, recursive) {\n\n    if (object.visible === false) return;\n\n    object.raycast(raycaster, intersects);\n\n    if (recursive === true) {\n\n        var children = object.children;\n\n        for (var i = 0, l = children.length; i < l; i++) {\n\n            intersectObject(children[i], raycaster, intersects, true);\n\n        }\n\n    }\n\n}\n\nexport { Raycaster };","import { _Math } from './Math.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The poles (phi) are at the positive and negative y axis.\n * The equator starts at positive z.\n */\n\nclass Spherical {\n    constructor(radius, phi, theta) {\n\n        this.radius = (radius !== undefined) ? radius : 1.0;\n        this.phi = (phi !== undefined) ? phi : 0; // up / down towards top and bottom pole\n        this.theta = (theta !== undefined) ? theta : 0; // around the equator of the sphere\n\n        return this;\n\n    }\n\n    set(radius, phi, theta) {\n\n        this.radius = radius;\n        this.phi = phi;\n        this.theta = theta;\n\n        return this;\n\n    }\n    clone() {\n\n        return new this.constructor().copy(this);\n\n    }\n    copy(other) {\n\n        this.radius = other.radius;\n        this.phi = other.phi;\n        this.theta = other.theta;\n\n        return this;\n\n    }\n    // restrict phi to be betwee EPS and PI-EPS\n    makeSafe() {\n\n        let EPS = 0.000001;\n        this.phi = Math.max(EPS, Math.min(Math.PI - EPS, this.phi));\n\n        return this;\n\n    }\n\n    setFromVector3(vec3) {\n\n        this.radius = vec3.length();\n\n        if (this.radius === 0) {\n\n            this.theta = 0;\n            this.phi = 0;\n\n        } else {\n\n            this.theta = Math.atan2(vec3.x, vec3.z); // equator angle around y-up axis\n            this.phi = Math.acos(_Math.clamp(vec3.y / this.radius, - 1, 1)); // polar angle\n\n        }\n\n        return this;\n\n    }\n}\n\n\n\nexport { Spherical };","import { _Math } from '../../maths/Math.js';\nimport { Vector3 } from '../../maths/Vector3.js';\nimport { Matrix4 } from '../../maths/Matrix4.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\n class Curve {\n    constructor(){\n        this.type = 'Curve';\n\n        this.arcLengthDivisions = 200; \n    }\n\n    // Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint ( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t}\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt ( u, optionalTarget ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t}\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get total curve arc length\n\n\tgetLength () {\n\n\t\tvar lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t}\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tvar cache = [];\n\t\tvar current, last = this.getPoint( 0 );\n\t\tvar p, sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t}\n\n\tupdateArcLengths () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t}\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping( u, distance ) {\n\n\t\tvar arcLengths = this.getLengths();\n\n\t\tvar i = 0, il = arcLengths.length;\n\n\t\tvar targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tvar low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tvar lengthBefore = arcLengths[ i ];\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\n\n\t\tvar segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t}\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent ( t ) {\n\n\t\tvar delta = 0.0001;\n\t\tvar t1 = t - delta;\n\t\tvar t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tvar pt1 = this.getPoint( t1 );\n\t\tvar pt2 = this.getPoint( t2 );\n\n\t\tvar vec = pt2.clone().sub( pt1 );\n\t\treturn vec.normalize();\n\n\t}\n\n\tgetTangentAt ( u ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t );\n\n\t}\n\n\tcomputeFrenetFrames ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tvar normal = new Vector3();\n\n\t\tvar tangents = [];\n\t\tvar normals = [];\n\t\tvar binormals = [];\n\n\t\tvar vec = new Vector3();\n\t\tvar mat = new Matrix4();\n\n\t\tvar i, u, theta;\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\t\tu = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tvar min = Number.MAX_VALUE;\n\t\tvar tx = Math.abs( tangents[ 0 ].x );\n\t\tvar ty = Math.abs( tangents[ 0 ].y );\n\t\tvar tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\ttheta = Math.acos( _Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\ttheta = Math.acos( _Math.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t}\n\n\tclone () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy ( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON ( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n }\n\n\n\n\n\n\nexport { Curve };","import { Curve } from '../core/Curve.js';\nimport { Vector2 } from '../../maths/Vector2.js';\n\n\nclass EllipseCurve extends Curve {\n    constructor(aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation) {\n        \n        super();\n\n        this.type = 'EllipseCurve';\n\n        this.aX = aX || 0;\n        this.aY = aY || 0;\n\n        this.xRadius = xRadius || 1;\n        this.yRadius = yRadius || 1;\n\n        this.aStartAngle = aStartAngle || 0;\n        this.aEndAngle = aEndAngle || 2 * Math.PI;\n\n        this.aClockwise = aClockwise || false;\n\n        this.aRotation = aRotation || 0;\n\n    }\n    get isEllipseCurve() {\n        return true;\n    }\n\n    getPoint(t, optionalTarget) {\n\n        var point = optionalTarget || new Vector2();\n\n        var twoPi = Math.PI * 2;\n        var deltaAngle = this.aEndAngle - this.aStartAngle;\n        var samePoints = Math.abs(deltaAngle) < Number.EPSILON;\n\n        // ensures that deltaAngle is 0 .. 2 PI\n        while (deltaAngle < 0) deltaAngle += twoPi;\n        while (deltaAngle > twoPi) deltaAngle -= twoPi;\n\n        if (deltaAngle < Number.EPSILON) {\n\n            if (samePoints) {\n\n                deltaAngle = 0;\n\n            } else {\n\n                deltaAngle = twoPi;\n\n            }\n\n        }\n\n        if (this.aClockwise === true && !samePoints) {\n\n            if (deltaAngle === twoPi) {\n\n                deltaAngle = - twoPi;\n\n            } else {\n\n                deltaAngle = deltaAngle - twoPi;\n\n            }\n\n        }\n\n        var angle = this.aStartAngle + t * deltaAngle;\n        var x = this.aX + this.xRadius * Math.cos(angle);\n        var y = this.aY + this.yRadius * Math.sin(angle);\n\n        if (this.aRotation !== 0) {\n\n            var cos = Math.cos(this.aRotation);\n            var sin = Math.sin(this.aRotation);\n\n            var tx = x - this.aX;\n            var ty = y - this.aY;\n\n            // Rotate the point about the center of the ellipse.\n            x = tx * cos - ty * sin + this.aX;\n            y = tx * sin + ty * cos + this.aY;\n\n        }\n\n        return point.set(x, y);\n\n    }\n    copy(source) {\n\n        Curve.prototype.copy.call(this, source);\n\n        this.aX = source.aX;\n        this.aY = source.aY;\n\n        this.xRadius = source.xRadius;\n        this.yRadius = source.yRadius;\n\n        this.aStartAngle = source.aStartAngle;\n        this.aEndAngle = source.aEndAngle;\n\n        this.aClockwise = source.aClockwise;\n\n        this.aRotation = source.aRotation;\n\n        return this;\n\n    }\n}\n\n\n\n\nexport { EllipseCurve };\n","import { EllipseCurve } from './EllipseCurve.js';\n\n\nclass ArcCurve extends EllipseCurve {\n    constructor(aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) {\n\n        super(aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise);\n\n        this.type = 'ArcCurve';\n\n    }\n    get isArcCurve() {\n        return true;\n    }\n}\n\n\nexport { ArcCurve };","import { Vector3 } from '../../maths/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\n/**\n * @author zz85 https://github.com/zz85\n *\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n    var c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n    function init(x0, x1, t0, t1) {\n\n        c0 = x0;\n        c1 = t0;\n        c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n        c3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n    }\n\n    return {\n\n        initCatmullRom: function (x0, x1, x2, x3, tension) {\n\n            init(x1, x2, tension * (x2 - x0), tension * (x3 - x1));\n\n        },\n\n        initNonuniformCatmullRom: function (x0, x1, x2, x3, dt0, dt1, dt2) {\n\n            // compute tangents when parameterized in [t1,t2]\n            var t1 = (x1 - x0) / dt0 - (x2 - x0) / (dt0 + dt1) + (x2 - x1) / dt1;\n            var t2 = (x2 - x1) / dt1 - (x3 - x1) / (dt1 + dt2) + (x3 - x2) / dt2;\n\n            // rescale tangents for parametrization in [0,1]\n            t1 *= dt1;\n            t2 *= dt1;\n\n            init(x1, x2, t1, t2);\n\n        },\n\n        calc: function (t) {\n\n            var t2 = t * t;\n            var t3 = t2 * t;\n            return c0 + c1 * t + c2 * t2 + c3 * t3;\n\n        }\n\n    };\n\n}\n\n//\n\nvar tmp = new Vector3();\nvar px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\n\n\nclass CatmullRomCurve3 extends Curve {\n    constructor(points = [], closed = false, curveType = 'centripetal', tension = 0.5) {\n        super();\n        this.type = 'CatmullRomCurve3';\n\n        this.points = points;\n        this.closed = closed;\n        this.curveType = curveType;\n        this.tension = tension;\n    }\n    get isCatmullRomCurve3() {\n        return true;\n    }\n\n    getPoint(t = 0, optionalTarget = new Vector3()) {\n\n        var point = optionalTarget;\n\n        var points = this.points;\n        var l = points.length;\n\n        var p = (l - (this.closed ? 0 : 1)) * t;\n        var intPoint = Math.floor(p);\n        var weight = p - intPoint;\n\n        if (this.closed) {\n\n            intPoint += intPoint > 0 ? 0 : (Math.floor(Math.abs(intPoint) / l) + 1) * l;\n\n        } else if (weight === 0 && intPoint === l - 1) {\n\n            intPoint = l - 2;\n            weight = 1;\n\n        }\n\n        var p0, p1, p2, p3; // 4 points\n\n        if (this.closed || intPoint > 0) {\n\n            p0 = points[(intPoint - 1) % l];\n\n        } else {\n\n            // extrapolate first point\n            tmp.subVectors(points[0], points[1]).add(points[0]);\n            p0 = tmp;\n\n        }\n\n        p1 = points[intPoint % l];\n        p2 = points[(intPoint + 1) % l];\n\n        if (this.closed || intPoint + 2 < l) {\n\n            p3 = points[(intPoint + 2) % l];\n\n        } else {\n\n            // extrapolate last point\n            tmp.subVectors(points[l - 1], points[l - 2]).add(points[l - 1]);\n            p3 = tmp;\n\n        }\n\n        if (this.curveType === 'centripetal' || this.curveType === 'chordal') {\n\n            // init Centripetal / Chordal Catmull-Rom\n            var pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n            var dt0 = Math.pow(p0.distanceToSquared(p1), pow);\n            var dt1 = Math.pow(p1.distanceToSquared(p2), pow);\n            var dt2 = Math.pow(p2.distanceToSquared(p3), pow);\n\n            // safety check for repeated points\n            if (dt1 < 1e-4) dt1 = 1.0;\n            if (dt0 < 1e-4) dt0 = dt1;\n            if (dt2 < 1e-4) dt2 = dt1;\n\n            px.initNonuniformCatmullRom(p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2);\n            py.initNonuniformCatmullRom(p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2);\n            pz.initNonuniformCatmullRom(p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2);\n\n        } else if (this.curveType === 'catmullrom') {\n\n            px.initCatmullRom(p0.x, p1.x, p2.x, p3.x, this.tension);\n            py.initCatmullRom(p0.y, p1.y, p2.y, p3.y, this.tension);\n            pz.initCatmullRom(p0.z, p1.z, p2.z, p3.z, this.tension);\n\n        }\n\n        point.set(\n            px.calc(weight),\n            py.calc(weight),\n            pz.calc(weight)\n        );\n\n        return point;\n\n    }\n\n    copy(source) {\n\n        super.copy(source);\n\n        this.points = [];\n\n        for (var i = 0, l = source.points.length; i < l; i++) {\n\n            var point = source.points[i];\n\n            this.points.push(point.clone());\n\n        }\n\n        this.closed = source.closed;\n        this.curveType = source.curveType;\n        this.tension = source.tension;\n\n        return this;\n\n    }\n    toJSON() {\n\n        var data = super.toJSON();\n\n        data.points = [];\n\n        for (var i = 0, l = this.points.length; i < l; i++) {\n\n            var point = this.points[i];\n            data.points.push(point.toArray());\n\n        }\n\n        data.closed = this.closed;\n        data.curveType = this.curveType;\n        data.tension = this.tension;\n\n        return data;\n\n    }\n    fromJSON(json) {\n\n        super.fromJSON(json);\n\n        this.points = [];\n\n        for (var i = 0, l = json.points.length; i < l; i++) {\n\n            var point = json.points[i];\n            this.points.push(new Vector3().fromArray(point));\n\n        }\n\n        this.closed = json.closed;\n        this.curveType = json.curveType;\n        this.tension = json.tension;\n\n        return this;\n\n    }\n}\n\nexport { CatmullRomCurve3 };","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bézier_curve\n */\n\nfunction CatmullRom(t, p0, p1, p2, p3) {\n\n    var v0 = (p2 - p0) * 0.5;\n    var v1 = (p3 - p1) * 0.5;\n    var t2 = t * t;\n    var t3 = t * t2;\n    return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0(t, p) {\n\n    var k = 1 - t;\n    return k * k * p;\n\n}\n\nfunction QuadraticBezierP1(t, p) {\n\n    return 2 * (1 - t) * t * p;\n\n}\n\nfunction QuadraticBezierP2(t, p) {\n\n    return t * t * p;\n\n}\n\nfunction QuadraticBezier(t, p0, p1, p2) {\n\n    return QuadraticBezierP0(t, p0) + QuadraticBezierP1(t, p1) +\n        QuadraticBezierP2(t, p2);\n\n}\n\n//\n\nfunction CubicBezierP0(t, p) {\n\n    var k = 1 - t;\n    return k * k * k * p;\n\n}\n\nfunction CubicBezierP1(t, p) {\n\n    var k = 1 - t;\n    return 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2(t, p) {\n\n    return 3 * (1 - t) * t * t * p;\n\n}\n\nfunction CubicBezierP3(t, p) {\n\n    return t * t * t * p;\n\n}\n\nfunction CubicBezier(t, p0, p1, p2, p3) {\n\n    return CubicBezierP0(t, p0) + CubicBezierP1(t, p1) + CubicBezierP2(t, p2) +\n        CubicBezierP3(t, p3);\n\n}\n\nexport { CatmullRom, QuadraticBezier, CubicBezier };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../maths/Vector2.js';\n\n\nclass CubicBezierCurve extends Curve {\n\n    constructor(v0, v1, v2, v3) {\n        super();\n\n        this.type = 'CubicBezierCurve';\n\n        this.v0 = v0 || new Vector2();\n        this.v1 = v1 || new Vector2();\n        this.v2 = v2 || new Vector2();\n        this.v3 = v3 || new Vector2();\n\n    }\n    get isCubicBezierCurve() {\n        return true;\n    }\n    getPoint(t, optionalTarget) {\n\n        var point = optionalTarget || new Vector2();\n\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n        point.set(\n            CubicBezier(t, v0.x, v1.x, v2.x, v3.x),\n            CubicBezier(t, v0.y, v1.y, v2.y, v3.y)\n        );\n\n        return point;\n\n    }\n    copy(source) {\n\n        Curve.prototype.copy.call(this, source);\n\n        this.v0.copy(source.v0);\n        this.v1.copy(source.v1);\n        this.v2.copy(source.v2);\n        this.v3.copy(source.v3);\n\n        return this;\n\n    }\n}\n\nexport { CubicBezierCurve };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../maths/Vector3.js';\n\n\nclass CubicBezierCurve3 extends Curve {\n    constructor(v0, v1, v2, v3) {\n\n        super();\n\n        this.type = 'CubicBezierCurve3';\n\n        this.v0 = v0 || new Vector3();\n        this.v1 = v1 || new Vector3();\n        this.v2 = v2 || new Vector3();\n        this.v3 = v3 || new Vector3();\n\n    }\n    get isCubicBezierCurve3() {\n        return true;\n    }\n    getPoint(t, optionalTarget) {\n\n        var point = optionalTarget || new Vector3();\n\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n        point.set(\n            CubicBezier(t, v0.x, v1.x, v2.x, v3.x),\n            CubicBezier(t, v0.y, v1.y, v2.y, v3.y),\n            CubicBezier(t, v0.z, v1.z, v2.z, v3.z)\n        );\n\n        return point;\n\n    }\n    copy(source) {\n\n        super.copy(source);\n\n        this.v0.copy(source.v0);\n        this.v1.copy(source.v1);\n        this.v2.copy(source.v2);\n        this.v3.copy(source.v3);\n\n        return this;\n\n    }\n\n\n\n}\n\n\nexport { CubicBezierCurve3 };\n","import { Vector2 } from '../../maths/Vector2.js';\nimport { Curve } from '../core/Curve.js';\n\n\nclass LineCurve extends Curve {\n\n    constructor(v1, v2) {\n\n        super();\n        this.type = 'LineCurve';\n\n        this.v1 = v1 || new Vector2();\n        this.v2 = v2 || new Vector2();\n\n    }\n    get isLineCurve() {\n        return true;\n    }\n\n    getPoint(t, optionalTarget) {\n\n        var point = optionalTarget || new Vector2();\n\n        if (t === 1) {\n\n            point.copy(this.v2);\n\n        } else {\n\n            point.copy(this.v2).sub(this.v1);\n            point.multiplyScalar(t).add(this.v1);\n\n        }\n\n        return point;\n\n    };\n\n    // Line curve is linear, so we can overwrite default getPointAt\n\n    getPointAt(u, optionalTarget) {\n\n        return this.getPoint(u, optionalTarget);\n\n    };\n\n    getTangent( /* t */) {\n\n        var tangent = this.v2.clone().sub(this.v1);\n\n        return tangent.normalize();\n\n    };\n\n    copy(source) {\n\n        super.copy(source);\n\n        this.v1.copy(source.v1);\n        this.v2.copy(source.v2);\n\n        return this;\n\n    };\n\n}\n\n\nexport { LineCurve };\n","import { Vector3 } from '../../maths/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\n\nclass LineCurve3 extends Curve {\n\n    constructor(v1, v2) {\n        super();\n\n        this.type = 'LineCurve3';\n\n        this.v1 = v1 || new Vector3();\n        this.v2 = v2 || new Vector3();\n\n    }\n\n    get isLineCurve3() {\n        return true;\n    }\n\n    getPoint(t, optionalTarget) {\n\n        var point = optionalTarget || new Vector3();\n\n        if (t === 1) {\n\n            point.copy(this.v2);\n\n        } else {\n\n            point.copy(this.v2).sub(this.v1);\n            point.multiplyScalar(t).add(this.v1);\n\n        }\n\n        return point;\n\n    }\n\n    // Line curve is linear, so we can overwrite default getPointAt\n\n    getPointAt(u, optionalTarget) {\n\n        return this.getPoint(u, optionalTarget);\n\n    }\n\n    copy(source) {\n\n        super.copy(source);\n\n        this.v1.copy(source.v1);\n        this.v2.copy(source.v2);\n\n        return this;\n\n    }\n\n}\n\n\n\n\nexport { LineCurve3 };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../maths/Vector2.js';\n\n\nclass QuadraticBezierCurve extends Curve {\n\n    constructor(v0, v1, v2) {\n\n        super();\n\n        this.type = 'QuadraticBezierCurve';\n\n        this.v0 = v0 || new Vector2();\n        this.v1 = v1 || new Vector2();\n        this.v2 = v2 || new Vector2();\n\n    }\n\n    get isQuadraticBezierCurve() {\n        return true;\n    }\n\n\n    getPoint(t, optionalTarget) {\n\n        var point = optionalTarget || new Vector2();\n\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n        point.set(\n            QuadraticBezier(t, v0.x, v1.x, v2.x),\n            QuadraticBezier(t, v0.y, v1.y, v2.y)\n        );\n\n        return point;\n\n    }\n\n    copy(source) {\n\n        super.copy(source);\n\n        this.v0.copy(source.v0);\n        this.v1.copy(source.v1);\n        this.v2.copy(source.v2);\n\n        return this;\n\n    }\n\n}\n\n\nexport { QuadraticBezierCurve };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../maths/Vector3.js';\n\n\nclass QuadraticBezierCurve3 extends Curve {\n\n    constructor(v0, v1, v2) {\n\n        super();\n\n        this.type = 'QuadraticBezierCurve3';\n\n        this.v0 = v0 || new Vector3();\n        this.v1 = v1 || new Vector3();\n        this.v2 = v2 || new Vector3();\n\n    }\n\n    get isQuadraticBezierCurve3() {\n        return true;\n    }\n\n\n    getPoint(t, optionalTarget) {\n\n        var point = optionalTarget || new Vector3();\n\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n        point.set(\n            QuadraticBezier(t, v0.x, v1.x, v2.x),\n            QuadraticBezier(t, v0.y, v1.y, v2.y),\n            QuadraticBezier(t, v0.z, v1.z, v2.z)\n        );\n\n        return point;\n\n    }\n\n    copy(source) {\n\n        super.copy(source);\n\n        this.v0.copy(source.v0);\n        this.v1.copy(source.v1);\n        this.v2.copy(source.v2);\n\n        return this;\n\n    }\n\n}\n\n\nexport { QuadraticBezierCurve3 };\n","import { Curve } from '../core/Curve.js';\nimport { CatmullRom } from '../core/Interpolations.js';\nimport { Vector2 } from '../../maths/Vector2.js';\n\n\nclass SplineCurve extends Curve {\n\n    constructor(points /* array of Vector2 */) {\n\n        super();\n\n        this.type = 'SplineCurve';\n\n        this.points = points || [];\n\n    }\n\n    get isSplineCurve() {\n        return true;\n    }\n\n    getPoint(t, optionalTarget) {\n\n        var point = optionalTarget || new Vector2();\n\n        var points = this.points;\n        var p = (points.length - 1) * t;\n\n        var intPoint = Math.floor(p);\n        var weight = p - intPoint;\n\n        var p0 = points[intPoint === 0 ? intPoint : intPoint - 1];\n        var p1 = points[intPoint];\n        var p2 = points[intPoint > points.length - 2 ? points.length - 1 : intPoint + 1];\n        var p3 = points[intPoint > points.length - 3 ? points.length - 1 : intPoint + 2];\n\n        point.set(\n            CatmullRom(weight, p0.x, p1.x, p2.x, p3.x),\n            CatmullRom(weight, p0.y, p1.y, p2.y, p3.y)\n        );\n\n        return point;\n\n    }\n\n    copy(source) {\n\n        super.copy(source);\n\n        this.points = [];\n\n        for (var i = 0, l = source.points.length; i < l; i++) {\n\n            var point = source.points[i];\n\n            this.points.push(point.clone());\n\n        }\n\n        return this;\n\n    }\n\n\n}\n\n\nexport { SplineCurve };\n","import { Curve } from './Curve.js';\nimport * as Curves from '../curves/Curves.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\n\nclass CurvePath extends Curve {\n    constructor() {\n        super();\n\n        this.type = 'CurvePath';\n\n        this.curves = [];\n        this.autoClose = false; // Automatically closes the path\n    }\n    add(curve) {\n\n        this.curves.push(curve);\n\n    }\n\n    closePath() {\n\n        // Add a line curve if start and end of lines are not connected\n        var startPoint = this.curves[0].getPoint(0);\n        var endPoint = this.curves[this.curves.length - 1].getPoint(1);\n\n        if (!startPoint.equals(endPoint)) {\n\n            this.curves.push(new Curves['LineCurve'](endPoint, startPoint));\n\n        }\n\n    }\n\n    // To get accurate point with reference to\n    // entire path distance at time t,\n    // following has to be done:\n\n    // 1. Length of each sub path have to be known\n    // 2. Locate and identify type of curve\n    // 3. Get t for the curve\n    // 4. Return curve.getPointAt(t')\n\n    getPoint(t) {\n\n        var d = t * this.getLength();\n        var curveLengths = this.getCurveLengths();\n        var i = 0;\n\n        // To think about boundaries points.\n\n        while (i < curveLengths.length) {\n\n            if (curveLengths[i] >= d) {\n\n                var diff = curveLengths[i] - d;\n                var curve = this.curves[i];\n\n                var segmentLength = curve.getLength();\n                var u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n                return curve.getPointAt(u);\n\n            }\n\n            i++;\n\n        }\n\n        return null;\n\n        // loop where sum != 0, sum > d , sum+1 <d\n\n    }\n\n    // We cannot use the default THREE.Curve getPoint() with getLength() because in\n    // THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n    // getPoint() depends on getLength\n\n    getLength() {\n\n        var lens = this.getCurveLengths();\n        return lens[lens.length - 1];\n\n    }\n\n    // cacheLengths must be recalculated.\n    updateArcLengths() {\n\n        this.needsUpdate = true;\n        this.cacheLengths = null;\n        this.getCurveLengths();\n\n    }\n\n    // Compute lengths and cache them\n    // We cannot overwrite getLengths() because UtoT mapping uses it.\n\n    getCurveLengths() {\n\n        // We use cache values if curves and cache array are same length\n\n        if (this.cacheLengths && this.cacheLengths.length === this.curves.length) {\n\n            return this.cacheLengths;\n\n        }\n\n        // Get length of sub-curve\n        // Push sums into cached array\n\n        var lengths = [], sums = 0;\n\n        for (var i = 0, l = this.curves.length; i < l; i++) {\n\n            sums += this.curves[i].getLength();\n            lengths.push(sums);\n\n        }\n\n        this.cacheLengths = lengths;\n\n        return lengths;\n\n    }\n\n    getSpacedPoints(divisions) {\n\n        if (divisions === undefined) divisions = 40;\n\n        var points = [];\n\n        for (var i = 0; i <= divisions; i++) {\n\n            points.push(this.getPoint(i / divisions));\n\n        }\n\n        if (this.autoClose) {\n\n            points.push(points[0]);\n\n        }\n\n        return points;\n\n    }\n\n    getPoints(divisions) {\n\n        divisions = divisions || 12;\n\n        var points = [], last;\n\n        for (var i = 0, curves = this.curves; i < curves.length; i++) {\n\n            var curve = curves[i];\n            var resolution = (curve && curve.isEllipseCurve) ? divisions * 2\n                : (curve && curve.isLineCurve) ? 1\n                    : (curve && curve.isSplineCurve) ? divisions * curve.points.length\n                        : divisions;\n\n            var pts = curve.getPoints(resolution);\n\n            for (var j = 0; j < pts.length; j++) {\n\n                var point = pts[j];\n\n                if (last && last.equals(point)) continue; // ensures no consecutive points are duplicates\n\n                points.push(point);\n                last = point;\n\n            }\n\n        }\n\n        if (this.autoClose && points.length > 1 && !points[points.length - 1].equals(points[0])) {\n\n            points.push(points[0]);\n\n        }\n\n        return points;\n\n    }\n\n    copy(source) {\n\n        Curve.prototype.copy.call(this, source);\n\n        this.curves = [];\n\n        for (var i = 0, l = source.curves.length; i < l; i++) {\n\n            var curve = source.curves[i];\n\n            this.curves.push(curve.clone());\n\n        }\n\n        this.autoClose = source.autoClose;\n\n        return this;\n\n    }\n}\n\n\n\n\nexport { CurvePath };\n","import { Vector2 } from '../../maths/Vector2.js';\nimport { CurvePath } from './CurvePath.js';\nimport { EllipseCurve } from '../curves/EllipseCurve.js';\nimport { SplineCurve } from '../curves/SplineCurve.js';\nimport { CubicBezierCurve } from '../curves/CubicBezierCurve.js';\nimport { QuadraticBezierCurve } from '../curves/QuadraticBezierCurve.js';\nimport { LineCurve } from '../curves/LineCurve.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n **/\n\nclass Path extends CurvePath {\n    constructor(points) {\n\n        super();\n\n        this.type = 'Path';\n\n        this.currentPoint = new Vector2();\n\n        if (points) {\n\n            this.setFromPoints(points);\n\n        }\n    }\n    setFromPoints(points) {\n\n        this.moveTo(points[0].x, points[0].y);\n\n        for (var i = 1, l = points.length; i < l; i++) {\n\n            this.lineTo(points[i].x, points[i].y);\n\n        }\n\n    }\n\n    moveTo(x, y) {\n\n        this.currentPoint.set(x, y); // TODO consider referencing vectors instead of copying?\n\n    }\n\n    lineTo(x, y) {\n\n        var curve = new LineCurve(this.currentPoint.clone(), new Vector2(x, y));\n        this.curves.push(curve);\n\n        this.currentPoint.set(x, y);\n\n    }\n\n    quadraticCurveTo(aCPx, aCPy, aX, aY) {\n\n        var curve = new QuadraticBezierCurve(\n            this.currentPoint.clone(),\n            new Vector2(aCPx, aCPy),\n            new Vector2(aX, aY)\n        );\n\n        this.curves.push(curve);\n\n        this.currentPoint.set(aX, aY);\n\n    }\n\n    bezierCurveTo(aCP1x, aCP1y, aCP2x, aCP2y, aX, aY) {\n\n        var curve = new CubicBezierCurve(\n            this.currentPoint.clone(),\n            new Vector2(aCP1x, aCP1y),\n            new Vector2(aCP2x, aCP2y),\n            new Vector2(aX, aY)\n        );\n\n        this.curves.push(curve);\n\n        this.currentPoint.set(aX, aY);\n\n    }\n\n    splineThru(pts /*Array of Vector*/) {\n\n        var npts = [this.currentPoint.clone()].concat(pts);\n\n        var curve = new SplineCurve(npts);\n        this.curves.push(curve);\n\n        this.currentPoint.copy(pts[pts.length - 1]);\n\n    }\n\n    arc(aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) {\n\n        var x0 = this.currentPoint.x;\n        var y0 = this.currentPoint.y;\n\n        this.absarc(aX + x0, aY + y0, aRadius,\n            aStartAngle, aEndAngle, aClockwise);\n\n    }\n\n    absarc(aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) {\n\n        this.absellipse(aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise);\n\n    }\n\n    ellipse(aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation) {\n\n        var x0 = this.currentPoint.x;\n        var y0 = this.currentPoint.y;\n\n        this.absellipse(aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation);\n\n    }\n\n    absellipse(aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation) {\n\n        var curve = new EllipseCurve(aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation);\n\n        if (this.curves.length > 0) {\n\n            // if a previous curve is present, attempt to join\n            var firstPoint = curve.getPoint(0);\n\n            if (!firstPoint.equals(this.currentPoint)) {\n\n                this.lineTo(firstPoint.x, firstPoint.y);\n\n            }\n\n        }\n\n        this.curves.push(curve);\n\n        var lastPoint = curve.getPoint(1);\n        this.currentPoint.copy(lastPoint);\n\n    }\n\n    copy(source) {\n\n        super.copy(source);\n\n        this.currentPoint.copy(source.currentPoint);\n\n        return this;\n\n    }\n\n}\n\n\n\n\nexport { Path };\n","import { Path } from './Path.js';\nimport { _Math } from '../../maths/Math.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nclass Shape extends Path {\n    constructor(points) {\n\n        super(points);\n\n        //this.uuid = _Math.generateUUID();\n\n        this.type = 'Shape';\n\n        this.holes = [];\n\n    }\n    getPointsHoles(divisions) {\n\n        var holesPts = [];\n\n        for (var i = 0, l = this.holes.length; i < l; i++) {\n\n            holesPts[i] = this.holes[i].getPoints(divisions);\n\n        }\n\n        return holesPts;\n\n    }\n\n    // get points of shape and holes (keypoints based on segments parameter)\n\n    extractPoints(divisions) {\n\n        return {\n\n            shape: this.getPoints(divisions),\n            holes: this.getPointsHoles(divisions)\n\n        };\n\n    }\n    copy(source) {\n\n        super.copy(source);\n\n        this.holes = [];\n\n        for (var i = 0, l = source.holes.length; i < l; i++) {\n\n            var hole = source.holes[i];\n\n            this.holes.push(hole.clone());\n\n        }\n\n        return this;\n\n    }\n}\n\n\n\n\nexport { Shape };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\n **/\n\nimport { Color } from '../../maths/Color.js';\nimport { Path } from './Path.js';\nimport { Shape } from './Shape.js';\nimport { ShapeUtils } from '../ShapeUtils.js';\n\nclass ShapePath {\n\n    constructor() {\n        this.type = 'ShapePath';\n\n        this.color = new Color();\n\n        this.subPaths = [];\n        this.currentPath = null;\n    }\n    moveTo(x, y) {\n\n        this.currentPath = new Path();\n        this.subPaths.push(this.currentPath);\n        this.currentPath.moveTo(x, y);\n\n    }\n\n    lineTo(x, y) {\n\n        this.currentPath.lineTo(x, y);\n\n    }\n\n    quadraticCurveTo(aCPx, aCPy, aX, aY) {\n\n        this.currentPath.quadraticCurveTo(aCPx, aCPy, aX, aY);\n\n    }\n\n    bezierCurveTo(aCP1x, aCP1y, aCP2x, aCP2y, aX, aY) {\n\n        this.currentPath.bezierCurveTo(aCP1x, aCP1y, aCP2x, aCP2y, aX, aY);\n\n    }\n\n    splineThru(pts) {\n\n        this.currentPath.splineThru(pts);\n\n    }\n\n    toShapes(isCCW, noHoles) {\n\n        function toShapesNoHoles(inSubpaths) {\n\n            var shapes = [];\n\n            for (var i = 0, l = inSubpaths.length; i < l; i++) {\n\n                var tmpPath = inSubpaths[i];\n\n                var tmpShape = new Shape();\n                tmpShape.curves = tmpPath.curves;\n\n                shapes.push(tmpShape);\n\n            }\n\n            return shapes;\n\n        }\n\n        function isPointInsidePolygon(inPt, inPolygon) {\n\n            var polyLen = inPolygon.length;\n\n            // inPt on polygon contour => immediate success    or\n            // toggling of inside/outside at every single! intersection point of an edge\n            //  with the horizontal line through inPt, left of inPt\n            //  not counting lowerY endpoints of edges and whole edges on that line\n            var inside = false;\n            for (var p = polyLen - 1, q = 0; q < polyLen; p = q++) {\n\n                var edgeLowPt = inPolygon[p];\n                var edgeHighPt = inPolygon[q];\n\n                var edgeDx = edgeHighPt.x - edgeLowPt.x;\n                var edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n                if (Math.abs(edgeDy) > Number.EPSILON) {\n\n                    // not parallel\n                    if (edgeDy < 0) {\n\n                        edgeLowPt = inPolygon[q]; edgeDx = - edgeDx;\n                        edgeHighPt = inPolygon[p]; edgeDy = - edgeDy;\n\n                    }\n                    if ((inPt.y < edgeLowPt.y) || (inPt.y > edgeHighPt.y)) continue;\n\n                    if (inPt.y === edgeLowPt.y) {\n\n                        if (inPt.x === edgeLowPt.x) return true;\t\t// inPt is on contour ?\n                        // continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n                    } else {\n\n                        var perpEdge = edgeDy * (inPt.x - edgeLowPt.x) - edgeDx * (inPt.y - edgeLowPt.y);\n                        if (perpEdge === 0) return true;\t\t// inPt is on contour ?\n                        if (perpEdge < 0) continue;\n                        inside = !inside;\t\t// true intersection left of inPt\n\n                    }\n\n                } else {\n\n                    // parallel or collinear\n                    if (inPt.y !== edgeLowPt.y) continue;\t\t\t// parallel\n                    // edge lies on the same horizontal line as inPt\n                    if (((edgeHighPt.x <= inPt.x) && (inPt.x <= edgeLowPt.x)) ||\n                        ((edgeLowPt.x <= inPt.x) && (inPt.x <= edgeHighPt.x))) return true;\t// inPt: Point on contour !\n                    // continue;\n\n                }\n\n            }\n\n            return inside;\n\n        }\n\n        var isClockWise = ShapeUtils.isClockWise;\n\n        var subPaths = this.subPaths;\n        if (subPaths.length === 0) return [];\n\n        if (noHoles === true) return toShapesNoHoles(subPaths);\n\n\n        var solid, tmpPath, tmpShape, shapes = [];\n\n        if (subPaths.length === 1) {\n\n            tmpPath = subPaths[0];\n            tmpShape = new Shape();\n            tmpShape.curves = tmpPath.curves;\n            shapes.push(tmpShape);\n            return shapes;\n\n        }\n\n        var holesFirst = !isClockWise(subPaths[0].getPoints());\n        holesFirst = isCCW ? !holesFirst : holesFirst;\n\n        // console.log(\"Holes first\", holesFirst);\n\n        var betterShapeHoles = [];\n        var newShapes = [];\n        var newShapeHoles = [];\n        var mainIdx = 0;\n        var tmpPoints;\n\n        newShapes[mainIdx] = undefined;\n        newShapeHoles[mainIdx] = [];\n\n        for (var i = 0, l = subPaths.length; i < l; i++) {\n\n            tmpPath = subPaths[i];\n            tmpPoints = tmpPath.getPoints();\n            solid = isClockWise(tmpPoints);\n            solid = isCCW ? !solid : solid;\n\n            if (solid) {\n\n                if ((!holesFirst) && (newShapes[mainIdx])) mainIdx++;\n\n                newShapes[mainIdx] = { s: new Shape(), p: tmpPoints };\n                newShapes[mainIdx].s.curves = tmpPath.curves;\n\n                if (holesFirst) mainIdx++;\n                newShapeHoles[mainIdx] = [];\n\n                //console.log('cw', i);\n\n            } else {\n\n                newShapeHoles[mainIdx].push({ h: tmpPath, p: tmpPoints[0] });\n\n                //console.log('ccw', i);\n\n            }\n\n        }\n\n        // only Holes? -> probably all Shapes with wrong orientation\n        if (!newShapes[0]) return toShapesNoHoles(subPaths);\n\n\n        if (newShapes.length > 1) {\n\n            var ambiguous = false;\n            var toChange = [];\n\n            for (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx++) {\n\n                betterShapeHoles[sIdx] = [];\n\n            }\n\n            for (var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx++) {\n\n                var sho = newShapeHoles[sIdx];\n\n                for (var hIdx = 0; hIdx < sho.length; hIdx++) {\n\n                    var ho = sho[hIdx];\n                    var hole_unassigned = true;\n\n                    for (var s2Idx = 0; s2Idx < newShapes.length; s2Idx++) {\n\n                        if (isPointInsidePolygon(ho.p, newShapes[s2Idx].p)) {\n\n                            if (sIdx !== s2Idx) toChange.push({ froms: sIdx, tos: s2Idx, hole: hIdx });\n                            if (hole_unassigned) {\n\n                                hole_unassigned = false;\n                                betterShapeHoles[s2Idx].push(ho);\n\n                            } else {\n\n                                ambiguous = true;\n\n                            }\n\n                        }\n\n                    }\n                    if (hole_unassigned) {\n\n                        betterShapeHoles[sIdx].push(ho);\n\n                    }\n\n                }\n\n            }\n            // console.log(\"ambiguous: \", ambiguous);\n            if (toChange.length > 0) {\n\n                // console.log(\"to change: \", toChange);\n                if (!ambiguous) newShapeHoles = betterShapeHoles;\n\n            }\n\n        }\n\n        var tmpHoles;\n\n        for (var i = 0, il = newShapes.length; i < il; i++) {\n\n            tmpShape = newShapes[i].s;\n            shapes.push(tmpShape);\n            tmpHoles = newShapeHoles[i];\n\n            for (var j = 0, jl = tmpHoles.length; j < jl; j++) {\n\n                tmpShape.holes.push(tmpHoles[j].h);\n\n            }\n\n        }\n\n        //console.log(\"shape\", shapes);\n\n        return shapes;\n\n    }\n\n\n}\n\n\nexport { ShapePath };\n","\nimport { WebGLRenderer, Events, Group } from \"mmgl/src/index\"\n\nclass Framework extends Events {\n    constructor() {\n        super();\n\n        this.layers = [];\n        this.isUpdate = true;\n        this.currTick = new Date().getTime();\n        this.lastTick = null;\n        this.renderer = null;\n        this._groups = [];\n\n    }\n\n    init() {\n\n        this._InitRender();\n\n    }\n\n    _InitRender() {\n\n        //创建渲染器\n        try {\n            this.renderer = new WebGLRenderer({\n                alpha: true,\n                depth: true,\n                antialias: true,\n                premultipliedAlpha: true,\n                preserveDrawingBuffer: true,\n                logarithmicDepthBuffer: true\n            });\n\n            //this.render._sortObjects=false;\n\n        } catch (e) {\n            this.view.style.cssText = \"display: flex;justify-content: center;align-items:center;font-size:16px;color:#666;width:100%;height:100%;\";\n            this.view.innerHTML = '很抱歉,您的浏览器不能展示3D图表,请使用<a href=\"\" target=\"blank\">Chrome浏览器</a>!'\n            console.error(e);\n            return;\n        }\n\n    }\n\n\n\n    render() {\n\n        let redraw = this.isUpdate;\n\n        if (this.lastTick - this.currTick > 1000) {\n            this.isUpdate = false;\n        }\n\n        this.fire({ type: 'renderbefore' });\n        if (redraw) {\n\n            this.layers.forEach((view, index) => {\n                //reset时候又可能暂时渲染上下午丢失\n                if(!this.renderer) return;\n                if (this.layers.length > 1 && index !== this.layers.length - 1) {\n                    this.renderer.autoClear = true\n                } else {\n                    this.renderer.autoClear = false;\n                }\n                // if(this.layers.length>1 && index!==this.layers.length-1){}\n                // else{\n                // if(view._camera.type===\"OrthographicCamera\"){\n                //     debugger\n                // }\n                this.renderer.render(view._scene, view._camera)\n                //}\n\n\n            });\n            this.lastTick = new Date().getTime();\n        }\n        this.fire({ type: 'renderafter' });\n    }\n\n    renderFrame() {\n        let me = this;\n        this.render();\n        this.frameId = window.requestAnimationFrame(function () {\n            me.renderFrame();\n        })\n    }\n\n\n    stopRenderFrame() {\n        window.cancelAnimationFrame(this.frameId);\n        this.frameId = null;\n    }\n\n    addView(view) {\n        this.layers.push(view);\n    }\n\n    removeView(view) {\n\n        //todo 移除view 后续需要进行垃圾回收\n        var index = this.layers.indexOf(view);\n        if (index >= 0) {\n            this.layers.splice(index, 1);\n        }\n    }\n    /**\n     * \n     * @param {name:\"名称\",flipY:\"是否Y轴反转\"}  \n     */\n    addGroup({ name = '', flipY = false }) {\n        let _group = new Group();\n        _group.on('removed', function () {\n            if (this.geometry) {\n                this.geometry.dispose();\n            }\n            if (this.material) {\n                this.material.dispose();\n            }\n        });\n        _group.name = name;\n\n        //是否Y轴反转\n        if (flipY) {\n            let _modelMatrix = _group.matrix.elements;\n            _modelMatrix[1] = - _modelMatrix[1];\n            _modelMatrix[5] = - _modelMatrix[5];\n            _modelMatrix[9] = - _modelMatrix[9];\n            _modelMatrix[13] = - _modelMatrix[13];\n            _group.matrixAutoUpdate = false;\n        }\n\n\n        this._groups.push(_group); //todo 收集起来方便后期处理或查询使用\n        return _group;\n    }\n\n    forceRender() {\n        //强行开启绘制\n        this.isUpdate = true;\n    }\n    resetState() {\n        if (this.renderer) {\n            this.renderer._state.reset()\n        }\n    }\n\n\n}\n\n\n\n\nexport { Framework };","//viewName \n\nexport const MainView = 'main_view';\nexport const LabelView = 'label_view';\n\n//停靠位置\nexport const DUCK = {\n    LEFT: 'left',\n    TOP: 'top',\n    BOTTOM: 'bottom',\n    RIGHT: 'right',\n    CENTER: 'center',\n    TOPLEFT: 'topLeft',\n    TOPRIGHT: 'topRight',\n    BOTTOMLEFT: 'bottomLeft',\n    BOTTOMRIGHT: 'bottomRight'\n}\n//立方体六个面的名称\nexport const FaceNames = {\n    LEFT: 'left',\n    RIGHT: 'right',\n    TOP: 'top',\n    BOTTOM: 'bottom',\n    FRONT: 'front',\n    BACK: 'back'\n}","\nimport {\n    Scene,\n    OrthographicCamera,\n    PerspectiveCamera,\n    Vector3,\n    Raycaster,\n    Math as _Math\n\n} from \"mmgl/src/index\"\n\nimport { LabelView } from '../constants';\n\nclass View {\n    constructor(_frameWork, viewName) {\n\n        this._scene = new Scene();\n        this._camera = null;\n\n        this.name = viewName || \"\";\n\n        this._frameWork = _frameWork;\n        this.renderer = _frameWork.renderer;\n\n        this.width = 0;\n        this.height = 0;\n\n        this.aspect = 1;\n        this.fov = 45;\n        this.near = 0.1;\n        this.far = 10000;\n        this.mode = null;\n        this.raycaster = new Raycaster();\n        this.controls = null;\n\n    }\n\n    getCamera() {\n        return this._camera;\n    }\n    getScene() {\n        return this._scene;\n    }\n    getRaycaster(pos) {\n\n        this.raycaster.setFromCamera(pos, this._camera);\n        return this.raycaster;\n    }\n\n    setSize(width, height) {\n        this.width = width;\n        this.height = height;\n        this.aspect = this.height ? this.width / this.height : 1;\n        this.renderer.setPixelRatio(window.devicePixelRatio || 1);\n        this.renderer.setSize(width, height);\n\n\n    }\n\n    setBackground(color) {\n        this._scene.background = color;\n    }\n    setControls(ops) {\n        this.controls = ops;\n    }\n\n\n    addObject(obj) {\n        this._scene.add(obj);\n    }\n\n\n    removeObject(obj) {\n\n        this._scene.remove(obj);\n    }\n\n    //mode: \"ortho\" || \"perspective\"    \n    project(mode) {\n        this.mode = mode;\n        let controlsOpts = this.controls;\n\n        let aspect = this.aspect;\n        //let frustumSize = controlsOpts.boxHeight;\n        let distance = controlsOpts.distance;\n\n        if (mode === 'perspective') {\n            this._camera = new PerspectiveCamera(this.fov, this.aspect, this.near, this.far);\n            //默认绘制的物体是贴近近裁面的,根据近裁面呈现高度为frustumSize的物体需要相机位置\n            //let centerPosition = new Vector3(0, 0, (this.far - this.near)/2);\n\n\n            // let vFOV = _Math.degToRad(this.fov); // convert vertical fov to radians\n\n            // var dist = frustumSize / (2 * Math.tan(vFOV / 2));\n            this._camera.position.set(0, 0, distance);\n\n\n\n        } else {\n            //给定一个大的投影空间,方便数据的计算\n            //this._camera = new OrthographicCamera(frustumSize * aspect / -2, frustumSize * aspect / 2, frustumSize / 2, frustumSize / - 2, this.near, this.far);\n            this._camera = new OrthographicCamera(controlsOpts.boxWidth / -2, controlsOpts.boxWidth / 2, controlsOpts.boxHeight / 2, controlsOpts.boxHeight / - 2, this.near, this.far);\n            this._camera.position.set(0, 0, distance);\n        }\n\n        // console.info(\"getVisableSize\", this.getVisableSize());\n\n    }\n\n    createScreenProject() {\n        let distance = this.controls.maxDistance;\n        this._camera = new OrthographicCamera(0, this.width, 0, -this.height, this.near, this.far);\n        this._camera.position.set(0, 0, distance);\n    }\n\n\n\n    getVisableSize(currPosition = new Vector3()) {\n\n        let result = { width: 0, height: 0, ratio: 0 };\n        if (this.mode == \"ortho\") {\n            result.width = Math.round(this._camera.right - this._camera.left);\n            result.height = Math.round(this._camera.top - this._camera.bottom);\n\n        }\n\n        if (this.mode == \"perspective\") {\n\n            let cameraPosition = this._camera.position.clone();\n            let dist = cameraPosition.distanceTo(currPosition);\n            let vFOV = _Math.degToRad(this.fov); // convert vertical fov to radians\n            let height = 2 * Math.tan(vFOV / 2) * dist;\n\n            result.width = height * this.aspect;\n            result.height = height;\n\n\n        }\n        if (this.width != 0) {\n            result.ratio = result.width / this.width;\n        }\n\n\n\n        return result;\n\n    }\n\n    getObjectScale(object) {\n        const objectWorldScale = new Vector3();\n        return object.getWorldScale(objectWorldScale);\n    }\n    resize(_width, _height, frustumSize) {\n        this.setSize(_width, _height);\n\n        if (this.mode == 'perspective') {\n            this._camera.aspect = this.aspect;\n        } else {\n\n            this._camera.left = frustumSize * this.aspect / -2;\n            this._camera.right = frustumSize * this.aspect / 2;\n            this._camera.top = frustumSize / 2\n            this._camera.bottom = frustumSize / - 2;\n\n        }\n        //labelView的特殊更新\n        if (this.name === LabelView) {\n\n            this._camera.left = 0;\n            this._camera.right = this.width;\n            this._camera.top = 0\n            this._camera.bottom = -this.height;\n        }\n        this._camera.updateProjectionMatrix();\n    }\n\n    dispose() {\n\n        this._scene = null;\n        this._camera = null;\n        this._frameWork = null;\n        this.renderer = null;\n    }\n\n\n\n}\n\nexport { View };","import { Color, Math as _Math } from 'mmgl/src/index';\n\nconst _computeCanvasContent = (function () {\n    let canvas = document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');\n    let context = canvas.getContext(\"2d\");\n    return context;\n})();\n\n\nclass RenderFont {\n    constructor({\n        scale = 0,\n        fillStyle = '#333333',\n        strokeStyle = null,\n        lineWidth = 1,\n        fontSize = 14,\n        fontFamily = '微软雅黑,sans-serif',\n        isBold = false,\n        lineHeight = 1.2,\n        defaultTextureWidth = 256,\n        canvas = null\n    } = {}) {\n        this.scale = scale || window.devicePixelRatio || 1;\n        this.style = {\n            fillStyle,\n            strokeStyle,\n            lineWidth,\n            fontSize,\n            fontFamily,\n            isBold,\n            lineHeight,\n        }\n        this.style.textAlign = 'left';     //写死不给用户设置,方便计算文本的定位\n        this.style.textBaseline = 'top';\n        this.defaultTextureWidth = defaultTextureWidth;\n\n        this._reNewline = /\\r?\\n/;\n\n        this.canvas = canvas || document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');\n        this.context = this.canvas.getContext(\"2d\");\n\n    }\n    getFont() {\n        return (this.style.isBold ? 'bold ' : 'normal ') + this.style.fontSize + 'px ' + this.style.fontFamily;\n    }\n    getTextWidth(txt, font = \"\") {\n        let width = 0;\n        if (_computeCanvasContent) {\n            _computeCanvasContent.save();\n            _computeCanvasContent.font = font || this.getFont();\n            width = this._getTextWidth(_computeCanvasContent, this._getTextLines(txt))\n            _computeCanvasContent.restore();\n        };\n        return width;\n    }\n\n    getTextHeight(txt) {\n        return this._getTextHeight(this._getTextLines(txt));\n    }\n    _getTextWidth(ctx, textLines = []) {\n        var maxWidth = 0;\n\n        textLines.forEach(txt => {\n            let currentLineWidth = ctx.measureText(txt).width;\n            maxWidth = Math.max(maxWidth, currentLineWidth);\n        });\n\n        return maxWidth;\n    }\n\n    _getTextLines(txt) {\n        txt = txt + \"\";\n        return txt.split(this._reNewline);\n    }\n\n    _getTextHeight(textLines) {\n        return this.style.fontSize * textLines.length * this.style.lineHeight;\n    }\n\n    //遍历文字列表,找出最长的文字\n    computeUvsAndCanvasSize(texts) {\n        let maxWidth = 0,\n            maxHeight = 0,\n            canvasWidth = 0,\n            canvasHeight = 0,\n            uvs = {},\n            sizes = {};\n\n        let cw = 0;\n        let ch = 1;\n        //计算需要的canvas高度\n        texts.forEach(text => {\n            let width = this.getTextWidth(text);\n            maxWidth = Math.max(maxWidth, width);\n            maxHeight = Math.max(maxHeight, this.getTextHeight(text));\n            cw += width;\n            if (cw > this.defaultTextureWidth) {\n                ch++;\n                cw = width;\n            }\n        });\n        //一行就可以放得下\n        if (ch == 1) {\n            canvasWidth = _Math.ceilPowerOfTwo(cw);\n            canvasHeight = _Math.ceilPowerOfTwo(maxHeight);\n        } else {\n            //todo 单个文字超过默认宽度的不考虑\n            canvasWidth = this.defaultTextureWidth;\n            canvasHeight = _Math.ceilPowerOfTwo(maxHeight * ch);\n        }\n\n        let st = 0; //开始位置\n        cw = 0;\n        ch = 0;\n\n        //计算UV\n        texts.forEach((text, index) => {\n            let width = this.getTextWidth(text);\n            let height = this.getTextHeight(text);\n            sizes[text] = [width, height];\n            st = cw;\n            cw += width;\n            if (index == 0) {\n                ch = height;\n            }\n\n            if (cw < this.defaultTextureWidth) {\n\n            } else {\n                ch += height;\n                cw = width;\n                st = 0;\n            }\n\n            let _h = (canvasHeight - ch);\n            let _w = cw;\n            let _h2 = (canvasHeight - ch + height);\n            uvs[text] = [\n                st, _h,\n                _w, _h,\n                _w, _h2,\n                st, _h2\n            ];\n\n        })\n\n\n\n\n        return {\n            canvasWidth,\n            canvasHeight,\n            maxHeight,\n            maxWidth,\n            uvs,\n            sizes\n        }\n\n    }\n\n\n    setCanvasSize(width, height) {\n\n        this.canvas.width = width * this.scale;\n        this.canvas.height = height * this.scale;\n        this.canvas.style.width = width + \"px\";\n        this.canvas.style.height = height + \"px\";\n        this.context.scale(this.scale, this.scale);\n\n        this.width = width;\n        this.height = height;\n\n        //透明清屏\n        this.context.fillStyle = \"rgba(0,0,0,0)\";\n        this.context.clearRect(0, 0, width * this.scale, height * this.scale);\n    }\n\n    drawTexts(texts) {\n        let me = this;\n        let UVs = {};\n\n        let { maxWidth, maxHeight, canvasWidth, canvasHeight, uvs, sizes } = this.computeUvsAndCanvasSize(texts);\n        this.setCanvasSize(canvasWidth, canvasHeight);\n\n        me.context.fillStyle = me.style.fillStyle;\n        if (me.style.strokeStyle) {\n            me.context.strokeStyle = me.style.strokeStyle;\n            me.context.lineWidth = me.style.lineWidth;\n        }\n        me.context.textAlign = me.style.textAlign;\n        me.context.textBaseline = me.style.textBaseline;\n        me.context.webkitImageSmoothingEnabled = true;\n\n        me.context.font = this.getFont();\n\n\n        texts.forEach(text => {\n            let uv = uvs[text];\n\n            UVs[text] = new Float32Array([\n                uv[0] / canvasWidth, uv[1] / canvasHeight,\n                uv[2] / canvasWidth, uv[3] / canvasHeight,\n                uv[4] / canvasWidth, uv[5] / canvasHeight,\n                uv[6] / canvasWidth, uv[7] / canvasHeight,\n            ]);\n\n            let txtArr = this._getTextLines(text);\n\n            txtArr.forEach((txt, line) => {\n                me.context.fillText(txt, uv[0], canvasHeight - uv[5] + this.style.fontSize * this.style.lineHeight * line);\n                if (me.style.strokeStyle) {\n                    me.context.strokeText(txt, uv[0], canvasHeight - uv[5] + this.style.fontSize * this.style.lineHeight * line);\n                }\n            });\n\n        })\n\n        if (window._debug) {\n            //console.log('left,top', left, top, maxWidth, size.width);\n            document.body.appendChild(me.canvas);\n\n            me.canvas.style.position = \"absolute\";\n            me.canvas.style.left = \"700px\";\n            me.canvas.style.top = \"0\";\n\n        }\n\n        return {\n            UVs,\n            sizes,\n            maxWidth,\n            maxHeight\n        };\n    }\n\n\n    measureText(txt) {\n        return {\n            width: this.getTextWidth(txt),\n            height: this.getTextHeight(txt)\n        }\n    }\n\n\n}\n\nexport { RenderFont };","import {\n    Math as _Math,\n    Vector2,\n    Vector3,\n    Matrix4,\n\n    Float32BufferAttribute,\n    BufferGeometry,\n\n    TrianglesDrawMode,\n    DoubleSide,\n\n    Texture,\n    Geometry,\n    BoxGeometry,\n    CylinderGeometry,\n    LineGeometry,\n    CircleBufferGeometry,\n    SphereBufferGeometry,\n    DoughnutBufferGeometry,\n    DoughnutGeometry,\n    Shape,\n    ExtrudeBufferGeometry,\n    PlaneGeometry,\n\n    MeshLambertMaterial,\n    MeshBasicMaterial,\n    MeshPhongMaterial,\n    LineMeshMaterial,\n    LineBasicMaterial,\n    LineDashedMaterial,\n    SpriteMaterial,\n\n    Group,\n    Mesh,\n    Line,\n    Line2,\n    Sprite,\n\n    Earcut,\n\n    LinearFilter,\n    RepeatWrapping,\n    FrontSide\n} from 'mmgl/src/index';\n\nimport { _ } from \"mmvis\";\nimport { RenderFont } from './renderFont';\n\nconst getBasicMaterial = () => {\n    return new MeshBasicMaterial({\n        color:0xffffff*Math.random()\n    });\n}\n\n//基本图元\nconst primitive = {\n\n    //创建一个box\n    createBox(width = 1, height = 1, depth = 1, materials = getBasicMaterial()) {\n\n        // 初期把一个box 看作一个mesh  后期优化在渲染前做顶点合并\n        let transMatrix = new Matrix4();\n        let geometry = new BoxGeometry(1, 1, 1);\n\n        let mesh = new Mesh(geometry, materials);\n\n        //box 的中心的在正面下边的中点上,方便对box 高度和深度的变化\n        geometry.vertices.forEach(vertice => {\n            vertice.addScalar(0.5);\n            //vertice.z *= -1;\n        });\n        // geometry.faces.forEach(face => {\n        //     let a = face.a;\n        //     face.a = face.b;\n        //     face.b = a;\n        // })\n        // geometry.normalsNeedUpdate = true;\n        // geometry.computeFaceNormals();\n\n        // //更加给定的得数据变换box\n        transMatrix.makeScale(width, height, depth);\n\n        geometry.vertices.forEach(vertice => {\n            vertice.applyMatrix4(transMatrix);\n        });\n\n        return mesh;\n    },\n    //创建一个圆柱体\n    createCylinder(width = 1, height = 1, depth = 1, materials = getBasicMaterial()) {\n\n        // 初期把一个box 看作一个mesh  后期优化在渲染前做顶点合并\n        let transMatrix = new Matrix4();\n        //let radius = width * 0.5;\n        let part = 60;\n        let geometry = new CylinderGeometry(1, 1, 1, part);\n\n        let mesh = new Mesh(geometry, materials);\n\n        //box 的中心的在正面下边的中点上,方便对box 高度和深度的变化\n        geometry.vertices.forEach(vertice => {\n\n            vertice.addScalar(0.5);\n\n            //vertice.y -= 0.5;\n            //vertice.z *= -1;\n        });\n        // geometry.faces.forEach(face => {\n        //     let a = face.a;\n        //     face.a = face.b;\n        //     face.b = a;\n        // })\n        // geometry.normalsNeedUpdate = true;\n        // geometry.computeFaceNormals();\n\n        //更加给定的得数据变换box\n        let radius = width * 0.5;\n\n        transMatrix.makeScale(radius, height, radius);\n\n        geometry.vertices.forEach(vertice => {\n            vertice.applyMatrix4(transMatrix);\n        });\n\n\n        return mesh;\n\n\n    },\n    createCone(width = 1, height = 1, depth = 1, materials = getBasicMaterial()) {\n\n        // 初期把一个box 看作一个mesh  后期优化在渲染前做顶点合并\n        let transMatrix = new Matrix4();\n        //let radius = width * 0.5;\n        let geometry = new CylinderGeometry(0, 1, 1, 60);\n\n        let mesh = new Mesh(geometry, materials);\n\n        //box 的中心的在正面下边的中点上,方便对box 高度和深度的变化\n\n        geometry.vertices.forEach(vertice => {\n\n            vertice.addScalar(0.5);\n            //vertice.y -= 0.5;\n            // vertice.z *= -1;\n        });\n\n        // geometry.faces.forEach(face => {\n        //     let a = face.a;\n        //     face.a = face.b;\n        //     face.b = a;\n        // })\n        // geometry.normalsNeedUpdate = true;\n        // geometry.computeFaceNormals();\n\n        //更加给定的得数据变换box\n        let radius = width * 0.5;\n        transMatrix.makeScale(radius, height, radius);\n\n        geometry.vertices.forEach(vertice => {\n            vertice.applyMatrix4(transMatrix);\n        });\n\n\n        return mesh;\n\n\n    },\n\n    //创建一个面\n    createPlane(width = 1, height = 1, materials = undefined, showInfo = {dir:new Vector3()}, group = undefined, faceStyle = {}) {\n\n        if (!materials) {\n\n            materials = new MeshLambertMaterial({\n                color: faceStyle.fillStyle || 0xffffff * Math.random(),\n                side: FrontSide,\n                transparent: true,\n                opacity: faceStyle.alpha || 1,\n                polygonOffset: true,\n                polygonOffsetFactor: 1,\n                polygonOffsetUnits: 0.1,\n                depthTest: true,\n                depthWrite: false\n\n            });\n        }\n\n        let planetGeometry = new PlaneGeometry(width, height);\n        let planeMesh = new Mesh(planetGeometry, materials);\n\n        if (showInfo.dir.equals(new Vector3(1, 0, 0))) {\n            planeMesh.rotateY(_Math.degToRad(90));\n        }\n        if (showInfo.dir.equals(new Vector3(-1, 0, 0))) {\n            planeMesh.rotateY(_Math.degToRad(-90));\n        }\n\n        if (showInfo.dir.equals(new Vector3(0, 1, 0))) {\n            planeMesh.rotateX(_Math.degToRad(-90));\n        }\n\n        if (showInfo.dir.equals(new Vector3(0, -1, 0))) {\n            planeMesh.rotateX(_Math.degToRad(90));\n        }\n        if (showInfo.dir.equals(new Vector3(0, 0, -1))) {\n            planeMesh.rotateY(_Math.degToRad(180));\n        }\n\n        if (showInfo.center) {\n            planeMesh.position.copy(showInfo.center)\n\n        }\n        if (group) {\n            group.visible = showInfo.visible;\n            group.add(planeMesh);\n        }\n        planeMesh.renderOrder = -100;\n        return planeMesh;\n\n    },\n\n    //绘制普通线条\n    createCommonLine(points = [], lineStyle) {\n        //let group = this._frameWork.addGroup({ name: 'commonLines' });\n\n        let material = new LineBasicMaterial({\n            color: lineStyle.strokeStyle,\n            // transparent: true,\n            depthTest: true,\n            depthWrite: false\n\n        });\n        if (lineStyle.lineType == 'dashed') {\n            material = new LineDashedMaterial({\n                color: lineStyle.strokeStyle,\n            })\n        }\n\n\n        let geometry = new Geometry();\n        points.forEach(item => {\n            geometry.vertices.push(item);\n        })\n        let line = new Line(geometry, material);\n        // line.renderOrder=-110;\n        // group.add(line);\n\n        return line;\n\n    },\n\n    //绘制线条\n    createLine(origins, direction, length, lineWidth, lineColor) {\n\n        let group = new Group();\n        let lineMeshGeometry = null, line = null;\n\n        direction.normalize()\n        let matLine = new LineMeshMaterial({\n            color: lineColor,\n            transparent: true,\n            linewidth: lineWidth, // in pixels\n            resolution: new Vector2(this.width, this.height),\n            dashed: false\n        });\n\n        if (!_.isArray(origins)) {\n            origins = [origins];\n        }\n        let triangleVertices = [];\n        origins.forEach(origin => {\n            triangleVertices = [];\n            triangleVertices.push([0, 0, 0]);\n\n            let endPoint = new Vector3();\n            //endPoint.copy([0,0,0]);\n            let delta = new Vector3();\n            delta.copy(direction);\n            delta.multiplyScalar(length);\n            endPoint.add(delta);\n\n            triangleVertices.push(endPoint.toArray());\n            let lineMeshGeometry = new LineGeometry();\n\n            lineMeshGeometry.setPositions(_.flatten(triangleVertices));\n\n            line = new Line2(lineMeshGeometry, matLine);\n            line.drawMode = TrianglesDrawMode;\n            line.computeLineDistances();\n            line.scale.set(1, 1, 1);\n            line.position.copy(origin);\n            group.add(line);\n\n        })\n\n\n        return group;\n\n    },\n\n    //绘制折线\n    createBrokenLine(points, lineWidth, lineColor) {\n        let matLine = new LineMeshMaterial({\n            color: lineColor,\n            linewidth: lineWidth, // in pixels\n            resolution: new Vector2(this.width, this.height),\n            dashed: false,\n            depthTest: true,\n            depthWrite: false\n        });\n        let lineMeshGeometry = new LineGeometry();\n\n        let triangleVertices = [];\n        points.forEach(point => {\n            triangleVertices = triangleVertices.concat(point.toArray());\n        });\n        lineMeshGeometry.setPositions(triangleVertices);\n        let line = new Line2(lineMeshGeometry, matLine);\n        line.drawMode = TrianglesDrawMode;\n        line.computeLineDistances();\n        return line;\n\n    },\n\n    //绘制圆形\n    createCirclePlane(r, faceStyle, materials) {\n        let geometry = new CircleBufferGeometry(r, 32);\n        if (!materials) {\n\n            materials = new SpriteMaterial({\n                color: faceStyle.fillStyle || 0xffffff * Math.random(),\n                transparent: true,\n                opacity: faceStyle.alpha || 1,\n                depthTest: true,\n                depthWrite: false\n\n            });\n        }\n\n        let sprite = new Sprite(materials);\n        sprite.geometry = geometry;\n\n        return sprite;\n\n    },\n\n    //绘制球\n    createSphere(r, faceStyle, materials) {\n        if (!materials) {\n\n            materials = new MeshBasicMaterial({\n                color: faceStyle.fillStyle || 0xffffff * Math.random(),\n                transparent: true,\n                opacity: faceStyle.alpha || 1,\n                // polygonOffset: true,\n                // polygonOffsetFactor: 1,\n                // polygonOffsetUnits: 0.1,\n                depthTest: true,\n                depthWrite: false\n\n            });\n        }\n\n        let geometry = new SphereBufferGeometry(r);\n\n        let mesh = new Mesh(geometry, materials);\n\n        return mesh;\n\n    },\n\n    //绘制文字label\n    creatSpriteText(texts, fontStyle) {\n        //相机变化距离,不改变大小\n        //https://vouzamo.wordpress.com/2016/09/07/threejs-heads-up-display/\n        //1、透视相机根据距离同时调整自己的缩放\n        //2、或者在单独的场景使用正交投影渲染\n\n        let labels = [];\n\n        let renderFont = new RenderFont(fontStyle);\n\n        if (!_.isArray(texts)) {\n            texts = [texts];\n        }\n\n        let labelInfos = renderFont.drawTexts(texts);\n\n        var position = new Float32Array([\n            - 0.5, - 0.5, 0,\n            0.5, - 0.5, 0,\n            0.5, 0.5, 0,\n            - 0.5, 0.5, 0,\n        ]);\n\n        let texture = new Texture();\n        texture.image = renderFont.canvas;\n\n        texture.wrapS = RepeatWrapping;\n        texture.wrapT = RepeatWrapping;\n        texture.minFilter = LinearFilter;\n        texture.magFilter = LinearFilter;\n        texture.needsUpdate = true;\n\n        let spriteMatrial = new SpriteMaterial({\n            color: fontStyle.fillStyle,\n            map: texture,\n            transparent: true,\n            depthWrite: false\n        });\n\n\n        texts.forEach((text, index) => {\n            let realSize = labelInfos.sizes[text];\n            //realSize==[width,height]\n            let scale = new Vector3(realSize[0] / realSize[1], 1, 1);\n            scale.multiplyScalar(realSize[1]);\n            let sprite = new Sprite(spriteMatrial);\n\n\n            let geometry = new BufferGeometry();\n            geometry.setIndex([0, 1, 2, 0, 2, 3]);\n            geometry.addAttribute('position', new Float32BufferAttribute(position, 3, false))\n            geometry.addAttribute('uv', new Float32BufferAttribute(labelInfos.UVs[text], 2, false));\n\n            sprite.geometry = geometry;\n            sprite.scale.copy(scale);\n            sprite.userData = {\n                text: text,\n                size: realSize,\n                maxWidth: labelInfos.maxWidth,\n                maxHeight: labelInfos.maxHeight\n            }\n\n            //默认不进行裁剪\n            sprite.frustumCulled = false;\n            labels.push(sprite);\n\n        })\n\n\n        return labels;\n\n    },\n\n    //绘制多边形\n    createPolygonPlane(points = [], faceStyle = {}, materials) {\n\n        if (!materials) {\n\n            materials = new MeshBasicMaterial({\n                color: faceStyle.fillStyle || 0xffffff * Math.random(),\n                side: DoubleSide,\n                transparent: true,\n                opacity: faceStyle.alpha || 0.2,\n                // polygonOffset: true,\n                // polygonOffsetFactor: 1,\n                // polygonOffsetUnits: 0.1,\n                depthTest: true,\n                depthWrite: false\n\n            });\n        }\n\n        //earcut(data.vertices, data.holes, data.dimensions);\n        let triangles = Earcut.triangulate(points, null, 3);\n        let geometry = new BufferGeometry();\n        let positionBuffer = new Float32BufferAttribute(points, 3);\n        geometry.addAttribute('position', positionBuffer);\n        geometry.setIndex(triangles);\n\n        let mesh = new Mesh(geometry, materials);\n\n        return mesh;\n    },\n\n    createArea(points = [], depth, faceStyle = {}, materials) {\n        if (!materials) {\n\n            materials = new MeshPhongMaterial({\n                color: faceStyle.fillStyle || 0xffffff * Math.random(),\n                side: DoubleSide,\n                transparent: true,\n                opacity: faceStyle.alpha || 1.0,\n                // polygonOffset: true,\n                // polygonOffsetFactor: 1,\n                // polygonOffsetUnits: 0.1,\n                depthTest: true,\n                depthWrite: true\n\n            });\n        }\n\n        //earcut(data.vertices, data.holes, data.dimensions);\n        // let triangles = earcut(points, null, 3);\n        // let geometry = new BufferGeometry();\n        // let positionBuffer = new Float32BufferAttribute(points, 3);\n        // geometry.addAttribute('position', positionBuffer);\n        // geometry.setIndex(triangles);\n\n        let shape = new Shape(points);\n        let extrudeSettings = {\n            depth: depth || 50,\n            bevelEnabled: true,\n            bevelSegments: 2,\n            steps: 1,\n            bevelSize: 1,\n            bevelThickness: 10\n        };\n        let geometry = new ExtrudeBufferGeometry(shape, extrudeSettings)\n        let mesh = new Mesh(geometry, materials);\n\n        return mesh;\n    },\n\n\n    //饼图的一个扇形角\n    create3DPie(height, outterRadius, innerRadius = 0, startAngle, endAngle, materials) {\n        let radialSegments = 32;\n        let PI2 = Math.PI * 2;\n        //与2D的饼图角度一直,并沿顺时针绘制  \n\n        let _startAngle = _Math.degToRad(startAngle - 90);\n        let _endAngle = _Math.degToRad(endAngle - 90);\n\n\n        if (!materials) {\n\n            materials = new MeshBasicMaterial({\n                color: 0xffffff * Math.random(),\n                side: DoubleSide,\n                transparent: true,\n                opacity: 1,\n                depthTest: true,\n                depthWrite: true\n            });\n        }\n        let geometry = new DoughnutGeometry(outterRadius, height, innerRadius, radialSegments, (PI2 - _startAngle) % PI2, -(_endAngle - _startAngle));\n\n        let mesh = new Mesh(geometry, materials);\n        return mesh;\n\n    }\n\n\n\n}\n\nexport { primitive };","\nimport { Framework } from \"./framework\";\nimport { View } from \"./view\";\nimport { primitive } from './primitive';\n\nclass Application {\n\n    constructor(viewWidth, viewHeight) {\n\n        this._framework = new Framework();\n        this._framework.init();\n        this.width = viewWidth;\n        this.height = viewHeight;\n    }\n\n    launch() {\n        this.resetState();\n        this._framework.renderFrame();\n    }\n\n    createView(viewName) {\n        let _view = new View(this._framework, viewName);\n        this._framework.addView(_view);\n        return _view;\n    }\n\n    getView(viewName) {\n        let target = null;\n        this._framework.layers.forEach(view => {\n            if (view.name === viewName) {\n                target = view;\n            }\n        });\n\n        return target;\n    }\n    addGroup(opt) {\n        return this._framework.addGroup(opt);\n    }\n\n    dispose() {\n\n        this._framework.layers.forEach(vw => {\n            this._framework.removeView(vw);\n            vw.dispose();\n        })\n        this._framework.stopRenderFrame();\n        this._framework.renderer.dispose();\n        this._framework.renderer = null;\n    }\n    resize(width, height, frustumSize) {\n        this._framework.layers.forEach(vw => {\n            vw.resize(width, height, frustumSize);\n        })\n    }\n    forceRender() {\n        this._framework.forceRender();\n    }\n    resetState(){\n        this._framework.resetState()\n    }\n\n\n}\n\nObject.assign(Application.prototype, primitive);\n\nexport { Application };","\nimport { Events, Vector3, Box3, Matrix4, Vector2, Math as _Math, AmbientLight, DirectionalLight, PointLight, } from \"mmgl/src/index\";\nimport { _ } from 'mmvis';\n\n\n//默认坐标系的中心点与坐标系的原点都为世界坐标的[0,0,0]点\n//惯性坐标系\nclass InertialSystem extends Events {\n    constructor(root) {\n        super();\n\n        this._root = root;\n        this.coord = {};\n\n        //坐标原点\n        this.origin = new Vector3(0, 0, 0);\n        //中心的\n        this.center = new Vector3(0, 0, 0);\n\n        this.boundbox = new Box3();\n        this.size = new Vector3();\n        this.baseBoundbox = new Box3();\n        this.padding = {\n            left: 0,\n            top: 0,\n            right: 0,\n            bottom: 0,\n            front: 0,\n            back: 0\n        }\n\n        this.width = root.width;\n        this.height = root.height;\n\n\n        this.fieldMap = [];\n        this.group = root.app.addGroup({ name: 'InertialSystem' });\n        _.extend(true, this, this.setDefaultOpts(root.opt));\n\n    }\n\n    setDefaultOpts(opts) {\n        return opts;\n    }\n    init() {\n\n    }\n    addLights() {\n        //加入灯光\n\n        var ambientlight = new AmbientLight(0xffffff, 0.8); // soft white light\n\n        this._root.rootStage.add(ambientlight);\n\n        let center = this.center.clone();\n        center = this._getWorldPos(center);\n        //center.setY(0);\n\n        //     let dirLights = [];\n        let intensity = 0.5;\n        let lightColor = 0xcccccc;\n        //     let position = new Vector3(-1, -1, 1);\n\n        //     dirLights[0] = new DirectionalLight(lightColor, intensity);\n        //     position.multiplyScalar(10000);\n        //     dirLights[0].position.copy(position);\n        //     dirLights[0].target.position.copy(center);\n        //    // this._root.rootStage.add(dirLights[0]);\n\n\n        //     dirLights[1] = new DirectionalLight(lightColor, intensity);\n        //     position = new Vector3(1, -1, 1);\n        //     position.multiplyScalar(10000);\n        //     dirLights[1].position.copy(position);\n        //     dirLights[1].target.position.copy(center);\n        //     this._root.rootStage.add(dirLights[1]);\n\n\n        //     dirLights[2] = new DirectionalLight(lightColor, intensity);\n        //     position = new Vector3(-1, -1, -1);\n        //     position.multiplyScalar(10000);\n        //     dirLights[2].position.copy(position);\n        //     dirLights[2].target.position.copy(center);\n        //     this._root.rootStage.add(dirLights[2]);\n\n\n        //     dirLights[3] = new DirectionalLight(lightColor, intensity);\n        //     position = new Vector3(1, -1, -1);\n        //     position.multiplyScalar(10000);\n        //     dirLights[3].position.copy(position);\n        //     dirLights[3].target.position.copy(center);\n        //     this._root.rootStage.add(dirLights[3]);\n\n\n\n\n        let pointLight = [];\n\n        pointLight[0] = new PointLight(lightColor, intensity);\n        let position = new Vector3(-1, 1, 1);\n        position.multiplyScalar(10000);\n        pointLight[0].position.copy(position);\n        this._root.rootStage.add(pointLight[0]);\n\n\n        pointLight[1] = new PointLight(lightColor, intensity);\n        position = new Vector3(1, 1, 1);\n        position.multiplyScalar(10000);\n        pointLight[1].position.copy(position);\n        this._root.rootStage.add(pointLight[1]);\n\n\n        pointLight[2] = new PointLight(lightColor, intensity);\n        position = new Vector3(-1, 1, -1);\n        position.multiplyScalar(10000);\n        pointLight[2].position.copy(position);\n        this._root.rootStage.add(pointLight[2]);\n\n\n        pointLight[3] = new PointLight(lightColor, intensity);\n        position = new Vector3(1, 1, -1);\n        position.multiplyScalar(1000);\n        pointLight[3].position.copy(position);\n        this._root.rootStage.add(pointLight[3]);\n\n    }\n    updatePosition(center) {\n\n        //更新相机姿态\n        center = center || this.center.clone();\n        center = this._getWorldPos(center);\n        let _renderView = this._root.renderView;\n        let _camera = _renderView._camera;\n\n        //相机默认的旋转角度\n        let dist = _camera.position.distanceTo(center);\n        let phi = _Math.degToRad(_renderView.controls.alpha);   //(90-lat)*(Math.PI/180),\n        let theta = _Math.degToRad(_renderView.controls.beta);   // (lng+180)*(Math.PI/180),\n\n        let y = dist * Math.sin(phi);\n        let temp = dist * Math.cos(phi);\n        let x = temp * Math.sin(theta);\n        let z = temp * Math.cos(theta);\n        //平移实现以中心点为圆心的旋转结果\n        let newPos = new Vector3(x, y, z);\n        newPos.add(center);\n        _camera.position.copy(newPos);\n        //相机朝向中心点 \n        _camera.lookAt(center);\n\n\n        //orbite target position\n        this._root.orbitControls.target.copy(center);\n\n    }\n\n    getEnabledFields(fields) {\n        if (fields) {\n            //如果有传参数 fields 进来，那么就把这个指定的 fields 过滤掉 enabled==false的field\n            //只留下enabled的field 结构\n            return this.filterEnabledFields(fields);\n        };\n\n        // var fmap = {\n        //     left: [], right:[]\n        // };\n\n        // _.each( this.fieldsMap, function( bamboo, b ){\n        //     if( _.isArray( bamboo ) ){\n        //         //多节竹子，堆叠\n\n        //         var align;\n        //         var fields = [];\n\n        //         //设置完fields后，返回这个group属于left还是right的axis\n        //         _.each( bamboo, function( obj, v ){\n        //             if( obj.field && obj.enabled ){\n        //                 align = obj.yAxis.align;\n        //                 fields.push( obj.field );\n        //             }\n        //         } );\n\n        //         fields.length && fmap[ align ].push( fields );\n\n        //     } else {\n        //         //单节棍\n        //         if( bamboo.field && bamboo.enabled ){\n        //             fmap[ bamboo.yAxis.align ].push( bamboo.field );\n        //         }\n        //     };\n        // } );\n\n        // return fmap;\n    }\n\n    filterEnabledFields(fields) {\n        var me = this;\n        var arr = [];\n\n        if (!_.isArray(fields)) fields = [fields];\n        _.each(fields, function (f) {\n            if (!_.isArray(f)) {\n                if (me.getFieldMap(f).enabled) {\n                    arr.push(f);\n                }\n            } else {\n                //如果这个是个纵向数据，说明就是堆叠配置\n                var varr = [];\n                _.each(f, function (v_f) {\n                    if (me.getFieldMap(v_f).enabled) {\n                        varr.push(v_f);\n                    }\n                });\n                if (varr.length) {\n                    arr.push(varr)\n                }\n            }\n        });\n        return arr;\n    }\n\n    getFieldMap(field) {\n        let searchOpt = null;\n        let fieldMap = null;\n        let get = (maps) => {\n            if (maps) {\n                let zField = this.isExistZAxisField && this.isExistZAxisField();\n                if (zField) {\n                    searchOpt = {\n                        key: zField,\n                        value: field\n                    };\n                } else {\n                    searchOpt = {\n                        key: 'field',\n                        value: field\n                    }\n                }\n\n                _.each(maps, function (map, i) {\n                    if (_.isArray(map)) {\n                        get(map)\n                    } else if (map[searchOpt.key] == searchOpt.value) {\n                        fieldMap = map;\n                        return false;\n                    }\n                });\n            }\n\n        }\n        get(this.fieldsMap);\n        return fieldMap;\n\n    }\n    getColor(field) {\n        return this.getFieldMap(field) && this.getFieldMap(field).color;\n    }\n\n    getLegendData() {\n        var me = this;\n        var data = [];\n        _.each(_.flatten(me.fieldsMap), function (map, i) {\n            //因为yAxis上面是可以单独自己配置field的，所以，这部分要过滤出 legend data\n            var isGraphsField = false;\n            _.each(me.graphs, function (gopt) {\n                if (_.indexOf(_.flatten([gopt.field]), map.field) > -1) {\n                    isGraphsField = true;\n                    return false;\n                }\n            });\n\n            if (isGraphsField) {\n                data.push({\n                    enabled: map.enabled,\n                    name: map.field,\n                    field: map.field,\n                    ind: map.ind,\n                    color: map.color,\n                    yAxis: map.yAxis\n                });\n            }\n        });\n        return data;\n    }\n    getBoundbox() {\n\n        let _boundbox = new Box3();\n\n        let _opt = this._root.opt.coord.controls;\n        //let _frustumSize = this._root.renderView.mode == 'ortho' ? _opt.boxHeight * 0.8 : _opt.boxHeight;\n        let _height = _opt.boxHeight;\n        let _width = _opt.boxWidth;\n        let _depth = _opt.boxDepth;\n        \n        //斜边\n        let _hypotenuse = _opt.distance || (new Vector3(_width, 0, _depth)).length();\n\n        let _ratio = this._root.renderView.getVisableSize(new Vector3(0, 0, -_hypotenuse)).ratio;\n\n        let minX = - _width * 0.5 + this.padding.left * _ratio;\n        // let minY = - _frustumSize * 0.5 + this.padding.bottom * _ratio;\n        let minY = - _height * 0.5 + this.padding.bottom * _ratio;\n        let minZ = this.padding.front - _hypotenuse * 0.5 - _depth;\n\n        let maxX = _width * 0.5 - this.padding.right * _ratio;\n        //let maxY = _frustumSize * 0.5 - this.padding.top * _ratio;\n        let maxY = _height * 0.5 - this.padding.top * _ratio;\n        let maxZ = - _hypotenuse * 0.5 + this.padding.back;\n\n        _boundbox.min.set(minX, minY, minZ);\n        _boundbox.max.set(maxX, maxY, maxZ);\n\n        this.baseBoundbox = _boundbox\n        return _boundbox;\n    }\n\n    _getWorldPos(pos) {\n        let posWorld = pos.clone();\n\n        this.group.updateMatrixWorld();\n        posWorld.applyMatrix4(this.group.matrixWorld);\n        return posWorld;\n    }\n\n    getSize() {\n        if (this.boundbox.isEmpty()) {\n            this.boundbox = this.getBoundbox();\n        }\n        this.size = this.boundbox.getSize();\n        return this.size;\n    }\n\n    dataToPoint(data, dir) {\n\n    }\n\n\n    pointToData() {\n\n    }\n\n    initCoordUI() {\n        //什么都不做\n        return null;\n    }\n    drawUI() {\n        // this._root.initComponent();\n    }\n    dispose() {\n\n    }\n    resetData() {\n\n    }\n\n    getAxisDataFrame(fields) {\n        let dataFrame = this._root.dataFrame;\n\n        return dataFrame.getDataOrg(fields, function (val) {\n            if (val === undefined || val === null || val == \"\") {\n                return val;\n            }\n            return (isNaN(Number(val)) ? val : Number(val))\n        })\n\n    }\n    positionToScreen(pos) {\n        return positionToScreen.call(this, pos);\n    }\n    screenToWorld(dx, dy) {\n        return screenToWorld.call(this, dx, dy);\n    }\n\n}\n\n\nlet positionToScreen = (function () {\n    let matrix = new Matrix4();\n\n    return function (pos) {\n        let pCam = this._root.renderView._camera;\n        const widthHalf = 0.5 * this._root.width;\n        const heightHalf = 0.5 * this._root.height;\n\n        let target = this.group.localToWorld(pos);\n\n        target.project(pCam, matrix);\n\n        target.x = (target.x * widthHalf) + widthHalf;\n        target.y = (- (target.y * heightHalf) + heightHalf);\n        return target;\n    }\n})();\n\n\n\nlet screenToWorld = (function () {\n    let matrix = new Matrix4();\n    //可能有问题,未测试\n    return function (dx, dy) {\n        let pCam = this._root.renderView.getCamera();\n        const widthHalf = this._root.width * 0.5;\n        const heightHalf = this._root.height * 0.5;\n        let mouse = new Vector2();\n        mouse.x = dx / widthHalf - 1;\n        mouse.y = -dy / heightHalf + 1;\n        //新建一个三维单位向量 假设z方向就是0.5\n        //根据照相机，把这个向量转换到视点坐标系\n\n        var target = new Vector3(mouse.x, mouse.y, 0.5).unproject(pCam, matrix);\n\n        // let target = this.group.localToWorld(pos);\n\n        // target.project(pCam, matrix);\n\n        // target.x = (target.x * widthHalf) + widthHalf;\n        // target.y = (- (target.y * heightHalf) + heightHalf);\n        return target;\n    }\n})();\n\nexport { InertialSystem };","import { Events } from \"mmgl/src/index\";\nimport { _ } from 'mmvis';\n\n//组件的标准\nclass Component extends Events {\n    constructor(_coordSystem, root) {\n        super();\n\n        this._coordSystem = _coordSystem;\n        this._root = _coordSystem ? _coordSystem._root : root;\n\n        // //每一个组件存放在一个Group中\n        // this.group = new Group();\n        // this.name = '';\n        this.group = this._root.app.addGroup({\n            name: this.constructor.name.toLowerCase() + '_root'\n        });\n\n\n        this.__mouseover = null;\n        this.__mouseout = null;\n        this.__mousemove = null;\n        this.__click = null;\n\n    }\n    setGroupName(name) {\n        this.group.name = name;\n    }\n\n    dispose(group) {\n        let removes = [];\n        group = group || this.group;\n        group.traverse(obj => {\n            if (obj.isMesh || obj.isLine || obj.isLine2 || obj.isSprite) {\n                if (obj.geometry) {\n                    obj.geometry.dispose();\n                }\n                if (obj.material) {\n                    obj.material.dispose();\n                }\n                removes.push(obj);\n            }\n        });\n        while (removes.length) {\n            let obj = removes.pop();\n            if (obj.parent) {\n                obj.parent.remove(obj);\n            } else {\n                obj = null;\n            }\n\n        }\n        this.__mouseover = null;\n        this.__mouseout = null;\n        this.__mousemove = null;\n        this.__click = null;\n    }\n    draw() {\n        //基类不实现\n    }\n    resetData() {\n\n    }\n    //后续组件的公共部分可以提取到这里\n\n}\n\nexport { Component, _ };","import { Component } from \"../Component\";\nimport { Vector3 } from \"mmgl/src/index\";\n\nclass AxisLine extends Component {\n    constructor(_coordSystem, opts) {\n        super(_coordSystem);\n\n        this.name = \"AxisLine\";\n        //轴的起点\n        this.origin = new Vector3(0, 0, 0);\n\n        //轴的方向\n        this.dir = new Vector3(1, 0, 0);\n\n        //轴的长度\n        this.length = 1;\n\n        //轴线的宽带\n        this.lineWidth = opts.lineWidth || 2;\n\n        //轴线的颜色 (默认黑色)\n        this.color = opts.strokeStyle;\n\n        this.axis = null;\n\n        //不可见    \n        this.group.visible = !!opts.enabled;\n\n\n    }\n\n    defaultStyle() {\n        //todo\n    }\n\n    setStyle() {\n        //todo\n    }\n\n    setOrigin(pos) {\n        this.origin.copy(pos);\n    }\n    getOrigin() {\n        return this.origin.clone();\n    }\n\n    setDir(dir) {\n        this.dir.copy(dir);\n    }\n\n    setLength(length) {\n\n        this.length = length;\n    }\n\n    setGroupName(name) {\n        this.group.name = name;\n    }\n\n    drawStart() {\n        this.axis = this._root.app.createLine(this.origin, this.dir, this.length, this.lineWidth, this.color)\n    }\n\n    update() {\n        let pos = this.getOrigin();\n        this.axis.traverse(obj => {\n            if (obj.isLine2) {\n                obj.position.copy(pos);\n            }\n        })\n    }\n\n    draw() {\n\n        this.group.add(this.axis);\n\n    }\n    dispose() {\n        let remove = [];\n        this.group.traverse((obj) => {\n            if (obj.isLine2) {\n                if (obj.geometry) {\n                    obj.geometry.dispose();\n                }\n                if (obj.material) {\n                    obj.material.dispose();\n                }\n                remove.push(obj);\n\n            }\n        })\n        while (remove.length) {\n            let obj = remove.pop();\n            obj.parent.remove(obj);\n        }\n    }\n\n    resetData() {\n        //dataOrg更改数据轴线暂时不需要更新\n    }\n\n\n\n}\n\nexport { AxisLine };","import { Component, _ } from '../Component';\nimport { Vector3 } from 'mmgl/src/index';\n\nclass TickLines extends Component {\n    constructor(_coordSystem, opts) {\n        super(_coordSystem);\n\n        this.name = 'TickLines';\n        //点的起点位置集合\n        this.origins = [];\n\n        //刻度线的绘制方向\n        this.dir = new Vector3();\n\n        //刻度线的宽带\n        this.lineWidth = opts.lineWidth;\n\n        //刻度线的长度\n        //todo 轴线的长度是个数组 通过像素值转换\n        this.length = opts.lineLength;\n\n        this.color = opts.strokeStyle;\n\n        this.offset = opts.offset;\n\n        this._tickLine = null;\n\n        this.lines = [];\n\n        this.group.visible = !!opts.enabled;\n    }\n    initData(axis, attribute) {\n        let me = this;\n        let _dir = new Vector3();\n        let _offset = _dir.copy(me.dir).multiplyScalar(this._offset);\n        this.origins = [];\n        attribute.dataSectionLayout.forEach(item => {\n            let val = item.pos;\n            let startPoint = axis.dir.clone().multiplyScalar(val);\n            startPoint.add(axis.origin);\n            startPoint.add(_offset);\n            me.origins.push(startPoint);\n\n        });\n    }\n    set length(len) {\n\n        this._length = len;\n    }\n    get length() {\n        return this._length;\n    }\n\n    set offset(_offset) {\n        this._offset = _offset;\n    }\n\n    get offset() {\n        return this._offset;\n    }\n\n    setDir(dir) {\n        this.dir = dir;\n    }\n    drawStart() {\n        this.lines = [];\n        this._tickLine = this._root.app.createLine(this.origins, this.dir, this._length, this.lineWidth, this.color);\n        this._tickLine.traverse(obj => {\n            if (obj.isLine2) {\n                this.lines.push(obj);\n            }\n        });\n    }\n    update() {\n        let origins = this.origins;\n        let triangleVertices = [];\n        let endPoint = null;\n        let direction = this.dir.clone();\n        let length = this._length;\n\n\n        let i = 0;\n        this._tickLine.traverse(obj => {\n            if (obj.isLine2) {\n                triangleVertices = [];\n                triangleVertices.push([0, 0, 0]);\n\n                endPoint = new Vector3();\n                endPoint.copy(direction);\n                endPoint.multiplyScalar(length);\n\n                triangleVertices.push(endPoint.toArray());\n\n                obj.geometry.setPositions(_.flatten(triangleVertices));\n                obj.position.copy(origins[i]);\n                i++;\n\n            }\n        })\n\n\n    }\n\n    draw() {\n        this.group.add(this._tickLine);\n    }\n    dispose() {\n        this.lines = [];\n        let remove = [];\n        this.group.traverse((obj) => {\n            if (obj.isLine2) {\n                if (obj.geometry) {\n                    obj.geometry.dispose();\n                }\n                if (obj.material) {\n                    obj.material.dispose();\n                }\n                remove.push(obj);\n\n            }\n        });\n        while (remove.length) {\n            let obj = remove.pop();\n            obj.parent.remove(obj);\n        }\n\n    }\n    resetData(axis, attribute) {\n        this.lines = [];\n        this.initData(axis, attribute);\n        this.dispose();\n        this.drawStart();\n        this.update();\n        this.draw();\n\n    }\n}\n\nexport { TickLines };","\nimport { Component, _ } from '../Component';\nimport { Vector3, Math as _Math } from 'mmgl/src/index';\n\nclass TickTexts extends Component {\n    constructor(_coordSystem, opts) {\n        super(_coordSystem);\n\n        this.name = 'TickTexts';\n        //起点位置集合\n        this.origins = [];\n        this.texts = [];\n\n        this.fontColor = opts.fontColor || '#333';\n\n        this.fontSize = opts.fontSize || 12;\n\n        this.rotation = opts.rotation || 0;\n\n        this.origin = null;\n\n        this.textAlign = opts.textAlign;\n\n        this.verticalAlign = opts.verticalAlign;\n\n        this.dir = new Vector3();\n\n        this.offset = new Vector3(...Object.values(opts.offset)) || new Vector3();\n\n        this._tickTextGroup = null;\n\n        this._tickTextGroup = this._root.app.addGroup({ name: 'tickTexts' });\n\n        this.group.visible = !!opts.enabled;\n        this.group.add(this._tickTextGroup);\n        this.labels = [];\n        this.autoUpdataPostion = false;\n    }\n\n\n    initData(axis, attribute) {\n        let me = this;\n        let _offset = this.offset;\n        me.origins = [];\n\n        attribute.dataSectionLayout.forEach(item => {\n            let val = item.pos;\n            let startPoint = axis.dir.clone().multiplyScalar(val);\n            startPoint.add(axis.origin);\n            startPoint.add(_offset);\n            me.origins.push(startPoint);\n\n        });\n\n        me.updataOrigins = this._updataOrigins(axis, attribute)\n    }\n\n    setDir(dir) {\n        this.dir = dir;\n    }\n    setTextAlign(align) {\n        this.textAlign = align;\n    }\n    setVerticalAlign(align) {\n        this.verticalAlign = align;\n    }\n\n    _updataOrigins(axis, attribute) {\n        let _axis = axis;\n        let _attribute = attribute;\n        return function () {\n            this.initData(_axis, _attribute);\n        }\n    }\n    getTextPos(text) {\n        let index = _.indexOf(this.texts, text);\n        if (index != -1) {\n            return this.origins[index];\n        }\n        return new Vector3();\n    }\n\n    drawStart(texts = []) {\n        let me = this;\n        let app = me._root.app;\n        let { fontSize, fontColor: color } = me;\n        let zDir = new Vector3(0, 0, -1);\n        this.texts = texts || this.texts;\n        this.labels = [];\n        let labels = app.creatSpriteText(texts, { fontSize, fillStyle: color });\n\n        labels.forEach((label, index) => {\n            label.userData.position = me.origins[index].clone();\n\n\n            if (me.autoUpdataPostion) {\n                let _dir = this._coordSystem.getDirection()\n                label.position.copy(me.origins[index].clone());\n\n                if (this.textAlign === 'right') {\n                    // if (_dir === 'FRONT') {\n                    //     label.position.sub(new Vector3(label.userData.size[0] * 0.5, 0, 0));\n                    // }\n                    // if (_dir === 'RIGHT') {\n                    //     label.position.sub(new Vector3(0, 0, -label.userData.size[0] * 0.5))\n                    // }\n                    label.position.sub(this.dir.clone().multiplyScalar(-label.userData.size[0] * 0.5))\n\n                }\n                if (this.textAlign === 'center') {\n                    label.position.sub(this.dir.clone().multiplyScalar(-label.userData.size[1] * 0.5))\n                }\n                if (this.rotation !== 0) {\n                    label.material.rotation = _Math.degToRad(this.rotation);\n                    label.center.set(1, 0.5);\n                }\n\n                //旋转后的位置便宜\n                // if(this.rotation!==0){\n                //    let offsetX= label.userData.size[0] * 0.5 * Math.cos(_Math.degToRad(this.rotation));\n                //    let offsetY= label.userData.size[0]* 0.5 * Math.sin(_Math.degToRad(this.rotation));\n                //    label.position.sub(new Vector3(offsetX,offsetY,0));\n                // }\n\n            } else {\n                label.matrixWorldNeedsUpdate = false;\n                label.onBeforeRender = function (render, scene, camera) {\n                    me.updataOrigins();\n\n                    //更新坐标后的位置\n\n                    let pos = me._coordSystem.positionToScreen(me.getTextPos(this.userData.text).clone());\n                    this.userData.pos = pos.clone();\n                    //屏幕的位置\n                    let textSize = this.userData.size;\n                    let halfwidth = textSize[0] * 0.5;\n                    let halfHeight = textSize[1] * 0.5\n\n                    let camearDir = new Vector3();\n                    camera.getWorldDirection(camearDir);\n                    let isSameDir = zDir.dot(camearDir);\n\n                    if (me.textAlign == 'right') {\n                        let flag = isSameDir < 0 ? 1 : -1;\n                        pos.setX(pos.x + halfwidth * flag);\n                        label.position.copy(pos);\n                    }\n                    if (me.textAlign == 'left') {\n                        let flag = isSameDir < 0 ? -1 : 1;\n                        pos.setX(pos.x + halfwidth * flag);\n                        label.position.copy(pos);\n                    }\n                    if (me.verticalAlign == 'top') {\n                        pos.setY(pos.y - halfHeight);\n                        label.position.copy(pos);\n                    }\n                    if (me.verticalAlign == 'bottom') {\n                        pos.setY(pos.y + halfHeight);\n                        label.position.copy(pos);\n                    }\n\n                    this.position.copy(pos);\n                    this.updateMatrixWorld(true);\n                }\n            }\n\n            me._tickTextGroup.add(label);\n            this.labels.push(label);\n        });\n\n    }\n    draw() {\n\n        this.group.add(this._tickTextGroup);\n    }\n\n    update() {\n        //文字需要实时更新\n    }\n\n    dispose() {\n        this.labels = [];\n        let remove = [];\n        this.group.traverse((obj) => {\n            if (obj.isSprite) {\n                if (obj.geometry) {\n                    obj.geometry.dispose();\n                }\n                if (obj.material) {\n                    obj.material.dispose();\n                    if (obj.material.map) {\n                        obj.material.map.dispose();\n                    }\n                }\n                remove.push(obj);\n\n            }\n        });\n        while (remove.length) {\n            let obj = remove.pop();\n            obj.parent.remove(obj);\n        }\n\n    }\n    resetData(axis, attribute, texts) {\n        this.labels = [];\n        this.initData(axis, attribute);\n        this.dispose();\n        this.drawStart(texts);\n        //this.update();\n        this.draw();\n\n    }\n\n\n}\n\nexport { TickTexts };","import { _, cloneOptions, cloneData, is3dOpt } from \"mmvis\";\nimport { Vector3 } from \"mmgl/src/index\";\n/**\n * 数字千分位加','号\n * @param  {[Number]} $n [数字]\n * @param  {[type]} $s [千分位上的符号]\n * @return {[String]}    [根据$s提供的值 对千分位进行分隔 并且小数点上自动加上'.'号  组合成字符串]\n */\nfunction numAddSymbol($n, $s) {\n    var s = Number($n);\n    var symbol = $s ? $s : ','\n    if (!s) {\n        return String($n);\n    };\n    if (s >= 1000) {\n        var num = parseInt(s / 1000);\n        return String($n.toString().replace(num, num + symbol))\n    } else {\n        return String($n);\n    }\n}\n\n//从一堆点中找到最近的一个点\nfunction findNearPointX(points, point) {\n    let minDistance = Infinity;\n    let result = new Vector3();\n    points.forEach(p => {\n        let distance = Math.abs(point.x - p.x);\n        if (minDistance > distance) {\n            minDistance = distance;\n            result.copy(p);\n        }\n    })\n    return result;\n\n}\n\n\n/** \n* \n* @param hex 例如:\"#23ff45\" \n* @param opacity 透明度 \n* @returns {string} \n*/\nfunction hexToRgba(hex, opacity) {\n    return \"rgba(\" + parseInt(\"0x\" + hex.slice(1, 3)) + \",\" + parseInt(\"0x\" + hex.slice(3, 5)) + \",\" + parseInt(\"0x\" + hex.slice(5, 7)) + \",\" + opacity + \")\";\n}\n\n\n\nexport {\n    numAddSymbol,\n    cloneOptions,\n    cloneData,\n    is3dOpt,\n    findNearPointX,\n    hexToRgba\n};","\nimport { Component, _ } from '../Component';\nimport { AxisLine } from './axisLine';\nimport { Vector3, Box3, TextTexture, Vector2 } from 'mmgl/src/index';\nimport { TickLines } from './tickLines';\nimport { TickTexts } from './tickTexts';\nimport { numAddSymbol } from '../../../utils/tools';\n\nclass YAxis extends Component {\n    constructor(_cartesionUI, opt) {\n        super(_cartesionUI._coordSystem);\n\n        this.name = 'YAxis';\n        this._opt = opt;\n        this._coord = this._coordSystem.coord || {};\n        this._cartesionUI = _cartesionUI;\n        this.name = opt.name;\n\n        //this.width = null; //第一次计算后就会有值\n        //this.yMaxHeight = 0; //y轴最大高\n        //this.height = 0; //y轴第一条线到原点的高\n\n        // this.maxW = 0;    //最大文本的 width\n        this.field = opt.field || [];   //这个 轴 上面的 field 不需要主动配置。可以从graphs中拿\n\n        this.title = {\n            content: \"\",\n            shapeType: \"text\",\n            fontColor: '#999',\n            fontSize: 12,\n            offset: 2,\n            textAlign: \"center\",\n            textBaseline: \"middle\",\n            strokeStyle: null,\n            lineHeight: 0\n        };\n        this._title = null; //this.label对应的文本对象\n\n        this.enabled = true;\n        this.tickLine = {//刻度线\n            enabled: 1,\n            lineWidth: 1, //线宽像素\n            lineLength: 20, //线长(空间单位)\n            strokeStyle: '#333',\n            offset: 0, //空间单位\n        };\n        this.axisLine = {//轴线\n            enabled: 1,\n            lineWidth: 1, //线宽像素\n            strokeStyle: '#333'\n        };\n        this.label = {\n            enabled: 1,\n            fontColor: '#333',\n            fontSize: 12,\n            format: null,\n            rotation: 0,\n            textAlign: \"right\",       //水平方向对齐: left  right center \n            verticalAlign: 'middle',  //垂直方向对齐 top bottom middle\n            lineHeight: 1,\n            offset: { x: 0, y: 0, z: 40 }    //和刻度线的距离\n        };\n\n        this.origin = new Vector3();\n        this.boundboxSize = new Vector3();\n        this.axisAttribute = this._coordSystem.yAxisAttribute[this.name];\n\n\n        _.extend(true, this, opt);\n\n        this.init(opt);\n\n        this.group.visible = !!this.enabled;\n        this._getName();\n\n    }\n\n    init(opt) {\n        let me = this;\n        //extend会设置好this.field\n        //先要矫正子啊field确保一定是个array\n        if (!_.isArray(this.field)) {\n            this.field = [this.field];\n        };\n\n        this._initData(this.axisAttribute);\n\n        this.getOrigin();\n\n        this._onChangeBind = () => {\n            me._initModules();\n        };\n\n        this._root.orbitControls.on('change', this._onChangeBind);\n        me._initModules();\n\n    }\n    _initModules() {\n        if (!this.enabled) return;\n        const _axisDir = new Vector3(0, 1, 0);\n        const _coordSystem = this._coordSystem;\n        const coordBoundBox = _coordSystem.getBoundbox();\n\n        let {\n            x: width,\n            z: depth\n        } = this.boundboxSize;\n\n        let origin = this.origin.clone();\n\n        let _tickLineDir = new Vector3(0, 0, 1);\n        let _faceInfo = this._cartesionUI.getFaceInfo();\n        let _textAlign = this.label.textAlign;\n        let _offsetZ = this.label.offset.z + this.axisLine.lineWidth + this.tickLine.lineLength + this.tickLine.offset;\n\n        if (_faceInfo.left.visible) {\n            if (_faceInfo.back.visible) {\n                //默认计算的原单origin\n                _tickLineDir = new Vector3(0, 0, 1);\n                _textAlign = 'right';\n\n            } else {\n                //默认计算的原单origin\n                if (_coordSystem.coord.yAxis.length == 1) {\n                    origin = new Vector3(0, 0, -depth);\n                }\n                _tickLineDir = new Vector3(0, 0, -1);\n                _textAlign = 'left';\n                _offsetZ *= -1;\n            }\n        } else {\n            if (_faceInfo.back.visible) {\n                origin.setX(width);\n                _tickLineDir = new Vector3(0, 0, 1);\n                _textAlign = 'left';\n            } else {\n                origin.setX(width);\n                if (_coordSystem.coord.yAxis.length == 1) {\n                    origin = new Vector3(width, 0, -depth);\n                }\n                _tickLineDir = new Vector3(0, 0, -1);\n                _textAlign = 'right';\n                _offsetZ *= -1;\n            }\n        }\n\n\n        if (this._axisLine) {\n            if (this._axisLine.getOrigin().equals(origin)) {\n                return;\n            }\n\n            this._axisLine.setOrigin(origin);\n            this._axisLine.update();\n\n\n            this._tickLine.setDir(_tickLineDir);\n            this._tickLine.initData(this._axisLine, this.axisAttribute, _coordSystem.getYAxisPosition);\n            this._tickLine.update();\n\n\n\n            this._tickText.setDir(_tickLineDir);\n            this._tickText.initData(this._axisLine, this.axisAttribute, _coordSystem.getYAxisPosition);\n            this._tickText.setTextAlign(_textAlign);\n            this._tickText.offset.setZ(_offsetZ);\n\n\n        } else {\n            //初始化轴线\n            this._axisLine = new AxisLine(_coordSystem, this.axisLine);\n            this._axisLine.setDir(_axisDir);\n            this._axisLine.setOrigin(origin);\n            this._axisLine.setLength(this.axisAttribute.axisLength);\n            this._axisLine.setGroupName('yAxisLine')\n            this._axisLine.drawStart();\n\n            this.group.add(this._axisLine.group);\n\n\n            //初始化tickLine\n\n            this._tickLine = new TickLines(_coordSystem, this.tickLine);\n            this._tickLine.setDir(_tickLineDir);\n            this._tickLine.initData(this._axisLine, this.axisAttribute);\n            this._tickLine.drawStart();\n            this.group.add(this._tickLine.group);\n\n\n\n            // 初始化tickText\n            this._tickText = new TickTexts(_coordSystem, this.label);\n            this._tickText.offset.z = _offsetZ;\n\n            this._tickText.setTextAlign(_textAlign);\n            this._tickText.setDir(_tickLineDir);\n            this._tickText.initData(this._axisLine, this.axisAttribute);\n\n            this._tickText.drawStart(this._formatTextSection);\n            //this.group.add(this._tickText.group);\n            this._root.labelGroup.add(this._tickText.group)\n\n        }\n\n    }\n    getOrigin() {\n\n        //todo  后续可以通过mmvis生成,该方法放到坐标系,针对多轴给出不同的原点\n        let _coordSystem = this._coordSystem;\n        let coordBoundBox = _coordSystem.getBoundbox();\n        let _size = new Vector3(); //空间盒子的大小\n        coordBoundBox.getSize(_size);\n        this.boundboxSize = _size.clone();\n        let {\n            z: depth\n        } = _size;\n        let origin = _coordSystem.getOrigin();\n\n\n        let segment = _coordSystem.coord.yAxis.length;\n        let index = _.indexOf(_coordSystem.coord.yAxis, this._opt);\n        let step = 0;\n        if (segment == 1) {\n            step = 0;\n        } else {\n            step = index / (segment - 1);\n        }\n        origin.setZ(depth * -step);\n\n        this.origin = origin;\n\n    }\n    updateAxis() {\n        //这里可能需要重构\n        //todo 根据相机移动计算tickLine & tickText的位置 \n    }\n    _getName() {\n\n    }\n    _initData(data) {\n        var me = this;\n\n        this.dataSection = data.getDataSection();\n\n        me._formatTextSection = [];\n        me._textElements = [];\n        _.each(me.dataSection, function (val, i) {\n            me._formatTextSection[i] = me._getFormatText(val, i);\n\n        });\n\n        if (this.label.rotation != 0) {\n            //如果是旋转的文本，那么以右边为旋转中心点\n            this.label.textAlign = \"right\";\n        };\n\n        //取第一个数据来判断xaxis的刻度值类型是否为 number\n        !(\"minVal\" in this._opt) && (this.minVal = _.min(this.dataSection));\n        if (isNaN(this.minVal) || this.minVal == Infinity) {\n            this.minVal = 0;\n        };\n        !(\"maxVal\" in this._opt) && (this.maxVal = _.max(this.dataSection));\n        if (isNaN(this.maxVal) || this.maxVal == Infinity) {\n            this.maxVal = 1;\n        };\n\n        this._getName();\n\n\n    }\n\n    _getFormatText(val, i) {\n        var res;\n        if (_.isFunction(this.label.format)) {\n            res = this.label.format.apply(this, arguments);\n        } else {\n            res = val\n        }\n\n        if (_.isArray(res)) {\n            res = numAddSymbol(res);\n        }\n        if (!res) {\n            res = val;\n        };\n        return res;\n    }\n\n    draw() {\n        //this._initModules();\n        if (!this.enabled) return;\n        this._axisLine.draw();\n        this._tickLine.draw();\n        this._tickText.draw();\n        // console.log('y axis 100 pos: ', this._root.currCoord.getYAxisPosition(100));\n    }\n\n    dispose() {\n\n        this._axisLine.dispose();\n        this._tickLine.dispose();\n        this._tickText.dispose();\n        this._root.orbitControls.off('change', this._onChangeBind);\n        this._onChangeBind = null;\n\n    }\n\n    resetData() {\n        this._initData(this.axisAttribute);\n        this.getOrigin();\n\n        this._axisLine.resetData();\n        this._tickLine.resetData(this._axisLine, this.axisAttribute);\n        this._tickText.resetData(this._axisLine, this.axisAttribute, this._formatTextSection);\n    }\n\n\n\n}\n\nexport { YAxis };","\nimport { Component, _ } from '../Component';\nimport { AxisLine } from './axisLine';\nimport { Vector3, TextTexture } from 'mmgl/src/index';\nimport { TickLines } from './tickLines';\nimport { TickTexts } from './tickTexts';\nimport { numAddSymbol } from '../../../utils/tools';\n\nclass XAxis extends Component {\n    constructor(_cartesionUI) {\n        super(_cartesionUI._coordSystem);\n        \n        this.name='XAxis';\n        \n        let opt = this._opt = this._coordSystem.coord.xAxis;\n\n        this._cartesionUI = _cartesionUI;\n        this.width = 0;\n        this.height = 0;\n\n        this.title = {\n            content: \"\",\n            shapeType: \"text\",\n            fontColor: '#999',\n            fontSize: 12,\n            offset: 2,\n            textAlign: \"center\",\n            textBaseline: \"middle\",\n            strokeStyle: null,\n            lineHeight: 0\n        };\n        this._title = null; //this.title对应的文本对象\n\n        this.enabled = true;\n        this.axisLine = {\n            enabled: 1, //是否有轴线\n            lineWidth: 1,\n            strokeStyle: '#333'\n        };\n\n        this.tickLine = {\n            enabled: 1,\n            lineWidth: 1, //线宽像素\n            lineLength: 20, //线长(空间单位)\n            strokeStyle: '#333',\n            offset: 0, //空间单位\n        };\n\n        this.label = {\n            enabled: 1,\n            fontColor: '#333',\n            fontSize: 12,\n            rotation: 0,\n            format: null,\n            offset: { x: 20, y: 0, z: 40 },\n            textAlign: \"center\",       //水平方向对齐: left  right center \n            verticalAlign: 'bottom',  //垂直方向对齐 top bottom middle\n            lineHeight: 1,\n            evade: true  //是否开启逃避检测，目前的逃避只是隐藏\n        };\n        if (opt.isH && (!opt.label || opt.label.rotaion === undefined)) {\n            //如果是横向直角坐标系图\n            this.label.rotation = 90;\n        };\n\n        this.maxTxtH = 0;\n\n        this.pos = {\n            x: 0,\n            y: 0\n        };\n\n        // this.dataOrg = []; //源数据\n        this.dataSection = []; //默认就等于源数据,也可以用户自定义传入来指定\n\n        this.layoutData = []; //{x:100, value:'1000',visible:true}\n\n        this.sprite = null;\n\n        //过滤器，可以用来过滤哪些yaxis 的 节点是否显示已经颜色之类的\n        //@params params包括 dataSection , 索引index，txt(canvax element) ，line(canvax element) 等属性\n        this.filter = null; //function(params){}; \n\n        this.isH = false; //是否为横向转向的x轴\n\n        this.animation = false;\n\n        //layoutType == \"proportion\"的时候才有效\n        this.maxVal = null;\n        this.minVal = null;\n\n        this.ceilWidth = 0; //x方向一维均分长度, layoutType == peak 的时候要用到\n\n        this.layoutType = \"rule\"; // rule（均分，起点在0） , peak（均分，起点在均分单位的中心）, proportion（实际数据真实位置，数据一定是number）\n\n        //如果用户有手动的 trimLayout ，那么就全部visible为true，然后调用用户自己的过滤程序\n        //trimLayout就事把arr种的每个元素的visible设置为true和false的过程\n        //function\n        this.trimLayout = null;\n\n        this.posParseToInt = false; //比如在柱状图中，有得时候需要高精度的能间隔1px的柱子，那么x轴的计算也必须要都是整除的\n\n        _.extend(true, this, opt);\n\n        // this.label.enabled = this.enabled && this.label.enabled;\n        // this.tickLine.enabled = this.enabled && this.tickLine.enabled;\n        // this.axisLine.enabled = this.enabled && this.axisLine.enabled;\n\n        this.axisAttribute = this._coordSystem.xAxisAttribute;\n\n        this.init(opt, this.axisAttribute);\n        //xAxis的field只有一个值,\n        //this.field = _.flatten([this._coord.xAxisAttribute.field])[0];\n        this.group.visible = !!this.enabled;\n\n    }\n    init(opt, data) {\n        let me = this;\n        // this.rulesGroup = this._root.app.addGroup({ name: 'rulesSprite' });\n\n        // this.group.add(this.rulesGroup);\n\n        this._initData(data);\n\n        this._onChangeBind = () => {\n            me._initModules();\n        };\n        this._root.orbitControls.on('change', this._onChangeBind);\n        me._initModules();\n    }\n    _initData(data) {\n        var me = this;\n\n        if (data && data.field) {\n            this.field = data.field;\n        }\n\n        this.dataSection = data.dataSection;\n\n        me._formatTextSection = [];\n        me._textElements = [];\n        _.each(me.dataSection, function (val, i) {\n            me._formatTextSection[i] = me._getFormatText(val, i);\n        });\n\n\n        if (this.label.rotation != 0) {\n            //如果是旋转的文本，那么以右边为旋转中心点\n            this.label.textAlign = \"right\";\n        };\n\n        //取第一个数据来判断xaxis的刻度值类型是否为 number\n        !(\"minVal\" in this._opt) && (this.minVal = _.min(this.dataSection));\n        if (isNaN(this.minVal) || this.minVal == Infinity) {\n            this.minVal = 0;\n        };\n        !(\"maxVal\" in this._opt) && (this.maxVal = _.max(this.dataSection));\n        if (isNaN(this.maxVal) || this.maxVal == Infinity) {\n            this.maxVal = 1;\n        };\n\n        this._getName();\n    }\n    _getFormatText(val, i) {\n        var res;\n        if (_.isFunction(this.label.format)) {\n            res = this.label.format.apply(this, arguments);\n        } else {\n            res = val\n        }\n\n        if (_.isArray(res)) {\n            res = numAddSymbol(res);\n        }\n        if (!res) {\n            res = val;\n        };\n        return res;\n    }\n    _initModules() {\n        //todo 这个方法后续重构\n\n        //初始化轴线\n        const _axisDir = new Vector3(1, 0, 0);\n        const _coordSystem = this._coordSystem;\n        let coordBoundBox = _coordSystem.getBoundbox();\n\n        let _size = new Vector3(); //空间盒子的大小\n        coordBoundBox.getSize(_size);\n        let {\n            x: width,\n            y: height,\n            z: depth\n        } = _size;\n        let origin = _coordSystem.getOrigin();\n        let _tickLineDir = new Vector3(0, 0, 1);\n        let _faceInfo = this._cartesionUI.getFaceInfo();\n        let _verticalAlign = this.label.verticalAlign;\n        let _offsetZ = this.label.offset.z + this.axisLine.lineWidth + this.tickLine.lineLength + this.tickLine.offset;\n\n        if (_faceInfo.bottom.visible) {\n            if (_faceInfo.back.visible) {\n                origin = _coordSystem.getOrigin();\n                _tickLineDir = new Vector3(0, 0, 1);\n            } else {\n                origin = new Vector3(0, 0, -depth);\n                _tickLineDir = new Vector3(0, 0, -1);\n                _offsetZ *= -1;\n            }\n            _verticalAlign = 'bottom';\n\n        } else {\n            //top 可见\n            if (_faceInfo.back.visible) {\n                origin = new Vector3(0, height, 0);\n                _tickLineDir = new Vector3(0, 0, 1);\n\n            } else {\n                origin = new Vector3(0, height, -depth)\n                _tickLineDir = new Vector3(0, 0, -1);\n                _offsetZ *= -1;\n            }\n            _verticalAlign = 'top';\n        }\n\n        if (this._axisLine) {\n            if (this._axisLine.getOrigin().equals(origin)) {\n                return;\n            }\n            this._axisLine.setOrigin(origin);\n            this._axisLine.update();\n\n            //二次绘制\n            this._tickLine.setDir(_tickLineDir);\n            this._tickLine.initData(this._axisLine, this.axisAttribute, _coordSystem.getXAxisPosition);\n            this._tickLine.update();\n\n            this._tickText.setDir(_tickLineDir);\n            this._tickText.offset.setZ(_offsetZ);\n            this._tickText.initData(this._axisLine, this.axisAttribute, _coordSystem.getXAxisPosition);\n            this._tickText.setVerticalAlign(_verticalAlign);\n\n\n        } else {\n\n            this._axisLine = new AxisLine(_coordSystem, this.axisLine);\n            this._axisLine.setDir(_axisDir);\n            this._axisLine.setOrigin(origin);\n            this._axisLine.setLength(this.axisAttribute.axisLength);\n            this._axisLine.setGroupName('xAxisLine')\n            this._axisLine.drawStart();\n\n            this.group.add(this._axisLine.group);\n\n            //初始化tickLine\n            this._tickLine = new TickLines(_coordSystem, this.tickLine);\n            this._tickLine.setDir(_tickLineDir);\n            this._tickLine.initData(this._axisLine, this.axisAttribute, _coordSystem.getXAxisPosition);\n            this._tickLine.drawStart();\n\n            this.group.add(this._tickLine.group);\n\n\n            //初始化tickText\n            this._tickText = new TickTexts(_coordSystem, this.label);\n\n            this._tickText.offset.z += this.axisLine.lineWidth + this.tickLine.lineWidth + this.tickLine.offset;\n\n            this._tickText.setVerticalAlign(_verticalAlign);\n            this._tickText.setDir(_tickLineDir);\n            this._tickText.initData(this._axisLine, this.axisAttribute, _coordSystem.getXAxisPosition);\n\n            //this._tickText.initData(this._axisLine,this.axisAttribute);\n            this._tickText.drawStart(this._formatTextSection);\n\n            this._root.labelGroup.add(this._tickText.group)\n            //this.group.add(this._tickText.group);\n\n            this._tickText.labels.forEach((label, a) => {\n                _.isFunction(this.filter) && this.filter({\n                    layoutData: this.axisAttribute.dataSectionLayout,\n                    index: a,\n                    label: label,\n                    line: this._tickLine.lines[a]\n                });\n            })\n\n\n\n        }\n\n    }\n    _getName() {\n        // if ( this.title.content ) {\n        //     if( !this._title ){\n        //         this._title = new Canvax.Display.Text(this.title.content, {\n        //             context: {\n        //                 fontSize: this.title.fontSize,\n        //                 textAlign: this.title.textAlign,  //\"center\",//this.isH ? \"center\" : \"left\",\n        //                 textBaseline: this.title.textBaseline,//\"middle\", //this.isH ? \"top\" : \"middle\",\n        //                 fillStyle: this.title.fontColor,\n        //                 strokeStyle: this.title.strokeStyle,\n        //                 lineWidth : this.title.lineWidth,\n        //                 rotation: this.isH ? -180 : 0\n        //             }\n        //         });\n        //     } else {\n        //         this._title.resetText( this.title.content );\n        //     }\n        // }\n    }\n    // evade() {\n    //     //label个数\n    //     let num = this.axisAttribute.dataSectionLayout.length;\n    //     //轴长\n\n\n    //     let labels = this._tickText.labels;\n    //     let orgPoint1 = this._tickText.getTextPos(labels[0].userData.text);\n    //     let orgPoint2 = this._tickText.getTextPos(labels[labels.length - 1].userData.text);\n    //     let point1 = this._coordSystem.positionToScreen(orgPoint1.clone());\n    //     let point2 = this._coordSystem.positionToScreen(orgPoint2.clone());\n    //     //屏幕空间下的轴长\n    //     let lengthInScreen = point2.distanceTo(point1);\n\n    //     console.log(lengthInScreen);\n\n    //     debugger\n\n    // }\n\n    draw() {\n\n        this._axisLine.draw();\n        this._tickLine.draw();\n        this._tickText.draw();\n\n        //console.log('x axis 2 pos: ',this._root.currCoord.getXAxisPosition(2));\n\n\n    }\n    dispose() {\n\n        this._axisLine.dispose();\n        this._tickLine.dispose();\n        this._tickText.dispose();\n        this._root.orbitControls.off('change', this._onChangeBind);\n        this._onChangeBind = null;\n    }\n    resetData() {\n        this._initData(this.axisAttribute);\n        //this.getOrigin();\n\n        this._axisLine.resetData();\n        this._tickLine.resetData(this._axisLine, this.axisAttribute);\n        this._tickText.resetData(this._axisLine, this.axisAttribute, this._formatTextSection);\n    }\n}\n\nexport { XAxis };","\nimport { Component, _ } from '../Component';\nimport { AxisLine } from './axisLine';\nimport { Vector3, TextTexture } from 'mmgl/src/index';\nimport { TickLines } from './tickLines';\n\nimport { TickTexts } from './tickTexts';\nimport { numAddSymbol } from '../../../utils/tools';\n\nclass ZAxis extends Component {\n    constructor(_cartesionUI) {\n        super(_cartesionUI._coordSystem);\n        \n        this.name='ZAxis';\n\n        let opt = this._opt = this._coordSystem.coord.zAxis;\n        this._cartesionUI = _cartesionUI;\n        this._coord = this._coordSystem.coord || {};\n\n        this.width = 0;\n        this.height = 0;\n\n        this.title = {\n            content: \"\",\n            shapeType: \"text\",\n            fontColor: '#999',\n            fontSize: 12,\n            offset: 2,\n            textAlign: \"center\",\n            textBaseline: \"middle\",\n            strokeStyle: null,\n            lineHeight: 0\n        };\n        this._title = null; //this.title对应的文本对象\n\n        this.enabled = true;\n        this.tickLine = {\n            enabled: 1,\n            lineWidth: 1, //线宽像素\n            lineLength: 20, //线长(空间单位)\n            strokeStyle: '#333',\n            offset: 0, //空间单位\n        };\n        this.axisLine = {\n            enabled: 1, //是否有轴线\n            lineWidth: 1,\n            strokeStyle: '#333'\n        };\n        this.label = {\n            enabled: 1,\n            fontColor: '#333',\n            fontSize: 12,\n            rotation: 0,\n            format: null,\n            offset: { x: 40, y: 0, z: 0 },\n            textAlign: \"left\",       //水平方向对齐: left  right center \n            verticalAlign: 'middle',  //垂直方向对齐 top bottom middle\n            lineHeight: 1,\n            //  evade: true  //是否开启逃避检测，目前的逃避只是隐藏\n        };\n        if (opt.isH && (!opt.label || opt.label.rotaion === undefined)) {\n            //如果是横向直角坐标系图\n            this.label.rotation = 90;\n        };\n\n        // this.depth = 500;\n        this.maxTxtH = 0;\n\n        this.pos = {\n            x: 0,\n            y: 0\n        };\n\n        //this.dataOrg = []; //源数据\n        this.dataSection = []; //默认就等于源数据,也可以用户自定义传入来指定\n\n        this.layoutData = []; //{x:100, value:'1000',visible:true}\n\n        this.sprite = null;\n\n        //过滤器，可以用来过滤哪些yaxis 的 节点是否显示已经颜色之类的\n        //@params params包括 dataSection , 索引index，txt(canvax element) ，line(canvax element) 等属性\n        this.filter = null; //function(params){}; \n\n        this.isH = false; //是否为横向转向的x轴\n\n        this.animation = false;\n\n        //layoutType == \"proportion\"的时候才有效\n        this.maxVal = null;\n        this.minVal = null;\n\n        this.ceilWidth = 0; //x方向一维均分长度, layoutType == peak 的时候要用到\n\n        this.layoutType = \"peak\"; // rule（均分，起点在0） , peak（均分，起点在均分单位的中心）, proportion（实际数据真实位置，数据一定是number）\n\n        //如果用户有手动的 trimLayout ，那么就全部visible为true，然后调用用户自己的过滤程序\n        //trimLayout就事把arr种的每个元素的visible设置为true和false的过程\n        //function\n        this.trimLayout = null;\n\n        // if (!opt._coord.zAxisAttribute.section.length) {\n        //     this.depth = 50;\n        // }\n\n        this.posParseToInt = false; //比如在柱状图中，有得时候需要高精度的能间隔1px的柱子，那么x轴的计算也必须要都是整除的\n        _.extend(true, this, opt);\n\n        this.label.enabled = this.enabled && this.label.enabled;\n        this.tickLine.enabled = this.enabled && this.tickLine.enabled;\n        this.axisLine.enabled = this.enabled && this.axisLine.enabled;\n\n        this.axisAttribute = this._coordSystem.zAxisAttribute;\n\n        this.init(opt, this.axisAttribute);\n\n        this.group.visible = !!this.enabled;\n\n    }\n    init(opt, data) {\n        let me = this;\n        // this.rulesGroup = this._root.app.addGroup({ name: 'rulesSprite' });\n\n        // this.group.add(this.rulesGroup);\n\n        this._initData(data);\n\n        this._onChangeBind = () => {\n            me._initModules();\n        };\n\n        this._root.orbitControls.on('change', this._onChangeBind);\n        me._initModules();\n    }\n    _initData(data) {\n        var me = this;\n\n        if (data && data.field) {\n            this.field = data.field;\n        }\n\n        this.dataSection = data.getDataSection();\n        let zCustomSection = data._opt.dataSection||[];\n        me._formatTextSection = [];\n        me._textElements = [];\n        _.each(me.dataSection, function (val, i) {\n            val = zCustomSection[i]||val;\n            me._formatTextSection[i] = me._getFormatText(val, i);\n        });\n\n        if (this.label.rotation != 0) {\n            //如果是旋转的文本，那么以右边为旋转中心点\n            this.label.textAlign = \"right\";\n        };\n\n        //取第一个数据来判断xaxis的刻度值类型是否为 number\n        !(\"minVal\" in this._opt) && (this.minVal = _.min(this.dataSection));\n        if (isNaN(this.minVal) || this.minVal == Infinity) {\n            this.minVal = 0;\n        };\n        !(\"maxVal\" in this._opt) && (this.maxVal = _.max(this.dataSection));\n        if (isNaN(this.maxVal) || this.maxVal == Infinity) {\n            this.maxVal = 1;\n        };\n\n        this._getName();\n\n        this._setZAxisWidth();\n    }\n    _getFormatText(val, i) {\n        var res;\n        if (_.isFunction(this.label.format)) {\n            res = this.label.format.apply(this, arguments);\n        } else {\n            res = val\n        }\n\n        if (_.isArray(res)) {\n            res = numAddSymbol(res);\n        }\n        if (!res) {\n            res = val;\n        };\n        return res;\n    }\n    _initModules() {\n\n        //初始化轴线\n        const _axisDir = new Vector3(0, 0, -1);\n        const _coordSystem = this._coordSystem;\n        let coordBoundBox = _coordSystem.getBoundbox();\n        let _size = new Vector3();\n        coordBoundBox.getSize(_size);\n\n        let {\n            x: width,\n            y: height,\n            z: depth\n        } = _size;\n\n        let origin = new Vector3(width, 0, 0);\n        let _tickLineDir = new Vector3(1, 0, 0);\n        let _faceInfo = this._cartesionUI.getFaceInfo();\n\n        let _textAlign = this.label.textAlign;\n        let _offsetX = this.label.offset.x + this.axisLine.lineWidth + this.tickLine.lineLength + this.tickLine.offset;\n\n        if (_faceInfo.bottom.visible) {\n\n            if (_faceInfo.left.visible) {\n                origin = new Vector3(width, 0, 0);\n                _tickLineDir = new Vector3(1, 0, 0);\n\n            } else {\n                origin = new Vector3(0, 0, 0);\n                _tickLineDir = new Vector3(-1, 0, 0);\n            }\n\n            if (_faceInfo.front.visible) {\n                if (_faceInfo.left.visible) {\n                    _textAlign = 'right';\n                } else {\n                    _textAlign = 'left';\n                    _offsetX = -_offsetX;\n                }\n            } else {\n                if (_faceInfo.left.visible) {\n                    _textAlign = 'left';\n                } else {\n                    _textAlign = 'right';\n                    _offsetX = -_offsetX;\n                }\n            }\n\n        } else {\n            //top 可见\n            if (_faceInfo.left.visible) {\n                origin = new Vector3(width, height, 0);\n                _tickLineDir = new Vector3(1, 0, 0);\n\n            } else {\n                origin = new Vector3(0, height, 0)\n                _tickLineDir = new Vector3(-1, 0, 0);\n\n            }\n            if (_faceInfo.front.visible) {\n                if (_faceInfo.left.visible) {\n                    _textAlign = 'right';\n                } else {\n                    _textAlign = 'left';\n                    _offsetX = -_offsetX;\n                }\n            } else {\n                if (_faceInfo.left.visible) {\n                    _textAlign = 'left';\n                } else {\n                    _textAlign = 'right';\n                    _offsetX = -_offsetX;\n                }\n            }\n        }\n\n        if (this._axisLine) {\n            if (this._axisLine.getOrigin().equals(origin)) {\n                return;\n            }\n            //this._axisLine.dispose();\n            this._axisLine.setOrigin(origin);\n            this._axisLine.update();\n            // this._axisLine.drawStart();\n            // this._axisLine.draw();\n\n            //二次绘制\n            // this._tickLine.dispose();\n            this._tickLine.setDir(_tickLineDir);\n            this._tickLine.initData(this._axisLine, this.axisAttribute, _coordSystem.getZAxisPosition);\n            this._tickLine.update();\n            // this._tickLine.drawStart();\n            // this._tickLine.draw();\n\n            //this._tickText.dispose();\n\n            this._tickText.setDir(_tickLineDir);\n            this._tickText.initData(this._axisLine, this.axisAttribute, _coordSystem.getZAxisPosition);\n            this._tickText.setTextAlign(_textAlign);\n            this._tickText.offset.setX(_offsetX);\n            // this._tickText.drawStart(this._formatTextSection);\n            // this._tickText.draw();\n\n\n        } else {\n            this._axisLine = new AxisLine(_coordSystem, this.axisLine);\n            this._axisLine.setDir(_axisDir);\n            this._axisLine.setOrigin(origin);\n            this._axisLine.setLength(this.axisAttribute.axisLength);\n            this._axisLine.setGroupName('zAxisLine')\n            this._axisLine.drawStart();\n\n            this.group.add(this._axisLine.group);\n\n\n            //初始化tickLine\n\n            this._tickLine = new TickLines(_coordSystem, this.tickLine);\n            this._tickLine.setDir(_tickLineDir);\n            this._tickLine.initData(this._axisLine, this.axisAttribute, _coordSystem.getZAxisPosition);\n            this._tickLine.drawStart();\n\n            this.group.add(this._tickLine.group);\n\n\n            //初始化tickText\n\n            this._tickText = new TickTexts(_coordSystem, this.label);\n            this._tickText.offset.x = _offsetX;\n\n            this._tickText.setDir(_tickLineDir);\n            this._tickText.initData(this._axisLine, this.axisAttribute, _coordSystem.getZAxisPosition);\n\n            //this._tickText.initData(this._axisLine, _coordSystem.zAxisAttribute);\n            this._tickText.drawStart(this._formatTextSection);\n            //this.group.add(this._tickText.group);\n            this._root.labelGroup.add(this._tickText.group)\n\n        }\n    }\n    _getName() {\n        // if ( this.title.content ) {\n        //     if( !this._title ){\n        //         this._title = new Canvax.Display.Text(this.title.content, {\n        //             context: {\n        //                 fontSize: this.title.fontSize,\n        //                 textAlign: this.title.textAlign,  //\"center\",//this.isH ? \"center\" : \"left\",\n        //                 textBaseline: this.title.textBaseline,//\"middle\", //this.isH ? \"top\" : \"middle\",\n        //                 fillStyle: this.title.fontColor,\n        //                 strokeStyle: this.title.strokeStyle,\n        //                 lineWidth : this.title.lineWidth,\n        //                 rotation: this.isH ? -180 : 0\n        //             }\n        //         });\n        //     } else {\n        //         this._title.resetText( this.title.content );\n        //     }\n        // }\n    }\n\n    _setZAxisWidth() { //检测下文字的宽度\n        var me = this;\n        const _coordSystem = me._coordSystem;\n        if (!me.enabled) {\n            me.width = 0;\n        } else {\n            var _maxTextWidth = 0;\n\n            if (this.label.enabled) {\n\n                //me._formatTextSection.forEach((val)=>{\n                let width = TextTexture.getTextWidth(me._formatTextSection, ['normal', 'normal', this.label.fontColor, this.label.fontSize].join(' '))\n                _maxTextWidth = Math.max(_maxTextWidth, width);\n                //})\n                // _.each(me.dataSection, function (val, i) {\n\n                //     //从_formatTextSection中取出对应的格式化后的文本\n                //     let txt = me._textElements[i];\n                //     let scale = me._root.renderView.getObjectScale(txt);\n\n                //     let textWidth = scale.x;\n                //     let textHeight = scale.y;\n\n                //     let width = textWidth; //文本在外接矩形width\n                //     let height = textHeight;//文本在外接矩形height\n\n                //     if (!!me.label.rotation) {\n                //         //有设置旋转\n                //         if (me.label.rotation == 90) {\n                //             width = textHeight;\n                //             height = textWidth;\n                //         } else {\n                //             let sinR = Math.sin(Math.abs(me.label.rotation) * Math.PI / 180);\n                //             let cosR = Math.cos(Math.abs(me.label.rotation) * Math.PI / 180);\n                //             height = parseInt(sinR * textWidth);\n                //             width = parseInt(cosR * textWidth);\n                //         };\n                //     };\n\n                //     _maxTextWidth = Math.max(_maxTextWidth, width);\n                //     console.log('width',width);\n                // });\n            };\n            this._maxTextWidth = _maxTextWidth;\n            let ratio = _coordSystem.getRatioPixelToWorldByOrigin();\n            this.width = (_maxTextWidth + this.tickLine.lineLength + this.tickLine.offset + this.label.offset + this.axisLine.lineWidth) * ratio;\n            //this.width+=10;\n            // if (this._title) {\n            //     this.height += this._title.getTextHeight()\n            // };\n\n        }\n    }\n    //设置布局\n    setLayout(opt) {\n\n    }\n    draw() {\n\n        this._axisLine.draw();\n        this._tickLine.draw();\n        this._tickText.draw();\n\n        // console.log('z axis 项目三 pos: ',this._root.currCoord.getZAxisPosition('项目三'));\n    }\n    dispose() {\n\n        this._axisLine.dispose();\n        this._tickLine.dispose();\n        this._tickText.dispose();\n        this._root.orbitControls.off('change', this._onChangeBind);\n        this._onChangeBind = null;\n    }\n    resetData(){\n        this._initData(this.axisAttribute);\n        //this.getOrigin();\n\n        this._axisLine.resetData();\n        this._tickLine.resetData(this._axisLine, this.axisAttribute);\n        this._tickText.resetData(this._axisLine, this.axisAttribute,this._formatTextSection);\n    }\n}\n\nexport { ZAxis };","\nimport { Component, _ } from '../Component';\nimport { AxisLine } from './axisLine';\nimport { Vector3, TextTexture, MeshBasicMaterial, BackSide, FrontSide, Mesh, Math as _Math, PlaneGeometry, DoubleSide, Box3 } from 'mmgl/src/index';\nimport { TickLines } from './tickLines';\n\n\nclass Grid extends Component {\n    constructor(_cartesionUI) {\n        super(_cartesionUI._coordSystem);\n\n        this.name = \"Grid\";\n        let opt = this._opt = this._coordSystem.coord.grid;\n        this.coord = this._coordSystem.coord;\n\n        this._cartesionUI = _cartesionUI;\n\n        this.enabled = true;\n\n        this.line = {                                //x方向上的线\n            enabled: true,\n            lineType: 'solid',                //线条类型(dashed = 虚线 | solid = 实线)\n            strokeStyle: '#e5e5e5',\n        };\n\n        this.fill = {\n            enabled: false,\n            fillStyle: '#ccc',\n            alpha: 0.1\n        };\n\n\n        _.extend(true, this, opt);\n\n        this.init();\n    }\n    init() {\n        let me = this;\n        let app = this._root.app;\n\n        this.leftGroup = app.addGroup({ name: 'leftGroup' });                     //x轴上的线集合\n        this.rightGroup = app.addGroup({ name: 'rightGroup' });\n        this.topGroup = app.addGroup({ name: 'topGroup' });\n        this.bottomGroup = app.addGroup({ name: 'bottomGroup' });\n        this.frontGroup = app.addGroup({ name: 'frontGroup' });\n        this.backGroup = app.addGroup({ name: 'backGroup' });\n\n        this.group.add(this.leftGroup);\n        this.group.add(this.rightGroup);\n        this.group.add(this.topGroup);\n        this.group.add(this.bottomGroup);\n        this.group.add(this.frontGroup);\n        this.group.add(this.backGroup);\n\n        this.group.renderOrder = -1;\n\n\n        this._onChangeBind = () => {\n            if (!me.enabled) return;\n            let _faceInfo = me._cartesionUI.getFaceInfo();\n            _.each(_faceInfo, (value, key) => {\n                me[key + 'Group'].visible = value.visible;\n            })\n\n        };\n        this._root.orbitControls.on('change', this._onChangeBind);\n\n        this.width = this._coordSystem.xAxisAttribute.axisLength;\n        this.height = this._coordSystem.getYAxis().attr.axisLength;\n        this.depth = this._coordSystem.zAxisAttribute.axisLength;\n\n\n    }\n\n\n\n    drawFace() {\n\n        let me = this;\n        let app = me._root.app;\n        if (!me.enabled) return;\n        const _coordSystem = this._coordSystem;\n        let _faceInfo = this._cartesionUI.getFaceInfo();\n\n\n        if (me.fill.enabled) {\n\n            //todo: 多次调用 group可能会重复加入,这里需要销毁以前的数据 reset统一处理吧\n            //todo view中构建 materail 通过fill 使用同一份material\n            this.leftFace = app.createPlane(this.depth, this.height, undefined, _faceInfo.left, me.leftGroup, this.fill);\n            this.rightFace = app.createPlane(this.depth, this.height, undefined, _faceInfo.right, me.rightGroup, this.fill);\n            this.topFace = app.createPlane(this.width, this.depth, undefined, _faceInfo.top, me.topGroup, this.fill);\n            this.bottomFace = app.createPlane(this.width, this.depth, undefined, _faceInfo.bottom, me.bottomGroup, this.fill);\n            this.frontFace = app.createPlane(this.width, this.height, undefined, _faceInfo.front, me.frontGroup, this.fill);\n            this.backFace = app.createPlane(this.width, this.height, undefined, _faceInfo.back, me.backGroup, this.fill);\n        }\n\n    }\n    drawLine() {\n        //todo 原生的线条会出现锯齿,需要该用三角面来绘制\n        let me = this;\n        let app = me._root.app;\n        if (!me.enabled) return;\n\n        let xSection = me._coordSystem.xAxisAttribute.dataSectionLayout;\n        let yAttribute = me._coordSystem.getYAxis().attr;\n        let ySection = yAttribute.dataSectionLayout;\n        let zSection = me._coordSystem.zAxisAttribute.dataSectionLayout;\n\n        if (!me.line.enabled) {\n            return;\n        }\n        //绘制左面的线条\n        let LinesVectors = [];\n        ySection.forEach(item => {\n            let posY = item.pos;\n            LinesVectors.push(new Vector3(0, posY, 0));\n            LinesVectors.push(new Vector3(0, posY, -this.depth));\n        })\n\n        zSection.forEach(item => {\n            let posZ = item.pos;\n            LinesVectors.push(new Vector3(0, 0, -posZ));\n            LinesVectors.push(new Vector3(0, this.height, -posZ));\n        })\n        let lines = app.createCommonLine(LinesVectors, this.line);\n        me.leftGroup.add(lines);\n\n        //绘制右面的线条\n        LinesVectors = [];\n        ySection.forEach(item => {\n            let posY = item.pos;\n            LinesVectors.push(new Vector3(this.width, posY, 0));\n            LinesVectors.push(new Vector3(this.width, posY, -this.depth));\n        })\n\n        zSection.forEach(item => {\n            let posZ = item.pos;\n            LinesVectors.push(new Vector3(this.width, 0, -posZ));\n            LinesVectors.push(new Vector3(this.width, this.height, -posZ));\n        })\n        lines = app.createCommonLine(LinesVectors, this.line);\n        me.rightGroup.add(lines);\n\n        //绘制上面的线条\n        LinesVectors = [];\n        xSection.forEach(item => {\n            let posX = item.pos;\n            LinesVectors.push(new Vector3(posX, this.height, 0));\n            LinesVectors.push(new Vector3(posX, this.height, -this.depth));\n        })\n\n        zSection.forEach(item => {\n            let posZ = item.pos;\n            LinesVectors.push(new Vector3(0, this.height, -posZ));\n            LinesVectors.push(new Vector3(this.width, this.height, -posZ));\n        })\n        lines = app.createCommonLine(LinesVectors, this.line);\n        me.topGroup.add(lines);\n\n\n        //绘制下面的线条\n        LinesVectors = [];\n        xSection.forEach(item => {\n            let posX = item.pos;\n            LinesVectors.push(new Vector3(posX, 0, 0));\n            LinesVectors.push(new Vector3(posX, 0, -this.depth));\n        })\n\n        zSection.forEach(item => {\n            let posZ = item.pos;\n            LinesVectors.push(new Vector3(0, 0, -posZ));\n            LinesVectors.push(new Vector3(this.width, 0, -posZ));\n        })\n        lines = app.createCommonLine(LinesVectors, this.line);\n        me.bottomGroup.add(lines);\n\n        //绘制前面的线条\n        LinesVectors = [];\n        xSection.forEach(item => {\n            let posX = item.pos;\n            LinesVectors.push(new Vector3(posX, 0, 0));\n            LinesVectors.push(new Vector3(posX, this.height, 0));\n        })\n\n        ySection.forEach(item => {\n            let posY = item.pos;\n            LinesVectors.push(new Vector3(0, posY, 0));\n            LinesVectors.push(new Vector3(this.width, posY, 0));\n        })\n\n        lines = app.createCommonLine(LinesVectors, this.line);\n        me.frontGroup.add(lines);\n\n        //绘制后面的线条\n        LinesVectors = [];\n        xSection.forEach(item => {\n            let posX = item.pos;\n            LinesVectors.push(new Vector3(posX, 0, -this.depth));\n            LinesVectors.push(new Vector3(posX, this.height, -this.depth));\n        })\n\n        ySection.forEach(item => {\n            let posY = item.pos;\n            LinesVectors.push(new Vector3(0, posY, -this.depth));\n            LinesVectors.push(new Vector3(this.width, posY, -this.depth));\n        })\n        lines = app.createCommonLine(LinesVectors, this.line);\n        me.backGroup.add(lines);\n\n    }\n\n    draw() {\n        this.drawFace();\n        this.drawLine();\n    }\n    dispose() {\n        super.dispose();\n        this._root.orbitControls.off('change', this._onChangeBind);\n        this._onChangeBind = null;\n    }\n\n    resetData() {\n        this.dispose();\n\n        this.width = this._coordSystem.xAxisAttribute.axisLength;\n        this.height = this._coordSystem.getYAxis().attr.axisLength;\n        this.depth = this._coordSystem.zAxisAttribute.axisLength;\n        this.draw();\n    }\n\n}\n\nexport { Grid };\n\n","import { Component, _ } from \"../Component\";\nimport { Vector3, Box3 } from \"mmgl/src/index\";\nimport { YAxis } from './yAxis';\nimport { XAxis } from './xAxis';\nimport { ZAxis } from './zAxis';\nimport { Grid } from './grid';\n\nclass Cartesian3DUI extends Component {\n    constructor(_coordSystem) {\n        super(_coordSystem);\n\n\n        //坐标轴实例\n        this._xAxis = null;\n        this._yAxis = [];\n\n        this._zAxis = null;\n        this._grid = null;\n\n        let opt = _coordSystem.coord;\n\n        this.type = \"cartesian3d\";\n        this.name = 'Cartesian3DUI';\n\n        this.horizontal = false;\n\n        //配置信息\n        this.xAxis = opt.xAxis || {};\n        this.yAxis = opt.yAxis || [];\n        this.zAxis = opt.zAxis || {};\n        this.grid = opt.grid || {};\n\n        _.extend(true, this, opt);\n\n        if (opt.horizontal) {\n            this.xAxis.isH = true;\n            this.zAxis.isH = true;\n            _.each(this.yAxis, function (yAxis) {\n                yAxis.isH = true;\n            });\n        };\n\n\n        if (\"enabled\" in opt) {\n            //如果有给直角坐标系做配置display，就直接通知到xAxis，yAxis，grid三个子组件\n            _.extend(true, this.xAxis, {\n                enabled: opt.enabled\n            });\n            _.each(this.yAxis, function (yAxis) {\n                _.extend(true, yAxis, {\n                    enabled: opt.enabled\n                });\n            });\n\n            _.extend(true, this.zAxis, {\n                enabled: opt.enabled\n            });\n\n            this.grid.enabled = opt.enabled;\n        };\n\n        this.init(opt);\n\n    }\n\n\n    init(opt) {\n\n        //多个Y轴单独构建一个组\n        this.yAxisGroup = this._root.app.addGroup({\n            name: 'yAxisGroup'\n        });\n\n        this._initModules();\n\n        //todo z轴的宽度没有计算在内\n        //todo  是否要计算offset值去更改最终原点的位置\n        // let offset = new Vector3(this._yAxisLeft.width, this._xAxis.height, 0);\n        //todo 三维空间中不需要考虑原点的移动 \n        this._coordSystem.updateOrigin(new Vector3(0, 0, 0));\n\n\n\n\n    }\n    _initModules() {\n        this._grid = new Grid(this);\n        this.group.add(this._grid.group);\n\n        this._xAxis = new XAxis(this);\n        this.group.add(this._xAxis.group);\n\n\n        this._zAxis = new ZAxis(this);\n        this.group.add(this._zAxis.group);\n\n\n        this.yAxis.forEach((opt) => {\n            let _yAxis = new YAxis(this, opt)\n            this._yAxis.push(_yAxis);\n            this.yAxisGroup.add(_yAxis.group);\n        });\n\n\n        this.group.add(this.yAxisGroup);\n\n    }\n\n    draw() {\n\n        // this._yAxisLeft.draw();\n        this._yAxis.forEach(_yAxis => {\n            _yAxis.draw();\n        })\n        this._xAxis.draw();\n        this._zAxis.draw();\n        this._grid.draw();\n\n    }\n\n    getFaceInfo() {\n        //todo 待优化\n        let _coordSystem = this._coordSystem;\n        let coordBoundBox = _coordSystem.getBoundbox();\n        let _size = new Vector3(); //空间盒子的大小\n        coordBoundBox.getSize(_size);\n        let {\n            x: width,\n            y: height,\n            z: depth\n        } = _size;\n\n        let lfb = new Vector3(0, 0, 0),            //左前下\n            lft = new Vector3(0, height, 0),       //左前上  \n            lbb = new Vector3(0, 0, -depth),       //左后下 \n            lbt = new Vector3(0, height, -depth),  //左后上\n\n            rfb = new Vector3(width, 0, 0),            //左前下\n            rft = new Vector3(width, height, 0),       //左前上  \n            rbb = new Vector3(width, 0, -depth),       //左后下 \n            rbt = new Vector3(width, height, -depth);  //左后上\n\n\n\n        let zDir = new Vector3(0, 0, 1);\n        let coordCenter = this._coordSystem._getWorldPos(this._coordSystem.center);\n        let cameraPos = coordCenter.clone();\n        this._root.renderView._camera.getWorldPosition(cameraPos);\n\n        let result = {\n            left: {\n                dir: new Vector3(1, 0, 0),     //法线方向\n                center: new Box3().setFromPoints([lft, lft, lbb, lbt]).getCenter(),\n                visible: cameraPos.clone().cross(zDir).y <= 0\n            },\n            right: {\n                dir: new Vector3(-1, 0, 0),     //法线方向\n                center: new Box3().setFromPoints([rft, rft, rbb, rbt]).getCenter(),\n                visible: cameraPos.clone().cross(zDir).y > 0\n            },\n            top: {\n                dir: new Vector3(0, -1, 0),     //法线方向\n                center: new Box3().setFromPoints([lft, rft, lbt, rbt]).getCenter(),\n                visible: cameraPos.clone().cross(zDir).x < 0\n            },\n            bottom: {\n                dir: new Vector3(0, 1, 0),     //法线方向\n                center: new Box3().setFromPoints([lfb, rfb, lbb, rbb]).getCenter(),\n                visible: cameraPos.clone().cross(zDir).x >= 0\n            },\n            front: {\n                dir: new Vector3(0, 0, -1),\n                center: new Box3().setFromPoints([lfb, rfb, rft, lft]).getCenter(),\n                visible: cameraPos.dot(zDir) < 0\n            },\n            back: {\n                dir: new Vector3(0, 0, 1),\n                center: new Box3().setFromPoints([lbb, rbb, rbt, lbt]).getCenter(),\n                visible: cameraPos.dot(zDir) >= 0\n            }\n\n        }\n\n        return result;\n\n    }\n    dispose() {\n\n        this._yAxis.forEach(_yAxis => {\n            _yAxis.dispose();\n        })\n        this._xAxis.dispose();\n        this._zAxis.dispose();\n        this._grid.dispose();\n    }\n    resetData() {\n        this._yAxis.forEach(_yAxis => {\n            _yAxis.resetData();\n        })\n        this._xAxis.resetData();\n        this._zAxis.resetData();\n        this._grid.resetData();\n    }\n\n}\n\nexport { Cartesian3DUI };","import { _, dataSection, axis as Axis } from 'mmvis';\n\nclass AxisAttribute extends Axis {\n    constructor(opt, dataOrg) {\n        super(opt, dataOrg);\n        this.field = opt.field || null;\n        this.exclude = opt.exclude || '';\n\n        if (\"middleweight\" in opt) {\n            this.setMiddleweight(opt.middleweight);\n        }\n        this._nativeDataSection = [];\n    }\n\n    setDataSection(dataSection) {\n        super.setDataSection(dataSection);\n        if (this.layoutType !== 'proportion') {\n            this.dataSection = _.uniq(this.dataSection); //this._getDataSection();\n            //空数据需要去除\n            this.dataSection.forEach((item, i) => {\n                if (item === this.exclude) {\n                    this.dataSection.splice(i, 1);\n                }\n            })\n            this.dataSectionGroup = [this.dataSection];\n        }\n    }\n    getNativeDataSection() {\n        if (this._nativeDataSection.length > 0) {\n            return this._nativeDataSection;\n        }\n        if (this._opt.dataSection) {\n            if (this.layoutType !== \"proportion\") {\n\n                //非proportion 也就是 rule peak 模式下面\n                this._nativeDataSection = _.flatten(this.dataOrg);//this._getDataSection();\n                this._nativeDataSection = _.uniq(this._nativeDataSection);\n            } else {\n                this._nativeDataSection = this.getDataSection();\n            }\n            this._nativeDataSection = this._nativeDataSection;\n        } else {\n            this._nativeDataSection = this.getDataSection();\n        }\n        return this._nativeDataSection;\n    }\n\n    getPartDataOrg(fields) {\n        let result = [];\n        let map = this._opt.field.map(item => {\n            return item.toString();\n        });\n\n        let _fieldArr = _.isArray(fields) ? fields : [fields];\n        _fieldArr.forEach(field => {\n            let index = _.indexOf(map, field.toString());\n            result.push(this.dataOrg[index]);\n        });\n        return result;\n\n    }\n    setMiddleweight(val) {\n        this.middleweight = val;\n    }\n    //多轴重新计算数据集\n    static resetDataSection(_axisAttributeDs) {\n        let _dataSections = [];\n        let maxSegment = 0;\n        let minSegmentUser = Infinity;\n\n        //如果用户制定了某个轴的dataSection,就采用用户制定的最短dataSection的个数定义Y轴的数据\n        //否则则采用自动计算后最多的段,重新计算其他的坐标轴\n\n        //先计算一下,需要划分的段数\n        for (let key in _axisAttributeDs) {\n            let _axisAtt = _axisAttributeDs[key];\n            let _currSection = _axisAtt.getDataSection();;\n            //用户设置了dataSection\n\n            if (!_.isEmpty(_axisAtt._opt.dataSection)) {\n                minSegmentUser = Math.min(minSegmentUser, _currSection.length);\n            } else {\n                maxSegment = Math.max(maxSegment, _currSection.length);\n            }\n            _dataSections.push(_currSection);\n        }\n        let segment = minSegmentUser !== Infinity ? minSegmentUser : maxSegment;\n        for (let key in _axisAttributeDs) {\n            let _axisAtt = _axisAttributeDs[key];\n            let _section = _axisAtt.getDataSection();\n            if (_section.length !== segment) {\n                let step = (_section[_section.length - 1] - _section[0]) / (segment - 1);\n                let newSection = [];\n\n                for (let i = 0; i < segment; i++) {\n                    if (i == segment - 1) {\n                        newSection.push(_section[_section.length - 1])\n                    } else {\n                        //这里默认数据保留两位小数,后期通过坐标轴配置中的format进行自定义的格式化\n                        let val = _section[0] + step * i;\n                        if (val.toString().split(\".\")[1] && val.toString().split(\".\")[1].length > 2) {\n                            newSection.push(+val.toFixed(2))\n                        } else {\n                            newSection.push(val);\n                        }\n\n                    }\n                }\n                _axisAtt.setDataSection(newSection);\n                _axisAtt.calculateProps();\n\n            }\n\n\n        }\n\n\n    }\n\n    //OVERFLOW Class\n    _getCellCount() {\n\n        if (this._cellCount !== null) {\n            return this._cellCount;\n        };\n\n        //总共有几个数据节点，默认平铺整个dataOrg，和x轴的需求刚好契合，而y轴目前不怎么需要用到这个\n        var cellCount = 0;\n        if (this.layoutType == \"proportion\") {\n            cellCount = this.axisLength;\n        } else {\n            //todo 三维场景下,部分数据是重复的,所以直接在数据源中获取长度是不对的\n            //if (this.dataOrg.length && this.dataOrg[0].length && this.dataOrg[0][0].length) {\n            //    cellCount = this.dataOrg[0][0].length;\n            //  }\n            if (this.dataSection.length) {\n                cellCount = this.dataSection.length;\n            };\n        };\n        this._cellCount = cellCount;\n        return cellCount;\n    }\n    getIndexOfVal(val) {\n\n        var valInd = -1;\n        if (this.layoutType == \"proportion\") {\n\n            //先检查下 dataSectionLayout 中有没有对应的记录\n            var _ind = this._getLayoutDataOf({ val: val }).ind;\n            if (_ind != undefined) {\n                return _ind;\n            };\n\n            //因为在proportion中index 就是 pos\n            //所以这里要返回pos\n            valInd = this.getPosOfVal(val);\n        } else {\n            var _ind = _.indexOf(this.dataSection, val);\n            if (_ind != -1) {\n                valInd = _ind;\n            };\n\n        }\n\n\n        return valInd;\n    }\n}\n\nexport { AxisAttribute }","\nimport { InertialSystem } from './inertial';\nimport { Vector3, Box3, Matrix3, Matrix4, Math as _Math, AmbientLight, PointLight, DirectionalLight } from 'mmgl/src/index'\nimport { Cartesian3DUI } from '../../components/cartesian3dUI/index'\nimport { _, dataSection, } from 'mmvis';\nimport { AxisAttribute } from './model/axisAttribute';\n\n\n/** note: \n * 获取所有的配置信息,取去配置中影响布局的相关参数\n * coord{\n *    xAsix:{}\n *    yAxis:[] \n *    zAxis:{} \n * }\n * \n * graphs{}\n * \n * makeline其他组件\n * \n * 通过Data和相关的配置,给出各个坐标轴的DataSection,计算出各个轴上数据点对应的位置\n * \n * ***/\nconst DEFAULT_AXIS = 'default_axis_for_Y';\n\nclass Cartesian3D extends InertialSystem {\n    constructor(root) {\n        super(root);\n\n        this.type = \"Cartesian3D\";\n        this.offset = new Vector3(0, 0, 0);\n\n        this._coordUI = null;\n\n        this.group.name = 'cartesian3dSystem';\n\n\n    }\n    setDefaultOpts(opts) {\n        var me = this;\n        this._zSection = [];\n        me.coord = {\n            xAxis: {\n                //波峰波谷布局模型，默认是柱状图的，折线图种需要做覆盖\n                layoutType: \"rule\", //\"peak\",  \n                //默认为false，x轴的计量是否需要取整， 这样 比如某些情况下得柱状图的柱子间隔才均匀。\n                //比如一像素间隔的柱状图，如果需要精确的绘制出来每个柱子的间距是1px， 就必须要把这里设置为true\n                posParseToInt: false\n            },\n            yAxis: [], //y轴至少有一个\n            zAxis: {\n                enabled: true,\n                field: '',\n                layoutType: \"rule\",\n                //   depth: 50     //最大深度是1000\n            }\n        };\n\n        opts = _.clone(opts);\n\n        //规范Y轴的定义,采用数组形式,如果没有定义就初始化为空数组\n        if (opts.coord.yAxis) {\n            var _nyarr = [];\n            _.each(_.flatten([opts.coord.yAxis]), function (yopt, index) {\n                //标记定义的Y轴信息是否在绘图中使用\n                yopt._used = false;\n                //如果坐标轴没有置顶名称,第一个为默认坐标轴,其余的将被舍弃\n                if (_.isEmpty(yopt.name)) {\n                    if (index == 0) {\n                        yopt.name = DEFAULT_AXIS;\n                    } else {\n                        return;\n                    }\n                }\n                _nyarr.push(_.clone(yopt));\n\n\n            });\n            opts.coord.yAxis = _nyarr;\n        } else {\n            opts.coord.yAxis = [];\n        }\n\n\n\n        let getYaxisInfo = (name) => {\n            let _opt = null;\n            if (opts.coord.yAxis) {\n                _.each(_.flatten([opts.coord.yAxis]), function (yopt) {\n                    if (yopt.name == name) {\n                        yopt._used = true;\n                        _opt = yopt\n                    }\n                })\n            }\n            return _opt;\n        }\n\n\n\n        //根据opt中得Graphs配置，来设置 coord.yAxis\n        if (opts.graphs) {\n            //有graphs的就要用找到这个graphs.field来设置coord.yAxis\n            for (var i = 0; i < opts.graphs.length; i++) {\n\n                var graphs = opts.graphs[i];\n                this._zSection.push(graphs.field.toString());\n                if (graphs.type == \"bar\") {\n                    //如果graphs里面有柱状图，那么就整个xAxis都强制使用 peak 的layoutType\n                    me.coord.xAxis.layoutType = \"peak\";\n                    me.coord.zAxis.layoutType = \"peak\";\n                }\n                if (graphs.field) {\n                    //没有配置field的话就不绘制这个 graphs了\n                    //根据graphs中的数据整理y轴的数据\n                    let _axisName = graphs.yAxisName;\n                    if (!graphs.yAxisName) {\n                        //没有指定坐标轴的名称,取默认轴\n                        _axisName = DEFAULT_AXIS\n                    }\n                    //增加Y轴\n                    let _tAxis = getYaxisInfo(_axisName)\n                    if (!_tAxis) {\n                        let _yAxisNew = {\n                            field: [],\n                            name: _axisName,\n                            _used: true\n                        }\n                        if (_.isArray(graphs.field)) {\n                            _yAxisNew.field = _yAxisNew.field.concat(graphs.field);\n                        } else {\n                            _yAxisNew.field.push(graphs.field)\n                        }\n                        opts.coord.yAxis.push(_yAxisNew);\n                    } else {\n\n                        if (_.isEmpty(_tAxis.field)) {\n                            _tAxis.field = [];\n                        }\n                        if (_.isArray(_tAxis.field)) {\n                            if (_.isArray(graphs.field)) {\n                                _tAxis.field = _tAxis.field.concat(graphs.field);\n                            } else {\n                                _tAxis.field.push(graphs.field);\n                            }\n                        } else {\n                            if (_.isArray(graphs.field)) {\n                                _tAxis.field = [_tAxis.field].concat(graphs.field);\n                            } else {\n                                _tAxis.field = [_tAxis.field].push(graphs.field);\n                            }\n                        }\n                    }\n\n                } else {\n                    //在，直角坐标系中，每个graphs一定要有一个field设置，如果没有，就去掉这个graphs\n                    opts.graphs.splice(i--, 1);\n                }\n            }\n\n\n        };\n        //初始化Y轴的相关参数\n        for (var i = 0; i < opts.coord.yAxis.length; i++) {\n            if (!opts.coord.yAxis[i].layoutType) {\n                opts.coord.yAxis[i].layoutType = 'proportion'; //默认布局\n            }\n            //没有field的Y轴是无效的配置\n            if (_.isEmpty(opts.coord.yAxis[i].field) || opts.coord.yAxis[i]._used == false) {\n                opts.coord.yAxis.splice(i--, 1);\n            }\n            if (opts.coord.yAxis[i]) {\n                delete opts.coord.yAxis[i]._used;\n            }\n\n        };\n        return opts;\n    }\n\n    init() {\n\n        //先计算一次空间范围供计算坐标轴宽高使用\n        this.getBoundbox();\n        let { x: widith, y: height, z: depth } = this.boundbox.getSize();\n\n        let opt = _.clone(this.coord);\n        this.xAxisAttribute = new AxisAttribute(opt.xAxis, this.getAxisDataFrame(opt.xAxis.field)); //new AxisAttribute(this._root);\n        this.xAxisAttribute.setDataSection();\n        this.xAxisAttribute.setAxisLength(widith);\n\n        //默认Y轴\n        this.yAxisAttribute = Object.create(null);\n        let axisCount = 0;\n        opt.yAxis.forEach((yopt) => {\n            let _yAxisAttr = this.yAxisAttribute[yopt.name];\n            if (!_yAxisAttr) {\n                _yAxisAttr = new AxisAttribute(yopt, this.getAxisDataFrame(yopt.field)) //new AxisAttribute(this._root);\n                this.yAxisAttribute[yopt.name] = _yAxisAttr;\n                _yAxisAttr.setDataSection();\n                _yAxisAttr.setAxisLength(height);\n                axisCount++;\n            } else {\n                console.error('Y轴设置报错了')\n            }\n        });\n\n        //如果是多Y轴的情况\n        if (axisCount > 1) {\n            AxisAttribute.resetDataSection(this.yAxisAttribute);\n        }\n\n\n\n\n        //Z轴如果设置了filed,按照数据轴的正常逻辑进行,否则Z轴按照Graphs配置中\n        //的索引显示对应的名称 \n        if (!this.isExistZAxisField()) {\n            let _sectionZ = [];\n            this._root.opt.graphs.forEach((yOps) => {\n                _sectionZ.push(yOps.field.toString());\n            })\n\n            this.zAxisAttribute = new AxisAttribute(opt.zAxis, [[_sectionZ]]);\n            // this.zAxisAttribute.setDataSection();\n            //  this.zAxisAttribute.calculateProps();\n\n\n        } else {\n            this.zAxisAttribute = new AxisAttribute(opt.zAxis, this.getAxisDataFrame(opt.zAxis.field));\n        }\n        this.zAxisAttribute.setDataSection()\n        this.zAxisAttribute.setAxisLength(depth);\n\n        this.fieldsMap = this._setFieldsMap();\n\n        this.addLights();\n        this.bindEvent();\n    }\n\n    _setFieldsMap() {\n        var me = this;\n        var fieldInd = 0;\n        let opt = _.clone(this.coord);\n        let getTheme = this._root.getTheme.bind(this._root);\n        let _set = (fields) => {\n\n            let _zField = this.isExistZAxisField();\n\n\n            if (!fields) {\n                var yAxis = opt.yAxis;\n                if (!_.isArray(yAxis)) {\n                    yAxis = [yAxis];\n                };\n                fields = [];\n                _.each(yAxis, function (item, i) {\n                    if (item.field) {\n                        fields = fields.concat(item.field);\n                    };\n                });\n            };\n\n            if (_.isString(fields)) {\n                fields = [fields];\n            };\n\n            var clone_fields = _.clone(fields);\n            for (var i = 0, l = fields.length; i < l; i++) {\n                if (_zField) {\n                    //三维数据\n                    let zDataSection = this.zAxisAttribute.getDataSection();\n                    let len = zDataSection.length;\n                    zDataSection.forEach((zf, zInd) => {\n                        if (_.isString(fields[i])) {\n                            clone_fields[i * len + zInd] = {\n                                field: fields[i],\n                                enabled: true,\n                                // yAxis: me._getYaxisOfField(fields[i]),\n                                color: getTheme(fieldInd),\n                                ind: fieldInd++,\n                                zInd: zInd,\n                                [_zField]: zf\n\n                            }\n                        } else {\n                            clone_fields[i] = _set(fields[i], fieldInd);\n                        }\n                    });\n                } else {\n                    //二维数据\n                    if (_.isString(fields[i])) {\n\n                        clone_fields[i] = {\n                            field: fields[i],\n                            enabled: true,\n                            // yAxis: me._getYaxisOfField(fields[i]),\n                            color: getTheme(fieldInd),\n                            ind: fieldInd++,\n                            zInd: 0\n                        }\n\n                    }\n                    if (_.isArray(fields[i])) {\n                        clone_fields[i] = _set(fields[i], fieldInd);\n                    }\n                }\n\n            };\n\n            return clone_fields;\n        };\n\n        return _set();\n    }\n\n\n\n    isExistZAxisField() {\n        if (this.coord.zAxis && !_.isEmpty(this.coord.zAxis.field)\n            && this.coord.zAxis.layoutType !== \"proportion\") {\n            return this.coord.zAxis.field\n        }\n        return false;\n    }\n\n    getYAxis(name = DEFAULT_AXIS) {\n        let yAxisAttr = this.yAxisAttribute[name];\n        //如果没有指定名称,通知默认名称不存在,取第一个配置的Name\n        if (!yAxisAttr) {\n            name = this.coord.yAxis[0].name;\n            yAxisAttr = this.yAxisAttribute[name];\n        }\n\n        let yOpts = _.clone(yAxisAttr._opt);\n        return {\n            attr: yAxisAttr,\n            opts: yOpts\n        }\n    }\n\n    getBoundbox() {\n        //笛卡尔坐标的原点默认为左下方\n\n        let baseBoundbox = super.getBoundbox();\n        let offset = this.offset.clone();\n        this.baseBoundbox = baseBoundbox;\n        this.boundbox.min.set(0, 0, 0);\n        this.boundbox.max.set(baseBoundbox.max.x - baseBoundbox.min.x - offset.x,\n            baseBoundbox.max.y - baseBoundbox.min.y - offset.y,\n            baseBoundbox.max.z - baseBoundbox.min.z - offset.z\n        )\n\n        //如果指定了Z轴的宽度就不采用默认计算的宽度\n        if (this._root.opt.coord.zAxis && this._root.opt.coord.zAxis.depth) {\n            this.boundbox.max.z = this._root.opt.coord.zAxis.depth;\n        }\n\n        this.center = this.boundbox.getCenter();\n        this.center.setZ(-this.center.z);\n        return this.boundbox;\n\n    }\n    //粗略计算在原点位置的世界线段的长度与屏幕像素的长度比\n    getRatioPixelToWorldByOrigin(_origin) {\n        let baseBoundbox = super.getBoundbox();\n        if (_origin === undefined) {\n            _origin = baseBoundbox.min.clone();\n            _origin.setZ(baseBoundbox.max.z);\n        }\n        let ratio = this._root.renderView.getVisableSize(_origin).ratio;\n        return ratio;\n    }\n\n\n    //更新坐标原点\n    updateOrigin(offset) {\n\n        this.offset = offset.clone();\n\n        this.boundbox = this.getBoundbox();\n\n        this.setWorldOrigin();\n\n        this.updatePosition();\n\n    }\n\n    // updatePosition() {\n\n    //     //更新相机姿态\n    //     let center = this.center.clone();\n    //     center = this._getWorldPos(center);\n    //     let _renderView = this._root.renderView;\n    //     let _camera = _renderView._camera;\n\n    //     //相机默认的旋转角度\n    //     let dist = _camera.position.distanceTo(center);\n    //     let phi = _Math.degToRad(_renderView.controls.alpha);   //(90-lat)*(Math.PI/180),\n    //     let theta = _Math.degToRad(_renderView.controls.beta);   // (lng+180)*(Math.PI/180),\n\n    //     let y = dist * Math.sin(phi);\n    //     let temp = dist * Math.cos(phi);\n    //     let x = temp * Math.sin(theta);\n    //     let z = temp * Math.cos(theta);\n    //     //平移实现以中心点为圆心的旋转结果\n    //     let newPos = new Vector3(x, y, z);\n    //     newPos.add(center);\n    //     _camera.position.copy(newPos);\n    //     //相机朝向中心点 \n    //     _camera.lookAt(center);\n\n\n    //     //orbite target position\n    //     this._root.orbitControls.target.copy(center);\n\n    // }\n\n    addLights() {\n        //加入灯光\n\n        var ambientlight = new AmbientLight(0xffffff, 0.5); // soft white light\n\n        this._root.rootStage.add(ambientlight);\n\n        let center = this.center.clone();\n        center = this._getWorldPos(center);\n        //center.setY(0);\n\n        let dirLights = [];\n        let intensity = 0.5;\n        let lightColor = 0xFFFFFF;\n        let position = new Vector3(-1, -1, 1);\n\n        let pointLight = [];\n\n        pointLight[0] = new PointLight(lightColor, intensity);\n        position = new Vector3(-1, 1, 1);\n        position.multiplyScalar(10000);\n        pointLight[0].position.copy(position);\n        this._root.rootStage.add(pointLight[0]);\n\n\n        pointLight[1] = new PointLight(lightColor, intensity);\n        position = new Vector3(1, 1, 1);\n        position.multiplyScalar(10000);\n        pointLight[1].position.copy(position);\n        this._root.rootStage.add(pointLight[1]);\n\n\n        pointLight[2] = new PointLight(lightColor, intensity);\n        position = new Vector3(-1, 1, -1);\n        position.multiplyScalar(10000);\n        pointLight[2].position.copy(position);\n        this._root.rootStage.add(pointLight[2]);\n\n\n        pointLight[3] = new PointLight(lightColor, intensity);\n        position = new Vector3(1, 1, -1);\n        position.multiplyScalar(1000);\n        pointLight[3].position.copy(position);\n        this._root.rootStage.add(pointLight[3]);\n\n\n\n\n    }\n\n    setWorldOrigin() {\n        let baseBoundbox = super.getBoundbox();\n        let offset = this.offset.clone();\n        let pos = baseBoundbox.min.clone();\n        pos.setZ(baseBoundbox.max.z);\n        pos.add(offset);\n        this.group.position.copy(pos);\n    }\n    getOrigin() {\n        return this.origin.clone();\n    }\n\n    initCoordUI() {\n        this._coordUI = new Cartesian3DUI(this);\n        this.group.add(this._coordUI.group);\n\n    }\n\n    drawUI() {\n        super.drawUI();\n        this._coordUI.draw();\n\n    }\n\n    getXAxisPosition(data) {\n        return this.xAxisAttribute.getPosOfVal(data);\n    }\n    getYAxisPosition(data, yAxisAttribute) {\n        return yAxisAttribute.getPosOfVal(data);\n    }\n    getZAxisPosition(data) {\n        return this.zAxisAttribute.getPosOfVal(data);\n    }\n\n    getCeilSize() {\n\n        let ceil = new Vector3();\n        let size = this.boundbox.getSize();\n        let dataLenX = this.xAxisAttribute.getDataSection().length;\n        let dataLenY = this.getYAxis().attr.getDataSection().length;\n        let dataLenZ = this.zAxisAttribute.getDataSection().length;\n\n        // dataLenX = dataLenX - 1 > 0 ? dataLenX : 3;\n        // dataLenY = dataLenY - 1 > 0 ? dataLenY : 3;\n        // dataLenZ = dataLenZ - 1 > 0 ? dataLenZ : 3;\n        if (this.coord.xAxis.layoutType == 'peak') {\n            ceil.setX(size.x / (dataLenX));\n        } else {\n            ceil.setX(size.x / (dataLenX + 1));\n        }\n\n        ceil.setY(size.y / (dataLenY + 1));\n        if (this.coord.zAxis.layoutType == 'peak') {\n            ceil.setZ(size.z / (dataLenZ));\n        } else {\n            ceil.setZ(size.z / (dataLenZ + 1));\n        }\n\n\n        return ceil;\n\n    }\n    bindEvent() {\n        let interaction = this._root.interaction;\n        if (interaction) {\n            interaction.on('move', (e) => {\n                let dx = e.event.offsetX;\n                let dy = e.event.offsetY;\n                let pos = this.screenToWorld(dx, dy);\n               // console.log(dx, dy, pos);\n            })\n        }\n    }\n\n\n\n    dispose() {\n\n        this._coordUI.dispose();\n    }\n    resetData() {\n        let opt = _.clone(this.coord);\n        this.xAxisAttribute.resetDataOrg(this.getAxisDataFrame(opt.xAxis.field));\n        this.xAxisAttribute.setDataSection();\n        this.xAxisAttribute.calculateProps();\n\n        opt.yAxis.forEach((yopt) => {\n            let _yAxisAttr = this.yAxisAttribute[yopt.name];\n            if (_yAxisAttr) {\n                _yAxisAttr.resetDataOrg(this.getAxisDataFrame(yopt.field));\n                _yAxisAttr.setDataSection();\n                _yAxisAttr.calculateProps();\n            }\n        })\n\n\n        if (_.isEmpty(opt.zAxis.field)) {\n            let _sectionZ = [];\n            this._root.opt.graphs.forEach((yOps) => {\n                _sectionZ.push(yOps.field.toString());\n            })\n\n            this.zAxisAttribute.resetDataOrg([[_sectionZ]]);\n\n        } else {\n            this.zAxisAttribute.resetDataOrg(this.getAxisDataFrame(opt.zAxis.field));\n        }\n\n        this.zAxisAttribute.setDataSection();\n        this.zAxisAttribute.calculateProps();\n\n        //UI组件resetData\n        this._coordUI.resetData();\n    }\n}\n\n\n\n\n\n\n\nexport { Cartesian3D, DEFAULT_AXIS };","import { Vector3, Spherical, Vector2, Events, Quaternion } from 'mmgl/src/index';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: two-finger move\n\nconst EPS = 0.000001;\nconst changeEvent = { type: 'change' };\nconst startEvent = { type: 'start' };\nconst endEvent = { type: 'end' };\nconst MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\nconst STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\n\n\nclass OrbitControls extends Events {\n    constructor(object, domElement) {\n        super();\n        let scope = this;\n\n        this.object = object;\n\n        this.domElement = (domElement !== undefined) ? domElement : document;\n\n        // Set to false to disable this control\n        this.enabled = true;\n\n        // \"target\" sets the location of focus, where the object orbits around\n        this.target = new Vector3();\n\n        // How far you can dolly in and out ( PerspectiveCamera only )\n        this.minDistance = 0;\n        this.maxDistance = Infinity;\n\n        // How far you can zoom in and out ( OrthographicCamera only )\n        this.minZoom = 0;\n        this.maxZoom = Infinity;\n\n        // How far you can orbit vertically, upper and lower limits.\n        // Range is 0 to Math.PI radians.\n        this.minPolarAngle = 0; // radians\n        this.maxPolarAngle = Math.PI; // radians\n\n        // How far you can orbit horizontally, upper and lower limits.\n        // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n        this.minAzimuthAngle = - Infinity; // radians\n        this.maxAzimuthAngle = Infinity; // radians\n\n        // Set to true to enable damping (inertia)\n        // If damping is enabled, you must call controls.update() in your animation loop\n        this.enableDamping = false;\n        this.dampingFactor = 0.25;\n\n        // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n        // Set to false to disable zooming\n        this.enableZoom = true;\n        this.zoomSpeed = 1.0;\n\n        // Set to false to disable rotating\n        this.enableRotate = true;\n        this.rotateSpeed = 1.0;\n\n        // Set to false to disable panning\n        this.enablePan = true;\n        this.panSpeed = 1.0;\n        this.screenSpacePanning = false; // if true, pan in screen-space\n        this.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n        // Set to true to automatically rotate around the target\n        // If auto-rotate is enabled, you must call controls.update() in your animation loop\n        this.autoRotate = false;\n        this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n        // Set to false to disable use of the keys\n        this.enableKeys = true;\n\n        // The four arrow keys\n        this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\n        // Mouse buttons\n        this.mouseButtons = { ORBIT: MOUSE.LEFT, ZOOM: MOUSE.MIDDLE, PAN: MOUSE.RIGHT };\n\n        // for reset\n        this.target0 = this.target.clone();\n        this.position0 = this.object.position.clone();\n        this.zoom0 = this.object.zoom;\n\n        //\n        // internals\n        //\n\n        this._state = STATE.NONE;\n        // current position in spherical coordinates\n        this._spherical = new Spherical();\n        this._sphericalDelta = new Spherical();\n\n        this._scale = 1;\n        this._panOffset = new Vector3();\n        this._zoomChanged = false;\n\n        this._rotateStart = new Vector2();\n        this._rotateEnd = new Vector2();\n        this._rotateDelta = new Vector2();\n\n        this._panStart = new Vector2();\n        this._panEnd = new Vector2();\n        this._panDelta = new Vector2();\n\n        this._dollyStart = new Vector2();\n        this._dollyEnd = new Vector2();\n        this._dollyDelta = new Vector2();\n\n\n\n        scope._onContextMenubind = onContextMenu.bind(scope);\n        scope._onMouseDownbind = onMouseDown.bind(scope);\n        scope._onMouseWheelbind = onMouseWheel.bind(scope);\n        scope._onTouchStartbind = onTouchStart.bind(scope);\n        scope._onTouchEndbind = onTouchEnd.bind(scope);\n        scope._onTouchMove = onTouchMove.bind(scope);\n        scope._onKeyDownbind = onKeyDown.bind(scope);\n\n        scope.domElement.addEventListener('contextmenu', this._onContextMenubind, false);\n\n        scope.domElement.addEventListener('mousedown', this._onMouseDownbind, false);\n        scope.domElement.addEventListener('wheel', this._onMouseWheelbind, false);\n\n        scope.domElement.addEventListener('touchstart', this._onTouchStartbind, false);\n        scope.domElement.addEventListener('touchend', this._onTouchEndbind, false);\n        scope.domElement.addEventListener('touchmove', this._onTouchMove, false);\n\n        window.addEventListener('keydown', this._onKeyDownbind, false);\n\n\n        this.update = (function () {\n\n            let offset = new Vector3();\n\n            // so camera.up is the orbit axis\n            let quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\n            let quatInverse = quat.clone().inverse();\n\n            let lastPosition = new Vector3();\n            let lastQuaternion = new Quaternion();\n\n            return function update() {\n\n                let position = scope.object.position;\n\n                offset.copy(position).sub(scope.target);\n\n                // rotate offset to \"y-axis-is-up\" space\n                offset.applyQuaternion(quat);\n\n                // angle from z-axis around y-axis\n                scope._spherical.setFromVector3(offset);\n\n                if (scope.autoRotate && this._state === STATE.NONE) {\n\n                    rotateLeft.call(scope, getAutoRotationAngle.call(scope));\n\n                }\n\n                scope._spherical.theta += scope._sphericalDelta.theta;\n                scope._spherical.phi += scope._sphericalDelta.phi;\n\n                // restrict theta to be between desired limits\n                scope._spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, scope._spherical.theta));\n\n                // restrict phi to be between desired limits\n                scope._spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, scope._spherical.phi));\n\n                scope._spherical.makeSafe();\n\n\n                scope._spherical.radius *= scope._scale;\n\n                // restrict radius to be between desired limits\n                scope._spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, scope._spherical.radius));\n\n                // move target to panned location\n                scope.target.add(scope._panOffset);\n\n                offset.setFromSpherical(scope._spherical);\n\n                // rotate offset back to \"camera-up-vector-is-up\" space\n                offset.applyQuaternion(quatInverse);\n\n                position.copy(scope.target).add(offset);\n\n                scope.object.lookAt(scope.target);\n\n                if (scope.enableDamping === true) {\n\n                    scope._sphericalDelta.theta *= (1 - scope.dampingFactor);\n                    scope._sphericalDelta.phi *= (1 - scope.dampingFactor);\n\n                    scope._panOffset.multiplyScalar(1 - scope.dampingFactor);\n\n                } else {\n\n                    scope._sphericalDelta.set(0, 0, 0);\n\n                    scope._panOffset.set(0, 0, 0);\n\n                }\n\n                scope._scale = 1;\n\n                // update condition is:\n                // min(camera displacement, camera rotation in radians)^2 > EPS\n                // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n                if (this._zoomChanged ||\n                    lastPosition.distanceToSquared(scope.object.position) > EPS ||\n                    8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\n                    scope.fire(changeEvent);\n\n                    lastPosition.copy(scope.object.position);\n                    lastQuaternion.copy(scope.object.quaternion);\n                    this._zoomChanged = false;\n\n                    return true;\n\n                }\n\n                return false;\n\n            };\n\n        })()\n\n        // force an update at start\n        this.update();\n\n    }\n\n\n    //\n    // public methods\n    //\n\n    getPolarAngle() {\n\n        return _spherical.phi;\n\n    }\n\n    getAzimuthalAngle() {\n\n        return _spherical.theta;\n\n    }\n\n    saveState() {\n        let scope = this;\n        scope.target0.copy(scope.target);\n        scope.position0.copy(scope.object.position);\n        scope.zoom0 = scope.object.zoom;\n\n    }\n\n    reset() {\n        let scope = this;\n        scope.target.copy(scope.target0);\n        scope.object.position.copy(scope.position0);\n        scope.object.zoom = scope.zoom0;\n\n        scope.object.updateProjectionMatrix();\n        scope.fire(changeEvent);\n\n        scope.update();\n\n        scope._state = STATE.NONE;\n\n    }\n\n    // this method is exposed, but perhaps it would be better if we can make it private...\n    // update() {\n    //     update.call(this);\n    // }\n\n    dispose() {\n        let scope = this;\n        scope.domElement.removeEventListener('contextmenu', scope._onContextMenubind, false);\n        scope.domElement.removeEventListener('mousedown', scope._onMouseDownbind, false);\n        scope.domElement.removeEventListener('wheel', scope._onMouseWheelbind, false);\n\n        scope.domElement.removeEventListener('touchstart', scope.onTouchStart, false);\n        scope.domElement.removeEventListener('touchend', scope._onTouchEndbind, false);\n        scope.domElement.removeEventListener('touchmove', scope._onTouchMove, false);\n\n        document.removeEventListener('mousemove', scope._onMouseMovebind, false);\n        document.removeEventListener('mouseup', scope._onMouseUpbind, false);\n\n        window.removeEventListener('keydown', scope._onKeyDownbind, false);\n\n        scope._onContextMenubind = null;\n        scope._onMouseDownbind = null;\n        scope._onMouseWheelbind = null;\n        scope.onTouchStart = null;\n        scope._onTouchEndbind = null;\n        scope._onTouchMove = null;\n        scope._onMouseMovebind = null;\n        scope._onMouseUpbind = null;\n        scope._onKeyDownbind = null;\n\n        //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n    }\n\n}\n\n\n\n\n\n\nfunction getAutoRotationAngle() {\n\n    return 2 * Math.PI / 60 / 60 * this.autoRotateSpeed;\n\n}\n\nfunction getZoomScale() {\n\n    return Math.pow(0.95, this.zoomSpeed);\n\n}\n\nfunction rotateLeft(angle) {\n\n    this._sphericalDelta.theta -= angle;\n\n}\n\nfunction rotateUp(angle) {\n\n    this._sphericalDelta.phi -= angle;\n\n}\n\nvar panLeft = function () {\n\n    var v = new Vector3();\n\n    return function panLeft(distance, objectMatrix) {\n\n        v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n        v.multiplyScalar(- distance);\n\n        this._panOffset.add(v);\n\n    };\n\n}();\n\nlet panUp = function () {\n    let v = new Vector3();\n\n    return function panUp(distance, objectMatrix) {\n\n        if (this.screenSpacePanning === true) {\n\n            v.setFromMatrixColumn(objectMatrix, 1);\n\n        } else {\n\n            v.setFromMatrixColumn(objectMatrix, 0);\n            v.crossVectors(this.object.up, v);\n\n        }\n\n        v.multiplyScalar(distance);\n\n        this._panOffset.add(v);\n\n    };\n\n}();\n\n// deltaX and deltaY are in pixels; right and down are positive\nvar pan = function () {\n\n    var offset = new Vector3();\n\n    return function pan(deltaX, deltaY) {\n        let scope = this;\n        var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n        if (scope.object.isPerspectiveCamera) {\n\n            // perspective\n            var position = scope.object.position;\n            offset.copy(position).sub(scope.target);\n            var targetDistance = offset.length();\n\n            // half of the fov is center to top of screen\n            targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0);\n\n            // we use only clientHeight here so aspect ratio does not distort speed\n            panLeft.call(scope, 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n            panUp.call(scope, 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\n        } else if (scope.object.isOrthographicCamera) {\n\n            // orthographic\n            panLeft.call(scope, deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n            panUp.call(scope, deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n\n        } else {\n\n            // camera neither orthographic nor perspective\n            console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n            scope.enablePan = false;\n\n        }\n\n    };\n\n}();\n\nfunction dollyIn(dollyScale) {\n    let scope = this;\n    if (scope.object.isPerspectiveCamera) {\n\n        scope._scale /= dollyScale;\n\n    } else if (scope.object.isOrthographicCamera) {\n\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n        scope.object.updateProjectionMatrix();\n        scope._zoomChanged = true;\n\n    } else {\n\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n        scope.enableZoom = false;\n\n    }\n\n}\n\nfunction dollyOut(dollyScale) {\n    let scope = this;\n    if (scope.object.isPerspectiveCamera) {\n\n        scope._scale *= dollyScale;\n\n    } else if (scope.object.isOrthographicCamera) {\n\n        scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n        scope.object.updateProjectionMatrix();\n        scope._zoomChanged = true;\n\n    } else {\n\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n        scope.enableZoom = false;\n\n    }\n\n}\n\n//\n// event callbacks - update the object state\n//\n\nfunction handleMouseDownRotate(event) {\n\n    //console.log( 'handleMouseDownRotate' );\n\n    this._rotateStart.set(event.clientX, event.clientY);\n\n}\n\nfunction handleMouseDownDolly(event) {\n\n    //console.log( 'handleMouseDownDolly' );\n\n    this._dollyStart.set(event.clientX, event.clientY);\n\n}\n\nfunction handleMouseDownPan(event) {\n\n    //console.log( 'handleMouseDownPan' );\n\n    this._panStart.set(event.clientX, event.clientY);\n\n}\n\nfunction handleMouseMoveRotate(event) {\n    let scope = this;\n    //console.log( 'handleMouseMoveRotate' );\n\n    scope._rotateEnd.set(event.clientX, event.clientY);\n\n    scope._rotateDelta.subVectors(scope._rotateEnd, scope._rotateStart).multiplyScalar(scope.rotateSpeed);\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    rotateLeft.call(scope, 2 * Math.PI * scope._rotateDelta.x / element.clientHeight); // yes, height\n\n    rotateUp.call(scope, 2 * Math.PI * scope._rotateDelta.y / element.clientHeight);\n\n    scope._rotateStart.copy(scope._rotateEnd);\n\n    scope.update();\n\n}\n\nfunction handleMouseMoveDolly(event) {\n    let scope = this;\n    //console.log( 'handleMouseMoveDolly' );\n\n    scope._dollyEnd.set(event.clientX, event.clientY);\n\n    scope._dollyDelta.subVectors(scope._dollyEnd, scope._dollyStart);\n\n    if (scope._dollyDelta.y > 0) {\n\n        dollyIn.call(scope, getZoomScale.call(scope));\n\n    } else if (scope._dollyDelta.y < 0) {\n\n        dollyOut.call(scope, getZoomScale.call(scope));\n\n    }\n\n    scope._dollyStart.copy(scope._dollyEnd);\n\n    scope.update();\n\n}\n\nfunction handleMouseMovePan(event) {\n    let scope = this;\n    //console.log( 'handleMouseMovePan' );\n\n    scope._panEnd.set(event.clientX, event.clientY);\n\n    scope._panDelta.subVectors(scope._panEnd, scope._panStart).multiplyScalar(scope.panSpeed);\n\n    pan.call(scope, scope._panDelta.x, scope._panDelta.y);\n\n    scope._panStart.copy(scope._panEnd);\n\n    scope.update();\n\n}\n\nfunction handleMouseUp(event) {\n\n    // console.log( 'handleMouseUp' );\n\n}\n\nfunction handleMouseWheel(event) {\n    let scope = this;\n    // console.log( 'handleMouseWheel' );\n\n    if (event.deltaY < 0) {\n\n        dollyOut.call(scope, getZoomScale.call(scope));\n\n    } else if (event.deltaY > 0) {\n\n        dollyIn.call(scope, getZoomScale.call(scope));\n\n    }\n\n    scope.update();\n\n}\n\nfunction handleKeyDown(event) {\n    let scope = this;\n    //console.log( 'handleKeyDown' );\n\n    switch (event.keyCode) {\n\n        case scope.keys.UP:\n            pan.call(scope, 0, scope.keyPanSpeed);\n            scope.update();\n            break;\n\n        case scope.keys.BOTTOM:\n            pan.call(scope, 0, - scope.keyPanSpeed);\n            scope.update();\n            break;\n\n        case scope.keys.LEFT:\n            pan.call(scope, scope.keyPanSpeed, 0);\n            scope.update();\n            break;\n\n        case scope.keys.RIGHT:\n            pan.call(scope, - scope.keyPanSpeed, 0);\n            scope.update();\n            break;\n\n    }\n\n}\n\nfunction handleTouchStartRotate(event) {\n\n    //console.log( 'handleTouchStartRotate' );\n\n    this._rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\n}\n\nfunction handleTouchStartDollyPan(event) {\n    let scope = this;\n    //console.log( 'handleTouchStartDollyPan' );\n\n    if (scope.enableZoom) {\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        scope._dollyStart.set(0, distance);\n\n    }\n\n    if (scope.enablePan) {\n\n        var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n        scope._panStart.set(x, y);\n\n    }\n\n}\n\nfunction handleTouchMoveRotate(event) {\n    let scope = this;\n    //console.log( 'handleTouchMoveRotate' );\n\n    scope._rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n    scope._rotateDelta.subVectors(scope._rotateEnd, scope._rotateStart).multiplyScalar(scope.rotateSpeed);\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    rotateLeft.call(scope, 2 * Math.PI * scope._rotateDelta.x / element.clientHeight); // yes, height\n\n    rotateUp.call(scope, 2 * Math.PI * scope._rotateDelta.y / element.clientHeight);\n\n    scope._rotateStart.copy(scope._rotateEnd);\n\n    scope.update();\n\n}\n\nfunction handleTouchMoveDollyPan(event) {\n    let scope = this;\n    //console.log( 'handleTouchMoveDollyPan' );\n\n    if (scope.enableZoom) {\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        scope._dollyEnd.set(0, distance);\n\n        scope._dollyDelta.set(0, Math.pow(scope._dollyEnd.y / scope._dollyStart.y, scope.zoomSpeed));\n\n        dollyIn.call(scope, scope._dollyDelta.y);\n\n        scope._dollyStart.copy(scope._dollyEnd);\n\n    }\n\n    if (scope.enablePan) {\n\n        var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n        scope._panEnd.set(x, y);\n\n        scope._panDelta.subVectors(scope._panEnd, scope._panStart).multiplyScalar(scope.panSpeed);\n\n        pan.call(scope, scope._panDelta.x, panDelta.y);\n\n        scope._panStart.copy(scope._panEnd);\n\n    }\n\n    scope.update();\n\n}\n\nfunction handleTouchEnd(event) {\n\n    //console.log( 'handleTouchEnd' );\n\n}\n\n//\n// event handlers - FSM: listen for events and reset state\n//\n\nfunction onMouseDown(event) {\n    let scope = this;\n\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (event.button) {\n\n        case scope.mouseButtons.ORBIT:\n\n            if (scope.enableRotate === false) return;\n\n            handleMouseDownRotate.call(scope, event);\n\n            scope._state = STATE.ROTATE;\n\n            break;\n\n        case scope.mouseButtons.ZOOM:\n\n            if (scope.enableZoom === false) return;\n\n            handleMouseDownDolly.call(scope, event);\n\n            scope._state = STATE.DOLLY;\n\n            break;\n\n        case scope.mouseButtons.PAN:\n\n            if (scope.enablePan === false) return;\n\n            handleMouseDownPan.call(scope, event);\n\n            scope._state = STATE.PAN;\n\n            break;\n\n    }\n\n    if (scope._state !== STATE.NONE) {\n\n        scope._onMouseMovebind = onMouseMove.bind(scope);\n        scope._onMouseUpbind = onMouseUp.bind(scope);\n        document.addEventListener('mousemove', scope._onMouseMovebind, false);\n        document.addEventListener('mouseup', scope._onMouseUpbind, false);\n\n        scope.fire(startEvent);\n\n    }\n\n}\n\nfunction onMouseMove(event) {\n\n    let scope = this;\n\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (scope._state) {\n\n        case STATE.ROTATE:\n\n            if (scope.enableRotate === false) return;\n\n            handleMouseMoveRotate.call(scope, event);\n\n            break;\n\n        case STATE.DOLLY:\n\n            if (scope.enableZoom === false) return;\n\n            handleMouseMoveDolly.call(scope, event);\n\n            break;\n\n        case STATE.PAN:\n\n            if (scope.enablePan === false) return;\n\n            handleMouseMovePan.call(scope, event);\n\n            break;\n\n    }\n\n}\n\nfunction onMouseUp(event) {\n\n    let scope = this;\n\n    if (scope.enabled === false) return;\n\n    handleMouseUp.call(scope, event);\n\n    document.removeEventListener('mousemove', onMouseMove.bind(scope), false);\n    document.removeEventListener('mouseup', onMouseUp.bind(scope), false);\n\n    scope.fire(endEvent);\n\n    scope._state = STATE.NONE;\n\n}\n\nfunction onMouseWheel(event) {\n\n    let scope = this;\n\n    if (scope.enabled === false || scope.enableZoom === false || (scope._state !== STATE.NONE && scope._state !== STATE.ROTATE)) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    scope.fire(startEvent);\n\n    handleMouseWheel.call(scope, event);\n\n    scope.fire(endEvent);\n\n}\n\nfunction onKeyDown(event) {\n    let scope = this;\n\n    if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\n    handleKeyDown.call(scope, event);\n\n}\n\nfunction onTouchStart(event) {\n\n    let scope = this;\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (event.touches.length) {\n\n        case 1:\t// one-fingered touch: rotate\n\n            if (scope.enableRotate === false) return;\n\n            handleTouchStartRotate.call(scope, event);\n\n            scope._state = STATE.TOUCH_ROTATE;\n\n            break;\n\n        case 2:\t// two-fingered touch: dolly-pan\n\n            if (scope.enableZoom === false && scope.enablePan === false) return;\n\n            handleTouchStartDollyPan.call(scope, event);\n\n            scope._state = STATE.TOUCH_DOLLY_PAN;\n\n            break;\n\n        default:\n\n            scope._state = STATE.NONE;\n\n    }\n\n    if (scope._state !== STATE.NONE) {\n\n        scope.fire(startEvent);\n\n    }\n\n}\n\nfunction onTouchMove(event) {\n\n    let scope = this;\n\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.touches.length) {\n\n        case 1: // one-fingered touch: rotate\n\n            if (scope.enableRotate === false) return;\n            if (scope._state !== STATE.TOUCH_ROTATE) return; // is this needed?\n\n            handleTouchMoveRotate.call(scope, event);\n\n            break;\n\n        case 2: // two-fingered touch: dolly-pan\n\n            if (scope.enableZoom === false && scope.enablePan === false) return;\n            if (scope._state !== STATE.TOUCH_DOLLY_PAN) return; // is this needed?\n\n            handleTouchMoveDollyPan.call(scope, event);\n\n            break;\n\n        default:\n\n            scope._state = STATE.NONE;\n\n    }\n\n}\n\nfunction onTouchEnd(event) {\n    let scope = this;\n    if (scope.enabled === false) return;\n\n    handleTouchEnd.call(scope, event);\n\n    scope.fire(endEvent);\n\n    scope._state = STATE.NONE;\n\n}\n\nfunction onContextMenu(event) {\n    let scope = this;\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n}\n\n\n\n\nexport { OrbitControls };","import { Events, Raycaster, Vector2 } from 'mmgl/src/index';\nimport { _ } from 'mmvis';\nclass Interaction extends Events {\n    constructor(domElement) {\n        super();\n        let scope = this;\n\n        this.currMousePos = new Vector2();\n        this.views = [];\n\n        this.domElement = (domElement !== undefined) ? domElement : document;\n\n        this._onMouseMovebind = scope.onMouseMove.bind(scope);\n        this._onMousedownbind = scope.onMousedown.bind(scope);\n        this._onMouseupbind = scope.onMouseup.bind(scope);\n\n        this.domElement.addEventListener('mousemove', this._onMouseMovebind, false);\n        this.domElement.addEventListener('mousedown', this._onMousedownbind, false);\n        this.domElement.addEventListener('mouseup', this._onMouseupbind, false);\n\n\n        this.lastPos = null;\n        //避免多次触发\n        this.isChange = false;\n        this.isMouseOver = false;\n        this.isMouseOut = false;\n        this.isClick = false;\n        this.EVENT = null;\n\n    }\n    addView(view) {\n        view.target = null;\n        this.views.push(view);\n    }\n    update() {\n\n        this.views.forEach(view => {\n            if (this.isChange) {\n                view.isChange = true;\n            }\n        });\n        if (this.isChange) this.isChange = false;\n\n        this.views.forEach((view, i) => {\n\n            let scene = view.getScene();\n\n            if (!view.isChange) return;\n            view.isChange = false;\n\n            let raycaster = view.getRaycaster(this.currMousePos);\n            // calculate objects intersecting the picking ray\n            let intersects = raycaster.intersectObjects(scene.children, true);\n\n            //console.log('intersects', intersects.length, '----' + i + '-----');\n\n            //没有绑定事件的不往下计算\n            if (intersects.length > 0) {\n\n                for (let i = 0, l = intersects.length; i < l; i++) {\n                    if (_.isEmpty(intersects[i].object._listeners)) {\n                        intersects.splice(i, 1);\n                        l--;\n                        i--;\n                    }\n                }\n                \n            }\n\n\n            if (intersects.length > 0) {\n                if (intersects[0].object == view.target) {\n                    if (view.target) {\n                        view.target.fire({ type: 'mousemove', event: this.EVENT, intersects });\n                    }\n\n                    if (!this.isMouseOver) {\n                        view.target.fire({ type: 'mouseover', event: this.EVENT, intersects });\n                        this.isMouseOver = true;\n                        this.isMouseOut = false;\n                    }\n                    if (this.isClick) {\n                        view.target.fire({ type: 'click', event: this.EVENT, intersects });\n                        this.isClick = false;\n                    }\n\n                } else {\n                    if (view.target !== null && !this.isMouseOut) {\n                        view.target.fire({ type: 'mouseout', event: this.EVENT, intersects });\n                        this.isMouseOut = true;\n                        this.isMouseOver = false;\n                        // console.log({ type: 'mouseout' })\n                    }\n                    view.target = intersects[0].object;\n                }\n\n            } else {\n                if (view.target !== null && !this.isMouseOut) {\n                    view.target.fire({ type: 'mouseout', event: this.EVENT, intersects });\n                    view.target = null;\n                    this.isMouseOut = true;\n                    this.isMouseOver = false;\n                    //console.log({ type: 'mouseout' })\n                }\n            }\n\n\n\n        })\n\n    }\n\n    dispose() {\n        let scope = this;\n        // scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n        scope.domElement.removeEventListener('mousedown', scope._onMousedownbind, false);\n        scope.domElement.removeEventListener('mouseup', scope._onMouseupbind, false);\n        // scope.domElement.removeEventListener('wheel', onMouseWheel, false);\n\n        // scope.domElement.removeEventListener('touchstart', onTouchStart, false);\n        // scope.domElement.removeEventListener('touchend', onTouchEnd, false);\n        // scope.domElement.removeEventListener('touchmove', onTouchMove, false);\n\n        scope.domElement.removeEventListener('mousemove', scope._onMouseMovebind, false);\n        // document.removeEventListener('mouseup', onMouseUp, false);\n        // window.removeEventListener('keydown', onKeyDown, false);\n\n        scope._onMousedownbind = null;\n        scope._onMouseupbind = null;\n        scope._onMouseMovebind = null;\n\n        this.currMousePos = null;\n        this.views = [];\n\n        this.domElement = null;\n\n\n        this.lastPos = null;\n\n        this.isChange = false;\n        this.isMouseOver = false;\n        this.isMouseOut = false;\n        this.isClick = false;\n        this.EVENT = null;\n    }\n    onMousedown(e) {\n        //this.isClick = true;\n        this.EVENT = event;\n        let { x, y } = e;\n        this.lastPos = { x, y };\n        //console.log('down', x, y);\n    }\n    onMouseup(e) {\n\n        this.isChange = true;\n        let { x, y } = e;\n        //console.log('up', x, y);\n        if (x == this.lastPos.x && y == this.lastPos.y) {\n            this.isClick = true;\n            this.fire({ type: 'click', event: event });\n            // console.log('click');\n            this.lastPos = { x: -1, y: -1 };\n        }\n        setTimeout(() => {\n            this.fire({ type: 'refresh' });\n        }, 16);\n\n        this.EVENT = event;\n        //console.log('refresh');\n\n    }\n\n    onMouseMove(event) {\n        event.preventDefault();\n        this.currMousePos.x = (event.offsetX / this.domElement.clientWidth) * 2 - 1;\n        this.currMousePos.y = -(event.offsetY / this.domElement.clientHeight) * 2 + 1;\n        this.fire({ type: 'move', event: event });\n        this.fire({ type: 'refresh' });\n        this.EVENT = event;\n        this.isChange = true;\n    }\n\n}\n\n\n\n\nexport { Interaction };","import { _, dataFrame, global, $ } from 'mmvis';\nimport { Application } from './framework/application';\nimport { InertialSystem } from './framework/coord/inertial';\nimport { Cartesian3D } from './framework/coord/cartesian3d';\nimport { Component } from './components/Component';\n\n\nimport { Events } from 'mmgl/src/index';\nimport { OrbitControls } from './framework/OrbitControls';\nimport { Interaction } from './framework/interaction';\nimport { MainView, LabelView } from './constants';\n\nlet __tipShowEvent = null, __tipHideEvent = null, __tipMoveEvent = null, __redraw = null;\n\nlet _cid = 0;\nclass Chart3d extends Events {\n    constructor(node, data, opt, componentModules) {\n        super();\n\n        this.domSelector = node;\n        this.opt = opt;\n        this.data = data;\n\n        this.componentModules = componentModules;\n\n\n        this.el = null;\n        this.view = null;\n        this.domView = null;\n        this.stageView = null;\n        this.canvasDom = null;   //画布DOM元素\n\n\n        this.width = 0;     //画布的宽\n        this.height = 0;    //画布的高 \n\n        this.renderer = null;\n        this.renderView = null;\n        this.app = null;\n        this.currCoord = null;\n\n\n        //初始化画布\n        this._createDomContainer(node);\n\n        // //初始化数据\n        // //不管传入的是data = [ ['xfield','yfield'] , ['2016', 111]]\n        // //还是 data = [ {xfiled, 2016, yfield: 1111} ]，这样的格式，\n        // //通过parse2MatrixData最终转换的是data = [ ['xfield','yfield'] , ['2016', 111]] 这样 chartx的数据格式\n        // //后面有些地方比如 一些graphs中会使用dataFrame.org，， 那么这个dataFrame.org和_data的区别是，\n        // //_data是全量数据， dataFrame.org是_data经过dataZoom运算过后的子集\n        // this._data = parse2MatrixData(data);\n\n        //三维引擎初始化\n        this.app = new Application(this.width, this.height);\n\n\n        //初始化渲染器\n        this.renderer = this.app._framework.renderer;\n\n\n        //组件管理机制,所有的组件都绘制在这个地方\n        this.components = [];\n\n        this.inited = false;\n        this.dataFrame = this._initData(this.data, {}); //每个图表的数据集合 都 存放在dataFrame中。\n\n        this.initComponent();\n\n    }\n    init(DefaultControls) {\n        let me = this;\n        let rendererOpts = _.extend({}, DefaultControls);\n        this.opt.coord.controls = this.opt.coord.controls || {};\n        let controlOpts = this.opt.coord.controls = _.extend(rendererOpts, this.opt.coord.controls);\n\n        this._initRenderer(rendererOpts);\n        console.log('chart3dInit', Math.random());\n        let controls = this.orbitControls = new OrbitControls(this.renderView._camera, this.view);\n        \n         \n\n        let interaction = this.interaction = new Interaction(this.view);\n    \n        interaction.addView(this.labelView);\n        interaction.addView(this.renderView);\n\n\n        // controls.minDistance = controlOpts.minDistance;\n        // controls.maxDistance = controlOpts.maxDistance;\n\n        // controls.minZoom = controlOpts.minZoom;\n        // controls.maxZoom = controlOpts.maxZoom;\n        // controls.enableDamping = true;\n        // controls.enablePan = false;\n        // controls.enableKeys = false;\n        // controls.autoRotate = controlOpts.autoRotate;\n        // controls.autoRotateSpeed = 1.0;\n\n        _.extend(true, controls, controlOpts);\n\n        //自动旋转时间\n        if (controls.autoRotate) {\n            debugger\n            window.setTimeout(() => {\n                controls.autoRotate = false;\n            }, 15000);\n        }\n\n\n        //如果发生交互停止自动旋转\n        controls.on('start', onStart);\n        //有交互开始渲染\n        this._onChangeBind = onChange.bind(me);\n        controls.on('change', this._onChangeBind);\n\n        this._onRenderBeforeBind = onRenderBefore.bind(controls);\n        this.app._framework.on('renderbefore', this._onRenderBeforeBind);\n\n        this._onRenderAfterBind = onRenderAfter.bind(interaction);\n        this.app._framework.on('renderafter', this._onRenderAfterBind)\n\n        interaction.on('refresh', this._onChangeBind);\n\n\n        // //同步主相机的位置和方向\n        // controls.on('change', (e) => {\n        //    this.labelView._camera.position.copy(e.target.object.position);\n        //    this.labelView._camera.lookAt(e.target.target);\n        // })\n\n        //启动渲染进程\n        this.app.launch();\n        this._onWindowResizeBind = me.resize.bind(me);\n        window.addEventListener('resize', this._onWindowResizeBind, false);\n\n        //绑定tip事件\n        this.bindEvent()\n    }\n    setCoord(_Coord) {\n\n        //初始化物体的惯性坐标(放在具体的坐标系下)\n        if (_Coord === InertialSystem || _Coord.prototype instanceof InertialSystem) {\n            this.currCoord = new _Coord(this);\n\n            // this.currCoord = _Coord;\n            this.rootStage.add(this.currCoord.group);\n        }\n\n\n    }\n\n    initComponent() {\n        let opts = this.opt;\n        this.components = [];\n\n        //先初始化皮肤组件\n        if ('theme' in opts) {\n            let theme = this.componentModules.get('theme');\n            if (theme) {\n                this.addComponent(theme, opts.theme);\n            }\n        }\n\n        //先初始化坐标系\n        let coord = this.componentModules.get('coord', opts.coord.type)\n        if (!coord) {\n            coord = InertialSystem;\n        }\n        this.setCoord(coord);\n        //加载graph组件\n        for (let t = 0; t < opts.graphs.length; t++) {\n            let key = opts.graphs[t].type;\n            let comp = this.componentModules.get('graphs', key);\n            if (comp) {\n                this.addComponent(comp, opts.graphs[t]);\n            }\n\n        }\n        //加载其他组件\n        for (let p in opts) {\n            if (p === 'coord') continue;\n            if (p === 'graphs') continue;\n            if (_.isArray(opts[p])) {\n                for (let t = 0; t < opts[p].length; t++) {\n                    let key = opts[p][t].type;\n                    let comp = this.componentModules.get(p, key);\n                    this.addComponent(comp, opts[p][t]);\n                }\n            } else {\n                let comp = this.componentModules.get(p);\n                if (comp) {\n                    this.addComponent(comp, opts[p]);\n                }\n            }\n        }\n\n    }\n    //添加组件\n    addComponent(cmp, opts) {\n        //todo 图像是否要分开,目前没有分开共用Component一个基类\n        if (cmp.prototype instanceof Component) {\n\n            let instance = new cmp(this, opts);\n            this.components.push(instance);\n        }\n\n    }\n\n    drawComponent() {\n        //先绘制坐标系\n        this.currCoord.drawUI();\n        this.components.forEach(cmp => {\n            this.currCoord.group.add(cmp.group);\n            cmp.draw();\n        })\n    }\n\n    draw() {\n        this.currCoord.initCoordUI();\n        this.drawComponent();\n        this.app.forceRender();\n\n    }\n\n\n    getComponent(query) {\n        let cmp = this.getComponents(query)[0];\n        return !cmp ? null : cmp\n    }\n    getComponents(query) {\n        let arr = [];\n        let result = true;\n        this.components.forEach(cmp => {\n            result = true;\n            for (let key in query) {\n                if (_.isString(cmp[key]) && _.isString(query[key])) {\n                    result = result && cmp[key].toLowerCase() == query[key].toLowerCase();\n                } else {\n                    result = result && cmp[key] == query[key];\n                }\n            }\n            if (result) {\n                arr.push(cmp);\n            }\n        });\n\n        return arr;\n\n    }\n\n    bindEvent() {\n        __redraw = (e) => {\n            if (this.currCoord) {\n                this.currCoord.fire({ type: 'legendchange', data: e.data });\n            }\n            this.draw();\n        }\n        this.on('legendchange', __redraw);\n\n        const TipName = 'Tips';\n\n        __tipShowEvent = (e) => {\n\n            let tips = this.getComponent({ name: TipName });\n            let { offsetX: x, offsetY: y } = e.event;\n            if (tips !== null) {\n                let _title = e.data.xField ? e.data.rowData[e.data.xField] : \"\";\n                tips.show({\n                    eventInfo: _.extend({\n                        title: _title,\n                    }, e.data),\n                    pos: {\n                        x,\n                        y\n                    }\n                })\n            }\n        };\n\n        __tipHideEvent = (e) => {\n\n            let tips = this.getComponent({ name: TipName });\n            if (tips !== null) {\n                tips.hide();\n            }\n        };\n        __tipMoveEvent = (e) => {\n\n            let tips = this.getComponent({ name: TipName });\n            let { offsetX: x, offsetY: y } = e.event;\n            let _title = e.data.xField ? e.data.rowData[e.data.xField] : \"\";\n            if (tips !== null) {\n                tips.show({\n                    eventInfo: _.extend({\n                        title: _title,\n                    }, e.data),\n                    pos: {\n                        x,\n                        y\n                    }\n                })\n            }\n        }\n        this.on('tipShow', __tipShowEvent);\n        this.on('tipHide', __tipHideEvent)\n        this.on('tipMove', __tipMoveEvent)\n\n    }\n\n    _createDomContainer(_domSelector) {\n\n        let viewObj = null;\n\n        this._cid = \"chartx3d_\" + _cid++;\n\n        this.el = $.query(_domSelector);\n\n        this.width = this.el.offsetWidth;\n        this.height = this.el.offsetHeight;\n\n        viewObj = $.createView(this.width, this.height, this._cid);\n\n        this.view = viewObj.view;\n        this.stageView = viewObj.stageView;\n        this.domView = viewObj.domView;\n\n        this.el.innerHTML = \"\";\n        this.el.appendChild(this.view);\n\n\n        this.id = \"chartx_\" + this._cid;\n        this.el.setAttribute(\"chart_id\", this.id);\n        this.el.setAttribute(\"chartx3d_version\", \"1.0\");\n    }\n\n    _initData(data, opt) {\n\n        return dataFrame.call(this, data, opt);\n    }\n\n    _initRenderer(rendererOpts) {\n        let app = this.app;\n\n        //正常绘制的view\n        let renderView = this.renderView = app.createView(MainView);\n        //label 绘制的View\n        let labelView = this.labelView = app.createView(LabelView);\n\n        // let renderView = this.renderView = app.getView(MainView);\n        // let labelView = this.labelView = app.getView(LabelView);\n\n\n        this.rootStage = app.addGroup({ name: 'rootStage' });\n        renderView.addObject(this.rootStage);\n        renderView.setSize(this.width, this.height);\n        renderView.setBackground(0xFFFFFF);\n\n        //默认透视投影\n        renderView.setControls(rendererOpts);\n        renderView.project('perspective'); //'ortho' | 'perspective',\n\n        //初始化labelView\n        this.labelGroup = app.addGroup({ name: 'labelsGroup', flipY: true });\n\n        labelView.addObject(this.labelGroup);\n        labelView.setSize(this.width, this.height);\n        //labelView.setBackground(\"rgba(0,0,0,0)\");\n        labelView.setControls(rendererOpts);\n        //labelView.project('ortho'); //'ortho' | 'perspective',\n        labelView.createScreenProject();\n\n\n        if (this.canvasDom) {\n            this.stageView.removeChild(this.canvasDom)\n            this.canvasDom = null;\n        }\n\n        this.stageView.appendChild(this.renderer.domElement);\n\n\n        this.canvasDom = this.renderer.domElement;\n\n    }\n    resize() {\n        this.width = this.el.offsetWidth;\n        this.height = this.el.offsetHeight;\n        this.app.resize(this.width, this.height, this.opt.coord.controls.boxHeight);\n    }\n\n    //ind 如果有就获取对应索引的具体颜色值\n    getTheme(ind) {\n        var colors = global.getGlobalTheme();\n        var _theme = this.getComponent({ name: 'theme' });\n        if (_theme) {\n            colors = _theme.get();\n        };\n        if (ind != undefined) {\n            return colors[ind % colors.length] || \"#ccc\";\n        };\n        return colors;\n    }\n\n    //数据变更后调用reset\n    reset(opt, data) {\n\n        !opt && (opt = {});\n\n        //配置初始化\n        _.extend(true, this.opt, opt);\n        //数据初始化\n        if (data) {\n            this.data = data;\n            //this._data = parse2MatrixData(data);\n            this.dataFrame = this._initData(this.data, {});\n        };\n\n\n        this.dispose();\n\n        //三维引擎初始化\n        this.app = new Application(this.width, this.height);\n        //初始化渲染器\n        this.renderer = this.app._framework.renderer;\n\n        this.init();\n\n        //坐标系重新初始化\n        let coord = null;\n        if (this.opt.coord.type == 'box') {\n            coord = new Cartesian3D(this);\n        }\n        this.setCoord(coord);\n\n        //组件重新初始化\n        this.components = [];\n\n        this.initComponent();\n\n        this.draw();\n\n    }\n    /*\n     * 只响应数据的变化，不涉及配置变化\n     * \n     * @dataTrigger 一般是触发这个data reset的一些场景数据，\n     * 比如如果是 datazoom 触发的， 就会有 trigger数据{ name:'datazoom', left:1,right:1 }\n     */\n    resetData(data, dataTrigger) {\n\n        //销毁默认绑定的事件\n        // this.off('tipShow', __tipShowEvent);\n        // this.off('tipHide', __tipHideEvent)\n        // this.off('tipMove', __tipMoveEvent)\n        //this.off('legendchange', __redraw);\n\n        if (data) {\n            this.data = data;\n            //this._data = parse2MatrixData(data);\n            this.dataFrame = this._initData(this.data, this.opt);\n        };\n        this.currCoord.resetData();\n        this.components.forEach(cmp => {\n            cmp.resetData();\n        })\n        this.fire({ type: 'resetData' });\n\n        this.app.forceRender();\n    }\n    destroy() {\n        //外部调用适配\n        this.dispose();\n        this.fire({ type: 'destroy' });\n    }\n\n    dispose() {\n\n        //销毁默认绑定的事件\n        this.off('tipShow', __tipShowEvent);\n        this.off('tipHide', __tipHideEvent)\n        this.off('tipMove', __tipMoveEvent)\n\n        //先销毁坐标系统\n        this.currCoord.dispose();\n        //销毁组件\n        this.components.forEach(cmp => {\n            cmp.dispose();\n        });\n        this.components = [];\n        //初始化渲染状态\n        this.app.resetState();\n\n        //清理渲染数据\n        this.renderer.dispose();\n\n\n        //清理事件\n        this.orbitControls.off('start', onStart);\n        this.orbitControls.off('change', this._onChangeBind);\n\n        this.app._framework.off('renderbefore', this._onRenderBeforeBind);\n        this._onRenderBeforeBind = null;\n\n        this.app._framework.off('renderafter', this._onRenderAfterBind)\n        this._onRenderAfterBind = null;\n\n        this.interaction.off('refresh', this._onChangeBind);\n      \n        this._onChangeBind = null;\n\n\n\n        window.removeEventListener('resize', this._onWindowResizeBind, false);\n        this._onWindowResizeBind = null;\n\n        this.interaction.dispose();\n      \n        this.orbitControls.dispose();\n\n        this.app.dispose();\n\n        this.app = null;\n        this.renderer = null;\n        this.currCoord = null;\n\n\n\n        //todo 内存对象清除优化\n\n\n    }\n}\n\n\nfunction onStart() {\n    this.autoRotate = false\n};\n\nfunction onChange(e) {\n    this.app.forceRender();\n}\n\nfunction onRenderBefore() {\n    if (this.position0.equals(this.object.position) && this.zoom0 === this.object.zoom) {\n        return;\n    }\n    this.saveState();\n    this.update();\n}\n\nfunction onRenderAfter() {\n    this.update();\n}\nexport default Chart3d;\n\n","/**\n * 为了输入便捷,3D的笛卡尔坐标系,在配置中为Box\n */\nimport { Cartesian3D } from \"../../framework/coord/cartesian3d\";\n\nclass Box extends Cartesian3D {\n    constructor(root) {\n        super(root)\n\n        this.DefaultControls = {\n            autoRotate: false,       //默认不自动旋转\n            boxWidth: 1200,         //空间中X的最大值(最大宽度)  \n            boxHeight: 1200,        //空间中Y的最大值(最大高度)  \n            boxDepth: 500,         //空间中Z的最大值(最大深度)\n\n            distance: 1500,        //默认相机距离\n            maxDistance: 3000,     //最大相机距离\n            minDistance: 600,      //最小相机距离 \n            minZoom: 0.2,           //正交投影缩小的最小值\n            maxZoom: 1.5,           //正交投影放大的最大值\n\n\n            enableDamping: true,\n            enablePan: false,\n            enableKeys: false,\n            autoRotateSpeed: 1.0,\n\n\n            alpha: 10,    //绕X轴旋转\n            beta: 40,      //绕Y轴旋转\n            gamma: 0      //绕Z轴旋转\n        }\n        root.init(this.DefaultControls);\n        super.init()\n\n    }\n\n}\n\nexport default Box;\n","import { polar as Polar } from 'mmvis'\n\nclass PolarAttribute extends Polar {\n    constructor(opt, dataFrame) {\n        super(opt, dataFrame)\n        this.field = opt.field || null;\n        this.height = 0;\n    }\n\n    calculateProps() {\n\n        let maxHeigh = 0, minHeight = 0;\n        let opt = this._opt;\n        if (this._isFiled(this._opt.node.height, this.getLayoutData()[0])) {\n            this.getLayoutData().forEach(item => {\n                let val = item.rowData[this._opt.node.height];\n                maxHeigh = Math.max(maxHeigh, val);\n                minHeight = Math.min(minHeight, val);\n                item.heightField = this._opt.node.height;\n                item.heightValue = val;\n            })\n\n        }\n        this.getLayoutData().forEach((item, i) => {\n            if (!!item.heightField) {\n                item.height = parseInt(opt.maxHeight * ((item.heightValue - minHeight) / (maxHeigh - minHeight)) + minHeight);\n            } else {\n                item.height = opt.node.height;\n            }\n\n            item.color = this.getTheme(i);\n        })\n        if (opt.heightSort) {\n            this.getLayoutData().sort((a, b) => {\n                if (opt.heightSort == 'asc') {\n                    return a.height - b.height;\n                } else {\n                    return b.height - a.height;\n                }\n            })\n            //重新设定下ind\n            this.getLayoutData().forEach((d, i) => {\n                d.iNode = i;\n            });\n        }\n        super.calculateProps();\n    }\n    registTheme(fn) {\n        this.getTheme = fn || function () { };\n    }\n\n\n}\n\nexport { PolarAttribute };","import { InertialSystem } from \"./inertial\";\nimport { Vector3, Math as _Math } from \"mmgl/src/index\";\nimport { PolarAttribute } from \"./model/polarAttribute\";\nimport { _ } from \"mmvis\";\n\n\n/**\n * 柱坐标 Cylindrical Coordinates\n * x=rcosφ\n * z=rsinφ\n * y=y\n */\n\n\nclass Cylindrical extends InertialSystem {\n    constructor(root) {\n        super(root);\n\n        //这里暂时没有使用到坐标系的相关操作,预留\n        //this.height = 0;\n        this.r = 0;\n\n        this._coordUI = null;\n\n        this.group.name = 'cylindricalcoordinates';\n    }\n\n    setDefaultOpts(opt) {\n        var coord = {\n            rAxis: {\n                field: []\n            }\n        };\n\n        //根据graphs.field 来 配置 coord.rAxis.field -------------------\n        if (!_.isArray(coord.rAxis.field)) {\n            coord.rAxis.field = [coord.rAxis.field];\n        };\n        if (opt.graphs) {\n            //有graphs的就要用找到这个graphs.field来设置coord.rAxis\n            var arrs = [];\n            _.each(opt.graphs, function (graphs) {\n                if (graphs.field) {\n                    //没有配置field的话就不绘制这个 graphs了\n                    var _fs = graphs.field;\n                    if (!_.isArray(_fs)) {\n                        _fs = [_fs];\n                    };\n                    arrs = arrs.concat(_fs);\n                };\n            });\n        };\n        coord.rAxis.field = coord.rAxis.field.concat(arrs);\n\n        opt.coord = _.extend(true, coord, opt.coord);\n\n        return opt\n    }\n\n    init() {\n        this.getBoundbox();\n        //由于部分配置来自与图形本身,这里暂不传人配置\n        this.dataAttribute = new PolarAttribute({}, this._root.dataFrame);\n        this.dataAttribute.registTheme(this._root.getTheme.bind(this._root));\n\n        this.addLights();\n        this.updatePosition();\n    }\n    getLegendData() {\n        var legendData = [\n            //{name: \"uv\", style: \"#ff8533\", enabled: true, ind: 0}\n        ];\n\n        this.dataAttribute.layoutData.forEach((item, i) => {\n            item.ind = i;\n            legendData.push(item);\n        })\n        // _.each( this.graphs, function( _g ){\n        //     _.each( _g.getLegendData(), function( item ){\n\n        //         if( _.find( legendData , function( d ){\n        //             return d.name == item.name\n        //         } ) ) return;\n\n        //         var data = _.extend(true, {}, item);\n        //         data.color = item.fillStyle || item.color || item.style;\n\n        //         legendData.push( data )\n        //     } );\n        // } );\n        return legendData;\n    }\n    getBoundbox() {\n\n        this.boundbox = super.getBoundbox();\n        return this.boundbox;\n    }\n\n    // addLights() {\n    //     //加入灯光\n\n    //     var ambientlight = new AmbientLight(0xffffff, 0.8); // soft white light\n\n    //     this._root.rootStage.add(ambientlight);\n\n    //     let center = this.center.clone();\n    //     center = this._getWorldPos(center);\n    //     //center.setY(0);\n\n    //     //     let dirLights = [];\n    //     let intensity = 0.5;\n    //     let lightColor = 0xcccccc;\n    //     //     let position = new Vector3(-1, -1, 1);\n\n    //     //     dirLights[0] = new DirectionalLight(lightColor, intensity);\n    //     //     position.multiplyScalar(10000);\n    //     //     dirLights[0].position.copy(position);\n    //     //     dirLights[0].target.position.copy(center);\n    //     //    // this._root.rootStage.add(dirLights[0]);\n\n\n    //     //     dirLights[1] = new DirectionalLight(lightColor, intensity);\n    //     //     position = new Vector3(1, -1, 1);\n    //     //     position.multiplyScalar(10000);\n    //     //     dirLights[1].position.copy(position);\n    //     //     dirLights[1].target.position.copy(center);\n    //     //     this._root.rootStage.add(dirLights[1]);\n\n\n    //     //     dirLights[2] = new DirectionalLight(lightColor, intensity);\n    //     //     position = new Vector3(-1, -1, -1);\n    //     //     position.multiplyScalar(10000);\n    //     //     dirLights[2].position.copy(position);\n    //     //     dirLights[2].target.position.copy(center);\n    //     //     this._root.rootStage.add(dirLights[2]);\n\n\n    //     //     dirLights[3] = new DirectionalLight(lightColor, intensity);\n    //     //     position = new Vector3(1, -1, -1);\n    //     //     position.multiplyScalar(10000);\n    //     //     dirLights[3].position.copy(position);\n    //     //     dirLights[3].target.position.copy(center);\n    //     //     this._root.rootStage.add(dirLights[3]);\n\n\n\n\n    //     let pointLight = [];\n\n    //     pointLight[0] = new PointLight(lightColor, intensity);\n    //     let position = new Vector3(-1, 1, 1);\n    //     position.multiplyScalar(10000);\n    //     pointLight[0].position.copy(position);\n    //     this._root.rootStage.add(pointLight[0]);\n\n\n    //     pointLight[1] = new PointLight(lightColor, intensity);\n    //     position = new Vector3(1, 1, 1);\n    //     position.multiplyScalar(10000);\n    //     pointLight[1].position.copy(position);\n    //     this._root.rootStage.add(pointLight[1]);\n\n\n    //     pointLight[2] = new PointLight(lightColor, intensity);\n    //     position = new Vector3(-1, 1, -1);\n    //     position.multiplyScalar(10000);\n    //     pointLight[2].position.copy(position);\n    //     this._root.rootStage.add(pointLight[2]);\n\n\n    //     pointLight[3] = new PointLight(lightColor, intensity);\n    //     position = new Vector3(1, 1, -1);\n    //     position.multiplyScalar(1000);\n    //     pointLight[3].position.copy(position);\n    //     this._root.rootStage.add(pointLight[3]);\n\n    // }\n    // updatePosition() {\n\n    //     //更新相机姿态\n    //     let center = this.center.clone();\n    //     center = this._getWorldPos(center);\n    //     let _renderView = this._root.renderView;\n    //     let _camera = _renderView._camera;\n\n    //     //相机默认的旋转角度\n    //     let dist = _camera.position.distanceTo(center);\n    //     let phi = _Math.degToRad(_renderView.controls.alpha);   //(90-lat)*(Math.PI/180),\n    //     let theta = _Math.degToRad(_renderView.controls.beta);   // (lng+180)*(Math.PI/180),\n\n    //     let y = dist * Math.sin(phi);\n    //     let temp = dist * Math.cos(phi);\n    //     let x = temp * Math.sin(theta);\n    //     let z = temp * Math.cos(theta);\n    //     //平移实现以中心点为圆心的旋转结果\n    //     let newPos = new Vector3(x, y, z);\n    //     newPos.add(center);\n    //     _camera.position.copy(newPos);\n    //     //相机朝向中心点 \n    //     _camera.lookAt(center);\n\n\n    //     //orbite target position\n    //     this._root.orbitControls.target.copy(center);\n\n\n    // }\n\n    getQuadrantByDir(dir) {\n        let _renderView = this._root.renderView;\n        let _camera = _renderView._camera;\n        let dirVectir = new Vector3();\n        _camera.getWorldDirection(dirVectir);\n        let cross = new Vector3();\n        cross.crossVectors(dirVectir, dir);\n        return cross;\n        console.log(\"camrea dir:\", dirVectir, dir, cross);\n    }\n\n    resetData() {\n        this.dataAttribute.resetData();\n\n        this.dataAttribute.registTheme(this._root.getTheme.bind(this._root));\n        this.dataAttribute.setDataFrame(this._root.dataFrame);\n        //UI组件resetData\n\n    }\n\n}\n\nexport { Cylindrical };","/**\n * 对外发布的极坐标\n */\nimport { Cylindrical  } from \"../../framework/coord/cylindrical\";\n\nclass Polar3D extends Cylindrical {\n    constructor(root) {\n        super(root)\n\n        \n        this.DefaultControls = {\n            autoRotate: false,       //默认不自动旋转\n            boxWidth: 1200,         //空间中X的最大值(最大宽度)  \n            boxHeight: 1200,        //空间中Y的最大值(最大高度)  \n            boxDepth: 500,         //空间中Z的最大值(最大深度)\n\n            distance: 1000,        //默认相机距离\n            maxDistance: 1200,     //最大相机距离\n            minDistance: 100,      //最小相机距离 \n            minZoom: 0.2,           //正交投影缩小的最小值\n            maxZoom: 1.5,           //正交投影放大的最大值\n\n            alpha: 30,    //绕X轴旋转\n            beta: 0,      //绕Y轴旋转\n            gamma: 0      //绕Z轴旋转\n        }\n        root.init(this.DefaultControls);\n        super.init()\n\n    }\n}\n\nexport default Polar3D;","import { Component, _ } from \"../Component\";\nimport { TickLines } from '../cartesian3dUI/tickLines';\nimport { TickTexts } from '../cartesian3dUI/tickTexts';\nimport { Vector3 } from \"mmgl/src/index\";\n\nclass Axis extends Component {\n    constructor(_cubeUI, opt) {\n        super(_cubeUI._coordSystem);\n\n        this.name = 'Axis';\n\n        this._cubeUI = _cubeUI;\n\n        this.enabled = true;\n\n        this.tickLine = {\n            enabled: 1,\n            lineWidth: 1, //线宽像素\n            lineLength: 5, //线长(空间单位)\n            strokeStyle: '#333',\n            offset: 0, //空间单位\n        };\n\n        this.label = {\n            enabled: 1,\n            fontColor: '#333',\n            fontSize: 12,\n            rotation: 0,\n            format: null,\n            offset: 0,\n            maxLength: 0,\n            textAlign: \"center\",       //水平方向对齐: left  right center \n            verticalAlign: 'bottom',  //垂直方向对齐 top bottom middle\n            lineHeight: 1\n        };\n        //@params params包括 dataSection , 索引index，txt(canvax element) ，line(canvax element) 等属性\n        this.filter = null; //function(params){}; \n\n        //原点\n        this._origin = null;\n\n        //轴的方向\n        this._axisDir = null;\n\n        //tickLine 的方向\n        this._tickLineDir = null;\n\n        _.extend(true, this, opt);\n\n        this.axisAttribute = this._coordSystem.getAxisAttribute(opt.field);\n\n        //默认不显示\n        this.group.visible = false;\n\n        this.init();\n\n    }\n    setVisibel(val) {\n        this.group.visible = !!val;\n    }\n    setOrigin(pos) {\n        this._origin = pos;\n    }\n    setAxisDir(dir) {\n        this._axisDir = dir;\n    }\n\n    setTickLineDir(dir) {\n        this._tickLineDir = dir;\n    }\n\n\n    init() {\n\n        this._initData();\n    }\n    _initData() {\n\n        this.field = this.axisAttribute.field\n        this.dataSection = this.axisAttribute.dataSection;\n\n        this._formatTextSection = [];\n        this._textElements = [];\n        this.dataSection.forEach((val, i) => {\n            this._formatTextSection[i] = this._getFormatText(val, i);\n        });\n\n    }\n    _getFormatText(val, i) {\n        var res;\n        if (_.isFunction(this.label.format)) {\n            res = this.label.format.apply(this, arguments);\n\n        } else {\n            if (this.label.maxLength > 0) {\n                if (val.length > this.label.maxLength) {\n                    res = \"\";\n                    let i = 0;\n                    let l = val.length;\n                    while (l--) {\n                        if (i < this.label.maxLength) {\n                            res += (val + '').charAt(val.length - l);\n                            i++;\n                        } else {\n                            res += '\\n';\n                            res += (val + '').charAt(val.length - l);\n                            i = 0;\n                        }\n\n\n                    }\n\n                }\n            }\n\n        }\n        if (!res) {\n            res = val;\n        }\n\n        return res;\n    }\n    initModules() {\n\n        let _coordSystem = this._coordSystem;\n        this._tickLine = new TickLines(_coordSystem, this.tickLine);\n        this._tickLine.setDir(this._tickLineDir);\n        this._tickLine.initData({ dir: this._axisDir, origin: this._origin }, this.axisAttribute);\n\n        this._tickLine.drawStart();\n        this.group.add(this._tickLine.group);\n\n\n        //初始化tickText\n        let opt = _.clone(this.label);\n        opt.offset = this._tickLineDir.clone().multiplyScalar(opt.offset);\n\n        this._tickText = new TickTexts(_coordSystem, opt);\n        this._tickText.offset.add(this._tickLineDir.clone().multiplyScalar(this.tickLine.lineWidth + this.tickLine.lineLength + this.tickLine.offset));\n\n        this._tickText.setDir(this._tickLineDir);\n        this._tickText.initData({ dir: this._axisDir, origin: this._origin }, this.axisAttribute);\n        this._tickText.autoUpdataPostion = true;\n        this._tickText.drawStart(this._formatTextSection);\n        this.group.add(this._tickText.group)\n\n\n    }\n    draw() {\n        this._tickLine.draw();\n        this._tickText.draw();\n    }\n    dispose() {\n        this._tickLine.dispose();\n        this._tickText.dispose();\n        this.axisAttribute = null;\n    }\n    resetData() {\n        this._initData();\n        this.axisAttribute = this._coordSystem.getAxisAttribute(this.field);\n        this._tickLine.resetData({ dir: this._axisDir, origin: this._origin }, this.axisAttribute);\n        this._tickText.resetData({ dir: this._axisDir, origin: this._origin }, this.axisAttribute, this._formatTextSection);\n        this._tickText.autoUpdataPostion = true;\n    }\n}\n\nexport { Axis };","import { Component, _ } from \"../Component\";\nimport { Axis } from './axis';\nimport { FaceNames } from '../../constants';\nimport { Vector3, MeshBasicMaterial, MeshPhongMaterial, BoxGeometry, Mesh, Math as _Math } from 'mmgl/src/index';\n\n\nclass CubeUI extends Component {\n    constructor(_coordSystem) {\n        super(_coordSystem);\n\n        this.name = 'CubeUI';\n        this.faceAxises = {};\n        for (let key in FaceNames) {\n            this.faceAxises[FaceNames[key]] = [];\n        }\n        this.init();\n    }\n    init() {\n        this._initModules();\n\n    }\n    _initModules() {\n        let _coordSystem = this._coordSystem;\n        let opt = null;\n        let axises = this.faceAxises;\n        //_dir === 'FRONT'\n        {\n            let origin = _coordSystem.getOriginPosition(FaceNames.FRONT);\n            //初始化X轴\n            opt = _.clone(_coordSystem.coord.xAxis);\n            let xAxis = new Axis(this, opt)\n            xAxis.setOrigin(origin.clone());\n            xAxis.setAxisDir(new Vector3(1, 0, 0));\n            xAxis.setTickLineDir(new Vector3(0, -1, 0))\n            xAxis.initModules();\n            this.group.add(xAxis.group);\n            axises[FaceNames.FRONT].push(xAxis);\n            //初始化Y轴\n            opt = _.clone(_coordSystem.coord.yAxis);\n            let yAxis = new Axis(this, opt)\n            yAxis.setOrigin(origin.clone());\n            yAxis.setAxisDir(new Vector3(0, 1, 0));\n            yAxis.setTickLineDir(new Vector3(-1, 0, 0))\n            yAxis.initModules();\n            this.group.add(yAxis.group);\n            axises[FaceNames.FRONT].push(yAxis);\n        }\n\n        //_dir === 'BACK'\n        {\n            let origin = _coordSystem.getOriginPosition(FaceNames.BACK);\n            //初始化X轴\n            opt = _.clone(_coordSystem.coord.xAxis);\n            let xAxis = new Axis(this, opt)\n            xAxis.setOrigin(origin.clone());\n            xAxis.setAxisDir(new Vector3(-1, 0, 0));\n            xAxis.setTickLineDir(new Vector3(0, -1, 0))\n            xAxis.initModules();\n            this.group.add(xAxis.group);\n            axises[FaceNames.BACK].push(xAxis);\n            //初始化Y轴\n            opt = _.clone(_coordSystem.coord.yAxis);\n            let yAxis = new Axis(this, opt)\n            yAxis.setOrigin(origin.clone());\n            yAxis.setAxisDir(new Vector3(0, 1, 0));\n            yAxis.setTickLineDir(new Vector3(1, 0, 0))\n            yAxis.initModules();\n            this.group.add(yAxis.group);\n            axises[FaceNames.BACK].push(yAxis);\n        }\n\n\n\n        //_dir === 'LEFT'\n        {\n            let origin = _coordSystem.getOriginPosition(FaceNames.LEFT);\n            //初始化X轴 实际为Z轴\n            opt = _.clone(_coordSystem.coord.zAxis);\n\n            let xAxis = new Axis(this, opt);\n            xAxis.setOrigin(origin.clone());\n            xAxis.setAxisDir(new Vector3(0, 0, 1));\n            xAxis.setTickLineDir(new Vector3(0, -1, 0))\n            xAxis.initModules();\n            this.group.add(xAxis.group);\n            axises[FaceNames.LEFT].push(xAxis);\n\n            //初始化Y轴\n            opt = _.clone(_coordSystem.coord.yAxis);\n            opt.label.textAlign = 'right';\n            let yAxis = new Axis(this, opt);\n            yAxis.setOrigin(origin.clone());\n            yAxis.setAxisDir(new Vector3(0, 1, 0));\n            yAxis.setTickLineDir(new Vector3(0, 0, -1))\n            yAxis.initModules();\n            this.group.add(yAxis.group);\n            axises[FaceNames.LEFT].push(yAxis);\n        }\n        //_dir === 'RIGHT'\n        {\n            let origin = _coordSystem.getOriginPosition(FaceNames.RIGHT);\n            //初始化X轴 实际为Z轴\n            opt = _.clone(_coordSystem.coord.zAxis);\n\n            let xAxis = new Axis(this, opt);\n            xAxis.setOrigin(origin.clone());\n            xAxis.setAxisDir(new Vector3(0, 0, -1));\n            xAxis.setTickLineDir(new Vector3(0, -1, 0))\n            xAxis.initModules();\n            this.group.add(xAxis.group);\n            axises[FaceNames.RIGHT].push(xAxis);\n\n            //初始化Y轴\n            opt = _.clone(_coordSystem.coord.yAxis);\n            let yAxis = new Axis(this, opt);\n            yAxis.setOrigin(origin.clone());\n            yAxis.setAxisDir(new Vector3(0, 1, 0));\n            yAxis.setTickLineDir(new Vector3(0, 0, 1))\n            yAxis.initModules();\n            this.group.add(yAxis.group);\n            axises[FaceNames.RIGHT].push(yAxis);\n        }\n\n        //_dir === 'TOP'\n        {\n            let origin = _coordSystem.getOriginPosition(FaceNames.TOP);\n            //初始化X轴\n            opt = _.clone(_coordSystem.coord.xAxis);\n            let xAxis = new Axis(this, opt)\n            xAxis.setOrigin(origin.clone());\n            xAxis.setAxisDir(new Vector3(1, 0, 0));\n            xAxis.setTickLineDir(new Vector3(0, 0, 1))\n            xAxis.initModules();\n            this.group.add(xAxis.group);\n            axises[FaceNames.TOP].push(xAxis);\n\n            //初始化Y轴 实际为Z轴\n            opt = _.clone(_coordSystem.coord.zAxis);\n            opt.label.textAlign = 'right';\n            let yAxis = new Axis(this, opt)\n            yAxis.setOrigin(origin.clone());\n            yAxis.setAxisDir(new Vector3(0, 0, -1));\n            yAxis.setTickLineDir(new Vector3(-1, 0, 0))\n            yAxis.initModules();\n            this.group.add(yAxis.group);\n            axises[FaceNames.TOP].push(yAxis);\n        }\n\n        //_dir === 'BOTTOM'\n        {\n            let origin = _coordSystem.getOriginPosition(FaceNames.BOTTOM);\n            //初始化X轴\n            opt = _.clone(_coordSystem.coord.xAxis);\n            let xAxis = new Axis(this, opt)\n            xAxis.setOrigin(origin.clone());\n            xAxis.setAxisDir(new Vector3(1, 0, 0));\n            xAxis.setTickLineDir(new Vector3(0, 0, -1))\n            xAxis.initModules();\n            this.group.add(xAxis.group);\n            axises[FaceNames.BOTTOM].push(xAxis);\n\n            //初始化Y轴 实际为Z轴\n            opt = _.clone(_coordSystem.coord.zAxis);\n            opt.label.textAlign = 'right';\n            let yAxis = new Axis(this, opt)\n            yAxis.setOrigin(origin.clone());\n            yAxis.setAxisDir(new Vector3(0, 0, 1));\n            yAxis.setTickLineDir(new Vector3(-1, 0, 0))\n            yAxis.initModules();\n            this.group.add(yAxis.group);\n            axises[FaceNames.BOTTOM].push(yAxis);\n        }\n\n\n        {\n            let {\n                width,\n                height,\n                depth } = this._coordSystem.getGraphAreaSize();\n\n            let getBasicMaterial = () => {\n                return new MeshPhongMaterial({\n                    polygonOffset: true,\n                    polygonOffsetFactor: 1,\n                    polygonOffsetUnits: 0.1,\n                    color: '#FFFFFF'\n                });\n            }\n            let geometry = new BoxGeometry(width, height, depth);\n            this.box = new Mesh(geometry, getBasicMaterial());\n\n        }\n\n    }\n    hideAxis() {\n        for (let key in FaceNames) {\n            let name = FaceNames[key];\n            this.faceAxises[name].forEach(axis => {\n                axis.setVisibel(false);\n            });\n        }\n    }\n    showAxis() {\n        let dir = this._coordSystem.getDirection();\n        for (let key in FaceNames) {\n            let name = FaceNames[key];\n            this.faceAxises[name].forEach(axis => {\n                axis.setVisibel(false);\n                if (name == dir) {\n                    axis.setVisibel(true); Î\n                }\n            });\n        }\n    }\n    draw() {\n        // let app = this._root.app;\n        // app._framework.on('renderbefore', () => {\n        //     // box.rotation.x+=0.01;\n        // })\n        this.group.add(this.box);\n        let dir = this._coordSystem.getDirection();\n        for (let key in FaceNames) {\n            let name = FaceNames[key];\n            this.faceAxises[name].forEach(axis => {\n                axis.setVisibel(false);\n                if (name == dir) {\n                    axis.setVisibel(true);\n                    axis.draw();\n                }\n            });\n        }\n\n\n    }\n    dispose() {\n\n        for (let key in FaceNames) {\n            let name = FaceNames[key];\n            this.faceAxises[name].forEach(axis => {\n                axis.dispose();\n            });\n        }\n        this.faceAxises = null;\n        super.dispose(this.box);\n    }\n    resetData() {\n\n        for (let key in FaceNames) {\n            let name = FaceNames[key];\n            this.faceAxises[name].forEach(axis => {\n                axis.resetData();\n            });\n        }\n\n    }\n}\n\nexport { CubeUI }","import { InertialSystem } from \"../../framework/coord/inertial\";\nimport { _ } from 'mmvis';\nimport { FaceNames } from '../../constants';\nimport { CubeUI } from '../cubeUI/index.js';\nimport { AxisAttribute } from '../../framework/coord/model/axisAttribute';\nimport { Vector3, AmbientLight, DirectionalLight, PointLight, Matrix4, Math as _Math } from \"mmgl/src/index\";\n\nclass Cube extends InertialSystem {\n    constructor(root) {\n        super(root)\n        // let ratio = root.width / root.height;\n        // let _frustumSize = 800;\n\n        this.availableGraph = {\n            widthRatio: 0.8,\n            heightRatio: 0.7\n        }\n\n        this.DefaultControls = {\n            autoRotate: false,       //默认不自动旋转\n            boxWidth: this.width,         //空间中X的最大值(最大宽度)  \n            boxHeight: this.height,        //空间中Y的最大值(最大高度)  \n            boxDepth: this.height,         //空间中Z的最大值(最大深度)\n\n            distance: 1600,        //默认相机距离\n            maxDistance: 3000,     //最大相机距离\n            minDistance: 600,      //最小相机距离 \n            minZoom: 0.2,           //正交投影缩小的最小值\n            maxZoom: 1.5,           //正交投影放大的最大值\n\n\n            enableDamping: true,\n            enablePan: false,\n            enableKeys: false,\n            autoRotateSpeed: 1.0,\n\n\n            alpha: 5,    //绕X轴旋转\n            beta: 5,      //绕Y轴旋转\n            gamma: 0      //绕Z轴旋转\n        }\n        //默认坐标系原点偏移\n        //默认Y轴文字最大预留160,X轴文字最大100\n        this.offset = new Vector3(Math.min(160, this.width * 0.1), Math.min(100, this.height * 0.1), 0);\n        //this.offset.set(0,0,0);\n        //构建的数据集\n        this._attributes = [];\n\n        if (this.coord.offset) {\n            this.offset.copy(this.coord.offset);\n        }\n        root.init(this.DefaultControls);\n        root.renderView.project('ortho');\n        this.init();\n\n\n    }\n    //基类调用 初始化配置\n    setDefaultOpts(opts) {\n\n        let defaultCoord = {\n            xAxis: {\n                layoutType: \"peak\", //\"peak\",  \n                label: {\n                    textAlign: \"center\",       //水平方向对齐: left  right center \n                    offset: 2\n                }\n            },\n            yAxis: {\n                layoutType: \"peak\", //\"peak\",\n                label: {\n                    textAlign: \"right\",\n                    offset: 2\n                }\n            },\n            zAxis: {\n                layoutType: \"peak\",\n                label: {\n                    textAlign: \"center\",\n                    offset: 2\n                }\n            }\n        };\n\n        opts.coord = _.extend(true, defaultCoord, opts.coord);\n\n        return opts;\n    }\n    init() {\n\n        let opt = _.clone(this.coord);\n        let size = this.getGraphAreaSize();\n        this.xAxisAttribute = new AxisAttribute(opt.xAxis, this.getAxisDataFrame(opt.xAxis.field));\n        this.xAxisAttribute.setDataSection();\n        this.xAxisAttribute.setAxisLength(size.width);\n\n        this._attributes.push(this.xAxisAttribute);\n\n        this.yAxisAttribute = new AxisAttribute(opt.yAxis, this.getAxisDataFrame(opt.yAxis.field));\n        this.yAxisAttribute.setDataSection();\n        this.yAxisAttribute.setAxisLength(size.height);\n\n        this._attributes.push(this.yAxisAttribute);\n\n        this.zAxisAttribute = new AxisAttribute(opt.zAxis, this.getAxisDataFrame(opt.zAxis.field));\n        this.zAxisAttribute.setDataSection();\n        this.zAxisAttribute.setAxisLength(size.depth);\n\n        this._attributes.push(this.zAxisAttribute);\n\n\n        this.addLights();\n\n        this.updatePosition();\n\n        this.group.position.copy(this.offset.clone().multiplyScalar(0.5));\n\n        this.bindEvent();\n    }\n    bindEvent() {\n        let second = 0.5;\n        let duration = 1000 * second; // 持续的时间\n        let rotationCube = this.rotationCube();\n\n        this.on('toFront', (e) => {\n            rotationCube(5, 5, 0, duration);\n        });\n        this.on('toRight', (e) => {\n            rotationCube(5, 95, 0, duration);\n        })\n        this.on('toTop', (e) => {\n            rotationCube(95, 0, 5, duration);\n        })\n\n        this.on('planeclick', (e) => {\n            let dir = this.getDirection();\n            for (let face in FaceNames) {\n                if (FaceNames[face] !== dir) {\n                    let cmp = this._root.getComponent({ name: \"Heatmap_\" + FaceNames[face] });\n                    if (cmp) {\n                        cmp.cancelSelect();\n                    }\n                }\n            }\n        })\n\n        this.on('legendchange', (e) => {\n            let face = e.data && e.data.face\n            let mapEvent = {\n                top: 'toTop',\n                front: 'toFront',\n                right: 'toRight'\n            }\n            if (!face) return;\n\n            this.fire({ type: mapEvent[face] });\n\n        })\n\n\n\n    }\n    rotationCube() {\n\n        let controlOps = this._root.opt.coord.controls;\n        let {\n            alpha,    //绕X轴旋转\n            beta,      //绕Y轴旋转\n            gamma      //绕Z轴旋转\n        } = controlOps;\n\n\n        return (alphaEnd, betaEnd, gammaEnd, duration) => {\n            this._coordUI.hideAxis();\n\n            let alphaStart = alpha;\n            let spanAlpha = alphaEnd - alphaStart;    //发生的变化\n\n            let betaStart = beta;\n            let spanBeta = betaEnd - betaStart;    //发生的变化\n\n            let gammaStart = gamma;\n            let spanGamma = gammaEnd - gammaStart;    //发生的变化\n\n\n\n            let currDate = new Date().getTime();\n\n            let fn = () => {\n                let pass = new Date().getTime() - currDate;\n                if (pass <= duration) {\n                    this._root.app.forceRender();\n                    alpha = alphaStart + spanAlpha * pass / duration;\n                    beta = betaStart + spanBeta * pass / duration;\n                    gamma = gammaStart + spanGamma * pass / duration;\n\n                    this.group.rotation.x = _Math.degToRad(alpha);\n                    this.group.rotation.y = _Math.degToRad(-beta);\n                    this.group.rotation.z = _Math.degToRad(gamma);\n\n                } else {\n                    alpha = alphaEnd;\n                    beta = betaEnd;\n                    gamma = gammaEnd;\n\n                    this.group.rotation.x = _Math.degToRad(alpha);\n                    this.group.rotation.y = _Math.degToRad(-beta);\n                    this.group.rotation.z = _Math.degToRad(gamma);\n\n                    this._coordUI.showAxis();\n                    this._root.app._framework.off('renderbefore', fn)\n                }\n            };\n\n            this._root.app._framework.on('renderbefore', fn)\n\n        }\n\n    }\n    addLights() {\n        //加入灯光\n\n        var ambientlight = new AmbientLight(0xffffff, 1); // soft white light\n\n        this._root.rootStage.add(ambientlight);\n\n        let center = this.center.clone();\n        center = this._getWorldPos(center);\n        //center.setY(0);\n\n        let dirLights = [];\n        let intensity = 0.8;\n        let lightColor = 0xFFFFFF;\n        let position = new Vector3(0.5, 0.5, 1);\n\n        dirLights[0] = new DirectionalLight(lightColor, intensity);\n        position.multiplyScalar(10000);\n        dirLights[0].position.copy(position);\n        dirLights[0].target.position.copy(center);\n        this._root.rootStage.add(dirLights[0]);\n\n\n    }\n\n    initCoordUI() {\n        if (this._coordUI) {\n            this._coordUI.dispose();\n        }\n        this._coordUI = new CubeUI(this);\n        this.group.add(this._coordUI.group);\n\n    }\n    getGraphAreaSize() {\n        let {\n            x: width,\n            y: height,\n            z: depth\n        } = this.getSize().sub(this.offset);\n\n        //深度和宽度一直\n        return {\n            width: width * this.availableGraph.widthRatio,\n            height: height * this.availableGraph.heightRatio,\n            depth: Math.min(width, height) * this.availableGraph.heightRatio\n        }\n    }\n    getOriginPosition(dir) {\n\n        let { width, height, depth } = this.getGraphAreaSize();\n        let origin = new Vector3();\n        dir = dir || this.getDirection();\n        //正面\n        if (dir === FaceNames.FRONT) {\n            origin.set(-width * 0.5, -height * 0.5, depth * 0.5);\n        }\n        //右面\n        if (dir === FaceNames.RIGHT) {\n            origin.set(width * 0.5, -height * 0.5, depth * 0.5);\n        }\n        //上面\n        if (dir === FaceNames.TOP) {\n            origin.set(-width * 0.5, height * 0.5, depth * 0.5);\n        }\n        //后面\n        if (dir === FaceNames.BACK) {\n            origin.set(width * 0.5, -height * 0.5, -depth * 0.5);\n        }\n        //左面\n        if (dir === FaceNames.LEFT) {\n            origin.set(-width * 0.5, -height * 0.5, -depth * 0.5);\n        }\n        //底面\n        if (dir === FaceNames.BOTTOM) {\n            origin.set(-width * 0.5, -height * 0.5, -depth * 0.5);\n        }\n\n        return origin;\n\n    }\n    getDirection() {\n        let dir = new Vector3();\n        this.group.getWorldDirection(dir);\n        //cos(45)=0.7071067811865476\n        //面对我们的cube面\n        if (dir.dot(new Vector3(0, 0, 1)) > 0.7) {\n            return FaceNames.FRONT;\n        } else if (dir.dot(new Vector3(-1, 0, 0)) > 0.7) {\n            return FaceNames.RIGHT;\n        } else if (dir.dot(new Vector3(0, -1, 0)) > 0.7) {\n            return FaceNames.TOP;\n        } else if (dir.dot(new Vector3(1, 0, 0)) > 0.7) {\n            return FaceNames.LEFT;\n        } else if (dir.dot(new Vector3(0, 1, 0)) > 0.7) {\n            return FaceNames.BOTTOM;\n        } else if (dir.dot(new Vector3(0, 0, -1)) > 0.7) {\n            return FaceNames.BACK;\n        }\n        return null;\n    }\n\n    updatePosition() {\n        //渲染对象,非相机\n        let controlOps = this._root.opt.coord.controls;\n        let phi = _Math.degToRad(controlOps.alpha);   //(90-lat)*(Math.PI/180),\n        let theta = _Math.degToRad(-controlOps.beta);\n        let gamma = _Math.degToRad(controlOps.gamma);\n\n        this.group.rotateX(phi);\n        this.group.rotateY(theta);\n        this.group.rotateZ(gamma);\n\n        //防止旋转碰到相机\n        let len = new Vector3(controlOps.boxWidth, controlOps.boxHeight, controlOps.boxDepth).length()\n        this._root.renderView._camera.position.setZ(len);\n\n    }\n    drawUI() {\n        this._coordUI.draw();\n        this._root.app._framework.on('renderbefore', () => {\n            // this.group.rotation.x+=0.01;\n        })\n    }\n    getAxisAttribute(field) {\n        let attribute = null;\n        this._attributes.forEach(attr => {\n            if (_.isArray(field)) {\n                if (JSON.stringify(field) == JSON.stringify(attr.field)) {\n                    attribute = att;\n                }\n            } else {\n                if (attr.field == field) {\n                    attribute = attr;\n                }\n            }\n        });\n\n        return attribute;\n    }\n    resetData() {\n        let opt = _.clone(this.coord);\n        this.xAxisAttribute.resetDataOrg(this.getAxisDataFrame(opt.xAxis.field));\n        this.xAxisAttribute.setDataSection();\n        this.xAxisAttribute.calculateProps();\n\n        this.yAxisAttribute.resetDataOrg(this.getAxisDataFrame(opt.yAxis.field));\n        this.yAxisAttribute.setDataSection();\n        this.yAxisAttribute.calculateProps();\n\n\n        this.zAxisAttribute.resetDataOrg(this.getAxisDataFrame(opt.zAxis.field));\n        this.zAxisAttribute.setDataSection();\n        this.zAxisAttribute.calculateProps();\n\n\n\n        //UI组件resetData\n        this._coordUI.resetData();\n    }\n\n}\n\nexport default Cube;;\n","import { Component, _ } from '../Component';\nimport { Vector3 } from 'mmgl/src/index';\n\nclass GraphObject extends Component {\n    constructor(chart3d) {\n        super(chart3d.currCoord);\n        //todo 每个图表初始化前最基本的属性放在这里\n        this.enabledField = [];\n        this.drawData = [];\n    }\n    setEnabledField() {\n        let _coord = this._coordSystem;\n        let _zfield = _coord.isExistZAxisField();\n        if (!_zfield) {\n            this.enabledField = this._coordSystem.getEnabledFields(this.field);\n        } else {\n            let zSection = _coord.zAxisAttribute.getDataSection();\n            this.enabledField = this._coordSystem.getEnabledFields(zSection);\n        }\n    }\n\n    dataProcess() {\n        //每一个图型组件在绘制前都需要进行数据处理,提取出来这里统一做首次处理\n        if (this._coordSystem.type == \"Cartesian3D\") {\n            this._cartesian3DProcess();\n        }\n    }\n\n    _cartesian3DProcess() {\n        let me = this;\n        let _coord = this._coordSystem;\n        let _xAxis = _coord.xAxisAttribute;\n        let _zAxis = _coord.zAxisAttribute;\n        let yAxisInfo = _coord.getYAxis(this.yAxisName);\n        let _yAxis = yAxisInfo.attr;\n\n        let zData, zNativeSection;\n\n\n        //用来计算下面的hLen\n        this.setEnabledField();\n        this.drawData = {};\n\n        var hLen = this.enabledField.length; //每组显示的个数\n\n        //判断是是否提供了Z轴字段,也就是判断数据是二维数据还是三维数据\n        let _zfield = _coord.isExistZAxisField();\n        zNativeSection = _zAxis.getNativeDataSection();\n        if (_zAxis.layoutType === 'proportion') {\n            zData = _.flatten(_zAxis.dataOrg);\n        } else {\n            zData = _zAxis.getDataSection();\n\n        }\n\n\n        //然后计算出对于结构的dataOrg\n\n        function generate(zVal, zInd) {\n            //dataOrg和field是一一对应的\n            let dataOrg = [];\n            let rowDataOf;\n            if (!_zfield) {\n                dataOrg = me._root.dataFrame.getDataOrg(me.enabledField);\n            } else {\n                let orgVal = zNativeSection[zInd];\n                let op = {\n                    [_zfield]: orgVal\n                };\n\n                rowDataOf = me._root.dataFrame.getRowDataOf(op);\n                let arr = [];\n                arr = rowDataOf.map(item => {\n                    return item[_yAxis.field];\n                });\n                dataOrg.push([arr]);\n            }\n\n            _.each(dataOrg, function (hData, b) {\n                //hData，可以理解为一根竹子 横向的分组数据，这个hData上面还可能有纵向的堆叠\n                //tempBarData 一根柱子的数据， 这个柱子是个数据，上面可以有n个子元素对应的竹节\n                var tempBarData = [];\n                let _vValue = 0;\n                _.each(hData, function (vSectionData, v) {\n                    tempBarData[v] = [];\n                    //vSectionData 代表某个字段下面的一组数据比如 uv\n\n                    let _dataLen = vSectionData.length;\n\n                    //vSectionData为具体的一个field对应的一组数据\n                    _.each(vSectionData, function (val, i) {\n\n                        _vValue = 0;\n                        if (v > 0) {\n                            for (let t = 0; t < v; t++) {\n                                _vValue += hData[t][i];\n                            }\n                        }\n\n                        var vCount = val;\n                        if (me.proportion) {\n                            //先计算总量\n                            vCount = 0;\n                            _.each(hData, function (team, ti) {\n                                vCount += team[i]\n                            });\n                        };\n\n\n\n                        let z = 0;\n\n                        z = - _zAxis.getPosOfVal(zVal);\n                        zInd = _zAxis.getIndexOfVal(zVal);\n\n                        let _field = null;\n                        if (_zfield) {\n                            _field = me.field.toString();\n                        } else {\n                            _field = me._getTargetField(b, v, i, me.enabledField);\n                        }\n\n                        let rowData = 0;\n                        if (_zfield) {\n                            rowData = rowDataOf[i]\n                        } else {\n                            rowData = me._root.dataFrame.getRowDataAt(i)\n                        }\n\n                        let xVal = rowData[_xAxis.field];\n                        let x = _xAxis.getPosOfVal(xVal);\n\n                        let y = 0, startY = 0;\n                        if (me.proportion) {\n                            y = val / vCount * _yAxis.axisLength;\n                        } else {\n                            y = _yAxis.getPosOfVal(val);\n                            startY = _yAxis.getPosOfVal(_vValue);\n                        };\n\n\n                        var nodeData = new NodeData({\n                            type: me.type,\n                            value: val,\n                            vInd: v,         //如果是堆叠图的话，这个node在堆叠中得位置\n                            vCount: vCount,\n                            groupIndex:b,\n\n                            field: _field,\n                            xField: _xAxis.field,\n                            zField: _zAxis.field,\n                            dataLen: _dataLen,\n\n                            size: new Vector3(xVal, val, zVal),\n                            pos: new Vector3(x, y, z),\n                            fromPos: new Vector3(x, startY, z),\n                            vValue: _vValue,\n                            hLen:hLen,\n                            iNode: i,\n                            zNode: zInd,\n                            rowData: rowData,\n                            color: _zfield ? _coord.getColor(zVal) : _coord.getColor(_field)\n                        });\n\n\n                        let key = nodeData.field;\n                        if (_zfield) {\n                            key = zVal;\n                        }\n                        if (!me.drawData[key]) {\n                            me.drawData[key] = tempBarData[v];\n                        };\n\n                        tempBarData[v].push(nodeData);\n\n                    });\n                });\n\n            });\n        }\n\n\n        let fieldName = this.enabledField.toString();\n        if (!_zfield) {\n            let zInd = _.indexOf(zNativeSection, fieldName);\n            generate(zData[zInd]);\n        } else {\n            zData.forEach((zd, zInd) => {\n                generate(zd, zInd);\n            });\n        }\n        return me.drawData;\n    }\n    _getTargetField(b, v, i, field) {\n        if (_.isString(field)) {\n            return field;\n        } else if (_.isArray(field)) {\n            var res = field[b];\n            if (_.isString(res)) {\n                return res;\n            } else if (_.isArray(res)) {\n                return res[v];\n            };\n        }\n    }\n\n\n}\n\nclass NodeData {\n    constructor({ type = null,\n        value = null,\n        vInd = null,\n        vCount = null,\n\n        field = null,\n        xField = null,\n        zField = null,\n        dataLen = 0,\n\n        size,\n        fromPos,\n\n        iNode = null,\n        zNode = null,\n        rowData = null,\n        color = null,\n        vValue = null,\n        pos = null,\n        hLen=null,\n        groupIndex=null } = {}) {\n        this.init(type, value, vInd, vCount, field, xField, zField, dataLen, size, fromPos, iNode, zNode, rowData, color, vValue, pos,hLen,groupIndex);\n    }\n    init(type, value, vInd, vCount, field, xField, zField, dataLen, size, fromPos, iNode, zNode, rowData, color, vValue, pos,hLen,groupIndex) {\n        this.type = type; //图型补充\n        this.value = value; //对于在Y轴上的值\n        this.vInd = vInd; //如果是堆叠图的话，这个node在堆叠中得位置\n        this.vValue = vValue; //堆叠后的值\n\n        this.vCount = vCount; //纵向方向的总数,比瑞堆叠了uv(100),pv(100),那么这个vCount就是200，比例柱状图的话，外部tips定制content的时候需要用到\n\n        this.field = field;  //y轴对应的字段 \n        this.xField = xField; //x轴对应的字段\n        this.zField = zField; //z轴对应的字段 \n        this.dataLen = dataLen;   //该字段对应的数据个数\n        this.hLen = hLen;  //分组数据的总数\n        this.groupIndex = groupIndex;   //分组的索引\n\n        this.size = size || new Vector3(); //图像的大小数据\n        this.pos = pos;  //值转换为位置的数据\n        this.fromPos = fromPos || new Vector3();  //图像的位置\n\n\n        this.iNode = iNode;        //相对于x轴的索引 \n        this.zNode = zNode;        //相对于轴z的索引 \n        this.rowData = rowData;     //本行数据\n        this.color = color;       //颜色值\n    }\n}\n\nexport { GraphObject, _ }","\nimport { GraphObject, _ } from '../graph';\nimport { Vector3, MeshBasicMaterial, MeshLambertMaterial, FrontSide, DoubleSide, MeshPhongMaterial, Color, Box3 } from 'mmgl/src/index';\n\n//let renderOrder = 100;\nclass Bar extends GraphObject {\n    constructor(chart3d, opt) {\n        super(chart3d);\n\n        this.name='Bar';\n        this.type = \"bar\";\n        this._type = \"bar3d\";\n\n        this.node = {\n            shapeType: 'cube',  //'cube'立方体  'cylinder'圆柱体  ,'cone'圆锥体 \n            materialType: 'phong', //'lambert' 'phong' 'base'  作色方式\n            // width: 0,\n            // _width: 0,\n            // maxWidth: 50,\n            // minWidth: 1,\n            // minHeight: 0,\n\n            // radius: 3,\n            fillStyle: null,\n            // fillAlpha: 0.95,\n            // _count: 0, //总共有多少个bar\n            // xDis: null,\n            // filter: null\n        };\n\n        this.label = {\n            enabled: false,\n            animation: true,\n            fontColor: null, //如果有设置text.fontColor那么优先使用fontColor\n            fontSize: 12,\n            format: null,\n            lineWidth: 0,\n            strokeStyle: null,\n\n            rotation: 0,\n            align: \"center\",  //left center right\n            verticalAlign: \"bottom\", //top middle bottom\n            position: \"top\", //top,topRight,right,rightBottom,bottom,bottomLeft,left,leftTop,center\n            offsetX: 0,\n            offsetY: 0\n        };\n\n        //this.sort = null; //TODO:这个设置有问题，暂时所有sort相关的逻辑都注释掉\n\n        // this._barsLen = 0;\n\n        //this.txtsSp = null;\n\n        this.proportion = false;//比例柱状图，比例图首先肯定是个堆叠图\n\n        this.allGroupNum = 1;\n        _.extend(true, this, opt);\n        // this.materialMap = new Map();\n        this.init();\n\n    }\n    init() {\n        this.barsGroup = this._root.app.addGroup({ name: 'bars_gruop' });\n\n    }\n    dataProcess() {\n        super.dataProcess();\n        let ceil = this._coordSystem.getCeilSize();\n        let boxDepth = ceil.z * 0.7;\n        for (let field in this.drawData) {\n            let fieldObj = this.drawData[field];\n            fieldObj.forEach(item => {\n                item.ceil = ceil;\n                item.boxWidth = ceil.x / item.hLen * 0.7;\n                item.boxHeight = item.pos.y;\n                item.boxDepth = boxDepth > item.boxWidth ? item.boxWidth : boxDepth;\n            })\n        }\n    }\n    getMaterial(dataOrg) {\n        let MaterilBar = null;\n        switch (this.node.materialType) {\n            case 'phong':\n                MaterilBar = MeshPhongMaterial;\n                break;\n            case 'lambert':\n                MaterilBar = MeshLambertMaterial\n                break;\n            case 'base':\n                MaterilBar = MeshBasicMaterial\n                break;\n            default:\n                MaterilBar = MeshPhongMaterial;\n        }\n\n        let _color = this._getColor(this.node.fillStyle, dataOrg);\n        let material = null;\n        //todo 鼠标移动高亮,需要为每个柱子设置单独的材质,后续考虑有没有其他办法减少材质\n        // if (!this.materialMap.has(_color)) {\n        material = new MaterilBar({\n            color: _color,\n            transparent: true,\n            opacity: 1,\n            depthTest: true,\n            depthWrite: true,\n            side: DoubleSide,\n            // polygonOffset: true,\n            // polygonOffsetFactor: 1,\n            // polygonOffsetUnits: 1.5\n        })\n        //   this.materialMap.set(_color, material);\n        // } else {\n        //     material = this.materialMap.get(_color);\n        // }\n\n\n        return material;\n\n    }\n    draw() {\n        let me = this;\n        let app = this._root.app;\n        this.dataProcess();\n        let scale = 0.9; //每个单元格柱子占用的百分比\n        for (let field in this.drawData) {\n            let fieldObj = this.drawData[field];\n            fieldObj.forEach(item => {\n                let span = item.ceil.x / (item.hLen * 2) * scale;\n                let step = item.groupIndex * 2 + 1;\n\n                item.fromPos.setX(item.fromPos.x + (span * step - item.ceil.x * 0.5 * scale) - item.boxWidth * 0.5);\n                if (this.node.shapeType == 'cylinder' || 'cone' == this.node.shapeType) {\n\n                    item.fromPos.setZ(item.pos.z - item.boxWidth * 0.5);\n                } else {\n                    item.fromPos.setZ(item.pos.z - item.boxDepth * 0.5);\n                }\n                let boxHeight = Math.max((item.boxHeight), 0.01);\n\n                let material = me.getMaterial(item);\n                let obj = null;\n                let boundbox = new Box3();\n                let fromPos = item.fromPos.clone();\n                if (this.node.shapeType == 'cone') {\n                    obj = app.createCone(item.boxWidth, boxHeight, item.boxDepth, material);\n                    boundbox.setFromObject(obj);\n                    fromPos.x += boundbox.getCenter().x;\n                } else if (this.node.shapeType == 'cylinder') {\n                    obj = app.createCylinder(item.boxWidth, boxHeight, item.boxDepth, material);\n                    boundbox.setFromObject(obj);\n                    fromPos.x += boundbox.getCenter().x;\n                } else {\n                    obj = app.createBox(item.boxWidth, boxHeight, item.boxDepth, material);\n                }\n                obj.name = Bar._bar_prefix + this.node.shapeType + \"_\" + item.vInd + \"_\" + item.iNode\n                obj.userData.info = item;\n                obj.position.copy(fromPos);\n                this.group.add(obj);\n\n            })\n\n        };\n\n        this.bindEvent();\n\n    }\n\n    bindEvent() {\n        let me = this;\n        this.__mouseover = function (e) {\n            //上下文中的this 是bar 对象\n            this.userData.color = this.material.color.clone();\n            //高亮\n            let tempColor = {};\n            this.material.color.getHSL(tempColor);\n            this.material.setValues({ color: new Color().setHSL(tempColor.h, tempColor.s, tempColor.l + 0.1) });\n\n            me._root.fire({\n                type: 'tipShow',\n                event: e.event,\n                data: this.userData.info\n            });\n\n            me.fire({ type: 'barover', data: this.userData.info });\n        };\n        this.__mouseout = function (e) {\n            this.material.setValues({ color: this.userData.color });\n            me._root.fire({\n                type: 'tipHide',\n                event: e.event,\n                data: this.userData.info\n            });\n            me.fire({ type: 'barout', data: this.userData.info });\n        };\n\n        this.__mousemove = function (e) {\n            me._root.fire({\n                type: 'tipMove',\n                event: e.event,\n                data: this.userData.info\n            });\n            me.fire({ type: 'barmove', data: this.userData.info });\n        }\n\n        this.__click = function (e) {\n            me.fire({ type: 'barclick', data: this.userData.info });\n        }\n\n        this.group.traverse(obj => {\n            if (obj.name && obj.name.includes(Bar._bar_prefix)) {\n                obj.on('mouseover', this.__mouseover);\n                obj.on('mouseout', this.__mouseout);\n\n                obj.on('mousemove', this.__mousemove);\n                obj.on('click', this.__click);\n            }\n        });\n    }\n\n    _getColor(c, dataOrg) {\n        let field = dataOrg.field.split(',');\n        var color = this._coordSystem.getColor(field);\n        //field对应的索引，， 取颜色这里不要用i\n        if (_.isString(c)) {\n            color = c\n        };\n        if (_.isArray(c)) {\n            color = _.flatten(c)[_.indexOf(_flattenField, field)];\n        };\n        if (_.isFunction(c)) {\n            color = c.apply(this, [rectData]);\n        };\n\n        return color;\n    }\n    dispose() {\n\n        //this.materialMap.clear();\n        this.group.traverse((obj) => {\n            if (obj.name && obj.name.includes(Bar._bar_prefix)) {\n                obj.off('click', this.__click);\n                obj.off('mouseover', this.__mouseover);\n                obj.off('mouseout', this.__mouseout);\n                obj.off('mousemove', this.__mousemove);\n            }\n        })\n\n\n        super.dispose();\n\n    }\n    resetData() {\n        this.dispose();\n        this.draw();\n    }\n\n}\nBar._bar_prefix = \"bar_one_\";\nexport default Bar;\n\n","import { GraphObject, _ } from '../graph';\nimport { findNearPointX } from \"../../../../utils/tools\";\nimport { Vector3, MeshBasicMaterial, MeshLambertMaterial, FrontSide, DoubleSide, MeshPhongMaterial, Color, CatmullRomCurve3 } from 'mmgl/src/index';\n\nlet renderOrder = 100;\nlet __lastPosition = null;\nclass Line extends GraphObject {\n    constructor(chart3d, opt) {\n        super(chart3d);\n\n        this.name = 'Line';\n        this.type = \"line\";\n        this._type = \"line3d\";\n\n        this.line = { //线\n            enabled: 1,\n            shapeType: \"brokenLine\",//折线\n            strokeStyle: null,\n            lineWidth: 2,\n            lineType: \"solid\",\n            smooth: true\n        };\n\n        this.icon = { //节点 \n            enabled: 1, //是否有\n            shapeType: \"circle\",\n            corner: false, //模式[false || 0 = 都有节点 | true || 1 = 拐角才有节点]\n            radius: 3, //半径 icon 圆点的半径\n            fillStyle: '#ffffff',\n            strokeStyle: null\n        };\n\n        this.area = { //填充\n            //            shapeType : \"path\",\n            enabled: 1,\n            fillStyle: null,\n            alpha: 0.3\n        };\n\n\n        _.extend(true, this, opt);\n        this.init();\n\n    }\n    init() {\n        this.lineGroup = this._root.app.addGroup({ name: 'line_lines_gruop' });\n        this.areaGroup = this._root.app.addGroup({ name: 'line_areas_gruop' });\n        this.nodeGroup = this._root.app.addGroup({ name: 'line_nodes_gruop' });\n        this.group.add(this.lineGroup);\n        this.group.add(this.areaGroup);\n        this.group.add(this.nodeGroup);\n    }\n    _getColor(c, dataOrg) {\n\n        var color = this._coordSystem.getColor(dataOrg.field);\n\n        //field对应的索引，， 取颜色这里不要用i\n        if (_.isString(c)) {\n            color = c\n        };\n        if (_.isArray(c)) {\n            color = _.flatten(c)[_.indexOf(_flattenField, field)];\n        };\n        if (_.isFunction(c)) {\n            color = c.apply(this, [rectData]);\n        };\n\n        return color;\n    }\n    dataProcess() {\n        super.dataProcess();\n    }\n    draw() {\n        let me = this;\n        let app = this._root.app;\n        this.dataProcess();\n\n        const DIVISONS = 200;\n        for (let field in this.drawData) {\n            let _color = this._getColor(this.line.strokeStyle, { field: field }) || \"red\";\n            let fieldObj = this.drawData[field];\n            let points = null, bottomPoints = [];\n\n            let poses = fieldObj.map(item => {\n                if (item.vInd > 0) {\n                    bottomPoints.push(item.fromPos);\n                    return new Vector3().copy(item.pos).setY(item.pos.y + item.fromPos.y);\n                }\n                return item.pos;\n            });\n\n\n            if (me.line.smooth) {\n                let curve = new CatmullRomCurve3(poses);\n                points = curve.getSpacedPoints(DIVISONS);\n                if (bottomPoints.length > 0) {\n                    let curve2 = new CatmullRomCurve3(bottomPoints);\n                    bottomPoints = curve2.getSpacedPoints(DIVISONS);\n                }\n            } else {\n                points = poses;\n            }\n\n\n            let line = app.createBrokenLine(points, this.line.lineWidth, _color, true);\n            line.visible = !!this.line.enabled;\n            this.lineGroup.add(line);\n\n\n            //绘制区域\n            let pointArr = [];\n            points.forEach(point => {\n                pointArr = pointArr.concat(point.toArray());\n            });\n            if (bottomPoints.length > 0) {\n                //绘制堆叠区域\n                for (let i = bottomPoints.length - 1; i >= 0; i--) {\n                    pointArr = pointArr.concat(bottomPoints[i].toArray());\n                }\n            } else {\n                //绘制普通的区域\n                pointArr.unshift(pointArr[0], 0, pointArr[2]);\n                pointArr.push(pointArr[(points.length - 1) * 3], 0, pointArr[(points.length - 1) * 3 + 2]);\n            }\n\n            let polygon = app.createPolygonPlane(pointArr, { fillStyle: _color });\n            polygon.userData = fieldObj;\n            polygon.visible = !!this.area.enabled;\n            this.areaGroup.add(polygon);\n\n\n\n            //绘制node 点\n\n            poses.forEach(point => {\n\n                //let node = app.createSphere(10,{fillStyle:_color});\n                let node = app.createCirclePlane(10, { fillStyle: _color });\n                node.position.copy(point);\n                node.visible = !!this.icon.enabled\n                this.nodeGroup.add(node);\n            });\n\n        }\n        this.bindEvent();\n    }\n    bindEvent() {\n        this.__mousemove = (e) => {\n            let currObj = e.intersects[0];\n            let target = e.target;\n            if (currObj) {\n                let pos = currObj.point.clone();\n                let locPos = this._coordSystem.group.worldToLocal(pos);\n                let positions = target.userData.map(obj => {\n                    if (obj.vInd > 0) {\n                        return new Vector3().copy(obj.pos).setY(obj.pos.y + obj.fromPos.y)\n                    }\n                    return obj.pos;\n                });\n\n                let currPoint = findNearPointX(positions, locPos);\n                let currInfo = _.find(target.userData, item => {\n                    let _pos = item.pos.clone();\n                    if (item.vInd > 0) {\n                        _pos = new Vector3().copy(item.pos).setY(item.pos.y + item.fromPos.y)\n                    }\n                    return _pos.equals(currPoint);\n                })\n\n                if (!__lastPosition || !currPoint.equals(__lastPosition)) {\n                    //this._showLabel(currInfo);\n                    this._root.fire({\n                        type: 'tipShow',\n                        event: e.event,\n                        data: currInfo\n                    })\n                    __lastPosition = currPoint;\n                    this.fire({ type: 'showLable', data: currInfo });\n                }\n                this.fire({ type: 'mousemove' })\n                // console.log(currPoint);\n            }\n        };\n       this.__mouseout = (e) => {\n            if (this.textTempGroup) {\n\n                // this.textTempGroup.traverse(item => {\n                //     item.on('removed', (e) => {\n                //         this.fire({ type: 'hideLable', data: e.target.userData });\n                //     })\n                // })\n                // this.dispose(this.textTempGroup);\n            }\n\n            this._root.fire({\n                type: 'tipHide',\n                event: e.event,\n                data: null\n            })\n            this.fire({ type: 'mouseout' });\n        }\n        this.areaGroup.traverse(obj => {\n            obj.on('mousemove', this.__mousemove);\n            obj.on(\"mouseout\", this.__mouseout);\n        })\n\n        this.on('showLable', (e) => {\n            this.nodeGroup.traverse(obj => {\n                if (obj.userData.isScale) {\n                    obj.userData.isScale = false;\n                    obj.scale.multiplyScalar(0.5);\n                }\n                let _pos = e.data.pos.clone();\n                if (e.data.vInd > 0) {\n                    _pos = new Vector3().copy(e.data.pos).setY(e.data.pos.y + e.data.fromPos.y)\n                }\n                if (!obj.userData.isScale && obj.position.equals(_pos)) {\n                    obj.userData.isScale = true;\n                    obj.scale.multiplyScalar(2);\n                }\n            })\n        })\n        this.on('mouseout', (e) => {\n            this.nodeGroup.traverse(obj => {\n                if (obj.userData.isScale) {\n                    obj.userData.isScale = false;\n                    obj.scale.multiplyScalar(0.5);\n                }\n            })\n        })\n    }\n    dispose(){\n        this.areaGroup.traverse(obj => {\n            obj.off('mousemove', this.__mousemove);\n            obj.off(\"mouseout\", this.__mouseout);\n        });\n        super.dispose();\n    }\n    resetData() {\n        this.dispose();\n        this.draw();\n    }\n}\n\nexport default Line;","import { GraphObject, _ } from '../graph';\nimport { findNearPointX } from \"../../../../utils/tools\";\nimport { Vector3, MeshBasicMaterial, MeshLambertMaterial, FrontSide, DoubleSide, MeshPhongMaterial, Color, CatmullRomCurve3 } from 'mmgl/src/index';\n\nlet renderOrder = 100;\nlet __lastPosition = null;\n\nclass Area extends GraphObject {\n    constructor(chart3d, opt) {\n        super(chart3d);\n\n        this.name = \"Area\";\n        this.type = \"area\";\n        this._type = \"area3d\";\n\n        this.area = { //填充\n            //            shapeType : \"path\",\n            enabled: 1,\n            fillStyle: null,\n            alpha: 0.3,\n            thickness: Infinity,\n            smooth: true\n        };\n\n\n        _.extend(true, this, opt);\n        this.init();\n\n    }\n    init() {\n        this.textGroup = this._root.app.addGroup({\n            name: 'text_groups'\n        });\n        this.textTempGroup = this._root.app.addGroup({\n            name: 'text_temp_groups'\n        });\n\n        this.group.add(this.textGroup);\n        this.group.add(this.textTempGroup);\n\n    }\n    _getColor(c, dataOrg) {\n        var color = this._coordSystem.getColor(dataOrg.field);\n\n        //field对应的索引，， 取颜色这里不要用i\n        if (_.isString(c)) {\n            color = c\n        };\n        if (_.isArray(c)) {\n            color = _.flatten(c)[_.indexOf(_flattenField, field)];\n        };\n        if (_.isFunction(c)) {\n            color = c.apply(this, [rectData]);\n        };\n\n        return color;\n    }\n\n    dataProcess() {\n        super.dataProcess();\n\n    }\n    draw() {\n        let me = this;\n        let app = this._root.app;\n        this.dataProcess();\n        let ceil = this._coordSystem.getCeilSize();\n\n        let boxDepth = ceil.z * 0.7;\n\n        const DIVISONS = 200;\n        for (let field in this.drawData) {\n            let _color = this._getColor(null, { field: field }) || \"red\";\n            let fieldObj = this.drawData[field];\n            let points = null;\n            // // //if (this.line.enabled) {\n            // //     if (me.line.smooth) {\n\n            let poses = fieldObj.map(item => {\n                return item.pos;\n            });\n            if (this.area.smooth) {\n                let curve = new CatmullRomCurve3(poses);\n                points = curve.getSpacedPoints(DIVISONS);\n            } else {\n                points = poses;\n            }\n\n\n            let thickness = Math.max(0.1, Math.min(boxDepth, this.area.thickness));\n            //绘制区域\n\n            points.unshift(points[0].clone().setY(0));\n            points.push(points[(points.length - 1)].clone().setY(0));\n            let polygon = app.createArea(points, thickness, { fillStyle: _color });\n\n            polygon.name = Area._area_prefix + field;\n            polygon.userData = fieldObj;\n            let posZ = points[0].z;\n            posZ = posZ - thickness * 0.5;\n            polygon.visible = !!this.area.enabled;\n            polygon.position.setZ(posZ);\n            this.group.add(polygon);\n\n\n        }\n        me.bindEvent();\n    }\n    bindEvent() {\n\n        this.__mousemove = (e) => {\n            let currObj = e.intersects[0];\n            let target = e.target;\n            if (currObj) {\n                let pos = currObj.point.clone();\n                let locPos = this._coordSystem.group.worldToLocal(pos);\n                let positions = target.userData.map(obj => {\n                    return obj.pos;\n                });\n\n                let currPoint = findNearPointX(positions, locPos);\n                let currInfo = _.find(target.userData, item => {\n                    return item.pos.equals(currPoint);\n                })\n\n                if (!__lastPosition || !currPoint.equals(__lastPosition)) {\n                    this._showLabel(currInfo);\n                    this._root.fire({\n                        type: 'tipShow',\n                        event: e.event,\n                        data: currInfo\n                    })\n                    __lastPosition = currPoint;\n                    this.fire({ type: 'showLable', data: currInfo });\n                }\n                this.fire({ type: 'mousemove' })\n                // console.log(currPoint);\n            }\n        };\n\n        this.__mouseout = (e) => {\n            if (this.textTempGroup) {\n\n                this.textTempGroup.traverse(item => {\n                    item.on('removed', (e) => {\n                        this.fire({ type: 'hideLable', data: e.target.userData });\n                    })\n                })\n                this.dispose(this.textTempGroup);\n            }\n\n            this._root.fire({\n                type: 'tipHide',\n                event: e.event,\n                data: null\n            })\n            this.fire({ type: 'mouseout' });\n        }\n\n\n        this.group.traverse(obj => {\n            if (obj.name && obj.name.includes(Area._area_prefix)) {\n                obj.on('mousemove', this.__mousemove);\n                obj.on(\"mouseout\", this.__mouseout);\n            }\n        })\n    }\n    _showLabel(labelInfo) {\n        let app = this._root.app;\n        let val = labelInfo.value;\n        let position = labelInfo.pos;\n\n        let fontStyle = { fontSize: 50, fillStyle: labelInfo.color, strokeStyle: \"#ccc\", lineWidth: 2, isBold: true };\n        let offset = 50;\n\n        //干掉上一个显示\n        this.dispose(this.textTempGroup);\n\n        let textObj = app.creatSpriteText(val, fontStyle);\n        textObj[0].position.copy(position);\n        textObj[0].position.setY(offset + textObj[0].position.y);\n        this.textTempGroup.add(textObj[0]);\n\n    }\n\n    resetData() {\n        this.dispose();\n        this.draw();\n    }\n    dispose(group) {\n\n        //删除所有事件\n        group = group || this.group;\n        group.traverse(obj => {\n            if (obj.name && obj.name.includes(Area._area_prefix)) {\n                obj.off('mousemove', this.__mousemove);\n                obj.off(\"mouseout\", this.__mouseout);\n            }\n        })\n\n        super.dispose(group);\n    }\n}\n\nArea._area_prefix = 'polygon_area_';\n\nexport default Area;","import { Component, _ } from '../../Component';\nimport { Vector3, MeshBasicMaterial, MeshLambertMaterial, FrontSide, DoubleSide, MeshPhongMaterial, Color, Box3, Math as _Math, CatmullRomCurve3 } from 'mmgl/src/index';\n\nlet renderOrder = 0;\nclass Pie extends Component {\n    constructor(chart3d, opt) {\n        super(chart3d.currCoord);\n\n        this.name = 'Pie';\n        this.type = \"pie3d\";\n\n        this._type = \"pie\";\n\n        this.field = null;\n        this.sort = null; //默认不排序，可以配置为asc,desc\n\n        //groupField主要是给legend用的， 所有在legend中需要显示的分组数据，都用groupField\n        //其他图也都统一， 不要改\n        this.groupField = null;\n        this.maxHeight = 0;\n        this.heightSort = null; //默认不排序，可以配置为asc,desc\n\n        this.offsetRadius = 5;\n\n        this.origin = {\n            x: 0,\n            y: 0,\n            z: 0\n        };\n\n        this.node = {\n            shapeType: \"sector\",\n\n            radius: null, //每个扇形单元的半径，也可以配置一个字段，就成了丁格尔玫瑰图\n            innerRadius: 0, //扇形的内圆半径\n            outRadius: null,//最大外围半径\n            minRadius: 10,//outRadius - innerRadius ， 也就是radius的最小值\n            moveDis: 30, //要预留moveDis位置来hover sector 的时候外扩\n            height: 50,\n            fillStyle: null, //this.root.getTheme(),\n            focus: {\n                enabled: true,\n            },\n            select: {\n                enabled: false,\n                radius: 5,\n                alpha: 0.7\n            }\n        };\n\n        this.label = {\n            field: null, //默认获取field的值，但是可以单独设置\n            enabled: false,\n            format: null,\n            offset: 10\n        };\n\n        this.startAngle = -90;\n        this.allAngles = 360;\n        this.isInit = true;\n        this.init(opt);\n\n    }\n    init(opt) {\n\n        _.extend(true, this, opt);\n\n        //计算一下图形的半径\n        let attr = this._coordSystem.dataAttribute;\n        //根据当前的boundbox,如果用户没有制定半径这里需要计算出来\n        this._computerProps();\n        attr.setOption(Object.assign({}, this));\n        //已经在坐标系中传入构造函数中这里可以不传\n        attr.setDataFrame();\n        this.textGroup = this._root.app.addGroup({ name: 'pie_texts_gruop' });\n        this._root.labelGroup.add(this.textGroup);\n    }\n    _computerProps() {\n\n        let { x, y, z } = this._coordSystem.getSize();\n        //根据配置情况重新修正 outRadius ，innerRadius ------------\n        if (!this.node.outRadius) {\n            var outRadius = Math.min(x, z) / 2;\n            if (this.label.enabled) {\n                //要预留moveDis位置来hover sector 的时候外扩\n                outRadius -= this.node.moveDis;\n            };\n            this.node.outRadius = outRadius;\n        };\n        if (this.node.radius !== null && _.isNumber(this.node.radius)) {\n            //如果用户有直接配置 radius，那么radius优先，用来计算\n            this.node.radius = Math.max(this.node.radius, this.node.minRadius);\n            //this.node.outRadius = this.node.innerRadius + this.node.radius;\n            this.node.innerRadius = this.node.outRadius - this.node.radius;\n        };\n\n        //要保证sec具有一个最小的radius\n        if (this.node.outRadius - this.node.innerRadius < this.node.minRadius) {\n            this.node.innerRadius = this.node.outRadius - this.node.minRadius;\n        };\n        if (this.node.innerRadius < 0) {\n            this.node.innerRadius = 0;\n        };\n\n        // end --------------------------------------------------\n        if (!this.maxHeight) {\n            this.maxHeight = y * 0.5;\n        }\n\n\n    }\n    draw() {\n        let me = this;\n        let app = this._root.app;\n        let attr = this._coordSystem.dataAttribute;\n        let heights = [];\n\n\n        attr.calculateProps();\n        this.data = attr.getLayoutData();\n\n        this.dispose();\n        this.dispose(this.textGroup);\n\n        this.data.forEach((item, i) => {\n            if (!item.enabled) return;\n            //文本格式化\n            item.labelText = this._getLabelText(item);\n\n            let material = new MeshPhongMaterial({\n                color: item.color,\n                transparent: true,\n                opacity: 1.0,\n                depthTest: true,\n                depthWrite: true,\n                side: DoubleSide,\n                polygonOffset: true,\n                polygonOffsetFactor: Math.sin(_Math.degToRad(item.midAngle)),\n                polygonOffsetUnits: 1.5\n            })\n            heights.push(item.height);\n\n\n            let sector = app.create3DPie(item.height, item.outRadius, item.innerRadius, item.startAngle, item.endAngle, material);\n\n            sector.userData.midAngle = item.midAngle;\n            //sector.renderOrder = renderOrder++;\n            sector.name = Pie._pie_prefix + item.iNode;\n            sector.userData.info = item;\n\n            //如果设置了高度取相应的数据,需要给定一些间距,防止z-fighting,尤其室圆心位置\n            if (item.heightField && item.innerRadius == 0) {\n                let offset = this.data.length * this.offsetRadius / (2 * Math.PI);\n                let x = offset * Math.cos(_Math.degToRad(item.midAngle));\n                let z = offset * Math.sin(_Math.degToRad(item.midAngle))\n                sector.position.set(x, 0, z);\n            }\n\n            this.group.add(sector);\n\n        })\n        this.adjustPosition(heights);\n        if (this.label.enabled) {\n            this._startWidgetLabel();\n        };\n        this.bindEvent();\n    }\n\n    bindEvent() {\n        let me = this;\n\n        this.__mouseover = function (e) {\n            //上下文中的this 是bar 对象\n            this.userData.color = this.material.color.clone();\n            //高亮\n            let tempColor = {};\n            this.material.color.getHSL(tempColor);\n            this.material.setValues({ color: new Color().setHSL(tempColor.h, tempColor.s, tempColor.l + 0.05) });\n\n            let _data = this.userData.info;\n            me._root.fire({\n                type: 'tipShow',\n                event: e.event,\n                data: { nodes: [_data] }\n            });\n\n            me.fire({ type: 'sectorover', data: _data });\n        };\n\n        this.__mouseout = function (e) {\n            this.material.setValues({ color: this.userData.color });\n            let _data = this.userData.info;\n            me._root.fire({\n                type: 'tipHide',\n                event: e.event,\n                data: { nodes: [_data] }\n            });\n            me.fire({ type: 'sectorout', data: _data });\n        };\n\n        this.__mousemove = function (e) {\n            let _data = this.userData.info;\n            me._root.fire({\n                type: 'tipMove',\n                event: e.event,\n                data: { nodes: [_data] }\n            });\n            me.fire({ type: 'sectormove', data: _data });\n        };\n\n        this.__click = function (e) {\n            let _data = this.userData.info;\n\n            if (!this.userData.isChecked) {\n                this.userData.isChecked = true;\n                //移动位置\n                let moveDis = _data.moveDis;\n                let pos = this.position.clone();\n                this.userData.orgPosition = pos;\n                let x = moveDis * Math.cos(_Math.degToRad(this.userData.midAngle));\n                let z = moveDis * Math.sin(_Math.degToRad(this.userData.midAngle));\n                this.position.set(x, pos.y, z)\n            } else {\n                this.userData.isChecked = false;\n                if (this.userData.orgPosition) {\n                    this.position.copy(this.userData.orgPosition);\n                }\n            }\n\n            me.fire({ type: 'sectorclick', data: _data });\n        }\n\n        this.group.traverse(sector => {\n            if (sector.name && sector.name.includes(Pie._pie_prefix)) {\n                sector.on('mouseover', this.__mouseover);\n                sector.on('mouseout', this.__mouseout);\n\n                sector.on('mousemove', this.__mousemove);\n                sector.on('click', this.__click);\n            }\n        });\n    }\n\n\n    _getLabelText(itemData) {\n        var str;\n        if (this.label.enabled) {\n            if (this.label.format) {\n                if (_.isFunction(this.label.format)) {\n                    str = this.label.format(itemData.label, itemData);\n                }\n            } else {\n                var _field = this.label.field || this.groupField\n                if (_field) {\n                    str = itemData.rowData[_field] + \"：\" + itemData.percentage + \"%\"\n                } else {\n                    str = itemData.percentage + \"%\"\n                }\n            }\n        }\n        return str;\n    }\n\n\n\n    _startWidgetLabel() {\n        var me = this;\n        let attr = this._coordSystem.dataAttribute;\n        var data = attr.getLayoutData();\n        var rMinPercentage = 0,\n            lMinPercentage = 0,\n            rMinY = 0,\n            lMinY = 0;\n        var quadrantsOrder = [];\n\n        var quadrantInfo = [\n            {\n                indexs: [],\n                count: 0\n            }, {\n                indexs: [],\n                count: 0\n            }, {\n                indexs: [],\n                count: 0\n            }, {\n                indexs: [],\n                count: 0\n            }\n        ];\n\n        //默认从top开始画\n        var widgetInfo = {\n            right: {\n                startQuadrant: 4,\n                endQuadrant: 1,\n                clockwise: true,\n                indexs: []\n            },\n            left: {\n                startQuadrant: 3,\n                endQuadrant: 2,\n                clockwise: false,\n                indexs: []\n            }\n        };\n\n        for (var i = 0; i < data.length; i++) {\n            var cur = data[i].quadrant;\n            quadrantInfo[cur - 1].indexs.push(i);\n            quadrantInfo[cur - 1].count++;\n        }\n\n        //1,3象限的绘制顺序需要反转\n        if (quadrantInfo[0].count > 1) quadrantInfo[0].indexs.reverse();\n        if (quadrantInfo[2].count > 1) quadrantInfo[2].indexs.reverse();\n\n        if (quadrantInfo[0].count > quadrantInfo[3].count) {\n            widgetInfo.right.startQuadrant = 1;\n            widgetInfo.right.endQuadrant = 4;\n            widgetInfo.right.clockwise = false;\n        }\n\n        if (quadrantInfo[1].count > quadrantInfo[2].count) {\n            widgetInfo.left.startQuadrant = 2;\n            widgetInfo.left.endQuadrant = 3;\n            widgetInfo.left.clockwise = true;\n        }\n\n        widgetInfo.right.indexs = quadrantInfo[widgetInfo.right.startQuadrant - 1].indexs.concat(quadrantInfo[widgetInfo.right.endQuadrant - 1].indexs);\n        widgetInfo.left.indexs = quadrantInfo[widgetInfo.left.startQuadrant - 1].indexs.concat(quadrantInfo[widgetInfo.left.endQuadrant - 1].indexs);\n\n        var overflowIndexs, sortedIndexs;\n\n        if (widgetInfo.right.indexs.length > me.textMaxCount) {\n            sortedIndexs = widgetInfo.right.indexs.slice(0);\n            sortedIndexs.sort(function (a, b) {\n                return data[b].y - data[a].y;\n            });\n            overflowIndexs = sortedIndexs.slice(me.textMaxCount);\n            rMinPercentage = data[overflowIndexs[0]].percentage;\n            rMinY = data[overflowIndexs[0]].y;\n        }\n        if (widgetInfo.left.indexs.length > me.textMaxCount) {\n            sortedIndexs = widgetInfo.left.indexs.slice(0);\n            sortedIndexs.sort(function (a, b) {\n                return data[b].y - data[a].y;\n            });\n            overflowIndexs = sortedIndexs.slice(me.textMaxCount);\n            lMinPercentage = data[overflowIndexs[0]].percentage;\n            lMinY = data[overflowIndexs[0]].y;\n        }\n\n        quadrantsOrder.push(widgetInfo.right.startQuadrant);\n        quadrantsOrder.push(widgetInfo.right.endQuadrant);\n        quadrantsOrder.push(widgetInfo.left.startQuadrant);\n        quadrantsOrder.push(widgetInfo.left.endQuadrant);\n\n        var ySpaceInfo = {}\n\n        for (var i = 0; i < quadrantsOrder.length; i++) {\n            var isEnd = i == 1 || i == 3;\n            me._widgetLabel(quadrantsOrder[i], quadrantInfo[quadrantsOrder[i] - 1].indexs, lMinY, rMinY, isEnd, ySpaceInfo)\n        }\n    }\n\n    _widgetLabel(quadrant, indexs, lmin, rmin, isEnd, ySpaceInfo) {\n        var me = this;\n        var count = 0;\n        let attr = this._coordSystem.dataAttribute;\n        var data = attr.getLayoutData();\n        let labels = [];\n        var minTxtDis = 15;\n        var textOffsetX = 5;\n        let app = this._root.app;\n\n        var currentIndex;\n        var preY, currentY, adjustX, txtDis, bwidth, bheight, bx, by;\n        var yBound, remainingNum, remainingY;\n\n        var clockwise = quadrant == 2 || quadrant == 4;\n        var isleft = quadrant == 2 || quadrant == 3;\n        var isup = quadrant == 3 || quadrant == 4;\n        var minY = isleft ? lmin : rmin;\n\n        //text的绘制顺序做修正，text的Y值在饼图上半部分（isup）时，Y值越小的先画，反之Y值在饼图下部分时，Y值越大的先画.\n        if (indexs.length > 0) {\n            indexs.sort(function (a, b) {\n                return isup ? data[a].edgey - data[b].edgey : data[b].edgey - data[a].edgey;\n            })\n        }\n\n        for (var i = 0; i < indexs.length; i++) {\n            currentIndex = indexs[i];\n            var itemData = data[currentIndex];\n\n            var outCircleRadius = itemData.outRadius + itemData.moveDis;\n\n            //若Y值小于最小值，不画text    \n            if (!itemData.enabled || itemData.y < minY || count >= me.textMaxCount) continue\n            count++;\n            currentY = itemData.edgey;\n            adjustX = Math.abs(itemData.edgex);\n            txtDis = currentY - preY;\n\n            if (i != 0 && ((Math.abs(txtDis) < minTxtDis) || (isup && txtDis < 0) || (!isup && txtDis > 0))) {\n                currentY = isup ? preY + minTxtDis : preY - minTxtDis;\n                if (outCircleRadius - Math.abs(currentY) > 0) {\n                    adjustX = Math.sqrt(Math.pow(outCircleRadius, 2) - Math.pow(currentY, 2));\n                }\n\n                if ((isleft && (-adjustX > itemData.edgex)) || (!isleft && (adjustX < itemData.edgex))) {\n                    adjustX = Math.abs(itemData.edgex);\n                }\n            }\n\n            if (isEnd) {\n                yBound = isleft ? ySpaceInfo.left : ySpaceInfo.right;\n                remainingNum = indexs.length - i;\n                remainingY = isup ? yBound - remainingNum * minTxtDis : yBound + remainingNum * minTxtDis;\n                if ((isup && currentY > remainingY) || !isup && currentY < remainingY) {\n                    currentY = remainingY;\n                }\n            }\n\n            preY = currentY;\n            if (!isEnd) {\n                if (isleft) {\n                    ySpaceInfo.left = preY;\n                } else {\n                    ySpaceInfo.right = preY;\n                }\n            };\n\n            var currentX = (isleft ? -adjustX - textOffsetX : adjustX + textOffsetX);\n            var globalX = currentX + me.origin.x;\n            var globalY = currentY + me.origin.y;\n\n            // if (globalX > me._graphs.root.width || globalY < 0 || globalY > me._graphs.root.height) {\n            //     return;\n            // };\n            // var pathStr = \"M\" + itemData.centerx + \",\" + itemData.centery;\n            // pathStr += \"Q\" + itemData.outx + \",\" + itemData.outy + \",\" + currentX + \",\" + currentY;\n\n            let DIVISONS = 50;\n            let linePoints = [\n                new Vector3(itemData.centerx, 0, itemData.centery),\n                new Vector3(itemData.outx, 0, itemData.outy),\n                new Vector3(currentX, 0, currentY),\n            ]\n\n\n            let curve = new CatmullRomCurve3(linePoints);\n            let points = curve.getSpacedPoints(DIVISONS);\n\n\n            let line = app.createBrokenLine(points, 2, itemData.color, true);\n\n            this.group.add(line);\n\n\n            let label = app.creatSpriteText(itemData.labelText, { fontSize: 14, fillStyle: itemData.color });\n            label[0].userData.position = new Vector3(currentX, 0, currentY);\n            label[0].userData.dir = new Vector3(itemData.outx, 0, itemData.outy).sub(new Vector3(itemData.centerx, 0, itemData.centery))\n            label[0].userData.dir.normalize();\n            labels.push(label[0]);\n        }\n\n        labels.forEach((label, index) => {\n            label.userData.position = label.userData.position\n            label.matrixWorldNeedsUpdate = false;\n            label.onBeforeRender = function (render, scene, camera) {\n                //     //更新坐标后的位置\n                let cross = me._coordSystem.getQuadrantByDir(this.userData.dir.clone());\n                let pos = me._coordSystem.positionToScreen(this.userData.position.clone());\n                //     //屏幕的位置\n                let textSize = this.userData.size;\n                let halfwidth = textSize[0] * 0.5;\n                let halfHeight = textSize[1] * 0.5\n\n                // let camearDir = new Vector3();\n                // camera.getWorldDirection(camearDir);\n                // let isSameDir = zDir.dot(camearDir);\n                //right\n                if (cross.y > 0) {\n                    // let flag = isSameDir < 0 ? 1 : -1;\n                    pos.setX(pos.x - halfwidth - me.label.offset);\n                   // this.position.copy(pos);\n                }\n                //left\n                if (cross.y < 0) {\n                    // let flag = isSameDir < 0 ? -1 : 1;\n                    pos.setX(pos.x + halfwidth + me.label.offset);\n                   // this.position.copy(pos);\n                }\n                // if (me.verticalAlign == 'top') {\n                //     pos.setY(pos.y - halfHeight);\n                //     label.position.copy(pos);\n                // }\n                // if (me.verticalAlign == 'bottom') {\n                //     pos.setY(pos.y + halfHeight);\n                //     label.position.copy(pos);\n                // }\n\n                this.position.copy(pos);\n                this.updateMatrixWorld(true);\n            }\n            this.textGroup.add(label);\n        });\n\n\n    }\n\n    adjustPosition(heights) {\n\n        //判断是否需要调整\n        let isAdjust = _.uniq(heights).length > 1;\n        if (!isAdjust) return;\n        let maxHeight = _.max(heights);\n        this.group.traverse(obj => {\n            if (obj.isMesh && obj.geometry && (obj.geometry.type === \"DoughnutBufferGeometry\" || obj.geometry.type === \"DoughnutGeometry\")) {\n                let offset = (maxHeight - obj.geometry.parameters.height) * 0.5;\n                obj.position.setY(- offset);\n\n            }\n        })\n    }\n    dispose(group) {\n        group = group || this.group;\n        group.traverse((sector) => {\n            if (sector.name && sector.name.includes(Pie._pie_prefix)) {\n                sector.off('mouseover', this.__mouseover);\n                sector.off('mouseout', this.__mouseout);\n\n                sector.off('mousemove', this.__mousemove);\n                sector.off('click', this.__click);\n            }\n        })\n\n\n        super.dispose(group);\n\n    }\n    resetData() {\n        this.dispose();\n        let attr = this._coordSystem.dataAttribute;\n        //根据当前的boundbox,如果用户没有制定半径这里需要计算出来\n        this._computerProps();\n        attr.setOption(Object.assign({}, this));\n        //已经在坐标系中传入构造函数中这里可以不传\n        attr.setDataFrame();\n        this.draw();\n    }\n\n\n}\n\nPie._pie_prefix = \"pie_one_\";\n\nexport default Pie;","import { GraphObject, _ } from '../graph';\nimport { FaceNames } from '../../../constants';\nimport { Vector3, PlaneGeometry, MeshLambertMaterial, MeshBasicMaterial, MeshPhongMaterial, BoxGeometry, Mesh, FrontSide, DoubleSide, Texture, RepeatWrapping, LinearFilter, BufferGeometry, Float32BufferAttribute, Math as _Math, Color } from 'mmgl/src/index';\nimport { RenderFont } from '../../../framework/renderFont';\nimport { hexToRgba } from '../../../../utils/tools'\n\nclass Heatmap extends GraphObject {\n    constructor(chart3d, opt) {\n        super(chart3d);\n\n\n        this.type = \"heatmap\";\n        this._type = \"heatmap3d\";\n\n        this.face = 'front'   //绘制在box的那个面上\n\n        this.area = { //填充\n            shapeType: \"rect\",\n            enabled: 1,\n            fillStyle: null,\n            alpha: 1.0,\n            highColor: 'yellow'\n        };\n        this.label = {\n            enabled: 1,\n            fillStyle: '#333',\n            fontSize: 16,\n        }\n\n        this.gap = 1;\n\n        _.extend(true, this, opt);\n\n        this.name = \"Heatmap_\" + this.face;\n        this.init();\n        this.setGroupName('heatmap_root_' + this.face);\n\n    }\n    init() {\n        this.planeGroup = this._root.app.addGroup({\n            name: 'plane_groups'\n        });\n        this.textGroup = this._root.app.addGroup({\n            name: 'text_groups'\n        });\n        this.group.add(this.planeGroup);\n        this.group.add(this.textGroup);\n\n        let {\n            width,\n            height,\n            depth } = this._coordSystem.getGraphAreaSize();\n\n        if (this.face === FaceNames.BACK) {\n            this.group.rotateY(_Math.degToRad(180));\n            this.group.translateZ(depth);\n            this.group.translateX(-width);\n        }\n\n        if (this.face === FaceNames.TOP) {\n            this.group.rotateX(_Math.degToRad(-90));\n            this.group.translateY(-height * 0.5 - depth * 0.5);\n            this.group.translateZ(height * 0.5 - depth * 0.5);\n        }\n\n        if (this.face === FaceNames.BOTTOM) {\n            this.group.rotateX(_Math.degToRad(90));\n            this.group.translateZ(depth);\n        }\n\n        if (this.face === FaceNames.RIGHT) {\n            this.group.rotateY(_Math.degToRad(90));\n\n            this.group.translateX(-width * 0.5 - depth * 0.5);\n            this.group.translateZ(width * 0.5 - depth * 0.5);\n\n        }\n        if (this.face === FaceNames.LEFT) {\n            this.group.rotateY(_Math.degToRad(-90));\n\n            this.group.translateX(width * 0.5 - height * 0.5);\n            this.group.translateZ(depth * 0.5 + width * 0.5);\n\n        }\n\n        this._initData();\n\n    }\n    _initData() {\n        this.xAttr = this._coordSystem.xAxisAttribute;\n        this.yAttr = this._coordSystem.yAxisAttribute;\n        this.zAttr = this._coordSystem.zAxisAttribute;\n        let xData = this.xAttr.dataSectionLayout;\n        let yData = this.yAttr.dataSectionLayout;\n        let zData = this.zAttr.dataSectionLayout;\n        let data1 = [], data2 = [];\n        let dataFrame = this._root.dataFrame;\n        this.drawData = [];\n        let origin = this._coordSystem.getOriginPosition(this.face.toLowerCase());\n\n\n        if (this.face === FaceNames.FRONT) {\n            data1 = xData.concat([]);\n            data1.attr = this.xAttr;\n            data2 = yData.concat([]);\n            data2.attr = this.yAttr;\n\n        }\n        if (this.face === FaceNames.BACK) {\n            data1 = xData.concat([]);\n            data1.attr = this.xAttr;\n            data2 = yData.concat([]);\n            data2.attr = this.yAttr;\n        }\n\n        if (this.face === FaceNames.TOP) {\n            data1 = xData.concat([]);\n            data1.attr = this.xAttr;\n            data2 = zData.concat([]);\n            data2.attr = this.zAttr;\n        }\n\n        if (this.face === FaceNames.BOTTOM) {\n            data1 = xData.concat([]);\n            data1.attr = this.xAttr;\n            data2 = zData.concat([]);\n            data2.attr = this.zAttr;\n        }\n\n        if (this.face === FaceNames.RIGHT) {\n            data1 = zData.concat([]);\n            data1.attr = this.zAttr;\n            data2 = yData.concat([]);\n            data2.attr = this.yAttr;\n\n        }\n        if (this.face === FaceNames.LEFT) {\n            data1 = zData.concat([]);\n            data1.attr = this.zAttr;\n            data2 = yData.concat([]);\n            data2.attr = this.yAttr;\n\n        }\n\n\n        data1.forEach((xd, xi) => {\n            data2.forEach((yd, yi) => {\n                let rowDatas = dataFrame.getRowDataOf({\n                    [data1.attr.field]: xd.val,\n                    [data2.attr.field]: yd.val\n                });\n                if (!rowDatas.length) return;\n                let score = rowDatas[0][this.field] || 1;\n\n                this.drawData.push({\n                    value: score,\n                    color: hexToRgba(this.colorScheme, score * 0.1),\n                    rowData: rowDatas[0],\n                    field: this.field,\n                    iNode: xi + yi,\n                    face: this.face,\n                    data: rowDatas[0],\n                    pos: new Vector3(xd.pos, yd.pos, 0).add(origin),\n                    width: data1.attr.getCellLength() - this.gap * 2,\n                    height: data2.attr.getCellLength() - this.gap * 2\n                })\n            })\n        })\n    }\n\n\n    draw() {\n        this.dispose();\n        this.drawData.forEach((item, i) => {\n\n            let score = item.data[this.field] || 0.5;\n            let materials = this.getMaterial(this.colorScheme, score);\n\n            let planetGeometry = new PlaneGeometry(item.width, item.height);\n            let plane = new Mesh(planetGeometry, materials);\n            plane.userData.info = item;\n            plane.name = Heatmap._heatmap_plane_prefix + this.face + '_' + i;\n            plane.position.copy(item.pos);\n\n            this.planeGroup.add(plane);\n            //写文字\n            if (item.data[this.field]) {\n                let labels = this.createText(item.data[this.field], { fontSize: this.label.fontSize, fillStyle: this.label.fillStyle });\n                let pos = item.pos.clone();\n\n                labels[0].position.copy(pos);\n                this.textGroup.add(labels[0]);\n            }\n\n\n        });\n\n        this.bindEvent();\n    }\n    bindEvent() {\n        let me = this;\n        let isTrigger = function () {\n            return me._coordSystem.getDirection() === me.face.toLowerCase();\n        }\n        this.__mouseover = function (e) {\n            if (!isTrigger()) return;\n            //let score = this.userData.info.data[me.field] || 1;\n            this.material = me.getMaterial(me.colorScheme, 10, me.area.highColor);\n            this.material.needsUpdate = true;\n            me._root.fire({\n                type: 'tipShow',\n                event: e.event,\n                data: this.userData.info\n            });\n\n            me.fire({ type: 'planeover', data: this.userData.info });\n        };\n        this.__mouseout = function (e) {\n            if (!isTrigger()) return;\n            let score = this.userData.info.data[me.field] || 1;\n            if (!this.userData.select) {\n                this.material = me.getMaterial(me.colorScheme, score);\n                this.material.needsUpdate = true;\n            }\n\n\n            me._root.fire({\n                type: 'tipHide',\n                event: e.event,\n                data: this.userData.info\n            });\n            me.fire({ type: 'planeout', data: this.userData.info });\n        };\n\n        this.__mousemove = function (e) {\n            if (!isTrigger()) return;\n            me._root.fire({\n                type: 'tipMove',\n                event: e.event,\n                data: this.userData.info\n            });\n            me.fire({ type: 'planemove', data: this.userData.info });\n        }\n\n        this.__click = function (e) {\n            if (!isTrigger()) return;\n\n            me.cancelSelect();\n            if (!e.target.userData.select) {\n                this.material = me.getMaterial(me.colorScheme, 10, me.area.highColor);\n                this.material.needsUpdate = true;\n                e.target.userData.select = true;\n            }\n            me._coordSystem.fire({ type: 'planeclick', data: this.userData.info });\n        }\n\n        this.group.traverse(obj => {\n            if (obj.name && obj.name.includes(Heatmap._heatmap_plane_prefix + this.face)) {\n                obj.on('mouseover', this.__mouseover);\n                obj.on('mouseout', this.__mouseout);\n\n                obj.on('mousemove', this.__mousemove);\n                obj.on('click', this.__click);\n            }\n        });\n    }\n    getMaterial(colorScheme, score, highColor) {\n        this.materialMap = this.materialMap || {};\n        let key = highColor ? highColor : colorScheme + score;\n        if (this.materialMap[key]) {\n            return this.materialMap[key];\n        }\n        this.materialMap[key] = new MeshPhongMaterial({\n            color: (highColor ? highColor : colorScheme || 0xffffff),\n            side: FrontSide,\n            transparent: true,\n            opacity: score * 0.1,\n            depthTest: true,\n            depthWrite: false\n\n        });\n        return this.materialMap[key];\n    }\n    createText(texts, fontStyle) {\n        let labels = [];\n\n        let renderFont = new RenderFont(fontStyle);\n\n        if (!_.isArray(texts)) {\n            texts = [texts];\n        }\n\n        let labelInfos = renderFont.drawTexts(texts);\n\n        var position = new Float32Array([\n            - 0.5, - 0.5, 0,\n            0.5, - 0.5, 0,\n            0.5, 0.5, 0,\n            - 0.5, 0.5, 0,\n        ]);\n\n        let texture = new Texture();\n        texture.image = renderFont.canvas;\n\n        texture.wrapS = RepeatWrapping;\n        texture.wrapT = RepeatWrapping;\n        texture.minFilter = LinearFilter;\n        texture.magFilter = LinearFilter;\n        texture.anisotropy = 1;\n        texture.needsUpdate = true;\n\n        let textMatrial = new MeshPhongMaterial({\n            color: fontStyle.fillStyle,\n            map: texture,\n            transparent: true,\n            // polygonOffset: true,\n            // polygonOffsetFactor: 1,\n            // polygonOffsetUnits: 0.5,\n            depthWrite: false\n        });\n\n        let geometry = new BufferGeometry();\n        geometry.setIndex([0, 1, 2, 0, 2, 3]);\n        geometry.addAttribute('position', new Float32BufferAttribute(position, 3, false))\n\n\n        texts.forEach((text, index) => {\n            geometry.addAttribute('uv', new Float32BufferAttribute(labelInfos.UVs[text], 2, false));\n            let realSize = labelInfos.sizes[text];\n            //realSize==[width,height]\n            let scale = new Vector3(realSize[0] / realSize[1], 1, 1);\n            scale.multiplyScalar(realSize[1]);\n            let txtObj = new Mesh(geometry, textMatrial);\n            txtObj.name = \"mesh_text_\" + text + \"_\" + index;\n            txtObj.scale.copy(scale);\n            txtObj.userData = {\n                text: text,\n                size: realSize,\n                maxWidth: labelInfos.maxWidth,\n                maxHeight: labelInfos.maxHeight\n            }\n\n            //默认不进行裁剪\n            txtObj.frustumCulled = false;\n            labels.push(txtObj);\n\n        })\n\n\n        return labels;\n    }\n    cancelSelect() {\n        this.group.traverse(obj => {\n            if (obj.name && obj.name.includes(Heatmap._heatmap_plane_prefix + this.face)) {\n                let score = obj.userData.info.data[this.field] || 1;\n                if (obj.userData.select !== false) {\n                    obj.userData.select = false;\n                    obj.material = this.getMaterial(this.colorScheme, score);\n                    obj.material.needsUpdate = true;\n                }\n            }\n        });\n    }\n    dispose(group) {\n        //删除所有事件\n\n        group = group || this.group;\n        group.traverse(obj => {\n\n            if (obj.name && obj.name.includes(Heatmap._heatmap_plane_prefix + this.face)) {\n                obj.off('mouseover', this.__mouseover);\n                obj.off('mouseout', this.__mouseout);\n\n                obj.off('mousemove', this.__mousemove);\n                obj.off('click', this.__click);\n            }\n        });\n        let highMaterial = this.getMaterial(this.colorScheme, 10, this.area.highColor);\n        highMaterial.dispose();\n        //this.materialMap = null;\n        super.dispose(group);\n    }\n\n    resetData() {\n        this._initData();\n        this.materialMap = {};\n        this.dispose();\n        this.draw();\n    }\n    static get _heatmap_plane_prefix() {\n        return 'heatmap_one_plane_'\n    }\n}\n\nexport default Heatmap;","import { Component, _ } from \"../Component\";\n\nclass Tips extends Component {\n    constructor(chart3d, opt) {\n\n        super(chart3d.currCoord);\n\n        this.name = 'Tips';\n        this.type = 'tips3d';\n        this.tipDomContainer = chart3d.domView;\n        this.cW = chart3d.width;  //容器的width\n        this.cH = chart3d.height;  //容器的height\n\n        this.dW = 0;  //html的tips内容width\n        this.dH = 0;  //html的tips内容Height\n\n        this.borderRadius = \"5px\";  //背景框的 圆角 \n\n        this.sprite = null;\n        this.content = null; //tips的详细内容\n\n        this.fillStyle = \"rgba(255,255,255,0.95)\";//\"#000000\";\n        this.fontColor = \"#999\";\n        this.strokeStyle = \"#ccc\";\n\n        this.position = \"right\"; //在鼠标的左（右）边\n\n        this._tipDom = null;\n\n        this.offsetX = 10; //tips内容到鼠标位置的偏移量x\n        this.offsetY = 10; //tips内容到鼠标位置的偏移量y\n\n        //所有调用tip的 event 上面 要附带有符合下面结构的eventInfo属性\n        //会deepExtend到this.indo上面来\n        this.eventInfo = null;\n\n        this.positionInRange = true; //false; //tip的浮层是否限定在画布区域\n        this.enabled = true; //tips是默认显示的\n\n        this.pointer = 'line'; //tips的指针,默认为直线，可选为：'line' | 'region'(柱状图中一般用region)\n        this.pointerAnim = true;\n        this._tipsPointer = null;\n\n        _.extend(true, this, opt);\n\n\n        // this.sprite = new Canvax.Display.Sprite({\n        //     id: \"TipSprite\"\n        // });\n        // var self = this;\n        this.group.on(\"removed\", () => {\n            this._removeContent();\n            this._tipDom = null;\n        });\n        console.log('tips component loaded!');\n    }\n\n    // static register(opt, app) {\n    //     //所有的tips放在一个单独的tips中\n    //     var _tips = new this(opt, app);\n    //     app.stage.addChild(_tips.sprite);\n    //     app.components.push({\n    //         type: \"tips\",\n    //         id: \"tips\",\n    //         plug: _tips\n    //     });\n    // }\n\n    show(e) {\n\n        if (!this.enabled) return;\n\n        if (e.eventInfo) {\n            this.eventInfo = e.eventInfo;\n\n            // var stage = e.target.getStage();\n            // this.cW = stage.context.width;\n            // this.cH = stage.context.height;\n\n            var content = this._setContent(e);\n            if (content) {\n                this._setPosition(e);\n                //this.sprite.toFront();\n\n                //比如散点图，没有hover到点的时候，也要显示，所有放到最下面\n                //反之，如果只有hover到点的时候才显示point，那么就放这里\n                //this._tipsPointerShow(e);\n            } else {\n                this.hide();\n            }\n\n        };\n\n        //this._tipsPointerShow(e)\n    }\n\n    move(e) {\n        if (!this.enabled) return;\n\n        if (e.eventInfo) {\n            this.eventInfo = e.eventInfo;\n            var content = this._setContent(e);\n            if (content) {\n                this._setPosition(e);\n\n                //比如散点图，没有hover到点的时候，也要显示，所有放到最下面\n                //反之，如果只有hover到点的时候才显示point，那么就放这里\n                //this._tipsPointerMove(e)\n            } else {\n                //move的时候hide的只有dialogTips, pointer不想要隐藏\n                //this.hide();\n                this._hideDialogTips();\n            }\n        };\n        this._tipsPointerMove(e)\n    }\n\n    hide() {\n        if (!this.enabled) return;\n        this._hideDialogTips();\n        //this._tipsPointerHide()\n    }\n\n    _hideDialogTips() {\n        if (this.eventInfo) {\n            this.eventInfo = null;\n            //this.sprite.removeAllChildren();\n            this._removeContent();\n        };\n    }\n\n    /**\n     *@pos {x:0,y:0}\n     */\n    _setPosition(e) {\n        if (!this.enabled) return;\n        if (!this._tipDom) return;\n        var pos = e.pos; // || e.target.localToGlobal(e.point);\n        var x = this._checkX(pos.x + this.offsetX);\n        var y = this._checkY(pos.y + this.offsetY);\n\n        this._tipDom.style.cssText += \";visibility:visible;left:\" + x + \"px;top:\" + y + \"px;-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;\";\n\n        if (this.position == \"left\") {\n            this._tipDom.style.left = this._checkX(pos.x - this.offsetX - this._tipDom.offsetWidth) + \"px\";\n        };\n    }\n\n    /**\n     *content相关-------------------------\n     */\n    _creatTipDom(e) {\n        var me = this;\n        me._tipDom = document.createElement(\"div\");\n        me._tipDom.className = \"chart-tips\";\n        me._tipDom.style.cssText += \"；-moz-border-radius:\" + me.borderRadius + \"; -webkit-border-radius:\" + me.borderRadius + \"; border-radius:\" + me.borderRadius + \";background:\" + me.fillStyle + \";border:1px solid \" + me.strokeStyle + \";visibility:hidden;position:absolute;enabled:inline-block;*enabled:inline;*zoom:1;padding:6px;color:\" + me.fontColor + \";line-height:1.5\"\n        me._tipDom.style.cssText += \"; -moz-box-shadow:1px 1px 3px \" + me.strokeStyle + \"; -webkit-box-shadow:1px 1px 3px \" + me.strokeStyle + \"; box-shadow:1px 1px 3px \" + me.strokeStyle + \";\"\n        me._tipDom.style.cssText += \"; border:none;white-space:nowrap;word-wrap:normal;\"\n        me._tipDom.style.cssText += \"; text-align:left;\"\n       \n        me.tipDomContainer.appendChild(this._tipDom);\n    }\n\n    _removeContent() {\n        if (!this._tipDom) return;\n        this.tipDomContainer.removeChild(this._tipDom);\n        this._tipDom = null;\n    }\n\n    _setContent(e) {\n        var tipxContent = this._getContent(e);\n        if (!tipxContent && tipxContent !== 0) {\n            return;\n        };\n\n        if (!this._tipDom) {\n            this._creatTipDom(e)\n        };\n\n        this._tipDom.innerHTML = tipxContent;\n        this.dW = this._tipDom.offsetWidth;\n        this.dH = this._tipDom.offsetHeight;\n\n        return tipxContent\n    }\n\n    _getContent(e) {\n\n        let tipsContent;\n\n        if (this.content) {\n            tipsContent = _.isFunction(this.content) ? this.content(e.eventInfo) : this.content;\n        } else {\n            tipsContent = this._getDefaultContent(e.eventInfo);\n        };\n\n        return tipsContent;\n    }\n\n    _getDefaultContent(info) {\n        var str = \"\";\n        if (info.title !== undefined && info.title !== null && info.title !== \"\") {\n            str += \"<div style='font-size:14px;border-bottom:1px solid #f0f0f0;padding:4px;margin-bottom:6px;'>\" + info.title + \"</div>\";\n        };\n        var style = info.color || info.fillStyle || info.strokeStyle;\n        // var value = typeof (info.value) == \"object\" ? JSON.stringify(node.value) : numAddSymbol(node.value);\n\n        str += \"<div style='line-height:1.5;font-size:12px;padding:0 4px;'>\"\n        if (style) {\n            str += \"<div style='background:\" + style + \";margin-right:8px;margin-top:5px;width:8px;height:8px;border-radius:4px;overflow:hidden;font-size:0;'></div>\";\n        };\n        _.each(info.rowData, (value, key) => {\n            if (key !== info.field) return;\n            str += '<div><span style=\"margin-right:5px\">- ' + key + ':</span><span>' + value + '</span></div>';\n        })\n\n        str += \"</div>\";\n\n        _.each(info.nodes, function (node, i) {\n            //value 是null 或者 undefined\n            if (!node.value && node.value !== 0) {\n                return;\n            };\n\n\n            if (style) {\n                str += \"<span style='background:\" + style + \";margin-right:8px;margin-top:5px;float:left;width:8px;height:8px;border-radius:4px;overflow:hidden;font-size:0;'></span>\";\n            };\n            str += node.value + \"</div>\";\n        });\n        return str;\n    }\n\n\n    /**\n     *获取back要显示的x\n     *并且校验是否超出了界限\n     */\n    _checkX(x) {\n        if (this.positionInRange) {\n            var w = this.dW + 2; //后面的2 是 两边的 linewidth\n            if (x < 0) {\n                x = 0;\n            }\n            if (x + w > this.cW) {\n                x = this.cW - w;\n            }\n        }\n        return x\n    }\n\n    /**\n     *获取back要显示的x\n     *并且校验是否超出了界限\n     */\n    _checkY(y) {\n        if (this.positionInRange) {\n            var h = this.dH + 2; //后面的2 是 两边的 linewidth\n            if (y < 0) {\n                y = 0;\n            }\n            if (y + h > this.cH) {\n                y = this.cH - h;\n            }\n        }\n        return y\n    }\n\n\n    _tipsPointerShow(e) {\n\n    }\n\n    _tipsPointerHide() {\n        var _coord = this.root._coord;\n        //目前只实现了直角坐标系的tipsPointer\n        if (!_coord || _coord.type != 'rect') return;\n\n        if (!this.pointer || !this._tipsPointer) return;\n        //console.log(\"hide\");\n        this._tipsPointer.destroy();\n        this._tipsPointer = null;\n    }\n\n    _tipsPointerMove(e) {\n\n\n    }\n\n\n}\n\nexport default Tips;","\nimport { Component, _ } from \"../Component\";\nimport { DEFAULT_AXIS } from \"../../framework/coord/cartesian3d\";\nimport { Vector3 } from \"mmgl/src/index\";\n\nclass MarkPoint extends Component {\n    constructor(chart3d, opt) {\n        super(chart3d.currCoord);\n\n        this.opt = opt;\n        \n        this.name = 'MarkPoint';\n        this.type = \"markline\";\n        this.markTo = null;\n        this.active = 'max';   //max,min\n        this.position = null  //点的位置,如果是一个二维数组绘制多个点\n        this.data = null;\n\n        this.label = {\n            fontSize: 50,\n            fillStyle: 'red',\n            strokeStyle: \"#eee\",\n            lineWidth: 2,\n            isBold: true,\n            offset: 50\n\n        }\n\n        this.icon = {\n\n        }\n        _.extend(true, this, opt);\n        this.init();\n\n    }\n\n    init() {\n\n        if (this.markTo) {\n            let zField = this._coordSystem.isExistZAxisField();\n            let zSection = this._coordSystem.zAxisAttribute.getNativeDataSection();\n            let zCusSection = this._coordSystem.zAxisAttribute.getDataSection();\n\n            if (zField) {\n                this.data = [];\n                zSection.forEach((val, i) => {\n                    let _groups = this._root.dataFrame.getRowDataOf({ [zField]: val });\n                    let arr = [];\n                    _groups.forEach(item => {\n                        arr.push(item[this.markTo]);\n                    });\n                    arr.zField = val;\n                    if (zCusSection[i]) {\n                        arr.zCusSection = zCusSection[i];\n                    }\n                    this.data.push(arr);\n                })\n\n            } else {\n                this.data = this._coordSystem.getAxisDataFrame(this.markTo);\n            }\n        }\n        this._coordSystem.group.add(this.group);\n    }\n\n    draw() {\n        let app = this._root.app;\n        let infos = [];\n        //1、如果指定了position是具体的数组,就按照给定的值来绘制\n        //2、如果指定了position是函数,就根据函数来计算\n        //3、如果只制定了markTo,默认返回所有点,active是预设的一些方法,默认是最大最小值\n        let drawPoints = [];\n\n        if (this.position) {\n            if (_.isFunction(this.position)) {\n                drawPoints = this.position.call(this, this.data);\n            }\n            if (_.isArray(this.position)) {\n                drawPoints = drawPoints.concat(this.position);\n            }\n        } else {\n            if (this.active === 'max') {\n                infos = this._getMaxValuePos();\n\n\n            } else if (this.active === 'min') {\n                infos = this._getMinValuePos();\n\n            }\n        }\n\n\n        infos.forEach(item => {\n            let fontStyle = this._getFontStyle(item.zValue);\n\n            let textObj = app.creatSpriteText(item.val, fontStyle);\n            textObj[0].position.fromArray(item.pos);\n            textObj[0].position.setY(fontStyle.offset + textObj[0].position.y);\n            this.group.add(textObj[0]);\n        })\n\n\n    }\n    _getMaxValuePos() {\n        let pos = [], arr, val;\n\n        if (!this.data) {\n            console.error('markpoint组件中请指定markTo字段')\n        } else {\n            if (_.isArray(this.data[0])) {\n                this.data.forEach(dt => {\n                    arr = _.flatten(dt);\n                    val = Math.max.apply(null, arr);\n                    pos.push(this._getValPos(val, dt));\n\n                });\n                return pos;\n            } else {\n                arr = _.flatten(this.data);\n                val = Math.max.apply(null, arr);\n                pos.push(this._getValPos(val));\n                return pos;\n            }\n\n        }\n        return [[0, 0, 0]];\n\n    }\n    _getMinValuePos() {\n        let pos = [], arr, val;\n\n        if (!this.data) {\n            console.error('markpoint组件中请指定markTo字段')\n        } else {\n            if (_.isArray(this.data[0])) {\n                this.data.forEach(dt => {\n                    arr = _.flatten(dt);\n                    val = Math.min.apply(null, arr);\n                    pos.push(this._getValPos(val, dt));\n\n                });\n                return pos;\n            } else {\n                arr = _.flatten(this.data);\n                val = Math.min.apply(null, arr);\n                pos.push(this._getValPos(val));\n                return pos;\n            }\n\n        }\n        return [[0, 0, 0]];\n    }\n    _getValPos(val, dt) {\n        let rootOpt = this._root.opt;\n        let x, y, z;\n        let zField = this._coordSystem.isExistZAxisField();\n        //大数据获取XYZ\n\n        let searchOpt = { [this.markTo]: val };\n        if (dt && zField) {\n            searchOpt[zField] = dt.zField;\n        }\n        let rowData = this._root.dataFrame.getRowDataOf(searchOpt)\n        let attr = this._getYAttribute();\n\n        y = this._coordSystem.getYAxisPosition(val, attr);\n\n        x = this._coordSystem.getXAxisPosition(rowData[0][rootOpt.coord.xAxis.field]);\n        if (rootOpt.coord.zAxis && rootOpt.coord.zAxis.field) {\n            z = this._coordSystem.getZAxisPosition(dt.zCusSection);\n        } else {\n            z = this._coordSystem.getZAxisPosition(this.markTo);\n        }\n\n        return {\n            val: val,\n            pos: [x, y, -z],\n            zValue: dt.zCusSection || this.markTo\n        };\n    }\n    _getYAttribute() {\n        let axisName = DEFAULT_AXIS;\n        this._root.opt.graphs.forEach(item => {\n            if (_.isArray(item.field)) {\n                let _fields = _.flatten(this.field);\n                let idx = _.indexOf(_fields, this.markTo);\n                if (idx !== -1) {\n                    axisName = item.yAxisName;\n                }\n            }\n        })\n        return this._coordSystem.getYAxis(axisName).attr;\n    }\n    _getFontStyle(field) {\n        let _color;\n        if (this.opt.label && this.opt.label.fillStyle) {\n            return this.label;\n        } else {\n\n            _color = this._coordSystem.fieldMap[field].color;\n\n        }\n        return _.extend({}, this.label, { fillStyle: _color });\n\n    }\n\n\n}\n\nexport default MarkPoint;","import { Component, _ } from \"../Component\";\nimport { DUCK } from \"../../constants\";\n\n//const Circle = Canvax.Shapes.Circle\nlet __legend_clickEvent = null;\nclass Legend extends Component {\n    constructor(chart3d, opt) {\n        super(chart3d.currCoord);\n\n\n        this.name = \"Legend\";\n        this.type = \"legend3d\";\n\n        this.mode = 'checkbox';  //checkbox  radio\n\n        this.opt = opt;\n\n        /* data的数据结构为\n        [\n            //descartes中用到的时候还会带入yAxis\n            {name: \"uv\", color: \"#ff8533\", field: '' ...如果手动传入数据只需要前面这三个 enabled: true, ind: 0, } //外部只需要传field和fillStyle就行了 activate是内部状态\n        ]\n        */\n        this.data = null;\n\n        //一般来讲，比如柱状图折线图等，是按照传入的field来分组来设置图例的，那么legend.field都是null\n        //但是还有一种情况就是，是按照同一个field中的数据去重后来分组的，比如散点图中sex属性的男女两个分组作为图例，\n        //以及pie饼图中的每个数据的name字段都是作为一个图例\n        //那么就想要给legend主动设置一个field字段，然后legend自己从dataFrame中拿到这个field的数据来去重，然后分组做为图例\n        //这是一个很屌的设计\n        this.field = null;\n\n        this.margin = {\n            top: 10, right: 10, bottom: 10, left: 10\n        };\n\n        this.icon = {\n            height: 22,\n            width: \"auto\",\n            shapeType: \"circle\",\n            radius: 5,\n            lineWidth: 1,\n            fillStyle: \"#999\",\n            onChecked: function () { },\n            onUnChecked: function () { }\n        };\n\n        this.label = {\n            textAlign: \"left\",\n            textBaseline: \"middle\",\n            fillStyle: \"#333\", //obj.color\n            cursor: \"pointer\",\n            fontSize: 14,\n            format: function (name, info) {\n                return name\n            }\n        };\n\n        //this.onChecked=function(){};\n        //this.onUnChecked=function(){};\n\n        this._labelColor = \"#999\";\n        // this.position = \"right\"; //图例所在的方向top,right,bottom,left\n        this.direction = \"h\"; //横向 top,bottom --> h left,right -- >v\n\n        this.position = DUCK.TOPLEFT; //left top  bottom right  center  topLeft  topRight bottomLeft  bottomRight\n        this.offsetX = 0;\n        this.offsetY = 0;\n\n\n        _.extend(true, this, {\n            icon: {\n                onChecked: function (obj) {\n                },\n                onUnChecked: function (obj) {\n                }\n            }\n        }, opt);\n\n        this.isInit = true;\n\n\n\n    }\n\n    _getLegendData(opt) {\n        var legendData = opt.data;\n        if (legendData) {\n            _.each(legendData, function (item, i) {\n                item.enabled = 'enabled' in item ? item.enabled : true;\n                item.ind = i;\n            });\n            delete opt.data;\n        } else {\n            legendData = this._coordSystem.getLegendData();\n        };\n        return legendData || [];\n    }\n\n    layout() {\n        let currCoord = this._coordSystem;\n\n        // if (this.direction == \"h\") {\n        //     app.padding[this.position] += (this.height + this.margin.top + this.margin.bottom);\n        // } else {\n        //     app.padding[this.position] += (this.width + this.margin.left + this.margin.right);\n        // };\n\n        //default lefttop\n        var pos = {\n            x: currCoord.padding.left + this.margin.left,\n            y: currCoord.padding.top + this.margin.top\n        };\n\n        switch (this.position && this.position.toLocaleLowerCase()) {\n            case DUCK.TOPRIGHT.toLocaleLowerCase():\n                pos.x = currCoord.width - this.width - currCoord.padding.right - this.margin.right;\n                pos.y = currCoord.padding.top + this.margin.top;\n                break;\n            case DUCK.BOTTOMLEFT.toLocaleLowerCase():\n                pos.x = currCoord.padding.left + this.margin.left;\n                pos.y = currCoord.height - currCoord.padding.bottom - this.margin.bottom - this.height;\n                break;\n            case DUCK.BOTTOMRIGHT.toLocaleLowerCase():\n                pos.x = currCoord.width - this.width - currCoord.padding.right - this.margin.right;\n                pos.y = currCoord.height - currCoord.padding.bottom - this.margin.bottom - this.height;\n                break;\n            case DUCK.LEFT.toLocaleLowerCase():\n                pos.x = currCoord.padding.left + this.margin.left;\n                pos.y = (currCoord.height - currCoord.padding.bottom - this.margin.bottom - this.height) * 0.5;\n                break;\n            case DUCK.RIGHT.toLocaleLowerCase():\n                pos.x = currCoord.width - this.width - currCoord.padding.right - this.margin.right;\n                pos.y = (currCoord.height - currCoord.padding.bottom - this.margin.bottom - this.height) * 0.5;\n                break;\n            case DUCK.TOP.toLocaleLowerCase():\n                pos.x = (currCoord.width - this.width - currCoord.padding.right - this.margin.right) * 0.5;\n                pos.y = currCoord.padding.top + this.margin.top;\n                break;\n            case DUCK.BOTTOM.toLocaleLowerCase():\n                pos.x = (currCoord.width - this.width - currCoord.padding.right - this.margin.right) * 0.5;\n                pos.y = currCoord.height - currCoord.padding.bottom - this.margin.bottom - this.height;\n                break;\n            case DUCK.CENTER.toLocaleLowerCase():\n                pos.x = (currCoord.width - this.width - currCoord.padding.right - this.margin.right) * 0.5;\n                pos.y = (currCoord.height - currCoord.padding.bottom - this.margin.bottom - this.height) * 0.5;\n\n        }\n\n        pos.x += this.offsetX;\n        pos.y += this.offsetY;\n        this.pos = pos;\n    }\n\n\n    draw() {\n        this.widget();\n        this.layout();\n        this.group.position.set(this.pos.x, this.pos.y, 0);\n\n    }\n\n    widget() {\n        var me = this;\n        let app = this._root.app;\n        let currCoord = this._coordSystem\n        if (this.isInit) {\n            this.isInit = false;\n            this.data = this._getLegendData(this.opt);\n\n        }\n        var viewWidth = currCoord.width - currCoord.padding.left - currCoord.padding.right - this.margin.left - this.margin.right;\n        var viewHeight = currCoord.height - currCoord.padding.top - currCoord.padding.bottom - this.margin.top - this.margin.bottom;\n        this.dispose();\n        var maxItemWidth = 0;\n        var width = 0, height = 0;\n        var x = 0, y = 0;\n        var rows = 1;\n        var isOver = false; //如果legend过多\n        __legend_clickEvent = this._getInfoHandler.bind(this);\n        _.each(this.data, function (obj, i) {\n\n            if (isOver) return;\n\n            var _icon = app.createCirclePlane(me.icon.radius, {\n                fillStyle: !obj.enabled ? \"#ccc\" : (obj.color || me._labelColor)\n            });\n            _icon.name = Legend._legend_prefix + \"icon_\" + i;\n            _icon.position.set(me.icon.radius, me.icon.height / 3, 0);\n\n            _icon.on(\"click\", __legend_clickEvent);\n\n            let txtArr = app.creatSpriteText(me.label.format(obj.name || obj.label, obj), {\n                fillStyle: me.label.fillStyle,\n                fontSize: me.label.fontSize,\n                textAlign: me.label.textAlign,\n                textBaseline: me.label.textBaseline,\n            });\n            let txt = txtArr[0];\n            txt.name = Legend._legend_prefix + \"txt_\" + i;\n\n            txt.on(\"click\", __legend_clickEvent);\n\n            var txtW = txt.userData.size && txt.userData.size[0];\n            var itemW = txtW + me.icon.radius * 3 + 20;\n            txt.position.set(me.icon.radius * 3 + txtW * 0.5, me.icon.height / 3, 0);\n            maxItemWidth = Math.max(maxItemWidth, itemW);\n\n            var spItemC = {\n                height: me.icon.height\n            };\n            if (me.direction == \"v\") {\n                if (y + me.icon.height > viewHeight) {\n                    if (x > viewWidth) {\n                        isOver = true;\n                        return;\n                    };\n                    x += maxItemWidth;\n                    y = 0;\n                };\n                spItemC.x = x;\n                spItemC.y = y;\n                y += me.icon.height;\n                height = Math.max(height, y);\n            } else {\n                //横向排布\n                if (x + itemW > viewWidth) {\n                    if (me.icon.height * (rows + 1) > viewHeight) {\n                        isOver = true;\n                        return;\n                    }\n                    x = 0;\n                    rows++;\n                };\n\n                spItemC.x = x;\n                spItemC.y = me.icon.height * (rows - 1);\n                x += itemW;\n                width = Math.max(width, x);\n            };\n\n            // var sprite = new Canvax.Display.Sprite({\n            //     id: \"legend_field_\" + i,\n            //     context: spItemC\n            // });\n\n            let _group = app.addGroup({\n                name: Legend._legend_prefix + i\n            });\n            _group.position.set(spItemC.x, spItemC.y, 0);\n            _group.userData.info = obj;\n            _group.add(_icon);\n            _group.add(txt);\n            me.group.add(_group);\n\n            // sprite.context.width = itemW;\n            // me.sprite.addChild(sprite);\n\n            // sprite.on(\"click\", function (e) {\n\n            //     //只有一个field的时候，不支持取消\n            //     if (_.filter(me.data, function (obj) { return obj.enabled }).length == 1) {\n            //         if (obj.enabled) {\n            //             return;\n            //         }\n            //     };\n\n            //     obj.enabled = !obj.enabled;\n\n            //     _icon.context.fillStyle = !obj.enabled ? \"#ccc\" : (obj.color || me._labelColor);\n\n            if (obj.enabled) {\n                me.icon.onChecked(obj);\n            } else {\n                me.icon.onUnChecked(obj);\n            }\n            // });\n\n        });\n\n        if (this.direction == \"h\") {\n            me.width = width;\n            me.height = me.icon.height * rows;\n        } else {\n            me.width = x + maxItemWidth;\n            me.height = height;\n        }\n\n        this._root.labelGroup.add(this.group);\n        //me.width = me.sprite.context.width  = width;\n        //me.height = me.sprite.context.height = height;\n    }\n\n    _getInfoHandler(e) {\n        let info = e.target.parent.userData.info\n        if (this.mode === 'radio') {\n            _.each(this.data, item => {\n                if (item.ind !== info.ind) {\n                    item.enabled = false;\n                } else {\n                    item.enabled = true;\n                }\n            })\n        }\n\n        if (this.mode === 'checkbox') {\n            info.enabled = !info.enabled;\n        }\n\n        if (info) {\n           // this._root.fire({ type: 'redraw', data: info });\n            this._root.fire({ type: 'legendchange', data: info })\n        }\n\n    }\n    dispose(group) {\n        group = group || this.group;\n        this.group.traverse(obj => {\n            if (obj.name.indexOf(Legend._legend_prefix) !== -1) {\n                obj.off('click', __legend_clickEvent);\n            }\n        })\n        super.dispose(group);\n\n    }\n}\nLegend._legend_prefix = \"legend_field_\";\n\n\nexport default Legend;","/**\n * 皮肤组件，不是一个具体的ui组件\n */\nimport { Component, _ } from \"../Component\";\n\nexport default class Theme extends Component {\n    constructor(chart3d, theme) {\n    \n        super(chart3d.currCoord,chart3d);\n\n        this.name = \"Theme\";\n        this.colors = theme || [];\n    }\n\n    set(colors) {\n        this.colors = colors;\n        return this.colors;\n    }\n\n    get(ind) {\n        var colors = this.colors;\n        if (!_.isArray(colors)) {\n            colors = [colors]\n        };\n        return colors;\n    }\n\n    mergeTo(colors) {\n        if (!colors) {\n            colors = [];\n        };\n        for (var i = 0, l = this.colors.length; i < l; i++) {\n            if (colors[i]) {\n                colors[i] = this.colors[i]\n            } else {\n                colors.push(this.colors[i]);\n            }\n        };\n\n        return colors;\n    }\n\n}","\nimport { global } from \"mmvis\"\n\nimport Chart3d from './chart3d';\n\n\n//坐标系\nimport Box from './components/coord/box';\nimport Polar3D from './components/coord/polar3d';\nimport Cube from './components/coord/cube';\n\n//graphs\nimport Bar from \"./components/graphs/bar/index\";\nimport Line from \"./components/graphs/line/index\"\nimport Area from \"./components/graphs/area/index\"\nimport Pie from \"./components/graphs/pie/index\"\nimport Heatmap  from \"./components/graphs/heatmap/index\"\n\n\n// //components\nimport Tips from \"./components/tips/index\"\nimport MarkPoint from \"./components/markpoint/index\"\nimport Legend from \"./components/legend/index\"\nimport Theme from './components/theme/index'\n\n\nglobal.registerComponent(Chart3d, 'chart', 3);\n\n//global.registerComponent( emptyCoord, 'coord' );\nglobal.registerComponent(Box, 'coord', 'box', 3);\nglobal.registerComponent(Polar3D, 'coord', 'polar3d', 3);\nglobal.registerComponent(Cube,'coord','cube',3);\n\nglobal.registerComponent(Bar, 'graphs', 'bar', 3);\nglobal.registerComponent(Line, 'graphs', 'line', 3);\nglobal.registerComponent(Area, 'graphs', 'area', 3);\nglobal.registerComponent(Pie, 'graphs', 'pie', 3);\nglobal.registerComponent(Heatmap, 'graphs', 'heatmap', 3);\n\n\n\nglobal.registerComponent(Theme, 'theme', 3);\nglobal.registerComponent(Tips, 'tips', 3);\nglobal.registerComponent(MarkPoint, 'markpoint', 3);\nglobal.registerComponent(Legend, 'legend', 3);\n\n\n\n\n//皮肤设定begin ---------------\n//如果数据库中有项目皮肤\nvar projectTheme = []; //从数据库中查询出来设计师设置的项目皮肤\nif (projectTheme && projectTheme.length) {\n    global.setGlobalTheme(projectTheme);\n};\n//皮肤设定end -----------------\n\nvar chartx = {\n    options: {}\n};\n\nfor (var p in global) {\n    chartx[p] = global[p];\n};\n\nexport default chartx;\n"],"names":["_","breaker","ArrayProto","Array","prototype","ObjProto","Object","FuncProto","Function","push","slice","concat","toString","hasOwnProperty","nativeForEach","forEach","nativeMap","map","nativeReduce","nativeFilter","filter","nativeEvery","every","nativeSome","some","nativeIndexOf","indexOf","nativeLastIndexOf","nativeIsArray","isArray","nativeKeys","keys","nativeBind","bind","shallowProperty","key","obj","MAX_ARRAY_INDEX","Math","pow","getLength","isArrayLike","collection","length","values","i","TypeError","has","call","each","iterator","context","compact","array","identity","select","results","value","index","list","name","isArguments","isFunction","isFinite","isNaN","parseFloat","isNumber","isBoolean","isNull","isEmpty","isString","isElement","nodeType","isObject","item","isSorted","max","sortedIndex","isWindow","window","flatten","input","shallow","output","apply","all","result","min","Infinity","computed","find","detect","any","without","difference","arguments","rest","contains","uniq","unique","initial","seen","collect","include","target","pluck","random","floor","shuffle","sample","n","guard","clone","last","rand","temp","extend","options","src","copy","deep","undefined","constructor","euclideanModulo","m","DEG2RAD","PI","RAD2DEG","degToRad","degrees","radToDeg","radians","normalizeTickInterval","interval","magnitude","normalized","multiples","correctFloat","num","toPrecision","getLinearTickPositions","arr","$maxPart","$cfg","scale","isInt","initMax","tempmin","tickInterval","log","LN10","ceil","pos","lastPos","roundedMin","roundedMax","tickPositions","pop","dataSection","section","$arr","cloneOptions","opt","cloneData","data","JSON","parse","stringify","is3dOpt","chartx3dCoordTypes","coord","type","getDefaultProps","dProps","p","propertys","default","axis","dataOrg","_opt","_dataSectionLayout","_axisLength","_cellCount","_cellLength","dataSectionGroup","originPos","_originTrans","_min","_max","defaultProps","calculateProps","me","layoutType","origin","_getOriginTrans","getPosOfVal","val","ind","getIndexOfVal","parseInt","getPosOf","_dataSection","_getDataSection","waterLine","symmetric","abs","ai","al","Number","splice","sectionHandler","unshift","_middleweight","_sort","vLen","_oneDimensional","_twoDimensional","il","d","varr","len","up_count","up_i","down_count","down_i","ii","_val","setDataSection","sort","_getSortType","reverse","dsg","middleweight","dMin","dMax","newDS","newDSG","l","preMiddleweight","middleVal","lastMW","dsgLen","groupLength","ds","amountABS","props","prop","_p","layoutData","_pos","_getLayoutDataOf","cellCount","_getCellCount","getValOfInd","_origin","maxGroupDisABS","h","valInd","getCellLength","toFixed","_getValOfInd","getIndexOfPos","org","_ind","cellLength","getCellLengthOfPos","posParseToInt","detail","documentation","parse2MatrixData","newArr","fields","fieldNum","row","f","_rowData","dataFrame","getRowDataAt","_getRowDataAt","getRowDataOf","_getRowDataOf","getFieldData","_getFieldData","getDataOrg","range","start","end","dataZoom","total","a","o","field","b","bl","$field","format","totalList","lev","e","_format","newData","_fieldData","iil","fieldInTotal","expCount","matchNum","fd","RESOLUTION","devicePixelRatio","addOrRmoveEventHand","domHand","ieHand","document","eventDomFn","el","fn","eventFn","event","query","getElementById","offset","box","getBoundingClientRect","doc","ownerDocument","body","docElem","documentElement","clientTop","clientLeft","zoom","bound","right","left","clientWidth","top","pageYOffset","scrollTop","pageXOffset","scrollLeft","addEvent","removeEvent","pageX","clientX","pageY","clientY","createCanvas","_width","_height","id","canvas","createElement","style","position","width","height","setAttribute","createView","view","className","cssText","stageView","domView","appendChild","_colors","colors","set","get","globalAnimationEnabled","create","_data","chart","_destroy","instances","chart_id","dom","getAttribute","_chart","destroy","off","dimension","componentModules","_getComponentModules","Chart","_getComponentModule","draw","on","setGlobalTheme","globalTheme","getGlobalTheme","getChart","chartId","resize","c","getOptions","chartPark_cid","userOptions","JsonSerialize","prefix","suffix","string","replace","decodeURIComponent","components","c_2d","c_3d","comps","modules","toLowerCase","_module","registerComponent","compModule","arg2","_comp","arg1","setAnimationEnabled","bool","getAnimationEnabled","aRound","Cos","cos","Sin","sin","Polar","axisLength","startAngle","allAngles","maxRadius","minRadius","percentage","currentAngle","angle","endAngle","cosV","sinV","midAngle","quadrant","percentFixedNum","outRadius","node","innerRadius","moveDis","enabled","radiusField","radiusValue","getAuadrant","outOffsetx","outOffsety","centerx","centery","outx","outy","edgex","edgey","orginPercentage","isRightSide","assign","labelField","groupField","label","radius","rowData","iNode","_isFiled","ang","angleRatio","_quadrant","r","angleList","points","_a","_r","point","getPointInRadianOfR","checkPointInRect","_tansRoot","x","y","arc","to","differenceR","radian","middleR","pi2","atan2","pi","maxNum","minNum","maxR","Event","evt","eventType","currentTarget","_stopPropagation","stopPropagation","_mouseEvents","_types","split","register","evts","Manager","_eventMap","_setEventEnable","hasInteractionEvent","t","types","_eventEnabled","_addEventListener","_type","listener","addResult","self","_removeEventListener","removeEventListenerByType","li","_removeEventListenerByType","_removeAllEventListeners","_dispatchEvent","parent","_hasEventListener","Dispatcher","params","eType","dispatchEvent","children","getObjectsUnderPoint","preHeartBeat","_heartBeatNum","pregAlpha","$model","globalAlpha","_hoverClass","hoverClone","canvax","getStage","activShape","_transform","getConcatenatedMatrix","_bufferStage","addChildAt","_globalAlpha","removeChildById","overFun","outFun","onceHandle","un","compareDocumentPosition","child","Events","_listeners","listeners","listenerArray","REVISION","version","LinesMode","LineLoopMode","LineStripMode","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","CullFaceNone","CullFaceBack","CullFaceFront","FrontSide","BackSide","DoubleSide","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","DepthFormat","DepthStencilFormat","UVMapping","NoColors","Vector4","z","w","isVector4","scalar","v","elements","divideScalar","multiplyScalar","sqrt","_Math","clamp","arrayMin","arrayMax","isPowerOfTwo","floorPowerOfTwo","LN2","ceilPowerOfTwo","Vector3","isVector3","Error","console","warn","addVectors","s","subVectors","multiplyVectors","q","qx","qy","qz","qw","ix","iy","iz","iw","camera","matrix","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","applyMatrix4","normalize","round","alpha","v1","v2","add","crossVectors","ax","ay","az","bx","by","bz","vector","dot","lengthSq","theta","acos","distanceToSquared","dx","dy","dz","sinPhiRadius","phi","sx","setFromMatrixColumn","sy","sz","fromArray","attribute","getX","getY","getZ","minVal","maxVal","Color","g","isColor","setRGBA","setHex","setStyle","hex","exec","color","setHSL","size","charAt","ColorKeywords","_color","hue","saturation","lightness","delta","getHex","hue2rgb","Matrix4","error","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","te","xAxis","yAxis","zAxis","scaleX","scaleY","scaleZ","euler","isEuler","order","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","_x","_y","_z","_w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","eye","up","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","count","setXYZ","tmp","throwOnDegenerate","t11","t12","t13","t14","det","msg","detInv","scaleXSq","scaleYSq","scaleZSq","tx","ty","quaternion","makeRotationFromQuaternion","setPosition","_decompose","decompose","bottom","near","far","determinant","invSX","invSY","invSZ","setFromRotationMatrix","Box3","isBox3","minX","minY","minZ","maxX","maxY","maxZ","makeEmpty","expandByPoint","center","setFromCenterAndSize","object","expandByObject","optionalTarget","sub","addScalar","sphere","intersectsSphere","plane","normal","constant","distanceToPoint","getBoundingSphere","equals","halfSize","scope","updateMatrixWorld","traverse","geometry","isGeometry","vertices","isBufferGeometry","attributes","fromBufferAttribute","closestPoint","clampPoint","clampedPoint","Sphere","getCenter","getSize","setFromPoints","optionalCenter","maxRadiusSq","distanceTo","radiusSum","deltaLengthSq","expandByScalar","getMaxScaleOnAxis","Matrix3","isMatrix3","applyMatrix3","rotation","cx","cy","matrix4","setFromMatrix4","transpose","v3","v4","m1","Plane","cross","setFromNormalAndCoplanarPoint","inverseNormalLength","negate","line","direction","denominator","startSign","endSign","intersectsPlane","optionalNormalMatrix","normalMatrix","getNormalMatrix","referencePoint","coplanarPoint","Frustum","p0","p1","p2","p3","p4","p5","planes","frustum","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","cb","intersectsObject","sprite","intersectsSprite","negRadius","distance","intersectsBox","boundingSphere","computeBoundingSphere","d1","d2","WebGLExtensions","gl","_gl","extensions","_extension","getExtension","WebGLProperties","_properties","WeakMap","delete","WebGLCapabilities","parameters","maxTextures","getParameter","MAX_TEXTURE_IMAGE_UNITS","maxCombinedTextures","MAX_COMBINED_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","precision","getMaxPrecision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","WebGLUtils","_map","REPEAT","CLAMP_TO_EDGE","MIRRORED_REPEAT","NEAREST","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_BYTE","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","FLOAT","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","DEPTH_COMPONENT","DEPTH_STENCIL","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","ColorBuffer","_currentColorMask","_currentColorClear","colorMask","premultipliedAlpha","clearColor","DepthBuffer","_currentDepthFunc","_currentDepthClear","_currentDepthMask","_switch","Switch","depthTest","enable","DEPTH_TEST","disable","depthMask","depth","clearDepth","depthFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","StencilBuffer","switch","_currentStencilClear","stencilTest","STENCIL_TEST","stencil","clearStencil","capabilitiesSwitch","AttributeSwitch","capabilities","_extensions","maxVertexAttributes","_newAttributes","Uint8Array","_enabledAttributes","_attributeDivisors","meshPerAttribute","enableVertexAttribArray","extension","vertexAttribDivisorANGLE","disableVertexAttribArray","BlendingState","_currentBlendEquation","_currentBlendSrc","_currentBlendDst","_currentBlendEquationAlpha","_currentBlendSrcAlpha","_currentBlendDstAlpha","blending","blendEquation","blendSrc","blendDst","blendEquationAlpha","blendSrcAlpha","blendDstAlpha","utils","BLEND","_currentBlending","_currentPremultipledAlpha","blendEquationSeparate","blendFuncSeparate","blendFunc","convert","TextureState","_capabilities","_currentTextureSlot","_currentBoundTextures","_emptyTextures","TEXTURE_2D","createTexture","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","texture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","texImage2D","webglSlot","_maxTextures","TEXTURE0","activeTexture","webglType","webglTexture","boundTexture","getLineWidthAvailable","lineWidthAvailable","glVersion","VERSION","WebGLState","buffers","_attributeSwitch","_currentProgram","_blendingState","_currentFlipSided","_currentPolygonOffsetFactor","_currentPolygonOffsetUnits","_currentLineWidth","_textureState","_currentViewport","_initState","setClear","setFunc","setFlipSided","setCullFace","CULL_FACE","setBlending","initAttributes","enableAttributeAndDivisor","disableUnusedAttributes","program","useProgram","material","frontFaceCW","depthBuffer","colorBuffer","side","flipSided","transparent","setTest","setMask","depthWrite","colorWrite","setPolygonOffset","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","frontFace","CW","CCW","factor","units","POLYGON_OFFSET_FILL","cullFace","_currentCullFace","BACK","FRONT","FRONT_AND_BACK","lineWidth","viewport","reset","WebGLAttributes","_buffers","bufferType","usage","dynamic","DYNAMIC_DRAW","STATIC_DRAW","buffer","createBuffer","bindBuffer","bufferData","onUploadCallback","typeArray2GLType","bytesPerElement","BYTES_PER_ELEMENT","updateRange","bufferSubData","subarray","isInterleavedBufferAttribute","deleteBuffer","updateBuffer","Float32Array","Float64Array","Uint16Array","Int16Array","Uint32Array","Int32Array","Int8Array","Vector2","isVector2","BufferAttribute","itemSize","isBufferAttribute","vectors","setX","setY","setXY","setZ","setW","Int8BufferAttribute","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float32BufferAttribute","Float64BufferAttribute","DirectGeometry","normals","uvs","uvs2","groups","boundingBox","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","group","materialIndex","faces","face","faceVertexUvs","hasFaceVertexUv","hasFaceVertexUv2","vertexNormals","vertexColors","vertexUvs","computeGroups","bufferGeometryId","BufferGeometry","defineProperty","drawRange","addAttribute","setIndex","isPoints","isLine","positions","copyVector3sArray","copyColorsArray","lineDistances","copyArray","isMesh","fromGeometry","__directGeometry","fromDirectGeometry","copyVector2sArray","direct","elementsNeedUpdate","setFromBufferAttribute","vA","vB","vC","pA","pB","pC","ab","indices","addGroup","j","jl","normalizeNormals","needsUpdate","source","morphAttributes","fire","WebGLGeometries","info","_geometries","_attributes","_info","_wireframeAttributes","buffergeometry","_onGeometryDisposeBind","onGeometryDispose","_bufferGeometry","setFromObject","memory","geometries","geometryAttributes","update","ELEMENT_ARRAY_BUFFER","ARRAY_BUFFER","geometryIndex","remove","UniformsLib","common","diffuse","opacity","uvTransform","lights","ambientLightColor","directionalLights","properties","spotLights","coneCos","penumbraCos","decay","pointLights","dashSize","totalSize","UniformsUtils","merge","uniforms","merged","u","uniforms_src","uniforms_dst","parameter_src","isTexture","ShaderChunk","meshbasic_frag","meshbasic_vert","linedashed_vert","linedashed_frag","points_vert","points_frag","meshlambert_vert","meshlambert_frag","meshphong_vert","meshphong_frag","linemesh_vert","linemesh_frag","sprite_vert","sprite_frag","ShaderLib","basic","vertexShader","fragmentShader","lambert","emissive","phong","specular","shininess","dashed","linemesh","linewidth","resolution","WebGLInfo","textures","render","frame","calls","triangles","lines","programs","autoReset","mode","instanceCount","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","LINES","LINE_STRIP","LINE_LOOP","POINTS","textureId","Texture","image","mapping","wrapS","wrapT","magFilter","minFilter","anisotropy","encoding","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","onUpdate","setUvTransform","WebGLUniforms","renderer","_program","_renderer","seq","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","addr","getUniformLocation","parseUniform","setValue","StructuredUniform","SingleUniform","activeInfo","cache","getSingularSetter","PureArrayUniform","getPureArraySetter","setValue1f","setValue2fv","setValue3fv","setValue4fv","setValue2fm","setValue3fm","setValue4fm","setValueT1","setValue1i","setValue2iv","setValue3iv","setValue4iv","setValue1fv","setValueV2a","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","setValue1iv","container","RePathPart","path","pathLength","lastIndex","match","matchEnd","idIsIndex","subscript","addUniform","next","uniformObject","arrayCacheF32","arrayCacheI32","arrayUtils","mat2array","mat3array","mat4array","emptyTexture","arraysEqual","nBlocks","blockSize","firstElem","toArray","allocTexUnits","allocTextureUnit","uniform1f","uniform1i","uniform2f","uniform2fv","uniform3f","uniform3fv","uniform4f","uniform4fv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","unit","setTexture2D","uniform2iv","uniform3iv","uniform4iv","uniform1fv","uniform1iv","addLineNumbers","join","WebGLShader","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","programIdCount","WebGLProgram","code","_defines","defines","_cachedUniforms","_cachedAttributes","usedTimes","_init","customExtensions","generateExtensions","customDefines","generateDefines","createProgram","prefixVertex","prefixFragment","isRawShaderMaterial","filterEmptyLine","doubleSided","sizeAttenuation","replaceLightNums","unrollLoops","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","linkProgram","programLog","getProgramInfoLog","trim","vertexLog","fragmentLog","LINK_STATUS","getError","VALIDATE_STATUS","deleteShader","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","deleteProgram","numDirLights","numSpotLights","numPointLights","pattern","snippet","unroll","rendererExtensions","chunks","derivatives","envMapCubeUV","bumpMap","normalMap","flatShading","fragDepth","logarithmicDepthBuffer","drawBuffers","shaderTextureLOD","envMap","WebGLPrograms","_shaderIDs","MeshBasicMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","MeshLambertMaterial","MeshPhongMaterial","LineMeshMaterial","SpriteMaterial","shaderID","alphaTest","directional","spot","parameterNames","pl","programInfo","WebGLRenderList","renderItems","renderItemsIndex","opaque","renderItem","renderOrder","painterSortStable","reversePainterSortStable","WebGLRenderLists","_lists","scene","hash","WebGLBufferRenderer","_mode","drawArrays","drawArraysInstancedANGLE","maxInstancedCount","WebGLObjects","_infoRender","_updateList","updateFromObject","WebGLIndexedBufferRenderer","_bytesPerElement","drawElements","drawElementsInstancedANGLE","WebGLTextures","state","_state","_utils","slot","textureProperties","__version","complete","_uploadTexture","__webglTexture","__webglInit","_onTextureDisposeBind","onTextureDispose","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","clampToMaxSize","textureNeedsPowerOfTwo","makePowerOfTwo","isPowerOfTwoImage","glFormat","glType","setTextureParameters","mipmap","__maxMipLevel","textureNeedsGenerateMipmaps","generateMipmap","deallocateTexture","maxSize","createElementNS","getContext","drawImage","_canvas","HTMLImageElement","HTMLCanvasElement","ImageBitmap","textureType","TEXTURE_WRAP_S","TEXTURE_WRAP_T","filterFallback","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","__image__webglTextureCube","deleteTexture","LOG2E","webglLightsCount","_webGLLightsVector3","WebGLLights","UniformsCache","ambient","shadows","directionalLength","pointLength","spotLength","viewMatrix","matrixWorldInverse","light","intensity","isAmbientLight","isDirectionalLight","setFromMatrixPosition","transformDirection","isSpotLight","penumbra","isPointLight","dispose","_lights","WebGLRenderState","lightsArray","spritesArray","shadowsArray","setup","WebGLRenderStates","_renderStates","renderState","WebGLRenderer","domElement","_isContextLost","_pixelRatio","_currentRenderList","_currentRenderState","_currentMaterialId","_currentCamera","_currClearColor","_sortObjects","_projScreenMatrix","_vector3","_frustum","autoClear","autoClearColor","autoClearDepth","autoClearStencil","_initGLContext","_context","_alpha","_depth","_stencil","_antialias","antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","contextAttributes","_onContextLostBind","onContextLost","_onContextRestoreBind","onContextRestore","addEventListener","_viewport","_textures","_objects","_programCache","_renderLists","_bufferRenderer","_indexedBufferRenderer","setSize","updateStyle","setViewport","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clear","forceClear","isCamera","_currentGeometryProgram","autoUpdate","setFromMatrix","init","projectObject","setupLights","background","setClearColor","opaqueObjects","transparentObjects","renderObjects","fog","setMaterial","setProgram","updateBuffers","isUpdateBuffers","rangeFactor","wireframe","getWireframeAttribute","setupVertexAttributes","dataCount","rangeStart","rangeCount","groupStart","groupCount","drawStart","drawEnd","drawCount","setLineWidth","wireframeLinewidth","setMode","drawMode","isSprite","isInstancedBufferGeometry","renderInstances","textureUnit","_usedTextureUnits","removeEventListener","geometryProgram","sortObjects","visible","isLight","pushLight","frustumCulled","groupMaterial","renderList","renderObject","onBeforeRender","modelViewMatrix","renderBufferDirect","onAfterRender","materialProperties","lightsHash","initMaterial","refreshProgram","refreshMaterial","refreshLights","p_uniforms","getUniforms","m_uniforms","updateLineMaterial","gapSize","markUniformsLightsNeedsUpdate","isMeshBasicMaterial","isLineBasicMaterial","isMeshLambertMaterial","isMeshPhongMaterial","isPointsMaterial","isLineMeshMaterial","isSpriteMaterial","emissiveIntensity","updateMatrix","isLineDashedMaterial","upload","uniformsList","isShaderMaterial","uniformsNeedUpdate","getParameters","getProgramCode","programChange","_onMaterialDispose","onMaterialDispose","releaseMaterialProgramReference","onBeforeCompile","acquireProgram","programAttributes","getAttributes","progUniforms","seqWithValue","deallocateMaterial","releaseProgram","materialDefaultAttributeValues","defaultAttributeValues","programAttribute","geometryAttribute","stride","isInstancedInterleavedBuffer","enableAttribute","vertexAttribPointer","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","preventDefault","parametersÎ","EPS","Quaternion","onChangeCallback","c1","c2","c3","s1","s2","s3","halfAngle","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","vFrom","vTo","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","qb","cosHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","callback","qa","qm","slerp","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","EPSILON","tDir","Euler","_order","DefaultOrder","asin","newOrder","setFromEuler","setFromQuaternion","optionalResult","RotationOrders","object3DId","Object3D","DefaultUp","onRotationChange","onQuaternionChange","onChange","defineProperties","enumerable","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","castShadow","receiveShadow","userData","lookAt","isObject3D","force","premultiply","setFromAxisAngle","compose","rotateOnAxis","q1","multiply","applyQuaternion","translateOnAxis","getWorldQuaternion","getWorldScale","getWorldDirection","Scene","isScene","Group","segCenter","segDir","diff","edge1","edge2","Ray","ray","at","directionDistance","distanceSqToPoint","v0","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","b1","s0","sqrDist","extDet","invDet","tca","radius2","thc","t0","t1","distanceToPlane","distToPoint","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectBox","backfaceCulling","DdN","sign","DdQxE2","DdE1xQ","QdN","startP","startEnd","Line3","clampToLine","startEnd2","startEnd_startP","closestPointToPointParameter","v5","v6","edgeList","projectedPoint","Triangle","i0","i1","i2","triangle","setFromCoplanarPoints","barycoordFromPoint","containsPoint","minDistance","projectPoint","closestPointToPoint","resultLengthSq","getNormal","dot00","dot01","dot02","dot11","dot12","denom","invDenom","getBarycoord","uv1","uv2","uv3","getUV","barycoord","addScaledVector","targetLengthSq","Face3","materialId","Material","newValue","currentValue","setValues","Mesh","raycaster","intersects","raycast","inverseMatrix","tempA","tempB","tempC","uvA","uvB","uvC","intersectionPoint","intersectionPointWorld","uvIntersection","checkIntersection","intersect","intersectTriangle","checkBufferGeometryIntersection","uv","intersection","faceIndex","fvA","fvB","fvC","isMultiMaterial","fl","faceMaterial","morphTargets","morphInfluences","morphTargetInfluences","tl","influence","targets","uvs_f","Line","computeLineDistances","positionAttribute","linePrecision","precisionSq","vStart","vEnd","interSegment","interRay","step","distSq","distanceSqToSegment","nbVertices","InstancedBufferGeometry","coFnstructor","InterleavedBuffer","isInterleavedBuffer","index1","index2","InstancedInterleavedBuffer","InterleavedBufferAttribute","interleavedBuffer","LineSegmentsGeometry","isLineSegmentsGeometry","instanceStart","instanceEnd","applyToBufferAttribute","computeBoundingBox","instanceBuffer","getTypeArray","setColors","instanceColorBuffer","union","typeArray","LineGeometry","isLineGeometry","createVertexs","setPositions","Vertexs","Line2","instanceDistanceBuffer","Points","threshold","localThreshold","localThresholdSq","intersectPoint","testPoint","rayPointDistanceSq","distanceToRay","Sprite","float32Array","worldScale","mvPosition","alignedPosition","rotatedPosition","viewWorldMatrix","transformVertex","vertexPosition","setFromMatrixScale","TextTexture","autoRedraw","text","textAlign","textLineHeight","fontFamily","fontSize","fontWeight","fontVariant","fontStyle","fillStyle","strokeStyle","padding","_text","_textAlign","_textLineHeight","_fontFamily","_fontSize","_fontWeight","_fontVariant","_fontStyle","_fillStyle","_lineWidth","_strokeStyle","_padding","redraw","ctx","clearRect","textWidthInPixels","textHeightInPixels","imageWidthInPixels","imageHeightInPixels","font","textBaseline","paddingInPixels","lineWidthInPixels","miterLimit","textLines","strokeText","fillText","textLineHeightInPixels","_textLines","_textWidthInPixels","_redrawIfAuto","Lang_isUndefined","getTextLines","getFont","getTextWidth","textHeight","imageHeight","Array_max","measureText","reduce","maxValue","TextSprite","redrawInterval","lastRedraw","actualFontSize","fontsize","screenHeight","clientHeight","isOrthographicCamera","cameraWorldPos","dist","vFOV","fov","tan","imageAspect","Date","now","setTimeout","redrawNow","updateScale","getOptimalFontSize","objectWorldPosition","cameraWorldPosition","objectWorldScale","getWorldPosition","heightInPixels","geometryId","Geometry","lineDistancesNeedUpdate","tempNormals","tempUVs","tempUVs2","addFace","computeFaceNormals","verticesMap","changes","precisionPoints","faceIndicesToRemove","idx","k","kl","uvsCopy","CircleGeometry","segments","thetaStart","thetaLength","fromBufferGeometry","CircleBufferGeometry","mergeVertices","vertex","segment","PlaneGeometry","widthSegments","heightSegments","PlaneBufferGeometry","width_half","height_half","gridX","gridY","gridX1","gridY1","segment_width","segment_height","BoxGeometry","depthSegments","BoxBufferGeometry","numberOfVertices","buildPlane","udir","vdir","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","vertexCounter","SphereGeometry","phiStart","phiLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","CylinderGeometry","radiusTop","radiusBottom","radialSegments","openEnded","CylinderBufferGeometry","indexArray","halfHeight","generateTorso","generateCap","slope","indexRow","sinTheta","cosTheta","centerIndexStart","centerIndexEnd","DoughnutGeometry","outterRadius","DoughnutBufferGeometry","generateTopBottom","generateOutterInnerFace","generateLeftRightFace","uvLen","faceNum","indexLen","generateFace","no","vec1","vec2","Earcut","triangulate","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","invSize","eliminateHoles","earcutLinked","clockwise","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","prev","ear","pass","indexCurve","stop","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","zOrder","nextZ","prevZ","locallyInside","isValidDiagonal","splitPolygon","queue","getLeftmost","compareX","eliminateHole","hole","findHoleBridge","hx","hy","mx","my","tanMin","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","q2","inside","a2","Node","b2","an","bp","sum","ShapeUtils","contour","isClockWise","pts","triangulateShape","holes","removeDupEndPts","addContour","holeIndex","ExtrudeGeometry","shapes","ExtrudeBufferGeometry","verticesArray","uvArray","shape","addShape","computeVertexNormals","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","extrudeByPath","splineTube","binormal","position2","getSpacedPoints","computeFrenetFrames","ahole","hl","shapePoints","extractPoints","scalePt2","pt","vec","bs","vert","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","binormals","buildLidFaces","buildSideFaces","layer","f3","layeroffset","sidewalls","sl","slen1","slen2","f4","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","ShaderMaterial","index0AttributeName","RawShaderMaterial","Light","SpotLight","power","PointLight","DirectionalLight","AmbientLight","Camera","PerspectiveCamera","aspect","focus","updateProjectionMatrix","isPerspectiveCamera","makePerspective","OrthographicCamera","makeOrthographic","InstancedBufferAttribute","Raycaster","LOD","coords","matrix1","recursive","intersectObject","ascSort","objects","Spherical","other","vec3","Curve","arcLengthDivisions","getUtoTmapping","getPoint","divisions","getPointAt","lengths","getLengths","cacheArcLengths","current","arcLengths","targetArcLength","low","high","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","t2","pt1","pt2","getTangent","closed","tangents","mat","getTangentAt","MAX_VALUE","tz","makeRotationAxis","metadata","generator","json","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","twoPi","deltaAngle","samePoints","ArcCurve","aRadius","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","t3","pz","CatmullRomCurve3","curveType","intPoint","weight","CatmullRom","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","CubicBezierCurve","CubicBezierCurve3","LineCurve","tangent","LineCurve3","QuadraticBezierCurve","QuadraticBezierCurve3","SplineCurve","CurvePath","curves","autoClose","curve","startPoint","endPoint","Curves","curveLengths","getCurveLengths","lens","cacheLengths","sums","isEllipseCurve","isLineCurve","isSplineCurve","getPoints","Path","currentPoint","moveTo","lineTo","aCPx","aCPy","aCP1x","aCP1y","aCP2x","aCP2y","npts","absarc","absellipse","firstPoint","lastPoint","Shape","holesPts","getPointsHoles","ShapePath","subPaths","currentPath","quadraticCurveTo","bezierCurveTo","splineThru","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","newShapeHoles","mainIdx","tmpPoints","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","tmpHoles","Framework","layers","isUpdate","currTick","getTime","lastTick","_groups","_InitRender","innerHTML","_scene","_camera","frameId","requestAnimationFrame","renderFrame","cancelAnimationFrame","_group","_modelMatrix","MainView","LabelView","DUCK","LEFT","TOP","BOTTOM","RIGHT","CENTER","TOPLEFT","TOPRIGHT","BOTTOMLEFT","BOTTOMRIGHT","FaceNames","View","_frameWork","viewName","controls","setFromCamera","setPixelRatio","ops","controlsOpts","boxWidth","boxHeight","maxDistance","currPosition","ratio","cameraPosition","frustumSize","_computeCanvasContent","RenderFont","isBold","lineHeight","defaultTextureWidth","_reNewline","txt","save","_getTextWidth","_getTextLines","restore","_getTextHeight","maxWidth","currentLineWidth","texts","maxHeight","canvasWidth","canvasHeight","sizes","cw","ch","getTextHeight","st","_h","_h2","UVs","computeUvsAndCanvasSize","setCanvasSize","webkitImageSmoothingEnabled","txtArr","_debug","getBasicMaterial","primitive","createBox","materials","transMatrix","mesh","vertice","makeScale","createCylinder","part","createCone","createPlane","showInfo","faceStyle","planetGeometry","planeMesh","rotateY","rotateX","createCommonLine","lineStyle","lineType","createLine","origins","lineColor","matLine","triangleVertices","lineMeshGeometry","createBrokenLine","createCirclePlane","createSphere","creatSpriteText","labels","renderFont","labelInfos","drawTexts","spriteMatrial","realSize","createPolygonPlane","positionBuffer","createArea","extrudeSettings","create3DPie","PI2","_startAngle","_endAngle","Application","viewWidth","viewHeight","_framework","resetState","_view","addView","vw","removeView","stopRenderFrame","forceRender","InertialSystem","root","_root","boundbox","baseBoundbox","front","back","fieldMap","app","setDefaultOpts","opts","ambientlight","rootStage","_getWorldPos","lightColor","pointLight","_renderView","renderView","beta","newPos","orbitControls","filterEnabledFields","getFieldMap","v_f","searchOpt","maps","zField","isExistZAxisField","fieldsMap","isGraphsField","graphs","gopt","_boundbox","boxDepth","_hypotenuse","_ratio","getVisableSize","posWorld","getBoundbox","positionToScreen","screenToWorld","pCam","localToWorld","project","getCamera","mouse","unproject","Component","_coordSystem","__mouseover","__mouseout","__mousemove","__click","removes","isLine2","AxisLine","getOrigin","TickLines","lineLength","_tickLine","_dir","_offset","dataSectionLayout","_length","initData","TickTexts","fontColor","verticalAlign","_tickTextGroup","autoUpdataPostion","updataOrigins","_updataOrigins","align","_axis","_attribute","zDir","getDirection","getTextPos","textSize","halfwidth","camearDir","isSameDir","flag","numAddSymbol","$n","$s","symbol","String","findNearPointX","hexToRgba","YAxis","_cartesionUI","_coord","title","content","shapeType","_title","tickLine","axisLine","boundboxSize","axisAttribute","yAxisAttribute","_getName","_initData","_onChangeBind","_initModules","_axisDir","coordBoundBox","_tickLineDir","_faceInfo","getFaceInfo","_offsetZ","_axisLine","setOrigin","setDir","getYAxisPosition","_tickText","setTextAlign","setLength","setGroupName","_formatTextSection","labelGroup","_size","getDataSection","_textElements","_getFormatText","res","resetData","XAxis","evade","isH","rotaion","maxTxtH","animation","ceilWidth","trimLayout","xAxisAttribute","_verticalAlign","getXAxisPosition","setVerticalAlign","ZAxis","zAxisAttribute","zCustomSection","_setZAxisWidth","_offsetX","getZAxisPosition","_maxTextWidth","getRatioPixelToWorldByOrigin","Grid","fill","leftGroup","rightGroup","topGroup","bottomGroup","frontGroup","backGroup","getYAxis","attr","leftFace","rightFace","topFace","bottomFace","backFace","xSection","yAttribute","ySection","zSection","LinesVectors","posY","posZ","posX","drawFace","drawLine","Cartesian3DUI","_xAxis","_yAxis","_zAxis","_grid","horizontal","yAxisGroup","updateOrigin","lfb","lft","lbb","lbt","rfb","rft","rbb","rbt","coordCenter","cameraPos","AxisAttribute","exclude","setMiddleweight","_nativeDataSection","_fieldArr","_axisAttributeDs","maxSegment","minSegmentUser","_axisAtt","_currSection","_section","newSection","Axis","DEFAULT_AXIS","Cartesian3D","_coordUI","_zSection","_nyarr","yopt","_used","getYaxisInfo","_axisName","yAxisName","_tAxis","_yAxisNew","widith","getAxisDataFrame","setAxisLength","axisCount","_yAxisAttr","resetDataSection","_sectionZ","yOps","_setFieldsMap","addLights","bindEvent","fieldInd","getTheme","_set","_zField","clone_fields","zDataSection","zf","zInd","yAxisAttr","yOpts","setWorldOrigin","updatePosition","dataLenX","dataLenY","dataLenZ","interaction","offsetX","offsetY","resetDataOrg","changeEvent","startEvent","endEvent","MOUSE","MIDDLE","STATE","NONE","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_DOLLY_PAN","OrbitControls","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","UP","mouseButtons","ORBIT","ZOOM","target0","position0","zoom0","_spherical","_sphericalDelta","_scale","_panOffset","_zoomChanged","_rotateStart","_rotateEnd","_rotateDelta","_panStart","_panEnd","_panDelta","_dollyStart","_dollyEnd","_dollyDelta","_onContextMenubind","onContextMenu","_onMouseDownbind","onMouseDown","_onMouseWheelbind","onMouseWheel","_onTouchStartbind","onTouchStart","_onTouchEndbind","onTouchEnd","_onTouchMove","onTouchMove","_onKeyDownbind","onKeyDown","quat","setFromUnitVectors","quatInverse","inverse","lastPosition","lastQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","makeSafe","setFromSpherical","_onMouseMovebind","_onMouseUpbind","getZoomScale","rotateUp","panLeft","objectMatrix","panUp","pan","deltaX","deltaY","element","targetDistance","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","panDelta","handleTouchEnd","button","onMouseMove","onMouseUp","Interaction","currMousePos","views","_onMousedownbind","onMousedown","_onMouseupbind","onMouseup","isChange","isMouseOver","isMouseOut","isClick","EVENT","getScene","getRaycaster","intersectObjects","__tipShowEvent","__tipHideEvent","__tipMoveEvent","__redraw","_cid","Chart3d","domSelector","canvasDom","currCoord","_createDomContainer","inited","initComponent","DefaultControls","rendererOpts","controlOpts","_initRenderer","labelView","onStart","_onRenderBeforeBind","onRenderBefore","_onRenderAfterBind","onRenderAfter","launch","_onWindowResizeBind","_Coord","theme","addComponent","setCoord","comp","cmp","instance","drawUI","initCoordUI","drawComponent","getComponents","TipName","tips","getComponent","xField","show","eventInfo","hide","_domSelector","viewObj","$","offsetWidth","offsetHeight","addObject","setBackground","setControls","createScreenProject","removeChild","global","_theme","dataTrigger","saveState","Box","gamma","PolarAttribute","maxHeigh","minHeight","getLayoutData","heightField","heightValue","heightSort","Cylindrical","rAxis","arrs","_fs","dataAttribute","registTheme","legendData","dirVectir","setDataFrame","Polar3D","_cubeUI","maxLength","getAxisAttribute","CubeUI","faceAxises","axises","getOriginPosition","setAxisDir","setTickLineDir","initModules","getGraphAreaSize","setVisibel","Î","Cube","availableGraph","widthRatio","heightRatio","defaultCoord","second","duration","rotationCube","cancelSelect","mapEvent","controlOps","alphaEnd","betaEnd","gammaEnd","hideAxis","alphaStart","spanAlpha","betaStart","spanBeta","gammaStart","spanGamma","currDate","showAxis","dirLights","rotateZ","att","GraphObject","chart3d","enabledField","drawData","_zfield","getEnabledFields","_cartesian3DProcess","yAxisInfo","zData","zNativeSection","setEnabledField","hLen","getNativeDataSection","generate","zVal","rowDataOf","orgVal","op","hData","tempBarData","_vValue","vSectionData","_dataLen","vCount","proportion","team","ti","_field","_getTargetField","xVal","startY","nodeData","NodeData","vInd","groupIndex","dataLen","fromPos","vValue","zNode","getColor","fieldName","zd","Bar","materialType","allGroupNum","barsGroup","getCeilSize","fieldObj","MaterilBar","_getColor","dataProcess","span","getMaterial","_bar_prefix","tempColor","getHSL","includes","_flattenField","rectData","__lastPosition","smooth","icon","corner","lineGroup","areaGroup","nodeGroup","DIVISONS","bottomPoints","poses","curve2","pointArr","polygon","currObj","locPos","worldToLocal","currPoint","currInfo","textTempGroup","isScale","Area","thickness","textGroup","_area_prefix","_showLabel","labelInfo","textObj","Pie","offsetRadius","isInit","_computerProps","setOption","heights","labelText","_getLabelText","sector","_pie_prefix","adjustPosition","_startWidgetLabel","nodes","isChecked","orgPosition","itemData","str","rMinPercentage","lMinPercentage","rMinY","lMinY","quadrantsOrder","quadrantInfo","indexs","widgetInfo","startQuadrant","endQuadrant","cur","overflowIndexs","sortedIndexs","textMaxCount","ySpaceInfo","isEnd","_widgetLabel","lmin","rmin","minTxtDis","textOffsetX","currentIndex","preY","currentY","adjustX","txtDis","yBound","remainingNum","remainingY","isleft","isup","outCircleRadius","currentX","globalX","globalY","linePoints","getQuadrantByDir","isAdjust","Heatmap","highColor","gap","planeGroup","translateZ","translateX","translateY","xAttr","yAttr","zAttr","xData","yData","data1","data2","xd","xi","yd","yi","rowDatas","score","colorScheme","_heatmap_plane_prefix","createText","isTrigger","materialMap","textMatrial","txtObj","highMaterial","Tips","tipDomContainer","cW","cH","dW","dH","borderRadius","_tipDom","positionInRange","pointer","pointerAnim","_tipsPointer","_removeContent","_setContent","_setPosition","_hideDialogTips","_tipsPointerMove","_checkX","_checkY","tipxContent","_getContent","_creatTipDom","tipsContent","_getDefaultContent","MarkPoint","markTo","active","zCusSection","infos","drawPoints","_getMaxValuePos","_getMinValuePos","_getFontStyle","zValue","dt","_getValPos","rootOpt","_getYAttribute","axisName","_fields","__legend_clickEvent","Legend","margin","onChecked","onUnChecked","cursor","_labelColor","getLegendData","toLocaleLowerCase","widget","layout","_getLegendData","maxItemWidth","rows","isOver","_getInfoHandler","_icon","_legend_prefix","txtW","itemW","spItemC","Theme","projectTheme","chartx"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,IAAIA,CAAC,GAAG,EAAR;EACA,IAAIC,OAAO,GAAG,EAAd;EACA,IAAIC,UAAU,GAAGC,KAAK,CAACC,SAAvB;EAAA,IAAkCC,QAAQ,GAAGC,MAAM,CAACF,SAApD;EAAA,IAA+DG,SAAS,GAAGC,QAAQ,CAACJ,SAApF;;EAIA,IACEK,IAAI,GAAGP,UAAU,CAACO,IADpB;EAAA,IAEEC,KAAK,GAAGR,UAAU,CAACQ,KAFrB;EAAA,IAGEC,MAAM,GAAGT,UAAU,CAACS,MAHtB;EAAA,IAIEC,QAAQ,GAAGP,QAAQ,CAACO,QAJtB;EAAA,IAKEC,cAAc,GAAGR,QAAQ,CAACQ,cAL5B;EAQA;;AACA,MACEC,aAAa,GAAGZ,UAAU,CAACa,OAD7B;EAAA,IAEEC,SAAS,GAAGd,UAAU,CAACe,GAFzB;EAAA,IAGEC,AAEAC,YAAY,GAAGjB,UAAU,CAACkB,MAL5B;EAAA,IAMEC,WAAW,GAAGnB,UAAU,CAACoB,KAN3B;EAAA,IAOEC,UAAU,GAAGrB,UAAU,CAACsB,IAP1B;EAAA,IAQEC,aAAa,GAAGvB,UAAU,CAACwB,OAR7B;EAAA,IASEC,AACAC,aAAa,GAAGzB,KAAK,CAAC0B,OAVxB;EAAA,IAWEC,UAAU,GAAGxB,MAAM,CAACyB,IAXtB;EAAA,IAYEC,UAAU,GAAGzB,SAAS,CAAC0B,IAZzB;;EAeA,IAAIC,eAAe,GAAG,SAAlBA,eAAkB,CAAUC,GAAV,EAAe;EACnC,SAAO,UAAUC,GAAV,EAAe;EACpB,WAAOA,GAAG,IAAI,IAAP,GAAc,KAAK,CAAnB,GAAuBA,GAAG,CAACD,GAAD,CAAjC;EACD,GAFD;EAGD,CAJD;;EAKA,IAAIE,eAAe,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,EAAZ,IAAkB,CAAxC;EACA,IAAIC,SAAS,GAAGN,eAAe,CAAC,QAAD,CAA/B;;EACA,IAAIO,WAAW,GAAG,SAAdA,WAAc,CAAUC,UAAV,EAAsB;EACtC,MAAIC,MAAM,GAAGH,SAAS,CAACE,UAAD,CAAtB;EACA,SAAO,OAAOC,MAAP,IAAiB,QAAjB,IAA6BA,MAAM,IAAI,CAAvC,IAA4CA,MAAM,IAAIN,eAA7D;EACD,CAHD;;EAOArC,CAAC,CAAC4C,MAAF,GAAW,UAAUR,GAAV,EAAe;EACxB,MAAIL,IAAI,GAAG/B,CAAC,CAAC+B,IAAF,CAAOK,GAAP,CAAX;;EACA,MAAIO,MAAM,GAAGZ,IAAI,CAACY,MAAlB;EACA,MAAIC,MAAM,GAAG,IAAIzC,KAAJ,CAAUwC,MAAV,CAAb;;EACA,OAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,MAApB,EAA4BE,CAAC,EAA7B,EAAiC;EAC/BD,IAAAA,MAAM,CAACC,CAAD,CAAN,GAAYT,GAAG,CAACL,IAAI,CAACc,CAAD,CAAL,CAAf;EACD;;EACD,SAAOD,MAAP;EACD,CARD;;EAUA5C,CAAC,CAAC+B,IAAF,GAASD,UAAU,IAAI,UAAUM,GAAV,EAAe;EACpC,MAAIA,GAAG,KAAK9B,MAAM,CAAC8B,GAAD,CAAlB,EAAyB,MAAM,IAAIU,SAAJ,CAAc,gBAAd,CAAN;EACzB,MAAIf,IAAI,GAAG,EAAX;;EACA,OAAK,IAAII,GAAT,IAAgBC,GAAhB;EAAqB,QAAIpC,CAAC,CAAC+C,GAAF,CAAMX,GAAN,EAAWD,GAAX,CAAJ,EAAqBJ,IAAI,CAACtB,IAAL,CAAU0B,GAAV;EAA1C;;EACA,SAAOJ,IAAP;EACD,CALD;;EAOA/B,CAAC,CAAC+C,GAAF,GAAQ,UAAUX,GAAV,EAAeD,GAAf,EAAoB;EAC1B,SAAOtB,cAAc,CAACmC,IAAf,CAAoBZ,GAApB,EAAyBD,GAAzB,CAAP;EACD,CAFD;;EAIA,IAAIc,IAAI,GAAGjD,CAAC,CAACiD,IAAF,GAASjD,CAAC,CAACe,OAAF,GAAY,UAAUqB,GAAV,EAAec,QAAf,EAAyBC,OAAzB,EAAkC;EAChE,MAAIf,GAAG,IAAI,IAAX,EAAiB;;EACjB,MAAItB,aAAa,IAAIsB,GAAG,CAACrB,OAAJ,KAAgBD,aAArC,EAAoD;EAClDsB,IAAAA,GAAG,CAACrB,OAAJ,CAAYmC,QAAZ,EAAsBC,OAAtB;EACD,GAFD,MAEO,IAAIf,GAAG,CAACO,MAAJ,KAAe,CAACP,GAAG,CAACO,MAAxB,EAAgC;EACrC,SAAK,IAAIE,CAAC,GAAG,CAAR,EAAWF,MAAM,GAAGP,GAAG,CAACO,MAA7B,EAAqCE,CAAC,GAAGF,MAAzC,EAAiDE,CAAC,EAAlD,EAAsD;EACpD,UAAIK,QAAQ,CAACF,IAAT,CAAcG,OAAd,EAAuBf,GAAG,CAACS,CAAD,CAA1B,EAA+BA,CAA/B,EAAkCT,GAAlC,MAA2CnC,OAA/C,EAAwD;EACzD;EACF,GAJM,MAIA;EACL,QAAI8B,IAAI,GAAG/B,CAAC,CAAC+B,IAAF,CAAOK,GAAP,CAAX;;EACA,SAAK,IAAIS,CAAC,GAAG,CAAR,EAAWF,MAAM,GAAGZ,IAAI,CAACY,MAA9B,EAAsCE,CAAC,GAAGF,MAA1C,EAAkDE,CAAC,EAAnD,EAAuD;EACrD,UAAIK,QAAQ,CAACF,IAAT,CAAcG,OAAd,EAAuBf,GAAG,CAACL,IAAI,CAACc,CAAD,CAAL,CAA1B,EAAqCd,IAAI,CAACc,CAAD,CAAzC,EAA8CT,GAA9C,MAAuDnC,OAA3D,EAAoE;EACrE;EACF;EACF,CAdD;;EAgBAD,CAAC,CAACoD,OAAF,GAAY,UAAUC,KAAV,EAAiB;EAC3B,SAAOrD,CAAC,CAACoB,MAAF,CAASiC,KAAT,EAAgBrD,CAAC,CAACsD,QAAlB,CAAP;EACD,CAFD;;EAIAtD,CAAC,CAACoB,MAAF,GAAWpB,CAAC,CAACuD,MAAF,GAAW,UAAUnB,GAAV,EAAec,QAAf,EAAyBC,OAAzB,EAAkC;EACtD,MAAIK,OAAO,GAAG,EAAd;EACA,MAAIpB,GAAG,IAAI,IAAX,EAAiB,OAAOoB,OAAP;EACjB,MAAIrC,YAAY,IAAIiB,GAAG,CAAChB,MAAJ,KAAeD,YAAnC,EAAiD,OAAOiB,GAAG,CAAChB,MAAJ,CAAW8B,QAAX,EAAqBC,OAArB,CAAP;EACjDF,EAAAA,IAAI,CAACb,GAAD,EAAM,UAAUqB,KAAV,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;EACtC,QAAIT,QAAQ,CAACF,IAAT,CAAcG,OAAd,EAAuBM,KAAvB,EAA8BC,KAA9B,EAAqCC,IAArC,CAAJ,EAAgDH,OAAO,CAAC/C,IAAR,CAAagD,KAAb;EACjD,GAFG,CAAJ;EAGA,SAAOD,OAAP;EACD,CARD;;EAUAP,IAAI,CAAC,CAAC,WAAD,EAAc,UAAd,EAA0B,QAA1B,EAAoC,QAApC,EAA8C,MAA9C,EAAsD,QAAtD,CAAD,EAAkE,UAAUW,IAAV,EAAgB;EACpF5D,EAAAA,CAAC,CAAC,OAAO4D,IAAR,CAAD,GAAiB,UAAUxB,GAAV,EAAe;EAC9B,WAAOxB,QAAQ,CAACoC,IAAT,CAAcZ,GAAd,KAAsB,aAAawB,IAAb,GAAoB,GAAjD;EACD,GAFD;EAGD,CAJG,CAAJ;;EAOA5D,CAAC,CAAC6D,WAAF,GAAgB,UAAUzB,GAAV,EAAe;EAC7B,SAAO,CAAC,EAAEA,GAAG,IAAIpC,CAAC,CAAC+C,GAAF,CAAMX,GAAN,EAAW,QAAX,CAAT,CAAR;EACD,CAFD;;;AAKA,EAAiC;EAC/BpC,EAAAA,CAAC,CAAC8D,UAAF,GAAe,UAAU1B,GAAV,EAAe;EAC5B,WAAO,OAAOA,GAAP,KAAe,UAAtB;EACD,GAFD;EAGD;;EAEDpC,CAAC,CAAC+D,QAAF,GAAa,UAAU3B,GAAV,EAAe;EAC1B,SAAO2B,QAAQ,CAAC3B,GAAD,CAAR,IAAiB,CAAC4B,KAAK,CAACC,UAAU,CAAC7B,GAAD,CAAX,CAA9B;EACD,CAFD;;EAIApC,CAAC,CAACgE,KAAF,GAAU,UAAU5B,GAAV,EAAe;EACvB,SAAOpC,CAAC,CAACkE,QAAF,CAAW9B,GAAX,KAAmBA,GAAG,IAAI,CAACA,GAAlC;EACD,CAFD;;EAIApC,CAAC,CAACmE,SAAF,GAAc,UAAU/B,GAAV,EAAe;EAC3B,SAAOA,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,KAAxB,IAAiCxB,QAAQ,CAACoC,IAAT,CAAcZ,GAAd,KAAsB,kBAA9D;EACD,CAFD;;EAIApC,CAAC,CAACoE,MAAF,GAAW,UAAUhC,GAAV,EAAe;EACxB,SAAOA,GAAG,KAAK,IAAf;EACD,CAFD;;EAIApC,CAAC,CAACqE,OAAF,GAAY,UAAUjC,GAAV,EAAe;EACzB,MAAIA,GAAG,IAAI,IAAX,EAAiB,OAAO,IAAP;EACjB,MAAIpC,CAAC,CAAC6B,OAAF,CAAUO,GAAV,KAAkBpC,CAAC,CAACsE,QAAF,CAAWlC,GAAX,CAAtB,EAAuC,OAAOA,GAAG,CAACO,MAAJ,KAAe,CAAtB;;EACvC,OAAK,IAAIR,GAAT,IAAgBC,GAAhB;EAAqB,QAAIpC,CAAC,CAAC+C,GAAF,CAAMX,GAAN,EAAWD,GAAX,CAAJ,EAAqB,OAAO,KAAP;EAA1C;;EACA,SAAO,IAAP;EACD,CALD;;EAOAnC,CAAC,CAACuE,SAAF,GAAc,UAAUnC,GAAV,EAAe;EAC3B,SAAO,CAAC,EAAEA,GAAG,IAAIA,GAAG,CAACoC,QAAJ,KAAiB,CAA1B,CAAR;EACD,CAFD;;EAIAxE,CAAC,CAAC6B,OAAF,GAAYD,aAAa,IAAI,UAAUQ,GAAV,EAAe;EAC1C,SAAOxB,QAAQ,CAACoC,IAAT,CAAcZ,GAAd,KAAsB,gBAA7B;EACD,CAFD;;EAIApC,CAAC,CAACyE,QAAF,GAAa,UAAUrC,GAAV,EAAe;EAC1B,SAAOA,GAAG,KAAK9B,MAAM,CAAC8B,GAAD,CAArB;EACD,CAFD;;EAIApC,CAAC,CAACsD,QAAF,GAAa,UAAUG,KAAV,EAAiB;EAC5B,SAAOA,KAAP;EACD,CAFD;;EAIAzD,CAAC,CAAC0B,OAAF,GAAY,UAAU2B,KAAV,EAAiBqB,IAAjB,EAAuBC,QAAvB,EAAiC;EAC3C,MAAItB,KAAK,IAAI,IAAb,EAAmB,OAAO,CAAC,CAAR;EACnB,MAAIR,CAAC,GAAG,CAAR;EAAA,MAAWF,MAAM,GAAGU,KAAK,CAACV,MAA1B;;EACA,MAAIgC,QAAJ,EAAc;EACZ,QAAI,OAAOA,QAAP,IAAmB,QAAvB,EAAiC;EAC/B9B,MAAAA,CAAC,GAAI8B,QAAQ,GAAG,CAAX,GAAerC,IAAI,CAACsC,GAAL,CAAS,CAAT,EAAYjC,MAAM,GAAGgC,QAArB,CAAf,GAAgDA,QAArD;EACD,KAFD,MAEO;EACL9B,MAAAA,CAAC,GAAG7C,CAAC,CAAC6E,WAAF,CAAcxB,KAAd,EAAqBqB,IAArB,CAAJ;EACA,aAAOrB,KAAK,CAACR,CAAD,CAAL,KAAa6B,IAAb,GAAoB7B,CAApB,GAAwB,CAAC,CAAhC;EACD;EACF;;EACD,MAAIpB,aAAa,IAAI4B,KAAK,CAAC3B,OAAN,KAAkBD,aAAvC,EAAsD,OAAO4B,KAAK,CAAC3B,OAAN,CAAcgD,IAAd,EAAoBC,QAApB,CAAP;;EACtD,SAAO9B,CAAC,GAAGF,MAAX,EAAmBE,CAAC,EAApB;EAAwB,QAAIQ,KAAK,CAACR,CAAD,CAAL,KAAa6B,IAAjB,EAAuB,OAAO7B,CAAP;EAA/C;;EACA,SAAO,CAAC,CAAR;EACD,CAdD;;EAgBA7C,CAAC,CAAC8E,QAAF,GAAa,UAAU1C,GAAV,EAAe;EAC1B,SAAOA,GAAG,IAAI,IAAP,IAAeA,GAAG,IAAIA,GAAG,CAAC2C,MAAjC;EACD,CAFD;;;EAKA,IAAIC,OAAO,GAAG,SAAVA,OAAU,CAAUC,KAAV,EAAiBC,OAAjB,EAA0BC,MAA1B,EAAkC;EAC9C,MAAID,OAAO,IAAIlF,CAAC,CAACsB,KAAF,CAAQ2D,KAAR,EAAejF,CAAC,CAAC6B,OAAjB,CAAf,EAA0C;EACxC,WAAOlB,MAAM,CAACyE,KAAP,CAAaD,MAAb,EAAqBF,KAArB,CAAP;EACD;;EACDhC,EAAAA,IAAI,CAACgC,KAAD,EAAQ,UAAUxB,KAAV,EAAiB;EAC3B,QAAIzD,CAAC,CAAC6B,OAAF,CAAU4B,KAAV,KAAoBzD,CAAC,CAAC6D,WAAF,CAAcJ,KAAd,CAAxB,EAA8C;EAC5CyB,MAAAA,OAAO,GAAGzE,IAAI,CAAC2E,KAAL,CAAWD,MAAX,EAAmB1B,KAAnB,CAAH,GAA+BuB,OAAO,CAACvB,KAAD,EAAQyB,OAAR,EAAiBC,MAAjB,CAA7C;EACD,KAFD,MAEO;EACLA,MAAAA,MAAM,CAAC1E,IAAP,CAAYgD,KAAZ;EACD;EACF,GANG,CAAJ;EAOA,SAAO0B,MAAP;EACD,CAZD;;;EAeAnF,CAAC,CAACgF,OAAF,GAAY,UAAU3B,KAAV,EAAiB6B,OAAjB,EAA0B;EACpC,SAAOF,OAAO,CAAC3B,KAAD,EAAQ6B,OAAR,EAAiB,EAAjB,CAAd;EACD,CAFD;;EAIAlF,CAAC,CAACsB,KAAF,GAAUtB,CAAC,CAACqF,GAAF,GAAQ,UAAUjD,GAAV,EAAec,QAAf,EAAyBC,OAAzB,EAAkC;EAClDD,EAAAA,QAAQ,KAAKA,QAAQ,GAAGlD,CAAC,CAACsD,QAAlB,CAAR;EACA,MAAIgC,MAAM,GAAG,IAAb;EACA,MAAIlD,GAAG,IAAI,IAAX,EAAiB,OAAOkD,MAAP;EACjB,MAAIjE,WAAW,IAAIe,GAAG,CAACd,KAAJ,KAAcD,WAAjC,EAA8C,OAAOe,GAAG,CAACd,KAAJ,CAAU4B,QAAV,EAAoBC,OAApB,CAAP;EAC9CF,EAAAA,IAAI,CAACb,GAAD,EAAM,UAAUqB,KAAV,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;EACtC,QAAI,EAAE2B,MAAM,GAAGA,MAAM,IAAIpC,QAAQ,CAACF,IAAT,CAAcG,OAAd,EAAuBM,KAAvB,EAA8BC,KAA9B,EAAqCC,IAArC,CAArB,CAAJ,EAAsE,OAAO1D,OAAP;EACvE,GAFG,CAAJ;EAGA,SAAO,CAAC,CAACqF,MAAT;EACD,CATD;;;EAiBAtF,CAAC,CAACuF,GAAF,GAAQ,UAAUnD,GAAV,EAAec,QAAf,EAAyBC,OAAzB,EAAkC;EACxC,MAAI,CAACD,QAAD,IAAalD,CAAC,CAAC6B,OAAF,CAAUO,GAAV,CAAb,IAA+BA,GAAG,CAAC,CAAD,CAAH,KAAW,CAACA,GAAG,CAAC,CAAD,CAA9C,IAAqDA,GAAG,CAACO,MAAJ,GAAa,KAAtE,EAA6E;EAC3E,WAAOL,IAAI,CAACiD,GAAL,CAASH,KAAT,CAAe9C,IAAf,EAAqBF,GAArB,CAAP;EACD;;EACD,MAAI,CAACc,QAAD,IAAalD,CAAC,CAACqE,OAAF,CAAUjC,GAAV,CAAjB,EAAiC,OAAOoD,QAAP;EACjC,MAAIF,MAAM,GAAG;EAAEG,IAAAA,QAAQ,EAAED,QAAZ;EAAsB/B,IAAAA,KAAK,EAAE+B;EAA7B,GAAb;EACAvC,EAAAA,IAAI,CAACb,GAAD,EAAM,UAAUqB,KAAV,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;EACtC,QAAI8B,QAAQ,GAAGvC,QAAQ,GAAGA,QAAQ,CAACF,IAAT,CAAcG,OAAd,EAAuBM,KAAvB,EAA8BC,KAA9B,EAAqCC,IAArC,CAAH,GAAgDF,KAAvE;EACAgC,IAAAA,QAAQ,GAAGH,MAAM,CAACG,QAAlB,KAA+BH,MAAM,GAAG;EAAE7B,MAAAA,KAAK,EAAEA,KAAT;EAAgBgC,MAAAA,QAAQ,EAAEA;EAA1B,KAAxC;EACD,GAHG,CAAJ;EAIA,SAAOH,MAAM,CAAC7B,KAAd;EACD,CAXD;EAaA;EACA;;;EACAzD,CAAC,CAAC4E,GAAF,GAAQ,UAAUxC,GAAV,EAAec,QAAf,EAAyBC,OAAzB,EAAkC;EACxC,MAAI,CAACD,QAAD,IAAalD,CAAC,CAAC6B,OAAF,CAAUO,GAAV,CAAb,IAA+BA,GAAG,CAAC,CAAD,CAAH,KAAW,CAACA,GAAG,CAAC,CAAD,CAA9C,IAAqDA,GAAG,CAACO,MAAJ,GAAa,KAAtE,EAA6E;EAC3E,WAAOL,IAAI,CAACsC,GAAL,CAASQ,KAAT,CAAe9C,IAAf,EAAqBF,GAArB,CAAP;EACD;;EACD,MAAI,CAACc,QAAD,IAAalD,CAAC,CAACqE,OAAF,CAAUjC,GAAV,CAAjB,EAAiC,OAAO,CAACoD,QAAR;EACjC,MAAIF,MAAM,GAAG;EAAEG,IAAAA,QAAQ,EAAE,CAACD,QAAb;EAAuB/B,IAAAA,KAAK,EAAE,CAAC+B;EAA/B,GAAb;EACAvC,EAAAA,IAAI,CAACb,GAAD,EAAM,UAAUqB,KAAV,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;EACtC,QAAI8B,QAAQ,GAAGvC,QAAQ,GAAGA,QAAQ,CAACF,IAAT,CAAcG,OAAd,EAAuBM,KAAvB,EAA8BC,KAA9B,EAAqCC,IAArC,CAAH,GAAgDF,KAAvE;EACAgC,IAAAA,QAAQ,GAAGH,MAAM,CAACG,QAAlB,KAA+BH,MAAM,GAAG;EAAE7B,MAAAA,KAAK,EAAEA,KAAT;EAAgBgC,MAAAA,QAAQ,EAAEA;EAA1B,KAAxC;EACD,GAHG,CAAJ;EAIA,SAAOH,MAAM,CAAC7B,KAAd;EACD,CAXD;;;EAcAzD,CAAC,CAAC0F,IAAF,GAAS1F,CAAC,CAAC2F,MAAF,GAAW,UAAUvD,GAAV,EAAec,QAAf,EAAyBC,OAAzB,EAAkC;EACpD,MAAImC,MAAJ;EACAM,EAAAA,GAAG,CAACxD,GAAD,EAAM,UAAUqB,KAAV,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;EACrC,QAAIT,QAAQ,CAACF,IAAT,CAAcG,OAAd,EAAuBM,KAAvB,EAA8BC,KAA9B,EAAqCC,IAArC,CAAJ,EAAgD;EAC9C2B,MAAAA,MAAM,GAAG7B,KAAT;EACA,aAAO,IAAP;EACD;EACF,GALE,CAAH;EAMA,SAAO6B,MAAP;EACD,CATD;EAWA;EACA;;;EACA,IAAIM,GAAG,GAAG5F,CAAC,CAACwB,IAAF,GAASxB,CAAC,CAAC4F,GAAF,GAAQ,UAAUxD,GAAV,EAAec,QAAf,EAAyBC,OAAzB,EAAkC;EAC3DD,EAAAA,QAAQ,KAAKA,QAAQ,GAAGlD,CAAC,CAACsD,QAAlB,CAAR;EACA,MAAIgC,MAAM,GAAG,KAAb;EACA,MAAIlD,GAAG,IAAI,IAAX,EAAiB,OAAOkD,MAAP;EACjB,MAAI/D,UAAU,IAAIa,GAAG,CAACZ,IAAJ,KAAaD,UAA/B,EAA2C,OAAOa,GAAG,CAACZ,IAAJ,CAAS0B,QAAT,EAAmBC,OAAnB,CAAP;EAC3CF,EAAAA,IAAI,CAACb,GAAD,EAAM,UAAUqB,KAAV,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;EACtC,QAAI2B,MAAM,KAAKA,MAAM,GAAGpC,QAAQ,CAACF,IAAT,CAAcG,OAAd,EAAuBM,KAAvB,EAA8BC,KAA9B,EAAqCC,IAArC,CAAd,CAAV,EAAqE,OAAO1D,OAAP;EACtE,GAFG,CAAJ;EAGA,SAAO,CAAC,CAACqF,MAAT;EACD,CATD;;;EAWAtF,CAAC,CAAC6F,OAAF,GAAY,UAAUxC,KAAV,EAAiB;EAC3B,SAAOrD,CAAC,CAAC8F,UAAF,CAAazC,KAAb,EAAoB3C,KAAK,CAACsC,IAAN,CAAW+C,SAAX,EAAsB,CAAtB,CAApB,CAAP;EACD,CAFD;EAIA;;;EACA/F,CAAC,CAAC8F,UAAF,GAAe,UAAUzC,KAAV,EAAiB;EAC9B,MAAI2C,IAAI,GAAGrF,MAAM,CAACyE,KAAP,CAAalF,UAAb,EAAyBQ,KAAK,CAACsC,IAAN,CAAW+C,SAAX,EAAsB,CAAtB,CAAzB,CAAX;EACA,SAAO/F,CAAC,CAACoB,MAAF,CAASiC,KAAT,EAAgB,UAAUI,KAAV,EAAiB;EAAE,WAAO,CAACzD,CAAC,CAACiG,QAAF,CAAWD,IAAX,EAAiBvC,KAAjB,CAAR;EAAkC,GAArE,CAAP;EACD,CAHD;EAKA;EACA;;;EACAzD,CAAC,CAACkG,IAAF,GAASlG,CAAC,CAACmG,MAAF,GAAW,UAAU9C,KAAV,EAAiBsB,QAAjB,EAA2BzB,QAA3B,EAAqCC,OAArC,EAA8C;EAChE,MAAInD,CAAC,CAAC8D,UAAF,CAAaa,QAAb,CAAJ,EAA4B;EAC1BxB,IAAAA,OAAO,GAAGD,QAAV;EACAA,IAAAA,QAAQ,GAAGyB,QAAX;EACAA,IAAAA,QAAQ,GAAG,KAAX;EACD;;EACD,MAAIyB,OAAO,GAAGlD,QAAQ,GAAGlD,CAAC,CAACiB,GAAF,CAAMoC,KAAN,EAAaH,QAAb,EAAuBC,OAAvB,CAAH,GAAqCE,KAA3D;EACA,MAAIG,OAAO,GAAG,EAAd;EACA,MAAI6C,IAAI,GAAG,EAAX;EACApD,EAAAA,IAAI,CAACmD,OAAD,EAAU,UAAU3C,KAAV,EAAiBC,KAAjB,EAAwB;EACpC,QAAIiB,QAAQ,GAAI,CAACjB,KAAD,IAAU2C,IAAI,CAACA,IAAI,CAAC1D,MAAL,GAAc,CAAf,CAAJ,KAA0Bc,KAAxC,GAAiD,CAACzD,CAAC,CAACiG,QAAF,CAAWI,IAAX,EAAiB5C,KAAjB,CAA9D,EAAuF;EACrF4C,MAAAA,IAAI,CAAC5F,IAAL,CAAUgD,KAAV;EACAD,MAAAA,OAAO,CAAC/C,IAAR,CAAa4C,KAAK,CAACK,KAAD,CAAlB;EACD;EACF,GALG,CAAJ;EAMA,SAAOF,OAAP;EACD,CAhBD;EAkBA;;;EACAxD,CAAC,CAACiB,GAAF,GAAQjB,CAAC,CAACsG,OAAF,GAAY,UAAUlE,GAAV,EAAec,QAAf,EAAyBC,OAAzB,EAAkC;EACpD,MAAIK,OAAO,GAAG,EAAd;EACA,MAAIpB,GAAG,IAAI,IAAX,EAAiB,OAAOoB,OAAP;EACjB,MAAIxC,SAAS,IAAIoB,GAAG,CAACnB,GAAJ,KAAYD,SAA7B,EAAwC,OAAOoB,GAAG,CAACnB,GAAJ,CAAQiC,QAAR,EAAkBC,OAAlB,CAAP;EACxCF,EAAAA,IAAI,CAACb,GAAD,EAAM,UAAUqB,KAAV,EAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;EACtCH,IAAAA,OAAO,CAAC/C,IAAR,CAAayC,QAAQ,CAACF,IAAT,CAAcG,OAAd,EAAuBM,KAAvB,EAA8BC,KAA9B,EAAqCC,IAArC,CAAb;EACD,GAFG,CAAJ;EAGA,SAAOH,OAAP;EACD,CARD;EAUA;;;EACAxD,CAAC,CAACiG,QAAF,GAAajG,CAAC,CAACuG,OAAF,GAAY,UAAUnE,GAAV,EAAeoE,MAAf,EAAuB;EAC9C,MAAIpE,GAAG,IAAI,IAAX,EAAiB,OAAO,KAAP;EACjB,MAAIX,aAAa,IAAIW,GAAG,CAACV,OAAJ,KAAgBD,aAArC,EAAoD,OAAOW,GAAG,CAACV,OAAJ,CAAY8E,MAAZ,KAAuB,CAAC,CAA/B;EACpD,SAAOZ,GAAG,CAACxD,GAAD,EAAM,UAAUqB,KAAV,EAAiB;EAC/B,WAAOA,KAAK,KAAK+C,MAAjB;EACD,GAFS,CAAV;EAGD,CAND;;;EASAxG,CAAC,CAACyG,KAAF,GAAU,UAAUrE,GAAV,EAAeD,GAAf,EAAoB;EAC5B,SAAOnC,CAAC,CAACiB,GAAF,CAAMmB,GAAN,EAAW,UAAUqB,KAAV,EAAiB;EAAE,WAAOA,KAAK,CAACtB,GAAD,CAAZ;EAAoB,GAAlD,CAAP;EACD,CAFD;;;EAKAnC,CAAC,CAAC0G,MAAF,GAAW,UAAUnB,GAAV,EAAeX,GAAf,EAAoB;EAC7B,MAAIA,GAAG,IAAI,IAAX,EAAiB;EACfA,IAAAA,GAAG,GAAGW,GAAN;EACAA,IAAAA,GAAG,GAAG,CAAN;EACD;;EACD,SAAOA,GAAG,GAAGjD,IAAI,CAACqE,KAAL,CAAWrE,IAAI,CAACoE,MAAL,MAAiB9B,GAAG,GAAGW,GAAN,GAAY,CAA7B,CAAX,CAAb;EACD,CAND;;;EASAvF,CAAC,CAAC4G,OAAF,GAAY,UAAUxE,GAAV,EAAe;EACzB,SAAOpC,CAAC,CAAC6G,MAAF,CAASzE,GAAT,EAAcoD,QAAd,CAAP;EACD,CAFD;;EAIAxF,CAAC,CAAC6G,MAAF,GAAW,UAAUzE,GAAV,EAAe0E,CAAf,EAAkBC,KAAlB,EAAyB;EAClC,MAAID,CAAC,IAAI,IAAL,IAAaC,KAAjB,EAAwB;EACtB,QAAI,CAACtE,WAAW,CAACL,GAAD,CAAhB,EAAuBA,GAAG,GAAGpC,CAAC,CAAC4C,MAAF,CAASR,GAAT,CAAN;EACvB,WAAOA,GAAG,CAACpC,CAAC,CAAC0G,MAAF,CAAStE,GAAG,CAACO,MAAJ,GAAa,CAAtB,CAAD,CAAV;EACD;;EACD,MAAIkE,MAAM,GAAGpE,WAAW,CAACL,GAAD,CAAX,GAAmBpC,CAAC,CAACgH,KAAF,CAAQ5E,GAAR,CAAnB,GAAkCpC,CAAC,CAAC4C,MAAF,CAASR,GAAT,CAA/C;EACA,MAAIO,MAAM,GAAGH,SAAS,CAACqE,MAAD,CAAtB;EACAC,EAAAA,CAAC,GAAGxE,IAAI,CAACsC,GAAL,CAAStC,IAAI,CAACiD,GAAL,CAASuB,CAAT,EAAYnE,MAAZ,CAAT,EAA8B,CAA9B,CAAJ;EACA,MAAIsE,IAAI,GAAGtE,MAAM,GAAG,CAApB;;EACA,OAAK,IAAIe,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGoD,CAA5B,EAA+BpD,KAAK,EAApC,EAAwC;EACtC,QAAIwD,IAAI,GAAGlH,CAAC,CAAC0G,MAAF,CAAShD,KAAT,EAAgBuD,IAAhB,CAAX;;EACA,QAAIE,IAAI,GAAGN,MAAM,CAACnD,KAAD,CAAjB;EACAmD,IAAAA,MAAM,CAACnD,KAAD,CAAN,GAAgBmD,MAAM,CAACK,IAAD,CAAtB;EACAL,IAAAA,MAAM,CAACK,IAAD,CAAN,GAAeC,IAAf;EACD;;EACD,SAAON,MAAM,CAACnG,KAAP,CAAa,CAAb,EAAgBoG,CAAhB,CAAP;EACD,CAhBD;EAsBA;;;;;;EAIA9G,CAAC,CAACoH,MAAF,GAAW,YAAY;EACrB,MAAIC,OAAJ;EAAA,MAAazD,IAAb;EAAA,MAAmB0D,GAAnB;EAAA,MAAwBC,IAAxB;EAAA,MACEf,MAAM,GAAGT,SAAS,CAAC,CAAD,CAAT,IAAgB,EAD3B;EAAA,MAEElD,CAAC,GAAG,CAFN;EAAA,MAGEF,MAAM,GAAGoD,SAAS,CAACpD,MAHrB;EAAA,MAIE6E,IAAI,GAAG,KAJT;;EAKA,MAAI,OAAOhB,MAAP,KAAkB,SAAtB,EAAiC;EAC/BgB,IAAAA,IAAI,GAAGhB,MAAP;EACAA,IAAAA,MAAM,GAAGT,SAAS,CAAC,CAAD,CAAT,IAAgB,EAAzB;EACAlD,IAAAA,CAAC,GAAG,CAAJ;EACD;;EACD,MAAI,QAAO2D,MAAP,MAAkB,QAAlB,IAA8B,CAACxG,CAAC,CAAC8D,UAAF,CAAa0C,MAAb,CAAnC,EAAyD;EACvDA,IAAAA,MAAM,GAAG,EAAT;EACD;;EACD,MAAI7D,MAAM,KAAKE,CAAf,EAAkB;EAChB2D,IAAAA,MAAM,GAAG,IAAT;EACA,MAAE3D,CAAF;EACD;;EACD,SAAOA,CAAC,GAAGF,MAAX,EAAmBE,CAAC,EAApB,EAAwB;EACtB,QAAI,CAACwE,OAAO,GAAGtB,SAAS,CAAClD,CAAD,CAApB,KAA4B,IAAhC,EAAsC;EACpC,WAAKe,IAAL,IAAayD,OAAb,EAAsB;EACpBC,QAAAA,GAAG,GAAGd,MAAM,CAAC5C,IAAD,CAAZ;EACA2D,QAAAA,IAAI,GAAGF,OAAO,CAACzD,IAAD,CAAd;;EACA,YAAI4C,MAAM,KAAKe,IAAX,IAAmBA,IAAI,KAAKE,SAAhC,EAA2C;EACzC;EACD;;EAGD,YAAID,IAAI,IAAID,IAAR,IAAgBvH,CAAC,CAACyE,QAAF,CAAW8C,IAAX,CAAhB,IAAoCA,IAAI,CAACG,WAAL,KAAqBpH,MAA7D,EAAqE;EACnEkG,UAAAA,MAAM,CAAC5C,IAAD,CAAN,GAAe5D,CAAC,CAACoH,MAAF,CAASI,IAAT,EAAeF,GAAf,EAAoBC,IAApB,CAAf;EACD,SAFD,MAEO;EACLf,UAAAA,MAAM,CAAC5C,IAAD,CAAN,GAAe2D,IAAf;EACD;EACF;EACF;EACF;;EACD,SAAOf,MAAP;EACD,CArCD;;EAuCAxG,CAAC,CAACgH,KAAF,GAAU,UAAU5E,GAAV,EAAe;EACvB,MAAI,CAACpC,CAAC,CAACyE,QAAF,CAAWrC,GAAX,CAAL,EAAsB,OAAOA,GAAP;EACtB,SAAOpC,CAAC,CAAC6B,OAAF,CAAUO,GAAV,IAAiBA,GAAG,CAAC1B,KAAJ,EAAjB,GAA+BV,CAAC,CAACoH,MAAF,CAAS,IAAT,EAAe,EAAf,EAAmBhF,GAAnB,CAAtC;EACD,CAHD;EAMA;EACA;;;EACApC,CAAC,CAAC2H,eAAF,GAAoB,UAACb,CAAD,EAAIc,CAAJ,EAAU;EAC5B,SAAO,CAAEd,CAAC,GAAGc,CAAL,GAAUA,CAAX,IAAgBA,CAAvB;EACD,CAFD;;EAIA5H,CAAC,CAAC6H,OAAF,GAAYvF,IAAI,CAACwF,EAAL,GAAU,GAAtB;EACA9H,CAAC,CAAC+H,OAAF,GAAY,MAAMzF,IAAI,CAACwF,EAAvB;;EAEA9H,CAAC,CAACgI,QAAF,GAAa,UAACC,OAAD,EAAa;EACxB,SAAOA,OAAO,GAAGjI,CAAC,CAAC6H,OAAnB;EACD,CAFD;;EAIA7H,CAAC,CAACkI,QAAF,GAAa,UAACC,OAAD,EAAa;EACxB,SAAOA,OAAO,GAAGnI,CAAC,CAAC+H,OAAnB;EACD,CAFD;;EC7ZA,SAASK,qBAAT,CAA+BC,QAA/B,EAAyCC,SAAzC,EAAoD;EAChD,MAAIC,UAAJ,EAAgB1F,CAAhB,CADgD;;EAGhD,MAAI2F,SAAS,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,EAAV,CAAhB,CAHgD;;EAKhDD,EAAAA,UAAU,GAAGF,QAAQ,GAAGC,SAAxB,CALgD;;EAQhD,OAAK,IAAIzF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2F,SAAS,CAAC7F,MAA9B,EAAsCE,CAAC,EAAvC,EAA2C;EACvCwF,IAAAA,QAAQ,GAAGG,SAAS,CAAC3F,CAAD,CAApB;;EACA,QAAI0F,UAAU,IAAI,CAACC,SAAS,CAAC3F,CAAD,CAAT,IAAgB2F,SAAS,CAAC3F,CAAC,GAAG,CAAL,CAAT,IAAoB2F,SAAS,CAAC3F,CAAD,CAA7C,CAAD,IAAsD,CAAxE,EAA2E;EACvE;EACH;EACJ,GAb+C;;;EAgBhDwF,EAAAA,QAAQ,IAAIC,SAAZ;EAEA,SAAOD,QAAP;EACH;;EAED,SAASI,YAAT,CAAsBC,GAAtB,EAA2B;EACvB,SAAOzE,UAAU,CACbyE,GAAG,CAACC,WAAJ,CAAgB,EAAhB,CADa,CAAjB;EAEH;;EAED,SAASC,sBAAT,CAAgCC,GAAhC,EAAoCC,QAApC,EAA6CC,IAA7C,EAAmD;EAE/CF,EAAAA,GAAG,GAAG7I,CAAC,CAAC6F,OAAF,CAAWgD,GAAX,EAAiBpB,SAAjB,EAA6B,IAA7B,EAAoC,EAApC,CAAN;EAEH,MAAIuB,KAAK,GAAGD,IAAI,IAAIA,IAAI,CAACC,KAAb,GAAqB/E,UAAU,CAAC8E,IAAI,CAACC,KAAN,CAA/B,GAA6C,CAAzD,CAJkD;;EAMlD,MAAIC,KAAK,GAAGF,IAAI,IAAIA,IAAI,CAACE,KAAb,GAAqB,CAArB,GAAyB,CAArC;;EAEA,MAAGjF,KAAK,CAACgF,KAAD,CAAR,EAAgB;EACfA,IAAAA,KAAK,GAAG,CAAR;EACA;;EAEE,MAAIpE,GAAG,GAAG5E,CAAC,CAAC4E,GAAF,CAAMiE,GAAN,CAAV;;EACA,MAAIK,OAAO,GAAGtE,GAAd;EACAA,EAAAA,GAAG,IAAIoE,KAAP;;EACA,MAAIzD,GAAG,GAAGvF,CAAC,CAACuF,GAAF,CAAMsD,GAAN,CAAV;;EAEA,MAAGtD,GAAG,IAAEX,GAAR,EAAY;EACX,QAAGA,GAAG,GAAG,CAAT,EAAW;EACVW,MAAAA,GAAG,GAAG,CAAN;EACM,aAAO,CAAEA,GAAF,EAAQX,GAAR,CAAP,CAFI;EAIV,KAJD,MAIO,IAAGA,GAAG,GAAG,CAAT,EAAW;EACX,aAAO,CAAEA,GAAF,EAAQ,CAAR,CAAP,CADW;EAGjB,KAHM,MAGA;EACAA,MAAAA,GAAG,GAAG,CAAN;EACA,aAAO,CAAC,CAAD,EAAKA,GAAL,CAAP;EACH;EACJ;;EAID,MAAIjC,MAAM,GAAGiC,GAAG,GAAGW,GAAnB;;EACA,MAAI5C,MAAJ,EAAY;EACX,QAAIwG,OAAO,GAAG5D,GAAd,CADW;;EAEXA,IAAAA,GAAG,IAAI5C,MAAM,GAAG,IAAhB,CAFW;;EAIR,QAAG4C,GAAG,GAAC,CAAJ,IAAS4D,OAAO,IAAE,CAArB,EAAuB;EACtB5D,MAAAA,GAAG,GAAC,CAAJ;EACA;;EACDX,IAAAA,GAAG,IAAIjC,MAAM,GAAG,IAAhB;EACH;;EAED,MAAIyG,YAAY,GAAG,CAACxE,GAAG,GAAGW,GAAP,IAAc,GAAjC,CA5C+C;;EA6C/C,MAAI+C,SAAS,GAAGhG,IAAI,CAACC,GAAL,CAAS,EAAT,EAAaD,IAAI,CAACqE,KAAL,CAAWrE,IAAI,CAAC+G,GAAL,CAASD,YAAT,IAAyB9G,IAAI,CAACgH,IAAzC,CAAb,CAAhB;EAEAF,EAAAA,YAAY,GAAGhB,qBAAqB,CAACgB,YAAD,EAAed,SAAf,CAApC;;EACA,MAAGW,KAAH,EAAS;EACRG,IAAAA,YAAY,GAAG9G,IAAI,CAACiH,IAAL,CAAUH,YAAV,CAAf;EACA;;EAED,MAAII,GAAJ;EAAA,MACIC,OADJ;EAAA,MAEIC,UAAU,GAAGjB,YAAY,CAACnG,IAAI,CAACqE,KAAL,CAAWpB,GAAG,GAAG6D,YAAjB,IAAiCA,YAAlC,CAF7B;EAAA,MAGIO,UAAU,GAAGlB,YAAY,CAACnG,IAAI,CAACiH,IAAL,CAAU3E,GAAG,GAAGwE,YAAhB,IAAgCA,YAAjC,CAH7B;EAAA,MAIIQ,aAAa,GAAG,EAJpB,CApD+C;;EA2D/CJ,EAAAA,GAAG,GAAGE,UAAN;;EACA,SAAOF,GAAG,IAAIG,UAAd,EAA0B;EAEtB;EACAC,IAAAA,aAAa,CAACnJ,IAAd,CAAmB+I,GAAnB,EAHsB;;EAMtBA,IAAAA,GAAG,GAAGf,YAAY,CAACe,GAAG,GAAGJ,YAAP,CAAlB,CANsB;EAStB;;EACA,QAAII,GAAG,KAAKC,OAAZ,EAAqB;EACjB;EACH,KAZqB;;;EAetBA,IAAAA,OAAO,GAAGD,GAAV;EACH;;EACD,MAAGI,aAAa,CAACjH,MAAd,IAAwB,CAA3B,EAA6B;EAC5B,QAAGiH,aAAa,CAACA,aAAa,CAACjH,MAAd,GAAuB,CAAxB,CAAb,IAA2CuG,OAA9C,EAAsD;EACxDU,MAAAA,aAAa,CAACC,GAAd;EACA;EACE;;EACD,SAAOD,aAAP;EACH;;EAED,IAAIE,WAAW,GAAI;EAClBC,EAAAA,OAAO,EAAC,iBAASC,IAAT,EAAclB,QAAd,EAAuBC,IAAvB,EAA4B;EAC7B,WAAO/I,CAAC,CAACkG,IAAF,CAAQ0C,sBAAsB,CAACoB,IAAD,EAAMlB,QAAN,EAAeC,IAAf,CAA9B,CAAP;EACN;EAHiB,CAAnB;;EC/GA,IAAIkB,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD,EAAS;EACxB,SAAOlK,CAAC,CAACgH,KAAF,CAAQkD,GAAR,CAAP;EACH,CAFD;;EAIA,IAAIC,SAAS,GAAG,SAAZA,SAAY,CAACC,IAAD,EAAU;EACtB,SAAOC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeH,IAAf,CAAX,CAAP;EACH,CAFD;;EAIA,IAAII,OAAO,GAAG,SAAVA,OAAU,CAACN,GAAD,EAAS;EACnB,MAAIO,kBAAkB,GAAG,CAAC,KAAD,EAAQ,SAAR,EAAkB,MAAlB,CAAzB;EACA,SAAOP,GAAG,CAACQ,KAAJ,IAAaR,GAAG,CAACQ,KAAJ,CAAUC,IAAvB,IAA+BF,kBAAkB,CAAC/I,OAAnB,CAA2BwI,GAAG,CAACQ,KAAJ,CAAUC,IAArC,IAA6C,CAAC,CAApF;EACH,CAHD;;EAKA,IAAIC,eAAe,GAAG,SAAlBA,eAAkB,CAAEC,MAAF,EAAyB;EAAA,MAAfrE,MAAe,uEAAR,EAAQ;;EAC3C,OAAK,IAAIsE,CAAT,IAAcD,MAAd,EAAsB;EAClB,QAAI,CAAC,CAACC,CAAC,CAACpJ,OAAF,CAAW,GAAX,CAAN,EAAwB;EACpB,UAAI,CAACmJ,MAAM,CAAEC,CAAF,CAAP,IAAgB,CAACD,MAAM,CAAEC,CAAF,CAAN,CAAYC,SAAjC,EAA4C;EACxC;EACA,YAAI/K,CAAC,CAACyE,QAAF,CAAYoG,MAAM,CAAEC,CAAF,CAAlB,KAA6B,CAAC9K,CAAC,CAAC8D,UAAF,CAAa+G,MAAM,CAAEC,CAAF,CAAnB,CAA9B,IAA2D,CAAC9K,CAAC,CAAC6B,OAAF,CAAUgJ,MAAM,CAAEC,CAAF,CAAhB,CAAhE,EAAwF;EACpFtE,UAAAA,MAAM,CAAEsE,CAAF,CAAN,GAAcD,MAAM,CAAEC,CAAF,CAAN,CAAYE,OAA1B;EACH,SAFD,MAEO;EACHxE,UAAAA,MAAM,CAAEsE,CAAF,CAAN,GAAcD,MAAM,CAAEC,CAAF,CAApB;EACH;EACJ,OAPD,MAOO;EACHtE,QAAAA,MAAM,CAAEsE,CAAF,CAAN,GAAc,EAAd;EACAF,QAAAA,eAAe,CAAEC,MAAM,CAAEC,CAAF,CAAN,CAAYC,SAAd,EAAyBvE,MAAM,CAAEsE,CAAF,CAA/B,CAAf;EACH;EACJ;EACJ;;EACD,SAAOtE,MAAP;EACH,CAjBD;;MCVqByE;;;EAkDjB,gBAAYf,GAAZ,EAAiBgB,OAAjB,EAA0B;EAAA;;EACtB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,SAAKC,IAAL,GAAYnL,CAAC,CAACgH,KAAF,CAAQkD,GAAR,CAAZ;EACA,SAAKgB,OAAL,GAAeA,OAAO,IAAI,EAA1B;EAEA,SAAKE,kBAAL,GAA0B,EAA1B,CAfsB;EAiBtB;;EACA,SAAKC,WAAL,GAAmB,CAAnB;EACA,SAAKC,UAAL,GAAkB,IAAlB;EACA,SAAKC,WAAL,GAAmB,IAAnB,CApBsB;EAsBtB;;EACA,SAAKC,gBAAL,GAAwB,EAAxB;EAEA,SAAKC,SAAL,GAAiB,CAAjB,CAzBsB;;EA0BtB,SAAKC,YAAL,GAAoB,CAApB,CA1BsB;EA4BtB;;EACA,SAAKC,IAAL,GAAY,IAAZ;EACA,SAAKC,IAAL,GAAY,IAAZ;;EAEA5L,IAAAA,CAAC,CAACoH,MAAF,CAAU,IAAV,EAAgB,IAAhB,EAAsBwD,eAAe,CAAEK,IAAI,CAACY,YAAP,CAArC,EAA4D3B,GAA5D;EACH;;;;mCAEYgB,SAAS;EAClB;EAEA,WAAKpB,WAAL,GAAmB,EAAnB;EACA,WAAK0B,gBAAL,GAAwB,EAAxB;EAEA,WAAKN,OAAL,GAAeA,OAAf;EAEA,WAAKI,UAAL,GAAkB,IAAlB;EACA,WAAKC,WAAL,GAAmB,IAAnB;EAEH;;;oCAEa5I,QAAQ;EAClB,WAAK0I,WAAL,GAAmB1I,MAAnB;EACA,WAAKmJ,cAAL;EACH;;;uCAEgB;EAEb,UAAIC,EAAE,GAAG,IAAT;;EAEA,UAAI,KAAKC,UAAL,IAAmB,YAAvB,EAAqC;EAEjC,YAAI,KAAKL,IAAL,IAAa,IAAjB,EAAuB;EACnB,eAAKA,IAAL,GAAY3L,CAAC,CAACuF,GAAF,CAAM,KAAKuE,WAAX,CAAZ;EACH;;EACD,YAAI,KAAK8B,IAAL,IAAa,IAAjB,EAAuB;EACnB,eAAKA,IAAL,GAAY5L,CAAC,CAAC4E,GAAF,CAAM,KAAKkF,WAAX,CAAZ;EACH;EAGD;;EACA,YAAI,EAAE,YAAY,KAAKqB,IAAnB,CAAJ,EAA8B;EAC1B,eAAKc,MAAL,GAAc,CAAd,CAD0B;;EAE1B,cAAIjM,CAAC,CAAC4E,GAAF,CAAM,KAAKkF,WAAX,IAA0B,CAA9B,EAAiC;EAC7B,iBAAKmC,MAAL,GAAcjM,CAAC,CAAC4E,GAAF,CAAM,KAAKkF,WAAX,CAAd;EACH;;EACD,cAAI9J,CAAC,CAACuF,GAAF,CAAM,KAAKuE,WAAX,IAA0B,CAA9B,EAAiC;EAC7B,iBAAKmC,MAAL,GAAcjM,CAAC,CAACuF,GAAF,CAAM,KAAKuE,WAAX,CAAd;EACH;EACJ;EAED,aAAK4B,YAAL,GAAoB,KAAKQ,eAAL,CAAqB,KAAKD,MAA1B,CAApB;EACA,aAAKR,SAAL,GAAiB,KAAKU,WAAL,CAAiB,KAAKF,MAAtB,CAAjB;EAEH;;EAKD,WAAKb,kBAAL,GAA0B,EAA1B;;EACApL,MAAAA,CAAC,CAACiD,IAAF,CAAO,KAAK6G,WAAZ,EAAyB,UAAUsC,GAAV,EAAevJ,CAAf,EAAkB;EAEvC,YAAIwJ,GAAG,GAAGxJ,CAAV;;EACA,YAAIkJ,EAAE,CAACC,UAAH,IAAiB,YAArB,EAAmC;EAC/BK,UAAAA,GAAG,GAAGN,EAAE,CAACO,aAAH,CAAiBF,GAAjB,CAAN;EACH;EAED,YAAI5C,GAAG,GAAG+C,QAAQ,CAACR,EAAE,CAACS,QAAH,CAAY;EAC3BH,UAAAA,GAAG,EAAExJ,CADsB;EAE3BuJ,UAAAA,GAAG,EAAEA;EAFsB,SAAZ,CAAD,EAGd,EAHc,CAAlB;;EAKAL,QAAAA,EAAE,CAACX,kBAAH,CAAsB3K,IAAtB,CAA2B;EACvB2L,UAAAA,GAAG,EAAEA,GADkB;EAEvBC,UAAAA,GAAG,EAAEA,GAFkB;EAGvB7C,UAAAA,GAAG,EAAEA;EAHkB,SAA3B;EAMH,OAlBD;EAoBH;;;uCACgB;EACb;EACA,aAAO,KAAKM,WAAZ;EACH;;;qCACc2C,cAAc;EACzB,UAAIV,EAAE,GAAG,IAAT,CADyB;;EAIzB,UAAI/L,CAAC,CAACqE,OAAF,CAAUoI,YAAV,KAA2BzM,CAAC,CAACqE,OAAF,CAAU,KAAK8G,IAAL,CAAUrB,WAApB,CAA/B,EAAiE;EAC7D,YAAI,KAAKkC,UAAL,IAAmB,YAAvB,EAAqC;EAEjC,cAAInD,GAAG,GAAG,KAAK6D,eAAL,EAAV;;EAEA,cAAI,YAAYX,EAAE,CAACZ,IAAnB,EAAyB;EACrBtC,YAAAA,GAAG,CAACpI,IAAJ,CAASsL,EAAE,CAACZ,IAAH,CAAQc,MAAjB;EACH;;EAED,cAAIpD,GAAG,CAAClG,MAAJ,IAAc,CAAlB,EAAqB;EACjBkG,YAAAA,GAAG,CAACpI,IAAJ,CAASoI,GAAG,CAAC,CAAD,CAAH,GAAS,EAAlB;EACH;;EAED,cAAI,KAAK8D,SAAT,EAAoB;EAChB9D,YAAAA,GAAG,CAACpI,IAAJ,CAAS,KAAKkM,SAAd;EACH;;EAED,cAAI,KAAKC,SAAT,EAAoB;EAChB;EACA,gBAAIjB,IAAI,GAAG3L,CAAC,CAACuF,GAAF,CAAMsD,GAAN,CAAX;;EACA,gBAAI+C,IAAI,GAAG5L,CAAC,CAAC4E,GAAF,CAAMiE,GAAN,CAAX;;EACA,gBAAIvG,IAAI,CAACuK,GAAL,CAASlB,IAAT,IAAiBrJ,IAAI,CAACuK,GAAL,CAASjB,IAAT,CAArB,EAAqC;EACjC/C,cAAAA,GAAG,CAACpI,IAAJ,CAAS6B,IAAI,CAACuK,GAAL,CAASlB,IAAT,CAAT;EACH,aAFD,MAEO;EACH9C,cAAAA,GAAG,CAACpI,IAAJ,CAAS,CAAC6B,IAAI,CAACuK,GAAL,CAASjB,IAAT,CAAV;EACH;EACJ;;EAED,eAAK,IAAIkB,EAAE,GAAG,CAAT,EAAYC,EAAE,GAAGlE,GAAG,CAAClG,MAA1B,EAAkCmK,EAAE,GAAGC,EAAvC,EAA2CD,EAAE,EAA7C,EAAiD;EAC7CjE,YAAAA,GAAG,CAACiE,EAAD,CAAH,GAAUE,MAAM,CAACnE,GAAG,CAACiE,EAAD,CAAJ,CAAhB;;EACA,gBAAI9I,KAAK,CAAC6E,GAAG,CAACiE,EAAD,CAAJ,CAAT,EAAoB;EAChBjE,cAAAA,GAAG,CAACoE,MAAJ,CAAWH,EAAX,EAAe,CAAf;EACAA,cAAAA,EAAE;EACFC,cAAAA,EAAE;EACL;EACJ;;EAED,cAAI/M,CAAC,CAAC8D,UAAF,CAAc,KAAKoJ,cAAnB,CAAJ,EAAyC;EACrC,iBAAKpD,WAAL,GAAmB,KAAKoD,cAAL,CAAqBrE,GAArB,CAAnB;EACH;;EAED,cAAI,CAAC,KAAKiB,WAAN,IAAqB,CAAC,KAAKA,WAAL,CAAiBnH,MAA3C,EAAmD;EAC/C,iBAAKmH,WAAL,GAAmBA,WAAW,CAACC,OAAZ,CAAoBlB,GAApB,EAAyB,CAAzB,CAAnB;EACH;;EAED,cAAI,KAAK+D,SAAT,EAAoB;EAChB;EACA,gBAAIjB,IAAI,GAAG3L,CAAC,CAACuF,GAAF,CAAM,KAAKuE,WAAX,CAAX;;EACA,gBAAI8B,IAAI,GAAG5L,CAAC,CAAC4E,GAAF,CAAM,KAAKkF,WAAX,CAAX;;EACA,gBAAIxH,IAAI,CAACuK,GAAL,CAASlB,IAAT,IAAiBrJ,IAAI,CAACuK,GAAL,CAASjB,IAAT,CAArB,EAAqC;EACjC,mBAAK9B,WAAL,CAAiBrJ,IAAjB,CAAsB6B,IAAI,CAACuK,GAAL,CAASlB,IAAT,CAAtB;EACH,aAFD,MAEO;EACH,mBAAK7B,WAAL,CAAiBqD,OAAjB,CAAyB,CAAC7K,IAAI,CAACuK,GAAL,CAASjB,IAAT,CAA1B;EACH;EACJ;;EAGD,cAAI,KAAK9B,WAAL,CAAiBnH,MAAjB,IAA2B,CAA/B,EAAkC;EAC9B,iBAAKmH,WAAL,GAAmB,CAAC,CAAD,CAAnB;EACH;;EAGD,eAAK0B,gBAAL,GAAwB,CAACxL,CAAC,CAACgH,KAAF,CAAQ,KAAK8C,WAAb,CAAD,CAAxB;;EAEA,eAAKsD,aAAL,GA/DiC;;;EAiEjC,eAAKC,KAAL;EAEH,SAnED,MAmEO;EAEH;EACA,eAAKvD,WAAL,GAAmB9J,CAAC,CAACgF,OAAF,CAAU,KAAKkG,OAAf,CAAnB,CAHG;;EAIH,eAAKM,gBAAL,GAAwB,CAAC,KAAK1B,WAAN,CAAxB;EAEH;EACJ,OA3ED,MA2EO;EACH,aAAKA,WAAL,GAAmB2C,YAAY,IAAI,KAAKtB,IAAL,CAAUrB,WAA7C;EACA,aAAK0B,gBAAL,GAAwB,CAAC,KAAK1B,WAAN,CAAxB;EACH;EAEJ;;;wCACiB;EACd;EACA;EACA;EACA,UAAIwD,IAAI,GAAG,CAAX;;EAEAtN,MAAAA,CAAC,CAACiD,IAAF,CAAO,KAAKiI,OAAZ,EAAqB,UAAUrC,GAAV,EAAe;EAChCyE,QAAAA,IAAI,GAAGhL,IAAI,CAACsC,GAAL,CAASiE,GAAG,CAAClG,MAAb,EAAqB2K,IAArB,CAAP;EACH,OAFD;;EAIA,UAAIA,IAAI,IAAI,CAAZ,EAAe;EACX,eAAO,KAAKC,eAAL,EAAP;EACH;;EACD,UAAID,IAAI,GAAG,CAAX,EAAc;EACV,eAAO,KAAKE,eAAL,EAAP;EACH;EAEJ;;;wCACiB;EACd,UAAI3E,GAAG,GAAG7I,CAAC,CAACgF,OAAF,CAAU,KAAKkG,OAAf,CAAV,CADc;;;EAGd,WAAK,IAAIrI,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAG5E,GAAG,CAAClG,MAAzB,EAAiCE,CAAC,GAAG4K,EAArC,EAAyC5K,CAAC,EAA1C,EAA8C;EAC1CgG,QAAAA,GAAG,CAAChG,CAAD,CAAH,GAASgG,GAAG,CAAChG,CAAD,CAAH,IAAU,CAAnB;EACH;EAED,aAAOgG,GAAP;EACH;;;;wCAEiB;EACd,UAAI6E,CAAC,GAAG,KAAKxC,OAAb;EACA,UAAIrC,GAAG,GAAG,EAAV;EACA,UAAItD,GAAJ;;EACAvF,MAAAA,CAAC,CAACiD,IAAF,CAAOyK,CAAP,EAAU,UAAUA,CAAV,EAAa7K,CAAb,EAAgB;EACtB,YAAI,CAAC6K,CAAC,CAAC/K,MAAP,EAAe;EACX;EACH;;EAGD,YAAI,CAAC3C,CAAC,CAAC6B,OAAF,CAAU6L,CAAC,CAAC,CAAD,CAAX,CAAL,EAAsB;EAClB7E,UAAAA,GAAG,CAACpI,IAAJ,CAASiN,CAAT;EACA;EACH;EAED,YAAIC,IAAI,GAAG,EAAX;EACA,YAAIC,GAAG,GAAGF,CAAC,CAAC,CAAD,CAAD,CAAK/K,MAAf;EACA,YAAI2K,IAAI,GAAGI,CAAC,CAAC/K,MAAb;;EAEA,aAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+K,GAApB,EAAyB/K,CAAC,EAA1B,EAA8B;EAC1B,cAAIgL,QAAQ,GAAG,CAAf;EACA,cAAIC,IAAI,GAAG,CAAX;EAEA,cAAIC,UAAU,GAAG,CAAjB;EACA,cAAIC,MAAM,GAAG,CAAb;;EAEA,eAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGX,IAAtB,EAA4BW,EAAE,EAA9B,EAAkC;EAE9B,gBAAIC,IAAI,GAAGR,CAAC,CAACO,EAAD,CAAD,CAAMpL,CAAN,CAAX;;EACA,gBAAI,CAACqL,IAAD,IAASA,IAAI,KAAK,CAAtB,EAAyB;EACrB;EACH;EAED3I,YAAAA,GAAG,IAAIkC,SAAP,KAAqBlC,GAAG,GAAG2I,IAA3B;EACA3I,YAAAA,GAAG,GAAGjD,IAAI,CAACiD,GAAL,CAASA,GAAT,EAAc2I,IAAd,CAAN;;EAEA,gBAAIA,IAAI,IAAI,CAAZ,EAAe;EACXL,cAAAA,QAAQ,IAAIK,IAAZ;EACAJ,cAAAA,IAAI;EACP,aAHD,MAGO;EACHC,cAAAA,UAAU,IAAIG,IAAd;EACAF,cAAAA,MAAM;EACT;EACJ;;EACDF,UAAAA,IAAI,IAAIH,IAAI,CAAClN,IAAL,CAAUoN,QAAV,CAAR;EACAG,UAAAA,MAAM,IAAIL,IAAI,CAAClN,IAAL,CAAUsN,UAAV,CAAV;EACH;EACDlF,QAAAA,GAAG,CAACpI,IAAJ,CAASkN,IAAT;EACH,OA5CD;;EA6CA9E,MAAAA,GAAG,CAACpI,IAAJ,CAAS8E,GAAT;EACA,aAAOvF,CAAC,CAACgF,OAAF,CAAU6D,GAAV,CAAP;EACH;EAGD;;;;mCACauD,KAAK;EACd,UAAIA,GAAG,IAAI,KAAKO,SAAhB,EAA2B;EAC3B,WAAKA,SAAL,GAAiBP,GAAjB;;EACA,UAAIA,GAAG,GAAGpM,CAAC,CAACuF,GAAF,CAAM,KAAKuE,WAAX,CAAN,IAAiCsC,GAAG,GAAGpM,CAAC,CAAC4E,GAAF,CAAM,KAAKkF,WAAX,CAA3C,EAAoE;EAChE;EACA,aAAKqE,cAAL;EACA,aAAKrC,cAAL;EACH;EACJ;;;8BAEO;EACJ,UAAI,KAAKsC,IAAT,EAAe;EACX,YAAIA,IAAI,GAAG,KAAKC,YAAL,EAAX;;EACA,YAAID,IAAI,IAAI,MAAZ,EAAoB;EAEhB,eAAKtE,WAAL,CAAiBwE,OAAjB,GAFgB;;EAKhBtO,UAAAA,CAAC,CAACiD,IAAF,CAAO,KAAKuI,gBAAZ,EAA8B,UAAU+C,GAAV,EAAe1L,CAAf,EAAkB;EAC5C0L,YAAAA,GAAG,CAACD,OAAJ;EACH,WAFD;;EAGA,eAAK9C,gBAAL,CAAsB8C,OAAtB,GARgB;EAUnB;EACJ;EACJ;;;qCAEc;EACX,UAAIjB,KAAJ;;EACA,UAAIrN,CAAC,CAACsE,QAAF,CAAW,KAAK8J,IAAhB,CAAJ,EAA2B;EACvBf,QAAAA,KAAK,GAAG,KAAKe,IAAb;EACH;;EACD,UAAI,CAACf,KAAL,EAAY;EACRA,QAAAA,KAAK,GAAG,KAAR;EACH;;EACD,aAAOA,KAAP;EACH;;;sCAEe;EACZ,UAAI,KAAKmB,YAAT,EAAuB;EACnB;EAEA,YAAI,CAACxO,CAAC,CAAC6B,OAAF,CAAU,KAAK2M,YAAf,CAAL,EAAmC;EAC/B,eAAKA,YAAL,GAAoB,CAAC,KAAKA,YAAN,CAApB;EACH;;EAGD,YAAIC,IAAI,GAAGzO,CAAC,CAACuF,GAAF,CAAM,KAAKuE,WAAX,CAAX;;EACA,YAAI4E,IAAI,GAAG1O,CAAC,CAAC4E,GAAF,CAAM,KAAKkF,WAAX,CAAX;;EACA,YAAI6E,KAAK,GAAG,CAACF,IAAD,CAAZ;EACA,YAAIG,MAAM,GAAG,EAAb;;EAEA,aAAK,IAAI/L,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG,KAAKL,YAAL,CAAkB7L,MAAtC,EAA8CE,CAAC,GAAGgM,CAAlD,EAAqDhM,CAAC,EAAtD,EAA0D;EACtD,cAAIiM,eAAe,GAAGL,IAAtB;;EACA,cAAI5L,CAAC,GAAG,CAAR,EAAW;EACPiM,YAAAA,eAAe,GAAG,KAAKN,YAAL,CAAkB3L,CAAC,GAAG,CAAtB,CAAlB;EACH;EACD,cAAIkM,SAAS,GAAGD,eAAe,GAAGvC,QAAQ,CAAC,CAAC,KAAKiC,YAAL,CAAkB3L,CAAlB,IAAuBiM,eAAxB,IAA2C,CAA5C,CAA1C;EAEAH,UAAAA,KAAK,CAAClO,IAAN,CAAWsO,SAAX;EACAJ,UAAAA,KAAK,CAAClO,IAAN,CAAW,KAAK+N,YAAL,CAAkB3L,CAAlB,CAAX;EAEA+L,UAAAA,MAAM,CAACnO,IAAP,CAAY,CACRqO,eADQ,EAERC,SAFQ,EAGR,KAAKP,YAAL,CAAkB3L,CAAlB,CAHQ,CAAZ;EAKH;EACD,YAAImM,MAAM,GAAG,KAAKR,YAAL,CAAkB9N,KAAlB,CAAwB,CAAC,CAAzB,EAA4B,CAA5B,CAAb;;EAEA,YAAIgO,IAAI,GAAGM,MAAX,EAAmB;EACfL,UAAAA,KAAK,CAAClO,IAAN,CAAWuO,MAAM,GAAG,CAACN,IAAI,GAAGM,MAAR,IAAkB,CAAtC;EACAL,UAAAA,KAAK,CAAClO,IAAN,CAAWiO,IAAX;EACAE,UAAAA,MAAM,CAACnO,IAAP,CAAY,CACRuO,MADQ,EAERA,MAAM,GAAG,CAACN,IAAI,GAAGM,MAAR,IAAkB,CAFnB,EAGRN,IAHQ,CAAZ;EAKH,SAvCkB;;;EA0CnB,aAAK5E,WAAL,GAAmB6E,KAAnB;EACA,aAAKnD,gBAAL,GAAwBoD,MAAxB;EAEH;EACJ;;;;sCAGe3C,QAAQ;EACpB,UAAIzC,GAAG,GAAG,CAAV;EAEA,UAAIyF,MAAM,GAAG,KAAKzD,gBAAL,CAAsB7I,MAAnC;EACA,UAAIuM,WAAW,GAAG,KAAK7D,WAAL,GAAmB4D,MAArC;;EAEA,WAAK,IAAIpM,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGI,MAApB,EAA4BpM,CAAC,GAAGgM,CAAhC,EAAmChM,CAAC,EAApC,EAAwC;EAEpC,YAAIsM,EAAE,GAAG,KAAK3D,gBAAL,CAAsB3I,CAAtB,CAAT;;EAEA,YAAI,KAAKmJ,UAAL,IAAmB,YAAvB,EAAqC;EACjC,cAAIzG,GAAG,GAAGvF,CAAC,CAACuF,GAAF,CAAM4J,EAAN,CAAV;;EACA,cAAIvK,GAAG,GAAG5E,CAAC,CAAC4E,GAAF,CAAMuK,EAAN,CAAV;;EAEA,cAAIC,SAAS,GAAG9M,IAAI,CAACuK,GAAL,CAASjI,GAAG,GAAGW,GAAf,CAAhB;;EAEA,cAAI0G,MAAM,IAAI1G,GAAV,IAAiB0G,MAAM,IAAIrH,GAA/B,EAAoC;EAChC4E,YAAAA,GAAG,GAAI,CAACyC,MAAM,GAAG1G,GAAV,IAAiB6J,SAAjB,GAA6BF,WAA7B,GAA2CrM,CAAC,GAAGqM,WAAtD;EACA;EACH;EAGJ,SAZD;EAyBH;;EAED,UAAI,KAAKd,IAAL,IAAa,MAAjB,EAAyB;EACrB;EACA5E,QAAAA,GAAG,GAAG,EAAE0F,WAAW,GAAG1F,GAAhB,CAAN;EACH;EAED,aAAO+C,QAAQ,CAAC/C,GAAD,CAAf;EACH;;;;uCAGgBU,KAAK;EAClB,UAAImF,KAAK,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,CAAZ;EACA,UAAIC,IAAJ;;EACAtP,MAAAA,CAAC,CAACiD,IAAF,CAAOoM,KAAP,EAAc,UAAUE,EAAV,EAAc;EACxB,YAAIA,EAAE,IAAIrF,GAAV,EAAe;EACXoF,UAAAA,IAAI,GAAGC,EAAP;EACH;EACJ,OAJD;;EAMA,UAAIC,UAAJ;;EACAxP,MAAAA,CAAC,CAACiD,IAAF,CAAO,KAAKmI,kBAAZ,EAAgC,UAAU1G,IAAV,EAAgB;EAC5C,YAAIA,IAAI,CAAC4K,IAAD,CAAJ,KAAepF,GAAG,CAACoF,IAAD,CAAtB,EAA8B;EAC1BE,UAAAA,UAAU,GAAG9K,IAAb;EACH;EACJ,OAJD;;EAMA,aAAO8K,UAAU,IAAI,EAArB;EACH;;;kCAEWpD,KAAK;EAEb;;;;;;;EAQA,aAAO,KAAKI,QAAL,CAAc;EACjBJ,QAAAA,GAAG,EAAEA;EADY,OAAd,CAAP;EAGH;;;kCACWC,KAAK;EACb;EACA,UAAIoD,IAAI,GAAG,KAAKC,gBAAL,CAAsB;EAAErD,QAAAA,GAAG,EAAEA;EAAP,OAAtB,EAAoC7C,GAA/C;;EACA,UAAIiG,IAAI,IAAIhI,SAAZ,EAAuB;EACnB,eAAOgI,IAAP;EACH;EAED,aAAO,KAAKjD,QAAL,CAAc;EACjBH,QAAAA,GAAG,EAAEA;EADY,OAAd,CAAP;EAGH;;;;+BAGQnC,KAAK;EACV,UAAIV,GAAJ;;EAEA,UAAImG,SAAS,GAAG,KAAKC,aAAL,EAAhB,CAHU;;;EAKV,UAAI,KAAK5D,UAAL,IAAmB,YAAvB,EAAqC;EACjC,YAAIiD,MAAM,GAAG,KAAKzD,gBAAL,CAAsB7I,MAAnC;EACA,YAAIuM,WAAW,GAAG,KAAK7D,WAAL,GAAmB4D,MAArC;;EACA,aAAK,IAAIpM,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGI,MAApB,EAA4BpM,CAAC,GAAGgM,CAAhC,EAAmChM,CAAC,EAApC,EAAwC;EACpC,cAAIsM,EAAE,GAAG,KAAK3D,gBAAL,CAAsB3I,CAAtB,CAAT;;EACA,cAAI0C,GAAG,GAAGvF,CAAC,CAACuF,GAAF,CAAM4J,EAAN,CAAV;;EACA,cAAIvK,GAAG,GAAG5E,CAAC,CAAC4E,GAAF,CAAMuK,EAAN,CAAV;;EACA,cAAI/C,GAAG,GAAG,SAASlC,GAAT,GAAeA,GAAG,CAACkC,GAAnB,GAAyB,KAAKyD,WAAL,CAAiB3F,GAAG,CAACmC,GAArB,CAAnC;;EACA,cAAID,GAAG,IAAI7G,GAAP,IAAc6G,GAAG,IAAIxH,GAAzB,EAA8B;EAC1B,gBAAIkL,OAAO,GAAG,KAAK7D,MAAnB,CAD0B;;EAG1B,gBAAI6D,OAAO,GAAGvK,GAAV,IAAiBuK,OAAO,GAAGlL,GAA/B,EAAoC;EAChCkL,cAAAA,OAAO,GAAGvK,GAAV;EACH,aAFD;EAMA,gBAAIwK,cAAc,GAAGzN,IAAI,CAACsC,GAAL,CAAStC,IAAI,CAACuK,GAAL,CAASjI,GAAG,GAAGkL,OAAf,CAAT,EAAkCxN,IAAI,CAACuK,GAAL,CAASiD,OAAO,GAAGvK,GAAnB,CAAlC,CAArB;EACA,gBAAI6J,SAAS,GAAG9M,IAAI,CAACuK,GAAL,CAASjI,GAAG,GAAGW,GAAf,CAAhB;EACA,gBAAIyK,CAAC,GAAID,cAAc,GAAGX,SAAlB,GAA+BF,WAAvC;EACA1F,YAAAA,GAAG,GAAG,CAAC4C,GAAG,GAAG0D,OAAP,IAAkBC,cAAlB,GAAmCC,CAAnC,GAAuCnN,CAAC,GAAGqM,WAAjD;;EAEA,gBAAIlL,KAAK,CAACwF,GAAD,CAAT,EAAgB;EACZA,cAAAA,GAAG,GAAG+C,QAAQ,CAAC1J,CAAC,GAAGqM,WAAL,CAAd;EACH;EAED;EACH;EACJ;EACJ,OA7BD,MA6BO;EAEH,YAAIS,SAAS,IAAI,CAAjB,EAAoB;EAChB;EACAnG,UAAAA,GAAG,GAAG,KAAK6B,WAAL,GAAmB,CAAzB;EACH,SAHD,MAGO;EACH;EACA;EAEA,cAAI4E,MAAM,GAAG,SAAS/F,GAAT,GAAeA,GAAG,CAACmC,GAAnB,GAAyB,KAAKC,aAAL,CAAmBpC,GAAG,CAACkC,GAAvB,CAAtC;;EACA,cAAI6D,MAAM,IAAI,CAAC,CAAf,EAAkB;EACd,gBAAI,KAAKjE,UAAL,IAAmB,MAAvB,EAA+B;EAC3B;EACAxC,cAAAA,GAAG,GAAGyG,MAAM,IAAIN,SAAS,GAAG,CAAhB,CAAN,GAA2B,KAAKtE,WAAtC;EACH;;EACD,gBAAI,KAAKW,UAAL,IAAmB,MAAvB,EAA+B;EAC3B;;EACA;;;;;EAKA,kBAAIT,WAAW,GAAG,KAAK2E,aAAL,EAAlB;;EACA1G,cAAAA,GAAG,GAAG+B,WAAW,IAAI0E,MAAM,GAAG,CAAb,CAAX,GAA6B1E,WAAW,GAAG,CAAjD;EACH;EACJ;EACJ;EAEJ;EAED,OAAC/B,GAAD,KAASA,GAAG,GAAG,CAAf;EAEAA,MAAAA,GAAG,GAAGwD,MAAM,CAACxD,GAAG,CAAC2G,OAAJ,CAAY,CAAZ,CAAD,CAAN,GAAyB,KAAKzE,YAApC;EAEA,aAAOpJ,IAAI,CAACuK,GAAL,CAASrD,GAAT,CAAP;EACH;;;kCAEWA,KAAK;EACb;EACA,UAAI0E,IAAI,GAAG,KAAKwB,gBAAL,CAAsB;EAAElG,QAAAA,GAAG,EAAEA;EAAP,OAAtB,EAAoC4C,GAA/C;;EACA,UAAI8B,IAAI,IAAIzG,SAAZ,EAAuB;EACnB,eAAOyG,IAAP;EACH;EAED,aAAO,KAAKkC,YAAL,CAAkB,KAAKC,aAAL,CAAmB7G,GAAnB,CAAlB,CAAP;EACH;;;;kCAGW6C,KAAK;EAEb;EACA,UAAI6B,IAAI,GAAG,KAAKwB,gBAAL,CAAsB;EAAErD,QAAAA,GAAG,EAAEA;EAAP,OAAtB,EAAoCD,GAA/C;;EACA,UAAI8B,IAAI,IAAIzG,SAAZ,EAAuB;EACnB,eAAOyG,IAAP;EACH;EAED,aAAO,KAAKkC,YAAL,CAAkB/D,GAAlB,CAAP;EAEA;;;;;;;;;EAUH;;;;mCAGYA,KAAK8C,IAAI;EAClB,UAAIpD,EAAE,GAAG,IAAT;;EAEA,UAAIuE,GAAG,GAAGtQ,CAAC,CAACgF,OAAF,CAAU,KAAKkG,OAAf,CAAV;;EACA,UAAIkB,GAAJ;;EAEA,UAAI,KAAKJ,UAAL,IAAmB,YAAvB,EAAqC;EAEjC,YAAIkD,WAAW,GAAG,KAAK7D,WAAL,GAAmB,KAAKG,gBAAL,CAAsB7I,MAA3D;;EACA3C,QAAAA,CAAC,CAACiD,IAAF,CAAO,KAAKuI,gBAAZ,EAA8B,UAAU2D,EAAV,EAActM,CAAd,EAAiB;EAC3C,cAAI0J,QAAQ,CAACF,GAAG,GAAG6C,WAAP,CAAR,IAA+BrM,CAA/B,IAAoCA,CAAC,IAAIkJ,EAAE,CAACP,gBAAH,CAAoB7I,MAApB,GAA6B,CAA1E,EAA6E;EACzE,gBAAI4C,GAAG,GAAGvF,CAAC,CAACuF,GAAF,CAAM4J,EAAN,CAAV;;EACA,gBAAIvK,GAAG,GAAG5E,CAAC,CAAC4E,GAAF,CAAMuK,EAAN,CAAV;;EACA/C,YAAAA,GAAG,GAAG7G,GAAG,GAAG,CAACX,GAAG,GAAGW,GAAP,IAAc2J,WAAd,IAA6B7C,GAAG,GAAG6C,WAAW,GAAGrM,CAAjD,CAAZ;EACA,mBAAO,KAAP;EACH;EACJ,SAPD;EASH,OAZD,MAYO;EACHuJ,QAAAA,GAAG,GAAGkE,GAAG,CAACjE,GAAD,CAAT;EACH;EACD,aAAOD,GAAP;EACH;;;oCAEa5C,KAAK;EAEf;EACA,UAAI+G,IAAI,GAAG,KAAKb,gBAAL,CAAsB;EAAElG,QAAAA,GAAG,EAAEA;EAAP,OAAtB,EAAoC6C,GAA/C;;EACA,UAAIkE,IAAI,IAAI9I,SAAZ,EAAuB;EACnB,eAAO8I,IAAP;EACH;EAED,UAAIlE,GAAG,GAAG,CAAV;EAEA,UAAImE,UAAU,GAAG,KAAKC,kBAAL,CAAwBjH,GAAxB,CAAjB;;EACA,UAAImG,SAAS,GAAG,KAAKC,aAAL,EAAhB;;EAEA,UAAI,KAAK5D,UAAL,IAAmB,YAAvB,EAAqC;EACjC;EACA,eAAOxC,GAAP;EACH,OAHD,MAGO;EAEH,YAAI,KAAKwC,UAAL,IAAmB,MAAvB,EAA+B;EAC3BK,UAAAA,GAAG,GAAGE,QAAQ,CAAC/C,GAAG,GAAGgH,UAAP,CAAd;;EACA,cAAInE,GAAG,IAAIsD,SAAX,EAAsB;EAClBtD,YAAAA,GAAG,GAAGsD,SAAS,GAAG,CAAlB;EACH;EACJ;;EAED,YAAI,KAAK3D,UAAL,IAAmB,MAAvB,EAA+B;EAC3BK,UAAAA,GAAG,GAAGE,QAAQ,CAAC,CAAC/C,GAAG,GAAIgH,UAAU,GAAG,CAArB,IAA2BA,UAA5B,CAAd;;EACA,cAAIb,SAAS,IAAI,CAAjB,EAAoB;EAChB;EACAtD,YAAAA,GAAG,GAAG,CAAN;EACH;EACJ;EACJ;EAED,aAAOA,GAAP;EACH;;;oCAEaD,KAAK;EAEf,UAAI6D,MAAM,GAAG,CAAC,CAAd;;EACA,UAAI,KAAKjE,UAAL,IAAmB,YAAvB,EAAqC;EAEjC;EACA,YAAIuE,IAAI,GAAG,KAAKb,gBAAL,CAAsB;EAAEtD,UAAAA,GAAG,EAAEA;EAAP,SAAtB,EAAoCC,GAA/C;;EACA,YAAIkE,IAAI,IAAI9I,SAAZ,EAAuB;EACnB,iBAAO8I,IAAP;EACH;EAGD;;EACAN,QAAAA,MAAM,GAAG,KAAK9D,WAAL,CAAiBC,GAAjB,CAAT;EACH,OAXD,MAWO;EACHpM,QAAAA,CAAC,CAACiD,IAAF,CAAO,KAAKiI,OAAZ,EAAqB,UAAUrC,GAAV,EAAe;EAChC7I,UAAAA,CAAC,CAACiD,IAAF,CAAO4F,GAAP,EAAY,UAAUlF,IAAV,EAAgB;EACxB,gBAAI4M,IAAI,GAAGvQ,CAAC,CAAC0B,OAAF,CAAUiC,IAAV,EAAgByI,GAAhB,CAAX;;EACA,gBAAImE,IAAI,IAAI,CAAC,CAAb,EAAgB;EACZN,cAAAA,MAAM,GAAGM,IAAT;EACH;EACJ,WALD;EAMH,SAPD;EAQH;;EAGD,aAAON,MAAP;EACH;;;sCAEe;EAEZ,UAAI,KAAK1E,WAAL,KAAqB,IAAzB,EAA+B;EAC3B,eAAO,KAAKA,WAAZ;EACH;;EAGD,UAAIF,WAAW,GAAG,KAAKA,WAAvB;EACA,UAAImF,UAAU,GAAGnF,WAAjB;;EACA,UAAIsE,SAAS,GAAG,KAAKC,aAAL,EAAhB;;EAEA,UAAID,SAAJ,EAAe;EAEX,YAAI,KAAK3D,UAAL,IAAmB,YAAvB,EAAqC;EACjCwE,UAAAA,UAAU,GAAG,CAAb;EACH,SAFD,MAEO;EACH;EACAA,UAAAA,UAAU,GAAGnF,WAAW,GAAGsE,SAA3B;;EACA,cAAI,KAAK3D,UAAL,IAAmB,MAAvB,EAA+B;EAC3B,gBAAI2D,SAAS,IAAI,CAAjB,EAAoB;EAChBa,cAAAA,UAAU,GAAGnF,WAAW,GAAG,CAA3B;EACH,aAFD,MAEO;EACHmF,cAAAA,UAAU,GAAGnF,WAAW,IAAIsE,SAAS,GAAG,CAAhB,CAAxB;EACH;EACJ;;EAED,cAAI,KAAKe,aAAT,EAAwB;EACpBF,YAAAA,UAAU,GAAGjE,QAAQ,CAACiE,UAAD,CAArB;EACH;EACJ;EACJ;EAED,WAAKjF,WAAL,GAAmBiF,UAAnB;EAEA,aAAOA,UAAP;EAEH;;;;yCAGkBhH,KAAK;EACpB,aAAO,KAAK0G,aAAL,EAAP;EACH;;;;yCAGkB1G,KAAK;EACpB,aAAO,KAAK0G,aAAL,EAAP;EACH;;;sCAEe;EAEZ,UAAI,KAAK5E,UAAL,KAAoB,IAAxB,EAA8B;EAC1B,eAAO,KAAKA,UAAZ;EACH;;EAGD,UAAIqE,SAAS,GAAG,CAAhB;;EACA,UAAI,KAAK3D,UAAL,IAAmB,YAAvB,EAAqC;EACjC2D,QAAAA,SAAS,GAAG,KAAKtE,WAAjB;EACH,OAFD,MAEO;EAEH,YAAI,KAAKH,OAAL,CAAavI,MAAb,IAAuB,KAAKuI,OAAL,CAAa,CAAb,EAAgBvI,MAAvC,IAAiD,KAAKuI,OAAL,CAAa,CAAb,EAAgB,CAAhB,EAAmBvI,MAAxE,EAAgF;EAC5EgN,UAAAA,SAAS,GAAG,KAAKzE,OAAL,CAAa,CAAb,EAAgB,CAAhB,EAAmBvI,MAA/B;EACH;EACJ;EACD,WAAK2I,UAAL,GAAkBqE,SAAlB;EACA,aAAOA,SAAP;EACH;;;;;;kBAnwBgB1E,sBACK;EAClBe,EAAAA,UAAU,EAAG;EACT2E,IAAAA,MAAM,EAAG,MADA;EAET3F,IAAAA,OAAO,EAAE;EAFA,GADK;EAKlBlB,EAAAA,WAAW,EAAG;EACV6G,IAAAA,MAAM,EAAG,MADC;EAEV3F,IAAAA,OAAO,EAAE;EAFC,GALI;EASlBkC,EAAAA,cAAc,EAAG;EACbyD,IAAAA,MAAM,EAAG,qBADI;EAEb3F,IAAAA,OAAO,EAAE;EAFI,GATC;EAalB2B,EAAAA,SAAS,EAAG;EACRgE,IAAAA,MAAM,EAAE,KADA;EAER3F,IAAAA,OAAO,EAAE,IAFD;EAGR4F,IAAAA,aAAa,EAAG;EAHR,GAbM;EAkBlBpC,EAAAA,YAAY,EAAG;EACXmC,IAAAA,MAAM,EAAG,OADE;EAEX3F,IAAAA,OAAO,EAAE,IAFE;EAGX4F,IAAAA,aAAa,EAAE;EAHJ,GAlBG;EAuBlBhE,EAAAA,SAAS,EAAG;EACR+D,IAAAA,MAAM,EAAG,QADD;EAER3F,IAAAA,OAAO,EAAE,KAFD;EAGR4F,IAAAA,aAAa,EAAE;EAHP,GAvBM;EA4BlB3E,EAAAA,MAAM,EAAG;EACL0E,IAAAA,MAAM,EAAG,OADJ;EAEL3F,IAAAA,OAAO,EAAE,IAFJ;EAGL4F,IAAAA,aAAa,EAAE;;;;;;EAHV,GA5BS;EAsClBxC,EAAAA,IAAI,EAAG;EACHuC,IAAAA,MAAM,EAAG,IADN;EAEH3F,IAAAA,OAAO,EAAE;EAFN,GAtCW;EA0ClB0F,EAAAA,aAAa,EAAE;EACXC,IAAAA,MAAM,EAAG,UADE;EAEX3F,IAAAA,OAAO,EAAE,KAFE;EAGX4F,IAAAA,aAAa,EAAE;EAHJ;EA1CG;;ECN1B;;;;;;;;;AASA;EAGA,SAASC,gBAAT,CAA2BlN,IAA3B,EACA;EACI,MAAIA,IAAI,KAAK8D,SAAT,IAAsB9D,IAAI,KAAK,IAAnC,EAAyC;EACrCA,IAAAA,IAAI,GAAG,EAAP;EACH;;EAED,MAAIA,IAAI,CAAChB,MAAL,GAAc,CAAd,IAAmB,CAAC3C,CAAC,CAAC6B,OAAF,CAAW8B,IAAI,CAAC,CAAD,CAAf,CAAxB,EAA8C;EAC1C,QAAImN,MAAM,GAAG,EAAb;EACA,QAAIC,MAAM,GAAG,EAAb;EACA,QAAIC,QAAQ,GAAG,CAAf;;EACA,SAAK,IAAInO,CAAC,GAAC,CAAN,EAAQgM,CAAC,GAAClL,IAAI,CAAChB,MAApB,EAA6BE,CAAC,GAACgM,CAA/B,EAAmChM,CAAC,EAApC,EAAwC;EACpC,UAAIoO,GAAG,GAAGtN,IAAI,CAACd,CAAD,CAAd;;EACA,UAAIA,CAAC,IAAI,CAAT,EAAY;EACR,aAAK,IAAIqO,CAAT,IAAcD,GAAd,EAAmB;EACfF,UAAAA,MAAM,CAACtQ,IAAP,CAAayQ,CAAb;EACH;EACDJ,QAAAA,MAAM,CAACrQ,IAAP,CAAasQ,MAAb;EACAC,QAAAA,QAAQ,GAAGD,MAAM,CAACpO,MAAlB;EACH;EACD,UAAIwO,QAAQ,GAAG,EAAf;;EACA,WAAK,IAAIlD,EAAE,GAAC,CAAZ,EAAgBA,EAAE,GAAC+C,QAAnB,EAA8B/C,EAAE,EAAhC,EAAoC;EAChCkD,QAAAA,QAAQ,CAAC1Q,IAAT,CAAewQ,GAAG,CAAEF,MAAM,CAAC9C,EAAD,CAAR,CAAlB;EACH;EACD6C,MAAAA,MAAM,CAACrQ,IAAP,CAAa0Q,QAAb;EACH;EAED,WAAOL,MAAP;EACH,GArBD,MAqBO;EACH,WAAOnN,IAAP;EACH;EACJ;;AAED,EAAe,oBAAUyG,IAAV,EAAgBF,GAAhB,EAAqB;EAEhC;EACAE,EAAAA,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,SAAL,CAAgBH,IAAhB,CAAZ,CAAP;EAEA,MAAIgH,SAAS,GAAI;EAAS;EACtBzO,IAAAA,MAAM,EAAU,CADH;EAEb2N,IAAAA,GAAG,EAAa,EAFH;EAES;EACtBlG,IAAAA,IAAI,EAAY,EAHH;EAGS;EACtBiH,IAAAA,YAAY,EAAIC,aAJH;EAKbC,IAAAA,YAAY,EAAIC,aALH;EAMbC,IAAAA,YAAY,EAAIC,aANH;EAObC,IAAAA,UAAU,EAAMA,UAPH;EAQbZ,IAAAA,MAAM,EAAU,EARH;EASba,IAAAA,KAAK,EAAW;EACZC,MAAAA,KAAK,EAAO,CADA;EAEZC,MAAAA,GAAG,EAAS;EAFA;EATH,GAAjB;;EAeA,MAAI,CAAC1H,IAAD,IAASA,IAAI,CAACzH,MAAL,IAAe,CAA5B,EAA+B;EAC3B,WAAOyO,SAAP;EACH;;EAGD,MAAIhH,IAAI,CAACzH,MAAL,GAAc,CAAd,IAAmB,CAAC3C,CAAC,CAAC6B,OAAF,CAAWuI,IAAI,CAAC,CAAD,CAAf,CAAxB,EAA8C;EAC1CA,IAAAA,IAAI,GAAGyG,gBAAgB,CAAEzG,IAAF,CAAvB;EACH;EACDgH,EAAAA,SAAS,CAACzO,MAAV,GAAmByH,IAAI,CAACzH,MAAL,GAAc,CAAjC,CA5BgC;;EA+BhCyO,EAAAA,SAAS,CAACQ,KAAV,CAAgBE,GAAhB,GAAsBV,SAAS,CAACzO,MAAV,GAAmB,CAAzC,CA/BgC;;EAiChC,MAAIuH,GAAG,IAAIA,GAAG,CAAC6H,QAAX,IAAuB7H,GAAG,CAAC6H,QAAJ,CAAaH,KAAxC,EAA+C;EAC3C5R,IAAAA,CAAC,CAACoH,MAAF,CAAUgK,SAAS,CAACQ,KAApB,EAA2B1H,GAAG,CAAC6H,QAAJ,CAAaH,KAAxC;EACH;;EAED,MAAIxH,IAAI,CAACzH,MAAL,IAAeyH,IAAI,CAAC,CAAD,CAAJ,CAAQzH,MAAvB,IAAiC,CAAC,CAACyH,IAAI,CAAC,CAAD,CAAJ,CAAQ1I,OAAR,CAAgB,WAAhB,CAAvC,EAAqE;EACjE;EACA,SAAK,IAAImB,CAAC,GAAC,CAAN,EAAQgM,CAAC,GAACzE,IAAI,CAACzH,MAApB,EAA4BE,CAAC,GAACgM,CAA9B,EAAiChM,CAAC,EAAlC,EAAsC;EAClC,UAAI,CAACA,CAAL,EAAQ;EACJuH,QAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQ3J,IAAR,CAAc,WAAd;EACH,OAFD,MAEO;EACH2J,QAAAA,IAAI,CAACvH,CAAD,CAAJ,CAAQpC,IAAR,CAAcoC,CAAC,GAAC,CAAhB;EACH;EACJ;EACJ;;EAEDuO,EAAAA,SAAS,CAACd,GAAV,GAAgBlG,IAAhB;EACAgH,EAAAA,SAAS,CAACL,MAAV,GAAmB3G,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAAd,GAAoB,EAAvC,CAjDgC;;EAqDhC,MAAI4H,KAAK,GAAG,EAAZ,CArDgC;;EAsDhC,OAAI,IAAIC,CAAC,GAAG,CAAR,EAAWlF,EAAE,GAAGqE,SAAS,CAACL,MAAV,CAAiBpO,MAArC,EAA6CsP,CAAC,GAAGlF,EAAjD,EAAqDkF,CAAC,EAAtD,EAAyD;EACrD,QAAIC,CAAC,GAAG,EAAR;EACAA,IAAAA,CAAC,CAACC,KAAF,GAAUf,SAAS,CAACL,MAAV,CAAiBkB,CAAjB,CAAV;EACAC,IAAAA,CAAC,CAACxO,KAAF,GAAUuO,CAAV;EACAC,IAAAA,CAAC,CAAC9H,IAAF,GAAU,EAAV;EACA4H,IAAAA,KAAK,CAACvR,IAAN,CAAWyR,CAAX;EACH;EACDd,EAAAA,SAAS,CAAChH,IAAV,GAAiB4H,KAAjB,CA7DgC;;EAgEhC,OAAI,IAAIC,CAAC,GAAG,CAAR,EAAWlF,EAAE,GAAG3C,IAAI,CAACzH,MAAzB,EAAiCsP,CAAC,GAAGlF,EAArC,EAAyCkF,CAAC,EAA1C,EAA6C;EACzC,SAAI,IAAIG,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGjI,IAAI,CAAC6H,CAAD,CAAJ,CAAQtP,MAA5B,EAAoCyP,CAAC,GAAGC,EAAxC,EAA4CD,CAAC,EAA7C,EAAgD;EAC5C,UAAIlE,IAAI,GAAG9D,IAAI,CAAC6H,CAAD,CAAJ,CAAQG,CAAR,CAAX,CAD4C;EAG5C;;EACA,UAAI,CAACpO,KAAK,CAAEkK,IAAF,CAAN,IAAkBA,IAAI,KAAK,EAA3B,IAAiCA,IAAI,KAAK,IAA9C,EAAoD;EAChDA,QAAAA,IAAI,GAAGlB,MAAM,CAAEkB,IAAF,CAAb;EACH;EACD8D,MAAAA,KAAK,CAACI,CAAD,CAAL,CAAShI,IAAT,CAAc3J,IAAd,CAAoByN,IAApB,EAP4C;EAS/C;EACJ;;EAGD,WAASyD,UAAT,CAAqBW,MAArB,EAA6BC,MAA7B,EAAqCC,SAArC,EAAiDC,GAAjD,EAAqD;EAEjD,QAAI,CAACA,GAAL,EAAWA,GAAG,GAAG,CAAN;EAEX,QAAI5J,GAAG,GAAG2J,SAAS,IAAIR,KAAvB;;EACA,QAAI,CAACnJ,GAAL,EAAU;EACN;EACH;;EACD,QAAI,CAAC0J,MAAL,EAAa;EACTA,MAAAA,MAAM,GAAG,gBAAUG,CAAV,EAAa;EAAE,eAAOA,CAAP;EAAU,OAAlC;EACH;;EAED,aAASC,OAAT,CAAkBvI,IAAlB,EAAwB;EACpB,WAAK,IAAIvH,CAAC,GAAC,CAAN,EAAQgM,CAAC,GAACzE,IAAI,CAACzH,MAApB,EAA4BE,CAAC,GAACgM,CAA9B,EAAiChM,CAAC,EAAlC,EAAsC;EAClCuH,QAAAA,IAAI,CAACvH,CAAD,CAAJ,GAAU0P,MAAM,CAAEnI,IAAI,CAACvH,CAAD,CAAN,CAAhB;EACH;EACD,aAAOuH,IAAP;EACH;;EAED,QAAI,CAACpK,CAAC,CAAC6B,OAAF,CAAUyQ,MAAV,CAAL,EAAwB;EACpBA,MAAAA,MAAM,GAAG,CAACA,MAAD,CAAT;EACH;;EAGD,QAAIM,OAAO,GAAG,EAAd;;EACA,SAAK,IAAI/P,CAAC,GAAC,CAAN,EAAQgM,CAAC,GAACyD,MAAM,CAAC3P,MAAtB,EAA8BE,CAAC,GAACgM,CAAhC,EAAoChM,CAAC,EAArC,EAAyC;AACrC;EACA,UAAI7C,CAAC,CAAC6B,OAAF,CAAUyQ,MAAM,CAACzP,CAAD,CAAhB,CAAJ,EAA0B;EACtB+P,QAAAA,OAAO,CAACnS,IAAR,CAAckR,UAAU,CAAEW,MAAM,CAACzP,CAAD,CAAR,EAAa0P,MAAb,EAAqBC,SAArB,EAAiCC,GAAG,GAAC,CAArC,CAAxB;EACH,OAFD,MAEO;EAEH,YAAII,UAAU,GAAGD,OAAjB;;EACA,YAAI,CAACH,GAAL,EAAU;EACNI,UAAAA,UAAU,GAAG,EAAb;EACH;;EACD,aAAK,IAAI5E,EAAE,GAAC,CAAP,EAAS6E,GAAG,GAACjK,GAAG,CAAClG,MAAtB,EAA+BsL,EAAE,GAAC6E,GAAlC,EAAwC7E,EAAE,EAA1C,EAA8C;EACzC,cAAIqE,MAAM,CAACzP,CAAD,CAAN,IAAagG,GAAG,CAACoF,EAAD,CAAH,CAAQkE,KAAzB,EAAgC;AAC5BY;EACAF,YAAAA,UAAU,CAACpS,IAAX,CAAiBkS,OAAO,CAAE9J,GAAG,CAACoF,EAAD,CAAH,CAAQ7D,IAAR,CAAa1J,KAAb,CAAoB0Q,SAAS,CAACQ,KAAV,CAAgBC,KAApC,EAA2CT,SAAS,CAACQ,KAAV,CAAgBE,GAAhB,GAAoB,CAA/D,CAAF,CAAxB;;EACA;EACH;EACL;;EACD,YAAI,CAACW,GAAL,EAAU;EACNG,UAAAA,OAAO,CAACnS,IAAR,CAAcoS,UAAd;EACH;EACJ;EACJ;;EACD,WAAOD,OAAP;EACH;EAED;;;;EAGA,WAAStB,aAAT,CAAuB5N,KAAvB,EAA6B;EACzB,QAAIwO,CAAC,GAAG,EAAR;EACA,QAAI9H,IAAI,GAAGgH,SAAS,CAAChH,IAArB;;EACA,SAAI,IAAI6H,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG7H,IAAI,CAACzH,MAAxB,EAAgCsP,CAAC,EAAjC,EAAoC;EAChCC,MAAAA,CAAC,CAAC9H,IAAI,CAAC6H,CAAD,CAAJ,CAAQE,KAAT,CAAD,GAAmB/H,IAAI,CAAC6H,CAAD,CAAJ,CAAQ7H,IAAR,CAAcgH,SAAS,CAACQ,KAAV,CAAgBC,KAAhB,GAAwBnO,KAAtC,CAAnB;EACH;EACD,WAAOwO,CAAP;EACH;EAED;;;;;EAGA,WAASV,aAAT,CAAwBpP,GAAxB,EAA6B;EACzB,KAACA,GAAD,KAASA,GAAG,GAAC,EAAb;EACA,QAAIyG,GAAG,GAAG,EAAV;EAEA,QAAImK,QAAQ,GAAG,CAAf;;EACA,SAAK,IAAIlI,CAAT,IAAc1I,GAAd,EAAmB;EACf4Q,MAAAA,QAAQ;EACX;;EAED,QAAIA,QAAJ,EAAc;EACV,WAAK,IAAInQ,CAAC,GAACuO,SAAS,CAACQ,KAAV,CAAgBC,KAA3B,EAAkChP,CAAC,IAAGuO,SAAS,CAACQ,KAAV,CAAgBE,GAAtD,EAA2DjP,CAAC,EAA5D,EAAgE;EAC5D,YAAIoQ,QAAQ,GAAG,CAAf;;EACAjT,QAAAA,CAAC,CAACiD,IAAF,CAAQmO,SAAS,CAAChH,IAAlB,EAAwB,UAAU8I,EAAV,EAAc;EAClC,cAAIA,EAAE,CAACf,KAAH,IAAY/P,GAAZ,IAAmB8Q,EAAE,CAAC9I,IAAH,CAAQvH,CAAR,KAAcT,GAAG,CAAE8Q,EAAE,CAACf,KAAL,CAAxC,EAAsD;EAClDc,YAAAA,QAAQ;EACX;EACJ,SAJD;;EAKA,YAAIA,QAAQ,IAAID,QAAhB,EAA0B;EACtB;EACAnK,UAAAA,GAAG,CAACpI,IAAJ,CAAU6Q,aAAa,CAACzO,CAAD,CAAvB;EACH;EACJ;EACJ;EAED,WAAOgG,GAAP;EACH;;EAED,WAAS6I,aAAT,CAAwBS,KAAxB,EAA+B;EAC3B,QAAI/H,IAAJ;;EACApK,IAAAA,CAAC,CAACiD,IAAF,CAAQmO,SAAS,CAAChH,IAAlB,EAAyB,UAAUsD,CAAV,EAAa;EAClC,UAAIA,CAAC,CAACyE,KAAF,IAAWA,KAAf,EAAsB;EAClB/H,QAAAA,IAAI,GAAGsD,CAAP;EACH;EACJ,KAJD;;EAKA,QAAItD,IAAJ,EAAU;EACN,aAAOA,IAAI,CAACA,IAAL,CAAU1J,KAAV,CAAiB0Q,SAAS,CAACQ,KAAV,CAAgBC,KAAjC,EAAwCT,SAAS,CAACQ,KAAV,CAAgBE,GAAhB,GAAoB,CAA5D,CAAP;EACH,KAFD,MAEO;EACH,aAAO,EAAP;EACH;EACJ;;EAED,SAAOV,SAAP;EACH;;ECnOD,IAAM+B,UAAU,GAAI,OAAQpO,MAAR,KAAoB,WAApB,GAAkCA,MAAM,CAACqO,gBAAzC,GAA4D,CAAhF;;EAEA,IAAIC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAUC,OAAV,EAAoBC,MAApB,EAA4B;EAClD,MAAIC,QAAQ,CAAEF,OAAF,CAAZ,EAAyB;EAAA,QACZG,UADY,GACrB,SAASA,UAAT,CAAqBC,EAArB,EAA0B/I,IAA1B,EAAiCgJ,EAAjC,EAAqC;EACjC,UAAID,EAAE,CAAC/Q,MAAP,EAAe;EACX,aAAI,IAAIE,CAAC,GAAC,CAAV,EAAcA,CAAC,GAAG6Q,EAAE,CAAC/Q,MAArB,EAA8BE,CAAC,EAA/B,EAAkC;EAC9B4Q,UAAAA,UAAU,CAAEC,EAAE,CAAC7Q,CAAD,CAAJ,EAAU8H,IAAV,EAAiBgJ,EAAjB,CAAV;EACH;EACJ,OAJD,MAIO;EACHD,QAAAA,EAAE,CAAEJ,OAAF,CAAF,CAAe3I,IAAf,EAAsBgJ,EAAtB,EAA2B,KAA3B;EACH;EACJ,KAToB;EAUrB,WAAOF,UAAP;EACH,GAXD,MAWO;EAAA,QACMG,OADN,GACH,SAASA,OAAT,CAAkBF,EAAlB,EAAuB/I,IAAvB,EAA8BgJ,EAA9B,EAAkC;EAC9B,UAAID,EAAE,CAAC/Q,MAAP,EAAe;EACX,aAAI,IAAIE,CAAC,GAAC,CAAV,EAAcA,CAAC,GAAG6Q,EAAE,CAAC/Q,MAArB,EAA8BE,CAAC,EAA/B,EAAkC;EAC9B+Q,UAAAA,OAAO,CAAEF,EAAE,CAAC7Q,CAAD,CAAJ,EAAQ8H,IAAR,EAAagJ,EAAb,CAAP;EACH;EACJ,OAJD,MAIO;EACHD,QAAAA,EAAE,CAAEH,MAAF,CAAF,CAAc,OAAK5I,IAAnB,EAA0B,YAAU;EAChC,iBAAOgJ,EAAE,CAAC3Q,IAAH,CAAS0Q,EAAT,EAAc3O,MAAM,CAAC8O,KAArB,CAAP;EACH,SAFD;EAGH;EACJ,KAXE;EAYH,WAAOD,OAAP;EACH;EACJ,CA1BD;;AA4BA,UAAe;EACX;EACAE,EAAAA,KAAK,EAAG,eAASJ,EAAT,EAAY;EAChB,QAAG1T,CAAC,CAACsE,QAAF,CAAWoP,EAAX,CAAH,EAAkB;EACf,aAAOF,QAAQ,CAACO,cAAT,CAAwBL,EAAxB,CAAP;EACF;;EACD,QAAGA,EAAE,CAAClP,QAAH,IAAe,CAAlB,EAAoB;EACjB;EACA,aAAOkP,EAAP;EACF;;EACD,QAAGA,EAAE,CAAC/Q,MAAN,EAAa;EACV,aAAO+Q,EAAE,CAAC,CAAD,CAAT;EACF;;EACD,WAAO,IAAP;EACH,GAdU;EAeXM,EAAAA,MAAM,EAAG,gBAASN,EAAT,EAAY;EACjB,QAAIO,GAAG,GAAGP,EAAE,CAACQ,qBAAH,EAAV;EAAA,QACAC,GAAG,GAAGT,EAAE,CAACU,aADT;EAAA,QAEAC,IAAI,GAAGF,GAAG,CAACE,IAFX;EAAA,QAGAC,OAAO,GAAGH,GAAG,CAACI,eAHd;EAAA;EAMAC,IAAAA,SAAS,GAAGF,OAAO,CAACE,SAAR,IAAqBH,IAAI,CAACG,SAA1B,IAAuC,CANnD;EAAA,QAOAC,UAAU,GAAGH,OAAO,CAACG,UAAR,IAAsBJ,IAAI,CAACI,UAA3B,IAAyC,CAPtD;EAAA;EAUA;EACAC,IAAAA,IAAI,GAAG,CAXP;;EAYA,QAAIL,IAAI,CAACH,qBAAT,EAAgC;EAC5B,UAAIS,KAAK,GAAGN,IAAI,CAACH,qBAAL,EAAZ;EACAQ,MAAAA,IAAI,GAAG,CAACC,KAAK,CAACC,KAAN,GAAcD,KAAK,CAACE,IAArB,IAA2BR,IAAI,CAACS,WAAvC;EACH;;EACD,QAAIJ,IAAI,GAAG,CAAX,EAAa;EACTF,MAAAA,SAAS,GAAG,CAAZ;EACAC,MAAAA,UAAU,GAAG,CAAb;EACH;;EACD,QAAIM,GAAG,GAAGd,GAAG,CAACc,GAAJ,GAAQL,IAAR,IAAgB3P,MAAM,CAACiQ,WAAP,IAAsBV,OAAO,IAAIA,OAAO,CAACW,SAAR,GAAkBP,IAAnD,IAA2DL,IAAI,CAACY,SAAL,GAAeP,IAA1F,IAAkGF,SAA5G;EAAA,QACIK,IAAI,GAAGZ,GAAG,CAACY,IAAJ,GAASH,IAAT,IAAiB3P,MAAM,CAACmQ,WAAP,IAAqBZ,OAAO,IAAIA,OAAO,CAACa,UAAR,GAAmBT,IAAnD,IAA2DL,IAAI,CAACc,UAAL,GAAgBT,IAA5F,IAAoGD,UAD/G;EAGA,WAAO;EACHM,MAAAA,GAAG,EAAEA,GADF;EAEHF,MAAAA,IAAI,EAAEA;EAFH,KAAP;EAIH,GA3CU;EA4CXO,EAAAA,QAAQ,EAAG/B,mBAAmB,CAAE,kBAAF,EAAuB,aAAvB,CA5CnB;EA6CXgC,EAAAA,WAAW,EAAGhC,mBAAmB,CAAE,qBAAF,EAA0B,aAA1B,CA7CtB;EA8CXiC,EAAAA,KAAK,EAAE,eAAS5C,CAAT,EAAY;EACf,QAAIA,CAAC,CAAC4C,KAAN,EAAa,OAAO5C,CAAC,CAAC4C,KAAT,CAAb,KACK,IAAI5C,CAAC,CAAC6C,OAAN,EACD,OAAO7C,CAAC,CAAC6C,OAAF,IAAa/B,QAAQ,CAACe,eAAT,CAAyBY,UAAzB,GACZ3B,QAAQ,CAACe,eAAT,CAAyBY,UADb,GAC0B3B,QAAQ,CAACa,IAAT,CAAcc,UADrD,CAAP,CADC,KAGA,OAAO,IAAP;EACR,GApDU;EAqDXK,EAAAA,KAAK,EAAE,eAAS9C,CAAT,EAAY;EACf,QAAIA,CAAC,CAAC8C,KAAN,EAAa,OAAO9C,CAAC,CAAC8C,KAAT,CAAb,KACK,IAAI9C,CAAC,CAAC+C,OAAN,EACD,OAAO/C,CAAC,CAAC+C,OAAF,IAAajC,QAAQ,CAACe,eAAT,CAAyBU,SAAzB,GACZzB,QAAQ,CAACe,eAAT,CAAyBU,SADb,GACyBzB,QAAQ,CAACa,IAAT,CAAcY,SADpD,CAAP,CADC,KAGA,OAAO,IAAP;EACR,GA3DU;;EA4DX;;;;;EAKAS,EAAAA,YAAY,EAAG,sBAAUC,MAAV,EAAmBC,OAAnB,EAA6BC,EAA7B,EAAiC;EAC5C,QAAIC,MAAM,GAAGtC,QAAQ,CAACuC,aAAT,CAAuB,QAAvB,CAAb;EACAD,IAAAA,MAAM,CAACE,KAAP,CAAaC,QAAb,GAAwB,UAAxB;EACAH,IAAAA,MAAM,CAACE,KAAP,CAAaE,KAAb,GAAsBP,MAAM,GAAG,IAA/B;EACAG,IAAAA,MAAM,CAACE,KAAP,CAAaG,MAAb,GAAsBP,OAAO,GAAG,IAAhC;EACAE,IAAAA,MAAM,CAACE,KAAP,CAAanB,IAAb,GAAsB,CAAtB;EACAiB,IAAAA,MAAM,CAACE,KAAP,CAAajB,GAAb,GAAsB,CAAtB;EACAe,IAAAA,MAAM,CAACM,YAAP,CAAoB,OAApB,EAA6BT,MAAM,GAAGxC,UAAtC;EACA2C,IAAAA,MAAM,CAACM,YAAP,CAAoB,QAApB,EAA8BR,OAAO,GAAGzC,UAAxC;EACA2C,IAAAA,MAAM,CAACM,YAAP,CAAoB,IAApB,EAA0BP,EAA1B;EACA,WAAOC,MAAP;EACH,GA5EU;EA6EXO,EAAAA,UAAU,EAAE,oBAASV,MAAT,EAAkBC,OAAlB,EAA2BC,EAA3B,EAA8B;EACtC,QAAIS,IAAI,GAAG9C,QAAQ,CAACuC,aAAT,CAAuB,KAAvB,CAAX;EACAO,IAAAA,IAAI,CAACC,SAAL,GAAiB,aAAjB;EACAD,IAAAA,IAAI,CAACN,KAAL,CAAWQ,OAAX,IAAsB,2CAAtB;EAEA,QAAIC,SAAS,GAAGjD,QAAQ,CAACuC,aAAT,CAAuB,KAAvB,CAAhB;EACAU,IAAAA,SAAS,CAACT,KAAV,CAAgBQ,OAAhB,IAA2B,6BAA6Bb,MAA7B,GAAsC,YAAtC,GAAqDC,OAArD,GAA8D,KAAzF,CANsC;;EAStC,QAAIc,OAAO,GAAGlD,QAAQ,CAACuC,aAAT,CAAuB,KAAvB,CAAd;EACAW,IAAAA,OAAO,CAACV,KAAR,CAAcQ,OAAd,IAAyB,6BAA6Bb,MAA7B,GAAsC,YAAtC,GAAqDC,OAArD,GAA8D,KAAvF;EAEAU,IAAAA,IAAI,CAACK,WAAL,CAAiBF,SAAjB;EACAH,IAAAA,IAAI,CAACK,WAAL,CAAiBD,OAAjB;EAEA,WAAO;EACHJ,MAAAA,IAAI,EAAGA,IADJ;EAEHG,MAAAA,SAAS,EAAEA,SAFR;EAGHC,MAAAA,OAAO,EAAEA;EAHN,KAAP;EAKH,GAjGU;;EAAA,CAAf;;EChCA;;;EAGA,IAAME,OAAO,GAAG,CAAC,SAAD,EAAW,SAAX,EAAqB,SAArB,EAA+B,SAA/B,EAAyC,SAAzC,EAAmD,SAAnD,EAA6D,SAA7D,EAAuE,SAAvE,EAAiF,SAAjF,EAA2F,SAA3F,EAAqG,SAArG,EAA+G,SAA/G,CAAhB;AACA,oBAAe;EACXC,EAAAA,MAAM,EAAGD,OADE;EAEXE,EAAAA,GAAG,EAAG,aAAUD,MAAV,EAAkB;EACpB,SAAKA,MAAL,GAAcA,MAAd;EACA;;;;;;;EAMA,WAAO,KAAKA,MAAZ;EACH,GAXU;EAYXE,EAAAA,GAAG,EAAG,eAAW;EACb,WAAO,KAAKF,MAAZ;EACH;EAdU,CAAf;;ECJA;AACA,EAKA,IAAIG,sBAAsB,GAAG,IAA7B;;AAEA,eAAe;EACXC,EAAAA,MAAM,EAAG,gBAAUvD,EAAV,EAAcwD,KAAd,EAAqB/L,IAArB,EAA2B;EAChC,QAAIgM,KAAK,GAAG,IAAZ;EACA,QAAIpL,EAAE,GAAG,IAAT;EAEA,QAAI3B,IAAI,GAAGD,SAAS,CAAE+M,KAAF,CAApB;EACA,QAAIhN,GAAG,GAAID,YAAY,CAAEkB,IAAF,CAAvB;;EAEA,QAAIiM,QAAQ,GAAG,SAAXA,QAAW,GAAU;EACrBrL,MAAAA,EAAE,CAACsL,SAAH,CAAcF,KAAK,CAACtB,EAApB,IAA2B,IAA3B;EACA,aAAO9J,EAAE,CAACsL,SAAH,CAAcF,KAAK,CAACtB,EAApB,CAAP;EACH,KAHD,CAPgC;;;EAahC,QAAIyB,QAAQ,GAAGC,CAAG,CAACzD,KAAJ,CAAUJ,EAAV,EAAc8D,YAAd,CAA2B,UAA3B,CAAf;;EACA,QAAIF,QAAQ,IAAI7P,SAAhB,EAA2B;EACvB,UAAIgQ,MAAM,GAAG1L,EAAE,CAACsL,SAAH,CAAcC,QAAd,CAAb;;EACA,UAAIG,MAAJ,EAAY;EACRA,QAAAA,MAAM,CAACC,OAAP;;EACAD,QAAAA,MAAM,CAACE,GAAP,IAAcF,MAAM,CAACE,GAAP,CAAW,SAAX,EAAuBP,QAAvB,CAAd;EACH;EACD,aAAOrL,EAAE,CAACsL,SAAH,CAAcC,QAAd,CAAP;EACH;;EAGD,QAAIM,SAAS,GAAG,CAAhB;;EACA,QAAIpN,OAAO,CAAEW,IAAF,CAAX,EAAqB;EACjByM,MAAAA,SAAS,GAAG,CAAZ;EACH;;EAED,QAAIC,gBAAgB,GAAG9L,EAAE,CAAC+L,oBAAH,CAAyBF,SAAzB,CAAvB,CA7BgC;;;EAgChC,QAAIG,KAAK,GAAGhM,EAAE,CAACiM,mBAAH,CAAuB,OAAvB,EAAgCJ,SAAhC,CAAZ,CAhCgC;;;EAmC5BT,IAAAA,KAAK,GAAG,IAAIY,KAAJ,CAAWrE,EAAX,EAAetJ,IAAf,EAAqBF,GAArB,EAA0B2N,gBAA1B,CAAR;;EACA,QAAIV,KAAJ,EAAW;EACPA,MAAAA,KAAK,CAACc,IAAN;EAEAlM,MAAAA,EAAE,CAACsL,SAAH,CAAcF,KAAK,CAACtB,EAApB,IAA2BsB,KAA3B;EACAA,MAAAA,KAAK,CAACe,EAAN,CAAS,SAAT,EAAqBd,QAArB;EACH;EAEL;EACA;;EAEA,WAAOD,KAAP;EACH,GAhDU;EAiDXgB,EAAAA,cAAc,EAAE,wBAAUtB,MAAV,EAAkB;EAC9BuB,IAAAA,WAAW,CAACtB,GAAZ,CAAiBD,MAAjB;EACH,GAnDU;EAoDXwB,EAAAA,cAAc,EAAE,0BAAU;EACtB,WAAOD,WAAW,CAACrB,GAAZ,EAAP;EACH,GAtDU;EAwDXM,EAAAA,SAAS,EAAG,EAxDD;EAyDXiB,EAAAA,QAAQ,EAAG,kBAAUC,OAAV,EAAmB;EAC1B,WAAO,KAAKlB,SAAL,CAAgBkB,OAAhB,CAAP;EACH,GA3DU;EA4DXC,EAAAA,MAAM,EAAG,kBAAU;EACf;EACA,SAAK,IAAIC,CAAT,IAAc,KAAKpB,SAAnB,EAA8B;EAC1B,WAAKA,SAAL,CAAgBoB,CAAhB,EAAoBD,MAApB;EACH;EACJ,GAjEU;EAmEX;EACAE,EAAAA,UAAU,EAAG,oBAAUC,aAAV,EAA0BC,WAA1B,EAAuC;EAChD;EACA,QAAI,CAAC,KAAKvR,OAAL,CAAcsR,aAAd,CAAL,EAAoC;EAChC,aAAOC,WAAW,IAAI,EAAtB;EACH;EACD,QAAIC,aAAa,GAAG;EAChBC,MAAAA,MAAM,EAAE,oBADQ;EAEhBC,MAAAA,MAAM,EAAE;EAFQ,KAApB;;EAIA,QAAIzO,KAAK,GAAG,SAARA,KAAQ,CAAS0O,MAAT,EAAgB;EACxB,aAAO3O,IAAI,CAACC,KAAL,CAAY0O,MAAZ,EAAoB,UAAS7W,GAAT,EAAcsB,KAAd,EAAoB;EAC3C,YAAI,OAAOA,KAAP,KAAiB,QAAlB,IACCA,KAAK,CAAC/B,OAAN,CAAcmX,aAAa,CAACE,MAA5B,IAAsC,CADvC,IAECtV,KAAK,CAAC/B,OAAN,CAAcmX,aAAa,CAACC,MAA5B,KAAuC,CAF3C,EAGC;EACG,iBAAQ,IAAItY,QAAJ,CAAa,YAAYiD,KAAK,CAACwV,OAAN,CAAcJ,aAAa,CAACC,MAA5B,EAAoC,EAApC,EAAwCG,OAAxC,CAAgDJ,aAAa,CAACE,MAA9D,EAAsE,EAAtE,CAAzB,CAAD,EAAP;EACH;EACD,eAAOtV,KAAP;EACH,OARM,KAQD,EARN;EASH,KAVD;;EAWA,QAAIyG,GAAG,GAAGI,KAAK,CAAE4O,kBAAkB,CAAE,KAAK7R,OAAL,CAAcsR,aAAd,KAAiC,EAAnC,CAApB,CAAf;;EACA,QAAIC,WAAJ,EAAiB;EACb1O,MAAAA,GAAG,GAAGlK,CAAC,CAACoH,MAAF,CAAU,IAAV,EAAgB8C,GAAhB,EAAqB0O,WAArB,CAAN;EACH;EACD,WAAO1O,GAAP;EACH,GA7FU;EA+FXiP,EAAAA,UAAU,EAAE;EACRC,IAAAA,IAAI,EAAG;EACH;;;;;;;;;;;;;;;EADG,KADC;EAkBRC,IAAAA,IAAI,EAAG;EAAA;EAlBC,GA/FD;EAqHXvB,EAAAA,oBArHW,gCAqHWF,SArHX,EAqHsB;EAC7B,QAAI0B,KAAK,GAAG,KAAKH,UAAL,CAAgBC,IAA5B;;EACA,QAAIxB,SAAS,IAAI,CAAjB,EAAoB;EAChB0B,MAAAA,KAAK,GAAG,KAAKH,UAAL,CAAgBE,IAAxB;EACH;;EACD,QAAI,CAACC,KAAK,CAACC,OAAX,EAAoB;EAChBD,MAAAA,KAAK,CAACC,OAAN,GAAgB,EAAhB;EACH;;EACD,QAAI,CAACD,KAAK,CAACvC,GAAX,EAAgB;EACZuC,MAAAA,KAAK,CAACvC,GAAN,GAAY,UAAUnT,IAAV,EAAgB+G,IAAhB,EAAsB;EAC9B,YAAI,CAACA,IAAL,EAAW;EACPA,UAAAA,IAAI,GAAG,OAAP;EACH;EACD/G,QAAAA,IAAI,GAAGA,IAAI,CAAC4V,WAAL,EAAP;EACA7O,QAAAA,IAAI,GAAGA,IAAI,CAAC6O,WAAL,EAAP;EACA,YAAIC,OAAO,GAAGH,KAAK,CAACC,OAAN,CAAe3V,IAAf,CAAd;;EACA,YAAI6V,OAAO,IAAIA,OAAO,CAAC9O,IAAD,CAAtB,EAA8B;EAC1B,iBAAO8O,OAAO,CAAC9O,IAAD,CAAd;EACH;EACJ,OAVD;EAWH;EACD,WAAO2O,KAAP;EACH,GA3IU;;EA4IX;;;;;;EAMAI,EAAAA,iBAlJW,6BAkJQC,UAlJR,EAkJoB/V,IAlJpB,EAmJX;EACI,QAAIgU,SAAS,GAAG,CAAhB;EACA,QAAIjN,IAAI,GAAG,OAAX;;EAGA,QAAI5E,SAAS,CAACpD,MAAV,IAAoB,CAAxB,EAA2B;EACvB,UAAIiX,IAAI,GAAG7T,SAAS,CAAC,CAAD,CAApB;;EACA,UAAI/F,CAAC,CAACkE,QAAF,CAAY0V,IAAZ,CAAJ,EAAwB;EACpB,YAAIA,IAAI,IAAI,CAAZ,EAAe;EACXhC,UAAAA,SAAS,GAAG,CAAZ;EACH;EACJ;;EACD,UAAI5X,CAAC,CAACsE,QAAF,CAAYsV,IAAZ,CAAJ,EAAwB;EACpBjP,QAAAA,IAAI,GAAGiP,IAAP;EACH;EACJ;;EACD,QAAI7T,SAAS,CAACpD,MAAV,IAAoB,CAAxB,EAA2B;EACvB;EACAgI,MAAAA,IAAI,GAAG5E,SAAS,CAAE,CAAF,CAAhB;;EACA,UAAIA,SAAS,CAAC,CAAD,CAAT,IAAgB,CAApB,EAAuB;EACnB6R,QAAAA,SAAS,GAAG,CAAZ;EACH;EACJ;;EAED,QAAI0B,KAAK,GAAG,KAAKxB,oBAAL,CAA2BF,SAA3B,EAAuC2B,OAAnD;;EAEA3V,IAAAA,IAAI,GAAGA,IAAI,CAAC4V,WAAL,EAAP;EACA7O,IAAAA,IAAI,GAAGA,IAAI,CAAC6O,WAAL,EAAP;EAEA,QAAIK,KAAK,GAAGP,KAAK,CAAE1V,IAAF,CAAjB;;EACA,QAAI,CAACiW,KAAL,EAAY;EACRA,MAAAA,KAAK,GAAGP,KAAK,CAAE1V,IAAF,CAAL,GAAgB,EAAxB;EAGH;;EAED,QAAI,CAACiW,KAAK,CAAElP,IAAF,CAAV,EAAoB;EAChBkP,MAAAA,KAAK,CAAElP,IAAF,CAAL,GAAgBgP,UAAhB;EACH;EACD,WAAOL,KAAP;EACH,GA3LU;;EA4LX;;;;;;EAMAtB,EAAAA,mBAlMW,+BAkMUpU,IAlMV,EAkMgB;EACvB,QAAIgU,SAAS,GAAG,CAAhB;EACA,QAAIjN,IAAI,GAAG,OAAX;;EAEA,QAAI5E,SAAS,CAACpD,MAAV,IAAoB,CAAxB,EAA2B;EACvB,UAAImX,IAAI,GAAG/T,SAAS,CAAC,CAAD,CAApB;;EACA,UAAI/F,CAAC,CAACkE,QAAF,CAAY4V,IAAZ,CAAJ,EAAwB;EACpB,YAAIA,IAAI,IAAI,CAAZ,EAAe;EACXlC,UAAAA,SAAS,GAAG,CAAZ;EACH;EACJ;;EACD,UAAI5X,CAAC,CAACsE,QAAF,CAAYwV,IAAZ,CAAJ,EAAwB;EACpBnP,QAAAA,IAAI,GAAGmP,IAAP;EACH;EACJ;;EACD,QAAI/T,SAAS,CAACpD,MAAV,IAAoB,CAAxB,EAA2B;EACvB;EACAgI,MAAAA,IAAI,GAAG5E,SAAS,CAAE,CAAF,CAAhB;;EACA,UAAIA,SAAS,CAAC,CAAD,CAAT,IAAgB,CAApB,EAAuB;EACnB6R,QAAAA,SAAS,GAAG,CAAZ;EACH;EACJ;EAEDhU,IAAAA,IAAI,GAAGA,IAAI,CAAC4V,WAAL,EAAP;EACA7O,IAAAA,IAAI,GAAGA,IAAI,CAAC6O,WAAL,EAAP;;EACA,QAAIK,KAAK,GAAG,KAAK/B,oBAAL,CAA2BF,SAA3B,EAAuC2B,OAAvC,CAAgD3V,IAAhD,CAAZ;;EACA,WAAOiW,KAAK,GAAGA,KAAK,CAAElP,IAAF,CAAR,GAAmBlD,SAA/B;EACH,GA7NU;EA8NXsS,EAAAA,mBAAmB,EAAE,6BAAUC,IAAV,EAAgB;EACjChD,IAAAA,sBAAsB,GAAGgD,IAAzB;EACH,GAhOU;EAiOXC,EAAAA,mBAAmB,EAAE,6BAAUD,IAAV,EAAgB;EACjC,WAAOhD,sBAAP;EACH;EAnOU,CAAf;;ECRA;;ECEA,IAAMkD,MAAM,GAAG,GAAf;;EACA,IAAMC,GAAG,GAAG7X,IAAI,CAAC8X,GAAjB;EACA,IAAMC,GAAG,GAAG/X,IAAI,CAACgY,GAAjB;;MAEqBC;;;EACjB,mBAAsC;EAAA,QAA1BrQ,GAA0B,uEAApB,EAAoB;EAAA,QAAhBkH,SAAgB,uEAAJ,EAAI;;EAAA;;EAElC,SAAKjG,IAAL,GAAYnL,CAAC,CAACgH,KAAF,CAAQkD,GAAR,CAAZ;EACA,SAAKkH,SAAL,GAAiBA,SAAjB;EAEA,SAAKoJ,UAAL,GAAkB,CAAlB;EAEA,SAAKtP,OAAL,GAAe,EAAf;EAEA,SAAKuP,UAAL,GAAkB,KAAKtP,IAAL,CAAUsP,UAA5B;EACA,SAAKC,SAAL,GAAiBpY,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAc,KAAK4F,IAAL,CAAUuP,SAAxB,CAAjB;EACA,SAAKtM,IAAL,GAAY,KAAKjD,IAAL,CAAUiD,IAAtB;EAEA,SAAKoB,UAAL,GAAkB,EAAlB,CAbkC;;EAiBlC,SAAKmL,SAAL,GAAiB,CAAjB,CAjBkC;;EAkBlC,SAAKC,SAAL,GAAiB,CAAjB,CAlBkC;EAoBrC;;;;uCAEgB;EAAA;;EACb,UAAIJ,UAAU,GAAG,CAAjB;EACA,UAAIK,UAAU,GAAG,CAAjB;EACA,UAAIC,YAAY,GAAG,CAAnB;EACA,UAAI5Q,GAAG,GAAG,KAAKiB,IAAf;EACA,UAAI4P,KAAJ,EAAWC,QAAX,EAAqBC,IAArB,EAA2BC,IAA3B,EAAiCC,QAAjC,EAA2CC,QAA3C;EACA,UAAIC,eAAe,GAAG,CAAtB;EAEA,UAAIC,SAAS,GAAGpR,GAAG,CAACqR,IAAJ,CAASD,SAAzB;EACA,UAAIE,WAAW,GAAGtR,GAAG,CAACqR,IAAJ,CAASC,WAA3B;EACA,UAAIC,OAAO,GAAGvR,GAAG,CAACqR,IAAJ,CAASE,OAAvB;EAEA,WAAKjM,UAAL,CAAgBzO,OAAhB,CAAwB,UAAC2D,IAAD,EAAO7B,CAAP,EAAa;EACjC,YAAI,CAAC6B,IAAI,CAACgX,OAAV,EAAmB;EACnBlB,QAAAA,UAAU,IAAIxW,KAAK,CAAC,CAACU,IAAI,CAACjB,KAAP,CAAL,GAAqB,CAArB,GAAyB,CAACiB,IAAI,CAACjB,KAA7C;;EAEA,YAAIiB,IAAI,CAACiX,WAAT,EAAsB;EAClB,UAAA,KAAI,CAAChB,SAAL,GAAiBrY,IAAI,CAACsC,GAAL,CAASF,IAAI,CAACkX,WAAd,EAA2BpB,UAA3B,CAAjB;EACA,UAAA,KAAI,CAACI,SAAL,GAAiBtY,IAAI,CAACiD,GAAL,CAASb,IAAI,CAACkX,WAAd,EAA2BpB,UAA3B,CAAjB;EACH;EACJ,OARD;EAUA,WAAKA,UAAL,GAAkBA,UAAlB;;EAEA,UAAIA,UAAU,GAAG,CAAjB,EAAoB;EAEhB;EACA;EACA;EAEA;EACA;EACAM,QAAAA,YAAY,GAAG9a,CAAC,CAAC2H,eAAF,CAAkB,KAAK8S,UAAvB,EAAmCP,MAAnC,CAAf,CARgB;EAUhB;;EAEA,aAAK1K,UAAL,CAAgBzO,OAAhB,CAAwB,UAAC2D,IAAD,EAAO7B,CAAP,EAAa;EACjCgY,UAAAA,UAAU,GAAGnW,IAAI,CAACjB,KAAL,GAAa+W,UAA1B,CADiC;;EAGjC,cAAI,CAAC9V,IAAI,CAACgX,OAAV,EAAmB;EACfb,YAAAA,UAAU,GAAG,CAAb;EACH;EAEDE,UAAAA,KAAK,GAAG,KAAI,CAACL,SAAL,GAAiBG,UAAzB,CAPiC;EASjC;;EACAG,UAAAA,QAAQ,GAAGF,YAAY,GAAGC,KAA1B;EACAI,UAAAA,QAAQ,GAAGL,YAAY,GAAGC,KAAK,GAAG,GAAlC;EAEAE,UAAAA,IAAI,GAAGd,GAAG,CAACna,CAAC,CAACgI,QAAF,CAAWmT,QAAX,CAAD,CAAV;EACAD,UAAAA,IAAI,GAAGb,GAAG,CAACra,CAAC,CAACgI,QAAF,CAAWmT,QAAX,CAAD,CAAV;EAEAF,UAAAA,IAAI,GAAGA,IAAI,CAAC9K,OAAL,CAAa,CAAb,CAAP;EACA+K,UAAAA,IAAI,GAAGA,IAAI,CAAC/K,OAAL,CAAa,CAAb,CAAP;EACAiL,UAAAA,QAAQ,GAAG,KAAI,CAACS,WAAL,CAAiBV,QAAjB,CAAX,CAlBiC;;EAqBjC,cAAI,CAAC,CAACzW,IAAI,CAACiX,WAAX,EAAwB;EACpB;EACAL,YAAAA,SAAS,GAAG/O,QAAQ,CAAC,CAACrC,GAAG,CAACqR,IAAJ,CAASD,SAAT,GAAqBpR,GAAG,CAACqR,IAAJ,CAASC,WAA/B,KAA+C,CAAC9W,IAAI,CAACkX,WAAL,GAAmB,KAAI,CAAChB,SAAzB,KAAuC,KAAI,CAACD,SAAL,GAAiB,KAAI,CAACC,SAA7D,CAA/C,IAA0H1Q,GAAG,CAACqR,IAAJ,CAASC,WAApI,CAApB;EACH;;EACDxb,UAAAA,CAAC,CAACoH,MAAF,CAAS1C,IAAT,EAAe;EACX4W,YAAAA,SAAS,EAATA,SADW;EAEXE,YAAAA,WAAW,EAAXA,WAFW;EAGXf,YAAAA,UAAU,EAAEK,YAHD;EAGe;EAC1BE,YAAAA,QAAQ,EAARA,QAJW;EAID;EACVG,YAAAA,QAAQ,EAARA,QALW;EAKA;EAEXM,YAAAA,OAAO,EAAPA,OAPW;EASXK,YAAAA,UAAU,EAAEL,OAAO,GAAG,GAAV,GAAgBR,IATjB;EASuB;EAClCc,YAAAA,UAAU,EAAEN,OAAO,GAAG,GAAV,GAAgBP,IAVjB;EAUuB;EAElCc,YAAAA,OAAO,EAAEV,SAAS,GAAGL,IAZV;EAaXgB,YAAAA,OAAO,EAAEX,SAAS,GAAGJ,IAbV;EAcXgB,YAAAA,IAAI,EAAE,CAACZ,SAAS,GAAGG,OAAb,IAAwBR,IAdnB;EAeXkB,YAAAA,IAAI,EAAE,CAACb,SAAS,GAAGG,OAAb,IAAwBP,IAfnB;EAgBXkB,YAAAA,KAAK,EAAE,CAACd,SAAS,GAAGG,OAAb,IAAwBR,IAhBpB;EAiBXoB,YAAAA,KAAK,EAAE,CAACf,SAAS,GAAGG,OAAb,IAAwBP,IAjBpB;EAoBXoB,YAAAA,eAAe,EAAEzB,UApBN;EAqBXA,YAAAA,UAAU,EAAE,CAACA,UAAU,GAAG,GAAd,EAAmB1K,OAAnB,CAA2BkL,eAA3B,CArBD;EAuBXD,YAAAA,QAAQ,EAARA,QAvBW;EAuBD;EACVmB,YAAAA,WAAW,EAAEnB,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAA7B,GAAiC,CAAjC,GAAqC,CAxBvC;EAyBXH,YAAAA,IAAI,EAAJA,IAzBW;EA0BXC,YAAAA,IAAI,EAAJA;EA1BW,WAAf;;EA6BAJ,UAAAA,YAAY,IAAIC,KAAhB;EAGH,SAzDD;EA2DH;EAGJ;EACD;;;;;;;gCAIU3J,WAAW;EACjB,WAAKA,SAAL,GAAiBA,SAAS,IAAI,EAA9B;EAEA,WAAKoJ,UAAL,GAAkB,CAAlB;EAEA,WAAKtP,OAAL,GAAe,EAAf;EACA,WAAKuP,UAAL,GAAkB,KAAKtP,IAAL,CAAUsP,UAAV,IAAwB,CAAC,EAA3C;EACA,WAAKC,SAAL,GAAiB,KAAKvP,IAAL,CAAUuP,SAAV,IAAuB,GAAxC;EAEA,WAAKlL,UAAL,GAAkB,EAAlB;EACH;;;kCACmB;EAAA,UAAVtF,GAAU,uEAAJ,EAAI;EAChB5J,MAAAA,MAAM,CAACkc,MAAP,CAAc,KAAKrR,IAAnB,EAAyBjB,GAAzB;EACA,WAAKuQ,UAAL,GAAkB,KAAKtP,IAAL,CAAUsP,UAA5B;EACA,WAAKC,SAAL,GAAiBpY,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAc,KAAK4F,IAAL,CAAUuP,SAAxB,CAAjB;EACA,WAAKtM,IAAL,GAAY,KAAKjD,IAAL,CAAUiD,IAAtB;EACH;;;mCACYgD,WAAW;EAAA;;EAEpB,UAAIhH,IAAI,GAAG,EAAX;EACA,UAAIF,GAAG,GAAG,KAAKiB,IAAf;EACA,UAAIgH,KAAK,GAAGjI,GAAG,CAACiI,KAAhB;EACA,UAAIsK,UAAU,GAAGvS,GAAG,CAACwS,UAAJ,IAAkBxS,GAAG,CAACyS,KAAJ,CAAUxK,KAA5B,IAAqCjI,GAAG,CAACiI,KAA1D;EACA,UAAIwJ,WAAW,GAAGzR,GAAG,CAACqR,IAAJ,CAASqB,MAA3B;EAEAxL,MAAAA,SAAS,GAAGA,SAAS,IAAI,KAAKA,SAA9B;EACA,WAAKA,SAAL,GAAiBA,SAAjB;EAEA,WAAKlG,OAAL,GAAe,EAAf;;EAEA,WAAK,IAAIrI,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGuC,SAAS,CAACzO,MAA9B,EAAsCE,CAAC,GAAGgM,CAA1C,EAA6ChM,CAAC,EAA9C,EAAkD;EAC9C,YAAIga,OAAO,GAAGzL,SAAS,CAACC,YAAV,CAAuBxO,CAAvB,CAAd;EAEA,YAAI2M,UAAU,GAAG;EACbqN,UAAAA,OAAO,EAAEA,OADI;EACI;EACjBnB,UAAAA,OAAO,EAAE,IAFI;EAEI;EAEjBjY,UAAAA,KAAK,EAAEoZ,OAAO,CAAC1K,KAAD,CAJD;EAKbwK,UAAAA,KAAK,EAAEE,OAAO,CAACJ,UAAD,CALD;EAMbK,UAAAA,KAAK,EAAEja;EANM,SAAjB;EASA,aAAKqI,OAAL,CAAazK,IAAb,CAAkBoc,OAAO,CAAC1K,KAAD,CAAzB;;EAEA,YAAI,KAAK4K,QAAL,CAAcpB,WAAd,EAA2BnM,UAA3B,CAAJ,EAA4C;EACxCA,UAAAA,UAAU,CAACmM,WAAX,GAAyBA,WAAzB;EACAnM,UAAAA,UAAU,CAACoM,WAAX,GAAyBiB,OAAO,CAAClB,WAAD,CAAhC;EACH;;EACDvR,QAAAA,IAAI,CAAC3J,IAAL,CAAU+O,UAAV;EACH;;EAED,UAAI,KAAKpB,IAAT,EAAe;EACX,aAAKlD,OAAL,GAAe,EAAf;EACAd,QAAAA,IAAI,CAACgE,IAAL,CAAU,UAAC6D,CAAD,EAAIG,CAAJ,EAAU;EAChB,cAAI,MAAI,CAAChE,IAAL,IAAa,KAAjB,EAAwB;EACpB,mBAAO6D,CAAC,CAACxO,KAAF,GAAU2O,CAAC,CAAC3O,KAAnB;EACH,WAFD,MAEO;EACH,mBAAO2O,CAAC,CAAC3O,KAAF,GAAUwO,CAAC,CAACxO,KAAnB;EACH;EACJ,SAND,EAFW;;EAWXzD,QAAAA,CAAC,CAACiD,IAAF,CAAOmH,IAAP,EAAa,UAACsD,CAAD,EAAI7K,CAAJ,EAAU;EACnB6K,UAAAA,CAAC,CAACoP,KAAF,GAAUja,CAAV;;EACA,UAAA,MAAI,CAACqI,OAAL,CAAazK,IAAb,CAAkBiN,CAAlB;EACH,SAHD;EAIH;EAED,WAAK8B,UAAL,GAAkBpF,IAAlB;EACA,aAAOA,IAAP;EACH;;;sCAEe;EACZ,aAAO,KAAKoF,UAAL,IAAmB,EAA1B;EACH;;;+BAEQ2C,OAAO3C,YAAY;EACxB,aAAO2C,KAAK,IAAKnS,CAAC,CAACsE,QAAF,CAAW6N,KAAX,KAAqBA,KAAK,IAAI3C,UAAU,CAACqN,OAA1D;EACH;;;kCACWG,KAAK;EAAE;EAEfA,MAAAA,GAAG,GAAGhd,CAAC,CAAC2H,eAAF,CAAkBqV,GAAlB,EAAuB9C,MAAvB,CAAN;EACA,UAAI+C,UAAU,GAAG1Q,QAAQ,CAACyQ,GAAG,GAAG,EAAP,CAAzB;EACA,UAAIE,SAAS,GAAG,CAAhB;;EACA,cAAQD,UAAR;EACI,aAAK,CAAL;EACIC,UAAAA,SAAS,GAAG,CAAZ;EACA;;EACJ,aAAK,CAAL;EACIA,UAAAA,SAAS,GAAG,CAAZ;EACA;;EACJ,aAAK,CAAL;EACIA,UAAAA,SAAS,GAAG,CAAZ;EACA;;EACJ,aAAK,CAAL;EACA,aAAK,CAAL;EACIA,UAAAA,SAAS,GAAG,CAAZ;EACA;EAbR;;EAeA,aAAOA,SAAP;EACH;EAED;;;;;;;uCAIiBhT,KAAK;EAClB;EACA,UAAImF,KAAK,GAAG,CAAC;EAAEjD,QAAAA,GAAG,EAAE;EAAP,OAAD,EAAmB;EAAEC,QAAAA,GAAG,EAAE;EAAP,OAAnB,CAAZ;EACA,UAAIiD,IAAI,GAAGD,KAAK,CAAC/O,MAAM,CAACyB,IAAP,CAAYmI,GAAZ,EAAiB,CAAjB,CAAD,CAAhB;EAEA,UAAIsF,UAAJ;;EACAxP,MAAAA,CAAC,CAACiD,IAAF,CAAO,KAAKuM,UAAZ,EAAwB,UAAU9K,IAAV,EAAgB;EACpC,YAAIA,IAAI,CAAC4K,IAAD,CAAJ,KAAepF,GAAG,CAACoF,IAAD,CAAtB,EAA8B;EAC1BE,UAAAA,UAAU,GAAG9K,IAAb;EACH;EACJ,OAJD;;EAMA,aAAO8K,UAAU,IAAI,EAArB;EACH;;;sCAEe;EAEf;;;mCAgEY2N,GAAGC,WAAW;EACvB,UAAIC,MAAM,GAAG,EAAb;;EACArd,MAAAA,CAAC,CAACiD,IAAF,CAAOma,SAAP,EAAkB,UAAUE,EAAV,EAAc;EAC5B;EACA,YAAIC,EAAE,GAAGjb,IAAI,CAACwF,EAAL,GAAUwV,EAAV,GAAe,GAAxB;;EACA,YAAIE,KAAK,GAAGjD,KAAK,CAACkD,mBAAN,CAA0BF,EAA1B,EAA8BJ,CAA9B,CAAZ;EACAE,QAAAA,MAAM,CAAC5c,IAAP,CAAY+c,KAAZ;EACH,OALD;;EAMA,aAAOH,MAAP;EACH;;;yCAvEyBA,QAAQpR,QAAQiK,OAAOC,QAAQ;EACrD,WAAK,IAAItT,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGwO,MAAM,CAAC1a,MAA3B,EAAmCE,CAAC,GAAGgM,CAAvC,EAA0ChM,CAAC,EAA3C,EAA+C;EAC3C,YAAI,CAAC0X,KAAK,CAACmD,gBAAN,CAAuBL,MAAM,CAACxa,CAAD,CAA7B,EAAkCoJ,MAAlC,EAA0CiK,KAA1C,EAAiDC,MAAjD,CAAL,EAA+D;EAC3D;EACAkH,UAAAA,MAAM,CAACpQ,MAAP,CAAcpK,CAAd,EAAiB,CAAjB;EACAA,UAAAA,CAAC,IAAKgM,CAAC,EAAP;EACH;EACJ;EACD,aAAOwO,MAAP;EACH;;;uCAEuBvS,GAAGmB,QAAQiK,OAAOC,QAAQ;EAC9C,UAAIwH,SAAS,GAAG;EAAEC,QAAAA,CAAC,EAAE9S,CAAC,CAAC8S,CAAF,GAAM3R,MAAM,CAAC2R,CAAlB;EAAqBC,QAAAA,CAAC,EAAE/S,CAAC,CAAC+S,CAAF,GAAM5R,MAAM,CAAC4R;EAArC,OAAhB;EACA,aAAO,EAAEF,SAAS,CAACC,CAAV,GAAc,CAAd,IAAmBD,SAAS,CAACC,CAAV,GAAc1H,KAAjC,IAA0CyH,SAAS,CAACE,CAAV,GAAc,CAAxD,IAA6DF,SAAS,CAACE,CAAV,GAAc1H,MAA7E,CAAP;EACH;;;;qCAGqB2H,KAAKX,GAAGlR,QAAQiK,OAAOC,QAAQ;EACjD,UAAItE,KAAK,GAAGiM,GAAG,CAAC,CAAD,CAAf;EACA,UAAIC,EAAE,GAAGD,GAAG,CAAC,CAAD,CAAZ;EACA,UAAIE,WAAW,GAAGD,EAAE,CAACE,MAAH,GAAYpM,KAAK,CAACoM,MAApC;;EACA,UAAIF,EAAE,CAACE,MAAH,GAAYpM,KAAK,CAACoM,MAAtB,EAA8B;EAC1BD,QAAAA,WAAW,GAAI1b,IAAI,CAACwF,EAAL,GAAU,CAAV,GAAciW,EAAE,CAACE,MAAlB,GAA4BpM,KAAK,CAACoM,MAAhD;EACH;EACD,UAAIC,OAAO,GAAG,CAACrM,KAAK,CAACoM,MAAN,GAAeD,WAAW,GAAG,CAA9B,KAAoC1b,IAAI,CAACwF,EAAL,GAAU,CAA9C,CAAd;EACA,aAAOyS,KAAK,CAACmD,gBAAN,CAAuBnD,KAAK,CAACkD,mBAAN,CAA0BS,OAA1B,EAAmCf,CAAnC,CAAvB,EAA8DlR,MAA9D,EAAsEiK,KAAtE,EAA6EC,MAA7E,CAAP;EACH;;;;uCAGuBqH,OAAO;EAC3B,UAAIW,GAAG,GAAG7b,IAAI,CAACwF,EAAL,GAAU,CAApB;EACA,aAAO,CAACxF,IAAI,CAAC8b,KAAL,CAAWZ,KAAK,CAACK,CAAjB,EAAoBL,KAAK,CAACI,CAA1B,IAA+BO,GAAhC,IAAuCA,GAA9C;EACH;;;;0CAG0BF,QAAQd,GAAG;EAClC,UAAIkB,EAAE,GAAG/b,IAAI,CAACwF,EAAd;EACA,UAAI8V,CAAC,GAAGtb,IAAI,CAAC8X,GAAL,CAAS6D,MAAT,IAAmBd,CAA3B;;EACA,UAAIc,MAAM,IAAKI,EAAE,GAAG,CAAhB,IAAsBJ,MAAM,IAAII,EAAE,GAAG,CAAL,GAAS,CAA7C,EAAgD;EAC5C;EACAT,QAAAA,CAAC,GAAG,CAAJ;EACH;EACD,UAAIC,CAAC,GAAGvb,IAAI,CAACgY,GAAL,CAAS2D,MAAT,IAAmBd,CAA3B;;EACA,UAAIc,MAAM,GAAGI,EAAT,IAAe,CAAnB,EAAsB;EAClBR,QAAAA,CAAC,GAAG,CAAJ;EACH;EACD,aAAO;EACHD,QAAAA,CAAC,EAAEA,CADA;EAEHC,QAAAA,CAAC,EAAEA;EAFA,OAAP;EAIH;;;gCAEgBnV,KAAKoB,aAAaoM,OAAOC,QAAQ;EAC9C,UAAIgH,CAAC,GAAG,CAAR;;EACA,UAAImB,MAAM,GAAGte,CAAC,CAAC4E,GAAF,CAAMkF,WAAN,CAAb;;EACA,UAAIyU,MAAM,GAAG,CAAb,CAH8C;;EAI9C,UAAIC,IAAI,GAAGjS,QAAQ,CAACjK,IAAI,CAACsC,GAAL,CAASsR,KAAT,EAAgBC,MAAhB,IAA0B,CAA3B,CAAnB;EAEAgH,MAAAA,CAAC,GAAGqB,IAAI,IAAI,CAAC9V,GAAG,GAAG6V,MAAP,KAAkBD,MAAM,GAAGC,MAA3B,CAAJ,CAAR;EACA,aAAOpB,CAAP;EACH;;;;;;EC7TL;;;;;;;AAOA;EAEA,IAAIsB,KAAK,GAAG,SAARA,KAAQ,CAAUC,GAAV,EAAgB;EAC3B,MAAIC,SAAS,GAAG,aAAhB;;EACG,MAAI3e,CAAC,CAACsE,QAAF,CAAYoa,GAAZ,CAAJ,EAAuB;EACtBC,IAAAA,SAAS,GAAGD,GAAZ;EACA;;EACD,MAAI1e,CAAC,CAACyE,QAAF,CAAYia,GAAZ,KAAqBA,GAAG,CAAC/T,IAA7B,EAAmC;EAClCgU,IAAAA,SAAS,GAAGD,GAAG,CAAC/T,IAAhB;EACA;EAED,OAAKnE,MAAL,GAAc,IAAd;EACA,OAAKoY,aAAL,GAAqB,IAArB;EACA,OAAKjU,IAAL,GAAcgU,SAAd;EACA,OAAKnB,KAAL,GAAc,IAAd;EAEA,OAAKqB,gBAAL,GAAwB,KAAxB,CAdwB;EAe3B,CAfD;;EAgBAJ,KAAK,CAACre,SAAN,GAAkB;EACd0e,EAAAA,eAAe,EAAG,2BAAW;EACzB,SAAKD,gBAAL,GAAwB,IAAxB;EACH;EAHa,CAAlB;;ECzBA;;;;;;;AAOA,EAEA,IAAME,YAAY,GAAG,+DAArB;AAEA,cAAe;EACXC,EAAAA,MAAM,EAAGD,YAAY,CAACE,KAAb,CAAmB,KAAnB,CADE;EAEXC,EAAAA,QAAQ,EAAG,kBAAUC,IAAV,EAAgB;EACvB,QAAI,CAACA,IAAL,EAAY;EACR;EACH;;EACD,QAAInf,CAAC,CAACsE,QAAF,CAAY6a,IAAZ,CAAJ,EAAwB;EACpBA,MAAAA,IAAI,GAAGA,IAAI,CAACF,KAAL,CAAW,KAAX,CAAP;EACH;EACD,SAAKD,MAAL,GAAcD,YAAY,CAACE,KAAb,CAAmB,KAAnB,EAA0Bte,MAA1B,CAAkCwe,IAAlC,CAAd;EACH,GAVU;EAWXpI,EAAAA,GAAG,EAAE,eAAU;EACX,WAAO,KAAKiI,MAAZ;EACH;EAbU,CAAf;;ECXA;;;;;;;AAOA,EAIA;;;;;;EAKA,IAAII,OAAO,GAAG,SAAVA,OAAU,GAAW;EACrB;EACA,OAAKC,SAAL,GAAiB,EAAjB;EACH,CAHD;;EAKAD,OAAO,CAAChf,SAAR,GAAoB;EAChB;;;EAGAkf,EAAAA,eAAe,EAAG,2BAAU;EACxB,QAAIC,mBAAmB,GAAG,KAA1B;;EAEA,SAAK,IAAIC,CAAT,IAAc,KAAKH,SAAnB,EAA8B;EAC1B,UAAIrf,CAAC,CAAC0B,OAAF,CAAW+d,KAAK,CAAC1I,GAAN,EAAX,EAAwByI,CAAxB,IAA8B,CAAC,CAAnC,EAAsC;EAClCD,QAAAA,mBAAmB,GAAG,IAAtB;EACH;EACJ;EACD,SAAKG,aAAL,GAAqBH,mBAArB;EACH,GAbe;;EAchB;;;EAGAI,EAAAA,iBAAiB,EAAG,2BAAUC,KAAV,EAAiBC,QAAjB,EAA2B;EAE3C,QAAI,OAAOA,QAAP,IAAmB,UAAvB,EAAmC;EACjC;EACA,aAAO,KAAP;EACD;;EACD,QAAIC,SAAS,GAAG,IAAhB;EACA,QAAIC,IAAI,GAAQ,IAAhB;EACA,QAAIN,QAAK,GAAOG,KAAhB;;EACA,QAAI5f,CAAC,CAACsE,QAAF,CAAYsb,KAAZ,CAAJ,EAAyB;EACrBH,MAAAA,QAAK,GAAGG,KAAK,CAACX,KAAN,CAAY,KAAZ,CAAR;EACH;;EACDjf,IAAAA,CAAC,CAACiD,IAAF,CAAQwc,QAAR,EAAgB,UAAS9U,IAAT,EAAc;EAC1B,UAAI1J,GAAG,GAAG8e,IAAI,CAACV,SAAL,CAAe1U,IAAf,CAAV;;EACA,UAAG,CAAC1J,GAAJ,EAAQ;EACJA,QAAAA,GAAG,GAAG8e,IAAI,CAACV,SAAL,CAAe1U,IAAf,IAAuB,EAA7B;EACA1J,QAAAA,GAAG,CAACR,IAAJ,CAASof,QAAT,EAFI;;EAIJE,QAAAA,IAAI,CAACT,eAAL;;EACA,eAAO,IAAP;EACH;;EAED,UAAGtf,CAAC,CAAC0B,OAAF,CAAUT,GAAV,EAAe4e,QAAf,KAA4B,CAAC,CAAhC,EAAmC;EAC/B5e,QAAAA,GAAG,CAACR,IAAJ,CAASof,QAAT,EAD+B;;EAG/BE,QAAAA,IAAI,CAACT,eAAL;;EACA,eAAO,IAAP;EACH;;EAEDQ,MAAAA,SAAS,GAAG,KAAZ;EACH,KAlBD;;EAmBA,WAAOA,SAAP;EACH,GAjDe;;EAkDhB;;;EAGAE,EAAAA,oBAAoB,EAAG,8BAASrV,IAAT,EAAekV,QAAf,EAAyB;EAC5C,QAAG9Z,SAAS,CAACpD,MAAV,IAAoB,CAAvB,EAA0B,OAAO,KAAKsd,yBAAL,CAA+BtV,IAA/B,CAAP;EAE1B,QAAI1J,GAAG,GAAG,KAAKoe,SAAL,CAAe1U,IAAf,CAAV;;EACA,QAAG,CAAC1J,GAAJ,EAAQ;EACJ,aAAO,KAAP;EACH;;EAED,SAAI,IAAI4B,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG5B,GAAG,CAAC0B,MAAvB,EAA+BE,CAAC,EAAhC,EAAoC;EAChC,UAAIqd,EAAE,GAAGjf,GAAG,CAAC4B,CAAD,CAAZ;;EACA,UAAGqd,EAAE,KAAKL,QAAV,EAAoB;EAChB5e,QAAAA,GAAG,CAACgM,MAAJ,CAAWpK,CAAX,EAAc,CAAd;;EACA,YAAG5B,GAAG,CAAC0B,MAAJ,IAAiB,CAApB,EAAuB;EACnB,iBAAO,KAAK0c,SAAL,CAAe1U,IAAf,CAAP;;EACA,eAAK2U,eAAL,GAFmB;;EAInB;;;;;;;EAMH;;EACD,eAAO,IAAP;EACH;EACJ;;EAED,WAAO,KAAP;EACH,GAjFe;;EAkFhB;;;EAGAa,EAAAA,0BAA0B,EAAG,oCAASxV,IAAT,EAAe;EACxC,QAAI1J,GAAG,GAAG,KAAKoe,SAAL,CAAe1U,IAAf,CAAV;;EACA,QAAG,CAAC1J,GAAJ,EAAS;EACL,aAAO,KAAKoe,SAAL,CAAe1U,IAAf,CAAP;;EACA,WAAK2U,eAAL,GAFK;;EAIL;;;;;;;;EAMA,aAAO,IAAP;EACH;;EACD,WAAO,KAAP;EACH,GApGe;;EAqGhB;;;EAGAc,EAAAA,wBAAwB,EAAG,oCAAW;EAClC,SAAKf,SAAL,GAAiB,EAAjB;EACA,SAAKK,aAAL,GAAqB,KAArB;EACH,GA3Ge;;EA4GhB;;;EAGAW,EAAAA,cAAc,EAAG,wBAAS3N,CAAT,EAAY;EACzB,QAAIzR,GAAG,GAAG,KAAKoe,SAAL,CAAe3M,CAAC,CAAC/H,IAAjB,CAAV;;EAEA,QAAI1J,GAAJ,EAAS;EACL,UAAG,CAACyR,CAAC,CAAClM,MAAN,EAAckM,CAAC,CAAClM,MAAF,GAAW,IAAX;EACdvF,MAAAA,GAAG,GAAGA,GAAG,CAACP,KAAJ,EAAN;;EAEA,WAAI,IAAImC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG5B,GAAG,CAAC0B,MAAvB,EAA+BE,CAAC,EAAhC,EAAoC;EAChC,YAAIgd,QAAQ,GAAG5e,GAAG,CAAC4B,CAAD,CAAlB;;EACA,YAAG,OAAOgd,QAAP,IAAoB,UAAvB,EAAmC;EAC/BA,UAAAA,QAAQ,CAAC7c,IAAT,CAAc,IAAd,EAAoB0P,CAApB;EACH;EACJ;EACJ;;EAED,QAAI,CAACA,CAAC,CAACmM,gBAAP,EAA0B;EACtB;EACA,UAAI,KAAKyB,MAAT,EAAiB;EACb5N,QAAAA,CAAC,CAACkM,aAAF,GAAkB,KAAK0B,MAAvB;;EACA,aAAKA,MAAL,CAAYD,cAAZ,CAA4B3N,CAA5B;EACH;EACJ;;EACD,WAAO,IAAP;EACH,GAtIe;;EAuIhB;;;EAGA6N,EAAAA,iBAAiB,EAAG,2BAAS5V,IAAT,EAAe;EAC/B,QAAI1J,GAAG,GAAG,KAAKoe,SAAL,CAAe1U,IAAf,CAAV;EACA,WAAO1J,GAAG,IAAI,IAAP,IAAeA,GAAG,CAAC0B,MAAJ,GAAa,CAAnC;EACH;EA7Ie,CAApB;;MCTqB6d;;;;;EAEjB,wBACA;EAAA;;EAAA;EAEC;;;;yBAEE7V,MAAMkV,UACT;EACI,WAAKF,iBAAL,CAAwBhV,IAAxB,EAA8BkV,QAA9B;;EACA,aAAO,IAAP;EACH;;;uCAEgBlV,MAAMkV,UACvB;EACI,WAAKF,iBAAL,CAAwBhV,IAAxB,EAA8BkV,QAA9B;;EACA,aAAO,IAAP;EACH;;;yBAEElV,MAAKkV,UACR;EACI,WAAKG,oBAAL,CAA2BrV,IAA3B,EAAiCkV,QAAjC;;EACA,aAAO,IAAP;EACH;;;0CAEmBlV,MAAKkV,UACzB;EACI,WAAKG,oBAAL,CAA2BrV,IAA3B,EAAiCkV,QAAjC;;EACA,aAAO,IAAP;EACH;;;gDAEyBlV,MAC1B;EACI,WAAKwV,0BAAL,CAAiCxV,IAAjC;;EACA,aAAO,IAAP;EACH;;;gDAGD;EACI,WAAKyV,wBAAL;;EACA,aAAO,IAAP;EACH;;;;2BAGIzB,WAAY8B,QACjB;EACI;EACA,UAAI/N,CAAC,GAAG,IAAI+L,KAAJ,CAAWE,SAAX,CAAR;;EAEA,UAAI8B,MAAJ,EAAY;EACR,aAAK,IAAI3V,CAAT,IAAc2V,MAAd,EAAsB;EAClB,cAAI3V,CAAC,IAAI,MAAT,EAAiB;EACb4H,YAAAA,CAAC,CAAC5H,CAAD,CAAD,GAAO2V,MAAM,CAAC3V,CAAD,CAAb;EACH,WAHiB;;;EAKlB4H,UAAAA,CAAC,CAACkM,aAAF,GAAkB,IAAlB;EACH;EACJ;EAED,UAAI7S,EAAE,GAAG,IAAT;;EACA/L,MAAAA,CAAC,CAACiD,IAAF,CAAQ0b,SAAS,CAACM,KAAV,CAAgB,GAAhB,CAAR,EAA+B,UAASyB,KAAT,EAAe;EAC1ChO,QAAAA,CAAC,CAACkM,aAAF,GAAkB7S,EAAlB;EACAA,QAAAA,EAAE,CAAC4U,aAAH,CAAkBjO,CAAlB;EACH,OAHD;;EAIA,aAAO,IAAP;EACH;;;oCAEagM,KACd;EACI;EACA;EACA;EACA,UAAI,KAAKkC,QAAL,IAAkBlC,GAAG,CAAClB,KAA1B,EAAiC;EAC7B,YAAIhX,MAAM,GAAG,KAAKqa,oBAAL,CAA2BnC,GAAG,CAAClB,KAA/B,EAAuC,CAAvC,EAA0C,CAA1C,CAAb;;EACA,YAAIhX,MAAJ,EAAY;EACRA,UAAAA,MAAM,CAACma,aAAP,CAAsBjC,GAAtB;EACH;;EACD;EACH;;EAED,UAAG,KAAKvb,OAAL,IAAgBub,GAAG,CAAC/T,IAAJ,IAAY,WAA/B,EAA2C;EACvC;EACA,YAAImW,YAAY,GAAG,KAAKC,aAAxB;EACA,YAAIC,SAAS,GAAM,KAAK7d,OAAL,CAAa8d,MAAb,CAAoBC,WAAvC;;EACA,aAAKb,cAAL,CAAqB3B,GAArB;;EACA,YAAIoC,YAAY,IAAI,KAAKC,aAAzB,EAAwC;EACpC,eAAKI,WAAL,GAAmB,IAAnB;;EACA,cAAI,KAAKC,UAAT,EAAqB;EACjB,gBAAIC,MAAM,GAAG,KAAKC,QAAL,GAAgBhB,MAA7B,CADiB;;EAGjB,gBAAIiB,UAAU,GAAG,KAAKva,KAAL,CAAW,IAAX,CAAjB;EACAua,YAAAA,UAAU,CAACC,UAAX,GAAwB,KAAKC,qBAAL,EAAxB;;EACAJ,YAAAA,MAAM,CAACK,YAAP,CAAoBC,UAApB,CAAgCJ,UAAhC,EAA6C,CAA7C,EALiB;EAQjB;;;EACA,iBAAKK,YAAL,GAAoBZ,SAApB;EACA,iBAAK7d,OAAL,CAAa+d,WAAb,GAA2B,CAA3B;EACH;EACJ;;EACD;EACH;;EAED,WAAKb,cAAL,CAAqB3B,GAArB;;EAEA,UAAI,KAAKvb,OAAL,IAAgBub,GAAG,CAAC/T,IAAJ,IAAY,UAAhC,EAA2C;EACvC,YAAG,KAAKwW,WAAL,IAAoB,KAAKC,UAA5B,EAAuC;EACnC;EACA,cAAIC,MAAM,GAAG,KAAKC,QAAL,GAAgBhB,MAA7B;EACA,eAAKa,WAAL,GAAmB,KAAnB;;EAEAE,UAAAA,MAAM,CAACK,YAAP,CAAoBG,eAApB,CAAoC,KAAKhM,EAAzC;;EAEA,cAAI,KAAK+L,YAAT,EAAuB;EACnB,iBAAKze,OAAL,CAAa+d,WAAb,GAA2B,KAAKU,YAAhC;EACA,mBAAO,KAAKA,YAAZ;EACH;EACJ;EACJ;;EAED,aAAO,IAAP;EACH;;;+BAEQjX,MACT;EACI,aAAO,KAAK4V,iBAAL,CAAuB5V,IAAvB,CAAP;EACH;;;uCAEgBA,MACjB;EACI,aAAO,KAAK4V,iBAAL,CAAuB5V,IAAvB,CAAP;EACH;;;4BAEMmX,SAAUC,QACjB;EACI,WAAK7J,EAAL,CAAQ,WAAR,EAAsB4J,OAAtB;EACA,WAAK5J,EAAL,CAAQ,UAAR,EAAsB6J,MAAtB;EACA,aAAO,IAAP;EACH;;;2BAEIpX,MAAMkV,UACX;EACI,UAAI9T,EAAE,GAAG,IAAT;;EACA,UAAIiW,UAAU,GAAG,SAAbA,UAAa,GAAU;EACvBnC,QAAAA,QAAQ,CAACza,KAAT,CAAe2G,EAAf,EAAoBhG,SAApB;EACA,aAAKkc,EAAL,CAAQtX,IAAR,EAAeqX,UAAf;EACH,OAHD;;EAIA,WAAK9J,EAAL,CAAQvN,IAAR,EAAeqX,UAAf;EACA,aAAO,IAAP;EACH;;;;IArJmC5C;;ECZxC;;;;;;AAMA;;EA2CA,IAAInZ,QAAQ,GAAIuN,QAAQ,IAAIA,QAAQ,CAAC0O,uBAAtB,GAAiD,UAAU5B,MAAV,EAAkB6B,KAAlB,EAAyB;EACrF,MAAI,CAACA,KAAL,EAAY;EACR,WAAO,KAAP;EACH;EACD,SAAO,CAAC,EAAE7B,MAAM,CAAC4B,uBAAP,CAA+BC,KAA/B,IAAwC,EAA1C,CAAR;EACH,CALc,GAKX,UAAU7B,MAAV,EAAkB6B,KAAlB,EAAyB;EACzB,MAAI,CAACA,KAAL,EAAY;EACR,WAAO,KAAP;EACH;;EACD,SAAOA,KAAK,KAAKA,KAAV,KAAoB7B,MAAM,CAACra,QAAP,GAAkBqa,MAAM,CAACra,QAAP,CAAgBkc,KAAhB,CAAlB,GAA2C,IAA/D,CAAP;EACH,CAVD;;ECjDA;;;;;MAMMC;;;EACF,oBAAa;EAAA;EAAE;;;;yBAEZzX,MAAMkV,UAAU;EAEf,UAAI,KAAKwC,UAAL,KAAoB5a,SAAxB,EAAkC;EAC9B,aAAK4a,UAAL,GAAkB,EAAlB;EACH;;EAGD,UAAIC,SAAS,GAAG,KAAKD,UAArB;;EAEA,UAAIC,SAAS,CAAC3X,IAAD,CAAT,KAAoBlD,SAAxB,EAAmC;EAE/B6a,QAAAA,SAAS,CAAC3X,IAAD,CAAT,GAAkB,EAAlB;EAEH;;EAED,UAAI2X,SAAS,CAAC3X,IAAD,CAAT,CAAgBjJ,OAAhB,CAAwBme,QAAxB,MAAsC,CAAE,CAA5C,EAA+C;EAE3CyC,QAAAA,SAAS,CAAC3X,IAAD,CAAT,CAAgBlK,IAAhB,CAAqBof,QAArB;EAEH;EAEJ;;;0BAEGlV,MAAMkV,UAAU;EAEhB,UAAI,KAAKwC,UAAL,KAAoB5a,SAAxB,EAAmC,OAAO,KAAP;EAEnC,UAAI6a,SAAS,GAAG,KAAKD,UAArB;EAEA,aAAOC,SAAS,CAAC3X,IAAD,CAAT,KAAoBlD,SAApB,IAAiC6a,SAAS,CAAC3X,IAAD,CAAT,CAAgBjJ,OAAhB,CAAwBme,QAAxB,MAAsC,CAAE,CAAhF;EAEH;;;0BAEGlV,MAAMkV,UAAU;EAEhB,UAAI,KAAKwC,UAAL,KAAoB5a,SAAxB,EAAmC;EAEnC,UAAI6a,SAAS,GAAG,KAAKD,UAArB;EACA,UAAIE,aAAa,GAAGD,SAAS,CAAC3X,IAAD,CAA7B;;EAEA,UAAI4X,aAAa,KAAK9a,SAAtB,EAAiC;EAE7B,YAAI/D,KAAK,GAAG6e,aAAa,CAAC7gB,OAAd,CAAsBme,QAAtB,CAAZ;;EAEA,YAAInc,KAAK,KAAK,CAAE,CAAhB,EAAmB;EAEf6e,UAAAA,aAAa,CAACtV,MAAd,CAAqBvJ,KAArB,EAA4B,CAA5B;EAEH;EAEJ;EAEJ;;;2BAEImQ,OAAO;EAER,UAAI,KAAKwO,UAAL,KAAoB5a,SAAxB,EAAmC;EAEnC,UAAI6a,SAAS,GAAG,KAAKD,UAArB;EACA,UAAIE,aAAa,GAAGD,SAAS,CAACzO,KAAK,CAAClJ,IAAP,CAA7B;;EAEA,UAAI4X,aAAa,KAAK9a,SAAtB,EAAiC;EAE7BoM,QAAAA,KAAK,CAACrN,MAAN,GAAe,IAAf;EAEA,YAAInD,KAAK,GAAGkf,aAAa,CAAC7hB,KAAd,CAAoB,CAApB,CAAZ;;EAEA,aAAK,IAAImC,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGxL,KAAK,CAACV,MAA1B,EAAkCE,CAAC,GAAGgM,CAAtC,EAAyChM,CAAC,EAA1C,EAA8C;EAE1CQ,UAAAA,KAAK,CAACR,CAAD,CAAL,CAASG,IAAT,CAAc,IAAd,EAAoB6Q,KAApB;EAEH;EAEJ;EAEJ;;;;;;;;ECjFE,IAAM2O,QAAQ,GAAGC,OAAjB;;AAMP,EAAO,IAAMC,SAAS,GAAG,CAAlB;AACP,EAAO,IAAMC,YAAY,GAAG,CAArB;AACP,EAAO,IAAMC,aAAa,GAAG,CAAtB;;AAGP,EAAO,IAAMC,iBAAiB,GAAG,CAA1B;AACP,EAAO,IAAMC,qBAAqB,GAAG,CAA9B;AACP,EAAO,IAAMC,mBAAmB,GAAG,CAA5B;;AAUP,EAAO,IAAMC,UAAU,GAAG,CAAnB;AACP,EAAO,IAAMC,WAAW,GAAG,CAApB;AACP,EAAO,IAAMC,SAAS,GAAG,CAAlB;AACP,EAAO,IAAMC,cAAc,GAAG,CAAvB;AACP,EAAO,IAAMC,UAAU,GAAG,CAAnB;AACP,EAAO,IAAMC,iBAAiB,GAAG,CAA1B;AACP,EAAO,IAAMC,YAAY,GAAG,CAArB;AACP,EAAO,IAAMC,aAAa,GAAG,CAAtB;;AAGP,EAAO,IAAMC,YAAY,GAAG,CAArB;AACP,EAAO,IAAMC,YAAY,GAAG,CAArB;AACP,EAAO,IAAMC,aAAa,GAAG,CAAtB;AACP;AAKA,EAAO,IAAMC,SAAS,GAAG,CAAlB;AACP,EAAO,IAAMC,QAAQ,GAAG,CAAjB;AACP,EAAO,IAAMC,UAAU,GAAG,CAAnB;;AAIP,EAAO,IAAMC,UAAU,GAAG,CAAnB;AACP,EAAO,IAAMC,cAAc,GAAG,CAAvB;AACP,EAAO,IAAMC,gBAAgB,GAAG,CAAzB;AACP,EAAO,IAAMC,mBAAmB,GAAG,CAA5B;AACP,EAAO,IAAMC,gBAAgB,GAAG,CAAzB;AACP,EAAO,IAAMC,cAAc,GAAG,CAAvB;AACP,EAAO,IAAMC,WAAW,GAAG,GAApB;AACP,EAAO,IAAMC,gBAAgB,GAAG,GAAzB;AACP,EAAO,IAAMC,uBAAuB,GAAG,GAAhC;AACP,EAEO,IAAMC,UAAU,GAAG,GAAnB;AACP,EAAO,IAAMC,SAAS,GAAG,GAAlB;AACP,EAAO,IAAMC,cAAc,GAAG,GAAvB;AACP,EAAO,IAAMC,sBAAsB,GAAG,GAA/B;AACP,EAAO,IAAMC,cAAc,GAAG,GAAvB;AACP,EAAO,IAAMC,sBAAsB,GAAG,GAA/B;AACP,EAAO,IAAMC,cAAc,GAAG,GAAvB;AACP,EAAO,IAAMC,sBAAsB,GAAG,GAA/B;AACP,EAAO,IAAMC,cAAc,GAAG,GAAvB;AACP,EAAO,IAAMC,sBAAsB,GAAG,GAA/B;AACP,EAAO,IAAMC,sBAAsB,GAAG,GAA/B;;AAGP,EAAO,IAAMC,cAAc,GAAG,IAAvB;AACP,EAAO,IAAMC,mBAAmB,GAAG,IAA5B;AACP,EAAO,IAAMC,sBAAsB,GAAG,IAA/B;AACP,EAAO,IAAMC,aAAa,GAAG,IAAtB;AACP,EAAO,IAAMC,0BAA0B,GAAG,IAAnC;AACP,EAAO,IAAMC,yBAAyB,GAAG,IAAlC;AACP,EAAO,IAAMC,YAAY,GAAG,IAArB;AACP,EAAO,IAAMC,yBAAyB,GAAG,IAAlC;AACP,EAAO,IAAMC,wBAAwB,GAAG,IAAjC;AACP,EAAO,IAAMC,gBAAgB,GAAG,IAAzB;AACP,EAAO,IAAMC,QAAQ,GAAG,IAAjB;AACP,EAAO,IAAMC,SAAS,GAAG,IAAlB;AACP,EAAO,IAAMC,iBAAiB,GAAG,IAA1B;AACP,EAAO,IAAMC,OAAO,GAAG,IAAhB;AACP,EAAO,IAAMC,eAAe,GAAG,IAAxB;AACP,EAAO,IAAMC,SAAS,GAAG,IAAlB;AACP,EAAO,IAAMC,aAAa,GAAG,IAAtB;AACP,EAAO,IAAMC,qBAAqB,GAAG,IAA9B;AACP,EAAO,IAAMC,qBAAqB,GAAG,IAA9B;AACP,EAAO,IAAMC,oBAAoB,GAAG,IAA7B;AACP,EACO,IAAMC,WAAW,GAAG,IAApB;AACP,EAAO,IAAMC,SAAS,GAAG,IAAlB;AACP,EAAO,IAAMC,UAAU,GAAG,IAAnB;AACP,EAAO,IAAMC,eAAe,GAAG,IAAxB;AACP,EAAO,IAAMC,oBAAoB,GAAG,IAA7B;AACP,EACO,IAAMC,WAAW,GAAG,IAApB;AACP,EAAO,IAAMC,kBAAkB,GAAG,IAA3B;AACP,EAAO,IAAMC,SAAS,GAAG,GAAlB;;AAEP,EAAO,IAAMC,QAAQ,GAAG,CAAjB;;;ECzGP;;;;;MAKMC;;;EACF,mBAAYnJ,CAAZ,EAAeC,CAAf,EAAkBmJ,CAAlB,EAAqBC,CAArB,EAAwB;EAAA;;EACpB,SAAKrJ,CAAL,GAASA,CAAC,IAAI,CAAd;EACA,SAAKC,CAAL,GAASA,CAAC,IAAI,CAAd;EACA,SAAKmJ,CAAL,GAASA,CAAC,IAAI,CAAd;EACA,SAAKC,CAAL,GAAUA,CAAC,KAAKxf,SAAP,GAAoBwf,CAApB,GAAwB,CAAjC;EACA,SAAKC,SAAL,GAAiB,IAAjB;EACH;;;;0BAEGtJ,GAAGC,GAAGmJ,GAAGC,GAAG;EAEZ,WAAKrJ,CAAL,GAASA,CAAT;EACA,WAAKC,CAAL,GAASA,CAAT;EACA,WAAKmJ,CAAL,GAASA,CAAT;EACA,WAAKC,CAAL,GAASA,CAAT;EAEA,aAAO,IAAP;EAEH;;;;qCAGcE,QAAQ;EAEnB,WAAKvJ,CAAL,IAAUuJ,MAAV;EACA,WAAKtJ,CAAL,IAAUsJ,MAAV;EACA,WAAKH,CAAL,IAAUG,MAAV;EACA,WAAKF,CAAL,IAAUE,MAAV;EAEA,aAAO,IAAP;EAEH;;;;6BAGMC,GAAG;EAEN,aAASA,CAAC,CAACxJ,CAAF,KAAQ,KAAKA,CAAd,IAAqBwJ,CAAC,CAACvJ,CAAF,KAAQ,KAAKA,CAAlC,IAAyCuJ,CAAC,CAACJ,CAAF,KAAQ,KAAKA,CAAtD,IAA6DI,CAAC,CAACH,CAAF,KAAQ,KAAKA,CAAlF;EAEH;;;;2BAEIG,GAAG;EAEJ,WAAKxJ,CAAL,GAASwJ,CAAC,CAACxJ,CAAX;EACA,WAAKC,CAAL,GAASuJ,CAAC,CAACvJ,CAAX;EACA,WAAKmJ,CAAL,GAASI,CAAC,CAACJ,CAAX;EACA,WAAKC,CAAL,GAAUG,CAAC,CAACH,CAAF,KAAQxf,SAAT,GAAsB2f,CAAC,CAACH,CAAxB,GAA4B,CAArC;EAEA,aAAO,IAAP;EAEH;;;mCAEYrf,GAAG;EAEZ,UAAIgW,CAAC,GAAG,KAAKA,CAAb;EAAA,UAAgBC,CAAC,GAAG,KAAKA,CAAzB;EAAA,UAA4BmJ,CAAC,GAAG,KAAKA,CAArC;EAAA,UAAwCC,CAAC,GAAG,KAAKA,CAAjD;EACA,UAAIvU,CAAC,GAAG9K,CAAC,CAACyf,QAAV;EAEA,WAAKzJ,CAAL,GAASlL,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,CAAD,CAAD,GAAOsU,CAA7B,GAAiCtU,CAAC,CAAC,EAAD,CAAD,GAAQuU,CAAlD;EACA,WAAKpJ,CAAL,GAASnL,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,CAAD,CAAD,GAAOsU,CAA7B,GAAiCtU,CAAC,CAAC,EAAD,CAAD,GAAQuU,CAAlD;EACA,WAAKD,CAAL,GAAStU,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,EAAD,CAAD,GAAQsU,CAA9B,GAAkCtU,CAAC,CAAC,EAAD,CAAD,GAAQuU,CAAnD;EACA,WAAKA,CAAL,GAASvU,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,EAAD,CAAD,GAAQsU,CAA9B,GAAkCtU,CAAC,CAAC,EAAD,CAAD,GAAQuU,CAAnD;EAEA,aAAO,IAAP;EAEH;;;kCACW;EAER,aAAO,KAAKK,YAAL,CAAkB,KAAK3kB,MAAL,MAAiB,CAAnC,CAAP;EAEH;;;mCAEYwkB,QAAQ;EAEjB,aAAO,KAAKI,cAAL,CAAoB,IAAIJ,MAAxB,CAAP;EAEH;;;+BAES;EAEZ,aAAO7kB,IAAI,CAACklB,IAAL,CAAW,KAAK5J,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKC,CAAL,GAAS,KAAKA,CAAhC,GAAoC,KAAKmJ,CAAL,GAAS,KAAKA,CAAlD,GAAsD,KAAKC,CAAL,GAAS,KAAKA,CAA/E,CAAP;EAEA;;;;;;ECnFF,IAAMQ,KAAK,GAAG;EACV5f,EAAAA,OAAO,EAAEvF,IAAI,CAACwF,EAAL,GAAU,GADT;EAEVC,EAAAA,OAAO,EAAE,MAAMzF,IAAI,CAACwF,EAFV;EAIV4f,EAAAA,KAJU,iBAIJjkB,KAJI,EAIG8B,GAJH,EAIQX,GAJR,EAIa;EAEnB,WAAOtC,IAAI,CAACsC,GAAL,CAASW,GAAT,EAAcjD,IAAI,CAACiD,GAAL,CAASX,GAAT,EAAcnB,KAAd,CAAd,CAAP;EAEH,GARS;EASV;EACA;EAEAkE,EAAAA,eAZU,2BAYMb,CAZN,EAYSc,CAZT,EAYY;EAElB,WAAO,CAAEd,CAAC,GAAGc,CAAL,GAAUA,CAAX,IAAgBA,CAAvB;EAEH,GAhBS;EAkBV+f,EAAAA,QAlBU,oBAkBDtkB,KAlBC,EAkBM;EAEZ,QAAIA,KAAK,CAACV,MAAN,KAAiB,CAArB,EAAwB,OAAO6C,QAAP;EAExB,QAAID,GAAG,GAAGlC,KAAK,CAAC,CAAD,CAAf;;EAEA,SAAK,IAAIR,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGxL,KAAK,CAACV,MAA1B,EAAkCE,CAAC,GAAGgM,CAAtC,EAAyC,EAAEhM,CAA3C,EAA8C;EAE1C,UAAIQ,KAAK,CAACR,CAAD,CAAL,GAAW0C,GAAf,EAAoBA,GAAG,GAAGlC,KAAK,CAACR,CAAD,CAAX;EAEvB;;EAED,WAAO0C,GAAP;EAEH,GAhCS;EAkCVqiB,EAAAA,QAlCU,oBAkCDvkB,KAlCC,EAkCM;EAEZ,QAAIA,KAAK,CAACV,MAAN,KAAiB,CAArB,EAAwB,OAAO,CAAE6C,QAAT;EAExB,QAAIZ,GAAG,GAAGvB,KAAK,CAAC,CAAD,CAAf;;EAEA,SAAK,IAAIR,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGxL,KAAK,CAACV,MAA1B,EAAkCE,CAAC,GAAGgM,CAAtC,EAAyC,EAAEhM,CAA3C,EAA8C;EAE1C,UAAIQ,KAAK,CAACR,CAAD,CAAL,GAAW+B,GAAf,EAAoBA,GAAG,GAAGvB,KAAK,CAACR,CAAD,CAAX;EAEvB;;EAED,WAAO+B,GAAP;EAEH,GAhDS;EAiDV;EACAijB,EAAAA,YAlDU,wBAkDGpkB,KAlDH,EAkDU;EAChB,WAAO,CAACA,KAAK,GAAIA,KAAK,GAAG,CAAlB,MAA0B,CAA1B,IAA+BA,KAAK,KAAK,CAAhD;EACH,GApDS;EAqDV;EACAqkB,EAAAA,eAtDU,2BAsDMrkB,KAtDN,EAsDa;EACnB,WAAOnB,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACqE,KAAL,CAAWrE,IAAI,CAAC+G,GAAL,CAAS5F,KAAT,IAAkBnB,IAAI,CAACylB,GAAlC,CAAZ,CAAP;EACH,GAxDS;EAyDV;EACAC,EAAAA,cAAc,EAAE,wBAAUvkB,KAAV,EAAiB;EAC7B,WAAOnB,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACiH,IAAL,CAAUjH,IAAI,CAAC+G,GAAL,CAAS5F,KAAT,IAAkBnB,IAAI,CAACylB,GAAjC,CAAZ,CAAP;EACH,GA5DS;EA8DV/f,EAAAA,QA9DU,oBA8DDC,OA9DC,EA8DQ;EACd,WAAOA,OAAO,GAAGwf,KAAK,CAAC5f,OAAvB;EACH,GAhES;EAkEVK,EAAAA,QAlEU,oBAkEDC,OAlEC,EAkEQ;EACd,WAAOA,OAAO,GAAGsf,KAAK,CAAC1f,OAAvB;EACH;EApES,CAAd;;ECCA;EAEA;EACA;EAGA;EAEA;EACA;EAEA;EACA;;MAEMkgB;;;EAEF,mBAAYrK,CAAZ,EAAeC,CAAf,EAAkBmJ,CAAlB,EAAqB;EAAA;;EACjB,SAAKpJ,CAAL,GAASA,CAAC,IAAI,CAAd;EACA,SAAKC,CAAL,GAASA,CAAC,IAAI,CAAd;EACA,SAAKmJ,CAAL,GAASA,CAAC,IAAI,CAAd;EACA,SAAKkB,SAAL,GAAiB,IAAjB;EACH;;;;0BAEGtK,GAAGC,GAAGmJ,GAAG;EAET,WAAKpJ,CAAL,GAASA,CAAT;EACA,WAAKC,CAAL,GAASA,CAAT;EACA,WAAKmJ,CAAL,GAASA,CAAT;EAEA,aAAO,IAAP;EAEH;;;gCAESG,QAAQ;EAEd,WAAKvJ,CAAL,GAASuJ,MAAT;EACA,WAAKtJ,CAAL,GAASsJ,MAAT;EACA,WAAKH,CAAL,GAASG,MAAT;EAEA,aAAO,IAAP;EAEH;;;2BAEIvJ,GAAG;EAEJ,WAAKA,CAAL,GAASA,CAAT;EAEA,aAAO,IAAP;EAEH;;;2BAEIC,GAAG;EAEJ,WAAKA,CAAL,GAASA,CAAT;EAEA,aAAO,IAAP;EAEH;;;2BAEImJ,GAAG;EAEJ,WAAKA,CAAL,GAASA,CAAT;EAEA,aAAO,IAAP;EAEH;;;mCAEYtjB,OAAOD,OAAO;EAEvB,cAAQC,KAAR;EAEI,aAAK,CAAL;EAAQ,eAAKka,CAAL,GAASna,KAAT;EAAgB;;EACxB,aAAK,CAAL;EAAQ,eAAKoa,CAAL,GAASpa,KAAT;EAAgB;;EACxB,aAAK,CAAL;EAAQ,eAAKujB,CAAL,GAASvjB,KAAT;EAAgB;;EACxB;EAAS,gBAAM,IAAI0kB,KAAJ,CAAU,4BAA4BzkB,KAAtC,CAAN;EALb;;EASA,aAAO,IAAP;EAEH;;;mCAEYA,OAAO;EAEhB,cAAQA,KAAR;EAEI,aAAK,CAAL;EAAQ,iBAAO,KAAKka,CAAZ;;EACR,aAAK,CAAL;EAAQ,iBAAO,KAAKC,CAAZ;;EACR,aAAK,CAAL;EAAQ,iBAAO,KAAKmJ,CAAZ;;EACR;EAAS,gBAAM,IAAImB,KAAJ,CAAU,4BAA4BzkB,KAAtC,CAAN;EALb;EASH;;;8BAEO;EAEJ,aAAO,IAAI,KAAKgE,WAAT,CAAqB,KAAKkW,CAA1B,EAA6B,KAAKC,CAAlC,EAAqC,KAAKmJ,CAA1C,CAAP;EAEH;;;2BAEII,GAAG;EAEJ,WAAKxJ,CAAL,GAASwJ,CAAC,CAACxJ,CAAX;EACA,WAAKC,CAAL,GAASuJ,CAAC,CAACvJ,CAAX;EACA,WAAKmJ,CAAL,GAASI,CAAC,CAACJ,CAAX;EAEA,aAAO,IAAP;EAEH;;;0BAEGI,GAAGH,GAAG;EAEN,UAAIA,CAAC,KAAKxf,SAAV,EAAqB;EAEjB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,iFAAb;EACA,eAAO,KAAKC,UAAL,CAAgBlB,CAAhB,EAAmBH,CAAnB,CAAP;EAEH;;EAED,WAAKrJ,CAAL,IAAUwJ,CAAC,CAACxJ,CAAZ;EACA,WAAKC,CAAL,IAAUuJ,CAAC,CAACvJ,CAAZ;EACA,WAAKmJ,CAAL,IAAUI,CAAC,CAACJ,CAAZ;EAEA,aAAO,IAAP;EAEH;;;gCAESuB,GAAG;EAET,WAAK3K,CAAL,IAAU2K,CAAV;EACA,WAAK1K,CAAL,IAAU0K,CAAV;EACA,WAAKvB,CAAL,IAAUuB,CAAV;EAEA,aAAO,IAAP;EAEH;;;iCAEUtW,GAAGG,GAAG;EAEb,WAAKwL,CAAL,GAAS3L,CAAC,CAAC2L,CAAF,GAAMxL,CAAC,CAACwL,CAAjB;EACA,WAAKC,CAAL,GAAS5L,CAAC,CAAC4L,CAAF,GAAMzL,CAAC,CAACyL,CAAjB;EACA,WAAKmJ,CAAL,GAAS/U,CAAC,CAAC+U,CAAF,GAAM5U,CAAC,CAAC4U,CAAjB;EAEA,aAAO,IAAP;EAEH;;;sCAEeI,GAAGmB,GAAG;EAElB,WAAK3K,CAAL,IAAUwJ,CAAC,CAACxJ,CAAF,GAAM2K,CAAhB;EACA,WAAK1K,CAAL,IAAUuJ,CAAC,CAACvJ,CAAF,GAAM0K,CAAhB;EACA,WAAKvB,CAAL,IAAUI,CAAC,CAACJ,CAAF,GAAMuB,CAAhB;EAEA,aAAO,IAAP;EAEH;;;0BAEGnB,GAAGH,GAAG;EAEN,UAAIA,CAAC,KAAKxf,SAAV,EAAqB;EAEjB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,iFAAb;EACA,eAAO,KAAKG,UAAL,CAAgBpB,CAAhB,EAAmBH,CAAnB,CAAP;EAEH;;EAED,WAAKrJ,CAAL,IAAUwJ,CAAC,CAACxJ,CAAZ;EACA,WAAKC,CAAL,IAAUuJ,CAAC,CAACvJ,CAAZ;EACA,WAAKmJ,CAAL,IAAUI,CAAC,CAACJ,CAAZ;EAEA,aAAO,IAAP;EAEH;;;gCAESuB,GAAG;EAET,WAAK3K,CAAL,IAAU2K,CAAV;EACA,WAAK1K,CAAL,IAAU0K,CAAV;EACA,WAAKvB,CAAL,IAAUuB,CAAV;EAEA,aAAO,IAAP;EAEH;;;iCAEUtW,GAAGG,GAAG;EAEb,WAAKwL,CAAL,GAAS3L,CAAC,CAAC2L,CAAF,GAAMxL,CAAC,CAACwL,CAAjB;EACA,WAAKC,CAAL,GAAS5L,CAAC,CAAC4L,CAAF,GAAMzL,CAAC,CAACyL,CAAjB;EACA,WAAKmJ,CAAL,GAAS/U,CAAC,CAAC+U,CAAF,GAAM5U,CAAC,CAAC4U,CAAjB;EAEA,aAAO,IAAP;EAEH;;;+BAEQI,GAAGH,GAAG;EAEX,UAAIA,CAAC,KAAKxf,SAAV,EAAqB;EAEjB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,2FAAb;EACA,eAAO,KAAKI,eAAL,CAAqBrB,CAArB,EAAwBH,CAAxB,CAAP;EAEH;;EAED,WAAKrJ,CAAL,IAAUwJ,CAAC,CAACxJ,CAAZ;EACA,WAAKC,CAAL,IAAUuJ,CAAC,CAACvJ,CAAZ;EACA,WAAKmJ,CAAL,IAAUI,CAAC,CAACJ,CAAZ;EAEA,aAAO,IAAP;EAEH;;;qCAEcG,QAAQ;EAEnB,WAAKvJ,CAAL,IAAUuJ,MAAV;EACA,WAAKtJ,CAAL,IAAUsJ,MAAV;EACA,WAAKH,CAAL,IAAUG,MAAV;EAEA,aAAO,IAAP;EAEH;;;sCAEelV,GAAGG,GAAG;EAElB,WAAKwL,CAAL,GAAS3L,CAAC,CAAC2L,CAAF,GAAMxL,CAAC,CAACwL,CAAjB;EACA,WAAKC,CAAL,GAAS5L,CAAC,CAAC4L,CAAF,GAAMzL,CAAC,CAACyL,CAAjB;EACA,WAAKmJ,CAAL,GAAS/U,CAAC,CAAC+U,CAAF,GAAM5U,CAAC,CAAC4U,CAAjB;EAEA,aAAO,IAAP;EAEH;EAID;EAEA;EAEA;EAEA;EAEA;EAGA;EAEA;EAEA;;;;mCAIapf,GAAG;EAEZ,UAAIgW,CAAC,GAAG,KAAKA,CAAb;EAAA,UAAgBC,CAAC,GAAG,KAAKA,CAAzB;EAAA,UAA4BmJ,CAAC,GAAG,KAAKA,CAArC;EACA,UAAItU,CAAC,GAAG9K,CAAC,CAACyf,QAAV;EAEA,WAAKzJ,CAAL,GAASlL,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,CAAD,CAAD,GAAOsU,CAAtC;EACA,WAAKnJ,CAAL,GAASnL,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,CAAD,CAAD,GAAOsU,CAAtC;EACA,WAAKA,CAAL,GAAStU,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,CAAD,CAAD,GAAOsU,CAAtC;EAEA,aAAO,IAAP;EAEH;;;mCAEYpf,GAAG;EAEZ,UAAIgW,CAAC,GAAG,KAAKA,CAAb;EAAA,UAAgBC,CAAC,GAAG,KAAKA,CAAzB;EAAA,UAA4BmJ,CAAC,GAAG,KAAKA,CAArC;EACA,UAAItU,CAAC,GAAG9K,CAAC,CAACyf,QAAV;EAEA,UAAIJ,CAAC,GAAG,KAAKvU,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,EAAD,CAAD,GAAQsU,CAA9B,GAAkCtU,CAAC,CAAC,EAAD,CAAxC,CAAR;EAEA,WAAKkL,CAAL,GAAS,CAAClL,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,CAAD,CAAD,GAAOsU,CAA7B,GAAiCtU,CAAC,CAAC,EAAD,CAAnC,IAA2CuU,CAApD;EACA,WAAKpJ,CAAL,GAAS,CAACnL,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,CAAD,CAAD,GAAOsU,CAA7B,GAAiCtU,CAAC,CAAC,EAAD,CAAnC,IAA2CuU,CAApD;EACA,WAAKD,CAAL,GAAS,CAACtU,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,EAAD,CAAD,GAAQsU,CAA9B,GAAkCtU,CAAC,CAAC,EAAD,CAApC,IAA4CuU,CAArD;EAEA,aAAO,IAAP;EAEH;;;sCAEeyB,GAAG;EAEf,UAAI9K,CAAC,GAAG,KAAKA,CAAb;EAAA,UAAgBC,CAAC,GAAG,KAAKA,CAAzB;EAAA,UAA4BmJ,CAAC,GAAG,KAAKA,CAArC;EACA,UAAI2B,EAAE,GAAGD,CAAC,CAAC9K,CAAX;EAAA,UAAcgL,EAAE,GAAGF,CAAC,CAAC7K,CAArB;EAAA,UAAwBgL,EAAE,GAAGH,CAAC,CAAC1B,CAA/B;EAAA,UAAkC8B,EAAE,GAAGJ,CAAC,CAACzB,CAAzC,CAHe;;EAOf,UAAI8B,EAAE,GAAGD,EAAE,GAAGlL,CAAL,GAASgL,EAAE,GAAG5B,CAAd,GAAkB6B,EAAE,GAAGhL,CAAhC;EACA,UAAImL,EAAE,GAAGF,EAAE,GAAGjL,CAAL,GAASgL,EAAE,GAAGjL,CAAd,GAAkB+K,EAAE,GAAG3B,CAAhC;EACA,UAAIiC,EAAE,GAAGH,EAAE,GAAG9B,CAAL,GAAS2B,EAAE,GAAG9K,CAAd,GAAkB+K,EAAE,GAAGhL,CAAhC;EACA,UAAIsL,EAAE,GAAG,CAAEP,EAAF,GAAO/K,CAAP,GAAWgL,EAAE,GAAG/K,CAAhB,GAAoBgL,EAAE,GAAG7B,CAAlC,CAVe;;EAcf,WAAKpJ,CAAL,GAASmL,EAAE,GAAGD,EAAL,GAAUI,EAAE,GAAG,CAAEP,EAAjB,GAAsBK,EAAE,GAAG,CAAEH,EAA7B,GAAkCI,EAAE,GAAG,CAAEL,EAAlD;EACA,WAAK/K,CAAL,GAASmL,EAAE,GAAGF,EAAL,GAAUI,EAAE,GAAG,CAAEN,EAAjB,GAAsBK,EAAE,GAAG,CAAEN,EAA7B,GAAkCI,EAAE,GAAG,CAAEF,EAAlD;EACA,WAAK7B,CAAL,GAASiC,EAAE,GAAGH,EAAL,GAAUI,EAAE,GAAG,CAAEL,EAAjB,GAAsBE,EAAE,GAAG,CAAEH,EAA7B,GAAkCI,EAAE,GAAG,CAAEL,EAAlD;EAEA,aAAO,IAAP;EAEH;;;8BACOQ,QAAQC,QAAQ;EAEpBA,MAAAA,MAAM,CAACC,gBAAP,CAAwBF,MAAM,CAACG,gBAA/B,EAAiDF,MAAM,CAACG,UAAP,CAAkBJ,MAAM,CAACK,WAAzB,CAAjD;EACA,aAAO,KAAKC,YAAL,CAAkBL,MAAlB,CAAP;EAEH;;;gCAISD,QAAQC,QAAQ;EACtB,aAAO,KAAKK,YAAL,CAAkBL,MAAM,CAACG,UAAP,CAAkBJ,MAAM,CAACG,gBAAzB,CAAlB,EAA8DG,YAA9D,CAA2EN,MAAM,CAACK,WAAlF,CAAP;EACH;;;yCAGkB5hB,GAAG;EAElB;EACA;EAEA,UAAIgW,CAAC,GAAG,KAAKA,CAAb;EAAA,UAAgBC,CAAC,GAAG,KAAKA,CAAzB;EAAA,UAA4BmJ,CAAC,GAAG,KAAKA,CAArC;EACA,UAAItU,CAAC,GAAG9K,CAAC,CAACyf,QAAV;EAEA,WAAKzJ,CAAL,GAASlL,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,CAAD,CAAD,GAAOsU,CAAtC;EACA,WAAKnJ,CAAL,GAASnL,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,CAAD,CAAD,GAAOsU,CAAtC;EACA,WAAKA,CAAL,GAAStU,CAAC,CAAC,CAAD,CAAD,GAAOkL,CAAP,GAAWlL,CAAC,CAAC,CAAD,CAAD,GAAOmL,CAAlB,GAAsBnL,CAAC,CAAC,EAAD,CAAD,GAAQsU,CAAvC;EAEA,aAAO,KAAK0C,SAAL,EAAP;EAEH;;;6BAEMtC,GAAG;EAEN,WAAKxJ,CAAL,IAAUwJ,CAAC,CAACxJ,CAAZ;EACA,WAAKC,CAAL,IAAUuJ,CAAC,CAACvJ,CAAZ;EACA,WAAKmJ,CAAL,IAAUI,CAAC,CAACJ,CAAZ;EAEA,aAAO,IAAP;EAEH;;;mCAEYG,QAAQ;EAEjB,aAAO,KAAKI,cAAL,CAAoB,IAAIJ,MAAxB,CAAP;EAEH;;;0BAEGC,GAAG;EAEH,WAAKxJ,CAAL,GAAStb,IAAI,CAACiD,GAAL,CAAS,KAAKqY,CAAd,EAAiBwJ,CAAC,CAACxJ,CAAnB,CAAT;EACA,WAAKC,CAAL,GAASvb,IAAI,CAACiD,GAAL,CAAS,KAAKsY,CAAd,EAAiBuJ,CAAC,CAACvJ,CAAnB,CAAT;EACA,WAAKmJ,CAAL,GAAS1kB,IAAI,CAACiD,GAAL,CAAS,KAAKyhB,CAAd,EAAiBI,CAAC,CAACJ,CAAnB,CAAT;EAEA,aAAO,IAAP;EAEH;;;0BAEGI,GAAG;EAEH,WAAKxJ,CAAL,GAAStb,IAAI,CAACsC,GAAL,CAAS,KAAKgZ,CAAd,EAAiBwJ,CAAC,CAACxJ,CAAnB,CAAT;EACA,WAAKC,CAAL,GAASvb,IAAI,CAACsC,GAAL,CAAS,KAAKiZ,CAAd,EAAiBuJ,CAAC,CAACvJ,CAAnB,CAAT;EACA,WAAKmJ,CAAL,GAAS1kB,IAAI,CAACsC,GAAL,CAAS,KAAKoiB,CAAd,EAAiBI,CAAC,CAACJ,CAAnB,CAAT;EAEA,aAAO,IAAP;EAEH;EAID;EAEA;EACA;EACA;EAEA;EAEA;EAEA;EAEA;EACA;EAEA;EAEA;;;;kCAEYzhB,KAAKX,KAAK;EAElB,UAAIjC,MAAM,GAAG,KAAKA,MAAL,EAAb;EAEA,aAAO,KAAK2kB,YAAL,CAAkB3kB,MAAM,IAAI,CAA5B,EAA+B4kB,cAA/B,CAA8CjlB,IAAI,CAACsC,GAAL,CAASW,GAAT,EAAcjD,IAAI,CAACiD,GAAL,CAASX,GAAT,EAAcjC,MAAd,CAAd,CAA9C,CAAP;EAEH;;;8BAEO;EAEJ,WAAKib,CAAL,GAAStb,IAAI,CAACqE,KAAL,CAAW,KAAKiX,CAAhB,CAAT;EACA,WAAKC,CAAL,GAASvb,IAAI,CAACqE,KAAL,CAAW,KAAKkX,CAAhB,CAAT;EACA,WAAKmJ,CAAL,GAAS1kB,IAAI,CAACqE,KAAL,CAAW,KAAKqgB,CAAhB,CAAT;EAEA,aAAO,IAAP;EAEH;;;6BAEM;EAEH,WAAKpJ,CAAL,GAAStb,IAAI,CAACiH,IAAL,CAAU,KAAKqU,CAAf,CAAT;EACA,WAAKC,CAAL,GAASvb,IAAI,CAACiH,IAAL,CAAU,KAAKsU,CAAf,CAAT;EACA,WAAKmJ,CAAL,GAAS1kB,IAAI,CAACiH,IAAL,CAAU,KAAKyd,CAAf,CAAT;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,WAAKpJ,CAAL,GAAStb,IAAI,CAACqnB,KAAL,CAAW,KAAK/L,CAAhB,CAAT;EACA,WAAKC,CAAL,GAASvb,IAAI,CAACqnB,KAAL,CAAW,KAAK9L,CAAhB,CAAT;EACA,WAAKmJ,CAAL,GAAS1kB,IAAI,CAACqnB,KAAL,CAAW,KAAK3C,CAAhB,CAAT;EAEA,aAAO,IAAP;EAEH;;;oCAEa;EAEV,WAAKpJ,CAAL,GAAU,KAAKA,CAAL,GAAS,CAAV,GAAetb,IAAI,CAACiH,IAAL,CAAU,KAAKqU,CAAf,CAAf,GAAmCtb,IAAI,CAACqE,KAAL,CAAW,KAAKiX,CAAhB,CAA5C;EACA,WAAKC,CAAL,GAAU,KAAKA,CAAL,GAAS,CAAV,GAAevb,IAAI,CAACiH,IAAL,CAAU,KAAKsU,CAAf,CAAf,GAAmCvb,IAAI,CAACqE,KAAL,CAAW,KAAKkX,CAAhB,CAA5C;EACA,WAAKmJ,CAAL,GAAU,KAAKA,CAAL,GAAS,CAAV,GAAe1kB,IAAI,CAACiH,IAAL,CAAU,KAAKyd,CAAf,CAAf,GAAmC1kB,IAAI,CAACqE,KAAL,CAAW,KAAKqgB,CAAhB,CAA5C;EAEA,aAAO,IAAP;EAEH;;;+BAEQ;EAEL,WAAKpJ,CAAL,GAAS,CAAE,KAAKA,CAAhB;EACA,WAAKC,CAAL,GAAS,CAAE,KAAKA,CAAhB;EACA,WAAKmJ,CAAL,GAAS,CAAE,KAAKA,CAAhB;EAEA,aAAO,IAAP;EAEH;;;0BAEGI,GAAG;EAEH,aAAO,KAAKxJ,CAAL,GAASwJ,CAAC,CAACxJ,CAAX,GAAe,KAAKC,CAAL,GAASuJ,CAAC,CAACvJ,CAA1B,GAA8B,KAAKmJ,CAAL,GAASI,CAAC,CAACJ,CAAhD;EAEH;;;;iCAIU;EAEP,aAAO,KAAKpJ,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKC,CAAL,GAAS,KAAKA,CAAhC,GAAoC,KAAKmJ,CAAL,GAAS,KAAKA,CAAzD;EAEH;;;+BAEQ;EAEL,aAAO1kB,IAAI,CAACklB,IAAL,CAAU,KAAK5J,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKC,CAAL,GAAS,KAAKA,CAAhC,GAAoC,KAAKmJ,CAAL,GAAS,KAAKA,CAA5D,CAAP;EAEH;;;wCAEiB;EAEd,aAAO1kB,IAAI,CAACuK,GAAL,CAAS,KAAK+Q,CAAd,IAAmBtb,IAAI,CAACuK,GAAL,CAAS,KAAKgR,CAAd,CAAnB,GAAsCvb,IAAI,CAACuK,GAAL,CAAS,KAAKma,CAAd,CAA7C;EAEH;;;kCAEW;EAER,aAAO,KAAKM,YAAL,CAAkB,KAAK3kB,MAAL,MAAiB,CAAnC,CAAP;EAEH;;;gCAESA,QAAQ;EAEd,aAAO,KAAK+mB,SAAL,GAAiBnC,cAAjB,CAAgC5kB,MAAhC,CAAP;EAEH;;;2BAEIykB,GAAGwC,OAAO;EAEX,WAAKhM,CAAL,IAAU,CAACwJ,CAAC,CAACxJ,CAAF,GAAM,KAAKA,CAAZ,IAAiBgM,KAA3B;EACA,WAAK/L,CAAL,IAAU,CAACuJ,CAAC,CAACvJ,CAAF,GAAM,KAAKA,CAAZ,IAAiB+L,KAA3B;EACA,WAAK5C,CAAL,IAAU,CAACI,CAAC,CAACJ,CAAF,GAAM,KAAKA,CAAZ,IAAiB4C,KAA3B;EAEA,aAAO,IAAP;EAEH;;;kCAEWC,IAAIC,IAAIF,OAAO;EAEvB,aAAO,KAAKpB,UAAL,CAAgBsB,EAAhB,EAAoBD,EAApB,EAAwBtC,cAAxB,CAAuCqC,KAAvC,EAA8CG,GAA9C,CAAkDF,EAAlD,CAAP;EAEH;;;4BAEKzC,GAAGH,GAAG;EAER,UAAIA,CAAC,KAAKxf,SAAV,EAAqB;EAEjB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,qFAAb;EACA,eAAO,KAAK2B,YAAL,CAAkB5C,CAAlB,EAAqBH,CAArB,CAAP;EAEH;;EAED,UAAIrJ,CAAC,GAAG,KAAKA,CAAb;EAAA,UAAgBC,CAAC,GAAG,KAAKA,CAAzB;EAAA,UAA4BmJ,CAAC,GAAG,KAAKA,CAArC;EAEA,WAAKpJ,CAAL,GAASC,CAAC,GAAGuJ,CAAC,CAACJ,CAAN,GAAUA,CAAC,GAAGI,CAAC,CAACvJ,CAAzB;EACA,WAAKA,CAAL,GAASmJ,CAAC,GAAGI,CAAC,CAACxJ,CAAN,GAAUA,CAAC,GAAGwJ,CAAC,CAACJ,CAAzB;EACA,WAAKA,CAAL,GAASpJ,CAAC,GAAGwJ,CAAC,CAACvJ,CAAN,GAAUA,CAAC,GAAGuJ,CAAC,CAACxJ,CAAzB;EAEA,aAAO,IAAP;EAEH;;;mCAEY3L,GAAGG,GAAG;EAEf,UAAI6X,EAAE,GAAGhY,CAAC,CAAC2L,CAAX;EAAA,UAAcsM,EAAE,GAAGjY,CAAC,CAAC4L,CAArB;EAAA,UAAwBsM,EAAE,GAAGlY,CAAC,CAAC+U,CAA/B;EACA,UAAIoD,EAAE,GAAGhY,CAAC,CAACwL,CAAX;EAAA,UAAcyM,EAAE,GAAGjY,CAAC,CAACyL,CAArB;EAAA,UAAwByM,EAAE,GAAGlY,CAAC,CAAC4U,CAA/B;EAEA,WAAKpJ,CAAL,GAASsM,EAAE,GAAGI,EAAL,GAAUH,EAAE,GAAGE,EAAxB;EACA,WAAKxM,CAAL,GAASsM,EAAE,GAAGC,EAAL,GAAUH,EAAE,GAAGK,EAAxB;EACA,WAAKtD,CAAL,GAASiD,EAAE,GAAGI,EAAL,GAAUH,EAAE,GAAGE,EAAxB;EAEA,aAAO,IAAP;EAEH;;;sCAEeG,QAAQ;EAEpB,UAAIpD,MAAM,GAAGoD,MAAM,CAACC,GAAP,CAAW,IAAX,IAAmBD,MAAM,CAACE,QAAP,EAAhC;EAEA,aAAO,KAAKljB,IAAL,CAAUgjB,MAAV,EAAkBhD,cAAlB,CAAiCJ,MAAjC,CAAP;EAEH;EAID;EAEA;EAEA;EAMA;EACA;EAIA;EAEA;EAEA;;;;8BAIQC,GAAG;EAEP,UAAIsD,KAAK,GAAG,KAAKF,GAAL,CAASpD,CAAT,IAAe9kB,IAAI,CAACklB,IAAL,CAAU,KAAKiD,QAAL,KAAkBrD,CAAC,CAACqD,QAAF,EAA5B,CAA3B,CAFO;;EAMP,aAAOnoB,IAAI,CAACqoB,IAAL,CAAUlD,KAAK,CAACC,KAAN,CAAYgD,KAAZ,EAAmB,CAAE,CAArB,EAAwB,CAAxB,CAAV,CAAP;EAEH;;;iCAEUtD,GAAG;EAEV,aAAO9kB,IAAI,CAACklB,IAAL,CAAU,KAAKoD,iBAAL,CAAuBxD,CAAvB,CAAV,CAAP;EAEH;;;wCAEiBA,GAAG;EAEjB,UAAIyD,EAAE,GAAG,KAAKjN,CAAL,GAASwJ,CAAC,CAACxJ,CAApB;EAAA,UAAuBkN,EAAE,GAAG,KAAKjN,CAAL,GAASuJ,CAAC,CAACvJ,CAAvC;EAAA,UAA0CkN,EAAE,GAAG,KAAK/D,CAAL,GAASI,CAAC,CAACJ,CAA1D;EAEA,aAAO6D,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAf,GAAoBC,EAAE,GAAGA,EAAhC;EAEH;;;0CAEmB3D,GAAG;EAEnB,aAAO9kB,IAAI,CAACuK,GAAL,CAAS,KAAK+Q,CAAL,GAASwJ,CAAC,CAACxJ,CAApB,IAAyBtb,IAAI,CAACuK,GAAL,CAAS,KAAKgR,CAAL,GAASuJ,CAAC,CAACvJ,CAApB,CAAzB,GAAkDvb,IAAI,CAACuK,GAAL,CAAS,KAAKma,CAAL,GAASI,CAAC,CAACJ,CAApB,CAAzD;EAEH;;;uCAEgBuB,GAAG;EAEhB,UAAIyC,YAAY,GAAG1oB,IAAI,CAACgY,GAAL,CAASiO,CAAC,CAAC0C,GAAX,IAAkB1C,CAAC,CAAC3L,MAAvC;EAEA,WAAKgB,CAAL,GAASoN,YAAY,GAAG1oB,IAAI,CAACgY,GAAL,CAASiO,CAAC,CAACmC,KAAX,CAAxB;EACA,WAAK7M,CAAL,GAASvb,IAAI,CAAC8X,GAAL,CAASmO,CAAC,CAAC0C,GAAX,IAAkB1C,CAAC,CAAC3L,MAA7B;EACA,WAAKoK,CAAL,GAASgE,YAAY,GAAG1oB,IAAI,CAAC8X,GAAL,CAASmO,CAAC,CAACmC,KAAX,CAAxB;EAEA,aAAO,IAAP;EAEH;;;yCAEkBjS,GAAG;EAElB,WAAKmF,CAAL,GAASnF,CAAC,CAACmE,MAAF,GAAWta,IAAI,CAACgY,GAAL,CAAS7B,CAAC,CAACiS,KAAX,CAApB;EACA,WAAK7M,CAAL,GAASpF,CAAC,CAACoF,CAAX;EACA,WAAKmJ,CAAL,GAASvO,CAAC,CAACmE,MAAF,GAAWta,IAAI,CAAC8X,GAAL,CAAS3B,CAAC,CAACiS,KAAX,CAApB;EAEA,aAAO,IAAP;EAEH;;;4CAEqB9iB,GAAG;EAErB,UAAI8K,CAAC,GAAG9K,CAAC,CAACyf,QAAV;EAEA,WAAKzJ,CAAL,GAASlL,CAAC,CAAC,EAAD,CAAV;EACA,WAAKmL,CAAL,GAASnL,CAAC,CAAC,EAAD,CAAV;EACA,WAAKsU,CAAL,GAAStU,CAAC,CAAC,EAAD,CAAV;EAEA,aAAO,IAAP;EAEH;;;yCAEkB9K,GAAG;EAElB,UAAIsjB,EAAE,GAAG,KAAKC,mBAAL,CAAyBvjB,CAAzB,EAA4B,CAA5B,EAA+BjF,MAA/B,EAAT;EACA,UAAIyoB,EAAE,GAAG,KAAKD,mBAAL,CAAyBvjB,CAAzB,EAA4B,CAA5B,EAA+BjF,MAA/B,EAAT;EACA,UAAI0oB,EAAE,GAAG,KAAKF,mBAAL,CAAyBvjB,CAAzB,EAA4B,CAA5B,EAA+BjF,MAA/B,EAAT;EAEA,WAAKib,CAAL,GAASsN,EAAT;EACA,WAAKrN,CAAL,GAASuN,EAAT;EACA,WAAKpE,CAAL,GAASqE,EAAT;EAEA,aAAO,IAAP;EAEH;;;0CAEmBzjB,GAAGlE,OAAO;EAE1B,aAAO,KAAK4nB,SAAL,CAAe1jB,CAAC,CAACyf,QAAjB,EAA2B3jB,KAAK,GAAG,CAAnC,CAAP;EAEH;;;6BAEM0jB,GAAG;EAEN,aAASA,CAAC,CAACxJ,CAAF,KAAQ,KAAKA,CAAd,IAAqBwJ,CAAC,CAACvJ,CAAF,KAAQ,KAAKA,CAAlC,IAAyCuJ,CAAC,CAACJ,CAAF,KAAQ,KAAKA,CAA9D;EAEH;;;gCAES3jB,OAAO2Q,QAAQ;EAErB,UAAIA,MAAM,KAAKvM,SAAf,EAA0BuM,MAAM,GAAG,CAAT;EAE1B,WAAK4J,CAAL,GAASva,KAAK,CAAC2Q,MAAD,CAAd;EACA,WAAK6J,CAAL,GAASxa,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAd;EACA,WAAKgT,CAAL,GAAS3jB,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAd;EAEA,aAAO,IAAP;EAEH;;;8BAEO3Q,OAAO2Q,QAAQ;EAEnB,UAAI3Q,KAAK,KAAKoE,SAAd,EAAyBpE,KAAK,GAAG,EAAR;EACzB,UAAI2Q,MAAM,KAAKvM,SAAf,EAA0BuM,MAAM,GAAG,CAAT;EAE1B3Q,MAAAA,KAAK,CAAC2Q,MAAD,CAAL,GAAgB,KAAK4J,CAArB;EACAva,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoB,KAAK6J,CAAzB;EACAxa,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoB,KAAKgT,CAAzB;EAEA,aAAO3jB,KAAP;EAEH;;;0CAEmBkoB,WAAW7nB,OAAOsQ,QAAQ;EAE1C,UAAIA,MAAM,KAAKvM,SAAf,EAA0B;EAEtB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,+DAAb;EAEH;;EAED,WAAKzK,CAAL,GAAS2N,SAAS,CAACC,IAAV,CAAe9nB,KAAf,CAAT;EACA,WAAKma,CAAL,GAAS0N,SAAS,CAACE,IAAV,CAAe/nB,KAAf,CAAT;EACA,WAAKsjB,CAAL,GAASuE,SAAS,CAACG,IAAV,CAAehoB,KAAf,CAAT;EAEA,aAAO,IAAP;EAEH;;;4BACK6B,KAAKX,KAAK;EAEZ;EAEA,WAAKgZ,CAAL,GAAStb,IAAI,CAACsC,GAAL,CAASW,GAAG,CAACqY,CAAb,EAAgBtb,IAAI,CAACiD,GAAL,CAASX,GAAG,CAACgZ,CAAb,EAAgB,KAAKA,CAArB,CAAhB,CAAT;EACA,WAAKC,CAAL,GAASvb,IAAI,CAACsC,GAAL,CAASW,GAAG,CAACsY,CAAb,EAAgBvb,IAAI,CAACiD,GAAL,CAASX,GAAG,CAACiZ,CAAb,EAAgB,KAAKA,CAArB,CAAhB,CAAT;EACA,WAAKmJ,CAAL,GAAS1kB,IAAI,CAACsC,GAAL,CAASW,GAAG,CAACyhB,CAAb,EAAgB1kB,IAAI,CAACiD,GAAL,CAASX,GAAG,CAACoiB,CAAb,EAAgB,KAAKA,CAArB,CAAhB,CAAT;EAEA,aAAO,IAAP;EAEH;;;kCAEW2E,QAAQC,QAAQ;EAExB,UAAIrmB,GAAG,GAAG,IAAI0iB,OAAJ,EAAV;EACA,UAAIrjB,GAAG,GAAG,IAAIqjB,OAAJ,EAAV;EAEA1iB,MAAAA,GAAG,CAACuR,GAAJ,CAAQ6U,MAAR,EAAgBA,MAAhB,EAAwBA,MAAxB;EACA/mB,MAAAA,GAAG,CAACkS,GAAJ,CAAQ8U,MAAR,EAAgBA,MAAhB,EAAwBA,MAAxB;EAEA,aAAO,KAAKlE,KAAL,CAAWniB,GAAX,EAAgBX,GAAhB,CAAP;EAIH;;;;;;EChtBL;;;;;;MAMMinB;;;EACF,iBAAY1O,CAAZ,EAAe2O,CAAf,EAAkB1Z,CAAlB,EAAqBH,CAArB,EAAwB;EAAA;;EAGpB,SAAKkL,CAAL,GAAS,CAAT;EACA,SAAK2O,CAAL,GAAS,CAAT;EACA,SAAK1Z,CAAL,GAAS,CAAT;EACA,SAAKH,CAAL,GAAS,CAAT;EACA,SAAK8Z,OAAL,GAAe,CAAC,CAAhB;;EACA,QAAID,CAAC,KAAKrkB,SAAN,IAAmB2K,CAAC,KAAK3K,SAAzB,IAAsCwK,CAAC,KAAKxK,SAAhD,EAA2D;EACvD,aAAO,KAAKqP,GAAL,CAASqG,CAAT,CAAP;EACH;;EACD,WAAO,KAAK6O,OAAL,CAAa7O,CAAb,EAAgB2O,CAAhB,EAAmB1Z,CAAnB,EAAsBH,CAAtB,CAAP;EACH;;;;0BAEGxO,OAAO;EACP,UAAIA,KAAK,IAAIA,KAAK,CAACsoB,OAAnB,EAA4B;EAExB,aAAKxkB,IAAL,CAAU9D,KAAV;EAEH,OAJD,MAIO,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;EAElC,aAAKwoB,MAAL,CAAYxoB,KAAZ;EAEH,OAJM,MAIA,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;EAElC,aAAKyoB,QAAL,CAAczoB,KAAd;EAEH;;EAED,aAAO,IAAP;EACH;;;;6BAEM0oB,KAAK;EAERA,MAAAA,GAAG,GAAG7pB,IAAI,CAACqE,KAAL,CAAWwlB,GAAX,CAAN;EAEA,WAAKhP,CAAL,GAAS,CAACgP,GAAG,IAAI,EAAP,GAAY,GAAb,IAAoB,GAA7B;EACA,WAAKL,CAAL,GAAS,CAACK,GAAG,IAAI,CAAP,GAAW,GAAZ,IAAmB,GAA5B;EACA,WAAK/Z,CAAL,GAAS,CAAC+Z,GAAG,GAAG,GAAP,IAAc,GAAvB;EAEA,aAAO,IAAP;EAEH;;;;6BAEMhP,GAAG2O,GAAG1Z,GAAG;EAEZ,WAAK+K,CAAL,GAASA,CAAT;EACA,WAAK2O,CAAL,GAASA,CAAT;EACA,WAAK1Z,CAAL,GAASA,CAAT;EAEA,aAAO,IAAP;EAEH;;;;8BAEO+K,GAAG2O,GAAG1Z,GAAGH,GAAG;EAEhB,WAAKkL,CAAL,GAASA,CAAT;EACA,WAAK2O,CAAL,GAASA,CAAT;EACA,WAAK1Z,CAAL,GAASA,CAAT;EACA,WAAKH,CAAL,GAASA,CAAT;EAEA,aAAO,IAAP;EAEH;;;;+BAEQ+D,OAAO;EAEZ,UAAIpO,CAAJ;;EAEA,UAAIA,CAAC,GAAG,kCAAkCwkB,IAAlC,CAAuCpW,KAAvC,CAAR,EAAuD;EAEnD;EAEA,YAAIqW,KAAJ;EACA,YAAIzoB,IAAI,GAAGgE,CAAC,CAAC,CAAD,CAAZ;EACA,YAAIuR,UAAU,GAAGvR,CAAC,CAAC,CAAD,CAAlB;;EAEA,gBAAQhE,IAAR;EAEI,eAAK,KAAL;EACA,eAAK,MAAL;EACI,gBAAIyoB,KAAK,GAAG,gEAAgED,IAAhE,CAAqEjT,UAArE,CAAZ,EAA8F;EAE1F;EACA,mBAAKgE,CAAL,GAAS7a,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAcgH,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAtB,IAAwC,GAAjD;EACA,mBAAKP,CAAL,GAASxpB,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAcgH,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAtB,IAAwC,GAAjD;EACA,mBAAKja,CAAL,GAAS9P,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAcgH,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAtB,IAAwC,GAAjD;;EAEA,kBAAIA,KAAK,CAAC,CAAD,CAAT,EAAc;EACV,oBAAIA,KAAK,CAAC,CAAD,CAAL,GAAW,CAAf,EAAkB;EACd,uBAAKpa,CAAL,GAAS3P,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAcgH,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAtB,IAAwC,GAAjD;EACH,iBAFD,MAEO;EACH,uBAAKpa,CAAL,GAAS3P,IAAI,CAACiD,GAAL,CAAS,CAAT,EAAY8mB,KAAK,CAAC,CAAD,CAAjB,CAAT;EACH;EAEJ;;EAGD,qBAAO,IAAP;EAEH;;EAED,gBAAIA,KAAK,GAAG,sEAAsED,IAAtE,CAA2EjT,UAA3E,CAAZ,EAAoG;EAEhG;EACA,mBAAKgE,CAAL,GAAS7a,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAcgH,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAtB,IAAwC,GAAjD;EACA,mBAAKP,CAAL,GAASxpB,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAcgH,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAtB,IAAwC,GAAjD;EACA,mBAAKja,CAAL,GAAS9P,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAcgH,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAtB,IAAwC,GAAjD;;EAEA,kBAAIA,KAAK,CAAC,CAAD,CAAT,EAAc;EACV,oBAAIA,KAAK,CAAC,CAAD,CAAL,GAAW,CAAf,EAAkB;EACd,uBAAKpa,CAAL,GAAS3P,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAcgH,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAtB,IAAwC,GAAjD;EACH,iBAFD,MAEO;EACH,uBAAKpa,CAAL,GAAS3P,IAAI,CAACiD,GAAL,CAAS,CAAT,EAAY8mB,KAAK,CAAC,CAAD,CAAjB,CAAT;EACH;EAEJ;;EAED,qBAAO,IAAP;EAEH;;EAED;;EAEJ,eAAK,KAAL;EACA,eAAK,MAAL;EAEI,gBAAIA,KAAK,GAAG,gFAAgFD,IAAhF,CAAqFjT,UAArF,CAAZ,EAA8G;EAE1G;EACA,kBAAInJ,CAAC,GAAG/L,UAAU,CAACooB,KAAK,CAAC,CAAD,CAAN,CAAV,GAAuB,GAA/B;EACA,kBAAI9D,CAAC,GAAGhc,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,GAAjC;EACA,kBAAIxd,CAAC,GAAGtC,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAR,GAAyB,GAAjC;;EAEA,kBAAIA,KAAK,CAAC,CAAD,CAAT,EAAc;EACV,oBAAIA,KAAK,CAAC,CAAD,CAAL,GAAW,CAAf,EAAkB;EACd,uBAAKpa,CAAL,GAAS3P,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAcgH,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAtB,IAAwC,GAAjD;EACH,iBAFD,MAEO;EACH,uBAAKpa,CAAL,GAAS3P,IAAI,CAACiD,GAAL,CAAS,CAAT,EAAYgH,QAAQ,CAAC8f,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAApB,CAAT;EACH;EAEJ;;EAED,qBAAO,KAAKC,MAAL,CAAYtc,CAAZ,EAAeuY,CAAf,EAAkB1Z,CAAlB,CAAP;EAEH;;EAED;EAtER;EA0EH,OAlFD,MAkFO,IAAIjH,CAAC,GAAG,qBAAqBwkB,IAArB,CAA0BpW,KAA1B,CAAR,EAA0C;EAE7C;EAEA,YAAImW,GAAG,GAAGvkB,CAAC,CAAC,CAAD,CAAX;EACA,YAAI2kB,IAAI,GAAGJ,GAAG,CAACxpB,MAAf;;EAEA,YAAI4pB,IAAI,KAAK,CAAb,EAAgB;EAEZ;EACA,eAAKpP,CAAL,GAAS5Q,QAAQ,CAAC4f,GAAG,CAACK,MAAJ,CAAW,CAAX,IAAgBL,GAAG,CAACK,MAAJ,CAAW,CAAX,CAAjB,EAAgC,EAAhC,CAAR,GAA8C,GAAvD;EACA,eAAKV,CAAL,GAASvf,QAAQ,CAAC4f,GAAG,CAACK,MAAJ,CAAW,CAAX,IAAgBL,GAAG,CAACK,MAAJ,CAAW,CAAX,CAAjB,EAAgC,EAAhC,CAAR,GAA8C,GAAvD;EACA,eAAKpa,CAAL,GAAS7F,QAAQ,CAAC4f,GAAG,CAACK,MAAJ,CAAW,CAAX,IAAgBL,GAAG,CAACK,MAAJ,CAAW,CAAX,CAAjB,EAAgC,EAAhC,CAAR,GAA8C,GAAvD;EAEA,iBAAO,IAAP;EAEH,SATD,MASO,IAAID,IAAI,KAAK,CAAb,EAAgB;EAEnB;EACA,eAAKpP,CAAL,GAAS5Q,QAAQ,CAAC4f,GAAG,CAACK,MAAJ,CAAW,CAAX,IAAgBL,GAAG,CAACK,MAAJ,CAAW,CAAX,CAAjB,EAAgC,EAAhC,CAAR,GAA8C,GAAvD;EACA,eAAKV,CAAL,GAASvf,QAAQ,CAAC4f,GAAG,CAACK,MAAJ,CAAW,CAAX,IAAgBL,GAAG,CAACK,MAAJ,CAAW,CAAX,CAAjB,EAAgC,EAAhC,CAAR,GAA8C,GAAvD;EACA,eAAKpa,CAAL,GAAS7F,QAAQ,CAAC4f,GAAG,CAACK,MAAJ,CAAW,CAAX,IAAgBL,GAAG,CAACK,MAAJ,CAAW,CAAX,CAAjB,EAAgC,EAAhC,CAAR,GAA8C,GAAvD;EAEA,iBAAO,IAAP;EAEH;EAEJ;;EAED,UAAIxW,KAAK,IAAIA,KAAK,CAACrT,MAAN,GAAe,CAA5B,EAA+B;EAE3B;EACA,YAAIwpB,GAAG,GAAGM,aAAa,CAACzW,KAAD,CAAvB;;EAEA,YAAImW,GAAG,KAAK1kB,SAAZ,EAAuB;EAEnB;EACA,eAAKwkB,MAAL,CAAYE,GAAZ;EAEH,SALD,MAKO;EAEH;EACA/D,UAAAA,OAAO,CAACC,IAAR,CAAa,0BAA0BrS,KAAvC;EAEH;EAEJ;;EAED,aAAO,IAAP;EAEH;;;2BAEIqW,OAAO;EAER,WAAKlP,CAAL,GAASkP,KAAK,CAAClP,CAAf;EACA,WAAK2O,CAAL,GAASO,KAAK,CAACP,CAAf;EACA,WAAK1Z,CAAL,GAASia,KAAK,CAACja,CAAf;EAEA,aAAO,IAAP;EAEH;;;6BAEMpC,GAAGuY,GAAG1Z,GAAG;EACZ,aAAOyd,OAAM,CAACtpB,IAAP,CAAY,IAAZ,EAAkBgN,CAAlB,EAAqBuY,CAArB,EAAwB1Z,CAAxB,CAAP;EACH;;;8BAEOmB,GAAGuY,GAAG1Z,GAAGoD,GAAG;EAChB,UAAIya,MAAM,GAAGJ,OAAM,CAACtpB,IAAP,CAAY,IAAZ,EAAkBgN,CAAlB,EAAqBuY,CAArB,EAAwB1Z,CAAxB,CAAb;;EACA6d,MAAAA,MAAM,CAACza,CAAP,GAAWA,CAAX;EACA,aAAOya,MAAP;EACH;;;6BACMlmB,QAAQ;EAEX;EAEA,UAAIA,MAAM,KAAKiB,SAAf,EAA0B;EAEtB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,yCAAb;EACA7hB,QAAAA,MAAM,GAAG;EAAEwJ,UAAAA,CAAC,EAAE,CAAL;EAAQuY,UAAAA,CAAC,EAAE,CAAX;EAAc1Z,UAAAA,CAAC,EAAE;EAAjB,SAAT;EAEH;;EAED,UAAIsO,CAAC,GAAG,KAAKA,CAAb;EAAA,UAAgB2O,CAAC,GAAG,KAAKA,CAAzB;EAAA,UAA4B1Z,CAAC,GAAG,KAAKA,CAArC;EAEA,UAAIxN,GAAG,GAAGtC,IAAI,CAACsC,GAAL,CAASuY,CAAT,EAAY2O,CAAZ,EAAe1Z,CAAf,CAAV;EACA,UAAI7M,GAAG,GAAGjD,IAAI,CAACiD,GAAL,CAAS4X,CAAT,EAAY2O,CAAZ,EAAe1Z,CAAf,CAAV;EAEA,UAAIua,GAAJ,EAASC,UAAT;EACA,UAAIC,SAAS,GAAG,CAACtnB,GAAG,GAAGX,GAAP,IAAc,GAA9B;;EAEA,UAAIW,GAAG,KAAKX,GAAZ,EAAiB;EAEb+nB,QAAAA,GAAG,GAAG,CAAN;EACAC,QAAAA,UAAU,GAAG,CAAb;EAEH,OALD,MAKO;EAEH,YAAIE,KAAK,GAAGloB,GAAG,GAAGW,GAAlB;EAEAqnB,QAAAA,UAAU,GAAGC,SAAS,IAAI,GAAb,GAAmBC,KAAK,IAAIloB,GAAG,GAAGW,GAAV,CAAxB,GAAyCunB,KAAK,IAAI,IAAIloB,GAAJ,GAAUW,GAAd,CAA3D;;EAEA,gBAAQX,GAAR;EAEI,eAAKuY,CAAL;EAAQwP,YAAAA,GAAG,GAAG,CAACb,CAAC,GAAG1Z,CAAL,IAAU0a,KAAV,IAAmBhB,CAAC,GAAG1Z,CAAJ,GAAQ,CAAR,GAAY,CAA/B,CAAN;EAAyC;;EACjD,eAAK0Z,CAAL;EAAQa,YAAAA,GAAG,GAAG,CAACva,CAAC,GAAG+K,CAAL,IAAU2P,KAAV,GAAkB,CAAxB;EAA2B;;EACnC,eAAK1a,CAAL;EAAQua,YAAAA,GAAG,GAAG,CAACxP,CAAC,GAAG2O,CAAL,IAAUgB,KAAV,GAAkB,CAAxB;EAA2B;EAJvC;;EAQAH,QAAAA,GAAG,IAAI,CAAP;EAEH;;EAEDnmB,MAAAA,MAAM,CAACwJ,CAAP,GAAW2c,GAAX;EACAnmB,MAAAA,MAAM,CAAC+hB,CAAP,GAAWqE,UAAX;EACApmB,MAAAA,MAAM,CAACqI,CAAP,GAAWge,SAAX;EAEA,aAAOrmB,MAAP;EAEH;;;8BAEO;EACJ,aAAO,IAAI,KAAKkB,WAAT,CAAqB,KAAKyV,CAA1B,EAA6B,KAAK2O,CAAlC,EAAqC,KAAK1Z,CAA1C,EAA6C,KAAKH,CAAlD,CAAP;EACH;;;2BACIoa,OAAO;EACR,WAAKlP,CAAL,GAASkP,KAAK,CAAClP,CAAf;EACA,WAAK2O,CAAL,GAASO,KAAK,CAACP,CAAf;EACA,WAAK1Z,CAAL,GAASia,KAAK,CAACja,CAAf;EAEA,aAAO,IAAP;EACH;;;qCAEcmW,GAAG;EAEd,WAAKpL,CAAL,IAAUoL,CAAV;EACA,WAAKuD,CAAL,IAAUvD,CAAV;EACA,WAAKnW,CAAL,IAAUmW,CAAV;EAEA,aAAO,IAAP;EAEH;;;+BACQ;EAEL,aAAQ,KAAKpL,CAAL,GAAS,GAAV,IAAkB,EAAlB,GAAwB,KAAK2O,CAAL,GAAS,GAAV,IAAkB,CAAzC,GAA8C,KAAK1Z,CAAL,GAAS,GAAV,IAAkB,CAAtE;EAEH;;;qCAEc;EAEX,aAAO,CAAC,WAAW,KAAK2a,MAAL,GAAcnsB,QAAd,CAAuB,EAAvB,CAAZ,EAAwCF,KAAxC,CAA8C,CAAE,CAAhD,CAAP;EAEH;;;;;;EAKL,IAAI4rB,OAAM,GAAI,YAAY;EAEtB,WAASU,OAAT,CAAiBliB,CAAjB,EAAoB4d,CAApB,EAAuBlJ,CAAvB,EAA0B;EAEtB,QAAIA,CAAC,GAAG,CAAR,EAAWA,CAAC,IAAI,CAAL;EACX,QAAIA,CAAC,GAAG,CAAR,EAAWA,CAAC,IAAI,CAAL;EACX,QAAIA,CAAC,GAAG,IAAI,CAAZ,EAAe,OAAO1U,CAAC,GAAG,CAAC4d,CAAC,GAAG5d,CAAL,IAAU,CAAV,GAAc0U,CAAzB;EACf,QAAIA,CAAC,GAAG,IAAI,CAAZ,EAAe,OAAOkJ,CAAP;EACf,QAAIlJ,CAAC,GAAG,IAAI,CAAZ,EAAe,OAAO1U,CAAC,GAAG,CAAC4d,CAAC,GAAG5d,CAAL,IAAU,CAAV,IAAe,IAAI,CAAJ,GAAQ0U,CAAvB,CAAX;EACf,WAAO1U,CAAP;EAEH;;EAED,SAAO,SAASwhB,MAAT,CAAgBtc,CAAhB,EAAmBuY,CAAnB,EAAsB1Z,CAAtB,EAAyB;EAE5B;EACAmB,IAAAA,CAAC,GAAGyX,KAAK,CAAC9f,eAAN,CAAsBqI,CAAtB,EAAyB,CAAzB,CAAJ;EACAuY,IAAAA,CAAC,GAAGd,KAAK,CAACC,KAAN,CAAYa,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAJ;EACA1Z,IAAAA,CAAC,GAAG4Y,KAAK,CAACC,KAAN,CAAY7Y,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAJ;;EAEA,QAAI0Z,CAAC,KAAK,CAAV,EAAa;EAET,WAAKpL,CAAL,GAAS,KAAK2O,CAAL,GAAS,KAAK1Z,CAAL,GAASvD,CAA3B;EAEH,KAJD,MAIO;EAEH,UAAI/D,CAAC,GAAG+D,CAAC,IAAI,GAAL,GAAWA,CAAC,IAAI,IAAI0Z,CAAR,CAAZ,GAAyB1Z,CAAC,GAAG0Z,CAAJ,GAAS1Z,CAAC,GAAG0Z,CAA9C;EACA,UAAIG,CAAC,GAAI,IAAI7Z,CAAL,GAAU/D,CAAlB;EAEA,WAAKqS,CAAL,GAAS6P,OAAO,CAACtE,CAAD,EAAI5d,CAAJ,EAAOkF,CAAC,GAAG,IAAI,CAAf,CAAhB;EACA,WAAK8b,CAAL,GAASkB,OAAO,CAACtE,CAAD,EAAI5d,CAAJ,EAAOkF,CAAP,CAAhB;EACA,WAAKoC,CAAL,GAAS4a,OAAO,CAACtE,CAAD,EAAI5d,CAAJ,EAAOkF,CAAC,GAAG,IAAI,CAAf,CAAhB;EAEH;;EAED,WAAO,IAAP;EAEH,GAxBD;EA2BH,CAxCY,EAAb;;EA0CA,IAAIyc,aAAa,GAAG;EAChB,eAAa,QADG;EACO,kBAAgB,QADvB;EACiC,UAAQ,QADzC;EACmD,gBAAc,QADjE;EAC2E,WAAS,QADpF;EAEhB,WAAS,QAFO;EAEG,YAAU,QAFb;EAEuB,WAAS,QAFhC;EAE0C,oBAAkB,QAF5D;EAEsE,UAAQ,QAF9E;EAEwF,gBAAc,QAFtG;EAGhB,WAAS,QAHO;EAGG,eAAa,QAHhB;EAG0B,eAAa,QAHvC;EAGiD,gBAAc,QAH/D;EAGyE,eAAa,QAHtF;EAGgG,WAAS,QAHzG;EAIhB,oBAAkB,QAJF;EAIY,cAAY,QAJxB;EAIkC,aAAW,QAJ7C;EAIuD,UAAQ,QAJ/D;EAIyE,cAAY,QAJrF;EAI+F,cAAY,QAJ3G;EAKhB,mBAAiB,QALD;EAKW,cAAY,QALvB;EAKiC,eAAa,QAL9C;EAKwD,cAAY,QALpE;EAK8E,eAAa,QAL3F;EAKqG,iBAAe,QALpH;EAMhB,oBAAkB,QANF;EAMY,gBAAc,QAN1B;EAMoC,gBAAc,QANlD;EAM4D,aAAW,QANvE;EAMiF,gBAAc,QAN/F;EAMyG,kBAAgB,QANzH;EAOhB,mBAAiB,QAPD;EAOW,mBAAiB,QAP5B;EAOsC,mBAAiB,QAPvD;EAOiE,mBAAiB,QAPlF;EAO4F,gBAAc,QAP1G;EAQhB,cAAY,QARI;EAQM,iBAAe,QARrB;EAQ+B,aAAW,QAR1C;EAQoD,aAAW,QAR/D;EAQyE,gBAAc,QARvF;EAQiG,eAAa,QAR9G;EAShB,iBAAe,QATC;EASS,iBAAe,QATxB;EASkC,aAAW,QAT7C;EASuD,eAAa,QATpE;EAS8E,gBAAc,QAT5F;EASsG,UAAQ,QAT9G;EAUhB,eAAa,QAVG;EAUO,UAAQ,QAVf;EAUyB,WAAS,QAVlC;EAU4C,iBAAe,QAV3D;EAUqE,UAAQ,QAV7E;EAUuF,cAAY,QAVnG;EAU6G,aAAW,QAVxH;EAWhB,eAAa,QAXG;EAWO,YAAU,QAXjB;EAW2B,WAAS,QAXpC;EAW8C,WAAS,QAXvD;EAWiE,cAAY,QAX7E;EAWuF,mBAAiB,QAXxG;EAWkH,eAAa,QAX/H;EAYhB,kBAAgB,QAZA;EAYU,eAAa,QAZvB;EAYiC,gBAAc,QAZ/C;EAYyD,eAAa,QAZtE;EAYgF,0BAAwB,QAZxG;EAYkH,eAAa,QAZ/H;EAahB,gBAAc,QAbE;EAaQ,eAAa,QAbrB;EAa+B,eAAa,QAb5C;EAasD,iBAAe,QAbrE;EAa+E,mBAAiB,QAbhG;EAa0G,kBAAgB,QAb1H;EAchB,oBAAkB,QAdF;EAcY,oBAAkB,QAd9B;EAcwC,oBAAkB,QAd1D;EAcoE,iBAAe,QAdnF;EAc6F,UAAQ,QAdrG;EAc+G,eAAa,QAd5H;EAehB,WAAS,QAfO;EAeG,aAAW,QAfd;EAewB,YAAU,QAflC;EAe4C,sBAAoB,QAfhE;EAe0E,gBAAc,QAfxF;EAekG,kBAAgB,QAflH;EAgBhB,kBAAgB,QAhBA;EAgBU,oBAAkB,QAhB5B;EAgBsC,qBAAmB,QAhBzD;EAgBmE,uBAAqB,QAhBxF;EAgBkG,qBAAmB,QAhBrH;EAiBhB,qBAAmB,QAjBH;EAiBa,kBAAgB,QAjB7B;EAiBuC,eAAa,QAjBpD;EAiB8D,eAAa,QAjB3E;EAiBqF,cAAY,QAjBjG;EAiB2G,iBAAe,QAjB1H;EAkBhB,UAAQ,QAlBQ;EAkBE,aAAW,QAlBb;EAkBuB,WAAS,QAlBhC;EAkB0C,eAAa,QAlBvD;EAkBiE,YAAU,QAlB3E;EAkBqF,eAAa,QAlBlG;EAkB4G,YAAU,QAlBtH;EAmBhB,mBAAiB,QAnBD;EAmBW,eAAa,QAnBxB;EAmBkC,mBAAiB,QAnBnD;EAmB6D,mBAAiB,QAnB9E;EAmBwF,gBAAc,QAnBtG;EAmBgH,eAAa,QAnB7H;EAoBhB,UAAQ,QApBQ;EAoBE,UAAQ,QApBV;EAoBoB,UAAQ,QApB5B;EAoBsC,gBAAc,QApBpD;EAoB8D,YAAU,QApBxE;EAoBkF,mBAAiB,QApBnG;EAoB6G,SAAO,QApBpH;EAoB8H,eAAa,QApB3I;EAqBhB,eAAa,QArBG;EAqBO,iBAAe,QArBtB;EAqBgC,YAAU,QArB1C;EAqBoD,gBAAc,QArBlE;EAqB4E,cAAY,QArBxF;EAqBkG,cAAY,QArB9G;EAsBhB,YAAU,QAtBM;EAsBI,YAAU,QAtBd;EAsBwB,aAAW,QAtBnC;EAsB6C,eAAa,QAtB1D;EAsBoE,eAAa,QAtBjF;EAsB2F,eAAa,QAtBxG;EAsBkH,UAAQ,QAtB1H;EAuBhB,iBAAe,QAvBC;EAuBS,eAAa,QAvBtB;EAuBgC,SAAO,QAvBvC;EAuBiD,UAAQ,QAvBzD;EAuBmE,aAAW,QAvB9E;EAuBwF,YAAU,QAvBlG;EAuB4G,eAAa,QAvBzH;EAwBhB,YAAU,QAxBM;EAwBI,WAAS,QAxBb;EAwBuB,WAAS,QAxBhC;EAwB0C,gBAAc,QAxBxD;EAwBkE,YAAU,QAxB5E;EAwBsF,iBAAe;EAxBrG,CAApB;;ECnWA;;EAEA,IAAI5C,EAAE,GAAG,IAAI5B,OAAJ,EAAT;EACA,IAAI6B,EAAE,GAAG,IAAI7B,OAAJ,EAAT;EAEA,IAAIrK,CAAC,GAAG,IAAIqK,OAAJ,EAAR;EACA,IAAIpK,CAAC,GAAG,IAAIoK,OAAJ,EAAR;EACA,IAAIjB,CAAC,GAAG,IAAIiB,OAAJ,EAAR;;MAEMgF;;;EACF,qBAAc;EAAA;;EACV,SAAK5F,QAAL,GAAgB,CAEZ,CAFY,EAET,CAFS,EAEN,CAFM,EAEH,CAFG,EAGZ,CAHY,EAGT,CAHS,EAGN,CAHM,EAGH,CAHG,EAIZ,CAJY,EAIT,CAJS,EAIN,CAJM,EAIH,CAJG,EAKZ,CALY,EAKT,CALS,EAKN,CALM,EAKH,CALG,CAAhB;;EASA,QAAIthB,SAAS,CAACpD,MAAV,GAAmB,CAAvB,EAA0B;EAEtBylB,MAAAA,OAAO,CAAC8E,KAAR,CAAc,yEAAd;EAEH;;EACD,SAAKC,SAAL,GAAiB,IAAjB;EACH;;;;0BAEGC,KAAKC,KAAKC,KAAKC,KAAKC,KAAKC,KAAKC,KAAKC,KAAKC,KAAKC,KAAKC,KAAKC,KAAKC,KAAKC,KAAKC,KAAKC,KAAK;EAEhF,UAAIC,EAAE,GAAG,KAAK/G,QAAd;EAEA+G,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQhB,GAAR;EAAagB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQf,GAAR;EAAae,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQd,GAAR;EAAac,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASb,GAAT;EACvCa,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQZ,GAAR;EAAaY,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQX,GAAR;EAAaW,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQV,GAAR;EAAaU,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAST,GAAT;EACvCS,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQR,GAAR;EAAaQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQP,GAAR;EAAaO,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASN,GAAT;EAAcM,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASL,GAAT;EACxCK,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQJ,GAAR;EAAaI,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQH,GAAR;EAAaG,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASF,GAAT;EAAcE,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASD,GAAT;EAExC,aAAO,IAAP;EAEH;;;iCAEU;EAEP,WAAKrX,GAAL,CAEI,CAFJ,EAEO,CAFP,EAEU,CAFV,EAEa,CAFb,EAGI,CAHJ,EAGO,CAHP,EAGU,CAHV,EAGa,CAHb,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV,EAIa,CAJb,EAKI,CALJ,EAKO,CALP,EAKU,CALV,EAKa,CALb;EASA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAImW,OAAJ,GAAc3B,SAAd,CAAwB,KAAKjE,QAA7B,CAAP;EAEH;;;2BAEIzf,GAAG;EAEJ,UAAIwmB,EAAE,GAAG,KAAK/G,QAAd;EACA,UAAItb,EAAE,GAAGnE,CAAC,CAACyf,QAAX;EAEA+G,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAC7CqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAC7CqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASriB,EAAE,CAAC,EAAD,CAAX;EAAiBqiB,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASriB,EAAE,CAAC,EAAD,CAAX;EAC/CqiB,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASriB,EAAE,CAAC,EAAD,CAAX;EAAiBqiB,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASriB,EAAE,CAAC,EAAD,CAAX;EAAiBqiB,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASriB,EAAE,CAAC,EAAD,CAAX;EAAiBqiB,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASriB,EAAE,CAAC,EAAD,CAAX;EAEnD,aAAO,IAAP;EAEH;;;mCAEYnE,GAAG;EAEZ,UAAIwmB,EAAE,GAAG,KAAK/G,QAAd;EAAA,UAAwBtb,EAAE,GAAGnE,CAAC,CAACyf,QAA/B;EAEA+G,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASriB,EAAE,CAAC,EAAD,CAAX;EACAqiB,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASriB,EAAE,CAAC,EAAD,CAAX;EACAqiB,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASriB,EAAE,CAAC,EAAD,CAAX;EAEA,aAAO,IAAP;EAEH;;;mCAEYsiB,OAAOC,OAAOC,OAAO;EAE9BF,MAAAA,KAAK,CAAClD,mBAAN,CAA0B,IAA1B,EAAgC,CAAhC;EACAmD,MAAAA,KAAK,CAACnD,mBAAN,CAA0B,IAA1B,EAAgC,CAAhC;EACAoD,MAAAA,KAAK,CAACpD,mBAAN,CAA0B,IAA1B,EAAgC,CAAhC;EAEA,aAAO,IAAP;EAEH;;;gCAESkD,OAAOC,OAAOC,OAAO;EAE3B,WAAKzX,GAAL,CACIuX,KAAK,CAACzQ,CADV,EACa0Q,KAAK,CAAC1Q,CADnB,EACsB2Q,KAAK,CAAC3Q,CAD5B,EAC+B,CAD/B,EAEIyQ,KAAK,CAACxQ,CAFV,EAEayQ,KAAK,CAACzQ,CAFnB,EAEsB0Q,KAAK,CAAC1Q,CAF5B,EAE+B,CAF/B,EAGIwQ,KAAK,CAACrH,CAHV,EAGasH,KAAK,CAACtH,CAHnB,EAGsBuH,KAAK,CAACvH,CAH5B,EAG+B,CAH/B,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV,EAIa,CAJb;EAOA,aAAO,IAAP;EAEH;;;sCAEepf,GAAG;EAEf,UAAIwmB,EAAE,GAAG,KAAK/G,QAAd;EACA,UAAItb,EAAE,GAAGnE,CAAC,CAACyf,QAAX;EAEA,UAAImH,MAAM,GAAG,IAAI3E,EAAE,CAACsB,mBAAH,CAAuBvjB,CAAvB,EAA0B,CAA1B,EAA6BjF,MAA7B,EAAjB;EACA,UAAI8rB,MAAM,GAAG,IAAI5E,EAAE,CAACsB,mBAAH,CAAuBvjB,CAAvB,EAA0B,CAA1B,EAA6BjF,MAA7B,EAAjB;EACA,UAAI+rB,MAAM,GAAG,IAAI7E,EAAE,CAACsB,mBAAH,CAAuBvjB,CAAvB,EAA0B,CAA1B,EAA6BjF,MAA7B,EAAjB;EAEAyrB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAF,GAAQyiB,MAAhB;EACAJ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAF,GAAQyiB,MAAhB;EACAJ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAF,GAAQyiB,MAAhB;EAEAJ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAF,GAAQ0iB,MAAhB;EACAL,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAF,GAAQ0iB,MAAhB;EACAL,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAF,GAAQ0iB,MAAhB;EAEAL,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAF,GAAQ2iB,MAAhB;EACAN,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAF,GAAQ2iB,MAAhB;EACAN,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASriB,EAAE,CAAC,EAAD,CAAF,GAAS2iB,MAAlB;EAEA,aAAO,IAAP;EAEH;;;4CAEqBC,OAAO;EAEzB,UAAI,EAAEA,KAAK,IAAIA,KAAK,CAACC,OAAjB,CAAJ,EAA+B;EAE3BxG,QAAAA,OAAO,CAAC8E,KAAR,CAAc,iGAAd;EAEH;;EAED,UAAIkB,EAAE,GAAG,KAAK/G,QAAd;EAEA,UAAIzJ,CAAC,GAAG+Q,KAAK,CAAC/Q,CAAd;EAAA,UAAiBC,CAAC,GAAG8Q,KAAK,CAAC9Q,CAA3B;EAAA,UAA8BmJ,CAAC,GAAG2H,KAAK,CAAC3H,CAAxC;EACA,UAAI/U,CAAC,GAAG3P,IAAI,CAAC8X,GAAL,CAASwD,CAAT,CAAR;EAAA,UAAqBxL,CAAC,GAAG9P,IAAI,CAACgY,GAAL,CAASsD,CAAT,CAAzB;EACA,UAAInF,CAAC,GAAGnW,IAAI,CAAC8X,GAAL,CAASyD,CAAT,CAAR;EAAA,UAAqBnQ,CAAC,GAAGpL,IAAI,CAACgY,GAAL,CAASuD,CAAT,CAAzB;EACA,UAAInL,CAAC,GAAGpQ,IAAI,CAAC8X,GAAL,CAAS4M,CAAT,CAAR;EAAA,UAAqB9V,CAAC,GAAG5O,IAAI,CAACgY,GAAL,CAAS0M,CAAT,CAAzB;;EAEA,UAAI2H,KAAK,CAACE,KAAN,KAAgB,KAApB,EAA2B;EAEvB,YAAIC,EAAE,GAAG7c,CAAC,GAAGS,CAAb;EAAA,YAAgBqc,EAAE,GAAG9c,CAAC,GAAGf,CAAzB;EAAA,YAA4B8d,EAAE,GAAG5c,CAAC,GAAGM,CAArC;EAAA,YAAwCuc,EAAE,GAAG7c,CAAC,GAAGlB,CAAjD;EAEAkd,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ3V,CAAC,GAAG/F,CAAZ;EACA0b,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAE3V,CAAF,GAAMvH,CAAd;EACAkd,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ1gB,CAAR;EAEA0gB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQW,EAAE,GAAGC,EAAE,GAAGthB,CAAlB;EACA0gB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQU,EAAE,GAAGG,EAAE,GAAGvhB,CAAlB;EACA0gB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAEhc,CAAF,GAAMqG,CAAd;EAEA2V,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQa,EAAE,GAAGH,EAAE,GAAGphB,CAAlB;EACA0gB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQY,EAAE,GAAGD,EAAE,GAAGrhB,CAAlB;EACA0gB,QAAAA,EAAE,CAAC,EAAD,CAAF,GAASnc,CAAC,GAAGwG,CAAb;EAEH,OAhBD,MAgBO,IAAIkW,KAAK,CAACE,KAAN,KAAgB,KAApB,EAA2B;EAE9B,YAAIK,EAAE,GAAGzW,CAAC,GAAG/F,CAAb;EAAA,YAAgByc,EAAE,GAAG1W,CAAC,GAAGvH,CAAzB;EAAA,YAA4Bke,EAAE,GAAG1hB,CAAC,GAAGgF,CAArC;EAAA,YAAwC2c,EAAE,GAAG3hB,CAAC,GAAGwD,CAAjD;EAEAkd,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQc,EAAE,GAAGG,EAAE,GAAGjd,CAAlB;EACAgc,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQgB,EAAE,GAAGhd,CAAL,GAAS+c,EAAjB;EACAf,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQnc,CAAC,GAAGvE,CAAZ;EAEA0gB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQnc,CAAC,GAAGf,CAAZ;EACAkd,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQnc,CAAC,GAAGS,CAAZ;EACA0b,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAEhc,CAAV;EAEAgc,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQe,EAAE,GAAG/c,CAAL,GAASgd,EAAjB;EACAhB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQiB,EAAE,GAAGH,EAAE,GAAG9c,CAAlB;EACAgc,QAAAA,EAAE,CAAC,EAAD,CAAF,GAASnc,CAAC,GAAGwG,CAAb;EAEH,OAhBM,MAgBA,IAAIkW,KAAK,CAACE,KAAN,KAAgB,KAApB,EAA2B;EAE9B,YAAIK,EAAE,GAAGzW,CAAC,GAAG/F,CAAb;EAAA,YAAgByc,EAAE,GAAG1W,CAAC,GAAGvH,CAAzB;EAAA,YAA4Bke,EAAE,GAAG1hB,CAAC,GAAGgF,CAArC;EAAA,YAAwC2c,EAAE,GAAG3hB,CAAC,GAAGwD,CAAjD;EAEAkd,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQc,EAAE,GAAGG,EAAE,GAAGjd,CAAlB;EACAgc,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAEnc,CAAF,GAAMf,CAAd;EACAkd,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQgB,EAAE,GAAGD,EAAE,GAAG/c,CAAlB;EAEAgc,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQe,EAAE,GAAGC,EAAE,GAAGhd,CAAlB;EACAgc,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQnc,CAAC,GAAGS,CAAZ;EACA0b,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQiB,EAAE,GAAGH,EAAE,GAAG9c,CAAlB;EAEAgc,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAEnc,CAAF,GAAMvE,CAAd;EACA0gB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQhc,CAAR;EACAgc,QAAAA,EAAE,CAAC,EAAD,CAAF,GAASnc,CAAC,GAAGwG,CAAb;EAEH,OAhBM,MAgBA,IAAIkW,KAAK,CAACE,KAAN,KAAgB,KAApB,EAA2B;EAE9B,YAAIC,EAAE,GAAG7c,CAAC,GAAGS,CAAb;EAAA,YAAgBqc,EAAE,GAAG9c,CAAC,GAAGf,CAAzB;EAAA,YAA4B8d,EAAE,GAAG5c,CAAC,GAAGM,CAArC;EAAA,YAAwCuc,EAAE,GAAG7c,CAAC,GAAGlB,CAAjD;EAEAkd,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ3V,CAAC,GAAG/F,CAAZ;EACA0b,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQY,EAAE,GAAGthB,CAAL,GAASqhB,EAAjB;EACAX,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQU,EAAE,GAAGphB,CAAL,GAASuhB,EAAjB;EAEAb,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ3V,CAAC,GAAGvH,CAAZ;EACAkd,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQa,EAAE,GAAGvhB,CAAL,GAASohB,EAAjB;EACAV,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQW,EAAE,GAAGrhB,CAAL,GAASshB,EAAjB;EAEAZ,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAE1gB,CAAV;EACA0gB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQhc,CAAC,GAAGqG,CAAZ;EACA2V,QAAAA,EAAE,CAAC,EAAD,CAAF,GAASnc,CAAC,GAAGwG,CAAb;EAEH,OAhBM,MAgBA,IAAIkW,KAAK,CAACE,KAAN,KAAgB,KAApB,EAA2B;EAE9B,YAAIS,EAAE,GAAGrd,CAAC,GAAGwG,CAAb;EAAA,YAAgB8W,EAAE,GAAGtd,CAAC,GAAGvE,CAAzB;EAAA,YAA4B8hB,EAAE,GAAGpd,CAAC,GAAGqG,CAArC;EAAA,YAAwCgX,EAAE,GAAGrd,CAAC,GAAG1E,CAAjD;EAEA0gB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ3V,CAAC,GAAG/F,CAAZ;EACA0b,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQqB,EAAE,GAAGH,EAAE,GAAGpe,CAAlB;EACAkd,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQoB,EAAE,GAAGte,CAAL,GAASqe,EAAjB;EAEAnB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQld,CAAR;EACAkd,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQnc,CAAC,GAAGS,CAAZ;EACA0b,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAEhc,CAAF,GAAMM,CAAd;EAEA0b,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAE1gB,CAAF,GAAMgF,CAAd;EACA0b,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQmB,EAAE,GAAGre,CAAL,GAASse,EAAjB;EACApB,QAAAA,EAAE,CAAC,EAAD,CAAF,GAASkB,EAAE,GAAGG,EAAE,GAAGve,CAAnB;EAEH,OAhBM,MAgBA,IAAIyd,KAAK,CAACE,KAAN,KAAgB,KAApB,EAA2B;EAE9B,YAAIS,EAAE,GAAGrd,CAAC,GAAGwG,CAAb;EAAA,YAAgB8W,EAAE,GAAGtd,CAAC,GAAGvE,CAAzB;EAAA,YAA4B8hB,EAAE,GAAGpd,CAAC,GAAGqG,CAArC;EAAA,YAAwCgX,EAAE,GAAGrd,CAAC,GAAG1E,CAAjD;EAEA0gB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ3V,CAAC,GAAG/F,CAAZ;EACA0b,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAEld,CAAV;EACAkd,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ1gB,CAAC,GAAGgF,CAAZ;EAEA0b,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQkB,EAAE,GAAGpe,CAAL,GAASue,EAAjB;EACArB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQnc,CAAC,GAAGS,CAAZ;EACA0b,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQmB,EAAE,GAAGre,CAAL,GAASse,EAAjB;EAEApB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQoB,EAAE,GAAGte,CAAL,GAASqe,EAAjB;EACAnB,QAAAA,EAAE,CAAC,CAAD,CAAF,GAAQhc,CAAC,GAAGM,CAAZ;EACA0b,QAAAA,EAAE,CAAC,EAAD,CAAF,GAASqB,EAAE,GAAGve,CAAL,GAASoe,EAAlB;EAEH,OA/GwB;;;EAkHzBlB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EACAA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EACAA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT,CApHyB;;EAuHzBA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EACAA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EACAA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EACAA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EAEA,aAAO,IAAP;EAEH;;;iDAE0B1F,GAAG;EAE1B,UAAI0F,EAAE,GAAG,KAAK/G,QAAd;EAEA,UAAIzJ,CAAC,GAAG8K,CAAC,CAACgH,EAAV;EAAA,UAAc7R,CAAC,GAAG6K,CAAC,CAACiH,EAApB;EAAA,UAAwB3I,CAAC,GAAG0B,CAAC,CAACkH,EAA9B;EAAA,UAAkC3I,CAAC,GAAGyB,CAAC,CAACmH,EAAxC;EACA,UAAIC,EAAE,GAAGlS,CAAC,GAAGA,CAAb;EAAA,UAAgBmS,EAAE,GAAGlS,CAAC,GAAGA,CAAzB;EAAA,UAA4BmS,EAAE,GAAGhJ,CAAC,GAAGA,CAArC;EACA,UAAIiJ,EAAE,GAAGrS,CAAC,GAAGkS,EAAb;EAAA,UAAiBI,EAAE,GAAGtS,CAAC,GAAGmS,EAA1B;EAAA,UAA8BI,EAAE,GAAGvS,CAAC,GAAGoS,EAAvC;EACA,UAAII,EAAE,GAAGvS,CAAC,GAAGkS,EAAb;EAAA,UAAiBM,EAAE,GAAGxS,CAAC,GAAGmS,EAA1B;EAAA,UAA8BM,EAAE,GAAGtJ,CAAC,GAAGgJ,EAAvC;EACA,UAAIO,EAAE,GAAGtJ,CAAC,GAAG6I,EAAb;EAAA,UAAiBU,EAAE,GAAGvJ,CAAC,GAAG8I,EAA1B;EAAA,UAA8BU,EAAE,GAAGxJ,CAAC,GAAG+I,EAAvC;EAEA5B,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,KAAKgC,EAAE,GAAGE,EAAV,CAAR;EACAlC,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ8B,EAAE,GAAGO,EAAb;EACArC,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ+B,EAAE,GAAGK,EAAb;EAEApC,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ8B,EAAE,GAAGO,EAAb;EACArC,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,KAAK6B,EAAE,GAAGK,EAAV,CAAR;EACAlC,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQiC,EAAE,GAAGE,EAAb;EAEAnC,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ+B,EAAE,GAAGK,EAAb;EACApC,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQiC,EAAE,GAAGE,EAAb;EACAnC,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,KAAK6B,EAAE,GAAGG,EAAV,CAAT,CApB0B;;EAuB1BhC,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EACAA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EACAA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT,CAzB0B;;EA4B1BA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EACAA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EACAA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EACAA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EAEA,aAAO,IAAP;EAEH;;;6BAEMsC,KAAKlqB,QAAQmqB,IAAI;EAEpB,UAAIvC,EAAE,GAAG,KAAK/G,QAAd;EAEAL,MAAAA,CAAC,CAACwB,UAAF,CAAakI,GAAb,EAAkBlqB,MAAlB;;EAEA,UAAIwgB,CAAC,CAACyD,QAAF,OAAiB,CAArB,EAAwB;EAEpB;EAEAzD,QAAAA,CAAC,CAACA,CAAF,GAAM,CAAN;EAEH;;EAEDA,MAAAA,CAAC,CAAC0C,SAAF;EACA9L,MAAAA,CAAC,CAACoM,YAAF,CAAe2G,EAAf,EAAmB3J,CAAnB;;EAEA,UAAIpJ,CAAC,CAAC6M,QAAF,OAAiB,CAArB,EAAwB;EAEpB;EAEA,YAAInoB,IAAI,CAACuK,GAAL,CAAS8jB,EAAE,CAAC3J,CAAZ,MAAmB,CAAvB,EAA0B;EAEtBA,UAAAA,CAAC,CAACpJ,CAAF,IAAO,MAAP;EAEH,SAJD,MAIO;EAEHoJ,UAAAA,CAAC,CAACA,CAAF,IAAO,MAAP;EAEH;;EAEDA,QAAAA,CAAC,CAAC0C,SAAF;EACA9L,QAAAA,CAAC,CAACoM,YAAF,CAAe2G,EAAf,EAAmB3J,CAAnB;EAEH;;EAEDpJ,MAAAA,CAAC,CAAC8L,SAAF;EACA7L,MAAAA,CAAC,CAACmM,YAAF,CAAehD,CAAf,EAAkBpJ,CAAlB;EAEAwQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQxQ,CAAC,CAACA,CAAV;EAAawQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQvQ,CAAC,CAACD,CAAV;EAAawQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQpH,CAAC,CAACpJ,CAAV;EAC1BwQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQxQ,CAAC,CAACC,CAAV;EAAauQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQvQ,CAAC,CAACA,CAAV;EAAauQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQpH,CAAC,CAACnJ,CAAV;EAC1BuQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQxQ,CAAC,CAACoJ,CAAV;EAAaoH,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQvQ,CAAC,CAACmJ,CAAV;EAAaoH,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASpH,CAAC,CAACA,CAAX;EAE1B,aAAO,IAAP;EAEH;;;+BAIQpf,GAAGd,GAAG;EAEX,UAAIA,CAAC,KAAKW,SAAV,EAAqB;EAEjB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,4FAAb;EACA,eAAO,KAAKgB,gBAAL,CAAsBzhB,CAAtB,EAAyBd,CAAzB,CAAP;EAEH;;EAED,aAAO,KAAKuiB,gBAAL,CAAsB,IAAtB,EAA4BzhB,CAA5B,CAAP;EAEH;;;kCAEWA,GAAG;EAEX,aAAO,KAAKyhB,gBAAL,CAAsBzhB,CAAtB,EAAyB,IAAzB,CAAP;EAEH;;;uCAEgBqK,GAAGG,GAAG;EAEnB,UAAI0c,EAAE,GAAG7c,CAAC,CAACoV,QAAX;EACA,UAAI2H,EAAE,GAAG5c,CAAC,CAACiV,QAAX;EACA,UAAI+G,EAAE,GAAG,KAAK/G,QAAd;EAEA,UAAIuJ,GAAG,GAAG9B,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiB+B,GAAG,GAAG/B,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BgC,GAAG,GAAGhC,EAAE,CAAC,CAAD,CAAtC;EAAA,UAA2CiC,GAAG,GAAGjC,EAAE,CAAC,EAAD,CAAnD;EACA,UAAIkC,GAAG,GAAGlC,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBmC,GAAG,GAAGnC,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BoC,GAAG,GAAGpC,EAAE,CAAC,CAAD,CAAtC;EAAA,UAA2CqC,GAAG,GAAGrC,EAAE,CAAC,EAAD,CAAnD;EACA,UAAIsC,GAAG,GAAGtC,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBuC,GAAG,GAAGvC,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BwC,GAAG,GAAGxC,EAAE,CAAC,EAAD,CAAtC;EAAA,UAA4CyC,GAAG,GAAGzC,EAAE,CAAC,EAAD,CAApD;EACA,UAAI0C,GAAG,GAAG1C,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiB2C,GAAG,GAAG3C,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8B4C,GAAG,GAAG5C,EAAE,CAAC,EAAD,CAAtC;EAAA,UAA4C6C,GAAG,GAAG7C,EAAE,CAAC,EAAD,CAApD;EAEA,UAAI8C,GAAG,GAAG5C,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiB6C,GAAG,GAAG7C,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8B8C,GAAG,GAAG9C,EAAE,CAAC,CAAD,CAAtC;EAAA,UAA2C+C,GAAG,GAAG/C,EAAE,CAAC,EAAD,CAAnD;EACA,UAAIgD,GAAG,GAAGhD,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBiD,GAAG,GAAGjD,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BkD,GAAG,GAAGlD,EAAE,CAAC,CAAD,CAAtC;EAAA,UAA2CmD,GAAG,GAAGnD,EAAE,CAAC,EAAD,CAAnD;EACA,UAAIoD,GAAG,GAAGpD,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBqD,GAAG,GAAGrD,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BsD,GAAG,GAAGtD,EAAE,CAAC,EAAD,CAAtC;EAAA,UAA4CuD,GAAG,GAAGvD,EAAE,CAAC,EAAD,CAApD;EACA,UAAIwD,GAAG,GAAGxD,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiByD,GAAG,GAAGzD,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8B0D,GAAG,GAAG1D,EAAE,CAAC,EAAD,CAAtC;EAAA,UAA4C2D,GAAG,GAAG3D,EAAE,CAAC,EAAD,CAApD;EAEAZ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQwC,GAAG,GAAGgB,GAAN,GAAYf,GAAG,GAAGmB,GAAlB,GAAwBlB,GAAG,GAAGsB,GAA9B,GAAoCrB,GAAG,GAAGyB,GAAlD;EACApE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQwC,GAAG,GAAGiB,GAAN,GAAYhB,GAAG,GAAGoB,GAAlB,GAAwBnB,GAAG,GAAGuB,GAA9B,GAAoCtB,GAAG,GAAG0B,GAAlD;EACArE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQwC,GAAG,GAAGkB,GAAN,GAAYjB,GAAG,GAAGqB,GAAlB,GAAwBpB,GAAG,GAAGwB,GAA9B,GAAoCvB,GAAG,GAAG2B,GAAlD;EACAtE,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASwC,GAAG,GAAGmB,GAAN,GAAYlB,GAAG,GAAGsB,GAAlB,GAAwBrB,GAAG,GAAGyB,GAA9B,GAAoCxB,GAAG,GAAG4B,GAAnD;EAEAvE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ4C,GAAG,GAAGY,GAAN,GAAYX,GAAG,GAAGe,GAAlB,GAAwBd,GAAG,GAAGkB,GAA9B,GAAoCjB,GAAG,GAAGqB,GAAlD;EACApE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ4C,GAAG,GAAGa,GAAN,GAAYZ,GAAG,GAAGgB,GAAlB,GAAwBf,GAAG,GAAGmB,GAA9B,GAAoClB,GAAG,GAAGsB,GAAlD;EACArE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ4C,GAAG,GAAGc,GAAN,GAAYb,GAAG,GAAGiB,GAAlB,GAAwBhB,GAAG,GAAGoB,GAA9B,GAAoCnB,GAAG,GAAGuB,GAAlD;EACAtE,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS4C,GAAG,GAAGe,GAAN,GAAYd,GAAG,GAAGkB,GAAlB,GAAwBjB,GAAG,GAAGqB,GAA9B,GAAoCpB,GAAG,GAAGwB,GAAnD;EAEAvE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQgD,GAAG,GAAGQ,GAAN,GAAYP,GAAG,GAAGW,GAAlB,GAAwBV,GAAG,GAAGc,GAA9B,GAAoCb,GAAG,GAAGiB,GAAlD;EACApE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQgD,GAAG,GAAGS,GAAN,GAAYR,GAAG,GAAGY,GAAlB,GAAwBX,GAAG,GAAGe,GAA9B,GAAoCd,GAAG,GAAGkB,GAAlD;EACArE,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASgD,GAAG,GAAGU,GAAN,GAAYT,GAAG,GAAGa,GAAlB,GAAwBZ,GAAG,GAAGgB,GAA9B,GAAoCf,GAAG,GAAGmB,GAAnD;EACAtE,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASgD,GAAG,GAAGW,GAAN,GAAYV,GAAG,GAAGc,GAAlB,GAAwBb,GAAG,GAAGiB,GAA9B,GAAoChB,GAAG,GAAGoB,GAAnD;EAEAvE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQoD,GAAG,GAAGI,GAAN,GAAYH,GAAG,GAAGO,GAAlB,GAAwBN,GAAG,GAAGU,GAA9B,GAAoCT,GAAG,GAAGa,GAAlD;EACApE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQoD,GAAG,GAAGK,GAAN,GAAYJ,GAAG,GAAGQ,GAAlB,GAAwBP,GAAG,GAAGW,GAA9B,GAAoCV,GAAG,GAAGc,GAAlD;EACArE,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASoD,GAAG,GAAGM,GAAN,GAAYL,GAAG,GAAGS,GAAlB,GAAwBR,GAAG,GAAGY,GAA9B,GAAoCX,GAAG,GAAGe,GAAnD;EACAtE,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASoD,GAAG,GAAGO,GAAN,GAAYN,GAAG,GAAGU,GAAlB,GAAwBT,GAAG,GAAGa,GAA9B,GAAoCZ,GAAG,GAAGgB,GAAnD;EAEA,aAAO,IAAP;EAEH;;;qCAEcpK,GAAG;EAEd,UAAI6F,EAAE,GAAG,KAAK/G,QAAd;EAEA+G,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,EAAD,CAAF,IAAU7F,CAAV;EACpC6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,EAAD,CAAF,IAAU7F,CAAV;EACpC6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,EAAD,CAAF,IAAU7F,CAAV;EAAa6F,MAAAA,EAAE,CAAC,EAAD,CAAF,IAAU7F,CAAV;EACrC6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,EAAD,CAAF,IAAU7F,CAAV;EAAa6F,MAAAA,EAAE,CAAC,EAAD,CAAF,IAAU7F,CAAV;EAErC,aAAO,IAAP;EAEH;;;6CAEsBgD,WAAW;EAE9B,WAAK,IAAI1oB,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG0c,SAAS,CAACqH,KAA9B,EAAqC/vB,CAAC,GAAGgM,CAAzC,EAA4ChM,CAAC,EAA7C,EAAiD;EAE7CinB,QAAAA,EAAE,CAAClM,CAAH,GAAO2N,SAAS,CAACC,IAAV,CAAe3oB,CAAf,CAAP;EACAinB,QAAAA,EAAE,CAACjM,CAAH,GAAO0N,SAAS,CAACE,IAAV,CAAe5oB,CAAf,CAAP;EACAinB,QAAAA,EAAE,CAAC9C,CAAH,GAAOuE,SAAS,CAACG,IAAV,CAAe7oB,CAAf,CAAP;EAEAinB,QAAAA,EAAE,CAACL,YAAH,CAAgB,IAAhB;EAEA8B,QAAAA,SAAS,CAACsH,MAAV,CAAiBhwB,CAAjB,EAAoBinB,EAAE,CAAClM,CAAvB,EAA0BkM,EAAE,CAACjM,CAA7B,EAAgCiM,EAAE,CAAC9C,CAAnC;EAEH;;EAED,aAAOuE,SAAP;EAEH;;;oCAIa;EAEV,UAAI6C,EAAE,GAAG,KAAK/G,QAAd;EAEA,UAAI+F,GAAG,GAAGgB,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBf,GAAG,GAAGe,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8Bd,GAAG,GAAGc,EAAE,CAAC,CAAD,CAAtC;EAAA,UAA2Cb,GAAG,GAAGa,EAAE,CAAC,EAAD,CAAnD;EACA,UAAIZ,GAAG,GAAGY,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBX,GAAG,GAAGW,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BV,GAAG,GAAGU,EAAE,CAAC,CAAD,CAAtC;EAAA,UAA2CT,GAAG,GAAGS,EAAE,CAAC,EAAD,CAAnD;EACA,UAAIR,GAAG,GAAGQ,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBP,GAAG,GAAGO,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BN,GAAG,GAAGM,EAAE,CAAC,EAAD,CAAtC;EAAA,UAA4CL,GAAG,GAAGK,EAAE,CAAC,EAAD,CAApD;EACA,UAAIJ,GAAG,GAAGI,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBH,GAAG,GAAGG,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BF,GAAG,GAAGE,EAAE,CAAC,EAAD,CAAtC;EAAA,UAA4CD,GAAG,GAAGC,EAAE,CAAC,EAAD,CAApD,CAPU;EAUV;;EAEA,aACIJ,GAAG,IACC,CAAET,GAAF,GAAQG,GAAR,GAAcG,GAAd,GACEP,GAAG,GAAGK,GAAN,GAAYE,GADd,GAEEN,GAAG,GAAGE,GAAN,GAAYK,GAFd,GAGET,GAAG,GAAGM,GAAN,GAAYG,GAHd,GAIER,GAAG,GAAGG,GAAN,GAAYM,GAJd,GAKEV,GAAG,GAAGK,GAAN,GAAYK,GANf,CAAH,GAQAE,GAAG,IACC,CAAEb,GAAF,GAAQM,GAAR,GAAcK,GAAd,GACEX,GAAG,GAAGO,GAAN,GAAYG,GADd,GAEEP,GAAG,GAAGC,GAAN,GAAYM,GAFd,GAGER,GAAG,GAAGE,GAAN,GAAYO,GAHd,GAIET,GAAG,GAAGK,GAAN,GAAYC,GAJd,GAKEL,GAAG,GAAGG,GAAN,GAAYE,GANf,CARH,GAgBAM,GAAG,IACC,CAAEd,GAAF,GAAQO,GAAR,GAAcE,GAAd,GACET,GAAG,GAAGK,GAAN,GAAYM,GADd,GAEER,GAAG,GAAGC,GAAN,GAAYK,GAFd,GAGER,GAAG,GAAGG,GAAN,GAAYO,GAHd,GAIER,GAAG,GAAGE,GAAN,GAAYG,GAJd,GAKEP,GAAG,GAAGM,GAAN,GAAYC,GANf,CAhBH,GAwBAO,GAAG,IACC,CAAEb,GAAF,GAAQG,GAAR,GAAcG,GAAd,GACER,GAAG,GAAGM,GAAN,GAAYG,GADd,GAEET,GAAG,GAAGK,GAAN,GAAYK,GAFd,GAGER,GAAG,GAAGE,GAAN,GAAYK,GAHd,GAIER,GAAG,GAAGG,GAAN,GAAYM,GAJd,GAKET,GAAG,GAAGK,GAAN,GAAYE,GANf,CAzBP;EAoCH;;;kCAEW;EAER,UAAIQ,EAAE,GAAG,KAAK/G,QAAd;EACA,UAAIyL,GAAJ;EAEAA,MAAAA,GAAG,GAAG1E,EAAE,CAAC,CAAD,CAAR;EAAaA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAV;EAAeA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ0E,GAAR;EAC5BA,MAAAA,GAAG,GAAG1E,EAAE,CAAC,CAAD,CAAR;EAAaA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAV;EAAeA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ0E,GAAR;EAC5BA,MAAAA,GAAG,GAAG1E,EAAE,CAAC,CAAD,CAAR;EAAaA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAV;EAAeA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ0E,GAAR;EAE5BA,MAAAA,GAAG,GAAG1E,EAAE,CAAC,CAAD,CAAR;EAAaA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,EAAD,CAAV;EAAgBA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS0E,GAAT;EAC7BA,MAAAA,GAAG,GAAG1E,EAAE,CAAC,CAAD,CAAR;EAAaA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,EAAD,CAAV;EAAgBA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS0E,GAAT;EAC7BA,MAAAA,GAAG,GAAG1E,EAAE,CAAC,EAAD,CAAR;EAAcA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAASA,EAAE,CAAC,EAAD,CAAX;EAAiBA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS0E,GAAT;EAE/B,aAAO,IAAP;EAEH;;;kCAEW1L,GAAG;EAEX,UAAIgH,EAAE,GAAG,KAAK/G,QAAd;EAEA+G,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAShH,CAAC,CAACxJ,CAAX;EACAwQ,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAShH,CAAC,CAACvJ,CAAX;EACAuQ,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAShH,CAAC,CAACJ,CAAX;EAEA,aAAO,IAAP;EAEH;;;iCAEUpf,GAAGmrB,mBAAmB;EAE7B;EACA,UAAI3E,EAAE,GAAG,KAAK/G,QAAd;EAAA,UACItb,EAAE,GAAGnE,CAAC,CAACyf,QADX;EAAA,UAGI+F,GAAG,GAAGrhB,EAAE,CAAC,CAAD,CAHZ;EAAA,UAGiByhB,GAAG,GAAGzhB,EAAE,CAAC,CAAD,CAHzB;EAAA,UAG8B6hB,GAAG,GAAG7hB,EAAE,CAAC,CAAD,CAHtC;EAAA,UAG2CiiB,GAAG,GAAGjiB,EAAE,CAAC,CAAD,CAHnD;EAAA,UAIIshB,GAAG,GAAGthB,EAAE,CAAC,CAAD,CAJZ;EAAA,UAIiB0hB,GAAG,GAAG1hB,EAAE,CAAC,CAAD,CAJzB;EAAA,UAI8B8hB,GAAG,GAAG9hB,EAAE,CAAC,CAAD,CAJtC;EAAA,UAI2CkiB,GAAG,GAAGliB,EAAE,CAAC,CAAD,CAJnD;EAAA,UAKIuhB,GAAG,GAAGvhB,EAAE,CAAC,CAAD,CALZ;EAAA,UAKiB2hB,GAAG,GAAG3hB,EAAE,CAAC,CAAD,CALzB;EAAA,UAK8B+hB,GAAG,GAAG/hB,EAAE,CAAC,EAAD,CALtC;EAAA,UAK4CmiB,GAAG,GAAGniB,EAAE,CAAC,EAAD,CALpD;EAAA,UAMIwhB,GAAG,GAAGxhB,EAAE,CAAC,EAAD,CANZ;EAAA,UAMkB4hB,GAAG,GAAG5hB,EAAE,CAAC,EAAD,CAN1B;EAAA,UAMgCgiB,GAAG,GAAGhiB,EAAE,CAAC,EAAD,CANxC;EAAA,UAM8CoiB,GAAG,GAAGpiB,EAAE,CAAC,EAAD,CANtD;EAAA,UAQIinB,GAAG,GAAGtF,GAAG,GAAGK,GAAN,GAAYE,GAAZ,GAAkBN,GAAG,GAAGG,GAAN,GAAYG,GAA9B,GAAoCN,GAAG,GAAGE,GAAN,GAAYK,GAAhD,GAAsDT,GAAG,GAAGM,GAAN,GAAYG,GAAlE,GAAwER,GAAG,GAAGG,GAAN,GAAYM,GAApF,GAA0FV,GAAG,GAAGK,GAAN,GAAYK,GARhH;EAAA,UASI8E,GAAG,GAAG1F,GAAG,GAAGO,GAAN,GAAYG,GAAZ,GAAkBX,GAAG,GAAGS,GAAN,GAAYE,GAA9B,GAAoCV,GAAG,GAAGM,GAAN,GAAYK,GAAhD,GAAsDb,GAAG,GAAGU,GAAN,GAAYG,GAAlE,GAAwEZ,GAAG,GAAGO,GAAN,GAAYM,GAApF,GAA0Fd,GAAG,GAAGS,GAAN,GAAYK,GAThH;EAAA,UAUI+E,GAAG,GAAG5F,GAAG,GAAGK,GAAN,GAAYM,GAAZ,GAAkBV,GAAG,GAAGG,GAAN,GAAYO,GAA9B,GAAoCV,GAAG,GAAGE,GAAN,GAAYS,GAAhD,GAAsDb,GAAG,GAAGM,GAAN,GAAYO,GAAlE,GAAwEZ,GAAG,GAAGG,GAAN,GAAYU,GAApF,GAA0Fd,GAAG,GAAGK,GAAN,GAAYS,GAVhH;EAAA,UAWIgF,GAAG,GAAG5F,GAAG,GAAGG,GAAN,GAAYG,GAAZ,GAAkBP,GAAG,GAAGK,GAAN,GAAYE,GAA9B,GAAoCN,GAAG,GAAGE,GAAN,GAAYK,GAAhD,GAAsDT,GAAG,GAAGM,GAAN,GAAYG,GAAlE,GAAwER,GAAG,GAAGG,GAAN,GAAYM,GAApF,GAA0FV,GAAG,GAAGK,GAAN,GAAYK,GAXhH;EAaA,UAAIqF,GAAG,GAAGhG,GAAG,GAAG4F,GAAN,GAAYxF,GAAG,GAAGyF,GAAlB,GAAwBrF,GAAG,GAAGsF,GAA9B,GAAoClF,GAAG,GAAGmF,GAApD;;EAEA,UAAIC,GAAG,KAAK,CAAZ,EAAe;EAEX,YAAIC,GAAG,GAAG,8DAAV;;EAEA,YAAIN,iBAAiB,KAAK,IAA1B,EAAgC;EAE5B,gBAAM,IAAI5K,KAAJ,CAAUkL,GAAV,CAAN;EAEH,SAJD,MAIO;EAEHjL,UAAAA,OAAO,CAACC,IAAR,CAAagL,GAAb;EAEH;;EAED,eAAO,KAAK/vB,QAAL,EAAP;EAEH;;EAED,UAAIgwB,MAAM,GAAG,IAAIF,GAAjB;EAEAhF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ4E,GAAG,GAAGM,MAAd;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACT,GAAG,GAAGG,GAAN,GAAYE,GAAZ,GAAkBN,GAAG,GAAGK,GAAN,GAAYC,GAA9B,GAAoCL,GAAG,GAAGC,GAAN,GAAYM,GAAhD,GAAsDV,GAAG,GAAGO,GAAN,GAAYG,GAAlE,GAAwER,GAAG,GAAGE,GAAN,GAAYO,GAApF,GAA0FX,GAAG,GAAGM,GAAN,GAAYK,GAAvG,IAA8GmF,MAAtH;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACX,GAAG,GAAGM,GAAN,GAAYC,GAAZ,GAAkBL,GAAG,GAAGE,GAAN,GAAYG,GAA9B,GAAoCL,GAAG,GAAGC,GAAN,GAAYK,GAAhD,GAAsDT,GAAG,GAAGO,GAAN,GAAYE,GAAlE,GAAwER,GAAG,GAAGG,GAAN,GAAYO,GAApF,GAA0FX,GAAG,GAAGK,GAAN,GAAYM,GAAvG,IAA8GmF,MAAtH;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACV,GAAG,GAAGG,GAAN,GAAYG,GAAZ,GAAkBP,GAAG,GAAGK,GAAN,GAAYE,GAA9B,GAAoCN,GAAG,GAAGE,GAAN,GAAYK,GAAhD,GAAsDT,GAAG,GAAGM,GAAN,GAAYG,GAAlE,GAAwER,GAAG,GAAGG,GAAN,GAAYM,GAApF,GAA0FV,GAAG,GAAGK,GAAN,GAAYK,GAAvG,IAA8GoF,MAAtH;EAEAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ6E,GAAG,GAAGK,MAAd;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACd,GAAG,GAAGS,GAAN,GAAYC,GAAZ,GAAkBT,GAAG,GAAGO,GAAN,GAAYE,GAA9B,GAAoCT,GAAG,GAAGK,GAAN,GAAYM,GAAhD,GAAsDd,GAAG,GAAGW,GAAN,GAAYG,GAAlE,GAAwEZ,GAAG,GAAGM,GAAN,GAAYO,GAApF,GAA0Ff,GAAG,GAAGU,GAAN,GAAYK,GAAvG,IAA8GmF,MAAtH;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACb,GAAG,GAAGM,GAAN,GAAYG,GAAZ,GAAkBX,GAAG,GAAGU,GAAN,GAAYC,GAA9B,GAAoCT,GAAG,GAAGK,GAAN,GAAYK,GAAhD,GAAsDb,GAAG,GAAGW,GAAN,GAAYE,GAAlE,GAAwEZ,GAAG,GAAGO,GAAN,GAAYO,GAApF,GAA0Ff,GAAG,GAAGS,GAAN,GAAYM,GAAvG,IAA8GmF,MAAtH;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACf,GAAG,GAAGS,GAAN,GAAYE,GAAZ,GAAkBV,GAAG,GAAGO,GAAN,GAAYG,GAA9B,GAAoCV,GAAG,GAAGM,GAAN,GAAYK,GAAhD,GAAsDb,GAAG,GAAGU,GAAN,GAAYG,GAAlE,GAAwEZ,GAAG,GAAGO,GAAN,GAAYM,GAApF,GAA0Fd,GAAG,GAAGS,GAAN,GAAYK,GAAvG,IAA8GoF,MAAtH;EAEAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ8E,GAAG,GAAGI,MAAd;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACb,GAAG,GAAGG,GAAN,GAAYM,GAAZ,GAAkBV,GAAG,GAAGK,GAAN,GAAYK,GAA9B,GAAoCT,GAAG,GAAGC,GAAN,GAAYU,GAAhD,GAAsDd,GAAG,GAAGO,GAAN,GAAYO,GAAlE,GAAwEZ,GAAG,GAAGE,GAAN,GAAYW,GAApF,GAA0Ff,GAAG,GAAGM,GAAN,GAAYS,GAAvG,IAA8GmF,MAAtH;EACAlF,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAACf,GAAG,GAAGM,GAAN,GAAYK,GAAZ,GAAkBT,GAAG,GAAGE,GAAN,GAAYO,GAA9B,GAAoCT,GAAG,GAAGC,GAAN,GAAYS,GAAhD,GAAsDb,GAAG,GAAGO,GAAN,GAAYM,GAAlE,GAAwEZ,GAAG,GAAGG,GAAN,GAAYW,GAApF,GAA0Ff,GAAG,GAAGK,GAAN,GAAYU,GAAvG,IAA8GmF,MAAvH;EACAlF,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAACd,GAAG,GAAGG,GAAN,GAAYO,GAAZ,GAAkBX,GAAG,GAAGK,GAAN,GAAYM,GAA9B,GAAoCV,GAAG,GAAGE,GAAN,GAAYS,GAAhD,GAAsDb,GAAG,GAAGM,GAAN,GAAYO,GAAlE,GAAwEZ,GAAG,GAAGG,GAAN,GAAYU,GAApF,GAA0Fd,GAAG,GAAGK,GAAN,GAAYS,GAAvG,IAA8GoF,MAAvH;EAEAlF,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS+E,GAAG,GAAGG,MAAf;EACAlF,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAACd,GAAG,GAAGK,GAAN,GAAYC,GAAZ,GAAkBL,GAAG,GAAGG,GAAN,GAAYE,GAA9B,GAAoCL,GAAG,GAAGC,GAAN,GAAYM,GAAhD,GAAsDV,GAAG,GAAGO,GAAN,GAAYG,GAAlE,GAAwER,GAAG,GAAGE,GAAN,GAAYO,GAApF,GAA0FX,GAAG,GAAGM,GAAN,GAAYK,GAAvG,IAA8GuF,MAAvH;EACAlF,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAACb,GAAG,GAAGE,GAAN,GAAYG,GAAZ,GAAkBP,GAAG,GAAGM,GAAN,GAAYC,GAA9B,GAAoCL,GAAG,GAAGC,GAAN,GAAYK,GAAhD,GAAsDT,GAAG,GAAGO,GAAN,GAAYE,GAAlE,GAAwER,GAAG,GAAGG,GAAN,GAAYO,GAApF,GAA0FX,GAAG,GAAGK,GAAN,GAAYM,GAAvG,IAA8GuF,MAAvH;EACAlF,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAACf,GAAG,GAAGK,GAAN,GAAYE,GAAZ,GAAkBN,GAAG,GAAGG,GAAN,GAAYG,GAA9B,GAAoCN,GAAG,GAAGE,GAAN,GAAYK,GAAhD,GAAsDT,GAAG,GAAGM,GAAN,GAAYG,GAAlE,GAAwER,GAAG,GAAGG,GAAN,GAAYM,GAApF,GAA0FV,GAAG,GAAGK,GAAN,GAAYK,GAAvG,IAA8GwF,MAAvH;EAEA,aAAO,IAAP;EAEH;;;4BAEKlM,GAAG;EAEL,UAAIgH,EAAE,GAAG,KAAK/G,QAAd;EACA,UAAIzJ,CAAC,GAAGwJ,CAAC,CAACxJ,CAAV;EAAA,UAAaC,CAAC,GAAGuJ,CAAC,CAACvJ,CAAnB;EAAA,UAAsBmJ,CAAC,GAAGI,CAAC,CAACJ,CAA5B;EAEAoH,MAAAA,EAAE,CAAC,CAAD,CAAF,IAASxQ,CAAT;EAAYwQ,MAAAA,EAAE,CAAC,CAAD,CAAF,IAASvQ,CAAT;EAAYuQ,MAAAA,EAAE,CAAC,CAAD,CAAF,IAASpH,CAAT;EACxBoH,MAAAA,EAAE,CAAC,CAAD,CAAF,IAASxQ,CAAT;EAAYwQ,MAAAA,EAAE,CAAC,CAAD,CAAF,IAASvQ,CAAT;EAAYuQ,MAAAA,EAAE,CAAC,CAAD,CAAF,IAASpH,CAAT;EACxBoH,MAAAA,EAAE,CAAC,CAAD,CAAF,IAASxQ,CAAT;EAAYwQ,MAAAA,EAAE,CAAC,CAAD,CAAF,IAASvQ,CAAT;EAAYuQ,MAAAA,EAAE,CAAC,EAAD,CAAF,IAAUpH,CAAV;EACxBoH,MAAAA,EAAE,CAAC,CAAD,CAAF,IAASxQ,CAAT;EAAYwQ,MAAAA,EAAE,CAAC,CAAD,CAAF,IAASvQ,CAAT;EAAYuQ,MAAAA,EAAE,CAAC,EAAD,CAAF,IAAUpH,CAAV;EAExB,aAAO,IAAP;EAEH;;;0CAEmB;EAEhB,UAAIoH,EAAE,GAAG,KAAK/G,QAAd;EAEA,UAAIkM,QAAQ,GAAGnF,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAV,GAAgBA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAA1B,GAAgCA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAzD;EACA,UAAIoF,QAAQ,GAAGpF,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAV,GAAgBA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAA1B,GAAgCA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAzD;EACA,UAAIqF,QAAQ,GAAGrF,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAV,GAAgBA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAA1B,GAAgCA,EAAE,CAAC,EAAD,CAAF,GAASA,EAAE,CAAC,EAAD,CAA1D;EAEA,aAAO9rB,IAAI,CAACklB,IAAL,CAAUllB,IAAI,CAACsC,GAAL,CAAS2uB,QAAT,EAAmBC,QAAnB,EAA6BC,QAA7B,CAAV,CAAP;EAEH;;;sCAEe7V,GAAGC,GAAGmJ,GAAG;EAErB,WAAKlQ,GAAL,CAEI,CAFJ,EAEO,CAFP,EAEU,CAFV,EAEa8G,CAFb,EAGI,CAHJ,EAGO,CAHP,EAGU,CAHV,EAGaC,CAHb,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV,EAIamJ,CAJb,EAKI,CALJ,EAKO,CALP,EAKU,CALV,EAKa,CALb;EASA,aAAO,IAAP;EAEH;;;oCAEa0D,OAAO;EAEjB,UAAIjS,CAAC,GAAGnW,IAAI,CAAC8X,GAAL,CAASsQ,KAAT,CAAR;EAAA,UAAyBnC,CAAC,GAAGjmB,IAAI,CAACgY,GAAL,CAASoQ,KAAT,CAA7B;EAEA,WAAK5T,GAAL,CAEI,CAFJ,EAEO,CAFP,EAEU,CAFV,EAEa,CAFb,EAGI,CAHJ,EAGO2B,CAHP,EAGU,CAAE8P,CAHZ,EAGe,CAHf,EAII,CAJJ,EAIOA,CAJP,EAIU9P,CAJV,EAIa,CAJb,EAKI,CALJ,EAKO,CALP,EAKU,CALV,EAKa,CALb;EASA,aAAO,IAAP;EAEH;;;oCAEaiS,OAAO;EAEjB,UAAIjS,CAAC,GAAGnW,IAAI,CAAC8X,GAAL,CAASsQ,KAAT,CAAR;EAAA,UAAyBnC,CAAC,GAAGjmB,IAAI,CAACgY,GAAL,CAASoQ,KAAT,CAA7B;EAEA,WAAK5T,GAAL,CAEI2B,CAFJ,EAEO,CAFP,EAEU8P,CAFV,EAEa,CAFb,EAGI,CAHJ,EAGO,CAHP,EAGU,CAHV,EAGa,CAHb,EAII,CAAEA,CAJN,EAIS,CAJT,EAIY9P,CAJZ,EAIe,CAJf,EAKI,CALJ,EAKO,CALP,EAKU,CALV,EAKa,CALb;EASA,aAAO,IAAP;EAEH;;;oCAEaiS,OAAO;EAEjB,UAAIjS,CAAC,GAAGnW,IAAI,CAAC8X,GAAL,CAASsQ,KAAT,CAAR;EAAA,UAAyBnC,CAAC,GAAGjmB,IAAI,CAACgY,GAAL,CAASoQ,KAAT,CAA7B;EAEA,WAAK5T,GAAL,CAEI2B,CAFJ,EAEO,CAAE8P,CAFT,EAEY,CAFZ,EAEe,CAFf,EAGIA,CAHJ,EAGO9P,CAHP,EAGU,CAHV,EAGa,CAHb,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV,EAIa,CAJb,EAKI,CALJ,EAKO,CALP,EAKU,CALV,EAKa,CALb;EASA,aAAO,IAAP;EAEH;;;uCAEgBxN,MAAM8P,OAAO;EAE1B;EAEA,UAAItC,CAAC,GAAGnW,IAAI,CAAC8X,GAAL,CAASW,KAAT,CAAR;EACA,UAAIwN,CAAC,GAAGjmB,IAAI,CAACgY,GAAL,CAASS,KAAT,CAAR;EACA,UAAIyE,CAAC,GAAG,IAAI/G,CAAZ;EACA,UAAImF,CAAC,GAAG3S,IAAI,CAAC2S,CAAb;EAAA,UAAgBC,CAAC,GAAG5S,IAAI,CAAC4S,CAAzB;EAAA,UAA4BmJ,CAAC,GAAG/b,IAAI,CAAC+b,CAArC;EACA,UAAI0M,EAAE,GAAGlU,CAAC,GAAG5B,CAAb;EAAA,UAAgB+V,EAAE,GAAGnU,CAAC,GAAG3B,CAAzB;EAEA,WAAK/G,GAAL,CAEI4c,EAAE,GAAG9V,CAAL,GAASnF,CAFb,EAEgBib,EAAE,GAAG7V,CAAL,GAAS0K,CAAC,GAAGvB,CAF7B,EAEgC0M,EAAE,GAAG1M,CAAL,GAASuB,CAAC,GAAG1K,CAF7C,EAEgD,CAFhD,EAGI6V,EAAE,GAAG7V,CAAL,GAAS0K,CAAC,GAAGvB,CAHjB,EAGoB2M,EAAE,GAAG9V,CAAL,GAASpF,CAH7B,EAGgCkb,EAAE,GAAG3M,CAAL,GAASuB,CAAC,GAAG3K,CAH7C,EAGgD,CAHhD,EAII8V,EAAE,GAAG1M,CAAL,GAASuB,CAAC,GAAG1K,CAJjB,EAIoB8V,EAAE,GAAG3M,CAAL,GAASuB,CAAC,GAAG3K,CAJjC,EAIoC4B,CAAC,GAAGwH,CAAJ,GAAQA,CAAR,GAAYvO,CAJhD,EAImD,CAJnD,EAKI,CALJ,EAKO,CALP,EAKU,CALV,EAKa,CALb;EASA,aAAO,IAAP;EAEH;;;gCAESmF,GAAGC,GAAGmJ,GAAG;EAEf,WAAKlQ,GAAL,CAEI8G,CAFJ,EAEO,CAFP,EAEU,CAFV,EAEa,CAFb,EAGI,CAHJ,EAGOC,CAHP,EAGU,CAHV,EAGa,CAHb,EAII,CAJJ,EAIO,CAJP,EAIUmJ,CAJV,EAIa,CAJb,EAKI,CALJ,EAKO,CALP,EAKU,CALV,EAKa,CALb;EASA,aAAO,IAAP;EAEH;;;gCAESpJ,GAAGC,GAAGmJ,GAAG;EAEf,WAAKlQ,GAAL,CAEI,CAFJ,EAEO+G,CAFP,EAEUmJ,CAFV,EAEa,CAFb,EAGIpJ,CAHJ,EAGO,CAHP,EAGUoJ,CAHV,EAGa,CAHb,EAIIpJ,CAJJ,EAIOC,CAJP,EAIU,CAJV,EAIa,CAJb,EAKI,CALJ,EAKO,CALP,EAKU,CALV,EAKa,CALb;EASA,aAAO,IAAP;EAEH;;;8BAEO5H,UAAU2d,YAAY5qB,OAAO;EAEjC,WAAK6qB,0BAAL,CAAgCD,UAAhC;EACA,WAAK5qB,KAAL,CAAWA,KAAX;EACA,WAAK8qB,WAAL,CAAiB7d,QAAjB;EAEA,aAAO,IAAP;EAEH;;;gCAESA,UAAU2d,YAAY5qB,OAAO;EACnC,UAAI+qB,UAAU,GAAGC,WAAS,CAAC/xB,IAAV,CAAe,IAAf,CAAjB;;EACA,aAAO8xB,UAAU,CAAC9d,QAAD,EAAW2d,UAAX,EAAuB5qB,KAAvB,CAAjB;EACH;;;sCAIe6L,MAAMD,OAAOG,KAAKkf,QAAQC,MAAMC,KAAK;EAEjD,UAAIA,GAAG,KAAK1sB,SAAZ,EAAuB;EAEnB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,gGAAb;EAEH;;EAED,UAAI+F,EAAE,GAAG,KAAK/G,QAAd;EACA,UAAIzJ,CAAC,GAAG,IAAIsW,IAAJ,IAAYtf,KAAK,GAAGC,IAApB,CAAR;EACA,UAAIgJ,CAAC,GAAG,IAAIqW,IAAJ,IAAYnf,GAAG,GAAGkf,MAAlB,CAAR;EAEA,UAAIhiB,CAAC,GAAG,CAAC2C,KAAK,GAAGC,IAAT,KAAkBD,KAAK,GAAGC,IAA1B,CAAR;EACA,UAAIzC,CAAC,GAAG,CAAC2C,GAAG,GAAGkf,MAAP,KAAkBlf,GAAG,GAAGkf,MAAxB,CAAR;EACA,UAAIxb,CAAC,GAAG,EAAG0b,GAAG,GAAGD,IAAT,KAAkBC,GAAG,GAAGD,IAAxB,CAAR;EACA,UAAIxmB,CAAC,GAAG,CAAE,CAAF,GAAMymB,GAAN,GAAYD,IAAZ,IAAoBC,GAAG,GAAGD,IAA1B,CAAR;EAEA9F,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQxQ,CAAR;EAAWwQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQnc,CAAR;EAAWmc,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EACjCA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQvQ,CAAR;EAAWuQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQhc,CAAR;EAAWgc,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EACjCA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS3V,CAAT;EAAY2V,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS1gB,CAAT;EAClC0gB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAE,CAAX;EAAcA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EAEpC,aAAO,IAAP;EAEH;;;uCAEgBvZ,MAAMD,OAAOG,KAAKkf,QAAQC,MAAMC,KAAK;EAElD,UAAI/F,EAAE,GAAG,KAAK/G,QAAd;EACA,UAAIJ,CAAC,GAAG,OAAOrS,KAAK,GAAGC,IAAf,CAAR;EACA,UAAI7E,CAAC,GAAG,OAAO+E,GAAG,GAAGkf,MAAb,CAAR;EACA,UAAInpB,CAAC,GAAG,OAAOqpB,GAAG,GAAGD,IAAb,CAAR;EAEA,UAAItW,CAAC,GAAG,CAAChJ,KAAK,GAAGC,IAAT,IAAiBoS,CAAzB;EACA,UAAIpJ,CAAC,GAAG,CAAC9I,GAAG,GAAGkf,MAAP,IAAiBjkB,CAAzB;EACA,UAAIgX,CAAC,GAAG,CAACmN,GAAG,GAAGD,IAAP,IAAeppB,CAAvB;EAEAsjB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,IAAInH,CAAZ;EAAemH,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAExQ,CAAX;EACrCwQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,IAAIpe,CAAZ;EAAeoe,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAEvQ,CAAX;EACrCuQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAE,CAAF,GAAMtjB,CAAf;EAAkBsjB,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAEpH,CAAX;EACxCoH,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR;EAAWA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EAAYA,MAAAA,EAAE,CAAC,EAAD,CAAF,GAAS,CAAT;EAElC,aAAO,IAAP;EAEH;;;6BAEMhF,QAAQ;EAEX,UAAIgF,EAAE,GAAG,KAAK/G,QAAd;EACA,UAAItb,EAAE,GAAGqd,MAAM,CAAC/B,QAAhB;;EAEA,WAAK,IAAIxkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;EAEzB,YAAIurB,EAAE,CAACvrB,CAAD,CAAF,KAAUkJ,EAAE,CAAClJ,CAAD,CAAhB,EAAqB,OAAO,KAAP;EAExB;;EAED,aAAO,IAAP;EAEH;;;gCAESQ,OAAO2Q,QAAQ;EAErB,UAAIA,MAAM,KAAKvM,SAAf,EAA0BuM,MAAM,GAAG,CAAT;;EAE1B,WAAK,IAAInR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;EAEzB,aAAKwkB,QAAL,CAAcxkB,CAAd,IAAmBQ,KAAK,CAACR,CAAC,GAAGmR,MAAL,CAAxB;EAEH;;EAED,aAAO,IAAP;EAEH;;;8BAEO3Q,OAAO2Q,QAAQ;EAEnB,UAAI3Q,KAAK,KAAKoE,SAAd,EAAyBpE,KAAK,GAAG,EAAR;EACzB,UAAI2Q,MAAM,KAAKvM,SAAf,EAA0BuM,MAAM,GAAG,CAAT;EAE1B,UAAIoa,EAAE,GAAG,KAAK/G,QAAd;EAEAhkB,MAAAA,KAAK,CAAC2Q,MAAD,CAAL,GAAgBoa,EAAE,CAAC,CAAD,CAAlB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EAEA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EAEA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,EAAV,CAAL,GAAqBoa,EAAE,CAAC,EAAD,CAAvB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,EAAV,CAAL,GAAqBoa,EAAE,CAAC,EAAD,CAAvB;EAEA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,EAAV,CAAL,GAAqBoa,EAAE,CAAC,EAAD,CAAvB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,EAAV,CAAL,GAAqBoa,EAAE,CAAC,EAAD,CAAvB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,EAAV,CAAL,GAAqBoa,EAAE,CAAC,EAAD,CAAvB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,EAAV,CAAL,GAAqBoa,EAAE,CAAC,EAAD,CAAvB;EAEA,aAAO/qB,KAAP;EAEH;;;;;;EAGL,IAAI2wB,WAAS,GAAI,YAAY;EAEzB,MAAIzJ,MAAM,GAAG,IAAItC,OAAJ,EAAb;EACA,MAAImB,MAAM,GAAG,IAAI6D,OAAJ,EAAb;EAEA,SAAO,SAAS+G,SAAT,CAAmB/d,QAAnB,EAA6B2d,UAA7B,EAAyC5qB,KAAzC,EAAgD;EAEnD,QAAIolB,EAAE,GAAG,KAAK/G,QAAd;EAEA,QAAI6D,EAAE,GAAGX,MAAM,CAACzT,GAAP,CAAWsX,EAAE,CAAC,CAAD,CAAb,EAAkBA,EAAE,CAAC,CAAD,CAApB,EAAyBA,EAAE,CAAC,CAAD,CAA3B,EAAgCzrB,MAAhC,EAAT;EACA,QAAIyoB,EAAE,GAAGb,MAAM,CAACzT,GAAP,CAAWsX,EAAE,CAAC,CAAD,CAAb,EAAkBA,EAAE,CAAC,CAAD,CAApB,EAAyBA,EAAE,CAAC,CAAD,CAA3B,EAAgCzrB,MAAhC,EAAT;EACA,QAAI0oB,EAAE,GAAGd,MAAM,CAACzT,GAAP,CAAWsX,EAAE,CAAC,CAAD,CAAb,EAAkBA,EAAE,CAAC,CAAD,CAApB,EAAyBA,EAAE,CAAC,EAAD,CAA3B,EAAiCzrB,MAAjC,EAAT,CANmD;;EASnD,QAAIywB,GAAG,GAAG,KAAKgB,WAAL,EAAV;EACA,QAAIhB,GAAG,GAAG,CAAV,EAAalI,EAAE,GAAG,CAAEA,EAAP;EAEbjV,IAAAA,QAAQ,CAAC2H,CAAT,GAAawQ,EAAE,CAAC,EAAD,CAAf;EACAnY,IAAAA,QAAQ,CAAC4H,CAAT,GAAauQ,EAAE,CAAC,EAAD,CAAf;EACAnY,IAAAA,QAAQ,CAAC+Q,CAAT,GAAaoH,EAAE,CAAC,EAAD,CAAf,CAdmD;;EAiBnDhF,IAAAA,MAAM,CAAC7hB,IAAP,CAAY,IAAZ;EAEA,QAAI8sB,KAAK,GAAG,IAAInJ,EAAhB;EACA,QAAIoJ,KAAK,GAAG,IAAIlJ,EAAhB;EACA,QAAImJ,KAAK,GAAG,IAAIlJ,EAAhB;EAEAjC,IAAAA,MAAM,CAAC/B,QAAP,CAAgB,CAAhB,KAAsBgN,KAAtB;EACAjL,IAAAA,MAAM,CAAC/B,QAAP,CAAgB,CAAhB,KAAsBgN,KAAtB;EACAjL,IAAAA,MAAM,CAAC/B,QAAP,CAAgB,CAAhB,KAAsBgN,KAAtB;EAEAjL,IAAAA,MAAM,CAAC/B,QAAP,CAAgB,CAAhB,KAAsBiN,KAAtB;EACAlL,IAAAA,MAAM,CAAC/B,QAAP,CAAgB,CAAhB,KAAsBiN,KAAtB;EACAlL,IAAAA,MAAM,CAAC/B,QAAP,CAAgB,CAAhB,KAAsBiN,KAAtB;EAEAlL,IAAAA,MAAM,CAAC/B,QAAP,CAAgB,CAAhB,KAAsBkN,KAAtB;EACAnL,IAAAA,MAAM,CAAC/B,QAAP,CAAgB,CAAhB,KAAsBkN,KAAtB;EACAnL,IAAAA,MAAM,CAAC/B,QAAP,CAAgB,EAAhB,KAAuBkN,KAAvB;EAEAX,IAAAA,UAAU,CAACY,qBAAX,CAAiCpL,MAAjC;EAEApgB,IAAAA,KAAK,CAAC4U,CAAN,GAAUsN,EAAV;EACAliB,IAAAA,KAAK,CAAC6U,CAAN,GAAUuN,EAAV;EACApiB,IAAAA,KAAK,CAACge,CAAN,GAAUqE,EAAV;EAEA,WAAO,IAAP;EAEH,GA3CD;EA6CH,CAlDe,EAAhB;;MCp1BMoJ;;;EACF,gBAAYlvB,GAAZ,EAAiBX,GAAjB,EAAsB;EAAA;;EAElB,SAAKW,GAAL,GAAYA,GAAG,KAAKkC,SAAT,GAAsBlC,GAAtB,GAA4B,IAAI0iB,OAAJ,CAAY,CAAEziB,QAAd,EAAwB,CAAEA,QAA1B,EAAoC,CAAEA,QAAtC,CAAvC;EACA,SAAKZ,GAAL,GAAYA,GAAG,KAAK6C,SAAT,GAAsB7C,GAAtB,GAA4B,IAAIqjB,OAAJ,CAAY,CAAEziB,QAAd,EAAwB,CAAEA,QAA1B,EAAoC,CAAEA,QAAtC,CAAvC;EACA,SAAKkvB,MAAL,GAAc,IAAd;EACH;;;;0BACGnvB,KAAKX,KAAK;EAEV,WAAKW,GAAL,CAASgC,IAAT,CAAchC,GAAd;EACA,WAAKX,GAAL,CAAS2C,IAAT,CAAc3C,GAAd;EAEA,aAAO,IAAP;EAEH;;;mCAEYvB,OAAO;EAEhB,UAAIsxB,IAAI,GAAG,CAAEnvB,QAAb;EACA,UAAIovB,IAAI,GAAG,CAAEpvB,QAAb;EACA,UAAIqvB,IAAI,GAAG,CAAErvB,QAAb;EAEA,UAAIsvB,IAAI,GAAG,CAAEtvB,QAAb;EACA,UAAIuvB,IAAI,GAAG,CAAEvvB,QAAb;EACA,UAAIwvB,IAAI,GAAG,CAAExvB,QAAb;;EAEA,WAAK,IAAI3C,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGxL,KAAK,CAACV,MAA1B,EAAkCE,CAAC,GAAGgM,CAAtC,EAAyChM,CAAC,IAAI,CAA9C,EAAiD;EAE7C,YAAI+a,CAAC,GAAGva,KAAK,CAACR,CAAD,CAAb;EACA,YAAIgb,CAAC,GAAGxa,KAAK,CAACR,CAAC,GAAG,CAAL,CAAb;EACA,YAAImkB,CAAC,GAAG3jB,KAAK,CAACR,CAAC,GAAG,CAAL,CAAb;EAEA,YAAI+a,CAAC,GAAG+W,IAAR,EAAcA,IAAI,GAAG/W,CAAP;EACd,YAAIC,CAAC,GAAG+W,IAAR,EAAcA,IAAI,GAAG/W,CAAP;EACd,YAAImJ,CAAC,GAAG6N,IAAR,EAAcA,IAAI,GAAG7N,CAAP;EAEd,YAAIpJ,CAAC,GAAGkX,IAAR,EAAcA,IAAI,GAAGlX,CAAP;EACd,YAAIC,CAAC,GAAGkX,IAAR,EAAcA,IAAI,GAAGlX,CAAP;EACd,YAAImJ,CAAC,GAAGgO,IAAR,EAAcA,IAAI,GAAGhO,CAAP;EAEjB;;EAED,WAAKzhB,GAAL,CAASuR,GAAT,CAAa6d,IAAb,EAAmBC,IAAnB,EAAyBC,IAAzB;EACA,WAAKjwB,GAAL,CAASkS,GAAT,CAAage,IAAb,EAAmBC,IAAnB,EAAyBC,IAAzB;EAEA,aAAO,IAAP;EAEH;;;6CAEsBzJ,WAAW;EAE9B,UAAIoJ,IAAI,GAAG,CAAEnvB,QAAb;EACA,UAAIovB,IAAI,GAAG,CAAEpvB,QAAb;EACA,UAAIqvB,IAAI,GAAG,CAAErvB,QAAb;EAEA,UAAIsvB,IAAI,GAAG,CAAEtvB,QAAb;EACA,UAAIuvB,IAAI,GAAG,CAAEvvB,QAAb;EACA,UAAIwvB,IAAI,GAAG,CAAExvB,QAAb;;EAEA,WAAK,IAAI3C,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG0c,SAAS,CAACqH,KAA9B,EAAqC/vB,CAAC,GAAGgM,CAAzC,EAA4ChM,CAAC,EAA7C,EAAiD;EAE7C,YAAI+a,CAAC,GAAG2N,SAAS,CAACC,IAAV,CAAe3oB,CAAf,CAAR;EACA,YAAIgb,CAAC,GAAG0N,SAAS,CAACE,IAAV,CAAe5oB,CAAf,CAAR;EACA,YAAImkB,CAAC,GAAGuE,SAAS,CAACG,IAAV,CAAe7oB,CAAf,CAAR;EAEA,YAAI+a,CAAC,GAAG+W,IAAR,EAAcA,IAAI,GAAG/W,CAAP;EACd,YAAIC,CAAC,GAAG+W,IAAR,EAAcA,IAAI,GAAG/W,CAAP;EACd,YAAImJ,CAAC,GAAG6N,IAAR,EAAcA,IAAI,GAAG7N,CAAP;EAEd,YAAIpJ,CAAC,GAAGkX,IAAR,EAAcA,IAAI,GAAGlX,CAAP;EACd,YAAIC,CAAC,GAAGkX,IAAR,EAAcA,IAAI,GAAGlX,CAAP;EACd,YAAImJ,CAAC,GAAGgO,IAAR,EAAcA,IAAI,GAAGhO,CAAP;EAEjB;;EAED,WAAKzhB,GAAL,CAASuR,GAAT,CAAa6d,IAAb,EAAmBC,IAAnB,EAAyBC,IAAzB;EACA,WAAKjwB,GAAL,CAASkS,GAAT,CAAage,IAAb,EAAmBC,IAAnB,EAAyBC,IAAzB;EAEA,aAAO,IAAP;EAEH;;;oCAEa3X,QAAQ;EAElB,WAAK4X,SAAL;;EAEA,WAAK,IAAIpyB,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAG4P,MAAM,CAAC1a,MAA5B,EAAoCE,CAAC,GAAG4K,EAAxC,EAA4C5K,CAAC,EAA7C,EAAiD;EAE7C,aAAKqyB,aAAL,CAAmB7X,MAAM,CAACxa,CAAD,CAAzB;EAEH;;EAED,aAAO,IAAP;EAEH;;;2CAEoBsyB,QAAQ5I,MAAM;EAE/B,aAAO6I,qBAAoB,CAACD,MAAD,EAAS5I,IAAT,CAA3B;EAEH;;;oCAEa8I,QAAQ;EAElB,WAAKJ,SAAL;EAEA,aAAO,KAAKK,cAAL,CAAoBD,MAApB,CAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAK3tB,WAAT,GAAuBH,IAAvB,CAA4B,IAA5B,CAAP;EAEH;;;2BAEI0M,KAAK;EAEN,WAAK1O,GAAL,CAASgC,IAAT,CAAc0M,GAAG,CAAC1O,GAAlB;EACA,WAAKX,GAAL,CAAS2C,IAAT,CAAc0M,GAAG,CAACrP,GAAlB;EAEA,aAAO,IAAP;EAEH;;;kCAEW;EAER,WAAKW,GAAL,CAASqY,CAAT,GAAa,KAAKrY,GAAL,CAASsY,CAAT,GAAa,KAAKtY,GAAL,CAASyhB,CAAT,GAAa,CAAExhB,QAAzC;EACA,WAAKZ,GAAL,CAASgZ,CAAT,GAAa,KAAKhZ,GAAL,CAASiZ,CAAT,GAAa,KAAKjZ,GAAL,CAASoiB,CAAT,GAAa,CAAExhB,QAAzC;EAEA,aAAO,IAAP;EAEH;;;gCAES;EAEN;EAEA,aAAQ,KAAKZ,GAAL,CAASgZ,CAAT,GAAa,KAAKrY,GAAL,CAASqY,CAAvB,IAA8B,KAAKhZ,GAAL,CAASiZ,CAAT,GAAa,KAAKtY,GAAL,CAASsY,CAApD,IAA2D,KAAKjZ,GAAL,CAASoiB,CAAT,GAAa,KAAKzhB,GAAL,CAASyhB,CAAxF;EAEH;;;gCAESuO,gBAAgB;EAEtB,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EACA,aAAO,KAAK5jB,OAAL,KAAiBiB,MAAM,CAACwR,GAAP,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAjB,GAAuCxR,MAAM,CAACgjB,UAAP,CAAkB,KAAK/iB,GAAvB,EAA4B,KAAKX,GAAjC,EAAsC2iB,cAAtC,CAAqD,GAArD,CAA9C;EAEH;;;8BAEOgO,gBAAgB;EAEpB,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EACA,aAAO,KAAK5jB,OAAL,KAAiBiB,MAAM,CAACwR,GAAP,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAjB,GAAuCxR,MAAM,CAACkjB,UAAP,CAAkB,KAAK5jB,GAAvB,EAA4B,KAAKW,GAAjC,CAA9C;EAEH;;;oCAEaiY,OAAO;EAEjB,WAAKjY,GAAL,CAASA,GAAT,CAAaiY,KAAb;EACA,WAAK5Y,GAAL,CAASA,GAAT,CAAa4Y,KAAb;EAEA,aAAO,IAAP;EAEH;;;qCAEc+M,QAAQ;EAEnB,WAAKhlB,GAAL,CAASiwB,GAAT,CAAajL,MAAb;EACA,WAAK3lB,GAAL,CAASmlB,GAAT,CAAaQ,MAAb;EAEA,aAAO,IAAP;EAEH;;;qCAEcpD,QAAQ;EAEnB,WAAK5hB,GAAL,CAASkwB,SAAT,CAAmB,CAAEtO,MAArB;EACA,WAAKviB,GAAL,CAAS6wB,SAAT,CAAmBtO,MAAnB;EAEA,aAAO,IAAP;EAEH;;;qCAEckO,QAAQ;EACnB,aAAOC,eAAc,CAACtyB,IAAf,CAAoB,IAApB,EAA0BqyB,MAA1B,CAAP;EACH;;;oCAEa7X,OAAO;EAEjB,aAAOA,KAAK,CAACI,CAAN,GAAU,KAAKrY,GAAL,CAASqY,CAAnB,IAAwBJ,KAAK,CAACI,CAAN,GAAU,KAAKhZ,GAAL,CAASgZ,CAA3C,IACHJ,KAAK,CAACK,CAAN,GAAU,KAAKtY,GAAL,CAASsY,CADhB,IACqBL,KAAK,CAACK,CAAN,GAAU,KAAKjZ,GAAL,CAASiZ,CADxC,IAEHL,KAAK,CAACwJ,CAAN,GAAU,KAAKzhB,GAAL,CAASyhB,CAFhB,IAEqBxJ,KAAK,CAACwJ,CAAN,GAAU,KAAKpiB,GAAL,CAASoiB,CAFxC,GAE4C,KAF5C,GAEoD,IAF3D;EAIH;;;kCAEW/S,KAAK;EAEb,aAAO,KAAK1O,GAAL,CAASqY,CAAT,IAAc3J,GAAG,CAAC1O,GAAJ,CAAQqY,CAAtB,IAA2B3J,GAAG,CAACrP,GAAJ,CAAQgZ,CAAR,IAAa,KAAKhZ,GAAL,CAASgZ,CAAjD,IACH,KAAKrY,GAAL,CAASsY,CAAT,IAAc5J,GAAG,CAAC1O,GAAJ,CAAQsY,CADnB,IACwB5J,GAAG,CAACrP,GAAJ,CAAQiZ,CAAR,IAAa,KAAKjZ,GAAL,CAASiZ,CAD9C,IAEH,KAAKtY,GAAL,CAASyhB,CAAT,IAAc/S,GAAG,CAAC1O,GAAJ,CAAQyhB,CAFnB,IAEwB/S,GAAG,CAACrP,GAAJ,CAAQoiB,CAAR,IAAa,KAAKpiB,GAAL,CAASoiB,CAFrD;EAIH;;;mCAEYxJ,OAAO+X,gBAAgB;EAEhC;EACA;EAEA,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EAEA,aAAO3iB,MAAM,CAACwR,GAAP,CACH,CAAC0G,KAAK,CAACI,CAAN,GAAU,KAAKrY,GAAL,CAASqY,CAApB,KAA0B,KAAKhZ,GAAL,CAASgZ,CAAT,GAAa,KAAKrY,GAAL,CAASqY,CAAhD,CADG,EAEH,CAACJ,KAAK,CAACK,CAAN,GAAU,KAAKtY,GAAL,CAASsY,CAApB,KAA0B,KAAKjZ,GAAL,CAASiZ,CAAT,GAAa,KAAKtY,GAAL,CAASsY,CAAhD,CAFG,EAGH,CAACL,KAAK,CAACwJ,CAAN,GAAU,KAAKzhB,GAAL,CAASyhB,CAApB,KAA0B,KAAKpiB,GAAL,CAASoiB,CAAT,GAAa,KAAKzhB,GAAL,CAASyhB,CAAhD,CAHG,CAAP;EAMH;;;oCAEa/S,KAAK;EAEf;EACA,aAAOA,GAAG,CAACrP,GAAJ,CAAQgZ,CAAR,GAAY,KAAKrY,GAAL,CAASqY,CAArB,IAA0B3J,GAAG,CAAC1O,GAAJ,CAAQqY,CAAR,GAAY,KAAKhZ,GAAL,CAASgZ,CAA/C,IACH3J,GAAG,CAACrP,GAAJ,CAAQiZ,CAAR,GAAY,KAAKtY,GAAL,CAASsY,CADlB,IACuB5J,GAAG,CAAC1O,GAAJ,CAAQsY,CAAR,GAAY,KAAKjZ,GAAL,CAASiZ,CAD5C,IAEH5J,GAAG,CAACrP,GAAJ,CAAQoiB,CAAR,GAAY,KAAKzhB,GAAL,CAASyhB,CAFlB,IAEuB/S,GAAG,CAAC1O,GAAJ,CAAQyhB,CAAR,GAAY,KAAKpiB,GAAL,CAASoiB,CAF5C,GAEgD,KAFhD,GAEwD,IAF/D;EAIH;;;uCAEgB0O,QAAQ;EACrB,aAAOC,iBAAgB,CAACD,MAAD,CAAvB;EACH;;;sCAEeE,OAAO;EAEnB;EACA;EAEA,UAAIrwB,GAAJ,EAASX,GAAT;;EAEA,UAAIgxB,KAAK,CAACC,MAAN,CAAajY,CAAb,GAAiB,CAArB,EAAwB;EAEpBrY,QAAAA,GAAG,GAAGqwB,KAAK,CAACC,MAAN,CAAajY,CAAb,GAAiB,KAAKrY,GAAL,CAASqY,CAAhC;EACAhZ,QAAAA,GAAG,GAAGgxB,KAAK,CAACC,MAAN,CAAajY,CAAb,GAAiB,KAAKhZ,GAAL,CAASgZ,CAAhC;EAEH,OALD,MAKO;EAEHrY,QAAAA,GAAG,GAAGqwB,KAAK,CAACC,MAAN,CAAajY,CAAb,GAAiB,KAAKhZ,GAAL,CAASgZ,CAAhC;EACAhZ,QAAAA,GAAG,GAAGgxB,KAAK,CAACC,MAAN,CAAajY,CAAb,GAAiB,KAAKrY,GAAL,CAASqY,CAAhC;EAEH;;EAED,UAAIgY,KAAK,CAACC,MAAN,CAAahY,CAAb,GAAiB,CAArB,EAAwB;EAEpBtY,QAAAA,GAAG,IAAIqwB,KAAK,CAACC,MAAN,CAAahY,CAAb,GAAiB,KAAKtY,GAAL,CAASsY,CAAjC;EACAjZ,QAAAA,GAAG,IAAIgxB,KAAK,CAACC,MAAN,CAAahY,CAAb,GAAiB,KAAKjZ,GAAL,CAASiZ,CAAjC;EAEH,OALD,MAKO;EAEHtY,QAAAA,GAAG,IAAIqwB,KAAK,CAACC,MAAN,CAAahY,CAAb,GAAiB,KAAKjZ,GAAL,CAASiZ,CAAjC;EACAjZ,QAAAA,GAAG,IAAIgxB,KAAK,CAACC,MAAN,CAAahY,CAAb,GAAiB,KAAKtY,GAAL,CAASsY,CAAjC;EAEH;;EAED,UAAI+X,KAAK,CAACC,MAAN,CAAa7O,CAAb,GAAiB,CAArB,EAAwB;EAEpBzhB,QAAAA,GAAG,IAAIqwB,KAAK,CAACC,MAAN,CAAa7O,CAAb,GAAiB,KAAKzhB,GAAL,CAASyhB,CAAjC;EACApiB,QAAAA,GAAG,IAAIgxB,KAAK,CAACC,MAAN,CAAa7O,CAAb,GAAiB,KAAKpiB,GAAL,CAASoiB,CAAjC;EAEH,OALD,MAKO;EAEHzhB,QAAAA,GAAG,IAAIqwB,KAAK,CAACC,MAAN,CAAa7O,CAAb,GAAiB,KAAKpiB,GAAL,CAASoiB,CAAjC;EACApiB,QAAAA,GAAG,IAAIgxB,KAAK,CAACC,MAAN,CAAa7O,CAAb,GAAiB,KAAKzhB,GAAL,CAASyhB,CAAjC;EAEH;;EAED,aAAQzhB,GAAG,IAAIqwB,KAAK,CAACE,QAAb,IAAyBlxB,GAAG,IAAIgxB,KAAK,CAACE,QAA9C;EAEH;;;iCAEUtY,OAAO+X,gBAAgB;EAE9B,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EACA,aAAO3iB,MAAM,CAACiC,IAAP,CAAYiW,KAAZ,EAAmBkK,KAAnB,CAAyB,KAAKniB,GAA9B,EAAmC,KAAKX,GAAxC,CAAP;EAEH;;;sCAEe4Y,OAAO;EACnB,aAAOuY,gBAAe,CAAC/yB,IAAhB,CAAqB,IAArB,EAA0Bwa,KAA1B,CAAP;EACH;;;wCAEiB+X,gBAAgB;EAC9B,aAAOS,kBAAiB,CAAChzB,IAAlB,CAAuB,IAAvB,EAA4BuyB,cAA5B,CAAP;EACH;;;gCAESthB,KAAK;EAEX,WAAK1O,GAAL,CAASX,GAAT,CAAaqP,GAAG,CAAC1O,GAAjB;EACA,WAAKX,GAAL,CAASW,GAAT,CAAa0O,GAAG,CAACrP,GAAjB,EAHW;;EAMX,UAAI,KAAKP,OAAL,EAAJ,EAAoB,KAAK4wB,SAAL;EAEpB,aAAO,IAAP;EAEH;;;4BAEKhhB,KAAK;EAEP,WAAK1O,GAAL,CAASA,GAAT,CAAa0O,GAAG,CAAC1O,GAAjB;EACA,WAAKX,GAAL,CAASA,GAAT,CAAaqP,GAAG,CAACrP,GAAjB;EAEA,aAAO,IAAP;EAEH;;;mCAEYwkB,QAAQ;EACjB,aAAOK,YAAY,CAACL,MAAD,CAAnB;EACH;;;gCAESpV,QAAQ;EAEd,WAAKzO,GAAL,CAASwkB,GAAT,CAAa/V,MAAb;EACA,WAAKpP,GAAL,CAASmlB,GAAT,CAAa/V,MAAb;EAEA,aAAO,IAAP;EAEH;;;6BAEMC,KAAK;EAER,aAAOA,GAAG,CAAC1O,GAAJ,CAAQ0wB,MAAR,CAAe,KAAK1wB,GAApB,KAA4B0O,GAAG,CAACrP,GAAJ,CAAQqxB,MAAR,CAAe,KAAKrxB,GAApB,CAAnC;EAEH;;;;;;EAGL,IAAIwwB,qBAAoB,GAAI,YAAY;EAEpC,MAAIvL,EAAE,GAAG,IAAI5B,OAAJ,EAAT;EAEA,SAAO,SAASmN,oBAAT,CAA8BD,MAA9B,EAAsC5I,IAAtC,EAA4C;EAE/C,QAAI2J,QAAQ,GAAGrM,EAAE,CAACtiB,IAAH,CAAQglB,IAAR,EAAchF,cAAd,CAA6B,GAA7B,CAAf;EAEA,SAAKhiB,GAAL,CAASgC,IAAT,CAAc4tB,MAAd,EAAsBK,GAAtB,CAA0BU,QAA1B;EACA,SAAKtxB,GAAL,CAAS2C,IAAT,CAAc4tB,MAAd,EAAsBpL,GAAtB,CAA0BmM,QAA1B;EAEA,WAAO,IAAP;EAEH,GATD;EAWH,CAf0B,EAA3B;;EAiBA,IAAIZ,eAAc,GAAI,YAAY;EAE9B;EACA;EAEA,MAAIzL,EAAE,GAAG,IAAI5B,OAAJ,EAAT;EAEA,SAAO,SAASqN,cAAT,CAAwBD,MAAxB,EAAgC;EAEnC,QAAIc,KAAK,GAAG,IAAZ;EAEAd,IAAAA,MAAM,CAACe,iBAAP,CAAyB,IAAzB;EAEAf,IAAAA,MAAM,CAACgB,QAAP,CAAgB,UAAU9a,IAAV,EAAgB;EAE5B,UAAI1Y,CAAJ,EAAOgM,CAAP;EAEA,UAAIynB,QAAQ,GAAG/a,IAAI,CAAC+a,QAApB;;EAEA,UAAIA,QAAQ,KAAK7uB,SAAjB,EAA4B;EAExB,YAAI6uB,QAAQ,CAACC,UAAb,EAAyB;EAErB,cAAIC,QAAQ,GAAGF,QAAQ,CAACE,QAAxB;;EAEA,eAAK3zB,CAAC,GAAG,CAAJ,EAAOgM,CAAC,GAAG2nB,QAAQ,CAAC7zB,MAAzB,EAAiCE,CAAC,GAAGgM,CAArC,EAAwChM,CAAC,EAAzC,EAA6C;EAEzCgnB,YAAAA,EAAE,CAACtiB,IAAH,CAAQivB,QAAQ,CAAC3zB,CAAD,CAAhB;EACAgnB,YAAAA,EAAE,CAACJ,YAAH,CAAgBlO,IAAI,CAACiO,WAArB;EAEA2M,YAAAA,KAAK,CAACjB,aAAN,CAAoBrL,EAApB;EAEH;EAEJ,SAbD,MAaO,IAAIyM,QAAQ,CAACG,gBAAb,EAA+B;EAElC,cAAIlL,SAAS,GAAG+K,QAAQ,CAACI,UAAT,CAAoBzgB,QAApC;;EAEA,cAAIsV,SAAS,KAAK9jB,SAAlB,EAA6B;EAEzB,iBAAK5E,CAAC,GAAG,CAAJ,EAAOgM,CAAC,GAAG0c,SAAS,CAACqH,KAA1B,EAAiC/vB,CAAC,GAAGgM,CAArC,EAAwChM,CAAC,EAAzC,EAA6C;EAEzCgnB,cAAAA,EAAE,CAAC8M,mBAAH,CAAuBpL,SAAvB,EAAkC1oB,CAAlC,EAAqC4mB,YAArC,CAAkDlO,IAAI,CAACiO,WAAvD;EAEA2M,cAAAA,KAAK,CAACjB,aAAN,CAAoBrL,EAApB;EAEH;EAEJ;EAEJ;EAEJ;EAEJ,KAzCD;EA2CA,WAAO,IAAP;EAEH,GAnDD;EAqDH,CA5DoB,EAArB;;EA8DA,IAAI8L,iBAAgB,GAAI,YAAY;EAEhC,MAAIiB,YAAY,GAAG,IAAI3O,OAAJ,EAAnB;EAEA,SAAO,SAAS0N,gBAAT,CAA0BD,MAA1B,EAAkC;EAErC;EACA,SAAKmB,UAAL,CAAgBnB,MAAM,CAACP,MAAvB,EAA+ByB,YAA/B,EAHqC;;EAMrC,WAAOA,YAAY,CAAChM,iBAAb,CAA+B8K,MAAM,CAACP,MAAtC,KAAkDO,MAAM,CAAC9Y,MAAP,GAAgB8Y,MAAM,CAAC9Y,MAAhF;EAEH,GARD;EAUH,CAdsB,EAAvB;;EAgBA,IAAImZ,gBAAe,GAAI,YAAY;EAE/B,MAAIlM,EAAE,GAAG,IAAI5B,OAAJ,EAAT;EAEA,SAAO,SAAS8N,eAAT,CAAyBvY,KAAzB,EAAgC;EAEnC,QAAIsZ,YAAY,GAAGjN,EAAE,CAACtiB,IAAH,CAAQiW,KAAR,EAAekK,KAAf,CAAqB,KAAKniB,GAA1B,EAA+B,KAAKX,GAApC,CAAnB;EACA,WAAOkyB,YAAY,CAACtB,GAAb,CAAiBhY,KAAjB,EAAwB7a,MAAxB,EAAP;EAEH,GALD;EAOH,CAXqB,EAAtB;;EAaA,IAAIqzB,kBAAiB,GAAI,YAAY;EAEjC,MAAInM,EAAE,GAAG,IAAI5B,OAAJ,EAAT;EAEA,SAAO,SAAS+N,iBAAT,CAA2BT,cAA3B,EAA2C;EAE9C,QAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAIwB,MAAJ,EAA/B;EAEA,SAAKC,SAAL,CAAe1xB,MAAM,CAAC6vB,MAAtB;EAEA7vB,IAAAA,MAAM,CAACsX,MAAP,GAAgB,KAAKqa,OAAL,CAAapN,EAAb,EAAiBlnB,MAAjB,KAA4B,GAA5C;EAEA,WAAO2C,MAAP;EAEH,GAVD;EAYH,CAhBuB,EAAxB;;EAkBA,IAAImkB,YAAY,GAAI,YAAY;EAE5B,MAAIpM,MAAM,GAAG,CACT,IAAI4K,OAAJ,EADS,EAET,IAAIA,OAAJ,EAFS,EAGT,IAAIA,OAAJ,EAHS,EAIT,IAAIA,OAAJ,EAJS,EAKT,IAAIA,OAAJ,EALS,EAMT,IAAIA,OAAJ,EANS,EAOT,IAAIA,OAAJ,EAPS,EAQT,IAAIA,OAAJ,EARS,CAAb;EAWA,SAAO,SAASwB,YAAT,CAAsBL,MAAtB,EAA8B;EAEjC;EACA,QAAI,KAAK/kB,OAAL,EAAJ,EAAoB,OAAO,IAAP,CAHa;;EAMjCgZ,IAAAA,MAAM,CAAC,CAAD,CAAN,CAAUvG,GAAV,CAAc,KAAKvR,GAAL,CAASqY,CAAvB,EAA0B,KAAKrY,GAAL,CAASsY,CAAnC,EAAsC,KAAKtY,GAAL,CAASyhB,CAA/C,EAAkDyC,YAAlD,CAA+DL,MAA/D,EANiC;;EAOjC/L,IAAAA,MAAM,CAAC,CAAD,CAAN,CAAUvG,GAAV,CAAc,KAAKvR,GAAL,CAASqY,CAAvB,EAA0B,KAAKrY,GAAL,CAASsY,CAAnC,EAAsC,KAAKjZ,GAAL,CAASoiB,CAA/C,EAAkDyC,YAAlD,CAA+DL,MAA/D,EAPiC;;EAQjC/L,IAAAA,MAAM,CAAC,CAAD,CAAN,CAAUvG,GAAV,CAAc,KAAKvR,GAAL,CAASqY,CAAvB,EAA0B,KAAKhZ,GAAL,CAASiZ,CAAnC,EAAsC,KAAKtY,GAAL,CAASyhB,CAA/C,EAAkDyC,YAAlD,CAA+DL,MAA/D,EARiC;;EASjC/L,IAAAA,MAAM,CAAC,CAAD,CAAN,CAAUvG,GAAV,CAAc,KAAKvR,GAAL,CAASqY,CAAvB,EAA0B,KAAKhZ,GAAL,CAASiZ,CAAnC,EAAsC,KAAKjZ,GAAL,CAASoiB,CAA/C,EAAkDyC,YAAlD,CAA+DL,MAA/D,EATiC;;EAUjC/L,IAAAA,MAAM,CAAC,CAAD,CAAN,CAAUvG,GAAV,CAAc,KAAKlS,GAAL,CAASgZ,CAAvB,EAA0B,KAAKrY,GAAL,CAASsY,CAAnC,EAAsC,KAAKtY,GAAL,CAASyhB,CAA/C,EAAkDyC,YAAlD,CAA+DL,MAA/D,EAViC;;EAWjC/L,IAAAA,MAAM,CAAC,CAAD,CAAN,CAAUvG,GAAV,CAAc,KAAKlS,GAAL,CAASgZ,CAAvB,EAA0B,KAAKrY,GAAL,CAASsY,CAAnC,EAAsC,KAAKjZ,GAAL,CAASoiB,CAA/C,EAAkDyC,YAAlD,CAA+DL,MAA/D,EAXiC;;EAYjC/L,IAAAA,MAAM,CAAC,CAAD,CAAN,CAAUvG,GAAV,CAAc,KAAKlS,GAAL,CAASgZ,CAAvB,EAA0B,KAAKhZ,GAAL,CAASiZ,CAAnC,EAAsC,KAAKtY,GAAL,CAASyhB,CAA/C,EAAkDyC,YAAlD,CAA+DL,MAA/D,EAZiC;;EAajC/L,IAAAA,MAAM,CAAC,CAAD,CAAN,CAAUvG,GAAV,CAAc,KAAKlS,GAAL,CAASgZ,CAAvB,EAA0B,KAAKhZ,GAAL,CAASiZ,CAAnC,EAAsC,KAAKjZ,GAAL,CAASoiB,CAA/C,EAAkDyC,YAAlD,CAA+DL,MAA/D,EAbiC;;EAejC,SAAK8N,aAAL,CAAmB7Z,MAAnB;EAEA,WAAO,IAAP;EAEH,GAnBD;EAqBH,CAlCkB,EAAnB;;MCxcM0Z;;;EACF,kBAAY5B,MAAZ,EAAoBvY,MAApB,EAA4B;EAAA;;EACxB,SAAKuY,MAAL,GAAeA,MAAM,KAAK1tB,SAAZ,GAAyB0tB,MAAzB,GAAkC,IAAIlN,OAAJ,EAAhD;EACA,SAAKrL,MAAL,GAAeA,MAAM,KAAKnV,SAAZ,GAAyBmV,MAAzB,GAAkC,CAAhD;EACH;;;;0BAEGuY,QAAQvY,QAAQ;EAEhB,WAAKuY,MAAL,CAAY5tB,IAAZ,CAAiB4tB,MAAjB;EACA,WAAKvY,MAAL,GAAcA,MAAd;EAEA,aAAO,IAAP;EAEH;;;oCAEaS,QAAQ8Z,gBAAgB;EAElC,UAAIhC,MAAM,GAAG,KAAKA,MAAlB;EACA,UAAIlhB,GAAG,GAAG,IAAIwgB,IAAJ,EAAV;;EAEA,UAAI0C,cAAc,KAAK1vB,SAAvB,EAAkC;EAE9B0tB,QAAAA,MAAM,CAAC5tB,IAAP,CAAY4vB,cAAZ;EAEH,OAJD,MAIO;EAEHljB,QAAAA,GAAG,CAACijB,aAAJ,CAAkB7Z,MAAlB,EAA0B2Z,SAA1B,CAAoC7B,MAApC;EAEH;;EAED,UAAIiC,WAAW,GAAG,CAAlB;;EAEA,WAAK,IAAIv0B,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAG4P,MAAM,CAAC1a,MAA5B,EAAoCE,CAAC,GAAG4K,EAAxC,EAA4C5K,CAAC,EAA7C,EAAiD;EAE7Cu0B,QAAAA,WAAW,GAAG90B,IAAI,CAACsC,GAAL,CAASwyB,WAAT,EAAsBjC,MAAM,CAACvK,iBAAP,CAAyBvN,MAAM,CAACxa,CAAD,CAA/B,CAAtB,CAAd;EAEH;;EAED,WAAK+Z,MAAL,GAActa,IAAI,CAACklB,IAAL,CAAU4P,WAAV,CAAd;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAK1vB,WAAT,GAAuBH,IAAvB,CAA4B,IAA5B,CAAP;EAEH;;;2BAEImuB,QAAQ;EAET,WAAKP,MAAL,CAAY5tB,IAAZ,CAAiBmuB,MAAM,CAACP,MAAxB;EACA,WAAKvY,MAAL,GAAc8Y,MAAM,CAAC9Y,MAArB;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAQ,KAAKA,MAAL,IAAe,CAAvB;EAEH;;;oCAEaY,OAAO;EAEjB,aAAQA,KAAK,CAACoN,iBAAN,CAAwB,KAAKuK,MAA7B,KAAyC,KAAKvY,MAAL,GAAc,KAAKA,MAApE;EAEH;;;sCAEeY,OAAO;EAEnB,aAAQA,KAAK,CAAC6Z,UAAN,CAAiB,KAAKlC,MAAtB,IAAgC,KAAKvY,MAA7C;EAEH;;;uCAEgB8Y,QAAQ;EAErB,UAAI4B,SAAS,GAAG,KAAK1a,MAAL,GAAc8Y,MAAM,CAAC9Y,MAArC;EAEA,aAAO8Y,MAAM,CAACP,MAAP,CAAcvK,iBAAd,CAAgC,KAAKuK,MAArC,KAAiDmC,SAAS,GAAGA,SAApE;EAEH;;;oCAEarjB,KAAK;EAEf,aAAOA,GAAG,CAAC0hB,gBAAJ,CAAqB,IAArB,CAAP;EAEH;;;sCAEeC,OAAO;EAEnB,aAAOtzB,IAAI,CAACuK,GAAL,CAAS+oB,KAAK,CAACG,eAAN,CAAsB,KAAKZ,MAA3B,CAAT,KAAgD,KAAKvY,MAA5D;EAEH;;;iCAEUY,OAAO+X,gBAAgB;EAE9B,UAAIgC,aAAa,GAAG,KAAKpC,MAAL,CAAYvK,iBAAZ,CAA8BpN,KAA9B,CAApB;EAEA,UAAIlY,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EAEA3iB,MAAAA,MAAM,CAACiC,IAAP,CAAYiW,KAAZ;;EAEA,UAAI+Z,aAAa,GAAI,KAAK3a,MAAL,GAAc,KAAKA,MAAxC,EAAiD;EAE7CtX,QAAAA,MAAM,CAACkwB,GAAP,CAAW,KAAKL,MAAhB,EAAwBzL,SAAxB;EACApkB,QAAAA,MAAM,CAACiiB,cAAP,CAAsB,KAAK3K,MAA3B,EAAmCmN,GAAnC,CAAuC,KAAKoL,MAA5C;EAEH;;EAED,aAAO7vB,MAAP;EAEH;;;qCAEciwB,gBAAgB;EAE3B,UAAIthB,GAAG,GAAGshB,cAAc,IAAI,IAAId,IAAJ,EAA5B;EAEAxgB,MAAAA,GAAG,CAAC6C,GAAJ,CAAQ,KAAKqe,MAAb,EAAqB,KAAKA,MAA1B;EACAlhB,MAAAA,GAAG,CAACujB,cAAJ,CAAmB,KAAK5a,MAAxB;EAEA,aAAO3I,GAAP;EAEH;;;mCAEYmV,QAAQ;EAEjB,WAAK+L,MAAL,CAAY1L,YAAZ,CAAyBL,MAAzB;EACA,WAAKxM,MAAL,GAAc,KAAKA,MAAL,GAAcwM,MAAM,CAACqO,iBAAP,EAA5B;EAEA,aAAO,IAAP;EAEH;;;gCAESzjB,QAAQ;EAEd,WAAKmhB,MAAL,CAAYpL,GAAZ,CAAgB/V,MAAhB;EAEA,aAAO,IAAP;EAEH;;;6BAEM0hB,QAAQ;EAEX,aAAOA,MAAM,CAACP,MAAP,CAAcc,MAAd,CAAqB,KAAKd,MAA1B,KAAsCO,MAAM,CAAC9Y,MAAP,KAAkB,KAAKA,MAApE;EAEH;;;;;;ECzJL,IAAIiN,IAAE,GAAG,IAAI5B,OAAJ,EAAT;;MACMyP;;;EACF,qBAAc;EAAA;;EACV,SAAKrQ,QAAL,GAAgB,CAEZ,CAFY,EAET,CAFS,EAEN,CAFM,EAGZ,CAHY,EAGT,CAHS,EAGN,CAHM,EAIZ,CAJY,EAIT,CAJS,EAIN,CAJM,CAAhB;;EAQA,QAAIthB,SAAS,CAACpD,MAAV,GAAmB,CAAvB,EAA0B;EAEtBylB,MAAAA,OAAO,CAAC8E,KAAR,CAAc,yEAAd;EAEH;;EACD,SAAKyK,SAAL,GAAiB,IAAjB;EACH;;;;0BACGvK,KAAKC,KAAKC,KAAKE,KAAKC,KAAKC,KAAKE,KAAKC,KAAKC,KAAK;EAE7C,UAAIM,EAAE,GAAG,KAAK/G,QAAd;EAEA+G,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQhB,GAAR;EAAagB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQZ,GAAR;EAAaY,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQR,GAAR;EAC1BQ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQf,GAAR;EAAae,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQX,GAAR;EAAaW,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQP,GAAR;EAC1BO,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQd,GAAR;EAAac,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQV,GAAR;EAAaU,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQN,GAAR;EAE1B,aAAO,IAAP;EAEH;;;iCAEU;EAEP,WAAKhX,GAAL,CAEI,CAFJ,EAEO,CAFP,EAEU,CAFV,EAGI,CAHJ,EAGO,CAHP,EAGU,CAHV,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV;EAQA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAKpP,WAAT,GAAuB4jB,SAAvB,CAAiC,KAAKjE,QAAtC,CAAP;EAEH;;;2BAEIzf,GAAG;EAEJ,UAAIwmB,EAAE,GAAG,KAAK/G,QAAd;EACA,UAAItb,EAAE,GAAGnE,CAAC,CAACyf,QAAX;EAEA+G,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAC9BqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAC9BqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAAeqiB,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQriB,EAAE,CAAC,CAAD,CAAV;EAE9B,aAAO,IAAP;EAEH;;;qCAEcnE,GAAG;EAEd,UAAImE,EAAE,GAAGnE,CAAC,CAACyf,QAAX;EAEA,WAAKvQ,GAAL,CAEI/K,EAAE,CAAC,CAAD,CAFN,EAEWA,EAAE,CAAC,CAAD,CAFb,EAEkBA,EAAE,CAAC,CAAD,CAFpB,EAGIA,EAAE,CAAC,CAAD,CAHN,EAGWA,EAAE,CAAC,CAAD,CAHb,EAGkBA,EAAE,CAAC,CAAD,CAHpB,EAIIA,EAAE,CAAC,CAAD,CAJN,EAIWA,EAAE,CAAC,CAAD,CAJb,EAIkBA,EAAE,CAAC,EAAD,CAJpB;EAQA,aAAO,IAAP;EAEH;;;6CAEsBwf,WAAW;EAE9B,WAAK,IAAI1oB,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG0c,SAAS,CAACqH,KAA9B,EAAqC/vB,CAAC,GAAGgM,CAAzC,EAA4ChM,CAAC,EAA7C,EAAiD;EAE7CgnB,QAAAA,IAAE,CAACjM,CAAH,GAAO2N,SAAS,CAACC,IAAV,CAAe3oB,CAAf,CAAP;EACAgnB,QAAAA,IAAE,CAAChM,CAAH,GAAO0N,SAAS,CAACE,IAAV,CAAe5oB,CAAf,CAAP;EACAgnB,QAAAA,IAAE,CAAC7C,CAAH,GAAOuE,SAAS,CAACG,IAAV,CAAe7oB,CAAf,CAAP;EAEAgnB,QAAAA,IAAE,CAAC+N,YAAH,CAAgB,IAAhB;EAEArM,QAAAA,SAAS,CAACsH,MAAV,CAAiBhwB,CAAjB,EAAoBgnB,IAAE,CAACjM,CAAvB,EAA0BiM,IAAE,CAAChM,CAA7B,EAAgCgM,IAAE,CAAC7C,CAAnC;EAEH;;EAED,aAAOuE,SAAP;EAEH;;;qCAEcmI,IAAIC,IAAIzI,IAAIE,IAAIyM,UAAUC,IAAIC,IAAI;EAE7C,UAAItf,CAAC,GAAGnW,IAAI,CAAC8X,GAAL,CAASyd,QAAT,CAAR;EACA,UAAItP,CAAC,GAAGjmB,IAAI,CAACgY,GAAL,CAASud,QAAT,CAAR;EAEA,WAAK/gB,GAAL,CACIoU,EAAE,GAAGzS,CADT,EACYyS,EAAE,GAAG3C,CADjB,EACoB,CAAE2C,EAAF,IAAQzS,CAAC,GAAGqf,EAAJ,GAASvP,CAAC,GAAGwP,EAArB,IAA2BD,EAA3B,GAAgCpE,EADpD,EAEI,CAAEtI,EAAF,GAAO7C,CAFX,EAEc6C,EAAE,GAAG3S,CAFnB,EAEsB,CAAE2S,EAAF,IAAQ,CAAE7C,CAAF,GAAMuP,EAAN,GAAWrf,CAAC,GAAGsf,EAAvB,IAA6BA,EAA7B,GAAkCpE,EAFxD,EAGI,CAHJ,EAGO,CAHP,EAGU,CAHV;EAMH;;;+BAEQ/rB,GAAG;EAER,aAAO,KAAKyhB,gBAAL,CAAsB,IAAtB,EAA4BzhB,CAA5B,CAAP;EAEH;;;kCAEWA,GAAG;EAEX,aAAO,KAAKyhB,gBAAL,CAAsBzhB,CAAtB,EAAyB,IAAzB,CAAP;EAEH;;;uCAEgBqK,GAAGG,GAAG;EAEnB,UAAI0c,EAAE,GAAG7c,CAAC,CAACoV,QAAX;EACA,UAAI2H,EAAE,GAAG5c,CAAC,CAACiV,QAAX;EACA,UAAI+G,EAAE,GAAG,KAAK/G,QAAd;EAEA,UAAIuJ,GAAG,GAAG9B,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiB+B,GAAG,GAAG/B,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BgC,GAAG,GAAGhC,EAAE,CAAC,CAAD,CAAtC;EACA,UAAIkC,GAAG,GAAGlC,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBmC,GAAG,GAAGnC,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BoC,GAAG,GAAGpC,EAAE,CAAC,CAAD,CAAtC;EACA,UAAIsC,GAAG,GAAGtC,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBuC,GAAG,GAAGvC,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BwC,GAAG,GAAGxC,EAAE,CAAC,CAAD,CAAtC;EAEA,UAAI8C,GAAG,GAAG5C,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiB6C,GAAG,GAAG7C,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8B8C,GAAG,GAAG9C,EAAE,CAAC,CAAD,CAAtC;EACA,UAAIgD,GAAG,GAAGhD,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBiD,GAAG,GAAGjD,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BkD,GAAG,GAAGlD,EAAE,CAAC,CAAD,CAAtC;EACA,UAAIoD,GAAG,GAAGpD,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBqD,GAAG,GAAGrD,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BsD,GAAG,GAAGtD,EAAE,CAAC,CAAD,CAAtC;EAEAZ,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQwC,GAAG,GAAGgB,GAAN,GAAYf,GAAG,GAAGmB,GAAlB,GAAwBlB,GAAG,GAAGsB,GAAtC;EACAhE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQwC,GAAG,GAAGiB,GAAN,GAAYhB,GAAG,GAAGoB,GAAlB,GAAwBnB,GAAG,GAAGuB,GAAtC;EACAjE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQwC,GAAG,GAAGkB,GAAN,GAAYjB,GAAG,GAAGqB,GAAlB,GAAwBpB,GAAG,GAAGwB,GAAtC;EAEAlE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ4C,GAAG,GAAGY,GAAN,GAAYX,GAAG,GAAGe,GAAlB,GAAwBd,GAAG,GAAGkB,GAAtC;EACAhE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ4C,GAAG,GAAGa,GAAN,GAAYZ,GAAG,GAAGgB,GAAlB,GAAwBf,GAAG,GAAGmB,GAAtC;EACAjE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ4C,GAAG,GAAGc,GAAN,GAAYb,GAAG,GAAGiB,GAAlB,GAAwBhB,GAAG,GAAGoB,GAAtC;EAEAlE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQgD,GAAG,GAAGQ,GAAN,GAAYP,GAAG,GAAGW,GAAlB,GAAwBV,GAAG,GAAGc,GAAtC;EACAhE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQgD,GAAG,GAAGS,GAAN,GAAYR,GAAG,GAAGY,GAAlB,GAAwBX,GAAG,GAAGe,GAAtC;EACAjE,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQgD,GAAG,GAAGU,GAAN,GAAYT,GAAG,GAAGa,GAAlB,GAAwBZ,GAAG,GAAGgB,GAAtC;EAEA,aAAO,IAAP;EAEH;;;qCAEc/J,GAAG;EAEd,UAAI6F,EAAE,GAAG,KAAK/G,QAAd;EAEA+G,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EACxB6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EACxB6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAAY6F,MAAAA,EAAE,CAAC,CAAD,CAAF,IAAS7F,CAAT;EAExB,aAAO,IAAP;EAEH;;;oCAEa;EAEV,UAAI6F,EAAE,GAAG,KAAK/G,QAAd;EAEA,UAAIpV,CAAC,GAAGmc,EAAE,CAAC,CAAD,CAAV;EAAA,UAAehc,CAAC,GAAGgc,EAAE,CAAC,CAAD,CAArB;EAAA,UAA0B3V,CAAC,GAAG2V,EAAE,CAAC,CAAD,CAAhC;EAAA,UACI1gB,CAAC,GAAG0gB,EAAE,CAAC,CAAD,CADV;EAAA,UACe1b,CAAC,GAAG0b,EAAE,CAAC,CAAD,CADrB;EAAA,UAC0Bld,CAAC,GAAGkd,EAAE,CAAC,CAAD,CADhC;EAAA,UAEItC,CAAC,GAAGsC,EAAE,CAAC,CAAD,CAFV;EAAA,UAEepe,CAAC,GAAGoe,EAAE,CAAC,CAAD,CAFrB;EAAA,UAE0BvrB,CAAC,GAAGurB,EAAE,CAAC,CAAD,CAFhC;EAIA,aAAOnc,CAAC,GAAGS,CAAJ,GAAQ7P,CAAR,GAAYoP,CAAC,GAAGf,CAAJ,GAAQlB,CAApB,GAAwBoC,CAAC,GAAG1E,CAAJ,GAAQ7K,CAAhC,GAAoCuP,CAAC,GAAGlB,CAAJ,GAAQ4a,CAA5C,GAAgDrT,CAAC,GAAG/K,CAAJ,GAAQsC,CAAxD,GAA4DyI,CAAC,GAAG/F,CAAJ,GAAQoZ,CAA3E;EAEH;;;iCAEU1C,QAAQ2J,mBAAmB;EAElC,UAAI3J,MAAM,IAAIA,MAAM,CAAC+D,SAArB,EAAgC;EAE5B/E,QAAAA,OAAO,CAAC8E,KAAR,CAAc,4DAAd;EAEH;;EAED,UAAInhB,EAAE,GAAGqd,MAAM,CAAC/B,QAAhB;EAAA,UACI+G,EAAE,GAAG,KAAK/G,QADd;EAAA,UAGI+F,GAAG,GAAGrhB,EAAE,CAAC,CAAD,CAHZ;EAAA,UAGiByhB,GAAG,GAAGzhB,EAAE,CAAC,CAAD,CAHzB;EAAA,UAG8B6hB,GAAG,GAAG7hB,EAAE,CAAC,CAAD,CAHtC;EAAA,UAIIshB,GAAG,GAAGthB,EAAE,CAAC,CAAD,CAJZ;EAAA,UAIiB0hB,GAAG,GAAG1hB,EAAE,CAAC,CAAD,CAJzB;EAAA,UAI8B8hB,GAAG,GAAG9hB,EAAE,CAAC,CAAD,CAJtC;EAAA,UAKIuhB,GAAG,GAAGvhB,EAAE,CAAC,CAAD,CALZ;EAAA,UAKiB2hB,GAAG,GAAG3hB,EAAE,CAAC,CAAD,CALzB;EAAA,UAK8B+hB,GAAG,GAAG/hB,EAAE,CAAC,CAAD,CALtC;EAAA,UAOIinB,GAAG,GAAGlF,GAAG,GAAGL,GAAN,GAAYI,GAAG,GAAGH,GAP5B;EAAA,UAQIuF,GAAG,GAAGpF,GAAG,GAAGP,GAAN,GAAYQ,GAAG,GAAGT,GAR5B;EAAA,UASI6F,GAAG,GAAGxF,GAAG,GAAGL,GAAN,GAAYI,GAAG,GAAGH,GAT5B;EAAA,UAWI8F,GAAG,GAAGhG,GAAG,GAAG4F,GAAN,GAAYxF,GAAG,GAAGyF,GAAlB,GAAwBrF,GAAG,GAAGsF,GAXxC;;EAaA,UAAIE,GAAG,KAAK,CAAZ,EAAe;EAEX,YAAIC,GAAG,GAAG,8DAAV;;EAEA,YAAIN,iBAAiB,KAAK,IAA1B,EAAgC;EAE5B,gBAAM,IAAI5K,KAAJ,CAAUkL,GAAV,CAAN;EAEH,SAJD,MAIO;EAEHjL,UAAAA,OAAO,CAACC,IAAR,CAAagL,GAAb;EAEH;;EAED,eAAO,KAAK/vB,QAAL,EAAP;EAEH;;EAED,UAAIgwB,MAAM,GAAG,IAAIF,GAAjB;EAEAhF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ4E,GAAG,GAAGM,MAAd;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACR,GAAG,GAAGF,GAAN,GAAYI,GAAG,GAAGN,GAAnB,IAA0B8F,MAAlC;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACP,GAAG,GAAGL,GAAN,GAAYI,GAAG,GAAGH,GAAnB,IAA0B6F,MAAlC;EAEAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ6E,GAAG,GAAGK,MAAd;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACN,GAAG,GAAGV,GAAN,GAAYQ,GAAG,GAAGN,GAAnB,IAA0BgG,MAAlC;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACR,GAAG,GAAGP,GAAN,GAAYQ,GAAG,GAAGT,GAAnB,IAA0BkG,MAAlC;EAEAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ8E,GAAG,GAAGI,MAAd;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACZ,GAAG,GAAGF,GAAN,GAAYI,GAAG,GAAGN,GAAnB,IAA0BkG,MAAlC;EACAlF,MAAAA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAACX,GAAG,GAAGL,GAAN,GAAYI,GAAG,GAAGH,GAAnB,IAA0BiG,MAAlC;EAEA,aAAO,IAAP;EAEH;;;kCAEW;EAER,UAAIR,GAAJ;EAAA,UAASlrB,CAAC,GAAG,KAAKyf,QAAlB;EAEAyL,MAAAA,GAAG,GAAGlrB,CAAC,CAAC,CAAD,CAAP;EAAYA,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAR;EAAaA,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOkrB,GAAP;EACzBA,MAAAA,GAAG,GAAGlrB,CAAC,CAAC,CAAD,CAAP;EAAYA,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAR;EAAaA,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOkrB,GAAP;EACzBA,MAAAA,GAAG,GAAGlrB,CAAC,CAAC,CAAD,CAAP;EAAYA,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAR;EAAaA,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOkrB,GAAP;EAEzB,aAAO,IAAP;EAEH;;;sCAEekF,SAAS;EAErB,aAAO,KAAKC,cAAL,CAAoBD,OAApB,EAA6BzO,UAA7B,CAAwC,IAAxC,EAA8C2O,SAA9C,EAAP;EAEH;;;yCAEkB/a,GAAG;EAElB,UAAIvV,CAAC,GAAG,KAAKyf,QAAb;EAEAlK,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOvV,CAAC,CAAC,CAAD,CAAR;EACAuV,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOvV,CAAC,CAAC,CAAD,CAAR;EACAuV,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOvV,CAAC,CAAC,CAAD,CAAR;EACAuV,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOvV,CAAC,CAAC,CAAD,CAAR;EACAuV,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOvV,CAAC,CAAC,CAAD,CAAR;EACAuV,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOvV,CAAC,CAAC,CAAD,CAAR;EACAuV,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOvV,CAAC,CAAC,CAAD,CAAR;EACAuV,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOvV,CAAC,CAAC,CAAD,CAAR;EACAuV,MAAAA,CAAC,CAAC,CAAD,CAAD,GAAOvV,CAAC,CAAC,CAAD,CAAR;EAEA,aAAO,IAAP;EAEH;;;6BAEMwhB,QAAQ;EAEX,UAAIgF,EAAE,GAAG,KAAK/G,QAAd;EACA,UAAItb,EAAE,GAAGqd,MAAM,CAAC/B,QAAhB;;EAEA,WAAK,IAAIxkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;EAExB,YAAIurB,EAAE,CAACvrB,CAAD,CAAF,KAAUkJ,EAAE,CAAClJ,CAAD,CAAhB,EAAqB,OAAO,KAAP;EAExB;;EAED,aAAO,IAAP;EAEH;;;gCAESQ,OAAO2Q,QAAQ;EAErB,UAAIA,MAAM,KAAKvM,SAAf,EAA0BuM,MAAM,GAAG,CAAT;;EAE1B,WAAK,IAAInR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;EAExB,aAAKwkB,QAAL,CAAcxkB,CAAd,IAAmBQ,KAAK,CAACR,CAAC,GAAGmR,MAAL,CAAxB;EAEH;;EAED,aAAO,IAAP;EAEH;;;8BAEO3Q,OAAO2Q,QAAQ;EAEnB,UAAI3Q,KAAK,KAAKoE,SAAd,EAAyBpE,KAAK,GAAG,EAAR;EACzB,UAAI2Q,MAAM,KAAKvM,SAAf,EAA0BuM,MAAM,GAAG,CAAT;EAE1B,UAAIoa,EAAE,GAAG,KAAK/G,QAAd;EAEAhkB,MAAAA,KAAK,CAAC2Q,MAAD,CAAL,GAAgBoa,EAAE,CAAC,CAAD,CAAlB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EAEA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EAEA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EACA/qB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoBoa,EAAE,CAAC,CAAD,CAAtB;EAEA,aAAO/qB,KAAP;EAEH;;;;;;EC9TL,IAAIwmB,IAAE,GAAG,IAAI5B,OAAJ,EAAT;EACA,IAAI6B,IAAE,GAAG,IAAI7B,OAAJ,EAAT;EAEA,IAAIkQ,EAAE,GAAG,IAAIlQ,OAAJ,EAAT;EAEA,IAAImQ,EAAE,GAAG,IAAInQ,OAAJ,EAAT;EACA,IAAIoQ,EAAE,GAAG,IAAIX,OAAJ,EAAT;;MAGMY;;;EACF,iBAAYzC,MAAZ,EAAoBC,QAApB,EAA8B;EAAA;;EAC1B;EAEA,SAAKD,MAAL,GAAeA,MAAM,KAAKpuB,SAAZ,GAAyBouB,MAAzB,GAAkC,IAAI5N,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAhD;EACA,SAAK6N,QAAL,GAAiBA,QAAQ,KAAKruB,SAAd,GAA2BquB,QAA3B,GAAsC,CAAtD;EACH;;;;0BAEGD,QAAQC,UAAU;EAElB,WAAKD,MAAL,CAAYtuB,IAAZ,CAAiBsuB,MAAjB;EACA,WAAKC,QAAL,GAAgBA,QAAhB;EAEA,aAAO,IAAP;EAEH;;;oCAEalY,GAAGC,GAAGmJ,GAAGC,GAAG;EAEtB,WAAK4O,MAAL,CAAY/e,GAAZ,CAAgB8G,CAAhB,EAAmBC,CAAnB,EAAsBmJ,CAAtB;EACA,WAAK8O,QAAL,GAAgB7O,CAAhB;EAEA,aAAO,IAAP;EAEH;;;oDAE6B4O,QAAQrY,OAAO;EAEzC,WAAKqY,MAAL,CAAYtuB,IAAZ,CAAiBsuB,MAAjB;EACA,WAAKC,QAAL,GAAgB,CAAEtY,KAAK,CAACgN,GAAN,CAAU,KAAKqL,MAAf,CAAlB;EAEA,aAAO,IAAP;EAEH;;;4CAEqB5jB,GAAGG,GAAGqG,GAAG;EAE3B,UAAIod,MAAM,GAAGhM,IAAE,CAACrB,UAAH,CAAc/P,CAAd,EAAiBrG,CAAjB,EAAoBmmB,KAApB,CAA0BzO,IAAE,CAACtB,UAAH,CAAcvW,CAAd,EAAiBG,CAAjB,CAA1B,EAA+CsX,SAA/C,EAAb,CAF2B;;EAM3B,WAAK8O,6BAAL,CAAmC3C,MAAnC,EAA2C5jB,CAA3C;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAKvK,WAAT,GAAuBH,IAAvB,CAA4B,IAA5B,CAAP;EAEH;;;2BAEIquB,OAAO;EAER,WAAKC,MAAL,CAAYtuB,IAAZ,CAAiBquB,KAAK,CAACC,MAAvB;EACA,WAAKC,QAAL,GAAgBF,KAAK,CAACE,QAAtB;EAEA,aAAO,IAAP;EAEH;;;kCAEW;EAER;EAEA,UAAI2C,mBAAmB,GAAG,MAAM,KAAK5C,MAAL,CAAYlzB,MAAZ,EAAhC;EACA,WAAKkzB,MAAL,CAAYtO,cAAZ,CAA2BkR,mBAA3B;EACA,WAAK3C,QAAL,IAAiB2C,mBAAjB;EAEA,aAAO,IAAP;EAEH;;;+BAEQ;EAEL,WAAK3C,QAAL,IAAiB,CAAE,CAAnB;EACA,WAAKD,MAAL,CAAY6C,MAAZ;EAEA,aAAO,IAAP;EAEH;;;sCAEelb,OAAO;EAEnB,aAAO,KAAKqY,MAAL,CAAYrL,GAAZ,CAAgBhN,KAAhB,IAAyB,KAAKsY,QAArC;EAEH;;;uCAEgBJ,QAAQ;EAErB,aAAO,KAAKK,eAAL,CAAqBL,MAAM,CAACP,MAA5B,IAAsCO,MAAM,CAAC9Y,MAApD;EAEH;;;mCAEYY,OAAO+X,gBAAgB;EAEhC,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EAEA,aAAO3iB,MAAM,CAACiC,IAAP,CAAY,KAAKsuB,MAAjB,EAAyBtO,cAAzB,CAAwC,CAAE,KAAKwO,eAAL,CAAqBvY,KAArB,CAA1C,EAAuEuM,GAAvE,CAA2EvM,KAA3E,CAAP;EAEH;;;oCACamb,MAAMpD,gBAAgB;EAEhC,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EAEA,UAAI2Q,SAAS,GAAGD,IAAI,CAAC7L,KAAL,CAAWqL,EAAX,CAAhB;EAEA,UAAIU,WAAW,GAAG,KAAKhD,MAAL,CAAYrL,GAAZ,CAAgBoO,SAAhB,CAAlB;;EAEA,UAAIC,WAAW,KAAK,CAApB,EAAuB;EAEnB;EACA,YAAI,KAAK9C,eAAL,CAAqB4C,IAAI,CAAC9mB,KAA1B,MAAqC,CAAzC,EAA4C;EAExC,iBAAOvM,MAAM,CAACiC,IAAP,CAAYoxB,IAAI,CAAC9mB,KAAjB,CAAP;EAEH,SAPkB;;;EAUnB,eAAOpK,SAAP;EAEH;;EAED,UAAI+X,CAAC,GAAG,EAAGmZ,IAAI,CAAC9mB,KAAL,CAAW2Y,GAAX,CAAe,KAAKqL,MAApB,IAA8B,KAAKC,QAAtC,IAAkD+C,WAA1D;;EAEA,UAAIrZ,CAAC,GAAG,CAAJ,IAASA,CAAC,GAAG,CAAjB,EAAoB;EAEhB,eAAO/X,SAAP;EAEH;;EAED,aAAOnC,MAAM,CAACiC,IAAP,CAAYqxB,SAAZ,EAAuBrR,cAAvB,CAAsC/H,CAAtC,EAAyCuK,GAAzC,CAA6C4O,IAAI,CAAC9mB,KAAlD,CAAP;EAEH;;;qCAGc8mB,MAAM;EAEjB;EAEA,UAAIG,SAAS,GAAG,KAAK/C,eAAL,CAAqB4C,IAAI,CAAC9mB,KAA1B,CAAhB;EACA,UAAIknB,OAAO,GAAG,KAAKhD,eAAL,CAAqB4C,IAAI,CAAC7mB,GAA1B,CAAd;EAEA,aAAQgnB,SAAS,GAAG,CAAZ,IAAiBC,OAAO,GAAG,CAA5B,IAAmCA,OAAO,GAAG,CAAV,IAAeD,SAAS,GAAG,CAArE;EAEH;;;oCAEa7kB,KAAK;EAEf,aAAOA,GAAG,CAAC+kB,eAAJ,CAAoB,IAApB,CAAP;EAEH;;;uCAEgBtD,QAAQ;EAErB,aAAOA,MAAM,CAACsD,eAAP,CAAuB,IAAvB,CAAP;EAEH;;;oCAEazD,gBAAgB;EAE1B,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EAEA,aAAO3iB,MAAM,CAACiC,IAAP,CAAY,KAAKsuB,MAAjB,EAAyBtO,cAAzB,CAAwC,CAAE,KAAKuO,QAA/C,CAAP;EAEH;;;mCAEY1M,QAAQ6P,sBAAsB;EAEvC,UAAIC,YAAY,GAAGD,oBAAoB,IAAIZ,EAAE,CAACc,eAAH,CAAmB/P,MAAnB,CAA3C;EAEA,UAAIgQ,cAAc,GAAG,KAAKC,aAAL,CAAmBjB,EAAnB,EAAuB3O,YAAvB,CAAoCL,MAApC,CAArB;EAEA,UAAIyM,MAAM,GAAG,KAAKA,MAAL,CAAY+B,YAAZ,CAAyBsB,YAAzB,EAAuCxP,SAAvC,EAAb;EAEA,WAAKoM,QAAL,GAAgB,CAAEsD,cAAc,CAAC5O,GAAf,CAAmBqL,MAAnB,CAAlB;EAEA,aAAO,IAAP;EAEH;;;gCAES7hB,QAAQ;EAEd,WAAK8hB,QAAL,IAAiB9hB,MAAM,CAACwW,GAAP,CAAW,KAAKqL,MAAhB,CAAjB;EAEA,aAAO,IAAP;EAEH;;;6BAEMD,OAAO;EAEV,aAAOA,KAAK,CAACC,MAAN,CAAaI,MAAb,CAAoB,KAAKJ,MAAzB,KAAqCD,KAAK,CAACE,QAAN,KAAmB,KAAKA,QAApE;EAEH;;;;;;MCzMCwD;;;EACF,mBAAYC,EAAZ,EAAgBC,EAAhB,EAAoBC,EAApB,EAAwBC,EAAxB,EAA4BC,EAA5B,EAAgCC,EAAhC,EAAoC;EAAA;;EAChC,SAAKC,MAAL,GAAc,CAETN,EAAE,KAAK9xB,SAAR,GAAqB8xB,EAArB,GAA0B,IAAIjB,KAAJ,EAFhB,EAGTkB,EAAE,KAAK/xB,SAAR,GAAqB+xB,EAArB,GAA0B,IAAIlB,KAAJ,EAHhB,EAITmB,EAAE,KAAKhyB,SAAR,GAAqBgyB,EAArB,GAA0B,IAAInB,KAAJ,EAJhB,EAKToB,EAAE,KAAKjyB,SAAR,GAAqBiyB,EAArB,GAA0B,IAAIpB,KAAJ,EALhB,EAMTqB,EAAE,KAAKlyB,SAAR,GAAqBkyB,EAArB,GAA0B,IAAIrB,KAAJ,EANhB,EAOTsB,EAAE,KAAKnyB,SAAR,GAAqBmyB,EAArB,GAA0B,IAAItB,KAAJ,EAPhB,CAAd;EAUH;;;;0BAEGiB,IAAIC,IAAIC,IAAIC,IAAIC,IAAIC,IAAI;EAExB,UAAIC,MAAM,GAAG,KAAKA,MAAlB;EAEAA,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUtyB,IAAV,CAAegyB,EAAf;EACAM,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUtyB,IAAV,CAAeiyB,EAAf;EACAK,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUtyB,IAAV,CAAekyB,EAAf;EACAI,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUtyB,IAAV,CAAemyB,EAAf;EACAG,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUtyB,IAAV,CAAeoyB,EAAf;EACAE,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUtyB,IAAV,CAAeqyB,EAAf;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAKlyB,WAAT,GAAuBH,IAAvB,CAA4B,IAA5B,CAAP;EAEH;;;2BAEIuyB,SAAS;EAEV,UAAID,MAAM,GAAG,KAAKA,MAAlB;;EAEA,WAAK,IAAIh3B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;EAExBg3B,QAAAA,MAAM,CAACh3B,CAAD,CAAN,CAAU0E,IAAV,CAAeuyB,OAAO,CAACD,MAAR,CAAeh3B,CAAf,CAAf;EAEH;;EAED,aAAO,IAAP;EAEH;;;oCAEa+E,GAAG;EAEb,UAAIiyB,MAAM,GAAG,KAAKA,MAAlB;EACA,UAAI9tB,EAAE,GAAGnE,CAAC,CAACyf,QAAX;EACA,UAAI0S,GAAG,GAAGhuB,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBiuB,GAAG,GAAGjuB,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BkuB,GAAG,GAAGluB,EAAE,CAAC,CAAD,CAAtC;EAAA,UAA2CmuB,GAAG,GAAGnuB,EAAE,CAAC,CAAD,CAAnD;EACA,UAAIouB,GAAG,GAAGpuB,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBquB,GAAG,GAAGruB,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BsuB,GAAG,GAAGtuB,EAAE,CAAC,CAAD,CAAtC;EAAA,UAA2CuuB,GAAG,GAAGvuB,EAAE,CAAC,CAAD,CAAnD;EACA,UAAIwuB,GAAG,GAAGxuB,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiByuB,GAAG,GAAGzuB,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8B0uB,IAAI,GAAG1uB,EAAE,CAAC,EAAD,CAAvC;EAAA,UAA6C2uB,IAAI,GAAG3uB,EAAE,CAAC,EAAD,CAAtD;EACA,UAAI4uB,IAAI,GAAG5uB,EAAE,CAAC,EAAD,CAAb;EAAA,UAAmB6uB,IAAI,GAAG7uB,EAAE,CAAC,EAAD,CAA5B;EAAA,UAAkC8uB,IAAI,GAAG9uB,EAAE,CAAC,EAAD,CAA3C;EAAA,UAAiD+uB,IAAI,GAAG/uB,EAAE,CAAC,EAAD,CAA1D;EAEA8tB,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUkB,aAAV,CAAwBb,GAAG,GAAGH,GAA9B,EAAmCO,GAAG,GAAGH,GAAzC,EAA8CO,IAAI,GAAGH,GAArD,EAA0DO,IAAI,GAAGH,IAAjE,EAAuEjR,SAAvE;EACAmQ,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUkB,aAAV,CAAwBb,GAAG,GAAGH,GAA9B,EAAmCO,GAAG,GAAGH,GAAzC,EAA8CO,IAAI,GAAGH,GAArD,EAA0DO,IAAI,GAAGH,IAAjE,EAAuEjR,SAAvE;EACAmQ,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUkB,aAAV,CAAwBb,GAAG,GAAGF,GAA9B,EAAmCM,GAAG,GAAGF,GAAzC,EAA8CM,IAAI,GAAGF,GAArD,EAA0DM,IAAI,GAAGF,IAAjE,EAAuElR,SAAvE;EACAmQ,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUkB,aAAV,CAAwBb,GAAG,GAAGF,GAA9B,EAAmCM,GAAG,GAAGF,GAAzC,EAA8CM,IAAI,GAAGF,GAArD,EAA0DM,IAAI,GAAGF,IAAjE,EAAuElR,SAAvE;EACAmQ,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUkB,aAAV,CAAwBb,GAAG,GAAGD,GAA9B,EAAmCK,GAAG,GAAGD,GAAzC,EAA8CK,IAAI,GAAGD,IAArD,EAA2DK,IAAI,GAAGD,IAAlE,EAAwEnR,SAAxE;EACAmQ,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUkB,aAAV,CAAwBb,GAAG,GAAGD,GAA9B,EAAmCK,GAAG,GAAGD,GAAzC,EAA8CK,IAAI,GAAGD,IAArD,EAA2DK,IAAI,GAAGD,IAAlE,EAAwEnR,SAAxE;EAEA,aAAO,IAAP;EAEH;;;uCAEgB2L,QAAQ;EACrB,UAAI2F,EAAE,GAAGC,iBAAgB,CAACh5B,IAAjB,CAAsB,IAAtB,CAAT;;EACA,aAAO+4B,EAAE,CAAC3F,MAAD,CAAT;EACH;;;uCAGgB6F,QAAQ;EACrB,UAAIF,EAAE,GAAGG,iBAAgB,CAACl5B,IAAjB,CAAsB,IAAtB,CAAT;;EACA,aAAO+4B,EAAE,CAACE,MAAD,CAAT;EACH;;;uCAGgBxF,QAAQ;EAErB,UAAImE,MAAM,GAAG,KAAKA,MAAlB;EACA,UAAI1E,MAAM,GAAGO,MAAM,CAACP,MAApB;EACA,UAAIiG,SAAS,GAAG,CAAE1F,MAAM,CAAC9Y,MAAzB;;EAEA,WAAK,IAAI/Z,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;EAExB,YAAIw4B,QAAQ,GAAGxB,MAAM,CAACh3B,CAAD,CAAN,CAAUkzB,eAAV,CAA0BZ,MAA1B,CAAf;;EAEA,YAAIkG,QAAQ,GAAGD,SAAf,EAA0B;EAEtB,iBAAO,KAAP;EAEH;EAEJ;;EAED,aAAO,IAAP;EAEH;;;oCAEannB,KAAK;EACf,UAAI+mB,EAAE,GAAGM,cAAa,CAACr5B,IAAd,CAAmB,IAAnB,CAAT;;EACA,aAAO+4B,EAAE,CAAC/mB,GAAD,CAAT;EACH;;;oCAIauJ,OAAO;EAEjB,UAAIqc,MAAM,GAAG,KAAKA,MAAlB;;EAEA,WAAK,IAAIh3B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;EAExB,YAAIg3B,MAAM,CAACh3B,CAAD,CAAN,CAAUkzB,eAAV,CAA0BvY,KAA1B,IAAmC,CAAvC,EAA0C;EAEtC,iBAAO,KAAP;EAEH;EAEJ;;EAED,aAAO,IAAP;EAEH;;;;;;EAGL,IAAIyd,iBAAgB,GAAI,YAAY;EAEhC,MAAIvF,MAAM,GAAG,IAAIqB,MAAJ,EAAb;EAEA,SAAO,SAASkE,gBAAT,CAA0B5F,MAA1B,EAAkC;EAErC,QAAIiB,QAAQ,GAAGjB,MAAM,CAACiB,QAAtB;EAEA,QAAIA,QAAQ,CAACiF,cAAT,KAA4B,IAAhC,EACIjF,QAAQ,CAACkF,qBAAT;EAEJ9F,IAAAA,MAAM,CAACnuB,IAAP,CAAY+uB,QAAQ,CAACiF,cAArB,EACK9R,YADL,CACkB4L,MAAM,CAAC7L,WADzB;EAGA,WAAO,KAAKmM,gBAAL,CAAsBD,MAAtB,CAAP;EAEH,GAZD;EAcH,CAlBsB,EAAvB;;EAoBA,IAAIyF,iBAAgB,GAAI,YAAY;EAEhC,MAAIzF,MAAM,GAAG,IAAIqB,MAAJ,EAAb;EAEA,SAAO,SAASoE,gBAAT,CAA0BD,MAA1B,EAAkC;EAErCxF,IAAAA,MAAM,CAACP,MAAP,CAAcre,GAAd,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB;EACA4e,IAAAA,MAAM,CAAC9Y,MAAP,GAAgB,kBAAhB;EACA8Y,IAAAA,MAAM,CAACjM,YAAP,CAAoByR,MAAM,CAAC1R,WAA3B;EAEA,WAAO,KAAKmM,gBAAL,CAAsBD,MAAtB,CAAP;EAEH,GARD;EAUH,CAdsB,EAAvB;;EAgBA,IAAI4F,cAAa,GAAI,YAAY;EAE7B,MAAI9B,EAAE,GAAG,IAAIvR,OAAJ,EAAT;EAAA,MACIwR,EAAE,GAAG,IAAIxR,OAAJ,EADT;EAGA,SAAO,SAASqT,aAAT,CAAuBrnB,GAAvB,EAA4B;EAE/B,QAAI4lB,MAAM,GAAG,KAAKA,MAAlB;;EAEA,SAAK,IAAIh3B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;EAExB,UAAI+yB,KAAK,GAAGiE,MAAM,CAACh3B,CAAD,CAAlB;EAEA22B,MAAAA,EAAE,CAAC5b,CAAH,GAAOgY,KAAK,CAACC,MAAN,CAAajY,CAAb,GAAiB,CAAjB,GAAqB3J,GAAG,CAAC1O,GAAJ,CAAQqY,CAA7B,GAAiC3J,GAAG,CAACrP,GAAJ,CAAQgZ,CAAhD;EACA6b,MAAAA,EAAE,CAAC7b,CAAH,GAAOgY,KAAK,CAACC,MAAN,CAAajY,CAAb,GAAiB,CAAjB,GAAqB3J,GAAG,CAACrP,GAAJ,CAAQgZ,CAA7B,GAAiC3J,GAAG,CAAC1O,GAAJ,CAAQqY,CAAhD;EACA4b,MAAAA,EAAE,CAAC3b,CAAH,GAAO+X,KAAK,CAACC,MAAN,CAAahY,CAAb,GAAiB,CAAjB,GAAqB5J,GAAG,CAAC1O,GAAJ,CAAQsY,CAA7B,GAAiC5J,GAAG,CAACrP,GAAJ,CAAQiZ,CAAhD;EACA4b,MAAAA,EAAE,CAAC5b,CAAH,GAAO+X,KAAK,CAACC,MAAN,CAAahY,CAAb,GAAiB,CAAjB,GAAqB5J,GAAG,CAACrP,GAAJ,CAAQiZ,CAA7B,GAAiC5J,GAAG,CAAC1O,GAAJ,CAAQsY,CAAhD;EACA2b,MAAAA,EAAE,CAACxS,CAAH,GAAO4O,KAAK,CAACC,MAAN,CAAa7O,CAAb,GAAiB,CAAjB,GAAqB/S,GAAG,CAAC1O,GAAJ,CAAQyhB,CAA7B,GAAiC/S,GAAG,CAACrP,GAAJ,CAAQoiB,CAAhD;EACAyS,MAAAA,EAAE,CAACzS,CAAH,GAAO4O,KAAK,CAACC,MAAN,CAAa7O,CAAb,GAAiB,CAAjB,GAAqB/S,GAAG,CAACrP,GAAJ,CAAQoiB,CAA7B,GAAiC/S,GAAG,CAAC1O,GAAJ,CAAQyhB,CAAhD;EAEA,UAAIyU,EAAE,GAAG7F,KAAK,CAACG,eAAN,CAAsByD,EAAtB,CAAT;EACA,UAAIkC,EAAE,GAAG9F,KAAK,CAACG,eAAN,CAAsB0D,EAAtB,CAAT,CAZwB;;EAgBxB,UAAIgC,EAAE,GAAG,CAAL,IAAUC,EAAE,GAAG,CAAnB,EAAsB;EAElB,eAAO,KAAP;EAEH;EAEJ;;EAED,WAAO,IAAP;EAEH,GA9BD;EAgCH,CArCmB,EAApB;;MC1KMC;;;EACF,2BAAYC,EAAZ,EAAgB;EAAA;;EACZ,SAAKC,GAAL,GAAWD,EAAX;EACA,SAAKE,UAAL,GAAkB,EAAlB;EACH;;;;0BACGl4B,MAAM;EACN,UAAIm4B,UAAU,GAAG,KAAKD,UAAL,CAAgBl4B,IAAhB,CAAjB;;EACA,UAAIm4B,UAAU,KAAKt0B,SAAnB,EAA8B;EAC1B,eAAOs0B,UAAP;EACH;;EAEDA,MAAAA,UAAU,GAAG,KAAKF,GAAL,CAASG,YAAT,CAAsBp4B,IAAtB,CAAb;;EAEA,UAAIm4B,UAAU,KAAK,IAAnB,EAAyB;EACrB3T,QAAAA,OAAO,CAACC,IAAR,CAAa,oBAAoBzkB,IAApB,GAA2B,2BAAxC;EACH;;EAED,WAAKk4B,UAAL,CAAgBl4B,IAAhB,IAAwBm4B,UAAxB;EAEA,aAAOA,UAAP;EAGH;;;;;;ECtBL;;;;;MAMME;;;EACF,6BAAc;EAAA;;EACV;EACA,SAAKC,WAAL,GAAmB,IAAIC,OAAJ,EAAnB;EACH;;;;0BAEG9G,QAAQ;EAER,UAAIp0B,GAAG,GAAG,KAAKi7B,WAAL,CAAiBnlB,GAAjB,CAAqBse,MAArB,CAAV;;EAEA,UAAIp0B,GAAG,KAAKwG,SAAZ,EAAuB;EAEnBxG,QAAAA,GAAG,GAAG,EAAN;;EACA,aAAKi7B,WAAL,CAAiBplB,GAAjB,CAAqBue,MAArB,EAA6Bp0B,GAA7B;EAEH;;EAED,aAAOA,GAAP;EAEH;;;6BAEMo0B,QAAQ;EAEX,WAAK6G,WAAL,CAAiBE,MAAjB,CAAwB/G,MAAxB;EAEH;;;6BAEMA,QAAQlzB,KAAKsB,OAAO;EAEvB,WAAKy4B,WAAL,CAAiBnlB,GAAjB,CAAqBse,MAArB,EAA6BlzB,GAA7B,IAAoCsB,KAApC;EAEH;;;gCAES;EAEN,WAAKy4B,WAAL,GAAmB,IAAIC,OAAJ,EAAnB;EAEH;;;;;;EC3CL;;;;;;;;;;;;;;;MAgBME;;;EACF,6BAAYT,EAAZ,EAAgBU,UAAhB,EAA4B;EAAA;;EACxBA,IAAAA,UAAU,GAAGA,UAAU,IAAI,EAA3B;EACA,SAAKT,GAAL,GAAWD,EAAX,CAFwB;;EAKxB,SAAKW,WAAL,GAAmBX,EAAE,CAACY,YAAH,CAAgBZ,EAAE,CAACa,uBAAnB,CAAnB,CALwB;;EAOxB,SAAKC,mBAAL,GAA2Bd,EAAE,CAACY,YAAH,CAAgBZ,EAAE,CAACe,gCAAnB,CAA3B,CAPwB;EAUxB;EACA;EACA;;EACA,SAAKC,cAAL,GAAsBhB,EAAE,CAACY,YAAH,CAAgBZ,EAAE,CAACiB,gBAAnB,CAAtB,CAbwB;;EAexB,SAAKC,cAAL,GAAsBlB,EAAE,CAACY,YAAH,CAAgBZ,EAAE,CAACmB,yBAAnB,CAAtB,CAfwB;;EAiBxB,SAAKC,aAAL,GAAqBpB,EAAE,CAACY,YAAH,CAAgBZ,EAAE,CAACqB,kBAAnB,CAArB,CAjBwB;;EAmBxB,SAAKC,iBAAL,GAAyBtB,EAAE,CAACY,YAAH,CAAgBZ,EAAE,CAACuB,0BAAnB,CAAzB,CAnBwB;;EAqBxB,SAAKC,mBAAL,GAA2BxB,EAAE,CAACY,YAAH,CAAgBZ,EAAE,CAACyB,4BAAnB,CAA3B,CArBwB;;EAuBxB,SAAKC,WAAL,GAAmB1B,EAAE,CAACY,YAAH,CAAgBZ,EAAE,CAAC2B,mBAAnB,CAAnB,CAvBwB;;EA0BxB,SAAKC,SAAL,GAAiBlB,UAAU,CAACkB,SAAX,KAAyB/1B,SAAzB,GAAqC60B,UAAU,CAACkB,SAAhD,GAA4D,OAA7E;EACA,SAAKA,SAAL,GAAiB,KAAKC,eAAL,CAAqB,KAAKD,SAA1B,CAAjB;EACH;;;;;sCAGeA,WAAW;EACvB,UAAI5B,EAAE,GAAG,KAAKC,GAAd;EACA2B,MAAAA,SAAS,GAAGA,SAAS,IAAI,OAAzB;;EACA,UAAIA,SAAS,KAAK,OAAlB,EAA2B;EAEvB,YAAI5B,EAAE,CAAC8B,wBAAH,CAA4B9B,EAAE,CAAC+B,aAA/B,EAA8C/B,EAAE,CAACgC,UAAjD,EAA6DJ,SAA7D,GAAyE,CAAzE,IACA5B,EAAE,CAAC8B,wBAAH,CAA4B9B,EAAE,CAACiC,eAA/B,EAAgDjC,EAAE,CAACgC,UAAnD,EAA+DJ,SAA/D,GAA2E,CAD/E,EACkF;EAE9E,iBAAO,OAAP;EAEH;;EAEDA,QAAAA,SAAS,GAAG,SAAZ;EAEH;;EAED,UAAIA,SAAS,KAAK,SAAlB,EAA6B;EAEzB,YAAI5B,EAAE,CAAC8B,wBAAH,CAA4B9B,EAAE,CAAC+B,aAA/B,EAA8C/B,EAAE,CAACkC,YAAjD,EAA+DN,SAA/D,GAA2E,CAA3E,IACA5B,EAAE,CAAC8B,wBAAH,CAA4B9B,EAAE,CAACiC,eAA/B,EAAgDjC,EAAE,CAACkC,YAAnD,EAAiEN,SAAjE,GAA6E,CADjF,EACoF;EAEhF,iBAAO,SAAP;EAEH;EAEJ;;EAED,aAAO,MAAP;EAEH;;;;;;EC3EL;;;;;MAKMO;;;EACF,sBAAYnC,EAAZ,EAAgB;EAAA;;EAAA;;EACZ,SAAKA,EAAL,GAAUA,EAAV;EACA,SAAKoC,IAAL,iDAEK9Y,cAFL,EAEsB0W,EAAE,CAACqC,MAFzB,+BAGK9Y,mBAHL,EAG2ByW,EAAE,CAACsC,aAH9B,+BAIK9Y,sBAJL,EAI8BwW,EAAE,CAACuC,eAJjC,+BAMK9Y,aANL,EAMqBuW,EAAE,CAACwC,OANxB,+BAOK9Y,0BAPL,EAOkCsW,EAAE,CAACyC,sBAPrC,+BAQK9Y,yBARL,EAQiCqW,EAAE,CAAC0C,qBARpC,+BAUK9Y,YAVL,EAUoBoW,EAAE,CAAC2C,MAVvB,+BAWK9Y,yBAXL,EAWiCmW,EAAE,CAAC4C,qBAXpC,+BAYK9Y,wBAZL,EAYgCkW,EAAE,CAAC6C,oBAZnC,+BAcK9Y,gBAdL,EAcwBiW,EAAE,CAAC8C,aAd3B,+BAeKvY,qBAfL,EAe6ByV,EAAE,CAAC+C,sBAfhC,+BAgBKvY,qBAhBL,EAgB6BwV,EAAE,CAACgD,sBAhBhC,+BAiBKvY,oBAjBL,EAiB4BuV,EAAE,CAACiD,oBAjB/B,+BAmBKjZ,QAnBL,EAmBgBgW,EAAE,CAACkD,IAnBnB,+BAoBKjZ,SApBL,EAoBiB+V,EAAE,CAACmD,KApBpB,+BAqBKjZ,iBArBL,EAqByB8V,EAAE,CAACoD,cArB5B,+BAsBKjZ,OAtBL,EAsBe6V,EAAE,CAACqD,GAtBlB,+BAuBKjZ,eAvBL,EAuBuB4V,EAAE,CAACsD,YAvB1B,+BAwBKjZ,SAxBL,EAwBiB2V,EAAE,CAACuD,KAxBpB,+BA0BK7Y,WA1BL,EA0BmBsV,EAAE,CAACwD,KA1BtB,+BA2BK7Y,SA3BL,EA2BiBqV,EAAE,CAACyD,GA3BpB,+BA4BK7Y,UA5BL,EA4BkBoV,EAAE,CAAC0D,IA5BrB,+BA6BK7Y,eA7BL,EA6BuBmV,EAAE,CAAC2D,SA7B1B,+BA8BK7Y,oBA9BL,EA8B4BkV,EAAE,CAAC4D,eA9B/B,+BA+BK7Y,WA/BL,EA+BmBiV,EAAE,CAAC6D,eA/BtB,+BAgCK7Y,kBAhCL,EAgC0BgV,EAAE,CAAC8D,aAhC7B,+BAkCKtb,WAlCL,EAkCmBwX,EAAE,CAAC+D,QAlCtB,+BAmCKtb,gBAnCL,EAmCwBuX,EAAE,CAACgE,aAnC3B,+BAoCKtb,uBApCL,EAoC+BsX,EAAE,CAACiE,qBApClC,+BAsCKtb,UAtCL,EAsCkBqX,EAAE,CAACkE,IAtCrB,+BAuCKtb,SAvCL,EAuCiBoX,EAAE,CAACmE,GAvCpB,+BAwCKtb,cAxCL,EAwCsBmX,EAAE,CAACoE,SAxCzB,+BAyCKtb,sBAzCL,EAyC8BkX,EAAE,CAACqE,mBAzCjC,+BA0CKtb,cA1CL,EA0CsBiX,EAAE,CAACsE,SA1CzB,+BA2CKtb,sBA3CL,EA2C8BgX,EAAE,CAACuE,mBA3CjC,+BA4CKtb,cA5CL,EA4CsB+W,EAAE,CAACwE,SA5CzB,+BA6CKtb,sBA7CL,EA6C8B8W,EAAE,CAACyE,mBA7CjC,+BA+CKtb,cA/CL,EA+CsB6W,EAAE,CAAC0E,SA/CzB,+BAgDKtb,sBAhDL,EAgD8B4W,EAAE,CAAC2E,mBAhDjC,+BAiDKtb,sBAjDL,EAiD8B2W,EAAE,CAAC4E,kBAjDjC;EAoDH;;;;8BAEO11B,GAAG;EAEP,UAAI,KAAKkzB,IAAL,CAAUlzB,CAAV,MAAiBrD,SAArB,EAAgC,OAAO,KAAKu2B,IAAL,CAAUlzB,CAAV,CAAP;EAChC,aAAO,CAAP;EACH;;;;;;MChEC21B;;;EACF,uBAAY7E,EAAZ,EAAgB;EAAA;;EACZ,SAAKA,EAAL,GAAUA,EAAV;EACA,SAAK8E,iBAAL,GAAyB,IAAzB;EACA,SAAKC,kBAAL,GAA0B,IAAI5Z,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CAA1B;EACH;;;;;8BAEO6Z,WAAW;EACf,UAAI,KAAKF,iBAAL,KAA2BE,SAA/B,EAA0C;EAEtC,aAAKhF,EAAL,CAAQgF,SAAR,CAAkBA,SAAlB,EAA6BA,SAA7B,EAAwCA,SAAxC,EAAmDA,SAAnD;EACA,aAAKF,iBAAL,GAAyBE,SAAzB;EAEH;EAEJ;;;;+BAEQzjB,GAAG2O,GAAG1Z,GAAGH,GAAG4uB,oBAAoB;EAErC,UAAIA,kBAAkB,KAAK,IAA3B,EAAiC;EAE7B1jB,QAAAA,CAAC,IAAIlL,CAAL;EAAQ6Z,QAAAA,CAAC,IAAI7Z,CAAL;EAAQG,QAAAA,CAAC,IAAIH,CAAL;EAEnB;;EAGD,UAAIoa,KAAK,GAAG,IAAItF,OAAJ,CAAY5J,CAAZ,EAAe2O,CAAf,EAAkB1Z,CAAlB,EAAqBH,CAArB,CAAZ;;EAEA,UAAI,KAAK0uB,kBAAL,CAAwB1K,MAAxB,CAA+B5J,KAA/B,MAA0C,KAA9C,EAAqD;EAEjD,aAAKuP,EAAL,CAAQkF,UAAR,CAAmB3jB,CAAnB,EAAsB2O,CAAtB,EAAyB1Z,CAAzB,EAA4BH,CAA5B;;EACA,aAAK0uB,kBAAL,CAAwBp5B,IAAxB,CAA6B8kB,KAA7B;EAEH;;EACDA,MAAAA,KAAK,GAAG,IAAR;EAEH;;;8BAEO;EACJ,WAAKqU,iBAAL,GAAyB,IAAzB;;EACA,WAAKC,kBAAL,CAAwB7pB,GAAxB,CAA4B,CAAE,CAA9B,EAAiC,CAAjC,EAAoC,CAApC,EAAuC,CAAvC,EAFI;;EAGP;;;;;;MAMCiqB;;;EACF,uBAAYnF,EAAZ,EAAgB;EAAA;;EACZ,SAAKA,EAAL,GAAUA,EAAV;EACA,SAAKoF,iBAAL,GAAyB,IAAzB;EACA,SAAKC,kBAAL,GAA0B,IAA1B;EACA,SAAKC,iBAAL,GAAyB,IAAzB;EACA,SAAKC,OAAL,GAAe,IAAIC,MAAJ,CAAWxF,EAAX,CAAf;EACH;;;;8BAEOyF,WAAW;EACf,UAAIzF,EAAE,GAAG,KAAKA,EAAd;;EACA,UAAIyF,SAAJ,EAAe;EAEX,aAAKF,OAAL,CAAaG,MAAb,CAAoB1F,EAAE,CAAC2F,UAAvB;EAEH,OAJD,MAIO;EAEH,aAAKJ,OAAL,CAAaK,OAAb,CAAqB5F,EAAE,CAAC2F,UAAxB;EAEH;EAEJ;;;;8BAEOE,WAAW;EACf,UAAI7F,EAAE,GAAG,KAAKA,EAAd;;EACA,UAAI,KAAKsF,iBAAL,KAA2BO,SAA/B,EAA0C;EAEtC7F,QAAAA,EAAE,CAAC6F,SAAH,CAAaA,SAAb;EACA,aAAKP,iBAAL,GAAyBO,SAAzB;EAEH;EAEJ;;;+BAEQC,OAAO;EACZ,UAAI9F,EAAE,GAAG,KAAKA,EAAd;;EACA,UAAI,KAAKqF,kBAAL,KAA4BS,KAAhC,EAAuC;EAEnC9F,QAAAA,EAAE,CAAC+F,UAAH,CAAcD,KAAd;EACA,aAAKT,kBAAL,GAA0BS,KAA1B;EAEH;EAEJ;;;8BACOE,WAAW;EACf,UAAIhG,EAAE,GAAG,KAAKA,EAAd;;EAEA,UAAI,KAAKoF,iBAAL,KAA2BY,SAA/B,EAA0C;EAEtC,YAAIA,SAAJ,EAAe;EAEX,kBAAQA,SAAR;EAEI,iBAAK5e,UAAL;EAEI4Y,cAAAA,EAAE,CAACgG,SAAH,CAAahG,EAAE,CAACiG,KAAhB;EACA;;EAEJ,iBAAK5e,WAAL;EAEI2Y,cAAAA,EAAE,CAACgG,SAAH,CAAahG,EAAE,CAACkG,MAAhB;EACA;;EAEJ,iBAAK5e,SAAL;EAEI0Y,cAAAA,EAAE,CAACgG,SAAH,CAAahG,EAAE,CAACmG,IAAhB;EACA;;EAEJ,iBAAK5e,cAAL;EAEIyY,cAAAA,EAAE,CAACgG,SAAH,CAAahG,EAAE,CAACoG,MAAhB;EACA;;EAEJ,iBAAK5e,UAAL;EAEIwY,cAAAA,EAAE,CAACgG,SAAH,CAAahG,EAAE,CAACqG,KAAhB;EACA;;EAEJ,iBAAK5e,iBAAL;EAEIuY,cAAAA,EAAE,CAACgG,SAAH,CAAahG,EAAE,CAACsG,MAAhB;EACA;;EAEJ,iBAAK5e,YAAL;EAEIsY,cAAAA,EAAE,CAACgG,SAAH,CAAahG,EAAE,CAACuG,OAAhB;EACA;;EAEJ,iBAAK5e,aAAL;EAEIqY,cAAAA,EAAE,CAACgG,SAAH,CAAahG,EAAE,CAACwG,QAAhB;EACA;;EAEJ;EAEIxG,cAAAA,EAAE,CAACgG,SAAH,CAAahG,EAAE,CAACoG,MAAhB;EA5CR;EAgDH,SAlDD,MAkDO;EAEHpG,UAAAA,EAAE,CAACgG,SAAH,CAAahG,EAAE,CAACoG,MAAhB;EAEH;;EAED,aAAKhB,iBAAL,GAAyBY,SAAzB;EAEH;EAEJ;;;8BACO;EAEJ,WAAKV,iBAAL,GAAyB,IAAzB;EACA,WAAKF,iBAAL,GAAyB,IAAzB;EACA,WAAKC,kBAAL,GAA0B,IAA1B;EAEH;;;;;;MAGCoB;;;EACF,yBAAYzG,EAAZ,EAAgB;EAAA;;EACZ,SAAKA,EAAL,GAAUA,EAAV;EACA,SAAK0G,MAAL,GAAc,IAAIlB,MAAJ,CAAWxF,EAAX,CAAd;EACA,SAAK2G,oBAAL,GAA4B,IAA5B;EACH;;;;8BACOC,aAAa;EACjB,UAAI5G,EAAE,GAAG,KAAKA,EAAd;;EACA,UAAI4G,WAAJ,EAAiB;EAEb,aAAKF,MAAL,CAAYhB,MAAZ,CAAmB1F,EAAE,CAAC6G,YAAtB;EAEH,OAJD,MAIO;EAEH,aAAKH,MAAL,CAAYd,OAAZ,CAAoB5F,EAAE,CAAC6G,YAAvB;EAEH;EAEJ;;;+BAEQC,SAAS;EAEd,UAAI,KAAKH,oBAAL,KAA8BG,OAAlC,EAA2C;EAEvC,aAAK9G,EAAL,CAAQ+G,YAAR,CAAqBD,OAArB;EACA,aAAKH,oBAAL,GAA4BG,OAA5B;EAEH;EAEJ;;;8BACO;EAEJ,WAAKH,oBAAL,GAA4B,IAA5B;EACH;;;;;;EAEL,IAAIK,kBAAkB,GAAG,EAAzB;;MACMxB;;;EACF,kBAAYxF,EAAZ,EAAgB;EAAA;;EACZ,SAAKA,EAAL,GAAUA,EAAV;EACH;;;;6BACM/lB,IAAI;EACP,UAAI+sB,kBAAkB,CAAC/sB,EAAD,CAAlB,KAA2B,IAA/B,EAAqC;EAEjC,aAAK+lB,EAAL,CAAQ0F,MAAR,CAAezrB,EAAf;EACA+sB,QAAAA,kBAAkB,CAAC/sB,EAAD,CAAlB,GAAyB,IAAzB;EAEH;EACJ;;;8BACOA,IAAI;EACR,UAAI+sB,kBAAkB,CAAC/sB,EAAD,CAAlB,KAA2B,KAA/B,EAAsC;EAElC,aAAK+lB,EAAL,CAAQ4F,OAAR,CAAgB3rB,EAAhB;EACA+sB,QAAAA,kBAAkB,CAAC/sB,EAAD,CAAlB,GAAyB,KAAzB;EAEH;EACJ;;;8BACO;EACJ+sB,MAAAA,kBAAkB,GAAG,EAArB;EACH;;;;;;MAICC;;;EACF,2BAAYjH,EAAZ,EAAgBE,UAAhB,EAA2BgH,YAA3B,EAAyC;EAAA;;EACrC,SAAKlH,EAAL,GAAUA,EAAV;EACA,SAAKmH,WAAL,GAAmBjH,UAAnB;EACA,QAAIkH,mBAAmB,GAAGF,YAAY,CAAC9F,aAAvC;EAEA,SAAKiG,cAAL,GAAsB,IAAIC,UAAJ,CAAeF,mBAAf,CAAtB;EACA,SAAKG,kBAAL,GAA0B,IAAID,UAAJ,CAAeF,mBAAf,CAA1B;EACA,SAAKI,kBAAL,GAA0B,IAAIF,UAAJ,CAAeF,mBAAf,CAA1B;EAEH;;;;uCAEgB;EAEb,WAAK,IAAIngC,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG,KAAKo0B,cAAL,CAAoBtgC,MAAxC,EAAgDE,CAAC,GAAGgM,CAApD,EAAuDhM,CAAC,EAAxD,EAA4D;EAExD,aAAKogC,cAAL,CAAoBpgC,CAApB,IAAyB,CAAzB;EAEH;EAEJ;;;gDAEyB0oB,WAAW8X,kBAAkB;EAEnD,WAAKJ,cAAL,CAAoB1X,SAApB,IAAiC,CAAjC;;EAEA,UAAI,KAAK4X,kBAAL,CAAwB5X,SAAxB,MAAuC,CAA3C,EAA8C;EAE1C,aAAKqQ,EAAL,CAAQ0H,uBAAR,CAAgC/X,SAAhC;EACA,aAAK4X,kBAAL,CAAwB5X,SAAxB,IAAqC,CAArC;EAEH;;EAED,UAAI,KAAK6X,kBAAL,CAAwB7X,SAAxB,MAAuC8X,gBAA3C,EAA6D;EAEzD,YAAIE,SAAS,GAAG,KAAKR,WAAL,CAAiBhsB,GAAjB,CAAqB,wBAArB,CAAhB;;EAEAwsB,QAAAA,SAAS,CAACC,wBAAV,CAAmCjY,SAAnC,EAA8C8X,gBAA9C;EACA,aAAKD,kBAAL,CAAwB7X,SAAxB,IAAqC8X,gBAArC;EAEH;EAEJ;;;gDAEyB;EACtB,WAAK,IAAIxgC,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG,KAAKs0B,kBAAL,CAAwBxgC,MAA5C,EAAoDE,CAAC,KAAKgM,CAA1D,EAA6D,EAAEhM,CAA/D,EAAkE;EAE9D,YAAI,KAAKsgC,kBAAL,CAAwBtgC,CAAxB,MAA+B,KAAKogC,cAAL,CAAoBpgC,CAApB,CAAnC,EAA2D;EAEvD,eAAK+4B,EAAL,CAAQ6H,wBAAR,CAAiC5gC,CAAjC;EACA,eAAKsgC,kBAAL,CAAwBtgC,CAAxB,IAA6B,CAA7B;EAEH;EAEJ;EACJ;;;8BACO;EAEJ,WAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKsgC,kBAAL,CAAwBxgC,MAA5C,EAAoDE,CAAC,EAArD,EAAyD;EAErD,YAAI,KAAKsgC,kBAAL,CAAwBtgC,CAAxB,MAA+B,CAAnC,EAAsC;EAElC,eAAK+4B,EAAL,CAAQ6H,wBAAR,CAAiC5gC,CAAjC;EACA,eAAKsgC,kBAAL,CAAwBtgC,CAAxB,IAA6B,CAA7B;EAEH;EAEJ;EACJ;;;;;;MAOC6gC;;;EAEF,yBAAY9H,EAAZ,EAAgB;EAAA;;EACZ,SAAKA,EAAL,GAAUA,EAAV;EAEA,SAAK+H,qBAAL,GAA6B,IAA7B;EACA,SAAKC,gBAAL,GAAwB,IAAxB;EACA,SAAKC,gBAAL,GAAwB,IAAxB;EACA,SAAKC,0BAAL,GAAkC,IAAlC;EACA,SAAKC,qBAAL,GAA6B,IAA7B;EACA,SAAKC,qBAAL,GAA6B,IAA7B;EAEA,SAAK7C,OAAL,GAAe,IAAIC,MAAJ,CAAWxF,EAAX,CAAf;EACH;;;;kCAEWqI,UAAUC,eAAeC,UAAUC,UAAUC,oBAAoBC,eAAeC,eAAe1D,oBAAoB;EAC3H,UAAIjF,EAAE,GAAG,KAAKA,EAAd;EAEA,UAAI4I,KAAK,GAAG,IAAIzG,UAAJ,CAAenC,EAAf,CAAZ;;EAEA,UAAIqI,QAAQ,KAAKngB,UAAjB,EAA6B;EAEzB,aAAKqd,OAAL,CAAaG,MAAb,CAAoB1F,EAAE,CAAC6I,KAAvB;EAEH,OAJD,MAIO;EAEH,aAAKtD,OAAL,CAAaK,OAAb,CAAqB5F,EAAE,CAAC6I,KAAxB;EAEH;;EAED,UAAIR,QAAQ,KAAK9f,cAAjB,EAAiC;EAE7B,YAAI8f,QAAQ,KAAK,KAAKS,gBAAlB,IAAsC7D,kBAAkB,KAAK,KAAK8D,yBAAtE,EAAiG;EAE7F,kBAAQV,QAAR;EAEI,iBAAKjgB,gBAAL;EAEI,kBAAI6c,kBAAJ,EAAwB;EAEpBjF,gBAAAA,EAAE,CAACgJ,qBAAH,CAAyBhJ,EAAE,CAAC+D,QAA5B,EAAsC/D,EAAE,CAAC+D,QAAzC;EACA/D,gBAAAA,EAAE,CAACiJ,iBAAH,CAAqBjJ,EAAE,CAACmE,GAAxB,EAA6BnE,EAAE,CAACmE,GAAhC,EAAqCnE,EAAE,CAACmE,GAAxC,EAA6CnE,EAAE,CAACmE,GAAhD;EAEH,eALD,MAKO;EAEHnE,gBAAAA,EAAE,CAACsI,aAAH,CAAiBtI,EAAE,CAAC+D,QAApB;EACA/D,gBAAAA,EAAE,CAACkJ,SAAH,CAAalJ,EAAE,CAACsE,SAAhB,EAA2BtE,EAAE,CAACmE,GAA9B;EAEH;;EACD;;EAEJ,iBAAK9b,mBAAL;EAEI,kBAAI4c,kBAAJ,EAAwB;EAEpBjF,gBAAAA,EAAE,CAACgJ,qBAAH,CAAyBhJ,EAAE,CAAC+D,QAA5B,EAAsC/D,EAAE,CAAC+D,QAAzC;EACA/D,gBAAAA,EAAE,CAACiJ,iBAAH,CAAqBjJ,EAAE,CAACkE,IAAxB,EAA8BlE,EAAE,CAACkE,IAAjC,EAAuClE,EAAE,CAACqE,mBAA1C,EAA+DrE,EAAE,CAACuE,mBAAlE;EAEH,eALD,MAKO;EAEHvE,gBAAAA,EAAE,CAACsI,aAAH,CAAiBtI,EAAE,CAAC+D,QAApB;EACA/D,gBAAAA,EAAE,CAACkJ,SAAH,CAAalJ,EAAE,CAACkE,IAAhB,EAAsBlE,EAAE,CAACqE,mBAAzB;EAEH;;EACD;;EAEJ,iBAAK/b,gBAAL;EAEI,kBAAI2c,kBAAJ,EAAwB;EAEpBjF,gBAAAA,EAAE,CAACgJ,qBAAH,CAAyBhJ,EAAE,CAAC+D,QAA5B,EAAsC/D,EAAE,CAAC+D,QAAzC;EACA/D,gBAAAA,EAAE,CAACiJ,iBAAH,CAAqBjJ,EAAE,CAACkE,IAAxB,EAA8BlE,EAAE,CAACoE,SAAjC,EAA4CpE,EAAE,CAACkE,IAA/C,EAAqDlE,EAAE,CAACsE,SAAxD;EAEH,eALD,MAKO;EAEHtE,gBAAAA,EAAE,CAACsI,aAAH,CAAiBtI,EAAE,CAAC+D,QAApB;EACA/D,gBAAAA,EAAE,CAACkJ,SAAH,CAAalJ,EAAE,CAACkE,IAAhB,EAAsBlE,EAAE,CAACoE,SAAzB;EAEH;;EACD;;EAEJ;EAEI,kBAAIa,kBAAJ,EAAwB;EAEpBjF,gBAAAA,EAAE,CAACgJ,qBAAH,CAAyBhJ,EAAE,CAAC+D,QAA5B,EAAsC/D,EAAE,CAAC+D,QAAzC;EACA/D,gBAAAA,EAAE,CAACiJ,iBAAH,CAAqBjJ,EAAE,CAACmE,GAAxB,EAA6BnE,EAAE,CAACuE,mBAAhC,EAAqDvE,EAAE,CAACmE,GAAxD,EAA6DnE,EAAE,CAACuE,mBAAhE;EAEH,eALD,MAKO;EAEHvE,gBAAAA,EAAE,CAACgJ,qBAAH,CAAyBhJ,EAAE,CAAC+D,QAA5B,EAAsC/D,EAAE,CAAC+D,QAAzC;EACA/D,gBAAAA,EAAE,CAACiJ,iBAAH,CAAqBjJ,EAAE,CAACsE,SAAxB,EAAmCtE,EAAE,CAACuE,mBAAtC,EAA2DvE,EAAE,CAACmE,GAA9D,EAAmEnE,EAAE,CAACuE,mBAAtE;EAEH;;EA3DT;EA+DH;;EAED,aAAKwD,qBAAL,GAA6B,IAA7B;EACA,aAAKC,gBAAL,GAAwB,IAAxB;EACA,aAAKC,gBAAL,GAAwB,IAAxB;EACA,aAAKC,0BAAL,GAAkC,IAAlC;EACA,aAAKC,qBAAL,GAA6B,IAA7B;EACA,aAAKC,qBAAL,GAA6B,IAA7B;EAGH,OA7ED,MA6EO;EAEHK,QAAAA,kBAAkB,GAAGA,kBAAkB,IAAIH,aAA3C;EACAI,QAAAA,aAAa,GAAGA,aAAa,IAAIH,QAAjC;EACAI,QAAAA,aAAa,GAAGA,aAAa,IAAIH,QAAjC;;EAEA,YAAIF,aAAa,KAAK,KAAKP,qBAAvB,IAAgDU,kBAAkB,KAAK,KAAKP,0BAAhF,EAA4G;EAExGlI,UAAAA,EAAE,CAACgJ,qBAAH,CAAyBJ,KAAK,CAACO,OAAN,CAAcb,aAAd,CAAzB,EAAuDM,KAAK,CAACO,OAAN,CAAcV,kBAAd,CAAvD;EAEA,eAAKV,qBAAL,GAA6BO,aAA7B;EACA,eAAKJ,0BAAL,GAAkCO,kBAAlC;EAEH;;EAED,YAAIF,QAAQ,KAAK,KAAKP,gBAAlB,IAAsCQ,QAAQ,KAAK,KAAKP,gBAAxD,IAA4ES,aAAa,KAAK,KAAKP,qBAAnG,IAA4HQ,aAAa,KAAK,KAAKP,qBAAvJ,EAA8K;EAE1KpI,UAAAA,EAAE,CAACiJ,iBAAH,CAAqBL,KAAK,CAACO,OAAN,CAAcZ,QAAd,CAArB,EAA8CK,KAAK,CAACO,OAAN,CAAcX,QAAd,CAA9C,EAAuEI,KAAK,CAACO,OAAN,CAAcT,aAAd,CAAvE,EAAqGE,KAAK,CAACO,OAAN,CAAcR,aAAd,CAArG;EAEA,eAAKX,gBAAL,GAAwBO,QAAxB;EACA,eAAKN,gBAAL,GAAwBO,QAAxB;EACA,eAAKL,qBAAL,GAA6BO,aAA7B;EACA,eAAKN,qBAAL,GAA6BO,aAA7B;EAEH;EAEJ;;EAED,WAAKG,gBAAL,GAAwBT,QAAxB;EACA,WAAKU,yBAAL,GAAiC9D,kBAAjC;EACA2D,MAAAA,KAAK,GAAG,IAAR;EACH;;;8BACO;EACJ,WAAKb,qBAAL,GAA6B,IAA7B;EACA,WAAKC,gBAAL,GAAwB,IAAxB;EACA,WAAKC,gBAAL,GAAwB,IAAxB;EACA,WAAKC,0BAAL,GAAkC,IAAlC;EACA,WAAKC,qBAAL,GAA6B,IAA7B;EACA,WAAKC,qBAAL,GAA6B,IAA7B;EACH;;;;;;MAGCgB;;;EACF,wBAAYpJ,EAAZ,EAAekH,YAAf,EAA6B;EAAA;;EACzB,SAAKlH,EAAL,GAAUA,EAAV;EACA,SAAKqJ,aAAL,GAAqBnC,YAArB;EACA,SAAKoC,mBAAL,GAA2B,IAA3B;EACA,SAAKC,qBAAL,GAA6B,EAA7B;EACA,SAAKD,mBAAL,GAA2B,IAA3B;EAEA,SAAKE,cAAL,GAAsB,EAAtB;EAEA,SAAKA,cAAL,CAAoBxJ,EAAE,CAACyJ,UAAvB,IAAqC,KAAKC,aAAL,CAAmB1J,EAAE,CAACyJ,UAAtB,EAAkCzJ,EAAE,CAACyJ,UAArC,EAAiD,CAAjD,CAArC;EACA,SAAKD,cAAL,CAAoBxJ,EAAE,CAAC2J,gBAAvB,IAA2C,KAAKD,aAAL,CAAmB1J,EAAE,CAAC2J,gBAAtB,EAAwC3J,EAAE,CAAC4J,2BAA3C,EAAwE,CAAxE,CAA3C;EAEH;;;;oCAEa76B,MAAMnE,QAAQosB,OAAO;EAC/B,UAAIgJ,EAAE,GAAG,KAAKA,EAAd;EACA,UAAIxxB,IAAI,GAAG,IAAI84B,UAAJ,CAAe,CAAf,CAAX,CAF+B;;EAG/B,UAAIuC,OAAO,GAAG7J,EAAE,CAAC0J,aAAH,EAAd;EAEA1J,MAAAA,EAAE,CAAC8J,WAAH,CAAe/6B,IAAf,EAAqB86B,OAArB;EACA7J,MAAAA,EAAE,CAAC+J,aAAH,CAAiBh7B,IAAjB,EAAuBixB,EAAE,CAACgK,kBAA1B,EAA8ChK,EAAE,CAACwC,OAAjD;EACAxC,MAAAA,EAAE,CAAC+J,aAAH,CAAiBh7B,IAAjB,EAAuBixB,EAAE,CAACiK,kBAA1B,EAA8CjK,EAAE,CAACwC,OAAjD;;EAEA,WAAK,IAAIv7B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+vB,KAApB,EAA2B/vB,CAAC,EAA5B,EAAgC;EAE5B+4B,QAAAA,EAAE,CAACkK,UAAH,CAAct/B,MAAM,GAAG3D,CAAvB,EAA0B,CAA1B,EAA6B+4B,EAAE,CAAC0D,IAAhC,EAAsC,CAAtC,EAAyC,CAAzC,EAA4C,CAA5C,EAA+C1D,EAAE,CAAC0D,IAAlD,EAAwD1D,EAAE,CAAC8C,aAA3D,EAA0Et0B,IAA1E;EAEH;;EAED,aAAOq7B,OAAP;EAEH;;;oCAEaM,WAAW;EACrB,UAAInK,EAAE,GAAG,KAAKA,EAAd;EACA,UAAIqJ,aAAa,GAAG,KAAKA,aAAzB;EACA,UAAIe,YAAY,GAAGf,aAAa,CAACvI,mBAAjC;EAEA,UAAIqJ,SAAS,KAAKt+B,SAAlB,EAA6Bs+B,SAAS,GAAGnK,EAAE,CAACqK,QAAH,GAAcD,YAAd,GAA6B,CAAzC;;EAE7B,UAAI,KAAKd,mBAAL,KAA6Ba,SAAjC,EAA4C;EAExCnK,QAAAA,EAAE,CAACsK,aAAH,CAAiBH,SAAjB;EACA,aAAKb,mBAAL,GAA2Ba,SAA3B;EAEH;EAEJ;;;kCAEWI,WAAWC,cAAc;EACjC,UAAIxK,EAAE,GAAG,KAAKA,EAAd;;EACA,UAAI,KAAKsJ,mBAAL,KAA6B,IAAjC,EAAuC;EAEnC,aAAKgB,aAAL;EAEH;;EAED,UAAIG,YAAY,GAAG,KAAKlB,qBAAL,CAA2B,KAAKD,mBAAhC,CAAnB;;EAEA,UAAImB,YAAY,KAAK5+B,SAArB,EAAgC;EAE5B4+B,QAAAA,YAAY,GAAG;EAAE17B,UAAAA,IAAI,EAAElD,SAAR;EAAmBg+B,UAAAA,OAAO,EAAEh+B;EAA5B,SAAf;EACA,aAAK09B,qBAAL,CAA2B,KAAKD,mBAAhC,IAAuDmB,YAAvD;EAEH;;EAED,UAAIA,YAAY,CAAC17B,IAAb,KAAsBw7B,SAAtB,IAAmCE,YAAY,CAACZ,OAAb,KAAyBW,YAAhE,EAA8E;EAE1ExK,QAAAA,EAAE,CAAC8J,WAAH,CAAeS,SAAf,EAA0BC,YAAY,IAAI,KAAKhB,cAAL,CAAoBe,SAApB,CAA1C;EAEAE,QAAAA,YAAY,CAAC17B,IAAb,GAAoBw7B,SAApB;EACAE,QAAAA,YAAY,CAACZ,OAAb,GAAuBW,YAAvB;EAEH;EAEJ;;;mCACY;EACT,UAAIxK,EAAE,GAAG,KAAKA,EAAd;;EACA,UAAI;EACAA,QAAAA,EAAE,CAACkK,UAAH,CAAc1gC,KAAd,CAAoBw2B,EAApB,EAAwB71B,SAAxB;EAEH,OAHD,CAGE,OAAOmnB,KAAP,EAAc;EACZ9E,QAAAA,OAAO,CAAC8E,KAAR,CAAc,aAAd,EAA6BA,KAA7B;EAEH;EAEJ;;;8BACO;EACJ,WAAKgY,mBAAL,GAA2B,IAA3B;EACA,WAAKC,qBAAL,GAA6B,EAA7B;EACA,WAAKD,mBAAL,GAA2B,IAA3B;EACH;;;;;;EAGL,SAASoB,qBAAT,CAA+B1K,EAA/B,EAAmC;EAC/B,MAAI2K,kBAAkB,GAAG,KAAzB;EACA,MAAI9jB,OAAO,GAAG,CAAd;EACA,MAAI+jB,SAAS,GAAG5K,EAAE,CAACY,YAAH,CAAgBZ,EAAE,CAAC6K,OAAnB,CAAhB;;EAEA,MAAID,SAAS,CAAC9kC,OAAV,CAAkB,OAAlB,MAA+B,CAAE,CAArC,EAAwC;EAEpC+gB,IAAAA,OAAO,GAAGxe,UAAU,CAAC,kBAAkBmoB,IAAlB,CAAuBoa,SAAvB,EAAkC,CAAlC,CAAD,CAApB;EACAD,IAAAA,kBAAkB,GAAI9jB,OAAO,IAAI,GAAjC;EAEH,GALD,MAKO,IAAI+jB,SAAS,CAAC9kC,OAAV,CAAkB,WAAlB,MAAmC,CAAE,CAAzC,EAA4C;EAE/C+gB,IAAAA,OAAO,GAAGxe,UAAU,CAAC,uBAAuBmoB,IAAvB,CAA4Boa,SAA5B,EAAuC,CAAvC,CAAD,CAApB;EACAD,IAAAA,kBAAkB,GAAI9jB,OAAO,IAAI,GAAjC;EAEH;;EACD,SAAO8jB,kBAAP;EACH;;MAKKG;;;EACF,sBAAY9K,EAAZ,EAAgBE,UAAhB,EAA2BgH,YAA3B,EAAyC;EAAA;;EACrC,SAAKlH,EAAL,GAAUA,EAAV;EAEA,SAAK+K,OAAL,GAAe;EACXta,MAAAA,KAAK,EAAE,IAAIoU,WAAJ,CAAgB7E,EAAhB,CADI;EAEX8F,MAAAA,KAAK,EAAE,IAAIX,WAAJ,CAAgBnF,EAAhB,CAFI;EAGX8G,MAAAA,OAAO,EAAE,IAAIL,aAAJ,CAAkBzG,EAAlB;EAHE,KAAf;EAMA,SAAKgL,gBAAL,GAAwB,IAAI/D,eAAJ,CAAoBjH,EAApB,EAAwBE,UAAxB,EAAmCgH,YAAnC,CAAxB;EACA,SAAK3B,OAAL,GAAe,IAAIC,MAAJ,CAAWxF,EAAX,CAAf;EAEA,SAAKiL,eAAL,GAAuB,IAAvB;EACA,SAAKC,cAAL,GAAsB,IAAIpD,aAAJ,CAAkB9H,EAAlB,CAAtB;EACA,SAAKmL,iBAAL,GAAyB,IAAzB;EAEA,SAAKC,2BAAL,GAAmC,IAAnC;EACA,SAAKC,0BAAL,GAAkC,IAAlC;EAEA,SAAKC,iBAAL,GAAyB,IAAzB;EAEA,SAAKC,aAAL,GAAqB,IAAInC,YAAJ,CAAiBpJ,EAAjB,EAAoBkH,YAApB,CAArB;EACA,SAAKsE,gBAAL,GAAwB,IAAIrgB,OAAJ,EAAxB;;EAEA,SAAKsgB,UAAL,CAAgBzL,EAAhB;EAEH;;;;iCACUA,IAAI;EAEX,WAAK+K,OAAL,CAAata,KAAb,CAAmBib,QAAnB,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC;EACA,WAAKX,OAAL,CAAajF,KAAb,CAAmB4F,QAAnB,CAA4B,CAA5B;EACA,WAAKX,OAAL,CAAajE,OAAb,CAAqB4E,QAArB,CAA8B,CAA9B;;EAEA,WAAKnG,OAAL,CAAaG,MAAb,CAAoB1F,EAAE,CAAC2F,UAAvB;;EACA,WAAKoF,OAAL,CAAajF,KAAb,CAAmB6F,OAAnB,CAA2BpkB,cAA3B;EAEA,WAAKqkB,YAAL,CAAkB,KAAlB;EACA,WAAKC,WAAL,CAAiBhkB,YAAjB;;EACA,WAAK0d,OAAL,CAAaG,MAAb,CAAoB1F,EAAE,CAAC8L,SAAvB;;EAEA,WAAKvG,OAAL,CAAaG,MAAb,CAAoB1F,EAAE,CAAC6I,KAAvB;;EACA,WAAKkD,WAAL,CAAiB5jB,cAAjB;EACH;;;uCAEgB;EACb,WAAK6iB,gBAAL,CAAsBgB,cAAtB;EACH;;;sCACerc,WAAW;EACvB,WAAKqb,gBAAL,CAAsBiB,yBAAtB,CAAgDtc,SAAhD,EAA0D,CAA1D;EACH;;;gDACyB;EACtB,WAAKqb,gBAAL,CAAsBkB,uBAAtB;EACH;;;gDAEyBvc,WAAW8X,kBAAkB;EACnD,WAAKuD,gBAAL,CAAsBiB,yBAAtB,CAAgDtc,SAAhD,EAA2D8X,gBAA3D;EACH;;;6BAEMxtB,IAAI;EACP,WAAKsrB,OAAL,CAAaG,MAAb,CAAoBzrB,EAApB;EACH;;;8BACOA,IAAI;EACR,WAAKsrB,OAAL,CAAaK,OAAb,CAAqB3rB,EAArB;EACH;;;iCAEUkyB,SAAS;EAEhB,UAAI,KAAKlB,eAAL,KAAyBkB,OAA7B,EAAsC;EAElC,aAAKnM,EAAL,CAAQoM,UAAR,CAAmBD,OAAnB;EAEA,aAAKlB,eAAL,GAAuBkB,OAAvB;EAEA,eAAO,IAAP;EAEH;;EAED,aAAO,KAAP;EAEH;;;kCAEW9D,UAAUC,eAAeC,UAAUC,UAAUC,oBAAoBC,eAAeC,eAAe1D,oBAAoB;EAC3H,WAAKiG,cAAL,CAAoBa,WAApB,CAAgC1D,QAAhC,EAA0CC,aAA1C,EAAyDC,QAAzD,EAAmEC,QAAnE,EAA6EC,kBAA7E,EAAiGC,aAAjG,EAAgHC,aAAhH,EAA+H1D,kBAA/H;EACH;;;kCAEWoH,UAAUC,aAAa;EAC/B,UAAItM,EAAE,GAAG,KAAKA,EAAd;EACA,UAAIuM,WAAW,GAAG,KAAKxB,OAAL,CAAajF,KAA/B;EACA,UAAI0G,WAAW,GAAG,KAAKzB,OAAL,CAAata,KAA/B,CAH+B;;EAK/B4b,MAAAA,QAAQ,CAACI,IAAT,KAAkBxkB,UAAlB,GACM,KAAKsd,OAAL,CAAaK,OAAb,CAAqB5F,EAAE,CAAC8L,SAAxB,CADN,GAEM,KAAKvG,OAAL,CAAaG,MAAb,CAAoB1F,EAAE,CAAC8L,SAAvB,CAFN;EAIA,UAAIY,SAAS,GAAIL,QAAQ,CAACI,IAAT,KAAkBzkB,QAAnC;EACA,UAAIskB,WAAJ,EAAiBI,SAAS,GAAG,CAACA,SAAb;EAEjB,WAAKd,YAAL,CAAkBc,SAAlB;EAEAL,MAAAA,QAAQ,CAACM,WAAT,KAAyB,IAAzB,GACM,KAAKZ,WAAL,CAAiBM,QAAQ,CAAChE,QAA1B,EAAoCgE,QAAQ,CAAC/D,aAA7C,EAA4D+D,QAAQ,CAAC9D,QAArE,EAA+E8D,QAAQ,CAAC7D,QAAxF,EAAkG6D,QAAQ,CAAC5D,kBAA3G,EAA+H4D,QAAQ,CAAC3D,aAAxI,EAAuJ2D,QAAQ,CAAC1D,aAAhK,EAA+K0D,QAAQ,CAACpH,kBAAxL,CADN,GAEM,KAAK8G,WAAL,CAAiB7jB,UAAjB,CAFN;EAIAqkB,MAAAA,WAAW,CAACZ,OAAZ,CAAoBU,QAAQ,CAACrG,SAA7B;EACAuG,MAAAA,WAAW,CAACK,OAAZ,CAAoBP,QAAQ,CAAC5G,SAA7B;EACA8G,MAAAA,WAAW,CAACM,OAAZ,CAAoBR,QAAQ,CAACS,UAA7B;EACAN,MAAAA,WAAW,CAACK,OAAZ,CAAoBR,QAAQ,CAACU,UAA7B;EAEA,WAAKC,gBAAL,CAAsBX,QAAQ,CAACY,aAA/B,EAA8CZ,QAAQ,CAACa,mBAAvD,EAA4Eb,QAAQ,CAACc,kBAArF;EAEH;;;mCAEYT,WAAW;EACpB,UAAI1M,EAAE,GAAG,KAAKA,EAAd;;EAEA,UAAI,KAAKmL,iBAAL,KAA2BuB,SAA/B,EAA0C;EAEtC,YAAIA,SAAJ,EAAe;EAEX1M,UAAAA,EAAE,CAACoN,SAAH,CAAapN,EAAE,CAACqN,EAAhB;EAEH,SAJD,MAIO;EAEHrN,UAAAA,EAAE,CAACoN,SAAH,CAAapN,EAAE,CAACsN,GAAhB;EAEH;;EAED,aAAKnC,iBAAL,GAAyBuB,SAAzB;EAEH;EACJ;;;uCAEgBO,eAAeM,QAAQC,OAAO;EAE3C,UAAIxN,EAAE,GAAG,KAAKA,EAAd;;EAEA,UAAIiN,aAAJ,EAAmB;EAEf,aAAK1H,OAAL,CAAaG,MAAb,CAAoB1F,EAAE,CAACyN,mBAAvB;;EAEA,YAAI,KAAKrC,2BAAL,KAAqCmC,MAArC,IAA+C,KAAKlC,0BAAL,KAAoCmC,KAAvF,EAA8F;EAE1FxN,UAAAA,EAAE,CAACiN,aAAH,CAAiBM,MAAjB,EAAyBC,KAAzB;EAEA,eAAKpC,2BAAL,GAAmCmC,MAAnC;EACA,eAAKlC,0BAAL,GAAkCmC,KAAlC;EAEH;EAEJ,OAbD,MAaO;EAEH,aAAKjI,OAAL,CAAaK,OAAb,CAAqB5F,EAAE,CAACyN,mBAAxB;EAEH;EAEJ;;;kCACWC,UAAU;EAElB,UAAI1N,EAAE,GAAG,KAAKA,EAAd;;EAEA,UAAI0N,QAAQ,KAAK9lB,YAAjB,EAA+B;EAE3B,aAAK2d,OAAL,CAAaG,MAAb,CAAoB1F,EAAE,CAAC8L,SAAvB;;EAEA,YAAI4B,QAAQ,KAAK,KAAKC,gBAAtB,EAAwC;EAEpC,cAAID,QAAQ,KAAK7lB,YAAjB,EAA+B;EAE3BmY,YAAAA,EAAE,CAAC0N,QAAH,CAAY1N,EAAE,CAAC4N,IAAf;EAEH,WAJD,MAIO,IAAIF,QAAQ,KAAK5lB,aAAjB,EAAgC;EAEnCkY,YAAAA,EAAE,CAAC0N,QAAH,CAAY1N,EAAE,CAAC6N,KAAf;EAEH,WAJM,MAIA;EAEH7N,YAAAA,EAAE,CAAC0N,QAAH,CAAY1N,EAAE,CAAC8N,cAAf;EAEH;EAEJ;EAEJ,OAtBD,MAsBO;EAEH,aAAKvI,OAAL,CAAaK,OAAb,CAAqB5F,EAAE,CAAC8L,SAAxB;EAEH;;EAED,WAAK6B,gBAAL,GAAwBD,QAAxB;EAEH;EAED;EACA;;;;mCACapzB,OAAO;EAEhB,UAAIA,KAAK,KAAK,KAAKgxB,iBAAnB,EAAsC;EAElC,YAAIZ,qBAAqB,CAAC,KAAK1K,EAAN,CAAzB,EAAoC,KAAKA,EAAL,CAAQ+N,SAAR,CAAkBzzB,KAAlB;EAEpC,aAAKgxB,iBAAL,GAAyBhxB,KAAzB;EAEH;EAEJ;;;oCAEa6vB,WAAW;EACrB,WAAKoB,aAAL,CAAmBjB,aAAnB,CAAiCH,SAAjC;EACH;;;kCAEWI,WAAWC,cAAc;EACjC,WAAKe,aAAL,CAAmBzB,WAAnB,CAA+BS,SAA/B,EAA0CC,YAA1C;EACH;;;mCACY;EACT,WAAKe,aAAL,CAAmBrB,UAAnB,CAA8B1gC,KAA9B,CAAoC,IAApC,EAA0CW,SAA1C;EACH;;;+BAEQ6jC,WAAU;EACf,UAAIhO,EAAE,GAAG,KAAKA,EAAd;;EACA,UAAI,KAAKwL,gBAAL,CAAsBnR,MAAtB,CAA6B2T,SAA7B,MAA2C,KAA/C,EAAsD;EAElDhO,QAAAA,EAAE,CAACgO,QAAH,CAAYA,SAAQ,CAAChsB,CAArB,EAAwBgsB,SAAQ,CAAC/rB,CAAjC,EAAoC+rB,SAAQ,CAAC5iB,CAA7C,EAAgD4iB,SAAQ,CAAC3iB,CAAzD;;EACA,aAAKmgB,gBAAL,CAAsB7/B,IAAtB,CAA2BqiC,SAA3B;EACH;EAEJ;;;8BACO;EAEJ,WAAKhD,gBAAL,CAAsBiD,KAAtB;;EAEA,WAAK1I,OAAL,CAAa0I,KAAb;;EAEA,WAAK1C,aAAL,CAAmB0C,KAAnB;;EAGA,WAAKhD,eAAL,GAAuB,IAAvB;;EAEA,WAAKC,cAAL,CAAoB+C,KAApB;;EAGA,WAAK9C,iBAAL,GAAyB,IAAzB;EACA,WAAKwC,gBAAL,GAAwB,IAAxB;EAEA,WAAK5C,OAAL,CAAata,KAAb,CAAmBwd,KAAnB;EACA,WAAKlD,OAAL,CAAajF,KAAb,CAAmBmI,KAAnB;EACA,WAAKlD,OAAL,CAAajE,OAAb,CAAqBmH,KAArB;EAEH;;;;;;ECpzBL;;;;;;MAOMC;;;EAEF,2BAAYlO,EAAZ,EAAgB;EAAA;;EACZ,SAAKmO,QAAL,GAAgB,IAAI5N,OAAJ,EAAhB;EACA,SAAKP,EAAL,GAAUA,EAAV;EACH;EAGD;;;;;mCACarQ,WAAWye,YAAY;EAChC,UAAIpO,EAAE,GAAG,KAAKA,EAAd;EACA,UAAIv4B,KAAK,GAAGkoB,SAAS,CAACloB,KAAtB;EACA,UAAI4mC,KAAK,GAAG1e,SAAS,CAAC2e,OAAV,GAAoBtO,EAAE,CAACuO,YAAvB,GAAsCvO,EAAE,CAACwO,WAArD;EAEA,UAAIC,MAAM,GAAGzO,EAAE,CAAC0O,YAAH,EAAb;EAEA1O,MAAAA,EAAE,CAAC2O,UAAH,CAAcP,UAAd,EAA0BK,MAA1B;EACAzO,MAAAA,EAAE,CAAC4O,UAAH,CAAcR,UAAd,EAA0B3mC,KAA1B,EAAiC4mC,KAAjC;EAEA1e,MAAAA,SAAS,CAACkf,gBAAV;EAEA,UAAI9/B,IAAI,GAAG+/B,gBAAgB,CAAC9O,EAAD,EAAKv4B,KAAL,CAA3B;EAEA,aAAO;EACHgnC,QAAAA,MAAM,EAANA,MADG;EAEH1/B,QAAAA,IAAI,EAAJA,IAFG;EAGHggC,QAAAA,eAAe,EAAEtnC,KAAK,CAACunC,iBAHpB;EAIHnoB,QAAAA,OAAO,EAAE8I,SAAS,CAAC9I;EAJhB,OAAP;EAOH;;;mCAEY4nB,QAAQ9e,WAAWye,YAAY;EACxC,UAAIpO,EAAE,GAAG,KAAKA,EAAd;EACA,UAAIv4B,KAAK,GAAGkoB,SAAS,CAACloB,KAAtB;EACA,UAAIwnC,WAAW,GAAGtf,SAAS,CAACsf,WAA5B;EAEAjP,MAAAA,EAAE,CAAC2O,UAAH,CAAcP,UAAd,EAA0BK,MAA1B;;EAEA,UAAI9e,SAAS,CAAC2e,OAAV,KAAsB,KAA1B,EAAiC;EAE7BtO,QAAAA,EAAE,CAAC4O,UAAH,CAAcR,UAAd,EAA0B3mC,KAA1B,EAAiCu4B,EAAE,CAACwO,WAApC;EAEH,OAJD,MAIO,IAAIS,WAAW,CAACjY,KAAZ,KAAsB,CAAE,CAA5B,EAA+B;EAElC;EAEAgJ,QAAAA,EAAE,CAACkP,aAAH,CAAiBd,UAAjB,EAA6B,CAA7B,EAAgC3mC,KAAhC;EAEH,OANM,MAMA,IAAIwnC,WAAW,CAACjY,KAAZ,KAAsB,CAA1B,EAA6B;EAEhCxK,QAAAA,OAAO,CAAC8E,KAAR,CAAc,6JAAd;EAEH,OAJM,MAIA;EAEH0O,QAAAA,EAAE,CAACkP,aAAH,CAAiBd,UAAjB,EAA6Ba,WAAW,CAAC72B,MAAZ,GAAqB3Q,KAAK,CAACunC,iBAAxD,EACIvnC,KAAK,CAAC0nC,QAAN,CAAeF,WAAW,CAAC72B,MAA3B,EAAmC62B,WAAW,CAAC72B,MAAZ,GAAqB62B,WAAW,CAACjY,KAApE,CADJ;EAGAiY,QAAAA,WAAW,CAACjY,KAAZ,GAAoB,CAAE,CAAtB,CALG;EAON;EAEJ;;;0BAGGrH,WAAW;EAEX,UAAIA,SAAS,CAACyf,4BAAd,EAA4Czf,SAAS,GAAGA,SAAS,CAACnhB,IAAtB;EAE5C,aAAO,KAAK2/B,QAAL,CAAchzB,GAAd,CAAkBwU,SAAlB,CAAP;EAEH;;;6BAEMA,WAAW;EACd,UAAIqQ,EAAE,GAAG,KAAKA,EAAd;EACA,UAAIrQ,SAAS,CAACyf,4BAAd,EAA4Czf,SAAS,GAAGA,SAAS,CAACnhB,IAAtB;;EAE5C,UAAIA,IAAI,GAAG,KAAK2/B,QAAL,CAAchzB,GAAd,CAAkBwU,SAAlB,CAAX;;EAEA,UAAInhB,IAAJ,EAAU;EAENwxB,QAAAA,EAAE,CAACqP,YAAH,CAAgB7gC,IAAI,CAACigC,MAArB;;EAEA,aAAKN,QAAL,CAAc3N,MAAd,CAAqB7Q,SAArB;EAEH;EAEJ;;;6BAEMA,WAAWye,YAAY;EAE1B,UAAIze,SAAS,CAACyf,4BAAd,EAA4Czf,SAAS,GAAGA,SAAS,CAACnhB,IAAtB;;EAE5C,UAAIA,IAAI,GAAG,KAAK2/B,QAAL,CAAchzB,GAAd,CAAkBwU,SAAlB,CAAX;;EAEA,UAAInhB,IAAI,KAAK3C,SAAb,EAAwB;EAEpB,aAAKsiC,QAAL,CAAcjzB,GAAd,CAAkByU,SAAlB,EAA6B,KAAK+e,YAAL,CAAkB/e,SAAlB,EAA6Bye,UAA7B,CAA7B;EAEH,OAJD,MAIO,IAAI5/B,IAAI,CAACqY,OAAL,GAAe8I,SAAS,CAAC9I,OAA7B,EAAsC;EAEzC,aAAKyoB,YAAL,CAAkB9gC,IAAI,CAACigC,MAAvB,EAA+B9e,SAA/B,EAA0Cye,UAA1C;EAEA5/B,QAAAA,IAAI,CAACqY,OAAL,GAAe8I,SAAS,CAAC9I,OAAzB;EAEH;EAEJ;;;;;;;EAIL,SAASioB,gBAAT,CAA0B9O,EAA1B,EAA8Bv4B,KAA9B,EAAqC;EAEjC,MAAIsH,IAAI,GAAGixB,EAAE,CAACuD,KAAd;;EAEA,MAAI97B,KAAK,YAAY8nC,YAArB,EAAmC;EAE/BxgC,IAAAA,IAAI,GAAGixB,EAAE,CAACuD,KAAV;EAEH,GAJD,MAIO,IAAI97B,KAAK,YAAY+nC,YAArB,EAAmC;EAEtChjB,IAAAA,OAAO,CAACC,IAAR,CAAa,gEAAb;EAEH,GAJM,MAIA,IAAIhlB,KAAK,YAAYgoC,WAArB,EAAkC;EAErC1gC,IAAAA,IAAI,GAAGixB,EAAE,CAACoD,cAAV;EAEH,GAJM,MAIA,IAAI37B,KAAK,YAAYioC,UAArB,EAAiC;EAEpC3gC,IAAAA,IAAI,GAAGixB,EAAE,CAACmD,KAAV;EAEH,GAJM,MAIA,IAAI17B,KAAK,YAAYkoC,WAArB,EAAkC;EAErC5gC,IAAAA,IAAI,GAAGixB,EAAE,CAACsD,YAAV;EAEH,GAJM,MAIA,IAAI77B,KAAK,YAAYmoC,UAArB,EAAiC;EAEpC7gC,IAAAA,IAAI,GAAGixB,EAAE,CAACqD,GAAV;EAEH,GAJM,MAIA,IAAI57B,KAAK,YAAYooC,SAArB,EAAgC;EAEnC9gC,IAAAA,IAAI,GAAGixB,EAAE,CAACkD,IAAV;EAEH,GAJM,MAIA,IAAIz7B,KAAK,YAAY6/B,UAArB,EAAiC;EAEpCv4B,IAAAA,IAAI,GAAGixB,EAAE,CAAC8C,aAAV;EAEH;;EACD,SAAO/zB,IAAP;EACH;;EC5JD;;;;;MAMM+gC;;;EACL,mBAAY9tB,CAAZ,EAAeC,CAAf,EAAkB;EAAA;;EACjB,SAAKD,CAAL,GAASA,CAAC,IAAI,CAAd;EACA,SAAKC,CAAL,GAASA,CAAC,IAAI,CAAd;EACA,SAAK8tB,SAAL,GAAiB,IAAjB;EACA;;;;0BA6BG/tB,GAAGC,GAAG;EAET,WAAKD,CAAL,GAASA,CAAT;EACA,WAAKC,CAAL,GAASA,CAAT;EAEA,aAAO,IAAP;EAEA;;;8BACO;EAEP,aAAO,IAAI,KAAKnW,WAAT,CAAqB,KAAKkW,CAA1B,EAA6B,KAAKC,CAAlC,CAAP;EAEA;;;2BAEIuJ,GAAG;EAEP,WAAKxJ,CAAL,GAASwJ,CAAC,CAACxJ,CAAX;EACA,WAAKC,CAAL,GAASuJ,CAAC,CAACvJ,CAAX;EAEA,aAAO,IAAP;EACA;;;0BAEGuJ,GAAGH,GAAG;EAET,UAAIA,CAAC,KAAKxf,SAAV,EAAqB;EAEpB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,iFAAb;EACA,eAAO,KAAKC,UAAL,CAAgBlB,CAAhB,EAAmBH,CAAnB,CAAP;EAEA;;EAED,WAAKrJ,CAAL,IAAUwJ,CAAC,CAACxJ,CAAZ;EACA,WAAKC,CAAL,IAAUuJ,CAAC,CAACvJ,CAAZ;EAEA,aAAO,IAAP;EAEA;;;gCAES0K,GAAG;EAEZ,WAAK3K,CAAL,IAAU2K,CAAV;EACA,WAAK1K,CAAL,IAAU0K,CAAV;EAEA,aAAO,IAAP;EAEA;;;iCAEUtW,GAAGG,GAAG;EAEhB,WAAKwL,CAAL,GAAS3L,CAAC,CAAC2L,CAAF,GAAMxL,CAAC,CAACwL,CAAjB;EACA,WAAKC,CAAL,GAAS5L,CAAC,CAAC4L,CAAF,GAAMzL,CAAC,CAACyL,CAAjB;EAEA,aAAO,IAAP;EAEA;;;sCAEeuJ,GAAGmB,GAAG;EAErB,WAAK3K,CAAL,IAAUwJ,CAAC,CAACxJ,CAAF,GAAM2K,CAAhB;EACA,WAAK1K,CAAL,IAAUuJ,CAAC,CAACvJ,CAAF,GAAM0K,CAAhB;EAEA,aAAO,IAAP;EAEA;;;0BAEGnB,GAAGH,GAAG;EAET,UAAIA,CAAC,KAAKxf,SAAV,EAAqB;EAEpB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,iFAAb;EACA,eAAO,KAAKG,UAAL,CAAgBpB,CAAhB,EAAmBH,CAAnB,CAAP;EAEA;;EAED,WAAKrJ,CAAL,IAAUwJ,CAAC,CAACxJ,CAAZ;EACA,WAAKC,CAAL,IAAUuJ,CAAC,CAACvJ,CAAZ;EAEA,aAAO,IAAP;EAEA;;;gCAES0K,GAAG;EAEZ,WAAK3K,CAAL,IAAU2K,CAAV;EACA,WAAK1K,CAAL,IAAU0K,CAAV;EAEA,aAAO,IAAP;EAEA;;;iCAEUtW,GAAGG,GAAG;EAEhB,WAAKwL,CAAL,GAAS3L,CAAC,CAAC2L,CAAF,GAAMxL,CAAC,CAACwL,CAAjB;EACA,WAAKC,CAAL,GAAS5L,CAAC,CAAC4L,CAAF,GAAMzL,CAAC,CAACyL,CAAjB;EAEA,aAAO,IAAP;EAEA;;;+BAEQuJ,GAAG;EAEX,WAAKxJ,CAAL,IAAUwJ,CAAC,CAACxJ,CAAZ;EACA,WAAKC,CAAL,IAAUuJ,CAAC,CAACvJ,CAAZ;EAEA,aAAO,IAAP;EAEA;;;qCAEcsJ,QAAQ;EAEtB,WAAKvJ,CAAL,IAAUuJ,MAAV;EACA,WAAKtJ,CAAL,IAAUsJ,MAAV;EAEA,aAAO,IAAP;EAEA;;;6BAEMC,GAAG;EAET,WAAKxJ,CAAL,IAAUwJ,CAAC,CAACxJ,CAAZ;EACA,WAAKC,CAAL,IAAUuJ,CAAC,CAACvJ,CAAZ;EAEA,aAAO,IAAP;EAEA;;;mCAEYsJ,QAAQ;EAEpB,aAAO,KAAKI,cAAL,CAAoB,IAAIJ,MAAxB,CAAP;EAEA;;;0CAEmBoE,WAAW7nB,OAAOsQ,QAAQ;EAE7C,UAAIA,MAAM,KAAKvM,SAAf,EAA0B;EAEzB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,+DAAb;EAEA;;EAED,WAAKzK,CAAL,GAAS2N,SAAS,CAACC,IAAV,CAAe9nB,KAAf,CAAT;EACA,WAAKma,CAAL,GAAS0N,SAAS,CAACE,IAAV,CAAe/nB,KAAf,CAAT;EAEA,aAAO,IAAP;EAEA;;;6BACM0jB,GAAG;EAEH,aAASA,CAAC,CAACxJ,CAAF,KAAQ,KAAKA,CAAd,IAAqBwJ,CAAC,CAACvJ,CAAF,KAAQ,KAAKA,CAA1C;EAEH;;;0BAjLQ;EAEX,aAAO,KAAKD,CAAZ;EAEA;wBAESna,OAAO;EAEhB,WAAKma,CAAL,GAASna,KAAT;EAEA;;;0BAKY;EAEZ,aAAO,KAAKoa,CAAZ;EAEA;wBAEUpa,OAAO;EAEjB,WAAKoa,CAAL,GAASpa,KAAT;EAEA;;;;;;ECnCF;;;;;;MAQMmoC;;;EAEF,2BAAYvoC,KAAZ,EAAmBwoC,QAAnB,EAA6BtjC,UAA7B,EAAyC;EAAA;;EAErC,QAAIpI,KAAK,CAAC0B,OAAN,CAAcwB,KAAd,CAAJ,EAA0B;EAEtB,YAAM,IAAIP,SAAJ,CAAc,iDAAd,CAAN;EAEH;;EAED,SAAKc,IAAL,GAAY,EAAZ;EAEA,SAAKP,KAAL,GAAaA,KAAb;EACA,SAAKwoC,QAAL,GAAgBA,QAAhB;EACA,SAAKjZ,KAAL,GAAavvB,KAAK,KAAKoE,SAAV,GAAsBpE,KAAK,CAACV,MAAN,GAAekpC,QAArC,GAAgD,CAA7D;EACA,SAAKtjC,UAAL,GAAkBA,UAAU,KAAK,IAAjC;EAEA,SAAK2hC,OAAL,GAAe,KAAf;EACA,SAAKW,WAAL,GAAmB;EAAE72B,MAAAA,MAAM,EAAE,CAAV;EAAa4e,MAAAA,KAAK,EAAE,CAAE;EAAtB,KAAnB;EAEA,SAAKnQ,OAAL,GAAe,CAAf;EACA,SAAKqpB,iBAAL,GAAyB,IAAzB;EAIH;;;;yCAMkB;;;iCAIRroC,OAAO;EAEd,WAAKymC,OAAL,GAAezmC,KAAf;EAEA,aAAO,IAAP;EAEH;;;wCAEiBsoC,SAAS;EAEvB,UAAI1oC,KAAK,GAAG,KAAKA,KAAjB;EAAA,UAAwB2Q,MAAM,GAAG,CAAjC;;EAEA,WAAK,IAAInR,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGk9B,OAAO,CAACppC,MAA5B,EAAoCE,CAAC,GAAGgM,CAAxC,EAA2ChM,CAAC,EAA5C,EAAgD;EAE5C,YAAI0nB,MAAM,GAAGwhB,OAAO,CAAClpC,CAAD,CAApB;;EAEA,YAAI0nB,MAAM,KAAK9iB,SAAf,EAA0B;EAEtB2gB,UAAAA,OAAO,CAACC,IAAR,CAAa,0DAAb,EAAyExlB,CAAzE;EACA0nB,UAAAA,MAAM,GAAG,IAAItC,OAAJ,EAAT;EAEH;;EAED5kB,QAAAA,KAAK,CAAC2Q,MAAM,EAAP,CAAL,GAAkBuW,MAAM,CAAC3M,CAAzB;EACAva,QAAAA,KAAK,CAAC2Q,MAAM,EAAP,CAAL,GAAkBuW,MAAM,CAAC1M,CAAzB;EACAxa,QAAAA,KAAK,CAAC2Q,MAAM,EAAP,CAAL,GAAkBuW,MAAM,CAACvD,CAAzB;EAEH;;EAED,aAAO,IAAP;EACH;;;sCACenQ,QAAQ;EACpB,UAAIxT,KAAK,GAAG,KAAKA,KAAjB;EAAA,UAAwB2Q,MAAM,GAAG,CAAjC;;EAEA,WAAK,IAAInR,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGgI,MAAM,CAAClU,MAA3B,EAAmCE,CAAC,GAAGgM,CAAvC,EAA0ChM,CAAC,EAA3C,EAA+C;EAE3C,YAAIwpB,KAAK,GAAGxV,MAAM,CAAChU,CAAD,CAAlB;;EAEA,YAAIwpB,KAAK,KAAK5kB,SAAd,EAAyB;EAErB2gB,UAAAA,OAAO,CAACC,IAAR,CAAa,uDAAb,EAAsExlB,CAAtE;EACAwpB,UAAAA,KAAK,GAAG,IAAIR,OAAJ,EAAR;EAEH;;EAEDxoB,QAAAA,KAAK,CAAC2Q,MAAM,EAAP,CAAL,GAAkBqY,KAAK,CAAClP,CAAxB;EACA9Z,QAAAA,KAAK,CAAC2Q,MAAM,EAAP,CAAL,GAAkBqY,KAAK,CAACP,CAAxB;EACAzoB,QAAAA,KAAK,CAAC2Q,MAAM,EAAP,CAAL,GAAkBqY,KAAK,CAACja,CAAxB;EAEH;;EAED,aAAO,IAAP;EACH;;;gCAES/O,OAAO;EACb,WAAKA,KAAL,CAAWyT,GAAX,CAAezT,KAAf;EACA,aAAO,IAAP;EACH;;;2BAEIK,OAAO;EAER,aAAO,KAAKL,KAAL,CAAWK,KAAK,GAAG,KAAKmoC,QAAxB,CAAP;EAEH;;;2BAEInoC,OAAOka,GAAG;EAEX,WAAKva,KAAL,CAAWK,KAAK,GAAG,KAAKmoC,QAAxB,IAAoCjuB,CAApC;EAEA,aAAO,IAAP;EAEH;;;2BAEIla,OAAO;EAER,aAAO,KAAKL,KAAL,CAAWK,KAAK,GAAG,KAAKmoC,QAAb,GAAwB,CAAnC,CAAP;EAEH;;;2BAEInoC,OAAOma,GAAG;EAEX,WAAKxa,KAAL,CAAWK,KAAK,GAAG,KAAKmoC,QAAb,GAAwB,CAAnC,IAAwChuB,CAAxC;EAEA,aAAO,IAAP;EAEH;;;2BAEIna,OAAO;EAER,aAAO,KAAKL,KAAL,CAAWK,KAAK,GAAG,KAAKmoC,QAAb,GAAwB,CAAnC,CAAP;EAEH;;;2BAEInoC,OAAOsjB,GAAG;EAEX,WAAK3jB,KAAL,CAAWK,KAAK,GAAG,KAAKmoC,QAAb,GAAwB,CAAnC,IAAwC7kB,CAAxC;EAEA,aAAO,IAAP;EAEH;;;2BACItjB,OAAO;EAER,aAAO,KAAKL,KAAL,CAAWK,KAAK,GAAG,KAAKmoC,QAAb,GAAwB,CAAnC,CAAP;EAEH;;;2BAEInoC,OAAOujB,GAAG;EAEX,WAAK5jB,KAAL,CAAWK,KAAK,GAAG,KAAKmoC,QAAb,GAAwB,CAAnC,IAAwC5kB,CAAxC;EAEA,aAAO,IAAP;EAEH;;;4BAEKvjB,OAAOka,GAAGC,GAAG;EAEf,WAAKmuB,IAAL,CAAUtoC,KAAV,EAAiBka,CAAjB;EACA,WAAKquB,IAAL,CAAUvoC,KAAV,EAAiBma,CAAjB;EAEA,aAAO,IAAP;EAEH;;;6BAEMna,OAAOka,GAAGC,GAAGmJ,GAAG;EAEnB,WAAKklB,KAAL,CAAWxoC,KAAX,EAAkBka,CAAlB,EAAqBC,CAArB;EACA,WAAKsuB,IAAL,CAAUzoC,KAAV,EAAiBsjB,CAAjB;EAEA,aAAO,IAAP;EAEH;;;8BAEOtjB,OAAOka,GAAGC,GAAGmJ,GAAGC,GAAG;EAEvB,WAAK4L,MAAL,CAAYnvB,KAAZ,EAAmBka,CAAnB,EAAsBC,CAAtB,EAAyBmJ,CAAzB;EACA,WAAKolB,IAAL,CAAU1oC,KAAV,EAAiBujB,CAAjB;EAEA,aAAO,IAAP;EAEH;;;wCAEiB8kB,SAAS;EAEvB,UAAI1oC,KAAK,GAAG,KAAKA,KAAjB;EAAA,UAAwB2Q,MAAM,GAAG,CAAjC;;EAEA,WAAK,IAAInR,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGk9B,OAAO,CAACppC,MAA5B,EAAoCE,CAAC,GAAGgM,CAAxC,EAA2ChM,CAAC,EAA5C,EAAgD;EAE5C,YAAI0nB,MAAM,GAAGwhB,OAAO,CAAClpC,CAAD,CAApB;;EAEA,YAAI0nB,MAAM,KAAK9iB,SAAf,EAA0B;EAEtB2gB,UAAAA,OAAO,CAACC,IAAR,CAAa,0DAAb,EAAyExlB,CAAzE;EACA0nB,UAAAA,MAAM,GAAG,IAAImhB,OAAJ,EAAT;EAEH;;EAEDroC,QAAAA,KAAK,CAAC2Q,MAAM,EAAP,CAAL,GAAkBuW,MAAM,CAAC3M,CAAzB;EACAva,QAAAA,KAAK,CAAC2Q,MAAM,EAAP,CAAL,GAAkBuW,MAAM,CAAC1M,CAAzB;EAEH;;EAED,aAAO,IAAP;EAEH;;;;wBA3Kepa,OAAO;EACnB,UAAIA,KAAK,KAAK,IAAd,EAAoB,KAAKgf,OAAL;EACvB;;;;;EA+KL;;;;;;;;MAMM4pB;;;;;EACF,+BAAYhpC,KAAZ,EAAmBwoC,QAAnB,EAA6BtjC,UAA7B,EAAyC;EAAA;;EAAA,4FAC/B,IAAIkjC,SAAJ,CAAcpoC,KAAd,CAD+B,EACTwoC,QADS,EACCtjC,UADD;EAExC;;;IAH6BqjC;EAKlC;;;;;;;;MAMMU;;;;;EACF,gCAAYjpC,KAAZ,EAAmBwoC,QAAnB,EAA6BtjC,UAA7B,EAAyC;EAAA;;EAAA,6FAC/B,IAAI26B,UAAJ,CAAe7/B,KAAf,CAD+B,EACRwoC,QADQ,EACEtjC,UADF;EAExC;;;IAH8BqjC;EAKnC;;;;;;;;MAMMW;;;;;EACF,uCAAYlpC,KAAZ,EAAmBwoC,QAAnB,EAA6BtjC,UAA7B,EAAyC;EAAA;;EAAA,oGAC/B,IAAIikC,iBAAJ,CAAsBnpC,KAAtB,CAD+B,EACDwoC,QADC,EACStjC,UADT;EAExC;;;IAHqCqjC;EAM1C;;;;;;;;MAMMa;;;;;EACF,gCAAYppC,KAAZ,EAAmBwoC,QAAnB,EAA6BtjC,UAA7B,EAAyC;EAAA;;EAAA,6FAC/B,IAAI+iC,UAAJ,CAAejoC,KAAf,CAD+B,EACRwoC,QADQ,EACEtjC,UADF;EAExC;;;IAH8BqjC;EAMnC;;;;;;;;MAMMc;;;;;EACF,iCAAYrpC,KAAZ,EAAmBwoC,QAAnB,EAA6BtjC,UAA7B,EAAyC;EAAA;;EAAA,8FAC/B,IAAI8iC,WAAJ,CAAgBhoC,KAAhB,CAD+B,EACPwoC,QADO,EACGtjC,UADH;EAExC;;;IAH+BqjC;EAMpC;;;;;;;;MAMMe;;;;;EACF,gCAAYtpC,KAAZ,EAAmBwoC,QAAnB,EAA6BtjC,UAA7B,EAAyC;EAAA;;EAAA,6FAC/B,IAAIijC,UAAJ,CAAenoC,KAAf,CAD+B,EACRwoC,QADQ,EACEtjC,UADF;EAExC;;;IAH8BqjC;EAMnC;;;;;;;;MAMMgB;;;;;EACF,iCAAYvpC,KAAZ,EAAmBwoC,QAAnB,EAA6BtjC,UAA7B,EAAyC;EAAA;;EAAA,8FAC/B,IAAIgjC,WAAJ,CAAgBloC,KAAhB,CAD+B,EACPwoC,QADO,EACGtjC,UADH;EAExC;;;IAH+BqjC;EAMpC;;;;;;;;MAMMiB;;;;;EACF,kCAAYxpC,KAAZ,EAAmBwoC,QAAnB,EAA6BtjC,UAA7B,EAAyC;EAAA;;EAAA,+FAC/B,IAAI4iC,YAAJ,CAAiB9nC,KAAjB,CAD+B,EACNwoC,QADM,EACItjC,UADJ;EAExC;;;IAHgCqjC;EAMrC;;;;;;;MAKMkB;;;;;EACF,kCAAYzpC,KAAZ,EAAmBwoC,QAAnB,EAA6BtjC,UAA7B,EAAyC;EAAA;;EAAA,+FAC/B,IAAI6iC,YAAJ,CAAiB/nC,KAAjB,CAD+B,EACNwoC,QADM,EACItjC,UADJ;EAExC;;;IAHgCqjC;;EC1TrC;;;;;;MAOMmB;;;EACF,4BAAc;EAAA;;EACV,SAAKvW,QAAL,GAAgB,EAAhB;EACA,SAAKwW,OAAL,GAAe,EAAf;EACA,SAAKn2B,MAAL,GAAc,EAAd;EACA,SAAKo2B,GAAL,GAAW,EAAX;EACA,SAAKC,IAAL,GAAY,EAAZ;EAEA,SAAKC,MAAL,GAAc,EAAd;EAIA,SAAKC,WAAL,GAAmB,IAAnB;EACA,SAAK7R,cAAL,GAAsB,IAAtB,CAZU;;EAgBV,SAAK8R,kBAAL,GAA0B,KAA1B;EACA,SAAKC,iBAAL,GAAyB,KAAzB;EACA,SAAKC,gBAAL,GAAwB,KAAxB;EACA,SAAKC,aAAL,GAAqB,KAArB;EACA,SAAKC,gBAAL,GAAwB,KAAxB;EACH;;;;oCAEanX,UAAU;EAEpB,UAAIoX,KAAJ;EACA,UAAIP,MAAM,GAAG,EAAb;EACA,UAAIQ,aAAa,GAAGlmC,SAApB;EAEA,UAAImmC,KAAK,GAAGtX,QAAQ,CAACsX,KAArB;EACA,UAAI/qC,CAAC,GAAG,CAAR;;EAEA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG+qC,KAAK,CAACjrC,MAAtB,EAA8BE,CAAC,EAA/B,EAAmC;EAE/B,YAAIgrC,IAAI,GAAGD,KAAK,CAAC/qC,CAAD,CAAhB,CAF+B;;EAM/B,YAAIgrC,IAAI,CAACF,aAAL,KAAuBA,aAA3B,EAA0C;EAEtCA,UAAAA,aAAa,GAAGE,IAAI,CAACF,aAArB;;EAEA,cAAID,KAAK,KAAKjmC,SAAd,EAAyB;EAErBimC,YAAAA,KAAK,CAAC9a,KAAN,GAAe/vB,CAAC,GAAG,CAAL,GAAU6qC,KAAK,CAAC77B,KAA9B;EACAs7B,YAAAA,MAAM,CAAC1sC,IAAP,CAAYitC,KAAZ;EAEH;;EAEDA,UAAAA,KAAK,GAAG;EACJ77B,YAAAA,KAAK,EAAEhP,CAAC,GAAG,CADP;EAEJ8qC,YAAAA,aAAa,EAAEA;EAFX,WAAR;EAKH;EAEJ;;EAED,UAAID,KAAK,KAAKjmC,SAAd,EAAyB;EAErBimC,QAAAA,KAAK,CAAC9a,KAAN,GAAe/vB,CAAC,GAAG,CAAL,GAAU6qC,KAAK,CAAC77B,KAA9B;EACAs7B,QAAAA,MAAM,CAAC1sC,IAAP,CAAYitC,KAAZ;EAEH;;EAED,WAAKP,MAAL,GAAcA,MAAd;EAEH;;;mCAEY7W,UAAU;EAEnB,UAAIsX,KAAK,GAAGtX,QAAQ,CAACsX,KAArB;EACA,UAAIpX,QAAQ,GAAGF,QAAQ,CAACE,QAAxB;EACA,UAAIsX,aAAa,GAAGxX,QAAQ,CAACwX,aAA7B;EAEA,UAAIC,eAAe,GAAGD,aAAa,CAAC,CAAD,CAAb,IAAoBA,aAAa,CAAC,CAAD,CAAb,CAAiBnrC,MAAjB,GAA0B,CAApE;EACA,UAAIqrC,gBAAgB,GAAGF,aAAa,CAAC,CAAD,CAAb,IAAoBA,aAAa,CAAC,CAAD,CAAb,CAAiBnrC,MAAjB,GAA0B,CAArE,CAPmB;EAYnB;;EAEA,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+qC,KAAK,CAACjrC,MAA1B,EAAkCE,CAAC,EAAnC,EAAuC;EAEnC,YAAIgrC,IAAI,GAAGD,KAAK,CAAC/qC,CAAD,CAAhB;EAEA,aAAK2zB,QAAL,CAAc/1B,IAAd,CAAmB+1B,QAAQ,CAACqX,IAAI,CAAC57B,CAAN,CAA3B,EAAqCukB,QAAQ,CAACqX,IAAI,CAACz7B,CAAN,CAA7C,EAAuDokB,QAAQ,CAACqX,IAAI,CAACp1B,CAAN,CAA/D;EAEA,YAAIw1B,aAAa,GAAGJ,IAAI,CAACI,aAAzB;;EAEA,YAAIA,aAAa,CAACtrC,MAAd,KAAyB,CAA7B,EAAgC;EAE5B,eAAKqqC,OAAL,CAAavsC,IAAb,CAAkBwtC,aAAa,CAAC,CAAD,CAA/B,EAAoCA,aAAa,CAAC,CAAD,CAAjD,EAAsDA,aAAa,CAAC,CAAD,CAAnE;EAEH,SAJD,MAIO;EAEH,cAAIpY,MAAM,GAAGgY,IAAI,CAAChY,MAAlB;EAEA,eAAKmX,OAAL,CAAavsC,IAAb,CAAkBo1B,MAAlB,EAA0BA,MAA1B,EAAkCA,MAAlC;EAEH;;EAED,YAAIqY,YAAY,GAAGL,IAAI,CAACK,YAAxB;;EAEA,YAAIA,YAAY,CAACvrC,MAAb,KAAwB,CAA5B,EAA+B;EAE3B,eAAKkU,MAAL,CAAYpW,IAAZ,CAAiBytC,YAAY,CAAC,CAAD,CAA7B,EAAkCA,YAAY,CAAC,CAAD,CAA9C,EAAmDA,YAAY,CAAC,CAAD,CAA/D;EAEH,SAJD,MAIO;EAEH,cAAI7hB,KAAK,GAAGwhB,IAAI,CAACxhB,KAAjB;EAEA,eAAKxV,MAAL,CAAYpW,IAAZ,CAAiB4rB,KAAjB,EAAwBA,KAAxB,EAA+BA,KAA/B;EAEH;;EACD,YAAI0hB,eAAe,KAAK,IAAxB,EAA8B;EAE1B,cAAII,SAAS,GAAGL,aAAa,CAAC,CAAD,CAAb,CAAiBjrC,CAAjB,CAAhB;;EAEA,cAAIsrC,SAAS,KAAK1mC,SAAlB,EAA6B;EAEzB,iBAAKwlC,GAAL,CAASxsC,IAAT,CAAc0tC,SAAS,CAAC,CAAD,CAAvB,EAA4BA,SAAS,CAAC,CAAD,CAArC,EAA0CA,SAAS,CAAC,CAAD,CAAnD;EAEH,WAJD,MAIO;EAEH/lB,YAAAA,OAAO,CAACC,IAAR,CAAa,oDAAb,EAAmExlB,CAAnE;EAEA,iBAAKoqC,GAAL,CAASxsC,IAAT,CAAc,IAAIirC,OAAJ,EAAd,EAA6B,IAAIA,OAAJ,EAA7B,EAA4C,IAAIA,OAAJ,EAA5C;EAEH;EAEJ;;EAED,YAAIsC,gBAAgB,KAAK,IAAzB,EAA+B;EAE3B,cAAIG,SAAS,GAAGL,aAAa,CAAC,CAAD,CAAb,CAAiBjrC,CAAjB,CAAhB;;EAEA,cAAIsrC,SAAS,KAAK1mC,SAAlB,EAA6B;EAEzB,iBAAKylC,IAAL,CAAUzsC,IAAV,CAAe0tC,SAAS,CAAC,CAAD,CAAxB,EAA6BA,SAAS,CAAC,CAAD,CAAtC,EAA2CA,SAAS,CAAC,CAAD,CAApD;EAEH,WAJD,MAIO;EAEH/lB,YAAAA,OAAO,CAACC,IAAR,CAAa,qDAAb,EAAoExlB,CAApE;EAEA,iBAAKqqC,IAAL,CAAUzsC,IAAV,CAAe,IAAIirC,OAAJ,EAAf,EAA8B,IAAIA,OAAJ,EAA9B,EAA6C,IAAIA,OAAJ,EAA7C;EAEH;EAEJ;EAEJ;;EAED,WAAK0C,aAAL,CAAmB9X,QAAnB;EAEA,WAAK+W,kBAAL,GAA0B/W,QAAQ,CAAC+W,kBAAnC;EACA,WAAKC,iBAAL,GAAyBhX,QAAQ,CAACgX,iBAAlC;EACA,WAAKC,gBAAL,GAAwBjX,QAAQ,CAACiX,gBAAjC;EACA,WAAKC,aAAL,GAAqBlX,QAAQ,CAACkX,aAA9B;EACA,WAAKC,gBAAL,GAAwBnX,QAAQ,CAACmX,gBAAjC;EAEA,aAAO,IAAP;EAEH;;;;;;ECrKL;;;;;;EAMA,IAAIY,gBAAgB,GAAG,CAAvB;;MACMC;;;;;EACF,4BAAc;EAAA;;EAAA;;EACV;EACAhuC,IAAAA,MAAM,CAACiuC,cAAP,wDAA4B,IAA5B,EAAkC;EAAE9qC,MAAAA,KAAK,EAAE4qC,gBAAgB,IAAI;EAA7B,KAAlC;EACA,UAAK1jC,IAAL,GAAY,gBAAZ,CAHU;;EAMV,UAAKjH,KAAL,GAAa,IAAb,CANU;;EASV,UAAKgzB,UAAL,GAAkB,EAAlB;EAEA,UAAKD,gBAAL,GAAwB,IAAxB;EAEA,UAAK+X,SAAL,GAAiB;EAAE38B,MAAAA,KAAK,EAAE,CAAT;EAAY+gB,MAAAA,KAAK,EAAEptB;EAAnB,KAAjB;EAEA,UAAK2nC,MAAL,GAAc,EAAd;EAEA,UAAKC,WAAL,GAAmB,IAAnB;EACA,UAAK7R,cAAL,GAAsB,IAAtB;EAEA,UAAK9E,gBAAL,GAAwB,IAAxB;EApBU;EAuBb;;;;+BAEQ/yB,OAAO;EAEZ,UAAIvD,KAAK,CAAC0B,OAAN,CAAc6B,KAAd,CAAJ,EAA0B;EAEtB,aAAKA,KAAL,GAAa,KAAK+jB,KAAK,CAACG,QAAN,CAAelkB,KAAf,IAAwB,KAAxB,GAAgCkpC,qBAAhC,GAAwDF,qBAA7D,EAAoFhpC,KAApF,EAA2F,CAA3F,CAAb;EAEH,OAJD,MAIO;EAEH,aAAKA,KAAL,GAAaA,KAAb;EAEH;EAEJ;;;iCAEU;EAEP,aAAO,KAAKA,KAAZ;EAEH;;;mCAEYE,MAAM2nB,WAAW;EAE1B,UAAI,EAAEA,SAAS,IAAIA,SAAS,CAACugB,iBAAzB,KAA+C,EAAEvgB,SAAS,IAAIA,SAAS,CAACyf,4BAAzB,CAAnD,EAA2G;EAEvG5iB,QAAAA,OAAO,CAACC,IAAR,CAAa,kEAAb;EAEA,aAAKomB,YAAL,CAAkB7qC,IAAlB,EAAwB,IAAIgoC,eAAJ,CAAoB7lC,SAAS,CAAC,CAAD,CAA7B,EAAkCA,SAAS,CAAC,CAAD,CAA3C,CAAxB;EAEA;EAEH;;EAED,UAAInC,IAAI,KAAK,OAAb,EAAsB;EAElBwkB,QAAAA,OAAO,CAACC,IAAR,CAAa,mEAAb;EACA,aAAKqmB,QAAL,CAAcnjB,SAAd;EAEA;EAEH;;EAED,WAAKmL,UAAL,CAAgB9yB,IAAhB,IAAwB2nB,SAAxB;EAEA,aAAO,IAAP;EAEH;;;mCAEY3nB,MAAM;EAEf,aAAO,KAAK8yB,UAAL,CAAgB9yB,IAAhB,CAAP;EAEH;;;sCAEeA,MAAM;EAElB,aAAO,KAAK8yB,UAAL,CAAgB9yB,IAAhB,CAAP;EAEA,aAAO,IAAP;EAEH;;;oCACayxB,QAAQ;EAGlB,UAAIiB,QAAQ,GAAGjB,MAAM,CAACiB,QAAtB;;EAEA,UAAIjB,MAAM,CAACsZ,QAAP,IAAmBtZ,MAAM,CAACuZ,MAA9B,EAAsC;EAElC,YAAIC,SAAS,GAAG,IAAIhC,sBAAJ,CAA2BvW,QAAQ,CAACE,QAAT,CAAkB7zB,MAAlB,GAA2B,CAAtD,EAAyD,CAAzD,CAAhB;EACA,YAAIkU,MAAM,GAAG,IAAIg2B,sBAAJ,CAA2BvW,QAAQ,CAACzf,MAAT,CAAgBlU,MAAhB,GAAyB,CAApD,EAAuD,CAAvD,CAAb;EAEA,aAAK8rC,YAAL,CAAkB,UAAlB,EAA8BI,SAAS,CAACC,iBAAV,CAA4BxY,QAAQ,CAACE,QAArC,CAA9B;EACA,aAAKiY,YAAL,CAAkB,OAAlB,EAA2B53B,MAAM,CAACk4B,eAAP,CAAuBzY,QAAQ,CAACzf,MAAhC,CAA3B;;EAEA,YAAIyf,QAAQ,CAAC0Y,aAAT,IAA0B1Y,QAAQ,CAAC0Y,aAAT,CAAuBrsC,MAAvB,KAAkC2zB,QAAQ,CAACE,QAAT,CAAkB7zB,MAAlF,EAA0F;EAEtF,cAAIqsC,aAAa,GAAG,IAAInC,sBAAJ,CAA2BvW,QAAQ,CAAC0Y,aAAT,CAAuBrsC,MAAlD,EAA0D,CAA1D,CAApB;EAEA,eAAK8rC,YAAL,CAAkB,cAAlB,EAAkCO,aAAa,CAACC,SAAd,CAAwB3Y,QAAQ,CAAC0Y,aAAjC,CAAlC;EAEH;;EAED,YAAI1Y,QAAQ,CAACiF,cAAT,KAA4B,IAAhC,EAAsC;EAElC,eAAKA,cAAL,GAAsBjF,QAAQ,CAACiF,cAAT,CAAwBv0B,KAAxB,EAAtB;EAEH;;EAED,YAAIsvB,QAAQ,CAAC8W,WAAT,KAAyB,IAA7B,EAAmC;EAE/B,eAAKA,WAAL,GAAmB9W,QAAQ,CAAC8W,WAAT,CAAqBpmC,KAArB,EAAnB;EAEH;EAEJ,OA5BD,MA4BO,IAAIquB,MAAM,CAAC6Z,MAAX,EAAmB;EAEtB,YAAI5Y,QAAQ,IAAIA,QAAQ,CAACC,UAAzB,EAAqC;EAEjC,eAAK4Y,YAAL,CAAkB7Y,QAAlB;EAEH;EAEJ;;EAED,aAAO,IAAP;EAEH;;;mCAEYA,UAAU;EAEnBA,MAAAA,QAAQ,CAAC8Y,gBAAT,GAA4B,IAAIrC,cAAJ,GAAqBoC,YAArB,CAAkC7Y,QAAlC,CAA5B;EAEA,aAAO,KAAK+Y,kBAAL,CAAwB/Y,QAAQ,CAAC8Y,gBAAjC,CAAP;EAEH;;;yCAEkB9Y,UAAU;EAEzB,UAAIuY,SAAS,GAAG,IAAI1D,YAAJ,CAAiB7U,QAAQ,CAACE,QAAT,CAAkB7zB,MAAlB,GAA2B,CAA5C,CAAhB;EACA,WAAK8rC,YAAL,CAAkB,UAAlB,EAA8B,IAAI7C,eAAJ,CAAoBiD,SAApB,EAA+B,CAA/B,EAAkCC,iBAAlC,CAAoDxY,QAAQ,CAACE,QAA7D,CAA9B;;EAEA,UAAIF,QAAQ,CAAC0W,OAAT,CAAiBrqC,MAAjB,GAA0B,CAA9B,EAAiC;EAE7B,YAAIqqC,OAAO,GAAG,IAAI7B,YAAJ,CAAiB7U,QAAQ,CAAC0W,OAAT,CAAiBrqC,MAAjB,GAA0B,CAA3C,CAAd;EACA,aAAK8rC,YAAL,CAAkB,QAAlB,EAA4B,IAAI7C,eAAJ,CAAoBoB,OAApB,EAA6B,CAA7B,EAAgC8B,iBAAhC,CAAkDxY,QAAQ,CAAC0W,OAA3D,CAA5B;EAEH;;EAED,UAAI1W,QAAQ,CAACzf,MAAT,CAAgBlU,MAAhB,GAAyB,CAA7B,EAAgC;EAE5B,YAAIkU,MAAM,GAAG,IAAIs0B,YAAJ,CAAiB7U,QAAQ,CAACzf,MAAT,CAAgBlU,MAAhB,GAAyB,CAA1C,CAAb;EACA,aAAK8rC,YAAL,CAAkB,OAAlB,EAA2B,IAAI7C,eAAJ,CAAoB/0B,MAApB,EAA4B,CAA5B,EAA+Bk4B,eAA/B,CAA+CzY,QAAQ,CAACzf,MAAxD,CAA3B;EAEH;;EAED,UAAIyf,QAAQ,CAAC2W,GAAT,CAAatqC,MAAb,GAAsB,CAA1B,EAA6B;EAEzB,YAAIsqC,GAAG,GAAG,IAAI9B,YAAJ,CAAiB7U,QAAQ,CAAC2W,GAAT,CAAatqC,MAAb,GAAsB,CAAvC,CAAV;EACA,aAAK8rC,YAAL,CAAkB,IAAlB,EAAwB,IAAI7C,eAAJ,CAAoBqB,GAApB,EAAyB,CAAzB,EAA4BqC,iBAA5B,CAA8ChZ,QAAQ,CAAC2W,GAAvD,CAAxB;EAEH;;EAED,UAAI3W,QAAQ,CAAC4W,IAAT,CAAcvqC,MAAd,GAAuB,CAA3B,EAA8B;EAE1B,YAAIuqC,IAAI,GAAG,IAAI/B,YAAJ,CAAiB7U,QAAQ,CAAC4W,IAAT,CAAcvqC,MAAd,GAAuB,CAAxC,CAAX;EACA,aAAK8rC,YAAL,CAAkB,KAAlB,EAAyB,IAAI7C,eAAJ,CAAoBsB,IAApB,EAA0B,CAA1B,EAA6BoC,iBAA7B,CAA+ChZ,QAAQ,CAAC4W,IAAxD,CAAzB;EAEH,OA/BwB;;;EAmCzB,WAAKC,MAAL,GAAc7W,QAAQ,CAAC6W,MAAvB,CAnCyB;EAyCzB;;EAIA,UAAI7W,QAAQ,CAACiF,cAAT,KAA4B,IAAhC,EAAsC;EAElC,aAAKA,cAAL,GAAsBjF,QAAQ,CAACiF,cAAT,CAAwBv0B,KAAxB,EAAtB;EAEH;;EAED,UAAIsvB,QAAQ,CAAC8W,WAAT,KAAyB,IAA7B,EAAmC;EAE/B,aAAKA,WAAL,GAAmB9W,QAAQ,CAAC8W,WAAT,CAAqBpmC,KAArB,EAAnB;EAEH;;EAED,aAAO,IAAP;EAEH;;;uCACgBquB,QAAQ;EAErB,UAAIiB,QAAQ,GAAGjB,MAAM,CAACiB,QAAtB;;EAEA,UAAIjB,MAAM,CAAC6Z,MAAX,EAAmB;EAEf,YAAIK,MAAM,GAAGjZ,QAAQ,CAAC8Y,gBAAtB;;EAEA,YAAI9Y,QAAQ,CAACkZ,kBAAT,KAAgC,IAApC,EAA0C;EAEtCD,UAAAA,MAAM,GAAG9nC,SAAT;EACA6uB,UAAAA,QAAQ,CAACkZ,kBAAT,GAA8B,KAA9B;EAEH;;EAED,YAAID,MAAM,KAAK9nC,SAAf,EAA0B;EAEtB,iBAAO,KAAK0nC,YAAL,CAAkB7Y,QAAlB,CAAP;EAEH;;EAEDiZ,QAAAA,MAAM,CAAClC,kBAAP,GAA4B/W,QAAQ,CAAC+W,kBAArC;EACAkC,QAAAA,MAAM,CAACjC,iBAAP,GAA2BhX,QAAQ,CAACgX,iBAApC;EACAiC,QAAAA,MAAM,CAAChC,gBAAP,GAA0BjX,QAAQ,CAACiX,gBAAnC;EACAgC,QAAAA,MAAM,CAAC/B,aAAP,GAAuBlX,QAAQ,CAACkX,aAAhC;EACA+B,QAAAA,MAAM,CAAC9B,gBAAP,GAA0BnX,QAAQ,CAACmX,gBAAnC;EAEAnX,QAAAA,QAAQ,CAAC+W,kBAAT,GAA8B,KAA9B;EACA/W,QAAAA,QAAQ,CAACgX,iBAAT,GAA6B,KAA7B;EACAhX,QAAAA,QAAQ,CAACiX,gBAAT,GAA4B,KAA5B;EACAjX,QAAAA,QAAQ,CAACkX,aAAT,GAAyB,KAAzB;EACAlX,QAAAA,QAAQ,CAACmX,gBAAT,GAA4B,KAA5B;EAEAnX,QAAAA,QAAQ,GAAGiZ,MAAX;EAEH;EAGJ;;;2CAEoB;EAEjB,UAAI,KAAKnC,WAAL,KAAqB,IAAzB,EAA+B;EAE3B,aAAKA,WAAL,GAAmB,IAAI3Y,IAAJ,EAAnB;EAEH;;EAED,UAAIxe,QAAQ,GAAG,KAAKygB,UAAL,CAAgBzgB,QAA/B;;EAEA,UAAIA,QAAQ,KAAKxO,SAAjB,EAA4B;EAExB,aAAK2lC,WAAL,CAAiBqC,sBAAjB,CAAwCx5B,QAAxC;EAEH,OAJD,MAIO;EAEH,aAAKm3B,WAAL,CAAiBnY,SAAjB;EAEH;;EAED,UAAIjxB,KAAK,CAAC,KAAKopC,WAAL,CAAiB7nC,GAAjB,CAAqBqY,CAAtB,CAAL,IAAiC5Z,KAAK,CAAC,KAAKopC,WAAL,CAAiB7nC,GAAjB,CAAqBsY,CAAtB,CAAtC,IAAkE7Z,KAAK,CAAC,KAAKopC,WAAL,CAAiB7nC,GAAjB,CAAqByhB,CAAtB,CAA3E,EAAqG;EAEjGoB,QAAAA,OAAO,CAAC8E,KAAR,CAAc,6HAAd,EAA6I,IAA7I;EAEH;EAEJ;;;8CAEuB;EAEpBsO,MAAAA,sBAAqB,CAACx4B,IAAtB,CAA2B,IAA3B;EACH;;;6CACsB;EAEnB,UAAIU,KAAK,GAAG,KAAKA,KAAjB;EACA,UAAIgzB,UAAU,GAAG,KAAKA,UAAtB;EACA,UAAIyW,MAAM,GAAG,KAAKA,MAAlB;;EAEA,UAAIzW,UAAU,CAACzgB,QAAf,EAAyB;EAErB,YAAI44B,SAAS,GAAGnY,UAAU,CAACzgB,QAAX,CAAoB5S,KAApC;;EAEA,YAAIqzB,UAAU,CAACb,MAAX,KAAsBpuB,SAA1B,EAAqC;EAEjC,eAAKgnC,YAAL,CAAkB,QAAlB,EAA4B,IAAI7C,eAAJ,CAAoB,IAAIT,YAAJ,CAAiB0D,SAAS,CAAClsC,MAA3B,CAApB,EAAwD,CAAxD,CAA5B;EAEH,SAJD,MAIO;EAEH;EAEA,cAAIU,KAAK,GAAGqzB,UAAU,CAACb,MAAX,CAAkBxyB,KAA9B;;EAEA,eAAK,IAAIR,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAGpK,KAAK,CAACV,MAA3B,EAAmCE,CAAC,GAAG4K,EAAvC,EAA2C5K,CAAC,EAA5C,EAAgD;EAE5CQ,YAAAA,KAAK,CAACR,CAAD,CAAL,GAAW,CAAX;EAEH;EAEJ;;EAED,YAAImqC,OAAO,GAAGtW,UAAU,CAACb,MAAX,CAAkBxyB,KAAhC;EAEA,YAAIqsC,EAAJ,EAAQC,EAAR,EAAYC,EAAZ;EACA,YAAIC,EAAE,GAAG,IAAI5nB,OAAJ,EAAT;EAAA,YAAwB6nB,EAAE,GAAG,IAAI7nB,OAAJ,EAA7B;EAAA,YAA4C8nB,EAAE,GAAG,IAAI9nB,OAAJ,EAAjD;EACA,YAAI+S,EAAE,GAAG,IAAI/S,OAAJ,EAAT;EAAA,YAAwB+nB,EAAE,GAAG,IAAI/nB,OAAJ,EAA7B,CA1BqB;;EA8BrB,YAAIvkB,KAAJ,EAAW;EAEP,cAAIusC,OAAO,GAAGvsC,KAAK,CAACL,KAApB;;EAEA,cAAI8pC,MAAM,CAACxqC,MAAP,KAAkB,CAAtB,EAAyB;EAErB,iBAAKutC,QAAL,CAAc,CAAd,EAAiBD,OAAO,CAACttC,MAAzB;EAEH;;EAED,eAAK,IAAIwtC,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGjD,MAAM,CAACxqC,MAA5B,EAAoCwtC,CAAC,GAAGC,EAAxC,EAA4C,EAAED,CAA9C,EAAiD;EAE7C,gBAAIzC,KAAK,GAAGP,MAAM,CAACgD,CAAD,CAAlB;EAEA,gBAAIt+B,KAAK,GAAG67B,KAAK,CAAC77B,KAAlB;EACA,gBAAI+gB,KAAK,GAAG8a,KAAK,CAAC9a,KAAlB;;EAEA,iBAAK,IAAI/vB,CAAC,GAAGgP,KAAR,EAAepE,EAAE,GAAGoE,KAAK,GAAG+gB,KAAjC,EAAwC/vB,CAAC,GAAG4K,EAA5C,EAAgD5K,CAAC,IAAI,CAArD,EAAwD;EAEpD6sC,cAAAA,EAAE,GAAGO,OAAO,CAACptC,CAAC,GAAG,CAAL,CAAP,GAAiB,CAAtB;EACA8sC,cAAAA,EAAE,GAAGM,OAAO,CAACptC,CAAC,GAAG,CAAL,CAAP,GAAiB,CAAtB;EACA+sC,cAAAA,EAAE,GAAGK,OAAO,CAACptC,CAAC,GAAG,CAAL,CAAP,GAAiB,CAAtB;EAEAgtC,cAAAA,EAAE,CAACvkB,SAAH,CAAaujB,SAAb,EAAwBa,EAAxB;EACAI,cAAAA,EAAE,CAACxkB,SAAH,CAAaujB,SAAb,EAAwBc,EAAxB;EACAI,cAAAA,EAAE,CAACzkB,SAAH,CAAaujB,SAAb,EAAwBe,EAAxB;EAEA5U,cAAAA,EAAE,CAACxS,UAAH,CAAcunB,EAAd,EAAkBD,EAAlB;EACAE,cAAAA,EAAE,CAACxnB,UAAH,CAAcqnB,EAAd,EAAkBC,EAAlB;EACA9U,cAAAA,EAAE,CAACzC,KAAH,CAASyX,EAAT;EAEAhD,cAAAA,OAAO,CAAC0C,EAAD,CAAP,IAAe1U,EAAE,CAACpd,CAAlB;EACAovB,cAAAA,OAAO,CAAC0C,EAAE,GAAG,CAAN,CAAP,IAAmB1U,EAAE,CAACnd,CAAtB;EACAmvB,cAAAA,OAAO,CAAC0C,EAAE,GAAG,CAAN,CAAP,IAAmB1U,EAAE,CAAChU,CAAtB;EAEAgmB,cAAAA,OAAO,CAAC2C,EAAD,CAAP,IAAe3U,EAAE,CAACpd,CAAlB;EACAovB,cAAAA,OAAO,CAAC2C,EAAE,GAAG,CAAN,CAAP,IAAmB3U,EAAE,CAACnd,CAAtB;EACAmvB,cAAAA,OAAO,CAAC2C,EAAE,GAAG,CAAN,CAAP,IAAmB3U,EAAE,CAAChU,CAAtB;EAEAgmB,cAAAA,OAAO,CAAC4C,EAAD,CAAP,IAAe5U,EAAE,CAACpd,CAAlB;EACAovB,cAAAA,OAAO,CAAC4C,EAAE,GAAG,CAAN,CAAP,IAAmB5U,EAAE,CAACnd,CAAtB;EACAmvB,cAAAA,OAAO,CAAC4C,EAAE,GAAG,CAAN,CAAP,IAAmB5U,EAAE,CAAChU,CAAtB;EAEH;EAEJ;EAEJ,SA/CD,MA+CO;EAEH;EAEA,eAAK,IAAInkB,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAGohC,SAAS,CAAClsC,MAA/B,EAAuCE,CAAC,GAAG4K,EAA3C,EAA+C5K,CAAC,IAAI,CAApD,EAAuD;EAEnDgtC,YAAAA,EAAE,CAACvkB,SAAH,CAAaujB,SAAb,EAAwBhsC,CAAxB;EACAitC,YAAAA,EAAE,CAACxkB,SAAH,CAAaujB,SAAb,EAAwBhsC,CAAC,GAAG,CAA5B;EACAktC,YAAAA,EAAE,CAACzkB,SAAH,CAAaujB,SAAb,EAAwBhsC,CAAC,GAAG,CAA5B;EAEAm4B,YAAAA,EAAE,CAACxS,UAAH,CAAcunB,EAAd,EAAkBD,EAAlB;EACAE,YAAAA,EAAE,CAACxnB,UAAH,CAAcqnB,EAAd,EAAkBC,EAAlB;EACA9U,YAAAA,EAAE,CAACzC,KAAH,CAASyX,EAAT;EAEAhD,YAAAA,OAAO,CAACnqC,CAAD,CAAP,GAAam4B,EAAE,CAACpd,CAAhB;EACAovB,YAAAA,OAAO,CAACnqC,CAAC,GAAG,CAAL,CAAP,GAAiBm4B,EAAE,CAACnd,CAApB;EACAmvB,YAAAA,OAAO,CAACnqC,CAAC,GAAG,CAAL,CAAP,GAAiBm4B,EAAE,CAAChU,CAApB;EAEAgmB,YAAAA,OAAO,CAACnqC,CAAC,GAAG,CAAL,CAAP,GAAiBm4B,EAAE,CAACpd,CAApB;EACAovB,YAAAA,OAAO,CAACnqC,CAAC,GAAG,CAAL,CAAP,GAAiBm4B,EAAE,CAACnd,CAApB;EACAmvB,YAAAA,OAAO,CAACnqC,CAAC,GAAG,CAAL,CAAP,GAAiBm4B,EAAE,CAAChU,CAApB;EAEAgmB,YAAAA,OAAO,CAACnqC,CAAC,GAAG,CAAL,CAAP,GAAiBm4B,EAAE,CAACpd,CAApB;EACAovB,YAAAA,OAAO,CAACnqC,CAAC,GAAG,CAAL,CAAP,GAAiBm4B,EAAE,CAACnd,CAApB;EACAmvB,YAAAA,OAAO,CAACnqC,CAAC,GAAG,CAAL,CAAP,GAAiBm4B,EAAE,CAAChU,CAApB;EAEH;EAEJ;;EAED,aAAKqpB,gBAAL;EAEA3Z,QAAAA,UAAU,CAACb,MAAX,CAAkBya,WAAlB,GAAgC,IAAhC;EAEH;EAEJ;;;yCAEkB;EACf,UAAI/lB,MAAM,GAAG,IAAItC,OAAJ,EAAb;EACA,UAAI+kB,OAAO,GAAG,KAAKtW,UAAL,CAAgBb,MAA9B;;EAEA,WAAK,IAAIhzB,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAGu/B,OAAO,CAACpa,KAA7B,EAAoC/vB,CAAC,GAAG4K,EAAxC,EAA4C5K,CAAC,EAA7C,EAAiD;EAE7C0nB,QAAAA,MAAM,CAAC3M,CAAP,GAAWovB,OAAO,CAACxhB,IAAR,CAAa3oB,CAAb,CAAX;EACA0nB,QAAAA,MAAM,CAAC1M,CAAP,GAAWmvB,OAAO,CAACvhB,IAAR,CAAa5oB,CAAb,CAAX;EACA0nB,QAAAA,MAAM,CAACvD,CAAP,GAAWgmB,OAAO,CAACthB,IAAR,CAAa7oB,CAAb,CAAX;EAEA0nB,QAAAA,MAAM,CAACb,SAAP;EAEAsjB,QAAAA,OAAO,CAACna,MAAR,CAAehwB,CAAf,EAAkB0nB,MAAM,CAAC3M,CAAzB,EAA4B2M,MAAM,CAAC1M,CAAnC,EAAsC0M,MAAM,CAACvD,CAA7C;EAEH;;EACDuD,MAAAA,MAAM,GAAG,IAAT;EAEH;;;+BAEQ1Y,OAAO+gB,OAAO+a,eAAe;EAElC,WAAKR,MAAL,CAAY1sC,IAAZ,CAAiB;EAEboR,QAAAA,KAAK,EAAEA,KAFM;EAGb+gB,QAAAA,KAAK,EAAEA,KAHM;EAIb+a,QAAAA,aAAa,EAAEA,aAAa,KAAKlmC,SAAlB,GAA8BkmC,aAA9B,GAA8C;EAJhD,OAAjB;EAQH;;;oCAEa;EAEV,WAAKR,MAAL,GAAc,EAAd;EAEH;;;8BAEO;EAEJ,aAAO,IAAImB,cAAJ,GAAqB/mC,IAArB,CAA0B,IAA1B,CAAP;EAEH;;;2BAEIgpC,QAAQ;EAET,UAAI3sC,IAAJ,EAAUf,CAAV,EAAagM,CAAb,CAFS;;EAMT,WAAKnL,KAAL,GAAa,IAAb;EACA,WAAKgzB,UAAL,GAAkB,EAAlB;EACA,WAAK8Z,eAAL,GAAuB,EAAvB;EACA,WAAKrD,MAAL,GAAc,EAAd;EACA,WAAKC,WAAL,GAAmB,IAAnB;EACA,WAAK7R,cAAL,GAAsB,IAAtB,CAXS;;EAeT,WAAK33B,IAAL,GAAY2sC,MAAM,CAAC3sC,IAAnB,CAfS;;EAmBT,UAAIF,KAAK,GAAG6sC,MAAM,CAAC7sC,KAAnB;;EAEA,UAAIA,KAAK,KAAK,IAAd,EAAoB;EAEhB,aAAKgrC,QAAL,CAAchrC,KAAK,CAACsD,KAAN,EAAd;EAEH,OAzBQ;;;EA6BT,UAAI0vB,UAAU,GAAG6Z,MAAM,CAAC7Z,UAAxB;;EAEA,WAAK9yB,IAAL,IAAa8yB,UAAb,EAAyB;EAErB,YAAInL,SAAS,GAAGmL,UAAU,CAAC9yB,IAAD,CAA1B;EACA,aAAK6qC,YAAL,CAAkB7qC,IAAlB,EAAwB2nB,SAAS,CAACvkB,KAAV,EAAxB;EAEH,OApCQ;;;EA0CT,UAAImmC,MAAM,GAAGoD,MAAM,CAACpD,MAApB;;EAEA,WAAKtqC,CAAC,GAAG,CAAJ,EAAOgM,CAAC,GAAGs+B,MAAM,CAACxqC,MAAvB,EAA+BE,CAAC,GAAGgM,CAAnC,EAAsChM,CAAC,EAAvC,EAA2C;EAEvC,YAAI6qC,KAAK,GAAGP,MAAM,CAACtqC,CAAD,CAAlB;EACA,aAAKqtC,QAAL,CAAcxC,KAAK,CAAC77B,KAApB,EAA2B67B,KAAK,CAAC9a,KAAjC,EAAwC8a,KAAK,CAACC,aAA9C;EAEH,OAjDQ;;;EAqDT,UAAIP,WAAW,GAAGmD,MAAM,CAACnD,WAAzB;;EAEA,UAAIA,WAAW,KAAK,IAApB,EAA0B;EAEtB,aAAKA,WAAL,GAAmBA,WAAW,CAACpmC,KAAZ,EAAnB;EAEH,OA3DQ;;;EA+DT,UAAIu0B,cAAc,GAAGgV,MAAM,CAAChV,cAA5B;;EAEA,UAAIA,cAAc,KAAK,IAAvB,EAA6B;EAEzB,aAAKA,cAAL,GAAsBA,cAAc,CAACv0B,KAAf,EAAtB;EAEH,OArEQ;;;EAyET,WAAKwnC,SAAL,CAAe38B,KAAf,GAAuB0+B,MAAM,CAAC/B,SAAP,CAAiB38B,KAAxC;EACA,WAAK28B,SAAL,CAAe5b,KAAf,GAAuB2d,MAAM,CAAC/B,SAAP,CAAiB5b,KAAxC;EAEA,aAAO,IAAP;EAEH;;;gCAES;EAEN,WAAK6d,IAAL,CAAU;EAAE9lC,QAAAA,IAAI,EAAE;EAAR,OAAV;EAEH;;;;IAzgBwByX;;EA6gB7B,IAAIoZ,sBAAqB,GAAI,YAAY;EAErC,MAAIvnB,GAAG,GAAG,IAAIwgB,IAAJ,EAAV;EACA,MAAIlK,MAAM,GAAG,IAAItC,OAAJ,EAAb;EAEA,SAAO,SAASuT,qBAAT,GAAiC;EAEpC,QAAI,KAAKD,cAAL,KAAwB,IAA5B,EAAkC;EAE9B,WAAKA,cAAL,GAAsB,IAAIxE,MAAJ,EAAtB;EAEH;;EAED,QAAI9gB,QAAQ,GAAG,KAAKygB,UAAL,CAAgBzgB,QAA/B;;EAEA,QAAIA,QAAJ,EAAc;EAEV,UAAIkf,MAAM,GAAG,KAAKoG,cAAL,CAAoBpG,MAAjC;EAEAlhB,MAAAA,GAAG,CAACw7B,sBAAJ,CAA2Bx5B,QAA3B;EACAhC,MAAAA,GAAG,CAAC+iB,SAAJ,CAAc7B,MAAd,EALU;EAQV;;EAEA,UAAIiC,WAAW,GAAG,CAAlB;;EAEA,WAAK,IAAIv0B,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAGwI,QAAQ,CAAC2c,KAA9B,EAAqC/vB,CAAC,GAAG4K,EAAzC,EAA6C5K,CAAC,EAA9C,EAAkD;EAE9C0nB,QAAAA,MAAM,CAAC3M,CAAP,GAAW3H,QAAQ,CAACuV,IAAT,CAAc3oB,CAAd,CAAX;EACA0nB,QAAAA,MAAM,CAAC1M,CAAP,GAAW5H,QAAQ,CAACwV,IAAT,CAAc5oB,CAAd,CAAX;EACA0nB,QAAAA,MAAM,CAACvD,CAAP,GAAW/Q,QAAQ,CAACyV,IAAT,CAAc7oB,CAAd,CAAX;EACAu0B,QAAAA,WAAW,GAAG90B,IAAI,CAACsC,GAAL,CAASwyB,WAAT,EAAsBjC,MAAM,CAACvK,iBAAP,CAAyBL,MAAzB,CAAtB,CAAd;EAEH;;EAED,WAAKgR,cAAL,CAAoB3e,MAApB,GAA6Bta,IAAI,CAACklB,IAAL,CAAU4P,WAAV,CAA7B;;EAEA,UAAIpzB,KAAK,CAAC,KAAKu3B,cAAL,CAAoB3e,MAArB,CAAT,EAAuC;EAEnCwL,QAAAA,OAAO,CAAC8E,KAAR,CAAc,wHAAd,EAAwI,IAAxI;EAEH;EAEJ;EAEJ,GAzCD;EA2CH,CAhD2B,EAA5B;;ECxhBA;;;;;;MAMMwjB;;;EACF,2BAAY9U,EAAZ,EAAgBlF,UAAhB,EAA4Bia,IAA5B,EAAkC;EAAA;;EAC9B,SAAK9U,GAAL,GAAWD,EAAX;EACA,SAAKgV,WAAL,GAAmB,EAAnB;EACA,SAAKC,WAAL,GAAmBna,UAAnB;EACA,SAAKoa,KAAL,GAAaH,IAAb;EACA,SAAKI,oBAAL,GAA4B,EAA5B;EAEH;;;;0BAGG1b,QAAQiB,UAAU;EAElB,UAAI0a,cAAc,GAAG,KAAKJ,WAAL,CAAiBta,QAAQ,CAACzgB,EAA1B,CAArB;EAEA,UAAIm7B,cAAJ,EAAoB,OAAOA,cAAP;EAEpB,WAAKC,sBAAL,GAA8BC,iBAAiB,CAACjvC,IAAlB,CAAuB,IAAvB,CAA9B;EACAq0B,MAAAA,QAAQ,CAACpe,EAAT,CAAY,SAAZ,EAAuB,KAAK+4B,sBAA5B;;EAEA,UAAI3a,QAAQ,CAACG,gBAAb,EAA+B;EAE3Bua,QAAAA,cAAc,GAAG1a,QAAjB;EAEH,OAJD,MAIO,IAAIA,QAAQ,CAACC,UAAb,EAAyB;EAE5B,YAAID,QAAQ,CAAC6a,eAAT,KAA6B1pC,SAAjC,EAA4C;EAExC6uB,UAAAA,QAAQ,CAAC6a,eAAT,GAA2B,IAAI7C,cAAJ,GAAqB8C,aAArB,CAAmC/b,MAAnC,CAA3B;EAEH;;EAED2b,QAAAA,cAAc,GAAG1a,QAAQ,CAAC6a,eAA1B;EAEH;;EAED,WAAKP,WAAL,CAAiBta,QAAQ,CAACzgB,EAA1B,IAAgCm7B,cAAhC;EAEA,WAAKF,KAAL,CAAWO,MAAX,CAAkBC,UAAlB;EAEA,aAAON,cAAP;EAEH;;;6BAEM1a,UAAU;EAEb,UAAIsF,EAAE,GAAG,KAAKC,GAAd;EACA,UAAIn4B,KAAK,GAAG4yB,QAAQ,CAAC5yB,KAArB;EACA,UAAI6tC,kBAAkB,GAAGjb,QAAQ,CAACI,UAAlC;;EAEA,UAAIhzB,KAAK,KAAK,IAAd,EAAoB;EAEhB,aAAKmtC,WAAL,CAAiBW,MAAjB,CAAwB9tC,KAAxB,EAA+Bk4B,EAAE,CAAC6V,oBAAlC;EAEH;;EAED,WAAK,IAAI7tC,IAAT,IAAiB2tC,kBAAjB,EAAqC;EAEjC,aAAKV,WAAL,CAAiBW,MAAjB,CAAwBD,kBAAkB,CAAC3tC,IAAD,CAA1C,EAAkDg4B,EAAE,CAAC8V,YAArD;EAEH,OAhBY;;EAqBhB;;;4CACqBpb,UAAU;EAE5B,UAAIsF,EAAE,GAAG,KAAKC,GAAd;EACA,UAAIjU,QAAQ,GAAGH,KAAK,CAACG,QAArB;EACA,UAAI2D,SAAS,GAAG,KAAKwlB,oBAAL,CAA0Bza,QAAQ,CAACzgB,EAAnC,CAAhB;EAEA,UAAI0V,SAAJ,EAAe,OAAOA,SAAP;EAEf,UAAI0kB,OAAO,GAAG,EAAd;EAEA,UAAI0B,aAAa,GAAGrb,QAAQ,CAAC5yB,KAA7B;EACA,UAAI6tC,kBAAkB,GAAGjb,QAAQ,CAACI,UAAlC,CAX4B;;EAe5B,UAAIib,aAAa,KAAK,IAAtB,EAA4B;EAExB,YAAItuC,KAAK,GAAGsuC,aAAa,CAACtuC,KAA1B;;EAEA,aAAK,IAAIR,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGxL,KAAK,CAACV,MAA1B,EAAkCE,CAAC,GAAGgM,CAAtC,EAAyChM,CAAC,IAAI,CAA9C,EAAiD;EAE7C,cAAIoP,CAAC,GAAG5O,KAAK,CAACR,CAAC,GAAG,CAAL,CAAb;EACA,cAAIuP,CAAC,GAAG/O,KAAK,CAACR,CAAC,GAAG,CAAL,CAAb;EACA,cAAI4V,CAAC,GAAGpV,KAAK,CAACR,CAAC,GAAG,CAAL,CAAb;EAEAotC,UAAAA,OAAO,CAACxvC,IAAR,CAAawR,CAAb,EAAgBG,CAAhB,EAAmBA,CAAnB,EAAsBqG,CAAtB,EAAyBA,CAAzB,EAA4BxG,CAA5B;EAEH;EAEJ,OAdD,MAcO;EAEH,YAAI5O,MAAK,GAAGkuC,kBAAkB,CAACt7B,QAAnB,CAA4B5S,KAAxC;;EAEA,aAAK,IAAIR,EAAC,GAAG,CAAR,EAAWgM,EAAC,GAAIxL,MAAK,CAACV,MAAN,GAAe,CAAhB,GAAqB,CAAzC,EAA4CE,EAAC,GAAGgM,EAAhD,EAAmDhM,EAAC,IAAI,CAAxD,EAA2D;EAEvD,cAAIoP,EAAC,GAAGpP,EAAC,GAAG,CAAZ;;EACA,cAAIuP,EAAC,GAAGvP,EAAC,GAAG,CAAZ;;EACA,cAAI4V,EAAC,GAAG5V,EAAC,GAAG,CAAZ;;EAEAotC,UAAAA,OAAO,CAACxvC,IAAR,CAAawR,EAAb,EAAgBG,EAAhB,EAAmBA,EAAnB,EAAsBqG,EAAtB,EAAyBA,EAAzB,EAA4BxG,EAA5B;EAEH;EAEJ,OA3C2B;;;EA+C5BsZ,MAAAA,SAAS,GAAG,KAAK3D,QAAQ,CAACqoB,OAAD,CAAR,GAAoB,KAApB,GAA4BrD,qBAA5B,GAAoDF,qBAAzD,EAAgFuD,OAAhF,EAAyF,CAAzF,CAAZ;;EAEA,WAAKY,WAAL,CAAiBW,MAAjB,CAAwBjmB,SAAxB,EAAmCqQ,EAAE,CAAC6V,oBAAtC;;EAEA,WAAKV,oBAAL,CAA0Bza,QAAQ,CAACzgB,EAAnC,IAAyC0V,SAAzC;EAEA,aAAOA,SAAP;EAEH;;;;;;EAGL,SAAS2lB,iBAAT,CAA2Br9B,KAA3B,EAAkC;EAE9B,MAAIyiB,QAAQ,GAAGziB,KAAK,CAACrN,MAArB;EACA,MAAIwqC,cAAc,GAAG,KAAKJ,WAAL,CAAiBta,QAAQ,CAACzgB,EAA1B,CAArB;EACA,MAAI,CAACm7B,cAAL,EAAqB;;EAErB,MAAIA,cAAc,CAACttC,KAAf,KAAyB,IAA7B,EAAmC;EAE/B,SAAKmtC,WAAL,CAAiBe,MAAjB,CAAwBZ,cAAc,CAACttC,KAAvC;EAEH;;EAED,OAAK,IAAIE,IAAT,IAAiBotC,cAAc,CAACta,UAAhC,EAA4C;EAExC,SAAKma,WAAL,CAAiBe,MAAjB,CAAwBZ,cAAc,CAACta,UAAf,CAA0B9yB,IAA1B,CAAxB;EAEH;;EAED0yB,EAAAA,QAAQ,CAAC3e,GAAT,CAAa,SAAb,EAAwB,KAAKs5B,sBAA7B;EAEA,OAAKA,sBAAL,GAA8B,IAA9B;EAEA,SAAO,KAAKL,WAAL,CAAiBta,QAAQ,CAACzgB,EAA1B,CAAP,CAtB8B;;EA0B9B,MAAI0V,SAAS,GAAG,KAAKwlB,oBAAL,CAA0Bza,QAAQ,CAACzgB,EAAnC,CAAhB;;EAEA,MAAI0V,SAAJ,EAAe;EAEX,SAAKslB,WAAL,CAAiBe,MAAjB,CAAwBrmB,SAAxB;;EACA,WAAO,KAAKwlB,oBAAL,CAA0Bza,QAAQ,CAACzgB,EAAnC,CAAP;EAEH,GAjC6B;EAqC9B;EAEA;EACA;EAEA;EAEA;;;EAEA,OAAKi7B,KAAL,CAAWO,MAAX,CAAkBC,UAAlB;EAEH;;EClLD,IAAIO,WAAW,GAAG;EACjBC,EAAAA,MAAM,EAAE;EAEPC,IAAAA,OAAO,EAAE;EAAEtuC,MAAAA,KAAK,EAAE,IAAIooB,OAAJ,CAAU,QAAV;EAAT,KAFF;EAGPmmB,IAAAA,OAAO,EAAE;EAAEvuC,MAAAA,KAAK,EAAE;EAAT,KAHF;EAKPxC,IAAAA,GAAG,EAAE;EAAEwC,MAAAA,KAAK,EAAE;EAAT,KALE;EAMPwuC,IAAAA,WAAW,EAAE;EAAExuC,MAAAA,KAAK,EAAE,IAAIi0B,OAAJ;EAAT;EANN,GADS;EAWjBwa,EAAAA,MAAM,EAAE;EAEPC,IAAAA,iBAAiB,EAAE;EAAE1uC,MAAAA,KAAK,EAAE;EAAT,KAFZ;EAIP2uC,IAAAA,iBAAiB,EAAE;EAClB3uC,MAAAA,KAAK,EAAE,EADW;EACP4uC,MAAAA,UAAU,EAAE;EACtBzZ,QAAAA,SAAS,EAAE,EADW;EAEtBvM,QAAAA,KAAK,EAAE;EAFe;EADL,KAJZ;EAWPimB,IAAAA,UAAU,EAAE;EACX7uC,MAAAA,KAAK,EAAE,EADI;EACA4uC,MAAAA,UAAU,EAAE;EACtBhmB,QAAAA,KAAK,EAAE,EADe;EAEtBpW,QAAAA,QAAQ,EAAE,EAFY;EAGtB2iB,QAAAA,SAAS,EAAE,EAHW;EAItByC,QAAAA,QAAQ,EAAE,EAJY;EAKtBkX,QAAAA,OAAO,EAAE,EALa;EAMtBC,QAAAA,WAAW,EAAE,EANS;EAOtBC,QAAAA,KAAK,EAAE;EAPe;EADZ,KAXL;EAuBPC,IAAAA,WAAW,EAAE;EACZjvC,MAAAA,KAAK,EAAE,EADK;EACD4uC,MAAAA,UAAU,EAAE;EACtBhmB,QAAAA,KAAK,EAAE,EADe;EAEtBpW,QAAAA,QAAQ,EAAE,EAFY;EAGtBw8B,QAAAA,KAAK,EAAE,EAHe;EAItBpX,QAAAA,QAAQ,EAAE;EAJY;EADX;EAvBN,GAXS;EA4CjBhe,EAAAA,MAAM,EAAE;EAEP00B,IAAAA,OAAO,EAAE;EAAEtuC,MAAAA,KAAK,EAAE,IAAIooB,OAAJ,CAAU,QAAV;EAAT,KAFF;EAGPmmB,IAAAA,OAAO,EAAE;EAAEvuC,MAAAA,KAAK,EAAE;EAAT,KAHF;EAIP8oB,IAAAA,IAAI,EAAE;EAAE9oB,MAAAA,KAAK,EAAE;EAAT,KAJC;EAKPuF,IAAAA,KAAK,EAAE;EAAEvF,MAAAA,KAAK,EAAE;EAAT,KALA;EAMPxC,IAAAA,GAAG,EAAE;EAAEwC,MAAAA,KAAK,EAAE;EAAT,KANE;EAOPwuC,IAAAA,WAAW,EAAE;EAAExuC,MAAAA,KAAK,EAAE,IAAIi0B,OAAJ;EAAT;EAPN,GA5CS;EAsDjBiB,EAAAA,IAAI,EAAE;EACL3vB,IAAAA,KAAK,EAAE;EAAEvF,MAAAA,KAAK,EAAE;EAAT,KADF;EAELkvC,IAAAA,QAAQ,EAAE;EAAElvC,MAAAA,KAAK,EAAE;EAAT,KAFL;EAGLmvC,IAAAA,SAAS,EAAE;EAAEnvC,MAAAA,KAAK,EAAE;EAAT;EAHN,GAtDW;EA2DjBy3B,EAAAA,MAAM,EAAE;EAEP6W,IAAAA,OAAO,EAAE;EAAEtuC,MAAAA,KAAK,EAAE,IAAIooB,OAAJ,CAAU,QAAV;EAAT,KAFF;EAGPmmB,IAAAA,OAAO,EAAE;EAAEvuC,MAAAA,KAAK,EAAE;EAAT,KAHF;EAIP0xB,IAAAA,MAAM,EAAE;EAAE1xB,MAAAA,KAAK,EAAE,IAAIioC,OAAJ,CAAY,GAAZ,EAAiB,GAAjB;EAAT,KAJD;EAKP7T,IAAAA,QAAQ,EAAE;EAAEp0B,MAAAA,KAAK,EAAE;EAAT,KALH;EAMPxC,IAAAA,GAAG,EAAE;EAAEwC,MAAAA,KAAK,EAAE;EAAT,KANE;EAOPwuC,IAAAA,WAAW,EAAE;EAAExuC,MAAAA,KAAK,EAAE,IAAIi0B,OAAJ;EAAT;EAPN;EA3DS,CAAlB;;ECJA,IAAMmb,eAAa,GAAG;EAErBC,EAAAA,KAAK,EAAE,eAAWC,QAAX,EAAsB;EAE5B,QAAIC,MAAM,GAAG,EAAb;;EAEA,SAAM,IAAIC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGF,QAAQ,CAACpwC,MAA9B,EAAsCswC,CAAC,EAAvC,EAA6C;EAE5C,UAAIngB,GAAG,GAAG,KAAK9rB,KAAL,CAAY+rC,QAAQ,CAAEE,CAAF,CAApB,CAAV;;EAEA,WAAM,IAAInoC,CAAV,IAAegoB,GAAf,EAAqB;EAEpBkgB,QAAAA,MAAM,CAAEloC,CAAF,CAAN,GAAcgoB,GAAG,CAAEhoB,CAAF,CAAjB;EAEA;EAED;;EAED,WAAOkoC,MAAP;EAEA,GApBoB;EAsBrBhsC,EAAAA,KAAK,EAAE,eAAWksC,YAAX,EAA0B;EAEhC,QAAIC,YAAY,GAAG,EAAnB;;EAEA,SAAM,IAAIF,CAAV,IAAeC,YAAf,EAA8B;EAE7BC,MAAAA,YAAY,CAAEF,CAAF,CAAZ,GAAoB,EAApB;;EAEA,WAAM,IAAInoC,CAAV,IAAeooC,YAAY,CAAED,CAAF,CAA3B,EAAmC;EAElC,YAAIG,aAAa,GAAGF,YAAY,CAAED,CAAF,CAAZ,CAAmBnoC,CAAnB,CAApB;;EAEA,YAAKsoC,aAAa,KAAMA,aAAa,CAACrnB,OAAd,IACvBqnB,aAAa,CAACzb,SADS,IACIyb,aAAa,CAACjmB,SADlB,IAEvBimB,aAAa,CAACzH,SAFS,IAEIyH,aAAa,CAAClrB,SAFlB,IAE+BkrB,aAAa,CAAClsB,SAF7C,IAGvBksB,aAAa,CAACC,SAHG,CAAlB,EAG6B;EAE5BF,UAAAA,YAAY,CAAEF,CAAF,CAAZ,CAAmBnoC,CAAnB,IAAyBsoC,aAAa,CAACpsC,KAAd,EAAzB;EAEA,SAPD,MAOO,IAAK7G,KAAK,CAAC0B,OAAN,CAAeuxC,aAAf,CAAL,EAAsC;EAE5CD,UAAAA,YAAY,CAAEF,CAAF,CAAZ,CAAmBnoC,CAAnB,IAAyBsoC,aAAa,CAAC1yC,KAAd,EAAzB;EAEA,SAJM,MAIA;EAENyyC,UAAAA,YAAY,CAAEF,CAAF,CAAZ,CAAmBnoC,CAAnB,IAAyBsoC,aAAzB;EAEA;EAED;EAED;;EAED,WAAOD,YAAP;EAEA;EAzDoB,CAAtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECuBO,IAAMG,WAAW,GAAG;EAE1BC,EAAAA,cAAc,EAAdA,cAF0B;EAG1BC,EAAAA,cAAc,EAAdA,cAH0B;EAK1BC,EAAAA,eAAe,EAAfA,eAL0B;EAM1BC,EAAAA,eAAe,EAAfA,eAN0B;EAQ1BC,EAAAA,WAAW,EAAXA,WAR0B;EAS1BC,EAAAA,WAAW,EAAXA,WAT0B;EAW1BC,EAAAA,gBAAgB,EAAhBA,gBAX0B;EAY1BC,EAAAA,gBAAgB,EAAhBA,gBAZ0B;EAc1BC,EAAAA,cAAc,EAAdA,cAd0B;EAe1BC,EAAAA,cAAc,EAAdA,cAf0B;EAiB1BC,EAAAA,aAAa,EAAbA,aAjB0B;EAkB1BC,EAAAA,aAAa,EAAbA,aAlB0B;EAoB1BC,EAAAA,WAAW,EAAXA,WApB0B;EAqB1BC,EAAAA,WAAW,EAAXA;EArB0B,CAApB;;EChBP,IAAIC,SAAS,GAAG;EAEfC,EAAAA,KAAK,EAAE;EAENvB,IAAAA,QAAQ,EAAEF,eAAa,CAACC,KAAd,CAAoB,CAC7BjB,WAAW,CAACC,MADiB,CAApB,CAFJ;EAMNyC,IAAAA,YAAY,EAAEjB,WAAW,CAACE,cANpB;EAONgB,IAAAA,cAAc,EAAElB,WAAW,CAACC;EAPtB,GAFQ;EAYfkB,EAAAA,OAAO,EAAE;EAER1B,IAAAA,QAAQ,EAAEF,eAAa,CAACC,KAAd,CAAoB,CAC7BjB,WAAW,CAACC,MADiB,EAE7BD,WAAW,CAACK,MAFiB,EAG7B;EACCwC,MAAAA,QAAQ,EAAE;EAAEjxC,QAAAA,KAAK,EAAE,IAAIooB,OAAJ,CAAU,QAAV;EAAT;EADX,KAH6B,CAApB,CAFF;EAUR0oB,IAAAA,YAAY,EAAEjB,WAAW,CAACO,gBAVlB;EAWRW,IAAAA,cAAc,EAAElB,WAAW,CAACQ;EAXpB,GAZM;EA0Bfa,EAAAA,KAAK,EAAE;EAEN5B,IAAAA,QAAQ,EAAEF,eAAa,CAACC,KAAd,CAAoB,CAC7BjB,WAAW,CAACC,MADiB,EAE7BD,WAAW,CAACK,MAFiB,EAG7B;EACCwC,MAAAA,QAAQ,EAAE;EAAEjxC,QAAAA,KAAK,EAAE,IAAIooB,OAAJ,CAAU,QAAV;EAAT,OADX;EAEC+oB,MAAAA,QAAQ,EAAE;EAAEnxC,QAAAA,KAAK,EAAE,IAAIooB,OAAJ,CAAU,QAAV;EAAT,OAFX;EAGCgpB,MAAAA,SAAS,EAAE;EAAEpxC,QAAAA,KAAK,EAAE;EAAT;EAHZ,KAH6B,CAApB,CAFJ;EAYN8wC,IAAAA,YAAY,EAAEjB,WAAW,CAACS,cAZpB;EAaNS,IAAAA,cAAc,EAAElB,WAAW,CAACU;EAbtB,GA1BQ;EA0Cfc,EAAAA,MAAM,EAAE;EACP/B,IAAAA,QAAQ,EAAEF,eAAa,CAACC,KAAd,CAAoB,CAC7BjB,WAAW,CAACC,MADiB,EAE7BD,WAAW,CAAClZ,IAFiB,CAApB,CADH;EAOP4b,IAAAA,YAAY,EAAEjB,WAAW,CAACG,eAPnB;EAQPe,IAAAA,cAAc,EAAElB,WAAW,CAACI;EARrB,GA1CO;EAqDfqB,EAAAA,QAAQ,EAAE;EACThC,IAAAA,QAAQ,EAAEF,eAAa,CAACC,KAAd,CAAoB,CAC7BjB,WAAW,CAACC,MADiB,EAE7BD,WAAW,CAAClZ,IAFiB,EAG7B;EACCqc,MAAAA,SAAS,EAAE;EAAEvxC,QAAAA,KAAK,EAAE;EAAT,OADZ;EAECwxC,MAAAA,UAAU,EAAE;EAAExxC,QAAAA,KAAK,EAAE,IAAIioC,OAAJ,CAAY,CAAZ,EAAe,CAAf;EAAT;EAFb,KAH6B,CAApB,CADD;EAUT6I,IAAAA,YAAY,EAAEjB,WAAW,CAACW,aAVjB;EAWTO,IAAAA,cAAc,EAAElB,WAAW,CAACY;EAXnB,GArDK;EAkEf72B,EAAAA,MAAM,EAAE;EACP01B,IAAAA,QAAQ,EAAEF,eAAa,CAACC,KAAd,CAAoB,CAC7BjB,WAAW,CAACx0B,MADiB,CAApB,CADH;EAMPk3B,IAAAA,YAAY,EAAEjB,WAAW,CAACK,WANnB;EAOPa,IAAAA,cAAc,EAAElB,WAAW,CAACM;EAPrB,GAlEO;EA4Ef1Y,EAAAA,MAAM,EAAE;EAEP6X,IAAAA,QAAQ,EAAEF,eAAa,CAACC,KAAd,CAAqB,CAC9BjB,WAAW,CAAC3W,MADkB,CAArB,CAFH;EAOPqZ,IAAAA,YAAY,EAAEjB,WAAW,CAACa,WAPnB;EAQPK,IAAAA,cAAc,EAAElB,WAAW,CAACc;EARrB;EA5EO,CAAhB;;ECLA;;;;;MAMMc;;;EACF,qBAAYtZ,EAAZ,EAAgB;EAAA;;EACZ,SAAKA,EAAL,GAAUA,EAAV;EAEA,SAAKyV,MAAL,GAAc;EACVC,MAAAA,UAAU,EAAE,CADF;EAEV6D,MAAAA,QAAQ,EAAE;EAFA,KAAd;EAKA,SAAKC,MAAL,GAAc;EACVC,MAAAA,KAAK,EAAE,CADG;EAEVC,MAAAA,KAAK,EAAE,CAFG;EAGVC,MAAAA,SAAS,EAAE,CAHD;EAIVl4B,MAAAA,MAAM,EAAE,CAJE;EAKVm4B,MAAAA,KAAK,EAAE;EALG,KAAd;EAQA,SAAKC,QAAL,GAAgB,IAAhB;EACA,SAAKC,SAAL,GAAiB,IAAjB;EAGH;;;;6BAEM9iB,OAAO+iB,MAAMC,eAAe;EAE/B,UAAIha,EAAE,GAAG,KAAKA,EAAd;EACAga,MAAAA,aAAa,GAAGA,aAAa,IAAI,CAAjC;EAEA,WAAKR,MAAL,CAAYE,KAAZ;;EAEA,cAAQK,IAAR;EAEI,aAAK/Z,EAAE,CAACia,SAAR;EACI,eAAKT,MAAL,CAAYG,SAAZ,IAAyBK,aAAa,IAAIhjB,KAAK,GAAG,CAAZ,CAAtC;EACA;;EAEJ,aAAKgJ,EAAE,CAACka,cAAR;EACA,aAAKla,EAAE,CAACma,YAAR;EACI,eAAKX,MAAL,CAAYG,SAAZ,IAAyBK,aAAa,IAAIhjB,KAAK,GAAG,CAAZ,CAAtC;EACA;;EAEJ,aAAKgJ,EAAE,CAACoa,KAAR;EACI,eAAKZ,MAAL,CAAYI,KAAZ,IAAqBI,aAAa,IAAIhjB,KAAK,GAAG,CAAZ,CAAlC;EACA;;EAEJ,aAAKgJ,EAAE,CAACqa,UAAR;EACI,eAAKb,MAAL,CAAYI,KAAZ,IAAqBI,aAAa,IAAIhjB,KAAK,GAAG,CAAZ,CAAlC;EACA;;EAEJ,aAAKgJ,EAAE,CAACsa,SAAR;EACI,eAAKd,MAAL,CAAYI,KAAZ,IAAqBI,aAAa,GAAGhjB,KAArC;EACA;;EAEJ,aAAKgJ,EAAE,CAACua,MAAR;EACI,eAAKf,MAAL,CAAY/3B,MAAZ,IAAsBu4B,aAAa,GAAGhjB,KAAtC;EACA;;EAEJ;EACIxK,UAAAA,OAAO,CAAC8E,KAAR,CAAc,+BAAd,EAA+CyoB,IAA/C;EACA;EA7BR;EAiCH;;;8BAEO;EACJ,WAAKP,MAAL,CAAYC,KAAZ;EACA,WAAKD,MAAL,CAAYE,KAAZ,GAAoB,CAApB;EACA,WAAKF,MAAL,CAAYG,SAAZ,GAAwB,CAAxB;EACA,WAAKH,MAAL,CAAY/3B,MAAZ,GAAqB,CAArB;EACA,WAAK+3B,MAAL,CAAYI,KAAZ,GAAoB,CAApB;EAEH;;;;;;ECnEL,IAAIY,SAAS,GAAG,CAAhB;;MACMC;;;;;EACF,mBAAYC,KAAZ,EAAmBC,OAAnB,EAA4BC,KAA5B,EAAmCC,KAAnC,EAA0CC,SAA1C,EAAqDC,SAArD,EAAgEpkC,MAAhE,EAAwE5H,IAAxE,EAA8EisC,UAA9E,EAA0FC,QAA1F,EAAoG;EAAA;;EAAA;;EAChG;EACAv2C,IAAAA,MAAM,CAACiuC,cAAP,wDAA4B,IAA5B,EAAkC;EAAE9qC,MAAAA,KAAK,EAAE2yC,SAAS;EAAlB,KAAlC;EACA,UAAKE,KAAL,GAAaA,KAAK,KAAK7uC,SAAV,GAAsB6uC,KAAtB,GAA8BD,OAAO,CAACS,aAAnD;EAEA,UAAKC,OAAL,GAAe,EAAf;EACA,UAAKR,OAAL,GAAeA,OAAO,KAAK9uC,SAAZ,GAAwB8uC,OAAxB,GAAkCF,OAAO,CAACW,eAAzD;EAEA,UAAKR,KAAL,GAAaA,KAAK,KAAK/uC,SAAV,GAAsB+uC,KAAtB,GAA8BrxB,mBAA3C;EACA,UAAKsxB,KAAL,GAAaA,KAAK,KAAKhvC,SAAV,GAAsBgvC,KAAtB,GAA8BtxB,mBAA3C;EAEA,UAAKuxB,SAAL,GAAiBA,SAAS,KAAKjvC,SAAd,GAA0BivC,SAA1B,GAAsClxB,YAAvD;EACA,UAAKmxB,SAAL,GAAiBA,SAAS,KAAKlvC,SAAd,GAA0BkvC,SAA1B,GAAsCjxB,wBAAvD;EAEA,UAAKkxB,UAAL,GAAkBA,UAAU,KAAKnvC,SAAf,GAA2BmvC,UAA3B,GAAwC,CAA1D;EAEA,UAAKrkC,MAAL,GAAcA,MAAM,KAAK9K,SAAX,GAAuB8K,MAAvB,GAAgCiU,UAA9C;EACA,UAAK7b,IAAL,GAAYA,IAAI,KAAKlD,SAAT,GAAqBkD,IAArB,GAA4Bgb,gBAAxC;EAEA,UAAK3R,MAAL,GAAc,IAAI03B,OAAJ,CAAY,CAAZ,EAAe,CAAf,CAAd;EACA,UAAKuL,MAAL,GAAc,IAAIvL,OAAJ,CAAY,CAAZ,EAAe,CAAf,CAAd;EACA,UAAKvW,MAAL,GAAc,IAAIuW,OAAJ,CAAY,CAAZ,EAAe,CAAf,CAAd;EACA,UAAK7T,QAAL,GAAgB,CAAhB;EAEA,UAAKqf,gBAAL,GAAwB,IAAxB;EACA,UAAK9tB,MAAL,GAAc,IAAIsO,OAAJ,EAAd;EAEA,UAAKyf,eAAL,GAAuB,IAAvB;EACA,UAAKC,gBAAL,GAAwB,KAAxB;EACA,UAAKC,KAAL,GAAa,IAAb;EACA,UAAKC,eAAL,GAAuB,CAAvB,CA9BgG;EAgChG;EACA;EACA;EACA;;EAEA,UAAK70B,OAAL,GAAe,CAAf;EACA,UAAK80B,QAAL,GAAgB,IAAhB;EAEA,UAAKlE,SAAL,GAAiB,IAAjB;EAxCgG;EA0CnG;;;;qCAMe;EAElB,WAAKjqB,MAAL,CAAYouB,cAAZ,CAA4B,KAAKxjC,MAAL,CAAY4J,CAAxC,EAA2C,KAAK5J,MAAL,CAAY6J,CAAvD,EAA0D,KAAKo5B,MAAL,CAAYr5B,CAAtE,EAAyE,KAAKq5B,MAAL,CAAYp5B,CAArF,EAAwF,KAAKga,QAA7F,EAAuG,KAAK1C,MAAL,CAAYvX,CAAnH,EAAsH,KAAKuX,MAAL,CAAYtX,CAAlI;EAEA;;;gCAEa;EAEb,WAAK4yB,IAAL,CAAW;EAAE9lC,QAAAA,IAAI,EAAE;EAAR,OAAX;EAEA;;;wBAdkBlH,OAAO;EACnB,UAAIA,KAAK,KAAK,IAAd,EAAoB,KAAKgf,OAAL;EACvB;;;;IA/CiBL;;EA+DtBi0B,OAAO,CAACS,aAAR,GAAwBrvC,SAAxB;EACA4uC,OAAO,CAACW,eAAR,GAA0BnwB,SAA1B;;EC1EA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAkCM4wB;;;EAEF,yBAAY7b,EAAZ,EAAgBmM,OAAhB,EAAyB2P,QAAzB,EAAmC;EAAA;;EAC/B,SAAK7b,GAAL,GAAWD,EAAX;EACA,SAAK+b,QAAL,GAAgB5P,OAAhB;EACA,SAAK6P,SAAL,GAAiBF,QAAjB;EACA,SAAKG,GAAL,GAAW,EAAX;EACA,SAAK52C,GAAL,GAAW,EAAX;EAEA,QAAI6F,CAAC,GAAG80B,EAAE,CAACkc,mBAAH,CAAuB/P,OAAvB,EAAgCnM,EAAE,CAACmc,eAAnC,CAAR;;EAEA,SAAK,IAAIl1C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiE,CAApB,EAAuB,EAAEjE,CAAzB,EAA4B;EAExB,UAAI8tC,IAAI,GAAG/U,EAAE,CAACoc,gBAAH,CAAoBjQ,OAApB,EAA6BllC,CAA7B,CAAX;EAAA,UACIo1C,IAAI,GAAGrc,EAAE,CAACsc,kBAAH,CAAsBnQ,OAAtB,EAA+B4I,IAAI,CAAC/sC,IAApC,CADX;EAGAu0C,MAAAA,YAAY,CAACxH,IAAD,EAAOsH,IAAP,EAAa,IAAb,CAAZ;EAEH;EAEJ;;;;+BAEQr0C,MAAMH,OAAO;EAElB,UAAIwvC,CAAC,GAAG,KAAKhyC,GAAL,CAAS2C,IAAT,CAAR;EAEA,UAAIqvC,CAAC,KAAKxrC,SAAV,EAAqBwrC,CAAC,CAACmF,QAAF,CAAW30C,KAAX,EAAkB,KAAKm0C,SAAvB;EAExB;;;kCAEWviB,QAAQzxB,MAAM;EAAE;EAExB,UAAIwjB,CAAC,GAAGiO,MAAM,CAACzxB,IAAD,CAAd;EAEA,UAAIwjB,CAAC,KAAK3f,SAAV,EAAqB,KAAK2wC,QAAL,CAAcx0C,IAAd,EAAoBwjB,CAApB;EAExB;;;6BACawU,IAAIic,KAAKj1C,QAAQ80C,UAAU;EAErC,WAAK,IAAI70C,CAAC,GAAG,CAAR,EAAWiE,CAAC,GAAG+wC,GAAG,CAACl1C,MAAxB,EAAgCE,CAAC,KAAKiE,CAAtC,EAAyC,EAAEjE,CAA3C,EAA8C;EAE1C,YAAIowC,CAAC,GAAG4E,GAAG,CAACh1C,CAAD,CAAX;EAAA,YACIukB,CAAC,GAAGxkB,MAAM,CAACqwC,CAAC,CAACp9B,EAAH,CADd;;EAGA,YAAIuR,CAAC,CAACkpB,WAAF,KAAkB,KAAtB,EAA6B;EAEzB;EACA2C,UAAAA,CAAC,CAACmF,QAAF,CAAWhxB,CAAC,CAAC3jB,KAAb,EAAoBi0C,QAApB;EAEH;EAEJ;EAEJ;;;mCACmBG,KAAKj1C,QAAQ;EAE7B,UAAIua,CAAC,GAAG,EAAR;;EAEA,WAAK,IAAIta,CAAC,GAAG,CAAR,EAAWiE,CAAC,GAAG+wC,GAAG,CAACl1C,MAAxB,EAAgCE,CAAC,KAAKiE,CAAtC,EAAyC,EAAEjE,CAA3C,EAA8C;EAE1C,YAAIowC,CAAC,GAAG4E,GAAG,CAACh1C,CAAD,CAAX;EACA,YAAIowC,CAAC,CAACp9B,EAAF,IAAQjT,MAAZ,EAAoBua,CAAC,CAAC1c,IAAF,CAAOwyC,CAAP;EAEvB;;EAED,aAAO91B,CAAP;EAEH;;;;;;MAICk7B;;;EACF,6BAAYzc,EAAZ,EAAgB/lB,EAAhB,EAAoB;EAAA;;EAEhB,SAAKgmB,GAAL,GAAWD,EAAX;EACA,SAAK/lB,EAAL,GAAUA,EAAV;EACA,SAAKgiC,GAAL,GAAW,EAAX;EACA,SAAK52C,GAAL,GAAW,EAAX;EACH;;;;+BAEQwC,OAAO;EAEZ;EACA;EAEA,UAAIo0C,GAAG,GAAG,KAAKA,GAAf;;EAEA,WAAK,IAAIh1C,CAAC,GAAG,CAAR,EAAWiE,CAAC,GAAG+wC,GAAG,CAACl1C,MAAxB,EAAgCE,CAAC,KAAKiE,CAAtC,EAAyC,EAAEjE,CAA3C,EAA8C;EAE1C,YAAIowC,CAAC,GAAG4E,GAAG,CAACh1C,CAAD,CAAX;EACAowC,QAAAA,CAAC,CAACmF,QAAF,CAAW30C,KAAK,CAACwvC,CAAC,CAACp9B,EAAH,CAAhB;EAEH;EAEJ;;;;;;;MAMCyiC,gBACF,uBAAY1c,EAAZ,EAAgB/lB,EAAhB,EAAoB0iC,UAApB,EAAgCN,IAAhC,EAAsC;EAAA;;EAClC,OAAKpc,GAAL,GAAWD,EAAX;EACA,OAAK/lB,EAAL,GAAUA,EAAV;EACA,OAAKoiC,IAAL,GAAYA,IAAZ;EACA,OAAKO,KAAL,GAAa,EAAb;EACA,OAAKJ,QAAL,GAAgBK,iBAAiB,CAACF,UAAU,CAAC5tC,IAAZ,CAAjC,CALkC;EASrC;;MAMC+tC,mBACF,0BAAY9c,EAAZ,EAAgB/lB,EAAhB,EAAoB0iC,UAApB,EAAgCN,IAAhC,EAAsC;EAAA;;EAClC,OAAKpc,GAAL,GAAWD,EAAX;EACA,OAAK/lB,EAAL,GAAUA,EAAV;EACA,OAAKoiC,IAAL,GAAYA,IAAZ;EACA,OAAKO,KAAL,GAAa,EAAb;EACA,OAAKjsB,IAAL,GAAYgsB,UAAU,CAAChsB,IAAvB;EACA,OAAK6rB,QAAL,GAAgBO,kBAAkB,CAACJ,UAAU,CAAC5tC,IAAZ,CAAlC,CANkC;EAUrC;;EAKL,SAAS8tC,iBAAT,CAA2B9tC,IAA3B,EAAiC;EAC7B,UAAQA,IAAR;EAEI,SAAK,MAAL;EAAa,aAAOiuC,UAAP;EAAmB;;EAChC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EACjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EACjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EAEjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EACjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EACjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EAEjC,SAAK,MAAL;EAAa,SAAK,MAAL;EAAa,aAAOC,UAAP;EAAmB;EAC7C;;EAEA,SAAK,MAAL;EAAa,SAAK,MAAL;EAAa,aAAOC,UAAP;EAAmB;;EAC7C,SAAK,MAAL;EAAa,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EAC9C,SAAK,MAAL;EAAa,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EAC9C,SAAK,MAAL;EAAa,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;EAjBlD;EAoBH;;EAED,SAASZ,kBAAT,CAA4BhuC,IAA5B,EAAkC;EAE9B,UAAQA,IAAR;EAEI,SAAK,MAAL;EAAa,aAAO6uC,WAAP;EAAoB;;EACjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EACjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EACjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EAEjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EACjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EACjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EAEjC,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;EACjC;;EAEA,SAAK,MAAL;EAAa,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EAC9C,SAAK,MAAL;EAAa,SAAK,MAAL;EAAa,aAAOX,WAAP;EAAoB;;EAC9C,SAAK,MAAL;EAAa,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;;EAC9C,SAAK,MAAL;EAAa,SAAK,MAAL;EAAa,aAAOC,WAAP;EAAoB;EAjBlD;EAqBH;;EAGD,SAASpB,YAAT,CAAsBI,UAAtB,EAAkCN,IAAlC,EAAwCgC,SAAxC,EAAmD;EAE/C,MAAIC,UAAU,GAAG,0BAAjB;EACA,MAAIC,IAAI,GAAG5B,UAAU,CAAC30C,IAAtB;EAAA,MACIw2C,UAAU,GAAGD,IAAI,CAACx3C,MADtB,CAH+C;;EAO/Cu3C,EAAAA,UAAU,CAACG,SAAX,GAAuB,CAAvB;;EAEA,SAAO,IAAP,EAAa;EAET,QAAIC,KAAK,GAAGJ,UAAU,CAAC9tB,IAAX,CAAgB+tB,IAAhB,CAAZ;EAAA,QACII,QAAQ,GAAGL,UAAU,CAACG,SAD1B;EAAA,QAGIxkC,EAAE,GAAGykC,KAAK,CAAC,CAAD,CAHd;EAAA,QAIIE,SAAS,GAAGF,KAAK,CAAC,CAAD,CAAL,KAAa,GAJ7B;EAAA,QAKIG,SAAS,GAAGH,KAAK,CAAC,CAAD,CALrB;EAOA,QAAIE,SAAJ,EAAe3kC,EAAE,GAAGA,EAAE,GAAG,CAAV,CATN;;EAWT,QAAI4kC,SAAS,KAAKhzC,SAAd,IAA2BgzC,SAAS,KAAK,GAAd,IAAqBF,QAAQ,GAAG,CAAX,KAAiBH,UAArE,EAAiF;EAE7E;EAEAM,MAAAA,UAAU,CAACT,SAAD,EAAYQ,SAAS,KAAKhzC,SAAd,GAClB,IAAI6wC,aAAJ,CAAkB2B,SAAS,CAACpe,GAA5B,EAAiChmB,EAAjC,EAAqC0iC,UAArC,EAAiDN,IAAjD,CADkB,GAElB,IAAIS,gBAAJ,CAAqBuB,SAAS,CAACpe,GAA/B,EAAoChmB,EAApC,EAAwC0iC,UAAxC,EAAoDN,IAApD,CAFM,CAAV;EAIA;EAEH,KAVD,MAUO;EAEH;EAEA,UAAIh3C,GAAG,GAAGg5C,SAAS,CAACh5C,GAApB;EAAA,UAAyB05C,IAAI,GAAG15C,GAAG,CAAC4U,EAAD,CAAnC;;EAEA,UAAI8kC,IAAI,KAAKlzC,SAAb,EAAwB;EAEpBkzC,QAAAA,IAAI,GAAG,IAAItC,iBAAJ,CAAsB4B,SAAS,CAACpe,GAAhC,EAAoChmB,EAApC,CAAP;EACA6kC,QAAAA,UAAU,CAACT,SAAD,EAAYU,IAAZ,CAAV;EAEH;;EAEDV,MAAAA,SAAS,GAAGU,IAAZ;EAEH;EAEJ;EAEJ;;EAED,SAASD,UAAT,CAAoBT,SAApB,EAA+BW,aAA/B,EAA8C;EAE1CX,EAAAA,SAAS,CAACpC,GAAV,CAAcp3C,IAAd,CAAmBm6C,aAAnB;EACAX,EAAAA,SAAS,CAACh5C,GAAV,CAAc25C,aAAa,CAAC/kC,EAA5B,IAAkC+kC,aAAlC;EAEH;;;EAGD,IAAIC,aAAa,GAAG,EAApB;EACA,IAAIC,aAAa,GAAG,EAApB;EAEA,IAAIC,UAAU,GAAG;EACbC,EAAAA,SAAS,EAAE,IAAI7P,YAAJ,CAAiB,CAAjB,CADE;EAEb8P,EAAAA,SAAS,EAAE,IAAI9P,YAAJ,CAAiB,CAAjB,CAFE;EAGb+P,EAAAA,SAAS,EAAE,IAAI/P,YAAJ,CAAiB,EAAjB,CAHE;EAIbgQ,EAAAA,YAAY,EAAE,IAAI9E,OAAJ,EAJD;EAKb;EACA+E,EAAAA,WANa,uBAMDnpC,CANC,EAMEG,CANF,EAMK;EAEd,QAAIH,CAAC,CAACtP,MAAF,KAAayP,CAAC,CAACzP,MAAnB,EAA2B,OAAO,KAAP;;EAE3B,SAAK,IAAIE,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGoD,CAAC,CAACtP,MAAtB,EAA8BE,CAAC,GAAGgM,CAAlC,EAAqChM,CAAC,EAAtC,EAA0C;EAEtC,UAAIoP,CAAC,CAACpP,CAAD,CAAD,KAASuP,CAAC,CAACvP,CAAD,CAAd,EAAmB,OAAO,KAAP;EAEtB;;EAED,WAAO,IAAP;EAEH,GAlBY;EAmBbosC,EAAAA,SAnBa,qBAmBHh9B,CAnBG,EAmBAG,CAnBA,EAmBG;EAEZ,SAAK,IAAIvP,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGuD,CAAC,CAACzP,MAAtB,EAA8BE,CAAC,GAAGgM,CAAlC,EAAqChM,CAAC,EAAtC,EAA0C;EAEtCoP,MAAAA,CAAC,CAACpP,CAAD,CAAD,GAAOuP,CAAC,CAACvP,CAAD,CAAR;EAEH;EAEJ,GA3BY;EA4BbmC,EAAAA,OA5Ba,mBA4BL3B,KA5BK,EA4BEg4C,OA5BF,EA4BWC,SA5BX,EA4BsB;EAE/B,QAAIC,SAAS,GAAGl4C,KAAK,CAAC,CAAD,CAArB;EAEA,QAAIk4C,SAAS,IAAI,CAAb,IAAkBA,SAAS,GAAG,CAAlC,EAAqC,OAAOl4C,KAAP,CAJN;EAM/B;;EAEA,QAAIyD,CAAC,GAAGu0C,OAAO,GAAGC,SAAlB;EAAA,QACIn+B,CAAC,GAAG09B,aAAa,CAAC/zC,CAAD,CADrB;;EAGA,QAAIqW,CAAC,KAAK1V,SAAV,EAAqB;EAEjB0V,MAAAA,CAAC,GAAG,IAAIguB,YAAJ,CAAiBrkC,CAAjB,CAAJ;EACA+zC,MAAAA,aAAa,CAAC/zC,CAAD,CAAb,GAAmBqW,CAAnB;EAEH;;EAED,QAAIk+B,OAAO,KAAK,CAAhB,EAAmB;EAEfE,MAAAA,SAAS,CAACC,OAAV,CAAkBr+B,CAAlB,EAAqB,CAArB;;EAEA,WAAK,IAAIta,CAAC,GAAG,CAAR,EAAWmR,MAAM,GAAG,CAAzB,EAA4BnR,CAAC,KAAKw4C,OAAlC,EAA2C,EAAEx4C,CAA7C,EAAgD;EAE5CmR,QAAAA,MAAM,IAAIsnC,SAAV;EACAj4C,QAAAA,KAAK,CAACR,CAAD,CAAL,CAAS24C,OAAT,CAAiBr+B,CAAjB,EAAoBnJ,MAApB;EAEH;EAEJ;;EAED,WAAOmJ,CAAP;EAEH,GA7DY;EA8Dbs+B,EAAAA,aA9Da,yBA8DC/D,QA9DD,EA8DW5wC,CA9DX,EA8Dc;EAEvB,QAAIqW,CAAC,GAAG29B,aAAa,CAACh0C,CAAD,CAArB;;EAEA,QAAIqW,CAAC,KAAK1V,SAAV,EAAqB;EAEjB0V,MAAAA,CAAC,GAAG,IAAIquB,UAAJ,CAAe1kC,CAAf,CAAJ;EACAg0C,MAAAA,aAAa,CAACh0C,CAAD,CAAb,GAAmBqW,CAAnB;EAEH;;EAED,SAAK,IAAIta,CAAC,GAAG,CAAb,EAAgBA,CAAC,KAAKiE,CAAtB,EAAyB,EAAEjE,CAA3B;EACIsa,MAAAA,CAAC,CAACta,CAAD,CAAD,GAAO60C,QAAQ,CAACgE,gBAAT,EAAP;EADJ;;EAGA,WAAOv+B,CAAP;EAEH;EA9EY,CAAjB;;EAoFA,SAASy7B,UAAT,CAAoBxxB,CAApB,EAAuB;EAEnB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;EAEA,MAAIA,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAjB,EAAoB;;EAEpB,OAAKyU,GAAL,CAAS8f,SAAT,CAAmB,KAAK1D,IAAxB,EAA8B7wB,CAA9B;;EAEAoxB,EAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAX;EAEH;;EAED,SAASgyB,UAAT,CAAoBhyB,CAApB,EAAuB;EAEnB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;EAEA,MAAIA,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAjB,EAAoB;;EAEpB,OAAKyU,GAAL,CAAS+f,SAAT,CAAmB,KAAK3D,IAAxB,EAA8B7wB,CAA9B;;EAEAoxB,EAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAX;EAEH;;;EAID,SAASyxB,WAAT,CAAqBzxB,CAArB,EAAwB;EAEpB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;;EAEA,MAAIpxB,CAAC,CAACxJ,CAAF,KAAQnW,SAAZ,EAAuB;EAAE;EAErB,QAAI+wC,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAACxJ,CAAf,IAAoB46B,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAACvJ,CAAvC,EAA0C;EAEtC,WAAKge,GAAL,CAASggB,SAAT,CAAmB,KAAK5D,IAAxB,EAA8B7wB,CAAC,CAACxJ,CAAhC,EAAmCwJ,CAAC,CAACvJ,CAArC;;EAEA26B,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACxJ,CAAb;EACA46B,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACvJ,CAAb;EAEH;EAEJ,GAXD,MAWO;EAAE;EAEL,QAAIk9B,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpxB,CAA9B,CAAJ,EAAsC;;EAEtC,SAAKyU,GAAL,CAASigB,UAAT,CAAoB,KAAK7D,IAAzB,EAA+B7wB,CAA/B;;EAEA2zB,IAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpxB,CAA5B;EAEH;EAEJ;;EAED,SAAS0xB,WAAT,CAAqB1xB,CAArB,EAAwB;EAEpB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;;EAEA,MAAIpxB,CAAC,CAACxJ,CAAF,KAAQnW,SAAZ,EAAuB;EAAE;EAErB,QAAI+wC,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAACxJ,CAAf,IAAoB46B,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAACvJ,CAAnC,IAAwC26B,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAACJ,CAA3D,EAA8D;EAE1D,WAAK6U,GAAL,CAASkgB,SAAT,CAAmB,KAAK9D,IAAxB,EAA8B7wB,CAAC,CAACxJ,CAAhC,EAAmCwJ,CAAC,CAACvJ,CAArC,EAAwCuJ,CAAC,CAACJ,CAA1C;;EAEAwxB,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACxJ,CAAb;EACA46B,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACvJ,CAAb;EACA26B,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACJ,CAAb;EAEH;EAEJ,GAZD,MAYO,IAAII,CAAC,CAACjK,CAAF,KAAQ1V,SAAZ,EAAuB;EAAE;EAE5B,QAAI+wC,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAACjK,CAAf,IAAoBq7B,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAAC0E,CAAnC,IAAwC0sB,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAAChV,CAA3D,EAA8D;EAE1D,WAAKypB,GAAL,CAASkgB,SAAT,CAAmB,KAAK9D,IAAxB,EAA8B7wB,CAAC,CAACjK,CAAhC,EAAmCiK,CAAC,CAAC0E,CAArC,EAAwC1E,CAAC,CAAChV,CAA1C;;EAEAomC,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACjK,CAAb;EACAq7B,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAAC0E,CAAb;EACA0sB,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAAChV,CAAb;EAEH;EAEJ,GAZM,MAYA;EAAE;EAEL,QAAI2oC,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpxB,CAA9B,CAAJ,EAAsC;;EAEtC,SAAKyU,GAAL,CAASmgB,UAAT,CAAoB,KAAK/D,IAAzB,EAA+B7wB,CAA/B;;EAEA2zB,IAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpxB,CAA5B;EAEH;EAEJ;;EAED,SAAS2xB,WAAT,CAAqB3xB,CAArB,EAAwB;EAEpB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;;EAEA,MAAIpxB,CAAC,CAACxJ,CAAF,KAAQnW,SAAZ,EAAuB;EAAE;EAErB,QAAI+wC,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAACxJ,CAAf,IAAoB46B,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAACvJ,CAAnC,IAAwC26B,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAACJ,CAAvD,IAA4DwxB,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAACH,CAA/E,EAAkF;EAE9E,WAAK4U,GAAL,CAASogB,SAAT,CAAmB,KAAKhE,IAAxB,EAA8B7wB,CAAC,CAACxJ,CAAhC,EAAmCwJ,CAAC,CAACvJ,CAArC,EAAwCuJ,CAAC,CAACJ,CAA1C,EAA6CI,CAAC,CAACH,CAA/C;;EAEAuxB,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACxJ,CAAb;EACA46B,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACvJ,CAAb;EACA26B,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACJ,CAAb;EACAwxB,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACH,CAAb;EAEH;EAEJ,GAbD,MAaM,IAAGG,CAAC,CAACjK,CAAF,KAAO1V,SAAV,EAAoB;EAAE;EACxB,QAAI+wC,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAACjK,CAAf,IAAoBq7B,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAAC0E,CAAnC,IAAwC0sB,KAAK,CAAC,CAAD,CAAL,KAAapxB,CAAC,CAAChV,CAAvD,IAA4DomC,KAAK,CAAC,CAAD,CAAL,KAAWpxB,CAAC,CAACnV,CAA7E,EAAgF;EAE5E,WAAK4pB,GAAL,CAASogB,SAAT,CAAmB,KAAKhE,IAAxB,EAA8B7wB,CAAC,CAACjK,CAAhC,EAAmCiK,CAAC,CAAC0E,CAArC,EAAwC1E,CAAC,CAAChV,CAA1C,EAA4CgV,CAAC,CAACnV,CAA9C;;EAEAumC,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACjK,CAAb;EACAq7B,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAAC0E,CAAb;EACA0sB,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAAChV,CAAb;EACAomC,MAAAA,KAAK,CAAC,CAAD,CAAL,GAAWpxB,CAAC,CAACnV,CAAb;EAEH;EACJ,GAXK,MAWC;EAAE;EAEL,QAAI8oC,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpxB,CAA9B,CAAJ,EAAsC;;EAEtC,SAAKyU,GAAL,CAASqgB,UAAT,CAAoB,KAAKjE,IAAzB,EAA+B7wB,CAA/B;;EAEA2zB,IAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpxB,CAA5B;EAEH;EAEJ;;;EAID,SAAS4xB,WAAT,CAAqB5xB,CAArB,EAAwB;EAEpB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;EACA,MAAInxB,QAAQ,GAAGD,CAAC,CAACC,QAAjB;;EAEA,MAAIA,QAAQ,KAAK5f,SAAjB,EAA4B;EAAG;EAE3B,QAAIszC,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpxB,CAA9B,CAAJ,EAAsC;;EAEtC,SAAKyU,GAAL,CAASsgB,gBAAT,CAA0B,KAAKlE,IAA/B,EAAqC,KAArC,EAA4C7wB,CAA5C;;EAEA2zB,IAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpxB,CAA5B;EAEH,GARD,MAQO;EAEH,QAAI2zB,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BnxB,QAA9B,CAAJ,EAA6C;EAE7C0zB,IAAAA,UAAU,CAACC,SAAX,CAAqBlkC,GAArB,CAAyBuQ,QAAzB;;EAEA,SAAKwU,GAAL,CAASsgB,gBAAT,CAA0B,KAAKlE,IAA/B,EAAqC,KAArC,EAA4C8C,UAAU,CAACC,SAAvD;;EAEAD,IAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BnxB,QAA5B;EAEH;EAEJ;;EAED,SAAS4xB,WAAT,CAAqB7xB,CAArB,EAAwB;EAEpB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;EACA,MAAInxB,QAAQ,GAAGD,CAAC,CAACC,QAAjB;;EAEA,MAAIA,QAAQ,KAAK5f,SAAjB,EAA4B;EAExB,QAAIszC,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpxB,CAA9B,CAAJ,EAAsC;;EAEtC,SAAKyU,GAAL,CAASugB,gBAAT,CAA0B,KAAKnE,IAA/B,EAAqC,KAArC,EAA4C7wB,CAA5C;;EAEA2zB,IAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpxB,CAA5B;EAEH,GARD,MAQO;EAEH,QAAI2zB,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BnxB,QAA9B,CAAJ,EAA6C;EAE7C0zB,IAAAA,UAAU,CAACE,SAAX,CAAqBnkC,GAArB,CAAyBuQ,QAAzB;;EAEA,SAAKwU,GAAL,CAASugB,gBAAT,CAA0B,KAAKnE,IAA/B,EAAqC,KAArC,EAA4C8C,UAAU,CAACE,SAAvD;;EAEAF,IAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BnxB,QAA5B;EAEH;EAEJ;;EAED,SAAS6xB,WAAT,CAAqB9xB,CAArB,EAAwB;EAEpB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;EACA,MAAInxB,QAAQ,GAAGD,CAAC,CAACC,QAAjB;;EAEA,MAAIA,QAAQ,KAAK5f,SAAjB,EAA4B;EAExB,QAAIszC,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpxB,CAA9B,CAAJ,EAAsC;;EAEtC,SAAKyU,GAAL,CAASwgB,gBAAT,CAA0B,KAAKpE,IAA/B,EAAqC,KAArC,EAA4C7wB,CAA5C;;EAEA2zB,IAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpxB,CAA5B;EAEH,GARD,MAQO;EAEH,QAAI2zB,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BnxB,QAA9B,CAAJ,EAA6C;EAE7C0zB,IAAAA,UAAU,CAACG,SAAX,CAAqBpkC,GAArB,CAAyBuQ,QAAzB;;EAEA,SAAKwU,GAAL,CAASwgB,gBAAT,CAA0B,KAAKpE,IAA/B,EAAqC,KAArC,EAA4C8C,UAAU,CAACG,SAAvD;;EAEAH,IAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BnxB,QAA5B;EAEH;EAEJ;;;EAID,SAAS8xB,UAAT,CAAoB/xB,CAApB,EAAuBswB,QAAvB,EAAiC;EAE7B,MAAIc,KAAK,GAAG,KAAKA,KAAjB;EACA,MAAI8D,IAAI,GAAG5E,QAAQ,CAACgE,gBAAT,EAAX;;EAEA,MAAIlD,KAAK,CAAC,CAAD,CAAL,KAAa8D,IAAjB,EAAuB;EAEnB,SAAKzgB,GAAL,CAAS+f,SAAT,CAAmB,KAAK3D,IAAxB,EAA8BqE,IAA9B;;EACA9D,IAAAA,KAAK,CAAC,CAAD,CAAL,GAAW8D,IAAX;EAEH;;EAED5E,EAAAA,QAAQ,CAAC6E,YAAT,CAAsBn1B,CAAC,IAAI2zB,UAAU,CAACI,YAAtC,EAAoDmB,IAApD;EAEH;EAID;EACA;EAEA;EAEA;EACA;EAEA;EAEA;EAEA;EAEA;;;EAEA,SAASjD,WAAT,CAAqBjyB,CAArB,EAAwB;EAEpB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;EAEA,MAAIuC,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpxB,CAA9B,CAAJ,EAAsC;;EAEtC,OAAKyU,GAAL,CAAS2gB,UAAT,CAAoB,KAAKvE,IAAzB,EAA+B7wB,CAA/B;;EAEA2zB,EAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpxB,CAA5B;EAEH;;EAED,SAASkyB,WAAT,CAAqBlyB,CAArB,EAAwB;EAEpB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;EAEA,MAAIuC,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpxB,CAA9B,CAAJ,EAAsC;;EAEtC,OAAKyU,GAAL,CAAS4gB,UAAT,CAAoB,KAAKxE,IAAzB,EAA+B7wB,CAA/B;;EAEA2zB,EAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpxB,CAA5B;EAEH;;EAED,SAASmyB,WAAT,CAAqBnyB,CAArB,EAAwB;EAEpB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;EAEA,MAAIuC,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpxB,CAA9B,CAAJ,EAAsC;;EAEtC,OAAKyU,GAAL,CAAS6gB,UAAT,CAAoB,KAAKzE,IAAzB,EAA+B7wB,CAA/B;;EAEA2zB,EAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpxB,CAA5B;EAEH;;;EAKD,SAASoyB,WAAT,CAAqBpyB,CAArB,EAAwB;EAEpB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;EAEA,MAAIuC,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpxB,CAA9B,CAAJ,EAAsC;;EAEtC,OAAKyU,GAAL,CAAS8gB,UAAT,CAAoB,KAAK1E,IAAzB,EAA+B7wB,CAA/B;;EAEA2zB,EAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpxB,CAA5B;EAEH;;EACD,SAAS4yB,WAAT,CAAqB5yB,CAArB,EAAwB;EAEpB,MAAIoxB,KAAK,GAAG,KAAKA,KAAjB;EAEA,MAAIuC,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpxB,CAA9B,CAAJ,EAAsC;;EAEtC,OAAKyU,GAAL,CAAS+gB,UAAT,CAAoB,KAAK3E,IAAzB,EAA+B7wB,CAA/B;;EAEA2zB,EAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpxB,CAA5B;EAEH;;EAGD,SAASqyB,WAAT,CAAqBryB,CAArB,EAAwB;EAEpB,OAAKyU,GAAL,CAASigB,UAAT,CAAoB,KAAK7D,IAAzB,EAA+B8C,UAAU,CAAC/1C,OAAX,CAAmBoiB,CAAnB,EAAsB,KAAKmF,IAA3B,EAAiC,CAAjC,CAA/B;EAEH;;EAED,SAASmtB,WAAT,CAAqBtyB,CAArB,EAAwB;EAEpB,OAAKyU,GAAL,CAASmgB,UAAT,CAAoB,KAAK/D,IAAzB,EAA+B8C,UAAU,CAAC/1C,OAAX,CAAmBoiB,CAAnB,EAAsB,KAAKmF,IAA3B,EAAiC,CAAjC,CAA/B;EAEH;;EAED,SAASotB,WAAT,CAAqBvyB,CAArB,EAAwB;EAEpB,OAAKyU,GAAL,CAASqgB,UAAT,CAAoB,KAAKjE,IAAzB,EAA+B8C,UAAU,CAAC/1C,OAAX,CAAmBoiB,CAAnB,EAAsB,KAAKmF,IAA3B,EAAiC,CAAjC,CAA/B;EAEH;;EAGD,SAASqtB,WAAT,CAAqBxyB,CAArB,EAAwB;EAEpB,OAAKyU,GAAL,CAASsgB,gBAAT,CAA0B,KAAKlE,IAA/B,EAAqC,KAArC,EAA4C8C,UAAU,CAAC/1C,OAAX,CAAmBoiB,CAAnB,EAAsB,KAAKmF,IAA3B,EAAiC,CAAjC,CAA5C;EAEH;;EAED,SAASstB,WAAT,CAAqBzyB,CAArB,EAAwB;EAEpB,OAAKyU,GAAL,CAASugB,gBAAT,CAA0B,KAAKnE,IAA/B,EAAqC,KAArC,EAA4C8C,UAAU,CAAC/1C,OAAX,CAAmBoiB,CAAnB,EAAsB,KAAKmF,IAA3B,EAAiC,CAAjC,CAA5C;EAEH;;EAED,SAASutB,WAAT,CAAqB1yB,CAArB,EAAwB;EAEpB,OAAKyU,GAAL,CAASwgB,gBAAT,CAA0B,KAAKpE,IAA/B,EAAqC,KAArC,EAA4C8C,UAAU,CAAC/1C,OAAX,CAAmBoiB,CAAnB,EAAsB,KAAKmF,IAA3B,EAAiC,EAAjC,CAA5C;EAEH;;;EAID,SAASwtB,WAAT,CAAqB3yB,CAArB,EAAwBswB,QAAxB,EAAkC;EAE9B,MAAIc,KAAK,GAAG,KAAKA,KAAjB;EACA,MAAI1xC,CAAC,GAAGsgB,CAAC,CAACzkB,MAAV;EAEA,MAAIymC,KAAK,GAAG2R,UAAU,CAACU,aAAX,CAAyB/D,QAAzB,EAAmC5wC,CAAnC,CAAZ;;EAEA,MAAIi0C,UAAU,CAACK,WAAX,CAAuB5C,KAAvB,EAA8BpP,KAA9B,MAAyC,KAA7C,EAAoD;EAEhD,SAAKvN,GAAL,CAAS+gB,UAAT,CAAoB,KAAK3E,IAAzB,EAA+B7O,KAA/B;;EACA2R,IAAAA,UAAU,CAAC9L,SAAX,CAAqBuJ,KAArB,EAA4BpP,KAA5B;EAEH;;EAED,OAAK,IAAIvmC,CAAC,GAAG,CAAb,EAAgBA,CAAC,KAAKiE,CAAtB,EAAyB,EAAEjE,CAA3B,EAA8B;EAE1B60C,IAAAA,QAAQ,CAAC6E,YAAT,CAAsBn1B,CAAC,CAACvkB,CAAD,CAAD,IAAQk4C,UAAU,CAACI,YAAzC,EAAuD/R,KAAK,CAACvmC,CAAD,CAA5D;EAEH;EAEJ;;ECluBD,SAASg6C,cAAT,CAAyB7jC,MAAzB,EAAkC;EAEjC,MAAIw8B,KAAK,GAAGx8B,MAAM,CAACiG,KAAP,CAAc,IAAd,CAAZ;;EAEA,OAAM,IAAIpc,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG2yC,KAAK,CAAC7yC,MAA3B,EAAmCE,CAAC,EAApC,EAA0C;EAEzC2yC,IAAAA,KAAK,CAAE3yC,CAAF,CAAL,GAAeA,CAAC,GAAG,CAAN,GAAY,IAAZ,GAAmB2yC,KAAK,CAAE3yC,CAAF,CAArC;EAEA;;EAED,SAAO2yC,KAAK,CAACsH,IAAN,CAAY,IAAZ,CAAP;EAEA;;EAED,SAASC,WAAT,CAAsBnhB,EAAtB,EAA0BjxB,IAA1B,EAAgCqO,MAAhC,EAAyC;EAExC,MAAIgkC,MAAM,GAAGphB,EAAE,CAACqhB,YAAH,CAAiBtyC,IAAjB,CAAb;EAEAixB,EAAAA,EAAE,CAACshB,YAAH,CAAiBF,MAAjB,EAAyBhkC,MAAzB;EACA4iB,EAAAA,EAAE,CAACuhB,aAAH,CAAkBH,MAAlB;;EAEA,MAAKphB,EAAE,CAACwhB,kBAAH,CAAuBJ,MAAvB,EAA+BphB,EAAE,CAACyhB,cAAlC,MAAuD,KAA5D,EAAoE;EAEnEj1B,IAAAA,OAAO,CAAC8E,KAAR,CAAe,wCAAf;EAEA;;EAED,MAAK0O,EAAE,CAAC0hB,gBAAH,CAAqBN,MAArB,MAAkC,EAAvC,EAA4C;EAE3C50B,IAAAA,OAAO,CAACC,IAAR,CAAc,oCAAd,EAAoD1d,IAAI,KAAKixB,EAAE,CAAC+B,aAAZ,GAA4B,QAA5B,GAAuC,UAA3F,EAAuG/B,EAAE,CAAC0hB,gBAAH,CAAqBN,MAArB,CAAvG,EAAsIH,cAAc,CAAE7jC,MAAF,CAApJ;EAEA,GAjBuC;EAoBxC;;;EAEA,SAAOgkC,MAAP;EAEA;;ECnCD;;;;;;EAKA,IAAIO,cAAc,GAAG,CAArB;;MAEMC;;;EACF,wBAAY5hB,EAAZ,EAAgBE,UAAhB,EAA4BmM,QAA5B,EAAsCwV,IAAtC,EAA4CT,MAA5C,EAAoD1gB,UAApD,EAAgE;EAAA;;EAC5D,SAAKT,GAAL,GAAWD,EAAX;EACA,SAAK8hB,QAAL,GAAgBzV,QAAQ,CAAC0V,OAAzB;EAEA,SAAKC,eAAL,GAAuBn2C,SAAvB;EACA,SAAKo2C,iBAAL,GAAyBp2C,SAAzB;EAEA,SAAK7D,IAAL,GAAYo5C,MAAM,CAACp5C,IAAnB;EACA,SAAKiS,EAAL,GAAU0nC,cAAc,EAAxB;EACA,SAAKE,IAAL,GAAYA,IAAZ;EACA,SAAKK,SAAL,GAAiB,CAAjB;EACA,SAAK/V,OAAL,GAAe,IAAf;EACA,SAAKwM,YAAL,GAAoB,EAApB;EACA,SAAKC,cAAL,GAAsB,EAAtB;;EAGA,SAAKuJ,KAAL,CAAWniB,EAAX,EAAeE,UAAf,EAA2BmM,QAA3B,EAAqC+U,MAArC,EAA6C1gB,UAA7C;EAEH;;;;4BACKV,IAAIE,YAAYmM,UAAU+U,QAAQ1gB,YAAY;EAEhD,UAAIiY,YAAY,GAAGyI,MAAM,CAACzI,YAA1B;EACA,UAAIC,cAAc,GAAGwI,MAAM,CAACxI,cAA5B;EAEA,UAAIwJ,gBAAgB,GAAGC,kBAAkB,CAAChW,QAAQ,CAACnM,UAAV,EAAsBQ,UAAtB,EAAkCR,UAAlC,CAAzC;EAEA,UAAIoiB,aAAa,GAAGC,eAAe,CAAC,KAAKT,QAAN,CAAnC;EAEA,UAAI3V,OAAO,GAAG,KAAKA,OAAL,GAAenM,EAAE,CAACwiB,aAAH,EAA7B;EAEA,UAAIC,YAAJ,EAAkBC,cAAlB;;EAEA,UAAIrW,QAAQ,CAACsW,mBAAb,EAAkC;EAE9BF,QAAAA,YAAY,GAAG,CAEXH,aAFW,EAIb98C,MAJa,CAINo9C,eAJM,EAIW1B,IAJX,CAIgB,IAJhB,CAAf;;EAMA,YAAIuB,YAAY,CAAC17C,MAAb,GAAsB,CAA1B,EAA6B;EAEzB07C,UAAAA,YAAY,IAAI,IAAhB;EAEH;;EAEDC,QAAAA,cAAc,GAAG,CAEbN,gBAFa,EAGbE,aAHa,EAKf98C,MALe,CAKRo9C,eALQ,EAKS1B,IALT,CAKc,IALd,CAAjB;;EAOA,YAAIwB,cAAc,CAAC37C,MAAf,GAAwB,CAA5B,EAA+B;EAE3B27C,UAAAA,cAAc,IAAI,IAAlB;EAEH;EAEJ,OA3BD,MA2BO;EACHD,QAAAA,YAAY,GAAG,CAEX,eAAe/hB,UAAU,CAACkB,SAA1B,GAAsC,SAF3B,EAGX,eAAelB,UAAU,CAACkB,SAA1B,GAAsC,OAH3B,EAKX,yBAAyBwf,MAAM,CAACp5C,IALrB;EAQX04B,QAAAA,UAAU,CAACr7B,GAAX,GAAiB,iBAAjB,GAAqC,EAR1B;EAWXq7B,QAAAA,UAAU,CAAC4R,YAAX,GAA0B,mBAA1B,GAAgD,EAXrC,EAaX5R,UAAU,CAACmiB,WAAX,GAAyB,sBAAzB,GAAkD,EAbvC,EAcXniB,UAAU,CAACgM,SAAX,GAAuB,oBAAvB,GAA8C,EAdnC;EAiBXhM,QAAAA,UAAU,CAACoiB,eAAX,GAA6B,6BAA7B,GAA6D,EAjBlD;EAoBXpiB,QAAAA,UAAU,CAACwY,MAAX,GAAoB,kBAApB,GAAyC,EApB9B,EAsBX,2BAtBW,EAuBX,+BAvBW,EAwBX,gCAxBW,EAyBX,0BAzBW,EA0BX,4BA1BW,EA2BX,8BA3BW,EA6BX,0BA7BW,EA8BX,wBA9BW,EA+BX,oBA/BW,EAiCX,kBAjCW,EAmCX,wBAnCW,EAqCX,QArCW,EAuCX,IAvCW,EAyCb1zC,MAzCa,CAyCNo9C,eAzCM,EAyCW1B,IAzCX,CAyCgB,IAzChB,CAAf;EA2CAwB,QAAAA,cAAc,GAAG,CAEb,eAAehiB,UAAU,CAACkB,SAA1B,GAAsC,SAFzB,EAGb,eAAelB,UAAU,CAACkB,SAA1B,GAAsC,OAHzB,EAKb,yBAAyBwf,MAAM,CAACp5C,IALnB,EAQb04B,UAAU,CAACr7B,GAAX,GAAiB,iBAAjB,GAAqC,EARxB,EASbq7B,UAAU,CAAC4R,YAAX,GAA0B,mBAA1B,GAAgD,EATnC,EAWb5R,UAAU,CAACmiB,WAAX,GAAyB,sBAAzB,GAAkD,EAXrC,EAYbniB,UAAU,CAACgM,SAAX,GAAuB,oBAAvB,GAA8C,EAZjC,EAcbhM,UAAU,CAACuE,kBAAX,GAAgC,6BAAhC,GAAgE,EAdnD;EAiBbvE,QAAAA,UAAU,CAACwY,MAAX,GAAoB,kBAApB,GAAyC,EAjB5B,EAmBb,0BAnBa,EAoBb,8BApBa,EAsBb,IAtBa,EAwBf1zC,MAxBe,CAwBRo9C,eAxBQ,EAwBS1B,IAxBT,CAwBc,IAxBd,CAAjB;EAyBH;;EACDvI,MAAAA,YAAY,GAAGoK,gBAAgB,CAACpK,YAAD,EAAejY,UAAf,CAA/B;EACAkY,MAAAA,cAAc,GAAGmK,gBAAgB,CAACnK,cAAD,EAAiBlY,UAAjB,CAAjC;EAEAiY,MAAAA,YAAY,GAAGqK,WAAW,CAACrK,YAAD,CAA1B;EACAC,MAAAA,cAAc,GAAGoK,WAAW,CAACpK,cAAD,CAA5B;EAEA,UAAIqK,UAAU,GAAGR,YAAY,GAAG9J,YAAhC;EACA,UAAIuK,YAAY,GAAGR,cAAc,GAAG9J,cAApC,CArHgD;EAwHhD;;EAEA,UAAIuK,cAAc,GAAG,KAAKxK,YAAL,GAAoBwI,WAAW,CAACnhB,EAAD,EAAKA,EAAE,CAAC+B,aAAR,EAAuBkhB,UAAvB,CAApD;EACA,UAAIG,gBAAgB,GAAG,KAAKxK,cAAL,GAAsBuI,WAAW,CAACnhB,EAAD,EAAKA,EAAE,CAACiC,eAAR,EAAyBihB,YAAzB,CAAxD;EAEAljB,MAAAA,EAAE,CAACqjB,YAAH,CAAgBlX,OAAhB,EAAyBgX,cAAzB;EACAnjB,MAAAA,EAAE,CAACqjB,YAAH,CAAgBlX,OAAhB,EAAyBiX,gBAAzB;EAGApjB,MAAAA,EAAE,CAACsjB,WAAH,CAAenX,OAAf;EAEA,UAAIoX,UAAU,GAAGvjB,EAAE,CAACwjB,iBAAH,CAAqBrX,OAArB,EAA8BsX,IAA9B,EAAjB;EACA,UAAIC,SAAS,GAAG1jB,EAAE,CAAC0hB,gBAAH,CAAoByB,cAApB,EAAoCM,IAApC,EAAhB;EACA,UAAIE,WAAW,GAAG3jB,EAAE,CAAC0hB,gBAAH,CAAoB0B,gBAApB,EAAsCK,IAAtC,EAAlB,CArIgD;EAyIhD;;EAEA,UAAIzjB,EAAE,CAACkc,mBAAH,CAAuB/P,OAAvB,EAAgCnM,EAAE,CAAC4jB,WAAnC,MAAoD,KAAxD,EAA+D;EAG3Dp3B,QAAAA,OAAO,CAAC8E,KAAR,CAAc,8BAAd,EAA8C0O,EAAE,CAAC6jB,QAAH,EAA9C,EAA6D,oBAA7D,EAAmF7jB,EAAE,CAACkc,mBAAH,CAAuB/P,OAAvB,EAAgCnM,EAAE,CAAC8jB,eAAnC,CAAnF,EAAwI,sBAAxI,EAAgKP,UAAhK,EAA4KG,SAA5K,EAAuLC,WAAvL;EAEH,OALD,MAKO,IAAIJ,UAAU,KAAK,EAAnB,EAAuB;EAE1B/2B,QAAAA,OAAO,CAACC,IAAR,CAAa,sCAAb,EAAqD82B,UAArD;EAEH,OApJ+C;;;EAyJhDvjB,MAAAA,EAAE,CAAC+jB,YAAH,CAAgBZ,cAAhB;EACAnjB,MAAAA,EAAE,CAAC+jB,YAAH,CAAgBX,gBAAhB;EACH;;;oCACa;EAEV,UAAIpjB,EAAE,GAAG,KAAKC,GAAd;EACA,UAAIkM,OAAO,GAAG,KAAKA,OAAnB;;EAEA,UAAI,KAAK6V,eAAL,KAAyBn2C,SAA7B,EAAwC;EACpC;EACA;EACA;EACA,aAAKm2C,eAAL,GAAuB,IAAInG,aAAJ,CAAkB7b,EAAlB,EAAsBmM,OAAtB,CAAvB;EAEH;;EAED,aAAO,KAAK6V,eAAZ;EAEH;;;sCAEe;EAAE;EACd,UAAIhiB,EAAE,GAAG,KAAKC,GAAd;EACA,UAAIkM,OAAO,GAAG,KAAKA,OAAnB;;EAEA,UAAI,KAAK8V,iBAAL,KAA2Bp2C,SAA/B,EAA0C;EACtC,aAAKo2C,iBAAL,GAAyB,EAAzB;EACA,YAAI/2C,CAAC,GAAG80B,EAAE,CAACkc,mBAAH,CAAuB/P,OAAvB,EAAgCnM,EAAE,CAACgkB,iBAAnC,CAAR;;EAEA,aAAK,IAAI/8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiE,CAApB,EAAuBjE,CAAC,EAAxB,EAA4B;EAExB,cAAI8tC,IAAI,GAAG/U,EAAE,CAACikB,eAAH,CAAmB9X,OAAnB,EAA4BllC,CAA5B,CAAX;EACA,cAAIe,IAAI,GAAG+sC,IAAI,CAAC/sC,IAAhB,CAHwB;;EAOxB,eAAKi6C,iBAAL,CAAuBj6C,IAAvB,IAA+Bg4B,EAAE,CAACkkB,iBAAH,CAAqB/X,OAArB,EAA8BnkC,IAA9B,CAA/B;EAEH;EAEJ;;EAED,aAAO,KAAKi6C,iBAAZ;EAEH;;;gCACS;EAEN,WAAKhiB,GAAL,CAASkkB,aAAT,CAAuB,KAAKhY,OAA5B;;EACA,WAAKA,OAAL,GAAetgC,SAAf;EACH;;;;;;EAGL,SAASk3C,gBAAT,CAA0B3lC,MAA1B,EAAkCsjB,UAAlC,EAA8C;EAE1C,SAAOtjB,MAAM,CACRC,OADE,CACM,iBADN,EACyBqjB,UAAU,CAAC0jB,YADpC,EAEF/mC,OAFE,CAEM,kBAFN,EAE0BqjB,UAAU,CAAC2jB,aAFrC,EAGFhnC,OAHE,CAGM,mBAHN,EAG2BqjB,UAAU,CAAC4jB,cAHtC,CAAP;EAKH;;EAED,SAAStB,WAAT,CAAqB5lC,MAArB,EAA6B;EAEzB,MAAImnC,OAAO,GAAG,8FAAd;;EAEA,WAASlnC,OAAT,CAAiBqhC,KAAjB,EAAwBzoC,KAAxB,EAA+BC,GAA/B,EAAoCsuC,OAApC,EAA6C;EAEzC,QAAIC,MAAM,GAAG,EAAb;;EAEA,SAAK,IAAIx9C,CAAC,GAAG0J,QAAQ,CAACsF,KAAD,CAArB,EAA8BhP,CAAC,GAAG0J,QAAQ,CAACuF,GAAD,CAA1C,EAAiDjP,CAAC,EAAlD,EAAsD;EAElDw9C,MAAAA,MAAM,IAAID,OAAO,CAACnnC,OAAR,CAAgB,UAAhB,EAA4B,OAAOpW,CAAP,GAAW,IAAvC,CAAV;EAEH;;EAED,WAAOw9C,MAAP;EAEH;;EAED,SAAOrnC,MAAM,CAACC,OAAP,CAAeknC,OAAf,EAAwBlnC,OAAxB,CAAP;EAEH;;EAED,SAASglC,kBAAT,CAA4BniB,UAA5B,EAAwCQ,UAAxC,EAAoDgkB,kBAApD,EAAwE;EAEpExkB,EAAAA,UAAU,GAAGA,UAAU,IAAI,EAA3B;EAEA,MAAIykB,MAAM,GAAG,CACRzkB,UAAU,CAAC0kB,WAAX,IAA0BlkB,UAAU,CAACmkB,YAArC,IAAqDnkB,UAAU,CAACokB,OAAhE,IAA2EpkB,UAAU,CAACqkB,SAAtF,IAAmGrkB,UAAU,CAACskB,WAA/G,GAA8H,iDAA9H,GAAkL,EADzK,EAET,CAAC9kB,UAAU,CAAC+kB,SAAX,IAAwBvkB,UAAU,CAACwkB,sBAApC,KAA+DR,kBAAkB,CAACvpC,GAAnB,CAAuB,gBAAvB,CAA/D,GAA0G,uCAA1G,GAAoJ,EAF3I,EAGR+kB,UAAU,CAACilB,WAAZ,IAA4BT,kBAAkB,CAACvpC,GAAnB,CAAuB,oBAAvB,CAA5B,GAA2E,0CAA3E,GAAwH,EAH/G,EAIT,CAAC+kB,UAAU,CAACklB,gBAAX,IAA+B1kB,UAAU,CAAC2kB,MAA3C,KAAsDX,kBAAkB,CAACvpC,GAAnB,CAAuB,wBAAvB,CAAtD,GAAyG,+CAAzG,GAA2J,EAJlJ,CAAb;EAOA,SAAOwpC,MAAM,CAACn/C,MAAP,CAAco9C,eAAd,EAA+B1B,IAA/B,CAAoC,IAApC,CAAP;EAEH;;EAED,SAASqB,eAAT,CAAyBR,OAAzB,EAAkC;EAE9B,MAAI4C,MAAM,GAAG,EAAb;;EAEA,OAAK,IAAI38C,IAAT,IAAiB+5C,OAAjB,EAA0B;EAEtB,QAAIl6C,KAAK,GAAGk6C,OAAO,CAAC/5C,IAAD,CAAnB;EAEA,QAAIH,KAAK,KAAK,KAAd,EAAqB;EAErB88C,IAAAA,MAAM,CAAC9/C,IAAP,CAAY,aAAamD,IAAb,GAAoB,GAApB,GAA0BH,KAAtC;EAEH;;EAED,SAAO88C,MAAM,CAACzD,IAAP,CAAY,IAAZ,CAAP;EAEH;;EAED,SAAS0B,eAAT,CAAyBxlC,MAAzB,EAAiC;EAE7B,SAAOA,MAAM,KAAK,EAAlB;EAEH;;MC5SKkoC;;;EACF,yBAAYtlB,EAAZ,EAAgBE,UAAhB,EAA4BgH,YAA5B,EAA0C;EAAA;;EACtC,SAAK2S,QAAL,GAAgB,EAAhB;EACA,SAAK5Z,GAAL,GAAWD,EAAX;EACA,SAAKmH,WAAL,GAAmBjH,UAAnB;EACA,SAAKmJ,aAAL,GAAqBnC,YAArB;EAEA,SAAKqe,UAAL,GAAkB;EAEdC,MAAAA,iBAAiB,EAAE,OAFL;EAGdC,MAAAA,iBAAiB,EAAE,OAHL;EAIdC,MAAAA,kBAAkB,EAAE,QAJN;EAKdC,MAAAA,cAAc,EAAE,QALF;EAMdC,MAAAA,mBAAmB,EAAE,SANP;EAOdC,MAAAA,iBAAiB,EAAE,OAPL;EAQdC,MAAAA,gBAAgB,EAAE,UARJ;EASdC,MAAAA,cAAc,EAAE;EATF,KAAlB;EAYH;;;;oCAEa1Z,UAAUiK,QAAQ;EAE5B,UAAI0P,QAAQ,GAAG,KAAKT,UAAL,CAAgBlZ,QAAQ,CAACt9B,IAAzB,CAAf;EACA,UAAI6yB,SAAS,GAAG,KAAKyH,aAAL,CAAmBzH,SAAnC;;EAEA,UAAIyK,QAAQ,CAACzK,SAAT,KAAuB,IAA3B,EAAiC;EAE7BA,QAAAA,SAAS,GAAG,KAAKyH,aAAL,CAAmBxH,eAAnB,CAAmCwK,QAAQ,CAACzK,SAA5C,CAAZ;;EAEA,YAAIA,SAAS,KAAKyK,QAAQ,CAACzK,SAA3B,EAAsC;EAElCpV,UAAAA,OAAO,CAACC,IAAR,CAAa,6BAAb,EAA4C4f,QAAQ,CAACzK,SAArD,EAAgE,sBAAhE,EAAwFA,SAAxF,EAAmG,UAAnG;EAEH;EAEJ,OAf2B;;;EAiB5B,UAAIlB,UAAU,GAAG;EACbslB,QAAAA,QAAQ,EAARA,QADa;EAEbpkB,QAAAA,SAAS,EAATA,SAFa;EAGbv8B,QAAAA,GAAG,EAAE,CAAC,CAACgnC,QAAQ,CAAChnC,GAHH;EAIbitC,QAAAA,YAAY,EAAEjG,QAAQ,CAACiG,YAJV;EAKb2T,QAAAA,SAAS,EAAE5Z,QAAQ,CAAC4Z,SALP;EAMbpD,QAAAA,WAAW,EAAExW,QAAQ,CAACI,IAAT,KAAkBxkB,UANlB;EAObykB,QAAAA,SAAS,EAAEL,QAAQ,CAACI,IAAT,KAAkBzkB,QAPhB;EAQbkxB,QAAAA,MAAM,EAAE,CAAC,CAAC7M,QAAQ,CAAC6M,MARN;EASb4J,QAAAA,eAAe,EAAC,CAAC,CAACzW,QAAQ,CAACyW,eATd;EAUb7d,QAAAA,kBAAkB,EAAC,CAAC,CAACoH,QAAQ,CAACpH,kBAVjB;EAYbmf,QAAAA,YAAY,EAAE9N,MAAM,CAAC4P,WAAP,CAAmBn/C,MAZpB;EAabu9C,QAAAA,cAAc,EAAEhO,MAAM,CAAC10B,KAAP,CAAa7a,MAbhB;EAcbs9C,QAAAA,aAAa,EAAE/N,MAAM,CAAC6P,IAAP,CAAYp/C;EAdd,OAAjB;EAkBA,aAAO25B,UAAP;EAEH;;;qCAEc2L,UAAU3L,YAAY;EACjC,UAAIj5B,KAAK,GAAG,EAAZ,CADiC;;EAGjC,UAAI2+C,cAAc,GAAG,CACjB,WADiB,EACJ,wBADI,EACsB,KADtB,EAC6B,aAD7B,EAC4C,QAD5C,EACsD,YADtD,EACoE,gBADpE,EAEjB,UAFiB,EAEL,OAFK,EAEI,aAFJ,EAEmB,qBAFnB,EAE0C,SAF1C,EAEqD,WAFrD,EAEkE,iBAFlE,EAEqF,aAFrF,EAGjB,cAHiB,EAGD,cAHC,EAGe,aAHf,EAIjB,UAJiB,EAIL,SAJK,EAIM,cAJN,EAIsB,KAJtB,EAI6B,QAJ7B,EAIuC,QAJvC,EAKjB,aALiB,EAKF,iBALE,EAKiB,wBALjB,EAK2C,UAL3C,EAMjB,UANiB,EAML,kBANK,EAMe,cANf,EAM+B,cAN/B,EAOjB,iBAPiB,EAOE,iBAPF,EAOqB,oBAPrB,EAQjB,cARiB,EAQD,gBARC,EAQiB,eARjB,EAQkC,eARlC,EAQmD,mBARnD,EASjB,kBATiB,EASG,eATH,EASoB,aATpB,EASmC,yBATnC,EAUjB,WAViB,EAUJ,aAVI,EAUW,WAVX,EAUwB,mBAVxB,EAU6C,qBAV7C,EAUoE,cAVpE,EAUoF,WAVpF,EAUiG,QAVjG,CAArB;;EAYA,UAAI1lB,UAAU,CAACslB,QAAf,EAAyB;EAErBv+C,QAAAA,KAAK,CAAC5C,IAAN,CAAW67B,UAAU,CAACslB,QAAtB;EAEH,OAJD,MAIO;EAEHv+C,QAAAA,KAAK,CAAC5C,IAAN,CAAWwnC,QAAQ,CAACuM,cAApB;EACAnxC,QAAAA,KAAK,CAAC5C,IAAN,CAAWwnC,QAAQ,CAACsM,YAApB;EAEH;;EAED,UAAItM,QAAQ,CAAC0V,OAAT,KAAqBl2C,SAAzB,EAAoC;EAEhC,aAAK,IAAI7D,IAAT,IAAiBqkC,QAAQ,CAAC0V,OAA1B,EAAmC;EAE/Bt6C,UAAAA,KAAK,CAAC5C,IAAN,CAAWmD,IAAX;EACAP,UAAAA,KAAK,CAAC5C,IAAN,CAAWwnC,QAAQ,CAAC0V,OAAT,CAAiB/5C,IAAjB,CAAX;EAEH;EAEJ;;EAED,WAAK,IAAIf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm/C,cAAc,CAACr/C,MAAnC,EAA2CE,CAAC,EAA5C,EAAgD;EAE5CQ,QAAAA,KAAK,CAAC5C,IAAN,CAAW67B,UAAU,CAAC0lB,cAAc,CAACn/C,CAAD,CAAf,CAArB;EAEH,OAzCgC;;;EA8CjC,aAAOQ,KAAK,CAACy5C,IAAN,EAAP;EACH;;;qCAEc7U,UAAU+U,QAAQ1gB,YAAYmhB,MAAM;EAC/C,UAAI1V,OAAJ,CAD+C;;EAI/C,WAAK,IAAIj9B,CAAC,GAAG,CAAR,EAAWm3C,EAAE,GAAG,KAAKxM,QAAL,CAAc9yC,MAAnC,EAA2CmI,CAAC,GAAGm3C,EAA/C,EAAmDn3C,CAAC,EAApD,EAAwD;EAEpD,YAAIo3C,WAAW,GAAG,KAAKzM,QAAL,CAAc3qC,CAAd,CAAlB;;EAEA,YAAIo3C,WAAW,CAACzE,IAAZ,KAAqBA,IAAzB,EAA+B;EAE3B1V,UAAAA,OAAO,GAAGma,WAAV;EACA,YAAEna,OAAO,CAAC+V,SAAV;EAEA;EAEH;EAEJ;;EAED,UAAI/V,OAAO,KAAKtgC,SAAhB,EAA2B;EAEvBsgC,QAAAA,OAAO,GAAG,IAAIyV,YAAJ,CAAiB,KAAK3hB,GAAtB,EAA2B,KAAKkH,WAAhC,EAA6CkF,QAA7C,EAAuDwV,IAAvD,EAA6DT,MAA7D,EAAqE1gB,UAArE,CAAV;EACA,aAAKmZ,QAAL,CAAch1C,IAAd,CAAmBsnC,OAAnB;EAEH;;EAED,aAAOA,OAAP;EACH;;;qCAEcA,SAAS;EACpB,UAAI,EAAEA,OAAO,CAAC+V,SAAV,KAAwB,CAA5B,EAA+B;EAE3B;EACA,YAAIj7C,CAAC,GAAG,KAAK4yC,QAAL,CAAc/zC,OAAd,CAAsBqmC,OAAtB,CAAR;EAEA,aAAK0N,QAAL,CAAc5yC,CAAd,IAAmB,KAAK4yC,QAAL,CAAc,KAAKA,QAAL,CAAc9yC,MAAd,GAAuB,CAArC,CAAnB;EACA,aAAK8yC,QAAL,CAAc5rC,GAAd,GAN2B;;EAS3Bk+B,QAAAA,OAAO,CAACrwB,OAAR;EAEH;EACJ;;;;;;MCzJCyqC;;;EACF,6BAAc;EAAA;;EACV,SAAKC,WAAL,GAAmB,EAAnB;EACA,SAAKC,gBAAL,GAAwB,CAAxB;EAEA,SAAKC,MAAL,GAAc,EAAd;EACA,SAAK/Z,WAAL,GAAmB,EAAnB;EACH;;;;6BACM;EACH,WAAK8Z,gBAAL,GAAwB,CAAxB;EAEA,WAAKC,MAAL,CAAY3/C,MAAZ,GAAqB,CAArB;EACA,WAAK4lC,WAAL,CAAiB5lC,MAAjB,GAA0B,CAA1B;EACH;;;2BACI0yB,QAAQiB,UAAU2R,UAAUjhB,GAAG0mB,OAAO;EAEvC,UAAI6U,UAAU,GAAG,KAAKH,WAAL,CAAiB,KAAKC,gBAAtB,CAAjB;;EAEA,UAAIE,UAAU,KAAK96C,SAAnB,EAA8B;EAE1B86C,QAAAA,UAAU,GAAG;EACT1sC,UAAAA,EAAE,EAAEwf,MAAM,CAACxf,EADF;EAETwf,UAAAA,MAAM,EAAEA,MAFC;EAGTiB,UAAAA,QAAQ,EAAEA,QAHD;EAIT2R,UAAAA,QAAQ,EAAEA,QAJD;EAKTF,UAAAA,OAAO,EAAEE,QAAQ,CAACF,OALT;EAMTya,UAAAA,WAAW,EAAEntB,MAAM,CAACmtB,WANX;EAOTx7B,UAAAA,CAAC,EAAEA,CAPM;EAQT0mB,UAAAA,KAAK,EAAEA;EARE,SAAb;EAWA,aAAK0U,WAAL,CAAiB,KAAKC,gBAAtB,IAA0CE,UAA1C;EAEH,OAfD,MAeO;EAEHA,QAAAA,UAAU,CAAC1sC,EAAX,GAAgBwf,MAAM,CAACxf,EAAvB;EACA0sC,QAAAA,UAAU,CAACltB,MAAX,GAAoBA,MAApB;EACAktB,QAAAA,UAAU,CAACjsB,QAAX,GAAsBA,QAAtB;EACAisB,QAAAA,UAAU,CAACta,QAAX,GAAsBA,QAAtB;EACAsa,QAAAA,UAAU,CAACxa,OAAX,GAAqBE,QAAQ,CAACF,OAA9B;EACAwa,QAAAA,UAAU,CAACC,WAAX,GAAyBntB,MAAM,CAACmtB,WAAhC;EACAD,QAAAA,UAAU,CAACv7B,CAAX,GAAeA,CAAf;EACAu7B,QAAAA,UAAU,CAAC7U,KAAX,GAAmBA,KAAnB;EAEH;;EAED,OAACzF,QAAQ,CAACM,WAAT,KAAyB,IAAzB,GAAgC,KAAKA,WAArC,GAAmD,KAAK+Z,MAAzD,EAAiE7hD,IAAjE,CAAsE8hD,UAAtE;EAEA,WAAKF,gBAAL;EAEH;;;6BAEM;EAEH,UAAI,KAAKC,MAAL,CAAY3/C,MAAZ,GAAqB,CAAzB,EAA4B,KAAK2/C,MAAL,CAAYl0C,IAAZ,CAAiBq0C,iBAAjB;EAC5B,UAAI,KAAKla,WAAL,CAAiB5lC,MAAjB,GAA0B,CAA9B,EAAiC,KAAK4lC,WAAL,CAAiBn6B,IAAjB,CAAsBs0C,wBAAtB;EAEpC;;;;;;EAKL,SAASD,iBAAT,CAA2BxwC,CAA3B,EAA8BG,CAA9B,EAAiC;EAE7B,MAAIH,CAAC,CAACuwC,WAAF,KAAkBpwC,CAAC,CAACowC,WAAxB,EAAqC;EAEjC,WAAOvwC,CAAC,CAACuwC,WAAF,GAAgBpwC,CAAC,CAACowC,WAAzB;EAEH,GAJD,MAIO,IAAIvwC,CAAC,CAAC81B,OAAF,IAAa31B,CAAC,CAAC21B,OAAf,IAA0B91B,CAAC,CAAC81B,OAAF,KAAc31B,CAAC,CAAC21B,OAA9C,EAAuD;EAE1D,WAAO91B,CAAC,CAAC81B,OAAF,CAAUlyB,EAAV,GAAezD,CAAC,CAAC21B,OAAF,CAAUlyB,EAAhC;EAEH,GAJM,MAIA,IAAI5D,CAAC,CAACg2B,QAAF,CAAWpyB,EAAX,KAAkBzD,CAAC,CAAC61B,QAAF,CAAWpyB,EAAjC,EAAqC;EAExC,WAAO5D,CAAC,CAACg2B,QAAF,CAAWpyB,EAAX,GAAgBzD,CAAC,CAAC61B,QAAF,CAAWpyB,EAAlC;EAEH,GAJM,MAIA,IAAI5D,CAAC,CAAC+U,CAAF,KAAQ5U,CAAC,CAAC4U,CAAd,EAAiB;EAEpB,WAAO/U,CAAC,CAAC+U,CAAF,GAAM5U,CAAC,CAAC4U,CAAf;EAEH,GAJM,MAIA;EAEH,WAAO/U,CAAC,CAAC4D,EAAF,GAAOzD,CAAC,CAACyD,EAAhB;EAEH;EAEJ;;EAED,SAAS6sC,wBAAT,CAAkCzwC,CAAlC,EAAqCG,CAArC,EAAwC;EAEpC,MAAIH,CAAC,CAACuwC,WAAF,KAAkBpwC,CAAC,CAACowC,WAAxB,EAAqC;EAEjC,WAAOvwC,CAAC,CAACuwC,WAAF,GAAgBpwC,CAAC,CAACowC,WAAzB;EAEH;;EAAC,MAAIvwC,CAAC,CAAC+U,CAAF,KAAQ5U,CAAC,CAAC4U,CAAd,EAAiB;EAEf,WAAO5U,CAAC,CAAC4U,CAAF,GAAM/U,CAAC,CAAC+U,CAAf;EAEH,GAJC,MAIK;EAEH,WAAO/U,CAAC,CAAC4D,EAAF,GAAOzD,CAAC,CAACyD,EAAhB;EAEH;EAEJ;;MAEK8sC;;;EAEF,8BAAc;EAAA;;EACV,SAAKC,MAAL,GAAc,EAAd;EACH;;;;0BAEGC,OAAO15B,QAAQ;EAEf,UAAI25B,IAAI,GAAGD,KAAK,CAAChtC,EAAN,GAAW,GAAX,GAAiBsT,MAAM,CAACtT,EAAnC;EACA,UAAIlS,IAAI,GAAG,KAAKi/C,MAAL,CAAYE,IAAZ,CAAX;;EAEA,UAAIn/C,IAAI,KAAK8D,SAAb,EAAwB;EAEpB;EAEA9D,QAAAA,IAAI,GAAG,IAAIw+C,eAAJ,EAAP;EACA,aAAKS,MAAL,CAAYE,IAAZ,IAAoBn/C,IAApB;EAEH;;EAED,aAAOA,IAAP;EAEH;;;gCAES;EAEN,WAAKi/C,MAAL,GAAc,EAAd;EAEH;;;;;;MCtICG;;;EACF,+BAAYnnB,EAAZ,EAAgBE,UAAhB,EAA2B6U,IAA3B,EAAiC;EAAA;;EAC7B,SAAKqS,KAAL,GAAapnB,EAAE,CAACia,SAAhB;EACA,SAAKha,GAAL,GAAWD,EAAX;EACA,SAAKkV,KAAL,GAAaH,IAAb;EACA,SAAK5N,WAAL,GAAmBjH,UAAnB;EACH;;;;8BACOr4B,OAAO;EAEX,WAAKu/C,KAAL,GAAav/C,KAAb;EAEH;;;6BAEMoO,OAAO+gB,OAAO;EAEjB,WAAKiJ,GAAL,CAASonB,UAAT,CAAoB,KAAKD,KAAzB,EAAgCnxC,KAAhC,EAAuC+gB,KAAvC;;EACA,WAAKke,KAAL,CAAWU,MAAX,CAAkB5e,KAAlB,EAAyB,KAAKowB,KAA9B;EACH;;;sCAEgB1sB,UAAUzkB,OAAO+gB,OAAQ;EAE5C,UAAI2Q,SAAS,GAAG,KAAKR,WAAL,CAAiBhsB,GAAjB,CAAsB,wBAAtB,CAAhB;;EAEA,UAAKwsB,SAAS,KAAK,IAAnB,EAA0B;EAEzBnb,QAAAA,OAAO,CAAC8E,KAAR,CAAe,oHAAf;EACA;EAEA;;EAED,WAAK6O,UAAL,CAAgBmnB,wBAAhB,CAA0CvN,IAA1C,EAAgD9jC,KAAhD,EAAuD+gB,KAAvD,EAA8D0D,QAAQ,CAAC6sB,iBAAvE;;EAEA,WAAKrS,KAAL,CAAWU,MAAX,CAAmB5e,KAAnB,EAA0B,KAAKowB,KAA/B,EAAsC1sB,QAAQ,CAAC6sB,iBAA/C;EAEA;;;;;;ECnCF;;;;;MAMMC;;;EACF,wBAAY9R,UAAZ,EAAwBX,IAAxB,EAA8B;EAAA;;EAC1B,SAAK0S,WAAL,GAAmB1S,IAAI,CAACyE,MAAxB;EACA,SAAKkO,WAAL,GAAmB,EAAnB;EACA,SAAK1S,WAAL,GAAmBU,UAAnB;EACH;;;;6BAEMjc,QAAQ;EAEX,UAAIggB,KAAK,GAAG,KAAKgO,WAAL,CAAiBhO,KAA7B;EACA,UAAI/D,UAAU,GAAG,KAAKV,WAAtB;EAGA,UAAIta,QAAQ,GAAGjB,MAAM,CAACiB,QAAtB;EACA,UAAI0a,cAAc,GAAGM,UAAU,CAACv6B,GAAX,CAAese,MAAf,EAAuBiB,QAAvB,CAArB,CAPW;;EAWX,UAAI,KAAKgtB,WAAL,CAAiBtS,cAAc,CAACn7B,EAAhC,MAAwCw/B,KAA5C,EAAmD;EAE/C,YAAI/e,QAAQ,CAACC,UAAb,EAAyB;EAErBya,UAAAA,cAAc,CAACuS,gBAAf,CAAgCluB,MAAhC;EAEH,SAN8C;;;EAQ/Cic,QAAAA,UAAU,CAACE,MAAX,CAAkBR,cAAlB;EAEA,aAAKsS,WAAL,CAAiBtS,cAAc,CAACn7B,EAAhC,IAAsCw/B,KAAtC;EAEH;;EAED,aAAOrE,cAAP;EAEH;;;gCACS;EAEN,WAAKsS,WAAL,GAAmB,EAAnB;EAEH;;;;;;MC5CCE;;;EACF,sCAAY5nB,EAAZ,EAAgBE,UAAhB,EAA4B6U,IAA5B,EAAkC;EAAA;;EAC9B,SAAKqS,KAAL,GAAapnB,EAAE,CAACia,SAAhB;EACA,SAAKha,GAAL,GAAWD,EAAX;EACA,SAAKkV,KAAL,GAAaH,IAAb;EACA,SAAK5N,WAAL,GAAmBjH,UAAnB;EACA,SAAKlc,KAAL,GAAanY,SAAb;EACA,SAAKg8C,gBAAL,GAAwBh8C,SAAxB;EACH;;;;8BAEOhE,OAAO;EAEX,WAAKu/C,KAAL,GAAav/C,KAAb;EAEH;;;+BAEQA,OAAO;EAEZ,WAAKmc,KAAL,GAAanc,KAAK,CAACkH,IAAnB;EACA,WAAK84C,gBAAL,GAAwBhgD,KAAK,CAACknC,eAA9B;EAEH;;;6BAEM94B,OAAO+gB,OAAO;EAEjB,WAAKiJ,GAAL,CAAS6nB,YAAT,CAAsB,KAAKV,KAA3B,EAAkCpwB,KAAlC,EAAyC,KAAKhT,KAA9C,EAAqD/N,KAAK,GAAG,KAAK4xC,gBAAlE;;EAEA,WAAK3S,KAAL,CAAWU,MAAX,CAAkB5e,KAAlB,EAAyB,KAAKowB,KAA9B;EAEH;;;sCAEe1sB,UAAUzkB,OAAO+gB,OAAO;EAEpC,UAAI2Q,SAAS,GAAG,KAAKR,WAAL,CAAiBhsB,GAAjB,CAAqB,wBAArB,CAAhB;;EAEA,UAAIwsB,SAAS,KAAK,IAAlB,EAAwB;EAEpBnb,QAAAA,OAAO,CAAC8E,KAAR,CAAc,2HAAd;EACA;EAEH;;EAEDqW,MAAAA,SAAS,CAACogB,0BAAV,CAAqC,KAAKX,KAA1C,EAAiDpwB,KAAjD,EAAwD,KAAKhT,KAA7D,EAAoE/N,KAAK,GAAG,KAAK4xC,gBAAjF,EAAmGntB,QAAQ,CAAC6sB,iBAA5G;;EAEA,WAAKrS,KAAL,CAAWU,MAAX,CAAkB5e,KAAlB,EAAyB,KAAKowB,KAA9B,EAAqC1sB,QAAQ,CAAC6sB,iBAA9C;EAEH;;;;;;MC3CCS;;;EACF,yBAAY/nB,GAAZ,EAAiBC,UAAjB,EAA6B+nB,KAA7B,EAAoCxR,UAApC,EAAgDvP,YAAhD,EAA8D0B,KAA9D,EAAqEmM,IAArE,EAA2E;EAAA;;EACvE,SAAK/U,EAAL,GAAUC,GAAV;EACA,SAAKK,WAAL,GAAmBmW,UAAnB;EACA,SAAKvB,KAAL,GAAaH,IAAb;EACA,SAAKmT,MAAL,GAAcD,KAAd;EACA,SAAK/nB,UAAL,GAAkBA,UAAlB;EACA,SAAKmJ,aAAL,GAAqBnC,YAArB;EACA,SAAKihB,MAAL,GAAcvf,KAAd;EACH;;;;mCAEYiB,SAASue,MAAM;EAExB,UAAInoB,GAAG,GAAG,KAAKD,EAAf;;EACA,UAAIqoB,iBAAiB,GAAG,KAAK/nB,WAAL,CAAiBnlB,GAAjB,CAAqB0uB,OAArB,CAAxB;;EAEA,UAAIA,OAAO,CAAChjB,OAAR,GAAkB,CAAlB,IAAuBwhC,iBAAiB,CAACC,SAAlB,KAAgCze,OAAO,CAAChjB,OAAnE,EAA4E;EAExE,YAAI6zB,KAAK,GAAG7Q,OAAO,CAAC6Q,KAApB;;EAEA,YAAIA,KAAK,KAAK7uC,SAAd,EAAyB;EAErB2gB,UAAAA,OAAO,CAACC,IAAR,CAAa,iEAAb,EAAgFod,OAAhF;EAEH,SAJD,MAIO,IAAI6Q,KAAK,CAAC6N,QAAN,KAAmB,KAAvB,EAA8B;EAEjC/7B,UAAAA,OAAO,CAACC,IAAR,CAAa,kEAAb,EAAiFod,OAAjF;EAEH,SAJM,MAIA;EAEH,eAAK2e,cAAL,CAAoBH,iBAApB,EAAuCxe,OAAvC,EAAgDue,IAAhD;;EACA;EAEH;EAEJ;;EAED,WAAKF,MAAL,CAAY5d,aAAZ,CAA0BrK,GAAG,CAACoK,QAAJ,GAAe+d,IAAzC;;EACA,WAAKF,MAAL,CAAYpe,WAAZ,CAAwB7J,GAAG,CAACwJ,UAA5B,EAAwC4e,iBAAiB,CAACI,cAA1D;EACH;;;qCAEcJ,mBAAmBxe,SAASue,MAAM;EAE7C,UAAInoB,GAAG,GAAG,KAAKD,EAAf;EACA,UAAIioB,KAAK,GAAG,KAAKC,MAAjB;EACA,UAAItf,KAAK,GAAG,KAAKuf,MAAjB;;EAEA,UAAIE,iBAAiB,CAACK,WAAlB,KAAkC78C,SAAtC,EAAiD;EAE7Cw8C,QAAAA,iBAAiB,CAACK,WAAlB,GAAgC,IAAhC;EAEA,aAAKC,qBAAL,GAA6BC,gBAAgB,CAACviD,IAAjB,CAAsB,IAAtB,CAA7B;EAEAwjC,QAAAA,OAAO,CAACvtB,EAAR,CAAW,SAAX,EAAsB,KAAKqsC,qBAA3B;EAEAN,QAAAA,iBAAiB,CAACI,cAAlB,GAAmCxoB,GAAG,CAACyJ,aAAJ,EAAnC;EAEA,aAAKwL,KAAL,CAAWO,MAAX,CAAkB8D,QAAlB;EAEH;;EAED0O,MAAAA,KAAK,CAAC3d,aAAN,CAAoBrK,GAAG,CAACoK,QAAJ,GAAe+d,IAAnC;EACAH,MAAAA,KAAK,CAACne,WAAN,CAAkB7J,GAAG,CAACwJ,UAAtB,EAAkC4e,iBAAiB,CAACI,cAApD,EArB6C;EAwB7C;;EACAxoB,MAAAA,GAAG,CAAC4oB,WAAJ,CAAgB5oB,GAAG,CAAC6oB,mBAApB,EAAyCjf,OAAO,CAAC4R,KAAjD,EAzB6C;;;EA2B7Cxb,MAAAA,GAAG,CAAC4oB,WAAJ,CAAgB5oB,GAAG,CAAC8oB,8BAApB,EAAoDlf,OAAO,CAAC2R,gBAA5D,EA3B6C;;;EA6B7Cvb,MAAAA,GAAG,CAAC4oB,WAAJ,CAAgB5oB,GAAG,CAAC+oB,gBAApB,EAAsCnf,OAAO,CAAC6R,eAA9C;;EAEA,UAAIhB,KAAK,GAAGuO,cAAc,CAACpf,OAAO,CAAC6Q,KAAT,EAAgB,KAAKrR,aAAL,CAAmBrI,cAAnC,CAA1B;;EAEA,UAAIkoB,sBAAsB,CAACrf,OAAD,CAAtB,IAAmC5d,YAAY,CAACyuB,KAAD,CAAZ,KAAwB,KAA/D,EAAsE;EAElEA,QAAAA,KAAK,GAAGyO,cAAc,CAACzO,KAAD,CAAtB;EAEH;;EAED,UAAI0O,iBAAiB,GAAGn9B,YAAY,CAACyuB,KAAD,CAApC;EAAA,UACI2O,QAAQ,GAAGzgB,KAAK,CAACO,OAAN,CAAcU,OAAO,CAAClzB,MAAtB,CADf;EAAA,UAEI2yC,MAAM,GAAG1gB,KAAK,CAACO,OAAN,CAAcU,OAAO,CAAC96B,IAAtB,CAFb;EAIAw6C,MAAAA,oBAAoB,CAACniD,IAArB,CAA0B,IAA1B,EAAgC64B,GAAG,CAACwJ,UAApC,EAAgDI,OAAhD,EAAyDuf,iBAAzD;EAEA,UAAII,MAAJ;EAAA,UAAYrO,OAAO,GAAGtR,OAAO,CAACsR,OAA9B,CA7C6C;EAmD7C;EACA;EACA;;EAEA,UAAIA,OAAO,CAACp0C,MAAR,GAAiB,CAAjB,IAAsBqiD,iBAA1B,EAA6C;EAEzC,aAAK,IAAIniD,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAGspC,OAAO,CAACp0C,MAA7B,EAAqCE,CAAC,GAAG4K,EAAzC,EAA6C5K,CAAC,EAA9C,EAAkD;EAE9CuiD,UAAAA,MAAM,GAAGrO,OAAO,CAACl0C,CAAD,CAAhB;EACAghD,UAAAA,KAAK,CAAC/d,UAAN,CAAiBjK,GAAG,CAACwJ,UAArB,EAAiCxiC,CAAjC,EAAoCoiD,QAApC,EAA8CA,QAA9C,EAAwDC,MAAxD,EAAgEE,MAAhE;EAEH;;EAED3f,QAAAA,OAAO,CAAC0R,eAAR,GAA0B,KAA1B;EACA8M,QAAAA,iBAAiB,CAACoB,aAAlB,GAAkCtO,OAAO,CAACp0C,MAAR,GAAiB,CAAnD;EAEH,OAZD,MAYO;EAEHkhD,QAAAA,KAAK,CAAC/d,UAAN,CAAiBjK,GAAG,CAACwJ,UAArB,EAAiC,CAAjC,EAAoC4f,QAApC,EAA8CA,QAA9C,EAAwDC,MAAxD,EAAgE5O,KAAhE;EACA2N,QAAAA,iBAAiB,CAACoB,aAAlB,GAAkC,CAAlC;EAEH;;EAID,UAAIC,2BAA2B,CAAC7f,OAAD,EAAUuf,iBAAV,CAA/B,EAA6D;EAEzDO,QAAAA,cAAc,CAACviD,IAAf,CAAoB,IAApB,EAA0B64B,GAAG,CAACwJ,UAA9B,EAA0CI,OAA1C,EAAmD6Q,KAAK,CAACpgC,KAAzD,EAAgEogC,KAAK,CAACngC,MAAtE;EAEH;;EAED8tC,MAAAA,iBAAiB,CAACC,SAAlB,GAA8Bze,OAAO,CAAChjB,OAAtC;EAEA,UAAIgjB,OAAO,CAAC8R,QAAZ,EAAsB9R,OAAO,CAAC8R,QAAR,CAAiB9R,OAAjB;EACzB;;;;;;EAGL,SAAS+e,gBAAT,CAA0B3wC,KAA1B,EAAiC;EAE7B,MAAI4xB,OAAO,GAAG5xB,KAAK,CAACrN,MAApB;EAEAi/B,EAAAA,OAAO,CAAC9tB,GAAR,CAAY,SAAZ,EAAuB,KAAK4sC,qBAA5B;EAEA,OAAKA,qBAAL,GAA6B,IAA7B;EAEAiB,EAAAA,iBAAiB,CAACxiD,IAAlB,CAAuB,IAAvB,EAA6ByiC,OAA7B;EAEA,OAAKqL,KAAL,CAAWO,MAAX,CAAkB8D,QAAlB;EACH;;EACD,SAAS0P,cAAT,CAAwBvO,KAAxB,EAA+BmP,OAA/B,EAAwC;EAEpC,MAAInP,KAAK,CAACpgC,KAAN,GAAcuvC,OAAd,IAAyBnP,KAAK,CAACngC,MAAN,GAAesvC,OAA5C,EAAqD;EAEjD,QAAI,UAAUnP,KAAd,EAAqB;EAEjBluB,MAAAA,OAAO,CAACC,IAAR,CAAa,qDAAqDiuB,KAAK,CAACpgC,KAA3D,GAAmE,GAAnE,GAAyEogC,KAAK,CAACngC,MAA/E,GAAwF,IAArG;EACA;EAEH,KAPgD;EAUjD;;;EAEA,QAAInN,KAAK,GAAGy8C,OAAO,GAAGnjD,IAAI,CAACsC,GAAL,CAAS0xC,KAAK,CAACpgC,KAAf,EAAsBogC,KAAK,CAACngC,MAA5B,CAAtB;EAEA,QAAIL,MAAM,GAAGtC,QAAQ,CAACkyC,eAAT,CAAyB,8BAAzB,EAAyD,QAAzD,CAAb;EACA5vC,IAAAA,MAAM,CAACI,KAAP,GAAe5T,IAAI,CAACqE,KAAL,CAAW2vC,KAAK,CAACpgC,KAAN,GAAclN,KAAzB,CAAf;EACA8M,IAAAA,MAAM,CAACK,MAAP,GAAgB7T,IAAI,CAACqE,KAAL,CAAW2vC,KAAK,CAACngC,MAAN,GAAenN,KAA1B,CAAhB;EAEA,QAAI7F,OAAO,GAAG2S,MAAM,CAAC6vC,UAAP,CAAkB,IAAlB,CAAd;EACAxiD,IAAAA,OAAO,CAACyiD,SAAR,CAAkBtP,KAAlB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+BA,KAAK,CAACpgC,KAArC,EAA4CogC,KAAK,CAACngC,MAAlD,EAA0D,CAA1D,EAA6D,CAA7D,EAAgEL,MAAM,CAACI,KAAvE,EAA8EJ,MAAM,CAACK,MAArF;EAEAiS,IAAAA,OAAO,CAACC,IAAR,CAAa,sCAAsCiuB,KAAK,CAACpgC,KAA5C,GAAoD,GAApD,GAA0DogC,KAAK,CAACngC,MAAhE,GAAyE,gBAAzE,GAA4FL,MAAM,CAACI,KAAnG,GAA2G,GAA3G,GAAiHJ,MAAM,CAACK,MAArI,EAA6ImgC,KAA7I;EAEA,WAAOxgC,MAAP;EAEH;;EAED,SAAOwgC,KAAP;EAEH;;EAED,SAASwO,sBAAT,CAAgCrf,OAAhC,EAAyC;EAErC,SAAQA,OAAO,CAAC+Q,KAAR,KAAkBrxB,mBAAlB,IAAyCsgB,OAAO,CAACgR,KAAR,KAAkBtxB,mBAA5D,IACFsgB,OAAO,CAACkR,SAAR,KAAsBtxB,aAAtB,IAAuCogB,OAAO,CAACkR,SAAR,KAAsBnxB,YADlE;EAGH;;EAED,SAASqC,YAAT,CAAsByuB,KAAtB,EAA6B;EAEzB,SAAO7uB,KAAK,CAACI,YAAN,CAAmByuB,KAAK,CAACpgC,KAAzB,KAAmCuR,KAAK,CAACI,YAAN,CAAmByuB,KAAK,CAACngC,MAAzB,CAA1C;EAEH;;EAED,IAAI0vC,OAAJ;;EACA,SAASd,cAAT,CAAwBzO,KAAxB,EAA+B;EAE3B,MAAIA,KAAK,YAAYwP,gBAAjB,IAAqCxP,KAAK,YAAYyP,iBAAtD,IAA2EzP,KAAK,YAAY0P,WAAhG,EAA6G;EAEzG,QAAIH,OAAO,KAAKp+C,SAAhB,EAA2Bo+C,OAAO,GAAGryC,QAAQ,CAACkyC,eAAT,CAAyB,8BAAzB,EAAyD,QAAzD,CAAV;EAE3BG,IAAAA,OAAO,CAAC3vC,KAAR,GAAgBuR,KAAK,CAACK,eAAN,CAAsBwuB,KAAK,CAACpgC,KAA5B,CAAhB;EACA2vC,IAAAA,OAAO,CAAC1vC,MAAR,GAAiBsR,KAAK,CAACK,eAAN,CAAsBwuB,KAAK,CAACngC,MAA5B,CAAjB;;EAEA,QAAIhT,OAAO,GAAG0iD,OAAO,CAACF,UAAR,CAAmB,IAAnB,CAAd;;EACAxiD,IAAAA,OAAO,CAACyiD,SAAR,CAAkBtP,KAAlB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+BuP,OAAO,CAAC3vC,KAAvC,EAA8C2vC,OAAO,CAAC1vC,MAAtD;EAEAiS,IAAAA,OAAO,CAACC,IAAR,CAAa,+CAA+CiuB,KAAK,CAACpgC,KAArD,GAA6D,GAA7D,GAAmEogC,KAAK,CAACngC,MAAzE,GAAkF,gBAAlF,GAAqG0vC,OAAO,CAAC3vC,KAA7G,GAAqH,GAArH,GAA2H2vC,OAAO,CAAC1vC,MAAhJ,EAAwJmgC,KAAxJ;EAEA,WAAOuP,OAAP;EAEH;;EAED,SAAOvP,KAAP;EAEH;;EAED,SAAS6O,oBAAT,CAA8Bc,WAA9B,EAA2CxgB,OAA3C,EAAoDuf,iBAApD,EAAuE;EAEnE,MAAInpB,GAAG,GAAG,KAAKD,EAAf;EAAA,MACIE,UAAU,GAAG,KAAKA,UADtB;EAAA,MAEI0I,KAAK,GAAG,KAAKuf,MAFjB;EAAA,MAGI1R,UAAU,GAAG,KAAKnW,WAHtB;EAAA,MAIIqH,SAJJ;;EAMA,MAAIyhB,iBAAJ,EAAuB;EAEnBnpB,IAAAA,GAAG,CAAC8J,aAAJ,CAAkBsgB,WAAlB,EAA+BpqB,GAAG,CAACqqB,cAAnC,EAAmD1hB,KAAK,CAACO,OAAN,CAAcU,OAAO,CAAC+Q,KAAtB,CAAnD;;EACA3a,IAAAA,GAAG,CAAC8J,aAAJ,CAAkBsgB,WAAlB,EAA+BpqB,GAAG,CAACsqB,cAAnC,EAAmD3hB,KAAK,CAACO,OAAN,CAAcU,OAAO,CAACgR,KAAtB,CAAnD;;EAEA5a,IAAAA,GAAG,CAAC8J,aAAJ,CAAkBsgB,WAAlB,EAA+BpqB,GAAG,CAACgK,kBAAnC,EAAuDrB,KAAK,CAACO,OAAN,CAAcU,OAAO,CAACiR,SAAtB,CAAvD;;EACA7a,IAAAA,GAAG,CAAC8J,aAAJ,CAAkBsgB,WAAlB,EAA+BpqB,GAAG,CAAC+J,kBAAnC,EAAuDpB,KAAK,CAACO,OAAN,CAAcU,OAAO,CAACkR,SAAtB,CAAvD;EAEH,GARD,MAQO;EAEH9a,IAAAA,GAAG,CAAC8J,aAAJ,CAAkBsgB,WAAlB,EAA+BpqB,GAAG,CAACqqB,cAAnC,EAAmDrqB,GAAG,CAACqC,aAAvD;;EACArC,IAAAA,GAAG,CAAC8J,aAAJ,CAAkBsgB,WAAlB,EAA+BpqB,GAAG,CAACsqB,cAAnC,EAAmDtqB,GAAG,CAACqC,aAAvD;;EAEA,QAAIuH,OAAO,CAAC+Q,KAAR,KAAkBrxB,mBAAlB,IAAyCsgB,OAAO,CAACgR,KAAR,KAAkBtxB,mBAA/D,EAAoF;EAEhFiD,MAAAA,OAAO,CAACC,IAAR,CAAa,mHAAb,EAAkIod,OAAlI;EAEH;;EAED5J,IAAAA,GAAG,CAAC8J,aAAJ,CAAkBsgB,WAAlB,EAA+BpqB,GAAG,CAACgK,kBAAnC,EAAuDugB,cAAc,CAACpjD,IAAf,CAAoB,IAApB,EAA0ByiC,OAAO,CAACiR,SAAlC,CAAvD;;EACA7a,IAAAA,GAAG,CAAC8J,aAAJ,CAAkBsgB,WAAlB,EAA+BpqB,GAAG,CAAC+J,kBAAnC,EAAuDwgB,cAAc,CAACpjD,IAAf,CAAoB,IAApB,EAA0ByiC,OAAO,CAACkR,SAAlC,CAAvD;;EAEA,QAAIlR,OAAO,CAACkR,SAAR,KAAsBtxB,aAAtB,IAAuCogB,OAAO,CAACkR,SAAR,KAAsBnxB,YAAjE,EAA+E;EAE3E4C,MAAAA,OAAO,CAACC,IAAR,CAAa,+GAAb,EAA8Hod,OAA9H;EAEH;EAEJ;;EAEDlC,EAAAA,SAAS,GAAGzH,UAAU,CAAC/kB,GAAX,CAAe,gCAAf,CAAZ;;EAEA,MAAIwsB,SAAJ,EAAe;EAEX,QAAIkC,OAAO,CAAC96B,IAAR,KAAiBsb,SAAjB,IAA8B6V,UAAU,CAAC/kB,GAAX,CAAe,0BAAf,MAA+C,IAAjF,EAAuF;EACvF,QAAI0uB,OAAO,CAAC96B,IAAR,KAAiBub,aAAjB,IAAkC4V,UAAU,CAAC/kB,GAAX,CAAe,+BAAf,MAAoD,IAA1F,EAAgG;;EAEhG,QAAI0uB,OAAO,CAACmR,UAAR,GAAqB,CAArB,IAA0BvE,UAAU,CAACt7B,GAAX,CAAe0uB,OAAf,EAAwB4gB,mBAAtD,EAA2E;EAEvExqB,MAAAA,GAAG,CAACyqB,aAAJ,CAAkBL,WAAlB,EAA+B1iB,SAAS,CAACgjB,0BAAzC,EAAqEjkD,IAAI,CAACiD,GAAL,CAASkgC,OAAO,CAACmR,UAAjB,EAA6B9T,YAAY,CAAC0jB,gBAAb,EAA7B,CAArE;;EACAnU,MAAAA,UAAU,CAACt7B,GAAX,CAAe0uB,OAAf,EAAwB4gB,mBAAxB,GAA8C5gB,OAAO,CAACmR,UAAtD;EAEH;EAEJ;EAIJ;;;EAID,SAASwP,cAAT,CAAwBl1C,CAAxB,EAA2B;EAEvB,MAAI2qB,GAAG,GAAG,KAAKD,EAAf;;EAEA,MAAI1qB,CAAC,KAAKmU,aAAN,IAAuBnU,CAAC,KAAKoU,0BAA7B,IAA2DpU,CAAC,KAAKqU,yBAArE,EAAgG;EAE5F,WAAOsW,GAAG,CAACuC,OAAX;EAEH;;EAED,SAAOvC,GAAG,CAAC0C,MAAX;EAEH;;EAED,SAASinB,iBAAT,CAA2B/f,OAA3B,EAAoC;EAChC,MAAI5J,GAAG,GAAG,KAAKD,EAAf;;EACA,MAAIqoB,iBAAiB,GAAG,KAAK/nB,WAAL,CAAiBnlB,GAAjB,CAAqB0uB,OAArB,CAAxB;;EAEA,MAAIA,OAAO,CAAC6Q,KAAR,IAAiB2N,iBAAiB,CAACwC,yBAAvC,EAAkE;EAE9D;EAEA5qB,IAAAA,GAAG,CAAC6qB,aAAJ,CAAkBzC,iBAAiB,CAACwC,yBAApC;EAEH,GAND,MAMO;EAEH;EAEA,QAAIxC,iBAAiB,CAACK,WAAlB,KAAkC78C,SAAtC,EAAiD;;EAEjDo0B,IAAAA,GAAG,CAAC6qB,aAAJ,CAAkBzC,iBAAiB,CAACI,cAApC;EAEH,GAlB+B;;;EAqBhC,OAAKnoB,WAAL,CAAiB0V,MAAjB,CAAwBnM,OAAxB;EAEH;;EAED,SAAS6f,2BAAT,CAAqC7f,OAArC,EAA8C5d,YAA9C,EAA4D;EAExD,SAAO4d,OAAO,CAAC0R,eAAR,IAA2BtvB,YAA3B,IACH4d,OAAO,CAACkR,SAAR,KAAsBtxB,aADnB,IACoCogB,OAAO,CAACkR,SAAR,KAAsBnxB,YADjE;EAGH;;EAED,SAAS+/B,cAAT,CAAwB/+C,MAAxB,EAAgCi/B,OAAhC,EAAyCvvB,KAAzC,EAAgDC,MAAhD,EAAwD;EAEpD;EACA,OAAKylB,EAAL,CAAQ2pB,cAAR,CAAuB/+C,MAAvB;;EAEA,MAAIy9C,iBAAiB,GAAG,KAAK/nB,WAAL,CAAiBnlB,GAAjB,CAAqB0uB,OAArB,CAAxB,CALoD;;;EAQpDwe,EAAAA,iBAAiB,CAACoB,aAAlB,GAAkC/iD,IAAI,CAAC+G,GAAL,CAAS/G,IAAI,CAACsC,GAAL,CAASsR,KAAT,EAAgBC,MAAhB,CAAT,IAAoC7T,IAAI,CAACqkD,KAA3E;EAEH;;ECvUD,IAAIC,gBAAgB,GAAG,CAAvB;;EACA,IAAIC,mBAAmB,GAAG,IAAI5+B,OAAJ,EAA1B;;MACM6+B;;;EACF,yBAAc;EAAA;;EACV,SAAKtO,KAAL,GAAa,IAAIuO,aAAJ,EAAb;EACA,SAAKlD,KAAL,GAAa;EACThuC,MAAAA,EAAE,EAAE+wC,gBAAgB,EADX;EAET9D,MAAAA,IAAI,EAAE,EAFG;EAGTkE,MAAAA,OAAO,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAHA;EAITlF,MAAAA,WAAW,EAAE,EAJJ;EAKTC,MAAAA,IAAI,EAAE,EALG;EAMTvkC,MAAAA,KAAK,EAAE;EANE,KAAb;EAQH;;;;4BAEK00B,QAAQ+U,SAAS99B,QAAQ;EAC3B,UAAIhM,CAAC,GAAG,CAAR;EAAA,UAAW2O,CAAC,GAAG,CAAf;EAAA,UAAkB1Z,CAAC,GAAG,CAAtB;EAEA,UAAI80C,iBAAiB,GAAG,CAAxB;EACA,UAAIC,WAAW,GAAG,CAAlB;EACA,UAAIC,UAAU,GAAG,CAAjB;EAEA,UAAIvD,KAAK,GAAG,KAAKA,KAAjB;EACA,UAAIrL,KAAK,GAAG,KAAKA,KAAjB;EAEA,UAAI6O,UAAU,GAAGl+B,MAAM,CAACm+B,kBAAxB;;EAEA,WAAK,IAAIzkD,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGqjC,MAAM,CAACvvC,MAA3B,EAAmCE,CAAC,GAAGgM,CAAvC,EAA0ChM,CAAC,EAA3C,EAA+C;EAE3C,YAAI0kD,KAAK,GAAGrV,MAAM,CAACrvC,CAAD,CAAlB;EAEA,YAAIwpB,KAAK,GAAGk7B,KAAK,CAACl7B,KAAlB;EACA,YAAIm7B,SAAS,GAAGD,KAAK,CAACC,SAAtB;EACA,YAAInsB,QAAQ,GAAGksB,KAAK,CAAClsB,QAArB;;EAKA,YAAIksB,KAAK,CAACE,cAAV,EAA0B;EAEtBtqC,UAAAA,CAAC,IAAIkP,KAAK,CAAClP,CAAN,GAAUqqC,SAAf;EACA17B,UAAAA,CAAC,IAAIO,KAAK,CAACP,CAAN,GAAU07B,SAAf;EACAp1C,UAAAA,CAAC,IAAIia,KAAK,CAACja,CAAN,GAAUo1C,SAAf;EAEH,SAND,MAMO,IAAID,KAAK,CAACG,kBAAV,EAA8B;EAEjC,cAAI3U,SAAQ,GAAGyF,KAAK,CAACzhC,GAAN,CAAUwwC,KAAV,CAAf;;EAEAxU,UAAAA,SAAQ,CAAC1mB,KAAT,CAAe9kB,IAAf,CAAoBggD,KAAK,CAACl7B,KAA1B,EAAiC9E,cAAjC,CAAgDggC,KAAK,CAACC,SAAtD;;EACAzU,UAAAA,SAAQ,CAACna,SAAT,CAAmB+uB,qBAAnB,CAAyCJ,KAAK,CAAC/9B,WAA/C;;EACAq9B,UAAAA,mBAAmB,CAACc,qBAApB,CAA0CJ,KAAK,CAAC/gD,MAAN,CAAagjB,WAAvD;;EACAupB,UAAAA,SAAQ,CAACna,SAAT,CAAmBpD,GAAnB,CAAuBqxB,mBAAvB;;EACA9T,UAAAA,SAAQ,CAACna,SAAT,CAAmBgvB,kBAAnB,CAAsCP,UAAtC;;EAGAxD,UAAAA,KAAK,CAAC/B,WAAN,CAAkBoF,iBAAlB,IAAuCnU,SAAvC;EAEAmU,UAAAA,iBAAiB;EAEpB,SAfM,MAeA,IAAIK,KAAK,CAACM,WAAV,EAAuB;EAE1B,cAAI9U,QAAQ,GAAGyF,KAAK,CAACzhC,GAAN,CAAUwwC,KAAV,CAAf;EAEAxU,UAAAA,QAAQ,CAAC98B,QAAT,CAAkB0xC,qBAAlB,CAAwCJ,KAAK,CAAC/9B,WAA9C;EACAupB,UAAAA,QAAQ,CAAC98B,QAAT,CAAkBwT,YAAlB,CAA+B49B,UAA/B;EAEAtU,UAAAA,QAAQ,CAAC1mB,KAAT,CAAe9kB,IAAf,CAAoB8kB,KAApB,EAA2B9E,cAA3B,CAA0CigC,SAA1C;EACAzU,UAAAA,QAAQ,CAAC1X,QAAT,GAAoBA,QAApB;EAEA0X,UAAAA,QAAQ,CAACna,SAAT,CAAmB+uB,qBAAnB,CAAyCJ,KAAK,CAAC/9B,WAA/C;;EACAq9B,UAAAA,mBAAmB,CAACc,qBAApB,CAA0CJ,KAAK,CAAC/gD,MAAN,CAAagjB,WAAvD;;EACAupB,UAAAA,QAAQ,CAACna,SAAT,CAAmBpD,GAAnB,CAAuBqxB,mBAAvB;EACA9T,UAAAA,QAAQ,CAACna,SAAT,CAAmBgvB,kBAAnB,CAAsCP,UAAtC;EAEAtU,UAAAA,QAAQ,CAACR,OAAT,GAAmBjwC,IAAI,CAAC8X,GAAL,CAASmtC,KAAK,CAACxsC,KAAf,CAAnB;EACAg4B,UAAAA,QAAQ,CAACP,WAAT,GAAuBlwC,IAAI,CAAC8X,GAAL,CAASmtC,KAAK,CAACxsC,KAAN,IAAe,IAAIwsC,KAAK,CAACO,QAAzB,CAAT,CAAvB;EACA/U,UAAAA,QAAQ,CAACN,KAAT,GAAkB8U,KAAK,CAAClsB,QAAN,KAAmB,CAApB,GAAyB,GAAzB,GAA+BksB,KAAK,CAAC9U,KAAtD;EAEAoR,UAAAA,KAAK,CAAC9B,IAAN,CAAWqF,UAAX,IAAyBrU,QAAzB;EAEAqU,UAAAA,UAAU;EAEb,SAvBM,MAuBA,IAAIG,KAAK,CAACQ,YAAV,EAAwB;EAE3B,cAAIhV,QAAQ,GAAGyF,KAAK,CAACzhC,GAAN,CAAUwwC,KAAV,CAAf;EAEAxU,UAAAA,QAAQ,CAAC98B,QAAT,CAAkB0xC,qBAAlB,CAAwCJ,KAAK,CAAC/9B,WAA9C;EACAupB,UAAAA,QAAQ,CAAC98B,QAAT,CAAkBwT,YAAlB,CAA+B49B,UAA/B;EAEAtU,UAAAA,QAAQ,CAAC1mB,KAAT,CAAe9kB,IAAf,CAAoBggD,KAAK,CAACl7B,KAA1B,EAAiC9E,cAAjC,CAAgDggC,KAAK,CAACC,SAAtD;EACAzU,UAAAA,QAAQ,CAAC1X,QAAT,GAAoBksB,KAAK,CAAClsB,QAA1B;EACA0X,UAAAA,QAAQ,CAACN,KAAT,GAAkB8U,KAAK,CAAClsB,QAAN,KAAmB,CAApB,GAAyB,GAAzB,GAA+BksB,KAAK,CAAC9U,KAAtD;EAEAoR,UAAAA,KAAK,CAACrmC,KAAN,CAAY2pC,WAAZ,IAA2BpU,QAA3B;EAEAoU,UAAAA,WAAW;EAEd;EAEJ;;EAEDtD,MAAAA,KAAK,CAACmD,OAAN,CAAc,CAAd,IAAmB7pC,CAAnB;EACA0mC,MAAAA,KAAK,CAACmD,OAAN,CAAc,CAAd,IAAmBl7B,CAAnB;EACA+3B,MAAAA,KAAK,CAACmD,OAAN,CAAc,CAAd,IAAmB50C,CAAnB;EAEAyxC,MAAAA,KAAK,CAAC/B,WAAN,CAAkBn/C,MAAlB,GAA2BukD,iBAA3B;EACArD,MAAAA,KAAK,CAAC9B,IAAN,CAAWp/C,MAAX,GAAoBykD,UAApB;EACAvD,MAAAA,KAAK,CAACrmC,KAAN,CAAY7a,MAAZ,GAAqBwkD,WAArB;EAEAtD,MAAAA,KAAK,CAACf,IAAN,GAAae,KAAK,CAAChuC,EAAN,GAAW,GAAX,GAAiBqxC,iBAAjB,GAAqC,GAArC,GAA2CC,WAA3C,GAAyD,GAAzD,GAA+DC,UAA5E;EAEH;;;gCACS;EACN,WAAK5O,KAAL,CAAWwP,OAAX;EACA,WAAKxP,KAAL,GAAa,IAAb;EACA,WAAKqL,KAAL,GAAa,IAAb;EACH;;;;;;MAICkD;;;EACF,2BAAc;EAAA;;EACV,SAAKkB,OAAL,GAAe,EAAf;EACH;;;;0BAEGV,OAAO;EAEP,UAAIrV,MAAM,GAAG,KAAK+V,OAAlB;;EAEA,UAAI/V,MAAM,CAACqV,KAAK,CAAC1xC,EAAP,CAAN,KAAqBpO,SAAzB,EAAoC;EAEhC,eAAOyqC,MAAM,CAACqV,KAAK,CAAC1xC,EAAP,CAAb;EACH;;EAED,UAAIk9B,QAAJ;;EAEA,cAAQwU,KAAK,CAAC58C,IAAd;EAEI,aAAK,kBAAL;EACIooC,UAAAA,QAAQ,GAAG;EACPna,YAAAA,SAAS,EAAE,IAAI3Q,OAAJ,EADJ;EAEPoE,YAAAA,KAAK,EAAE,IAAIR,OAAJ;EAFA,WAAX;EAIA;;EAEJ,aAAK,WAAL;EACIknB,UAAAA,QAAQ,GAAG;EACP98B,YAAAA,QAAQ,EAAE,IAAIgS,OAAJ,EADH;EAEP2Q,YAAAA,SAAS,EAAE,IAAI3Q,OAAJ,EAFJ;EAGPoE,YAAAA,KAAK,EAAE,IAAIR,OAAJ,EAHA;EAIPwP,YAAAA,QAAQ,EAAE,CAJH;EAKPkX,YAAAA,OAAO,EAAE,CALF;EAMPC,YAAAA,WAAW,EAAE,CANN;EAOPC,YAAAA,KAAK,EAAE;EAPA,WAAX;EASA;;EAEJ,aAAK,YAAL;EACIM,UAAAA,QAAQ,GAAG;EACP98B,YAAAA,QAAQ,EAAE,IAAIgS,OAAJ,EADH;EAEPoE,YAAAA,KAAK,EAAE,IAAIR,OAAJ,EAFA;EAGPwP,YAAAA,QAAQ,EAAE,CAHH;EAIPoX,YAAAA,KAAK,EAAE;EAJA,WAAX;EAMA;;EAEJ,aAAK,iBAAL;EACA,aAAK,eAAL;EACIrqB,UAAAA,OAAO,CAAC8E,KAAR,CAAc,yCAAd;EAhCR;;EAmCAglB,MAAAA,MAAM,CAACqV,KAAK,CAAC1xC,EAAP,CAAN,GAAmBk9B,QAAnB;EAEA,aAAOA,QAAP;EAEH;;;gCACS;EACN,WAAKkV,OAAL,GAAe,IAAf;EACH;;;;;;MCnLCC;;;EACF,8BAAc;EAAA;;EAEV,SAAKrE,KAAL,GAAa;EACT3R,MAAAA,MAAM,EAAE,IAAI4U,WAAJ,EADC;EAETqB,MAAAA,WAAW,EAAE,EAFJ;EAGTC,MAAAA,YAAY,EAAE;EAHL,KAAb;EAMH;;;;6BACM;EACH,WAAKvE,KAAL,CAAWuE,YAAX,CAAwBzlD,MAAxB,GAAiC,CAAjC;EACA,WAAKkhD,KAAL,CAAWsE,WAAX,CAAuBxlD,MAAvB,GAAgC,CAAhC;EACH;;;gCAES4kD,OAAO;EAEb,WAAK1D,KAAL,CAAWsE,WAAX,CAAuB1nD,IAAvB,CAA4B8mD,KAA5B;EAEH;;;iCAEUrsB,QAAQ;EAEf,WAAK2oB,KAAL,CAAWuE,YAAX,CAAwB3nD,IAAxB,CAA6By6B,MAA7B;EACH;;;kCAEW/R,QAAQ;EAEhB;EACA,UAAIk/B,YAAY,GAAG,EAAnB;EAEA,WAAKxE,KAAL,CAAW3R,MAAX,CAAkBoW,KAAlB,CAAwB,KAAKzE,KAAL,CAAWsE,WAAnC,EAAgDE,YAAhD,EAA8Dl/B,MAA9D;EAEH;;;gCACS;EACN,WAAK06B,KAAL,CAAW3R,MAAX,CAAkB8V,OAAlB;EACA,WAAKnE,KAAL,GAAa,IAAb;EACH;;;;;;MAKC0E;;;EACF,+BAAc;EAAA;;EACV,SAAKC,aAAL,GAAqB,EAArB;EACH;;;;0BAEG3F,OAAO15B,QAAQ;EAEf,UAAI25B,IAAI,GAAGD,KAAK,CAAChtC,EAAN,GAAW,GAAX,GAAiBsT,MAAM,CAACtT,EAAnC;EAEA,UAAI4yC,WAAW,GAAG,KAAKD,aAAL,CAAmB1F,IAAnB,CAAlB;;EAEA,UAAI2F,WAAW,KAAKhhD,SAApB,EAA+B;EAE3BghD,QAAAA,WAAW,GAAG,IAAIP,gBAAJ,EAAd;EACA,aAAKM,aAAL,CAAmB1F,IAAnB,IAA2B2F,WAA3B;EAEH;;EAED,aAAOA,WAAP;EAEH;;;gCAES;EAEN,WAAK,IAAItmD,GAAT,IAAgB,KAAKqmD,aAArB,EAAoC;EAChC,aAAKA,aAAL,CAAmBrmD,GAAnB,KAA2B,KAAKqmD,aAAL,CAAmBrmD,GAAnB,EAAwB6lD,OAAxB,EAA3B;EACH;;EAED,WAAKQ,aAAL,GAAqB,EAArB;EAEH;;;;;;ECrCL;;;;;MAIME;;;;;EACF,yBAAYjoC,MAAZ,EAAoB;EAAA;;EAAA;;EAChB;EAEAA,IAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB,CAHgB;;EAKhB,UAAKmb,EAAL,GAAU,IAAV,CALgB;;EAQhB,UAAK+sB,UAAL,GAAkB,IAAlB,CARgB;;EAWhB,UAAKhzC,MAAL,GAAc,CAAd;EACA,UAAKC,OAAL,GAAe,CAAf;EACA,UAAKgzC,cAAL,GAAsB,KAAtB,CAbgB;;EAehB,UAAKC,WAAL,GAAmB,CAAnB,CAfgB;;EAgBhB,UAAKzhB,gBAAL,GAAwB,IAAIrgB,OAAJ,EAAxB,CAhBgB;;EAiBhB,UAAK+hC,kBAAL,GAA0B,IAA1B;EACA,UAAKC,mBAAL,GAA2B,IAA3B;EAEA,UAAKC,kBAAL,GAA0B,CAAC,CAA3B,CApBgB;;EAqBhB,UAAKC,cAAL,GAAsB,IAAtB,CArBgB;;EAsBhB,UAAKC,eAAL,GAAuB,IAAIr9B,OAAJ,CAAU,QAAV,CAAvB;EAEA,UAAKoZ,aAAL,GAAqB,IAArB,CAxBgB;;EAyBhB,UAAK6e,MAAL,GAAc,IAAd,CAzBgB;;EA6BhB,UAAKqF,YAAL,GAAoB,IAApB,CA7BgB;;EA+BhB,UAAKC,iBAAL,GAAyB,IAAIn8B,OAAJ,EAAzB;EACA,UAAKo8B,QAAL,GAAgB,IAAIphC,OAAJ,EAAhB;EACA,UAAKqhC,QAAL,GAAgB,IAAIhwB,OAAJ,EAAhB,CAjCgB;;EAqChB,UAAKiwB,SAAL,GAAiB,IAAjB;EACA,UAAKC,cAAL,GAAsB,IAAtB;EACA,UAAKC,cAAL,GAAsB,IAAtB;EACA,UAAKC,gBAAL,GAAwB,IAAxB;;EAGA,UAAK3L,KAAL,CAAWt9B,MAAX;;EACA,UAAKkpC,cAAL,CAAoBlpC,MAApB;;EA5CgB;EA6CnB;;;;4BAEK6b,YAAY;EAAG;EACjB,UAAIvwB,EAAE,GAAG,IAAT;EACAuwB,MAAAA,UAAU,GAAGA,UAAU,IAAI,EAA3B;EAEAlU,MAAAA,OAAO,CAAC/e,GAAR,CAAY,eAAZ,EAA6BmZ,QAA7B;EAEA;;;;;;;;;EAQA,UAAIqjC,OAAO,GAAGvpB,UAAU,CAACxmB,MAAX,KAAsBrO,SAAtB,GAAkC60B,UAAU,CAACxmB,MAA7C,GAAsDtC,QAAQ,CAACkyC,eAAT,CAAyB,8BAAzB,EAAyD,QAAzD,CAApE;EAAA,UACIkE,QAAQ,GAAGttB,UAAU,CAACn5B,OAAX,KAAuBsE,SAAvB,GAAmC60B,UAAU,CAACn5B,OAA9C,GAAwD,IADvE;EAAA,UAGI0mD,MAAM,GAAGvtB,UAAU,CAAC1S,KAAX,KAAqBniB,SAArB,GAAiC60B,UAAU,CAAC1S,KAA5C,GAAoD,KAHjE;EAAA,UAIIkgC,MAAM,GAAGxtB,UAAU,CAACoF,KAAX,KAAqBj6B,SAArB,GAAiC60B,UAAU,CAACoF,KAA5C,GAAoD,IAJjE;EAAA,UAKIqoB,QAAQ,GAAGztB,UAAU,CAACoG,OAAX,KAAuBj7B,SAAvB,GAAmC60B,UAAU,CAACoG,OAA9C,GAAwD,IALvE;EAAA,UAMIsnB,UAAU,GAAG1tB,UAAU,CAAC2tB,SAAX,KAAyBxiD,SAAzB,GAAqC60B,UAAU,CAAC2tB,SAAhD,GAA4D,KAN7E;EAAA,UAOIC,mBAAmB,GAAG5tB,UAAU,CAACuE,kBAAX,KAAkCp5B,SAAlC,GAA8C60B,UAAU,CAACuE,kBAAzD,GAA8E,IAPxG;EAAA,UAQIspB,sBAAsB,GAAG7tB,UAAU,CAAC8tB,qBAAX,KAAqC3iD,SAArC,GAAiD60B,UAAU,CAAC8tB,qBAA5D,GAAoF,KARjH;EAAA,UASIC,gBAAgB,GAAG/tB,UAAU,CAACguB,eAAX,KAA+B7iD,SAA/B,GAA2C60B,UAAU,CAACguB,eAAtD,GAAwE,SAT/F;;EAWAv+C,MAAAA,EAAE,CAAC48C,UAAH,GAAgB9C,OAAhB;EACA95C,MAAAA,EAAE,CAAC6vB,EAAH,GAAQguB,QAAR;EACA79C,MAAAA,EAAE,CAAC4J,MAAH,GAAYkwC,OAAO,CAAC3vC,KAApB;EACAnK,MAAAA,EAAE,CAAC6J,OAAH,GAAaiwC,OAAO,CAAC1vC,MAArB;EACApK,MAAAA,EAAE,CAACm+C,mBAAH,GAAyBA,mBAAzB;;EAEA,UAAI;EAEA,YAAIK,iBAAiB,GAAG;EACpB3gC,UAAAA,KAAK,EAAEigC,MADa;EAEpBnoB,UAAAA,KAAK,EAAEooB,MAFa;EAGpBpnB,UAAAA,OAAO,EAAEqnB,QAHW;EAIpBE,UAAAA,SAAS,EAAED,UAJS;EAKpBnpB,UAAAA,kBAAkB,EAAEqpB,mBALA;EAMpBE,UAAAA,qBAAqB,EAAED,sBANH;EAOpBG,UAAAA,eAAe,EAAED;EAPG,SAAxB;;EAUA,YAAIxuB,GAAG,GAAG+tB,QAAQ,IAAI/D,OAAO,CAACF,UAAR,CAAmB,OAAnB,EAA4B4E,iBAA5B,CAAZ,IAA8D1E,OAAO,CAACF,UAAR,CAAmB,oBAAnB,EAAyC4E,iBAAzC,CAAxE;;EAEA,YAAI1uB,GAAG,KAAK,IAAZ,EAAkB;EAEd,cAAIgqB,OAAO,CAACF,UAAR,CAAmB,OAAnB,MAAgC,IAApC,EAA0C;EAEtC,kBAAM,6DAAN;EAEH,WAJD,MAIO;EAEH,kBAAM,+BAAN;EAEH;EAEJ;;EAED55C,QAAAA,EAAE,CAAC6vB,EAAH,GAAQC,GAAR;EAEA9vB,QAAAA,EAAE,CAACy+C,kBAAH,GAAwBC,aAAa,CAACxoD,IAAd,CAAmB8J,EAAnB,CAAxB;EACAA,QAAAA,EAAE,CAAC2+C,qBAAH,GAA2BC,gBAAgB,CAAC1oD,IAAjB,CAAsB8J,EAAtB,CAA3B;;EACA85C,QAAAA,OAAO,CAAC+E,gBAAR,CAAyB,kBAAzB,EAA6C7+C,EAAE,CAACy+C,kBAAhD,EAAoE,KAApE;;EACA3E,QAAAA,OAAO,CAAC+E,gBAAR,CAAyB,sBAAzB,EAAiD7+C,EAAE,CAAC2+C,qBAApD,EAA2E,KAA3E,EAjCA;;;EAoCA,YAAI7uB,GAAG,CAAC6B,wBAAJ,KAAiCj2B,SAArC,EAAgD;EAE5Co0B,UAAAA,GAAG,CAAC6B,wBAAJ,GAA+B,YAAY;EAEvC,mBAAO;EAAE,0BAAY,CAAd;EAAiB,0BAAY,CAA7B;EAAgC,2BAAa;EAA7C,aAAP;EAEH,WAJD;EAMH;EAEJ,OA9CD,CA8CE,OAAOxQ,KAAP,EAAc;EAEZ9E,QAAAA,OAAO,CAAC8E,KAAR,CAAc,oBAAoBA,KAAlC;EAEH;EAIJ;;;qCACcoP,YAAY;AACvB,EACA,UAAIT,GAAG,GAAG,KAAKD,EAAf;EACA,UAAIjmB,MAAM,GAAG,KAAKA,MAAlB;EACA,UAAIC,OAAO,GAAG,KAAKA,OAAnB;;EACA,UAAIi1C,SAAS,GAAG,IAAI9jC,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkBpR,MAAlB,EAA0BC,OAA1B,CAAhB;EAEA;;;;;;;;;;;;;;;;;;;;;EAoBA,WAAKmtB,WAAL,GAAmB,IAAIpH,eAAJ,CAAoBE,GAApB,CAAnB;;EACA,WAAKkH,WAAL,CAAiBhsB,GAAjB,CAAqB,wBAArB;;EAEA,WAAKgtC,MAAL,GAAc,IAAIhmB,UAAJ,CAAelC,GAAf,CAAd;EACA,WAAKiV,KAAL,GAAa,IAAIoE,SAAJ,CAAcrZ,GAAd,CAAb;EACA,WAAKK,WAAL,GAAmB,IAAID,eAAJ,EAAnB;EACA,WAAKgJ,aAAL,GAAqB,IAAI5I,iBAAJ,CAAsBR,GAAtB,EAA2BS,UAA3B,CAArB;EACA,WAAKwnB,MAAL,GAAc,IAAIpd,UAAJ,CAAe7K,GAAf,EAAoB,KAAKkH,WAAzB,EAAsC,KAAKkC,aAA3C,CAAd;EACA,WAAKujB,aAAL,GAAqB,IAAID,iBAAJ,EAArB;EACA,WAAKuC,SAAL,GAAiB,IAAIlH,aAAJ,CAAkB/nB,GAAlB,EAAuB,KAAKkH,WAA5B,EAAyC,KAAK+gB,MAA9C,EAAsD,KAAK5nB,WAA3D,EAAwE,KAAK+I,aAA7E,EAA4F,KAAK8e,MAAjG,EAAyG,KAAKjT,KAA9G,CAAjB;EACA,WAAKD,WAAL,GAAmB,IAAI/G,eAAJ,CAAoBjO,GAApB,CAAnB;EACA,WAAK+U,WAAL,GAAmB,IAAIF,eAAJ,CAAoB7U,GAApB,EAAyB,KAAKgV,WAA9B,EAA2C,KAAKC,KAAhD,CAAnB;EACA,WAAKia,QAAL,GAAgB,IAAI3H,YAAJ,CAAiB,KAAKxS,WAAtB,EAAmC,KAAKE,KAAxC,CAAhB;EACA,WAAKka,aAAL,GAAqB,IAAI9J,aAAJ,CAAkBrlB,GAAlB,EAAuB,KAAKkH,WAA5B,EAAyC,KAAKkC,aAA9C,CAArB;EACA,WAAKgmB,YAAL,GAAoB,IAAItI,gBAAJ,EAApB;EACA,WAAKuI,eAAL,GAAuB,IAAInI,mBAAJ,CAAwBlnB,GAAxB,EAA6B,KAAKkH,WAAlC,EAA+C,KAAK+N,KAApD,CAAvB;EACA,WAAKqa,sBAAL,GAA8B,IAAI3H,0BAAJ,CAA+B3nB,GAA/B,EAAoC,KAAKkH,WAAzC,EAAsD,KAAK+N,KAA3D,CAA9B;;EACA,WAAKgT,MAAL,CAAYla,QAAZ,CAAqB,KAAKxC,gBAAL,CAAsB7/B,IAAtB,CAA2BsjD,SAA3B,EAAsCtjC,cAAtC,CAAqD,KAAKshC,WAA1D,CAArB,EA5CuB;;;EAgDvB,WAAK/X,KAAL,CAAW2E,QAAX,GAAsB,KAAKuV,aAAL,CAAmBvV,QAAzC,CAhDuB;EAoD1B;;;mCAEY;EACT,aAAO,KAAK7Z,EAAZ;EACH;;;sCAEe;EACZ,aAAO,KAAKitB,WAAZ;EACH;;;2CAEoB;EACjB,aAAO,KAAKzhB,gBAAZ;EACH;;;sCAEe;EACZ,aAAO,KAAK8hB,eAAZ;EACH;;;;oCAKazlD,OAAO;EACjB,UAAIkS,MAAM,GAAG,KAAKA,MAAlB;EACA,UAAIC,OAAO,GAAG,KAAKA,OAAnB;EAEA,WAAKizC,WAAL,GAAmBplD,KAAnB;EACA,WAAK2nD,OAAL,CAAaz1C,MAAb,EAAqBC,OAArB,EAA8B,KAA9B;EACH;;;;8BAGOM,OAAOC,QAAQk1C,aAAa;EAChC,UAAIt/C,EAAE,GAAG,IAAT;EACA,UAAI88C,WAAW,GAAG,KAAKA,WAAvB;EACA,UAAIhD,OAAO,GAAG95C,EAAE,CAAC48C,UAAjB;EACA,WAAKhzC,MAAL,GAAcO,KAAd;EACA,WAAKN,OAAL,GAAeO,MAAf;EAGA0vC,MAAAA,OAAO,CAAC3vC,KAAR,GAAgBA,KAAK,GAAG2yC,WAAxB;EACAhD,MAAAA,OAAO,CAAC1vC,MAAR,GAAiBA,MAAM,GAAG0yC,WAA1B,CATgC;;EAYhC,UAAIwC,WAAW,KAAK,KAApB,EAA2B;EAEvBxF,QAAAA,OAAO,CAAC7vC,KAAR,CAAcE,KAAd,GAAsBA,KAAK,GAAG,IAA9B;EACA2vC,QAAAA,OAAO,CAAC7vC,KAAR,CAAcG,MAAd,GAAuBA,MAAM,GAAG,IAAhC;EAEH;;EAEDpK,MAAAA,EAAE,CAACu/C,WAAH,CAAe,CAAf,EAAkB,CAAlB,EAAqBp1C,KAArB,EAA4BC,MAA5B;EAEH;;;;kCAGWyH,GAAGC,GAAG3H,OAAOC,QAAQ;EAC7B,UAAIylB,EAAE,GAAG,KAAKA,EAAd;EACA,UAAIgO,QAAQ,GAAG,IAAI7iB,OAAJ,CAAYnJ,CAAZ,EAAeC,CAAf,EAAkB3H,KAAlB,EAAyBC,MAAzB,CAAf,CAF6B;;EAM7B,WAAKixB,gBAAL,CAAsB7/B,IAAtB,CAA2BqiC,QAA3B,EAAqCriB,cAArC,CAAoD,KAAKshC,WAAzD;;EAEA,WAAK/E,MAAL,CAAYla,QAAZ,CAAqB,KAAKxC,gBAA1B,EAR6B;;EAWhC;;;;sCAEe;EACZ,UAAIvL,GAAG,GAAG,KAAKD,EAAf;;EADY,kDAEO71B,SAFP;EAAA,UAEPoX,CAFO;EAAA,UAEJ2O,CAFI;EAAA,UAED1Z,CAFC;EAAA,UAEEH,CAFF;;EAGZ,UAAIya,MAAM,GAAG,KAAKw8B,eAAL,CAAqBpyC,GAArB,CAAyBqG,CAAzB,EAA4B2O,CAA5B,EAA+B1Z,CAA/B,EAAkCH,CAAlC,CAAb;;EACA,WAAK6xC,MAAL,CAAYnd,OAAZ,CAAoBta,KAApB,CAA0Bib,QAA1B,CAAmC5a,MAAM,CAACvP,CAA1C,EAA6CuP,MAAM,CAACZ,CAApD,EAAuDY,MAAM,CAACta,CAA9D,EAAiEsa,MAAM,CAACza,CAAxE,EAA2E,KAAKi4C,mBAAhF;EACH;;;sCAEe;EACZ,aAAO,KAAKhB,eAAL,CAAqBj3C,CAA5B;EACH;;;oCAEa2X,OAAO;EACjB,UAAIiS,GAAG,GAAG,KAAKD,EAAf;EACA,WAAKstB,eAAL,CAAqBj3C,CAArB,GAAyB2X,KAAzB;EACA,UAAI8C,MAAM,GAAG,KAAKw8B,eAAlB;;EACA,WAAKpF,MAAL,CAAYnd,OAAZ,CAAoBta,KAApB,CAA0Bib,QAA1B,CAAmC5a,MAAM,CAACvP,CAA1C,EAA6CuP,MAAM,CAACZ,CAApD,EAAuDY,MAAM,CAACta,CAA9D,EAAiEsa,MAAM,CAACza,CAAxE,EAA2E,KAAKi4C,mBAAhF;EACH;;;EAED;4BACM79B,OAAOqV,OAAOgB,SAAS;EACzB,UAAI7G,GAAG,GAAG,KAAKD,EAAf;EACA,UAAI2vB,IAAI,GAAG,CAAX;EAEA,UAAIl/B,KAAK,KAAK5kB,SAAV,IAAuB4kB,KAA3B,EAAkCk/B,IAAI,IAAI1vB,GAAG,CAAC2vB,gBAAZ;EAClC,UAAI9pB,KAAK,KAAKj6B,SAAV,IAAuBi6B,KAA3B,EAAkC6pB,IAAI,IAAI1vB,GAAG,CAAC4vB,gBAAZ;EAClC,UAAI/oB,OAAO,KAAKj7B,SAAZ,IAAyBi7B,OAA7B,EAAsC6oB,IAAI,IAAI1vB,GAAG,CAAC6vB,kBAAZ;;EAEtC7vB,MAAAA,GAAG,CAAC8vB,KAAJ,CAAUJ,IAAV;EAEH;;;;mCAEY;EACT,WAAKI,KAAL,CAAW,IAAX,EAAiB,KAAjB,EAAwB,KAAxB;EACH;;;;mCAEY;EACT,WAAKA,KAAL,CAAW,KAAX,EAAkB,IAAlB,EAAwB,KAAxB;EACH;;;;qCAEc;EACX,WAAKA,KAAL,CAAW,KAAX,EAAkB,KAAlB,EAAyB,IAAzB;EACH;;;6BAEM9I,OAAO15B,QAAQyiC,YAAY;EAE9B,UAAI,EAAEziC,MAAM,IAAIA,MAAM,CAAC0iC,QAAnB,CAAJ,EAAkC;EAE9BzjC,QAAAA,OAAO,CAAC8E,KAAR,CAAc,4DAAd;EACA;EAEH;;EACD4+B,MAAAA,uBAAuB,GAAG,EAA1B;EACA,WAAK9C,kBAAL,GAA0B,CAAE,CAA5B;EACA,WAAKC,cAAL,GAAsB,IAAtB;EAEA,UAAI,KAAKL,cAAT,EAAyB,OAZK;;EAe9B,UAAI/F,KAAK,CAACkJ,UAAN,KAAqB,IAAzB,EAA+BlJ,KAAK,CAACzsB,iBAAN,GAfD;;EAkB9B,UAAIjN,MAAM,CAAC7I,MAAP,KAAkB,IAAtB,EAA4B6I,MAAM,CAACiN,iBAAP;;EAE5B,WAAKgzB,iBAAL,CAAuB//B,gBAAvB,CAAwCF,MAAM,CAACG,gBAA/C,EAAiEH,MAAM,CAACm+B,kBAAxE;;EACA,WAAKgC,QAAL,CAAc0C,aAAd,CAA4B,KAAK5C,iBAAjC,EArB8B;;;EAyB9B,WAAKL,mBAAL,GAA2B,KAAKP,aAAL,CAAmBzxC,GAAnB,CAAuB8rC,KAAvB,EAA8B15B,MAA9B,CAA3B;;EACA,WAAK4/B,mBAAL,CAAyBkD,IAAzB;;EAEA,WAAKnD,kBAAL,GAA0B,KAAKmC,YAAL,CAAkBl0C,GAAlB,CAAsB8rC,KAAtB,EAA6B15B,MAA7B,CAA1B;;EAEA,WAAK2/B,kBAAL,CAAwBmD,IAAxB,GA9B8B;;;EAiC9BC,MAAAA,aAAa,CAAClpD,IAAd,CAAmB,IAAnB,EAAyB6/C,KAAzB,EAAgC15B,MAAhC,EAAwC,KAAKggC,YAA7C;;EAEA,UAAI,KAAKA,YAAL,KAAsB,IAA1B,EAAgC;EAC5B,aAAKL,kBAAL,CAAwB16C,IAAxB;EACH;;EAED,WAAK26C,mBAAL,CAAyBoD,WAAzB,CAAqChjC,MAArC;;EAEA,UAAI,KAAK2nB,KAAL,CAAW4E,SAAf,EAA0B,KAAK5E,KAAL,CAAWjH,KAAX;;EAG1B,UAAI,KAAK0f,SAAL,IAAkBqC,UAAtB,EAAkC;EAC9B/I,QAAAA,KAAK,CAACuJ,UAAN,KAAqB,IAArB,GAA4B,KAAKC,aAAL,CAAmB,KAAKnD,eAAxB,CAA5B,GAAuE,KAAKmD,aAAL,CAAmBxJ,KAAK,CAACuJ,UAAzB,CAAvE;EACA,aAAKT,KAAL,CAAW,KAAKnC,cAAhB,EAAgC,KAAKC,cAArC,EAAqD,KAAKC,gBAA1D;EACH;;EAGD,UAAI4C,aAAa,GAAG,KAAKxD,kBAAL,CAAwBxG,MAA5C;EACA,UAAIiK,kBAAkB,GAAG,KAAKzD,kBAAL,CAAwBvgB,WAAjD,CAnD8B;;EAuD9B,UAAI+jB,aAAa,CAAC3pD,MAAlB,EAA0B6pD,aAAa,CAACxpD,IAAd,CAAmB,IAAnB,EAAyBspD,aAAzB,EAAwCzJ,KAAxC,EAA+C15B,MAA/C,EAvDI;;EA2D9B,UAAIojC,kBAAkB,CAAC5pD,MAAvB,EAA+B6pD,aAAa,CAACxpD,IAAd,CAAmB,IAAnB,EAAyBupD,kBAAzB,EAA6C1J,KAA7C,EAAoD15B,MAApD;;EAM/B,WAAK26B,MAAL,CAAYnd,OAAZ,CAAoBjF,KAApB,CAA0B8G,OAA1B,CAAkC,IAAlC;;EACA,WAAKsb,MAAL,CAAYnd,OAAZ,CAAoBjF,KAApB,CAA0B+G,OAA1B,CAAkC,IAAlC;;EACA,WAAKqb,MAAL,CAAYnd,OAAZ,CAAoBta,KAApB,CAA0Boc,OAA1B,CAAkC,IAAlC;;EAEA,WAAKqb,MAAL,CAAYlb,gBAAZ,CAA6B,KAA7B;;EAGA,WAAKkgB,kBAAL,GAA0B,IAA1B;EACA,WAAKC,mBAAL,GAA2B,IAA3B;EAGH;;;yCACkB5/B,QAAQsjC,KAAKn2B,UAAU2R,UAAU5S,QAAQqY,OAAO;EAE/D,UAAI3hC,EAAE,GAAG,IAAT;EACA,UAAI8vB,GAAG,GAAG,KAAKD,EAAf;EAGA,UAAIsM,WAAW,GAAI7S,MAAM,CAAC6Z,MAAP,IAAiB7Z,MAAM,CAAC7L,WAAP,CAAmB4K,WAAnB,KAAmC,CAAvE,CAN+D;;EAS/D,WAAK0vB,MAAL,CAAY4I,WAAZ,CAAwBzkB,QAAxB,EAAkCC,WAAlC;;EAEA,UAAIH,OAAO,GAAG4kB,UAAU,CAAC3pD,IAAX,CAAgB+I,EAAhB,EAAoBod,MAApB,EAA4BsjC,GAA5B,EAAiCxkB,QAAjC,EAA2C5S,MAA3C,CAAd;EAEA,UAAIu3B,aAAa,GAAGC,eAAe,CAACv2B,QAAD,EAAWyR,OAAX,EAAoBE,QAApB,CAAnC;EAGA,UAAIvkC,KAAK,GAAG4yB,QAAQ,CAAC5yB,KAArB;EACA,UAAIuS,QAAQ,GAAGqgB,QAAQ,CAACI,UAAT,CAAoBzgB,QAAnC;EACA,UAAI62C,WAAW,GAAG,CAAlB;;EAEA,UAAI7kB,QAAQ,CAAC8kB,SAAT,KAAuB,IAA3B,EAAiC;EAE7BrpD,QAAAA,KAAK,GAAG,KAAKktC,WAAL,CAAiBoc,qBAAjB,CAAuC12B,QAAvC,CAAR;EACAw2B,QAAAA,WAAW,GAAG,CAAd;EAEH;;EAED,UAAIvhC,SAAJ;EACA,UAAImsB,QAAQ,GAAG,KAAKwT,eAApB;;EAEA,UAAIxnD,KAAK,KAAK,IAAd,EAAoB;EAEhB6nB,QAAAA,SAAS,GAAG,KAAKslB,WAAL,CAAiB95B,GAAjB,CAAqBrT,KAArB,CAAZ;EAEAg0C,QAAAA,QAAQ,GAAG,KAAKyT,sBAAhB;EACAzT,QAAAA,QAAQ,CAAChJ,QAAT,CAAkBnjB,SAAlB;EAEH;;EAED,UAAIqhC,aAAJ,EAAmB;EAEfK,QAAAA,qBAAqB,CAACjqD,IAAtB,CAA2B,IAA3B,EAAiCilC,QAAjC,EAA2CF,OAA3C,EAAoDzR,QAApD;;EAEA,YAAI5yB,KAAK,KAAK,IAAd,EAAoB;EAEhBm4B,UAAAA,GAAG,CAAC0O,UAAJ,CAAe1O,GAAG,CAAC4V,oBAAnB,EAAyClmB,SAAS,CAAC8e,MAAnD;EAEH;EAEJ;;EAID,UAAI6iB,SAAS,GAAG1nD,QAAhB;;EAEA,UAAI9B,KAAK,KAAK,IAAd,EAAoB;EAEhBwpD,QAAAA,SAAS,GAAGxpD,KAAK,CAACkvB,KAAlB;EAEH,OAJD,MAIO,IAAI3c,QAAQ,KAAKxO,SAAjB,EAA4B;EAE/BylD,QAAAA,SAAS,GAAGj3C,QAAQ,CAAC2c,KAArB;EAEH;;EAED,UAAIu6B,UAAU,GAAG72B,QAAQ,CAACkY,SAAT,CAAmB38B,KAAnB,GAA2Bi7C,WAA5C;EACA,UAAIM,UAAU,GAAG92B,QAAQ,CAACkY,SAAT,CAAmB5b,KAAnB,GAA2Bk6B,WAA5C;EAEA,UAAIO,UAAU,GAAG3f,KAAK,KAAK,IAAV,GAAiBA,KAAK,CAAC77B,KAAN,GAAci7C,WAA/B,GAA6C,CAA9D;EACA,UAAIQ,UAAU,GAAG5f,KAAK,KAAK,IAAV,GAAiBA,KAAK,CAAC9a,KAAN,GAAck6B,WAA/B,GAA6CtnD,QAA9D;EAEA,UAAI+nD,SAAS,GAAGjrD,IAAI,CAACsC,GAAL,CAASuoD,UAAT,EAAqBE,UAArB,CAAhB;EACA,UAAIG,OAAO,GAAGlrD,IAAI,CAACiD,GAAL,CAAS2nD,SAAT,EAAoBC,UAAU,GAAGC,UAAjC,EAA6CC,UAAU,GAAGC,UAA1D,IAAwE,CAAtF;EAEA,UAAIG,SAAS,GAAGnrD,IAAI,CAACsC,GAAL,CAAS,CAAT,EAAY4oD,OAAO,GAAGD,SAAV,GAAsB,CAAlC,CAAhB;EAEA,UAAIE,SAAS,KAAK,CAAlB,EAAqB;;EAErB,UAAIp4B,MAAM,CAAC6Z,MAAX,EAAmB;EAEf,YAAIjH,QAAQ,CAAC8kB,SAAT,KAAuB,IAA3B,EAAiC;EAE7B,eAAKjJ,MAAL,CAAY4J,YAAZ,CAAyBzlB,QAAQ,CAAC0lB,kBAAT,GAA8B,KAAK9E,WAA5D;;EACAnR,UAAAA,QAAQ,CAACkW,OAAT,CAAiB/xB,GAAG,CAACma,KAArB;EAEH,SALD,MAKO;EAEH,kBAAQ3gB,MAAM,CAACw4B,QAAf;EAEI,iBAAKhrC,iBAAL;EACI60B,cAAAA,QAAQ,CAACkW,OAAT,CAAiB/xB,GAAG,CAACga,SAArB;EACA;;EAEJ,iBAAK/yB,qBAAL;EACI40B,cAAAA,QAAQ,CAACkW,OAAT,CAAiB/xB,GAAG,CAACia,cAArB;EACA;;EAEJ,iBAAK/yB,mBAAL;EACI20B,cAAAA,QAAQ,CAACkW,OAAT,CAAiB/xB,GAAG,CAACka,YAArB;EACA;EAZR;EAeH;EACJ,OAzBD,MAyBO,IAAI1gB,MAAM,CAACuZ,MAAX,EAAmB;EACtB,YAAIjF,SAAS,GAAG1B,QAAQ,CAAC+M,SAAzB;EAEA,YAAIrL,SAAS,KAAKliC,SAAlB,EAA6BkiC,SAAS,GAAG,CAAZ,CAHP;;EAKtB,aAAKma,MAAL,CAAY4J,YAAZ,CAAyB/jB,SAAS,GAAG,KAAKkf,WAA1C;;EAGA,gBAAQxzB,MAAM,CAACw4B,QAAf;EAEI,eAAKnrC,SAAL;EACIg1B,YAAAA,QAAQ,CAACkW,OAAT,CAAiB/xB,GAAG,CAACma,KAArB;EACA;;EAEJ,eAAKrzB,YAAL;EACI+0B,YAAAA,QAAQ,CAACkW,OAAT,CAAiB/xB,GAAG,CAACqa,SAArB;EACA;;EAEJ,eAAKtzB,aAAL;EACI80B,YAAAA,QAAQ,CAACkW,OAAT,CAAiB/xB,GAAG,CAACoa,UAArB;EACA;EAZR;EAgBH,OAxBM,MAwBA,IAAI5gB,MAAM,CAACsZ,QAAX,EAAqB;EAExB+I,QAAAA,QAAQ,CAACkW,OAAT,CAAiB/xB,GAAG,CAACsa,MAArB;EAEH,OAJM,MAIA,IAAI9gB,MAAM,CAACy4B,QAAX,EAAqB;EAExBpW,QAAAA,QAAQ,CAACkW,OAAT,CAAiB/xB,GAAG,CAACga,SAArB;EAEH;;EAED,UAAIvf,QAAQ,IAAIA,QAAQ,CAACy3B,yBAAzB,EAAoD;EAEhD,YAAIz3B,QAAQ,CAAC6sB,iBAAT,GAA6B,CAAjC,EAAoC;EAEhCzL,UAAAA,QAAQ,CAACsW,eAAT,CAAyB13B,QAAzB,EAAmCi3B,SAAnC,EAA8CE,SAA9C;EAEH;EAEJ,OARD,MAQO;EAEH/V,QAAAA,QAAQ,CAACtC,MAAT,CAAgBmY,SAAhB,EAA2BE,SAA3B;EAEH;EAEJ;;;yCAEkB;EACf,UAAIQ,WAAW,GAAGC,iBAAlB;;EAEA,UAAID,WAAW,IAAI,KAAKhpB,aAAL,CAAmB1I,WAAtC,EAAmD;EAE/CnU,QAAAA,OAAO,CAACC,IAAR,CAAa,kCAAkC4lC,WAAlC,GAAgD,8CAAhD,GAAiGnrB,YAAY,CAACvG,WAA3H;EAEH;;EAED2xB,MAAAA,iBAAiB,IAAI,CAArB;EAEA,aAAOD,WAAP;EACH;;;mCAEYxoB,SAASue,MAAM;EACxB;EACA,WAAK8G,SAAL,CAAevO,YAAf,CAA4B9W,OAA5B,EAAqCue,IAArC;EACH;;;uCAEgB;EAEhB;;;gCAES;EAEN,WAAK2E,UAAL,CAAgBwF,mBAAhB,CAAoC,kBAApC,EAAwD,KAAK3D,kBAA7D,EAAiF,KAAjF;EACA,WAAK7B,UAAL,CAAgBwF,mBAAhB,CAAoC,sBAApC,EAA4D,KAAKzD,qBAAjE,EAAwF,KAAxF;EAEA,WAAKF,kBAAL,GAA0B,IAA1B;EACA,WAAKE,qBAAL,GAA6B,IAA7B;;EACA,WAAKO,YAAL,CAAkBjD,OAAlB;;EACA,WAAKQ,aAAL,CAAmBR,OAAnB;;EACA,WAAK9rB,WAAL,CAAiB8rB,OAAjB;;EACA,WAAK+C,QAAL,CAAc/C,OAAd,GAVM;EAcN;;EAEH;;;;IArjBuB5lC;;;EAyjB5B,IAAI0pC,uBAAuB,GAAG,EAA9B;;EACA,SAASe,eAAT,CAAyBv2B,QAAzB,EAAmCyR,OAAnC,EAA4CE,QAA5C,EAAsD;EAElD,MAAImmB,eAAe,GAAG93B,QAAQ,CAACzgB,EAAT,GAAc,GAAd,GAAoBkyB,OAAO,CAAClyB,EAA5B,GAAiC,GAAjC,IAAwCoyB,QAAQ,CAAC8kB,SAAT,KAAuB,IAA/D,CAAtB;EAEA,MAAIH,aAAa,GAAG,KAApB;;EAEA,MAAIwB,eAAe,KAAKtC,uBAAxB,EAAiD;EAG7Cc,IAAAA,aAAa,GAAG,IAAhB;EACAd,IAAAA,uBAAuB,GAAGsC,eAA1B;EAEH;;EAED,SAAOxB,aAAP;EACH;;;EAGD,SAASV,aAAT,CAAuB72B,MAAvB,EAA+BlM,MAA/B,EAAuCklC,WAAvC,EAAoD;EAEhD,MAAIh5B,MAAM,CAACi5B,OAAP,KAAmB,KAAvB,EAA8B;;EAI9B,MAAIj5B,MAAM,CAACk5B,OAAX,EAAoB;EAEhB,SAAKxF,mBAAL,CAAyByF,SAAzB,CAAmCn5B,MAAnC;EAEH,GAJD,MAIO,IAAIA,MAAM,CAACy4B,QAAX,EAAqB;EAExB,QAAI,CAACz4B,MAAM,CAACo5B,aAAR,IAAyB,KAAKnF,QAAL,CAAcnuB,gBAAd,CAA+B9F,MAA/B,CAA7B,EAAqE;EAEjE,UAAIg5B,WAAJ,EAAiB;EAEb,aAAKhF,QAAL,CAAc1B,qBAAd,CAAoCtyB,MAAM,CAAC7L,WAA3C,EACKC,YADL,CACkB,KAAK2/B,iBADvB;EAGH;;EAED,UAAI9yB,QAAQ,GAAG,KAAKy0B,QAAL,CAAcvZ,MAAd,CAAqBnc,MAArB,CAAf;;EACA,UAAI4S,QAAQ,GAAG5S,MAAM,CAAC4S,QAAtB;;EAEA,WAAK6gB,kBAAL,CAAwBroD,IAAxB,CAA6B40B,MAA7B,EAAqCiB,QAArC,EAA+C2R,QAA/C,EAAyD,KAAKohB,QAAL,CAAcriC,CAAvE,EAA0E,IAA1E;EAEH;EAEJ,GAlBM,MAkBA,IAAIqO,MAAM,CAAC6Z,MAAP,IAAiB7Z,MAAM,CAACuZ,MAAxB,IAAkCvZ,MAAM,CAACsZ,QAA7C,EAAuD;EAE1D,QAAI,CAACtZ,MAAM,CAACo5B,aAAR,IAAyB,KAAKnF,QAAL,CAAcruB,gBAAd,CAA+B5F,MAA/B,CAA7B,EAAqE;EAEjE,UAAIg5B,WAAJ,EAAiB;EAEb,aAAKhF,QAAL,CAAc1B,qBAAd,CAAoCtyB,MAAM,CAAC7L,WAA3C,EACKC,YADL,CACkB,KAAK2/B,iBADvB;EAGH,OAPgE;;;EASjE,UAAI9yB,SAAQ,GAAG,KAAKy0B,QAAL,CAAcvZ,MAAd,CAAqBnc,MAArB,CAAf;;EACA,UAAI4S,SAAQ,GAAG5S,MAAM,CAAC4S,QAAtB,CAViE;;EAajE,UAAI9nC,KAAK,CAAC0B,OAAN,CAAcomC,SAAd,CAAJ,EAA6B;EAEzB,YAAIkF,MAAM,GAAG7W,SAAQ,CAAC6W,MAAtB;;EAEA,aAAK,IAAItqC,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGs+B,MAAM,CAACxqC,MAA3B,EAAmCE,CAAC,GAAGgM,CAAvC,EAA0ChM,CAAC,EAA3C,EAA+C;EAE3C,cAAI6qC,KAAK,GAAGP,MAAM,CAACtqC,CAAD,CAAlB;EACA,cAAI6rD,aAAa,GAAGzmB,SAAQ,CAACyF,KAAK,CAACC,aAAP,CAA5B;;EAEA,cAAI+gB,aAAa,IAAIA,aAAa,CAACJ,OAAnC,EAA4C;EAExC,iBAAKxF,kBAAL,CAAwBroD,IAAxB,CAA6B40B,MAA7B,EAAqCiB,SAArC,EAA+Co4B,aAA/C,EAA8D,KAAKrF,QAAL,CAAcriC,CAA5E,EAA+E0mB,KAA/E;EAEH;EAEJ;EAEJ,OAjBD,MAiBO,IAAIzF,SAAQ,CAACqmB,OAAb,EAAsB;EAEzB,aAAKxF,kBAAL,CAAwBroD,IAAxB,CAA6B40B,MAA7B,EAAqCiB,SAArC,EAA+C2R,SAA/C,EAAyD,KAAKohB,QAAL,CAAcriC,CAAvE,EAA0E,IAA1E;EAEH;EAEJ;EAIJ;;EAED,MAAIpG,QAAQ,GAAGyU,MAAM,CAACzU,QAAtB;;EAEA,OAAK,IAAI/d,EAAC,GAAG,CAAR,EAAWgM,EAAC,GAAG+R,QAAQ,CAACje,MAA7B,EAAqCE,EAAC,GAAGgM,EAAzC,EAA4ChM,EAAC,EAA7C,EAAiD;EAE7CqpD,IAAAA,aAAa,CAAClpD,IAAd,CAAmB,IAAnB,EAAyB4d,QAAQ,CAAC/d,EAAD,CAAjC,EAAsCsmB,MAAtC,EAA8CklC,WAA9C;EAEH;EAEJ;;EAED,SAAS7B,aAAT,CAAuBmC,UAAvB,EAAmC9L,KAAnC,EAA0C15B,MAA1C,EAAkD;EAC9C,OAAK,IAAItmB,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG8/C,UAAU,CAAChsD,MAA/B,EAAuCE,CAAC,GAAGgM,CAA3C,EAA8ChM,CAAC,EAA/C,EAAmD;EAE/C,QAAI0/C,UAAU,GAAGoM,UAAU,CAAC9rD,CAAD,CAA3B;EAEA,QAAIwyB,MAAM,GAAGktB,UAAU,CAACltB,MAAxB;EACA,QAAIiB,QAAQ,GAAGisB,UAAU,CAACjsB,QAA1B;EACA,QAAI2R,QAAQ,GAAGsa,UAAU,CAACta,QAA1B;EACA,QAAIyF,KAAK,GAAG6U,UAAU,CAAC7U,KAAvB;EAEAkhB,IAAAA,YAAY,CAAC5rD,IAAb,CAAkB,IAAlB,EAAwBqyB,MAAxB,EAAgCwtB,KAAhC,EAAuC15B,MAAvC,EAA+CmN,QAA/C,EAAyD2R,QAAzD,EAAmEyF,KAAnE;EAEH;EACJ;;EAED,SAASkhB,YAAT,CAAsBv5B,MAAtB,EAA8BwtB,KAA9B,EAAqC15B,MAArC,EAA6CmN,QAA7C,EAAuD2R,QAAvD,EAAiEyF,KAAjE,EAAwE;EAEpErY,EAAAA,MAAM,CAACw5B,cAAP,CAAsB,IAAtB,EAA4BhM,KAA5B,EAAmC15B,MAAnC,EAA2CmN,QAA3C,EAAqD2R,QAArD,EAA+DyF,KAA/D;EACA,OAAKqb,mBAAL,GAA2B,KAAKP,aAAL,CAAmBzxC,GAAnB,CAAuB8rC,KAAvB,EAA8B15B,MAA9B,CAA3B;EAEAkM,EAAAA,MAAM,CAACy5B,eAAP,CAAuBzlC,gBAAvB,CAAwCF,MAAM,CAACm+B,kBAA/C,EAAmEjyB,MAAM,CAAC7L,WAA1E;EACA6L,EAAAA,MAAM,CAAC6D,YAAP,CAAoBC,eAApB,CAAoC9D,MAAM,CAACy5B,eAA3C;EAEA,OAAKC,kBAAL,CAAwB5lC,MAAxB,EAAgC05B,KAAK,CAAC4J,GAAtC,EAA2Cn2B,QAA3C,EAAqD2R,QAArD,EAA+D5S,MAA/D,EAAuEqY,KAAvE;EAEArY,EAAAA,MAAM,CAAC25B,aAAP,CAAqB,IAArB,EAA2BnM,KAA3B,EAAkC15B,MAAlC,EAA0CmN,QAA1C,EAAoD2R,QAApD,EAA8DyF,KAA9D,EAVoE;EAYvE;;EAGD,IAAIwgB,iBAAiB,GAAG,CAAxB;;EACA,SAASvB,UAAT,CAAoBxjC,MAApB,EAA4BsjC,GAA5B,EAAiCxkB,QAAjC,EAA2C5S,MAA3C,EAAmD;EAC/C64B,EAAAA,iBAAiB,GAAG,CAApB;;EAEA,MAAIe,kBAAkB,GAAG,KAAK/yB,WAAL,CAAiBnlB,GAAjB,CAAqBkxB,QAArB,CAAzB;;EACA,MAAIiK,MAAM,GAAG,KAAK6W,mBAAL,CAAyBlF,KAAzB,CAA+B3R,MAA5C;;EAGA,MAAIjK,QAAQ,CAACqI,WAAT,KAAyB,KAA7B,EAAoC;EAEhC,QAAI2e,kBAAkB,CAAClnB,OAAnB,KAA+BtgC,SAAnC,EAA8C;EAE1CwgC,MAAAA,QAAQ,CAACqI,WAAT,GAAuB,IAAvB;EAEH,KAJD,MAIO,IAAIrI,QAAQ,CAACiK,MAAT,IAAmB+c,kBAAkB,CAACC,UAAnB,KAAkChd,MAAM,CAAC2R,KAAP,CAAaf,IAAtE,EAA4E;EAE/E7a,MAAAA,QAAQ,CAACqI,WAAT,GAAuB,IAAvB;EAEH;EAEJ;;EAGD,MAAIrI,QAAQ,CAACqI,WAAb,EAA0B;EAEtB6e,IAAAA,YAAY,CAACnsD,IAAb,CAAkB,IAAlB,EAAwBilC,QAAxB,EAAkCwkB,GAAlC,EAAuCp3B,MAAvC;EACA4S,IAAAA,QAAQ,CAACqI,WAAT,GAAuB,KAAvB;EAEH;;EAED,MAAI8e,cAAc,GAAG,KAArB;EACA,MAAIC,eAAe,GAAG,KAAtB;EACA,MAAIC,aAAa,GAAG,KAApB;EAEA,MAAIvnB,OAAO,GAAGknB,kBAAkB,CAAClnB,OAAjC;EAAA,MACIwnB,UAAU,GAAGxnB,OAAO,CAACynB,WAAR,EADjB;EAAA,MAEIC,UAAU,GAAGR,kBAAkB,CAACjS,MAAnB,CAA0BjK,QAF3C;;EAIA,MAAI,KAAK+Q,MAAL,CAAY9b,UAAZ,CAAuBD,OAAO,CAACA,OAA/B,CAAJ,EAA6C;EAEzCqnB,IAAAA,cAAc,GAAG,IAAjB;EACAC,IAAAA,eAAe,GAAG,IAAlB;EACAC,IAAAA,aAAa,GAAG,IAAhB;EAEH;;EAED,MAAIrnB,QAAQ,CAACpyB,EAAT,KAAgB,KAAKmzC,kBAAzB,EAA6C;EAEzC,SAAKA,kBAAL,GAA0B/gB,QAAQ,CAACpyB,EAAnC;EAEAw5C,IAAAA,eAAe,GAAG,IAAlB;EAEH;;EAED,MAAID,cAAc,IAAIjmC,MAAM,KAAK,KAAK8/B,cAAtC,EAAsD;EAElDsG,IAAAA,UAAU,CAACnX,QAAX,CAAoB,kBAApB,EAAwCjvB,MAAM,CAACG,gBAA/C;;EAEA,QAAIH,MAAM,KAAK,KAAK8/B,cAApB,EAAoC;EAEhC,WAAKA,cAAL,GAAsB9/B,MAAtB;EACAkmC,MAAAA,eAAe,GAAG,IAAlB;EACAC,MAAAA,aAAa,GAAG,IAAhB;EAEH;EACJ;;EAGD,MAAID,eAAJ,EAAqB;EAAA,QAsDRK,kBAtDQ,GAsDjB,SAASA,kBAAT,GAA8B;EAC1BD,MAAAA,UAAU,CAAC9c,QAAX,CAAoBlvC,KAApB,GAA4BwkC,QAAQ,CAAC0K,QAArC;EACA8c,MAAAA,UAAU,CAAC7c,SAAX,CAAqBnvC,KAArB,GAA6BwkC,QAAQ,CAAC0K,QAAT,GAAoB1K,QAAQ,CAAC0nB,OAA1D;EACAF,MAAAA,UAAU,CAACzmD,KAAX,CAAiBvF,KAAjB,GAAyBwkC,QAAQ,CAACj/B,KAAlC;EACH,KA1DgB;;EAGjB,QAAIi/B,QAAQ,CAACiK,MAAb,EAAqB;EAEjB;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA0d,MAAAA,6BAA6B,CAACH,UAAD,EAAaH,aAAb,CAA7B;EAEH;;EAED,QAAIrnB,QAAQ,CAAC4nB,mBAAT,IACG5nB,QAAQ,CAAC6nB,mBADZ,IAEG7nB,QAAQ,CAAC8nB,qBAFZ,IAGG9nB,QAAQ,CAAC+nB,mBAHZ,IAIG/nB,QAAQ,CAACgoB,gBAJZ,IAKGhoB,QAAQ,CAACioB,kBALZ,IAMGjoB,QAAQ,CAACkoB,gBANhB,EAMkC;EAC9B,UAAIloB,QAAQ,CAAC5b,KAAb,EAAoB;EAChBojC,QAAAA,UAAU,CAAC1d,OAAX,CAAmBtuC,KAAnB,GAA2BwkC,QAAQ,CAAC5b,KAApC;EACH;;EAED,UAAI4b,QAAQ,CAAChnC,GAAb,EAAkB;EACdwuD,QAAAA,UAAU,CAACxuD,GAAX,CAAewC,KAAf,GAAuBwkC,QAAQ,CAAChnC,GAAhC;EACH;;EAEDwuD,MAAAA,UAAU,CAACzd,OAAX,CAAmBvuC,KAAnB,GAA2BwkC,QAAQ,CAAC+J,OAApC;;EAEA,UAAI/J,QAAQ,CAACyM,QAAb,EAAuB;EAEnB+a,QAAAA,UAAU,CAAC/a,QAAX,CAAoBjxC,KAApB,CAA0B8D,IAA1B,CAA+B0gC,QAAQ,CAACyM,QAAxC,EAAkDntB,cAAlD,CAAiE0gB,QAAQ,CAACmoB,iBAA1E;EAEH;;EAED,UAAInoB,QAAQ,CAAChnC,GAAb,EAAkB;EAEd,YAAIgnC,QAAQ,CAAChnC,GAAT,CAAai2C,gBAAb,KAAkC,IAAtC,EAA4C;EACxC;EACAjP,UAAAA,QAAQ,CAAChnC,GAAT,CAAaovD,YAAb;EAEH;;EAEDZ,QAAAA,UAAU,CAACxd,WAAX,CAAuBxuC,KAAvB,CAA6B8D,IAA7B,CAAkC0gC,QAAQ,CAAChnC,GAAT,CAAamoB,MAA/C;EACH;EAEJ;;EAQD,QAAI6e,QAAQ,CAAC6nB,mBAAb,EAAkC;EAE9B,UAAI7nB,QAAQ,CAACqoB,oBAAb,EAAmC;EAC/BZ,QAAAA,kBAAkB;EACrB;EAEJ,KAND,MAMO,IAAIznB,QAAQ,CAAC+nB,mBAAb,EAAkC;EAErCP,MAAAA,UAAU,CAAC7a,QAAX,CAAoBnxC,KAApB,GAA4BwkC,QAAQ,CAAC2M,QAArC;EACA6a,MAAAA,UAAU,CAAC5a,SAAX,CAAqBpxC,KAArB,GAA6BnB,IAAI,CAACsC,GAAL,CAASqjC,QAAQ,CAAC4M,SAAlB,EAA6B,IAA7B,CAA7B,CAHqC;EAKxC,KALM,MAOF,IAAI5M,QAAQ,CAACgoB,gBAAb,EAA+B;EAEhCR,MAAAA,UAAU,CAACljC,IAAX,CAAgB9oB,KAAhB,GAAwBwkC,QAAQ,CAAC1b,IAAT,GAAgB,KAAKs8B,WAA7C;EACA4G,MAAAA,UAAU,CAACzmD,KAAX,CAAiBvF,KAAjB,GAAyB,KAAKmS,OAAL,GAAe,GAAxC;EAEH,KALI,MAKE,IAAIqyB,QAAQ,CAACkoB,gBAAb,EAA+B;EAElCV,MAAAA,UAAU,CAAC53B,QAAX,CAAoBp0B,KAApB,GAA4BwkC,QAAQ,CAACpQ,QAArC;EAGH,KALM,MAKA,IAAIoQ,QAAQ,CAACioB,kBAAb,EAAiC;EAEpCR,MAAAA,kBAAkB;EAClBD,MAAAA,UAAU,CAACza,SAAX,CAAqBvxC,KAArB,GAA6BwkC,QAAQ,CAAC+M,SAAtC;EACAya,MAAAA,UAAU,CAACxa,UAAX,CAAsBxxC,KAAtB,CAA4B8D,IAA5B,CAAiC0gC,QAAQ,CAACgN,UAA1C;EAEH;;EAIDwC,IAAAA,aAAa,CAAC8Y,MAAd,CAAqB,KAAK30B,EAA1B,EAA8BqzB,kBAAkB,CAACuB,YAAjD,EAA+Df,UAA/D,EAA2E,IAA3E;EAEH;;EACD,MAAIxnB,QAAQ,CAACwoB,gBAAT,IAA6BxoB,QAAQ,CAACyoB,kBAAT,KAAgC,IAAjE,EAAuE;EAEnEjZ,IAAAA,aAAa,CAAC8Y,MAAd,CAAqB,KAAK30B,EAA1B,EAA8BqzB,kBAAkB,CAACuB,YAAjD,EAA+Df,UAA/D,EAA2E,IAA3E;EACAxnB,IAAAA,QAAQ,CAACyoB,kBAAT,GAA8B,KAA9B;EAEH;;EAED,MAAIzoB,QAAQ,CAACkoB,gBAAb,EAA+B;EAE3BZ,IAAAA,UAAU,CAACnX,QAAX,CAAoB,QAApB,EAA8B/iB,MAAM,CAACF,MAArC;EAEH,GA9K8C;;;EAmL/Co6B,EAAAA,UAAU,CAACnX,QAAX,CAAoB,iBAApB,EAAuC/iB,MAAM,CAACy5B,eAA9C;EACAS,EAAAA,UAAU,CAACnX,QAAX,CAAoB,cAApB,EAAoC/iB,MAAM,CAAC6D,YAA3C;EACAq2B,EAAAA,UAAU,CAACnX,QAAX,CAAoB,aAApB,EAAmC/iB,MAAM,CAAC7L,WAA1C;EAEA,SAAOue,OAAP;EAEH;;EAED,SAASonB,YAAT,CAAsBlnB,QAAtB,EAAgCwkB,GAAhC,EAAqCp3B,MAArC,EAA6C;EAEzC,MAAI45B,kBAAkB,GAAG,KAAK/yB,WAAL,CAAiBnlB,GAAjB,CAAqBkxB,QAArB,CAAzB;;EACA,MAAIiK,MAAM,GAAG,KAAK6W,mBAAL,CAAyBlF,KAAzB,CAA+B3R,MAA5C;;EACA,MAAI5V,UAAU,GAAG,KAAK0uB,aAAL,CAAmB2F,aAAnB,CAAiC1oB,QAAjC,EAA2CiK,MAAM,CAAC2R,KAAlD,CAAjB;;EAEA,MAAIpG,IAAI,GAAG,KAAKuN,aAAL,CAAmB4F,cAAnB,CAAkC3oB,QAAlC,EAA4C3L,UAA5C,CAAX;;EAEA,MAAIyL,OAAO,GAAGknB,kBAAkB,CAAClnB,OAAjC;EACA,MAAI8oB,aAAa,GAAG,IAApB;;EAEA,MAAI9oB,OAAO,KAAKtgC,SAAhB,EAA2B;EAEvB;EAEA,SAAKqpD,kBAAL,GAA0BC,iBAAiB,CAAC9uD,IAAlB,CAAuB,IAAvB,CAA1B;EAEAgmC,IAAAA,QAAQ,CAAC/vB,EAAT,CAAY,SAAZ,EAAuB,KAAK44C,kBAA5B;EAEH,GARD,MAQO,IAAI/oB,OAAO,CAAC0V,IAAR,KAAiBA,IAArB,EAA2B;EAE9B;EACAuT,IAAAA,+BAA+B,CAAChuD,IAAhC,CAAqC,IAArC,EAA2CilC,QAA3C;EAEH,GALM,MAKA,IAAIgnB,kBAAkB,CAACC,UAAnB,KAAkChd,MAAM,CAAC2R,KAAP,CAAaf,IAAnD,EAAyD;EAE5DzQ,IAAAA,UAAU,CAACb,MAAX,CAAkBvJ,QAAlB,EAA4B,YAA5B,EAA0CiK,MAAM,CAAC2R,KAAP,CAAaf,IAAvD;EACA+N,IAAAA,aAAa,GAAG,KAAhB;EAEH,GALM,MAKA,IAAIv0B,UAAU,CAACslB,QAAX,KAAwBn6C,SAA5B,EAAuC;EAE1C;EACA;EAEH,GALM,MAKA;EAEH;EACAopD,IAAAA,aAAa,GAAG,KAAhB;EAEH;;EAED,MAAIA,aAAJ,EAAmB;EAEf,QAAIv0B,UAAU,CAACslB,QAAf,EAAyB;EAErB,UAAI5E,MAAM,GAAG3I,SAAS,CAAC/X,UAAU,CAACslB,QAAZ,CAAtB;EAEAqN,MAAAA,kBAAkB,CAACjS,MAAnB,GAA4B;EACxBp5C,QAAAA,IAAI,EAAEqkC,QAAQ,CAACt9B,IADS;EAExBooC,QAAAA,QAAQ,EAAEF,eAAa,CAAC7rC,KAAd,CAAoBg2C,MAAM,CAACjK,QAA3B,CAFc;EAGxBwB,QAAAA,YAAY,EAAEyI,MAAM,CAACzI,YAHG;EAIxBC,QAAAA,cAAc,EAAEwI,MAAM,CAACxI;EAJC,OAA5B;EAOH,KAXD,MAWO;EACH;EACAya,MAAAA,kBAAkB,CAACjS,MAAnB,GAA4B;EACxBp5C,QAAAA,IAAI,EAAEqkC,QAAQ,CAACt9B,IADS;EAExBooC,QAAAA,QAAQ,EAAE9K,QAAQ,CAAC8K,QAFK;EAGxBwB,QAAAA,YAAY,EAAEtM,QAAQ,CAACsM,YAHC;EAIxBC,QAAAA,cAAc,EAAEvM,QAAQ,CAACuM;EAJD,OAA5B;EAOH;;EAGDvM,IAAAA,QAAQ,CAACgpB,eAAT,CAAyBhC,kBAAkB,CAACjS,MAA5C,EAAoD,IAApD,EAzBe;;EA4BfjV,IAAAA,OAAO,GAAG,KAAKijB,aAAL,CAAmBkG,cAAnB,CAAkCjpB,QAAlC,EAA4CgnB,kBAAkB,CAACjS,MAA/D,EAAuE1gB,UAAvE,EAAmFmhB,IAAnF,CAAV;EAEAwR,IAAAA,kBAAkB,CAAClnB,OAAnB,GAA6BA,OAA7B;EACAE,IAAAA,QAAQ,CAACF,OAAT,GAAmBA,OAAnB;EAEH;;EAED,MAAIopB,iBAAiB,GAAGppB,OAAO,CAACqpB,aAAR,EAAxB;EAGA,MAAIre,QAAQ,GAAGkc,kBAAkB,CAACjS,MAAnB,CAA0BjK,QAAzC,CA/EyC;;EAoFzCkc,EAAAA,kBAAkB,CAACC,UAAnB,GAAgChd,MAAM,CAAC2R,KAAP,CAAaf,IAA7C;;EAEA,MAAI7a,QAAQ,CAACiK,MAAb,EAAqB;EAEjB;EAEAa,IAAAA,QAAQ,CAACZ,iBAAT,CAA2B1uC,KAA3B,GAAmCyuC,MAAM,CAAC2R,KAAP,CAAamD,OAAhD;EACAjU,IAAAA,QAAQ,CAACX,iBAAT,CAA2B3uC,KAA3B,GAAmCyuC,MAAM,CAAC2R,KAAP,CAAa/B,WAAhD;EACA/O,IAAAA,QAAQ,CAACT,UAAT,CAAoB7uC,KAApB,GAA4ByuC,MAAM,CAAC2R,KAAP,CAAa9B,IAAzC;EACAhP,IAAAA,QAAQ,CAACL,WAAT,CAAqBjvC,KAArB,GAA6ByuC,MAAM,CAAC2R,KAAP,CAAarmC,KAA1C;EAEH;;EAED,MAAI6zC,YAAY,GAAGpC,kBAAkB,CAAClnB,OAAnB,CAA2BynB,WAA3B,EAAnB;EACA,MAAIgB,YAAY,GAAG/Y,aAAa,CAAC6Z,YAAd,CAA2BD,YAAY,CAACxZ,GAAxC,EAA6C9E,QAA7C,CAAnB;EAEAkc,EAAAA,kBAAkB,CAACuB,YAAnB,GAAkCA,YAAlC;EAEH;;EAED,SAASO,iBAAT,CAA2Bl9C,KAA3B,EAAkC;AAC9B,EACA,MAAIo0B,QAAQ,GAAGp0B,KAAK,CAACrN,MAArB;EAEAyhC,EAAAA,QAAQ,CAACtwB,GAAT,CAAa,SAAb,EAAwB,KAAKm5C,kBAA7B;EAEA,OAAKA,kBAAL,GAA0B,IAA1B;EAEAS,EAAAA,kBAAkB,CAACvuD,IAAnB,CAAwB,IAAxB,EAA8BilC,QAA9B;EACH;;;EAID,SAASspB,kBAAT,CAA4BtpB,QAA5B,EAAsC;EAElC+oB,EAAAA,+BAA+B,CAAChuD,IAAhC,CAAqC,IAArC,EAA2CilC,QAA3C;;EAEA,OAAK/L,WAAL,CAAiB0V,MAAjB,CAAwB3J,QAAxB;EAEH;;EAED,SAAS+oB,+BAAT,CAAyC/oB,QAAzC,EAAmD;EAC/C,MAAIia,WAAW,GAAG,KAAKhmB,WAAL,CAAiBnlB,GAAjB,CAAqBkxB,QAArB,EAA+BF,OAAjD;;EAEAE,EAAAA,QAAQ,CAACF,OAAT,GAAmBtgC,SAAnB;;EAEA,MAAIy6C,WAAW,KAAKz6C,SAApB,EAA+B;EAE3B,SAAKujD,aAAL,CAAmBwG,cAAnB,CAAkCtP,WAAlC;EAEH;EACJ;;EAED,SAAS+K,qBAAT,CAA+BhlB,QAA/B,EAAyCF,OAAzC,EAAkDzR,QAAlD,EAA4D;EAExD,MAAIA,QAAQ,IAAIA,QAAQ,CAACy3B,yBAAzB,EAAoD;EAEhD,QAAI,KAAKhrB,WAAL,CAAiBhsB,GAAjB,CAAqB,wBAArB,MAAmD,IAAvD,EAA6D;EAEzDqR,MAAAA,OAAO,CAAC8E,KAAR,CAAc,oIAAd;EACA;EAEH;EAEJ;;EAGD,OAAK42B,MAAL,CAAYlc,cAAZ;;EACA,MAAI/L,GAAG,GAAG,KAAKD,EAAf;EACA,MAAI2V,kBAAkB,GAAGjb,QAAQ,CAACI,UAAlC;EAEA,MAAIy6B,iBAAiB,GAAGppB,OAAO,CAACqpB,aAAR,EAAxB;EACA,MAAIK,8BAA8B,GAAGxpB,QAAQ,CAACypB,sBAA9C;;EAEA,OAAK,IAAI9tD,IAAT,IAAiButD,iBAAjB,EAAoC;EAEhC,QAAIQ,gBAAgB,GAAGR,iBAAiB,CAACvtD,IAAD,CAAxC;;EAEA,QAAI+tD,gBAAgB,IAAI,CAAxB,EAA2B;EAEvB,UAAIC,iBAAiB,GAAGrgB,kBAAkB,CAAC3tC,IAAD,CAA1C;;EAEA,UAAIguD,iBAAiB,KAAKnqD,SAA1B,EAAqC;EAEjC,YAAIc,UAAU,GAAGqpD,iBAAiB,CAACrpD,UAAnC;EACA,YAAIgkB,IAAI,GAAGqlC,iBAAiB,CAAC/lB,QAA7B;;EAEA,YAAItgB,SAAS,GAAG,KAAKslB,WAAL,CAAiB95B,GAAjB,CAAqB66C,iBAArB,CAAhB,CALiC;;;EASjC,YAAIrmC,SAAS,KAAK9jB,SAAlB,EAA6B;EAE7B,YAAI4iC,MAAM,GAAG9e,SAAS,CAAC8e,MAAvB;EACA,YAAI1/B,IAAI,GAAG4gB,SAAS,CAAC5gB,IAArB;EACA,YAAIggC,eAAe,GAAGpf,SAAS,CAACof,eAAhC;;EAEA,YAAIinB,iBAAiB,CAAC5mB,4BAAtB,EAAoD;EAEhD,cAAI5gC,IAAI,GAAGwnD,iBAAiB,CAACxnD,IAA7B;EACA,cAAIynD,MAAM,GAAGznD,IAAI,CAACynD,MAAlB;EACA,cAAI79C,MAAM,GAAG49C,iBAAiB,CAAC59C,MAA/B;;EAEA,cAAI5J,IAAI,IAAIA,IAAI,CAAC0nD,4BAAjB,EAA+C;EAE3C,iBAAKhO,MAAL,CAAYjc,yBAAZ,CAAsC8pB,gBAAtC,EAAwDvnD,IAAI,CAACi5B,gBAA7D;;EAEA,gBAAI/M,QAAQ,CAAC6sB,iBAAT,KAA+B17C,SAAnC,EAA8C;EAE1C6uB,cAAAA,QAAQ,CAAC6sB,iBAAT,GAA6B/4C,IAAI,CAACi5B,gBAAL,GAAwBj5B,IAAI,CAACwoB,KAA1D;EAEH;EAEJ,WAVD,MAUO;EAEH,iBAAKkxB,MAAL,CAAYiO,eAAZ,CAA4BJ,gBAA5B;EAEH;;EAED91B,UAAAA,GAAG,CAAC0O,UAAJ,CAAe1O,GAAG,CAAC6V,YAAnB,EAAiCrH,MAAjC;;EACAxO,UAAAA,GAAG,CAACm2B,mBAAJ,CAAwBL,gBAAxB,EAA0CplC,IAA1C,EAAgD5hB,IAAhD,EAAsDpC,UAAtD,EAAkEspD,MAAM,GAAGlnB,eAA3E,EAA4F32B,MAAM,GAAG22B,eAArG;EAEH,SAzBD,MAyBO;EAEH,cAAIinB,iBAAiB,CAACK,0BAAtB,EAAkD;EAE9C,iBAAKnO,MAAL,CAAYjc,yBAAZ,CAAsC8pB,gBAAtC,EAAwDC,iBAAiB,CAACvuB,gBAA1E;;EAEA,gBAAI/M,QAAQ,CAAC6sB,iBAAT,KAA+B17C,SAAnC,EAA8C;EAE1C6uB,cAAAA,QAAQ,CAAC6sB,iBAAT,GAA6ByO,iBAAiB,CAACvuB,gBAAlB,GAAqCuuB,iBAAiB,CAACh/B,KAApF;EAEH;EAEJ,WAVD,MAUO;EAEH,iBAAKkxB,MAAL,CAAYiO,eAAZ,CAA4BJ,gBAA5B;EACH;;EAGD91B,UAAAA,GAAG,CAAC0O,UAAJ,CAAe1O,GAAG,CAAC6V,YAAnB,EAAiCrH,MAAjC;;EACAxO,UAAAA,GAAG,CAACm2B,mBAAJ,CAAwBL,gBAAxB,EAA0CplC,IAA1C,EAAgD5hB,IAAhD,EAAsDpC,UAAtD,EAAkE,CAAlE,EAAqE,CAArE;EAEH;EAEJ,OA/DD,MA+DO,IAAIkpD,8BAA8B,KAAKhqD,SAAvC,EAAkD;EACrD,YAAIhE,KAAK,GAAGguD,8BAA8B,CAAC7tD,IAAD,CAA1C;;EAEA,YAAIH,KAAK,KAAKgE,SAAd,EAAyB;EAErB,kBAAQhE,KAAK,CAACd,MAAd;EAEI,iBAAK,CAAL;EACIk5B,cAAAA,GAAG,CAACq2B,eAAJ,CAAoBP,gBAApB,EAAsCluD,KAAtC;;EACA;;EAEJ,iBAAK,CAAL;EACIo4B,cAAAA,GAAG,CAACs2B,eAAJ,CAAoBR,gBAApB,EAAsCluD,KAAtC;;EACA;;EAEJ,iBAAK,CAAL;EACIo4B,cAAAA,GAAG,CAACu2B,eAAJ,CAAoBT,gBAApB,EAAsCluD,KAAtC;;EACA;;EAEJ;EACIo4B,cAAAA,GAAG,CAACw2B,eAAJ,CAAoBV,gBAApB,EAAsCluD,KAAtC;;EAfR;EAmBH;EACJ;EAEJ;EAEJ;;EAED,OAAKqgD,MAAL,CAAYhc,uBAAZ;EAEH;;;EAID,SAAS8nB,6BAAT,CAAuC7c,QAAvC,EAAiDtvC,KAAjD,EAAwD;EAEpDsvC,EAAAA,QAAQ,CAACZ,iBAAT,CAA2B7B,WAA3B,GAAyC7sC,KAAzC;EAEAsvC,EAAAA,QAAQ,CAACX,iBAAT,CAA2B9B,WAA3B,GAAyC7sC,KAAzC;EACAsvC,EAAAA,QAAQ,CAACL,WAAT,CAAqBpC,WAArB,GAAmC7sC,KAAnC;EACAsvC,EAAAA,QAAQ,CAACT,UAAT,CAAoBhC,WAApB,GAAkC7sC,KAAlC;EAEH;EAED;;;;;;;EAKA,SAASgnD,aAAT,CAAuB52C,KAAvB,EAA8B;EAE1BA,EAAAA,KAAK,CAACy+C,cAAN;EACAlqC,EAAAA,OAAO,CAAC/e,GAAR,CAAY,8BAAZ;EACA,OAAKu/C,cAAL,GAAsB,IAAtB;EACA,OAAKnY,IAAL,CAAU;EAAE9lC,IAAAA,IAAI,EAAE;EAAR,GAAV;EACH;EACD;;;;;;EAIA,SAASggD,gBAAT,GAA4B;EAExBviC,EAAAA,OAAO,CAAC/e,GAAR,CAAY,kCAAZ;EACA,OAAKu/C,cAAL,GAAsB,IAAtB;;EACA,OAAKe,cAAL,CAAoB4I,WAApB;;EACA,OAAK9hB,IAAL,CAAU;EAAE9lC,IAAAA,IAAI,EAAE;EAAR,GAAV;EACH;;ECzsCD,IAAIkf,IAAE,GAAG,IAAI5B,OAAJ,EAAT;EACA,IAAI9K,CAAJ;EAEA,IAAIq1C,GAAG,GAAG,QAAV;;MACMC;;;EACF,sBAAY70C,CAAZ,EAAeC,CAAf,EAAkBmJ,CAAlB,EAAqBC,CAArB,EAAwB;EAAA;;EACpB,SAAKyI,EAAL,GAAU9R,CAAC,IAAI,CAAf;EACA,SAAK+R,EAAL,GAAU9R,CAAC,IAAI,CAAf;EACA,SAAK+R,EAAL,GAAU5I,CAAC,IAAI,CAAf;EACA,SAAK6I,EAAL,GAAW5I,CAAC,KAAKxf,SAAP,GAAoBwf,CAApB,GAAwB,CAAlC;EACH;;;;0BA8GGrJ,GAAGC,GAAGmJ,GAAGC,GAAG;EAEZ,WAAKyI,EAAL,GAAU9R,CAAV;EACA,WAAK+R,EAAL,GAAU9R,CAAV;EACA,WAAK+R,EAAL,GAAU5I,CAAV;EACA,WAAK6I,EAAL,GAAU5I,CAAV;EAEA,WAAKyrC,gBAAL;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAKhrD,WAAT,CAAqB,KAAKgoB,EAA1B,EAA8B,KAAKC,EAAnC,EAAuC,KAAKC,EAA5C,EAAgD,KAAKC,EAArD,CAAP;EAEH;;;2BAEI+D,YAAY;EAEb,WAAKlE,EAAL,GAAUkE,UAAU,CAAChW,CAArB;EACA,WAAK+R,EAAL,GAAUiE,UAAU,CAAC/V,CAArB;EACA,WAAK+R,EAAL,GAAUgE,UAAU,CAAC5M,CAArB;EACA,WAAK6I,EAAL,GAAU+D,UAAU,CAAC3M,CAArB;EAEA,WAAKyrC,gBAAL;EAEA,aAAO,IAAP;EAEH;;;mCAEY/jC,OAAO6iB,QAAQ;EAExB,UAAI,EAAE7iB,KAAK,IAAIA,KAAK,CAACC,OAAjB,CAAJ,EAA+B;EAE3B,cAAM,IAAIzG,KAAJ,CAAU,4FAAV,CAAN;EAEH;;EAED,UAAIvK,CAAC,GAAG+Q,KAAK,CAACe,EAAd;EAAA,UAAkB7R,CAAC,GAAG8Q,KAAK,CAACgB,EAA5B;EAAA,UAAgC3I,CAAC,GAAG2H,KAAK,CAACiB,EAA1C;EAAA,UAA8Cf,KAAK,GAAGF,KAAK,CAACE,KAA5D,CARwB;EAWxB;EACA;;EAEA,UAAIzU,GAAG,GAAG9X,IAAI,CAAC8X,GAAf;EACA,UAAIE,GAAG,GAAGhY,IAAI,CAACgY,GAAf;EAEA,UAAIq4C,EAAE,GAAGv4C,GAAG,CAACwD,CAAC,GAAG,CAAL,CAAZ;EACA,UAAIg1C,EAAE,GAAGx4C,GAAG,CAACyD,CAAC,GAAG,CAAL,CAAZ;EACA,UAAIg1C,EAAE,GAAGz4C,GAAG,CAAC4M,CAAC,GAAG,CAAL,CAAZ;EAEA,UAAI8rC,EAAE,GAAGx4C,GAAG,CAACsD,CAAC,GAAG,CAAL,CAAZ;EACA,UAAIm1C,EAAE,GAAGz4C,GAAG,CAACuD,CAAC,GAAG,CAAL,CAAZ;EACA,UAAIm1C,EAAE,GAAG14C,GAAG,CAAC0M,CAAC,GAAG,CAAL,CAAZ;;EAEA,UAAI6H,KAAK,KAAK,KAAd,EAAqB;EAEjB,aAAKa,EAAL,GAAUojC,EAAE,GAAGF,EAAL,GAAUC,EAAV,GAAeF,EAAE,GAAGI,EAAL,GAAUC,EAAnC;EACA,aAAKrjC,EAAL,GAAUgjC,EAAE,GAAGI,EAAL,GAAUF,EAAV,GAAeC,EAAE,GAAGF,EAAL,GAAUI,EAAnC;EACA,aAAKpjC,EAAL,GAAU+iC,EAAE,GAAGC,EAAL,GAAUI,EAAV,GAAeF,EAAE,GAAGC,EAAL,GAAUF,EAAnC;EACA,aAAKhjC,EAAL,GAAU8iC,EAAE,GAAGC,EAAL,GAAUC,EAAV,GAAeC,EAAE,GAAGC,EAAL,GAAUC,EAAnC;EAEH,OAPD,MAOO,IAAInkC,KAAK,KAAK,KAAd,EAAqB;EAExB,aAAKa,EAAL,GAAUojC,EAAE,GAAGF,EAAL,GAAUC,EAAV,GAAeF,EAAE,GAAGI,EAAL,GAAUC,EAAnC;EACA,aAAKrjC,EAAL,GAAUgjC,EAAE,GAAGI,EAAL,GAAUF,EAAV,GAAeC,EAAE,GAAGF,EAAL,GAAUI,EAAnC;EACA,aAAKpjC,EAAL,GAAU+iC,EAAE,GAAGC,EAAL,GAAUI,EAAV,GAAeF,EAAE,GAAGC,EAAL,GAAUF,EAAnC;EACA,aAAKhjC,EAAL,GAAU8iC,EAAE,GAAGC,EAAL,GAAUC,EAAV,GAAeC,EAAE,GAAGC,EAAL,GAAUC,EAAnC;EAEH,OAPM,MAOA,IAAInkC,KAAK,KAAK,KAAd,EAAqB;EAExB,aAAKa,EAAL,GAAUojC,EAAE,GAAGF,EAAL,GAAUC,EAAV,GAAeF,EAAE,GAAGI,EAAL,GAAUC,EAAnC;EACA,aAAKrjC,EAAL,GAAUgjC,EAAE,GAAGI,EAAL,GAAUF,EAAV,GAAeC,EAAE,GAAGF,EAAL,GAAUI,EAAnC;EACA,aAAKpjC,EAAL,GAAU+iC,EAAE,GAAGC,EAAL,GAAUI,EAAV,GAAeF,EAAE,GAAGC,EAAL,GAAUF,EAAnC;EACA,aAAKhjC,EAAL,GAAU8iC,EAAE,GAAGC,EAAL,GAAUC,EAAV,GAAeC,EAAE,GAAGC,EAAL,GAAUC,EAAnC;EAEH,OAPM,MAOA,IAAInkC,KAAK,KAAK,KAAd,EAAqB;EAExB,aAAKa,EAAL,GAAUojC,EAAE,GAAGF,EAAL,GAAUC,EAAV,GAAeF,EAAE,GAAGI,EAAL,GAAUC,EAAnC;EACA,aAAKrjC,EAAL,GAAUgjC,EAAE,GAAGI,EAAL,GAAUF,EAAV,GAAeC,EAAE,GAAGF,EAAL,GAAUI,EAAnC;EACA,aAAKpjC,EAAL,GAAU+iC,EAAE,GAAGC,EAAL,GAAUI,EAAV,GAAeF,EAAE,GAAGC,EAAL,GAAUF,EAAnC;EACA,aAAKhjC,EAAL,GAAU8iC,EAAE,GAAGC,EAAL,GAAUC,EAAV,GAAeC,EAAE,GAAGC,EAAL,GAAUC,EAAnC;EAEH,OAPM,MAOA,IAAInkC,KAAK,KAAK,KAAd,EAAqB;EAExB,aAAKa,EAAL,GAAUojC,EAAE,GAAGF,EAAL,GAAUC,EAAV,GAAeF,EAAE,GAAGI,EAAL,GAAUC,EAAnC;EACA,aAAKrjC,EAAL,GAAUgjC,EAAE,GAAGI,EAAL,GAAUF,EAAV,GAAeC,EAAE,GAAGF,EAAL,GAAUI,EAAnC;EACA,aAAKpjC,EAAL,GAAU+iC,EAAE,GAAGC,EAAL,GAAUI,EAAV,GAAeF,EAAE,GAAGC,EAAL,GAAUF,EAAnC;EACA,aAAKhjC,EAAL,GAAU8iC,EAAE,GAAGC,EAAL,GAAUC,EAAV,GAAeC,EAAE,GAAGC,EAAL,GAAUC,EAAnC;EAEH,OAPM,MAOA,IAAInkC,KAAK,KAAK,KAAd,EAAqB;EAExB,aAAKa,EAAL,GAAUojC,EAAE,GAAGF,EAAL,GAAUC,EAAV,GAAeF,EAAE,GAAGI,EAAL,GAAUC,EAAnC;EACA,aAAKrjC,EAAL,GAAUgjC,EAAE,GAAGI,EAAL,GAAUF,EAAV,GAAeC,EAAE,GAAGF,EAAL,GAAUI,EAAnC;EACA,aAAKpjC,EAAL,GAAU+iC,EAAE,GAAGC,EAAL,GAAUI,EAAV,GAAeF,EAAE,GAAGC,EAAL,GAAUF,EAAnC;EACA,aAAKhjC,EAAL,GAAU8iC,EAAE,GAAGC,EAAL,GAAUC,EAAV,GAAeC,EAAE,GAAGC,EAAL,GAAUC,EAAnC;EAEH;;EAED,UAAIxhB,MAAM,KAAK,KAAf,EAAsB,KAAKkhB,gBAAL;EAEtB,aAAO,IAAP;EAEH;;;uCAEgBznD,MAAM8P,OAAO;EAE1B;EAEA;EAEA,UAAIk4C,SAAS,GAAGl4C,KAAK,GAAG,CAAxB;EAAA,UAA2BwN,CAAC,GAAGjmB,IAAI,CAACgY,GAAL,CAAS24C,SAAT,CAA/B;EAEA,WAAKvjC,EAAL,GAAUzkB,IAAI,CAAC2S,CAAL,GAAS2K,CAAnB;EACA,WAAKoH,EAAL,GAAU1kB,IAAI,CAAC4S,CAAL,GAAS0K,CAAnB;EACA,WAAKqH,EAAL,GAAU3kB,IAAI,CAAC+b,CAAL,GAASuB,CAAnB;EACA,WAAKsH,EAAL,GAAUvtB,IAAI,CAAC8X,GAAL,CAAS64C,SAAT,CAAV;EAEA,WAAKP,gBAAL;EAEA,aAAO,IAAP;EAEH;;;4CAEqB9qD,GAAG;EAErB;EAEA;EAEA,UAAIwmB,EAAE,GAAGxmB,CAAC,CAACyf,QAAX;EAAA,UAEI6rC,GAAG,GAAG9kC,EAAE,CAAC,CAAD,CAFZ;EAAA,UAEiB+kC,GAAG,GAAG/kC,EAAE,CAAC,CAAD,CAFzB;EAAA,UAE8BglC,GAAG,GAAGhlC,EAAE,CAAC,CAAD,CAFtC;EAAA,UAGIilC,GAAG,GAAGjlC,EAAE,CAAC,CAAD,CAHZ;EAAA,UAGiBklC,GAAG,GAAGllC,EAAE,CAAC,CAAD,CAHzB;EAAA,UAG8BmlC,GAAG,GAAGnlC,EAAE,CAAC,CAAD,CAHtC;EAAA,UAIIolC,GAAG,GAAGplC,EAAE,CAAC,CAAD,CAJZ;EAAA,UAIiBqlC,GAAG,GAAGrlC,EAAE,CAAC,CAAD,CAJzB;EAAA,UAI8BslC,GAAG,GAAGtlC,EAAE,CAAC,EAAD,CAJtC;EAAA,UAMIulC,KAAK,GAAGT,GAAG,GAAGI,GAAN,GAAYI,GANxB;EAAA,UAOInrC,CAPJ;;EASA,UAAIorC,KAAK,GAAG,CAAZ,EAAe;EAEXprC,QAAAA,CAAC,GAAG,MAAMjmB,IAAI,CAACklB,IAAL,CAAUmsC,KAAK,GAAG,GAAlB,CAAV;EAEA,aAAK9jC,EAAL,GAAU,OAAOtH,CAAjB;EACA,aAAKmH,EAAL,GAAU,CAAC+jC,GAAG,GAAGF,GAAP,IAAchrC,CAAxB;EACA,aAAKoH,EAAL,GAAU,CAACyjC,GAAG,GAAGI,GAAP,IAAcjrC,CAAxB;EACA,aAAKqH,EAAL,GAAU,CAACyjC,GAAG,GAAGF,GAAP,IAAc5qC,CAAxB;EAEH,OATD,MASO,IAAI2qC,GAAG,GAAGI,GAAN,IAAaJ,GAAG,GAAGQ,GAAvB,EAA4B;EAE/BnrC,QAAAA,CAAC,GAAG,MAAMjmB,IAAI,CAACklB,IAAL,CAAU,MAAM0rC,GAAN,GAAYI,GAAZ,GAAkBI,GAA5B,CAAV;EAEA,aAAK7jC,EAAL,GAAU,CAAC4jC,GAAG,GAAGF,GAAP,IAAchrC,CAAxB;EACA,aAAKmH,EAAL,GAAU,OAAOnH,CAAjB;EACA,aAAKoH,EAAL,GAAU,CAACwjC,GAAG,GAAGE,GAAP,IAAc9qC,CAAxB;EACA,aAAKqH,EAAL,GAAU,CAACwjC,GAAG,GAAGI,GAAP,IAAcjrC,CAAxB;EAEH,OATM,MASA,IAAI+qC,GAAG,GAAGI,GAAV,EAAe;EAElBnrC,QAAAA,CAAC,GAAG,MAAMjmB,IAAI,CAACklB,IAAL,CAAU,MAAM8rC,GAAN,GAAYJ,GAAZ,GAAkBQ,GAA5B,CAAV;EAEA,aAAK7jC,EAAL,GAAU,CAACujC,GAAG,GAAGI,GAAP,IAAcjrC,CAAxB;EACA,aAAKmH,EAAL,GAAU,CAACyjC,GAAG,GAAGE,GAAP,IAAc9qC,CAAxB;EACA,aAAKoH,EAAL,GAAU,OAAOpH,CAAjB;EACA,aAAKqH,EAAL,GAAU,CAAC2jC,GAAG,GAAGE,GAAP,IAAclrC,CAAxB;EAEH,OATM,MASA;EAEHA,QAAAA,CAAC,GAAG,MAAMjmB,IAAI,CAACklB,IAAL,CAAU,MAAMksC,GAAN,GAAYR,GAAZ,GAAkBI,GAA5B,CAAV;EAEA,aAAKzjC,EAAL,GAAU,CAACwjC,GAAG,GAAGF,GAAP,IAAc5qC,CAAxB;EACA,aAAKmH,EAAL,GAAU,CAAC0jC,GAAG,GAAGI,GAAP,IAAcjrC,CAAxB;EACA,aAAKoH,EAAL,GAAU,CAAC4jC,GAAG,GAAGE,GAAP,IAAclrC,CAAxB;EACA,aAAKqH,EAAL,GAAU,OAAOrH,CAAjB;EAEH;;EAED,WAAKmqC,gBAAL;EAEA,aAAO,IAAP;EAEH;;;;yCAOkBkB,OAAOC,KAAK;EAE3B,UAAIhqC,IAAE,KAAKpiB,SAAX,EAAsBoiB,IAAE,GAAG,IAAI5B,OAAJ,EAAL;EAEtB9K,MAAAA,CAAC,GAAGy2C,KAAK,CAACppC,GAAN,CAAUqpC,GAAV,IAAiB,CAArB;;EAEA,UAAI12C,CAAC,GAAGq1C,GAAR,EAAa;EAETr1C,QAAAA,CAAC,GAAG,CAAJ;;EAEA,YAAI7a,IAAI,CAACuK,GAAL,CAAS+mD,KAAK,CAACh2C,CAAf,IAAoBtb,IAAI,CAACuK,GAAL,CAAS+mD,KAAK,CAAC5sC,CAAf,CAAxB,EAA2C;EAEvC6C,UAAAA,IAAE,CAAC/S,GAAH,CAAO,CAAE88C,KAAK,CAAC/1C,CAAf,EAAkB+1C,KAAK,CAACh2C,CAAxB,EAA2B,CAA3B;EAEH,SAJD,MAIO;EAEHiM,UAAAA,IAAE,CAAC/S,GAAH,CAAO,CAAP,EAAU,CAAE88C,KAAK,CAAC5sC,CAAlB,EAAqB4sC,KAAK,CAAC/1C,CAA3B;EAEH;EAEJ,OAdD,MAcO;EAEHgM,QAAAA,IAAE,CAACG,YAAH,CAAgB4pC,KAAhB,EAAuBC,GAAvB;EAEH;;EAED,WAAKnkC,EAAL,GAAU7F,IAAE,CAACjM,CAAb;EACA,WAAK+R,EAAL,GAAU9F,IAAE,CAAChM,CAAb;EACA,WAAK+R,EAAL,GAAU/F,IAAE,CAAC7C,CAAb;EACA,WAAK6I,EAAL,GAAU1S,CAAV;EAEA,aAAO,KAAKuM,SAAL,EAAP;EAEH;;;gCAES;EAEN,aAAO,KAAKoqC,SAAL,GAAiBpqC,SAAjB,EAAP;EAEH;;;kCAEW;EAER,WAAKgG,EAAL,IAAW,CAAE,CAAb;EACA,WAAKC,EAAL,IAAW,CAAE,CAAb;EACA,WAAKC,EAAL,IAAW,CAAE,CAAb;EAEA,WAAK8iC,gBAAL;EAEA,aAAO,IAAP;EAEH;;;0BAEGtrC,GAAG;EAEH,aAAO,KAAKsI,EAAL,GAAUtI,CAAC,CAACsI,EAAZ,GAAiB,KAAKC,EAAL,GAAUvI,CAAC,CAACuI,EAA7B,GAAkC,KAAKC,EAAL,GAAUxI,CAAC,CAACwI,EAA9C,GAAmD,KAAKC,EAAL,GAAUzI,CAAC,CAACyI,EAAtE;EAEH;;;iCAEU;EAEP,aAAO,KAAKH,EAAL,GAAU,KAAKA,EAAf,GAAoB,KAAKC,EAAL,GAAU,KAAKA,EAAnC,GAAwC,KAAKC,EAAL,GAAU,KAAKA,EAAvD,GAA4D,KAAKC,EAAL,GAAU,KAAKA,EAAlF;EAEH;;;+BAEQ;EAEL,aAAOvtB,IAAI,CAACklB,IAAL,CAAU,KAAKkI,EAAL,GAAU,KAAKA,EAAf,GAAoB,KAAKC,EAAL,GAAU,KAAKA,EAAnC,GAAwC,KAAKC,EAAL,GAAU,KAAKA,EAAvD,GAA4D,KAAKC,EAAL,GAAU,KAAKA,EAArF,CAAP;EAEH;;;kCAEW;EAER,UAAIhhB,CAAC,GAAG,KAAKlM,MAAL,EAAR;;EAEA,UAAIkM,CAAC,KAAK,CAAV,EAAa;EAET,aAAK6gB,EAAL,GAAU,CAAV;EACA,aAAKC,EAAL,GAAU,CAAV;EACA,aAAKC,EAAL,GAAU,CAAV;EACA,aAAKC,EAAL,GAAU,CAAV;EAEH,OAPD,MAOO;EAEHhhB,QAAAA,CAAC,GAAG,IAAIA,CAAR;EAEA,aAAK6gB,EAAL,GAAU,KAAKA,EAAL,GAAU7gB,CAApB;EACA,aAAK8gB,EAAL,GAAU,KAAKA,EAAL,GAAU9gB,CAApB;EACA,aAAK+gB,EAAL,GAAU,KAAKA,EAAL,GAAU/gB,CAApB;EACA,aAAKghB,EAAL,GAAU,KAAKA,EAAL,GAAUhhB,CAApB;EAEH;;EAED,WAAK6jD,gBAAL;EAEA,aAAO,IAAP;EAEH;;;+BAEQhqC,GAAG5d,GAAG;EAEX,UAAIA,CAAC,KAAKrD,SAAV,EAAqB;EAEjB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,kGAAb;EACA,eAAO,KAAK0rC,mBAAL,CAAyBrrC,CAAzB,EAA4B5d,CAA5B,CAAP;EAEH;;EAED,aAAO,KAAKipD,mBAAL,CAAyB,IAAzB,EAA+BrrC,CAA/B,CAAP;EAEH;;;kCAEWA,GAAG;EAEX,aAAO,KAAKqrC,mBAAL,CAAyBrrC,CAAzB,EAA4B,IAA5B,CAAP;EAEH;;;0CAEmBzW,GAAGG,GAAG;EAEtB;EAEA,UAAI4hD,GAAG,GAAG/hD,CAAC,CAACyd,EAAZ;EAAA,UAAgBukC,GAAG,GAAGhiD,CAAC,CAAC0d,EAAxB;EAAA,UAA4BukC,GAAG,GAAGjiD,CAAC,CAAC2d,EAApC;EAAA,UAAwCukC,GAAG,GAAGliD,CAAC,CAAC4d,EAAhD;EACA,UAAIukC,GAAG,GAAGhiD,CAAC,CAACsd,EAAZ;EAAA,UAAgB2kC,GAAG,GAAGjiD,CAAC,CAACud,EAAxB;EAAA,UAA4B2kC,GAAG,GAAGliD,CAAC,CAACwd,EAApC;EAAA,UAAwC2kC,GAAG,GAAGniD,CAAC,CAACyd,EAAhD;EAEA,WAAKH,EAAL,GAAUskC,GAAG,GAAGO,GAAN,GAAYJ,GAAG,GAAGC,GAAlB,GAAwBH,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAApD;EACA,WAAK1kC,EAAL,GAAUskC,GAAG,GAAGM,GAAN,GAAYJ,GAAG,GAAGE,GAAlB,GAAwBH,GAAG,GAAGE,GAA9B,GAAoCJ,GAAG,GAAGM,GAApD;EACA,WAAK1kC,EAAL,GAAUskC,GAAG,GAAGK,GAAN,GAAYJ,GAAG,GAAGG,GAAlB,GAAwBN,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAApD;EACA,WAAKvkC,EAAL,GAAUskC,GAAG,GAAGI,GAAN,GAAYP,GAAG,GAAGI,GAAlB,GAAwBH,GAAG,GAAGI,GAA9B,GAAoCH,GAAG,GAAGI,GAApD;EAEA,WAAK5B,gBAAL;EAEA,aAAO,IAAP;EAEH;;;4BAEK8B,IAAIh1C,GAAG;EAET,UAAIA,CAAC,KAAK,CAAV,EAAa,OAAO,IAAP;EACb,UAAIA,CAAC,KAAK,CAAV,EAAa,OAAO,KAAKjY,IAAL,CAAUitD,EAAV,CAAP;EAEb,UAAI52C,CAAC,GAAG,KAAK8R,EAAb;EAAA,UAAiB7R,CAAC,GAAG,KAAK8R,EAA1B;EAAA,UAA8B3I,CAAC,GAAG,KAAK4I,EAAvC;EAAA,UAA2C3I,CAAC,GAAG,KAAK4I,EAApD,CALS;;EAST,UAAI4kC,YAAY,GAAGxtC,CAAC,GAAGutC,EAAE,CAAC3kC,EAAP,GAAYjS,CAAC,GAAG42C,EAAE,CAAC9kC,EAAnB,GAAwB7R,CAAC,GAAG22C,EAAE,CAAC7kC,EAA/B,GAAoC3I,CAAC,GAAGwtC,EAAE,CAAC5kC,EAA9D;;EAEA,UAAI6kC,YAAY,GAAG,CAAnB,EAAsB;EAElB,aAAK5kC,EAAL,GAAU,CAAE2kC,EAAE,CAAC3kC,EAAf;EACA,aAAKH,EAAL,GAAU,CAAE8kC,EAAE,CAAC9kC,EAAf;EACA,aAAKC,EAAL,GAAU,CAAE6kC,EAAE,CAAC7kC,EAAf;EACA,aAAKC,EAAL,GAAU,CAAE4kC,EAAE,CAAC5kC,EAAf;EAEA6kC,QAAAA,YAAY,GAAG,CAAEA,YAAjB;EAEH,OATD,MASO;EAEH,aAAKltD,IAAL,CAAUitD,EAAV;EAEH;;EAED,UAAIC,YAAY,IAAI,GAApB,EAAyB;EAErB,aAAK5kC,EAAL,GAAU5I,CAAV;EACA,aAAKyI,EAAL,GAAU9R,CAAV;EACA,aAAK+R,EAAL,GAAU9R,CAAV;EACA,aAAK+R,EAAL,GAAU5I,CAAV;EAEA,eAAO,IAAP;EAEH;;EAED,UAAI0tC,YAAY,GAAGpyD,IAAI,CAACklB,IAAL,CAAU,MAAMitC,YAAY,GAAGA,YAA/B,CAAnB;;EAEA,UAAInyD,IAAI,CAACuK,GAAL,CAAS6nD,YAAT,IAAyB,KAA7B,EAAoC;EAEhC,aAAK7kC,EAAL,GAAU,OAAO5I,CAAC,GAAG,KAAK4I,EAAhB,CAAV;EACA,aAAKH,EAAL,GAAU,OAAO9R,CAAC,GAAG,KAAK8R,EAAhB,CAAV;EACA,aAAKC,EAAL,GAAU,OAAO9R,CAAC,GAAG,KAAK8R,EAAhB,CAAV;EACA,aAAKC,EAAL,GAAU,OAAO5I,CAAC,GAAG,KAAK4I,EAAhB,CAAV;EAEA,eAAO,IAAP;EAEH;;EAED,UAAI+kC,SAAS,GAAGryD,IAAI,CAAC8b,KAAL,CAAWs2C,YAAX,EAAyBD,YAAzB,CAAhB;EACA,UAAIG,MAAM,GAAGtyD,IAAI,CAACgY,GAAL,CAAS,CAAC,IAAIkF,CAAL,IAAUm1C,SAAnB,IAAgCD,YAA7C;EAAA,UACIG,MAAM,GAAGvyD,IAAI,CAACgY,GAAL,CAASkF,CAAC,GAAGm1C,SAAb,IAA0BD,YADvC;EAGA,WAAK7kC,EAAL,GAAW5I,CAAC,GAAG2tC,MAAJ,GAAa,KAAK/kC,EAAL,GAAUglC,MAAlC;EACA,WAAKnlC,EAAL,GAAW9R,CAAC,GAAGg3C,MAAJ,GAAa,KAAKllC,EAAL,GAAUmlC,MAAlC;EACA,WAAKllC,EAAL,GAAW9R,CAAC,GAAG+2C,MAAJ,GAAa,KAAKjlC,EAAL,GAAUklC,MAAlC;EACA,WAAKjlC,EAAL,GAAW5I,CAAC,GAAG4tC,MAAJ,GAAa,KAAKhlC,EAAL,GAAUilC,MAAlC;EAEA,WAAKnC,gBAAL;EAEA,aAAO,IAAP;EAEH;;;6BAEM9+B,YAAY;EAEf,aAAQA,UAAU,CAAClE,EAAX,KAAkB,KAAKA,EAAxB,IAAgCkE,UAAU,CAACjE,EAAX,KAAkB,KAAKA,EAAvD,IAA+DiE,UAAU,CAAChE,EAAX,KAAkB,KAAKA,EAAtF,IAA8FgE,UAAU,CAAC/D,EAAX,KAAkB,KAAKA,EAA5H;EAEH;;;gCAESxsB,OAAO2Q,QAAQ;EAErB,UAAIA,MAAM,KAAKvM,SAAf,EAA0BuM,MAAM,GAAG,CAAT;EAE1B,WAAK0b,EAAL,GAAUrsB,KAAK,CAAC2Q,MAAD,CAAf;EACA,WAAK2b,EAAL,GAAUtsB,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAf;EACA,WAAK4b,EAAL,GAAUvsB,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAf;EACA,WAAK6b,EAAL,GAAUxsB,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAf;EAEA,WAAK0+C,gBAAL;EAEA,aAAO,IAAP;EAEH;;;8BAEOrvD,OAAO2Q,QAAQ;EAEnB,UAAI3Q,KAAK,KAAKoE,SAAd,EAAyBpE,KAAK,GAAG,EAAR;EACzB,UAAI2Q,MAAM,KAAKvM,SAAf,EAA0BuM,MAAM,GAAG,CAAT;EAE1B3Q,MAAAA,KAAK,CAAC2Q,MAAD,CAAL,GAAgB,KAAK0b,EAArB;EACArsB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoB,KAAK2b,EAAzB;EACAtsB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoB,KAAK4b,EAAzB;EACAvsB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoB,KAAK6b,EAAzB;EAEA,aAAOxsB,KAAP;EAEH;;;+BAEQyxD,UAAU;EAEf,WAAKpC,gBAAL,GAAwBoC,QAAxB;EAEA,aAAO,IAAP;EAEH;;;yCAEkB;;;0BA5hBX;EACJ,aAAO,KAAKplC,EAAZ;EACH;wBACKjsB,OAAO;EACT,WAAKisB,EAAL,GAAUjsB,KAAV;EACA,WAAKivD,gBAAL;EACH;;;0BAEO;EACJ,aAAO,KAAK/iC,EAAZ;EACH;wBAEKlsB,OAAO;EACT,WAAKksB,EAAL,GAAUlsB,KAAV;EACA,WAAKivD,gBAAL;EACH;;;0BAEO;EACJ,aAAO,KAAK9iC,EAAZ;EACH;wBAEKnsB,OAAO;EACT,WAAKmsB,EAAL,GAAUnsB,KAAV;EACA,WAAKivD,gBAAL;EAEH;;;0BAEO;EACJ,aAAO,KAAK7iC,EAAZ;EACH;wBAEKpsB,OAAO;EACT,WAAKosB,EAAL,GAAUpsB,KAAV;EACA,WAAKivD,gBAAL;EACH;;;4BAIYqC,IAAIP,IAAIQ,IAAIx1C,GAAG;EAExB,aAAOw1C,EAAE,CAACztD,IAAH,CAAQwtD,EAAR,EAAYE,KAAZ,CAAkBT,EAAlB,EAAsBh1C,CAAtB,CAAP;EAEH;;;gCAEgB01C,KAAKC,WAAWC,MAAMC,YAAYC,MAAMC,YAAY/1C,GAAG;EAEpE;EAEA,UAAIg2C,EAAE,GAAGJ,IAAI,CAACC,UAAU,GAAG,CAAd,CAAb;EAAA,UACII,EAAE,GAAGL,IAAI,CAACC,UAAU,GAAG,CAAd,CADb;EAAA,UAEIK,EAAE,GAAGN,IAAI,CAACC,UAAU,GAAG,CAAd,CAFb;EAAA,UAGIM,EAAE,GAAGP,IAAI,CAACC,UAAU,GAAG,CAAd,CAHb;EAAA,UAKIO,EAAE,GAAGN,IAAI,CAACC,UAAU,GAAG,CAAd,CALb;EAAA,UAMIM,EAAE,GAAGP,IAAI,CAACC,UAAU,GAAG,CAAd,CANb;EAAA,UAOIO,EAAE,GAAGR,IAAI,CAACC,UAAU,GAAG,CAAd,CAPb;EAAA,UAQIQ,EAAE,GAAGT,IAAI,CAACC,UAAU,GAAG,CAAd,CARb;;EAUA,UAAII,EAAE,KAAKI,EAAP,IAAaP,EAAE,KAAKI,EAApB,IAA0BH,EAAE,KAAKI,EAAjC,IAAuCH,EAAE,KAAKI,EAAlD,EAAsD;EAElD,YAAIvtC,CAAC,GAAG,IAAI/I,CAAZ;EAAA,YAEIpF,GAAG,GAAGo7C,EAAE,GAAGI,EAAL,GAAUH,EAAE,GAAGI,EAAf,GAAoBH,EAAE,GAAGI,EAAzB,GAA8BH,EAAE,GAAGI,EAF7C;EAAA,YAIIC,GAAG,GAAI57C,GAAG,IAAI,CAAP,GAAW,CAAX,GAAe,CAAE,CAJ5B;EAAA,YAKI67C,MAAM,GAAG,IAAI77C,GAAG,GAAGA,GALvB,CAFkD;;EAUlD,YAAI67C,MAAM,GAAGjpD,MAAM,CAACkpD,OAApB,EAA6B;EAEzB,cAAI57C,GAAG,GAAGhY,IAAI,CAACklB,IAAL,CAAUyuC,MAAV,CAAV;EAAA,cACIroD,GAAG,GAAGtL,IAAI,CAAC8b,KAAL,CAAW9D,GAAX,EAAgBF,GAAG,GAAG47C,GAAtB,CADV;EAGAztC,UAAAA,CAAC,GAAGjmB,IAAI,CAACgY,GAAL,CAASiO,CAAC,GAAG3a,GAAb,IAAoB0M,GAAxB;EACAkF,UAAAA,CAAC,GAAGld,IAAI,CAACgY,GAAL,CAASkF,CAAC,GAAG5R,GAAb,IAAoB0M,GAAxB;EAEH;;EAED,YAAI67C,IAAI,GAAG32C,CAAC,GAAGw2C,GAAf;EAEAR,QAAAA,EAAE,GAAGA,EAAE,GAAGjtC,CAAL,GAASqtC,EAAE,GAAGO,IAAnB;EACAV,QAAAA,EAAE,GAAGA,EAAE,GAAGltC,CAAL,GAASstC,EAAE,GAAGM,IAAnB;EACAT,QAAAA,EAAE,GAAGA,EAAE,GAAGntC,CAAL,GAASutC,EAAE,GAAGK,IAAnB;EACAR,QAAAA,EAAE,GAAGA,EAAE,GAAGptC,CAAL,GAASwtC,EAAE,GAAGI,IAAnB,CAzBkD;;EA4BlD,YAAI5tC,CAAC,KAAK,IAAI/I,CAAd,EAAiB;EAEb,cAAItO,CAAC,GAAG,IAAI5O,IAAI,CAACklB,IAAL,CAAUguC,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAf,GAAoBC,EAAE,GAAGA,EAAzB,GAA8BC,EAAE,GAAGA,EAA7C,CAAZ;EAEAH,UAAAA,EAAE,IAAItkD,CAAN;EACAukD,UAAAA,EAAE,IAAIvkD,CAAN;EACAwkD,UAAAA,EAAE,IAAIxkD,CAAN;EACAykD,UAAAA,EAAE,IAAIzkD,CAAN;EAEH;EAEJ;;EAEDgkD,MAAAA,GAAG,CAACC,SAAD,CAAH,GAAiBK,EAAjB;EACAN,MAAAA,GAAG,CAACC,SAAS,GAAG,CAAb,CAAH,GAAqBM,EAArB;EACAP,MAAAA,GAAG,CAACC,SAAS,GAAG,CAAb,CAAH,GAAqBO,EAArB;EACAR,MAAAA,GAAG,CAACC,SAAS,GAAG,CAAb,CAAH,GAAqBQ,EAArB;EAEH;;;;;;EClHL,IAAIvsC,MAAM,GAAG,IAAI6D,OAAJ,EAAb;EACA,IAAIvE,CAAC,GAAG,IAAI+pC,UAAJ,EAAR;;MACM2D;;;EACF,iBAAYx4C,CAAZ,EAAeC,CAAf,EAAkBmJ,CAAlB,EAAqB6H,KAArB,EAA4B;EAAA;;EACxB,SAAKa,EAAL,GAAU9R,CAAC,IAAI,CAAf;EACA,SAAK+R,EAAL,GAAU9R,CAAC,IAAI,CAAf;EACA,SAAK+R,EAAL,GAAU5I,CAAC,IAAI,CAAf;EACA,SAAKqvC,MAAL,GAAcxnC,KAAK,IAAIunC,KAAK,CAACE,YAA7B;EAEA,SAAK1nC,OAAL,GAAe,IAAf;EACH;;;;0BA2DGhR,GAAGC,GAAGmJ,GAAG6H,OAAO;EAEhB,WAAKa,EAAL,GAAU9R,CAAV;EACA,WAAK+R,EAAL,GAAU9R,CAAV;EACA,WAAK+R,EAAL,GAAU5I,CAAV;EACA,WAAKqvC,MAAL,GAAcxnC,KAAK,IAAI,KAAKwnC,MAA5B;EAEA,WAAK3D,gBAAL;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAKhrD,WAAT,CAAqB,KAAKgoB,EAA1B,EAA8B,KAAKC,EAAnC,EAAuC,KAAKC,EAA5C,EAAgD,KAAKymC,MAArD,CAAP;EAEH;;;2BAEI1nC,OAAO;EAER,WAAKe,EAAL,GAAUf,KAAK,CAACe,EAAhB;EACA,WAAKC,EAAL,GAAUhB,KAAK,CAACgB,EAAhB;EACA,WAAKC,EAAL,GAAUjB,KAAK,CAACiB,EAAhB;EACA,WAAKymC,MAAL,GAAc1nC,KAAK,CAAC0nC,MAApB;EAEA,WAAK3D,gBAAL;EAEA,aAAO,IAAP;EAEH;;;4CAEqB9qD,GAAGinB,OAAO2iB,QAAQ;EAEpC,UAAI9pB,KAAK,GAAGD,KAAK,CAACC,KAAlB,CAFoC;;EAMpC,UAAI0G,EAAE,GAAGxmB,CAAC,CAACyf,QAAX;EACA,UAAI6rC,GAAG,GAAG9kC,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiB+kC,GAAG,GAAG/kC,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BglC,GAAG,GAAGhlC,EAAE,CAAC,CAAD,CAAtC;EACA,UAAIilC,GAAG,GAAGjlC,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBklC,GAAG,GAAGllC,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BmlC,GAAG,GAAGnlC,EAAE,CAAC,CAAD,CAAtC;EACA,UAAIolC,GAAG,GAAGplC,EAAE,CAAC,CAAD,CAAZ;EAAA,UAAiBqlC,GAAG,GAAGrlC,EAAE,CAAC,CAAD,CAAzB;EAAA,UAA8BslC,GAAG,GAAGtlC,EAAE,CAAC,EAAD,CAAtC;EAEAS,MAAAA,KAAK,GAAGA,KAAK,IAAI,KAAKwnC,MAAtB;;EAEA,UAAIxnC,KAAK,KAAK,KAAd,EAAqB;EAEjB,aAAKc,EAAL,GAAUrtB,IAAI,CAACi0D,IAAL,CAAU7uC,KAAK,CAAC0rC,GAAD,EAAM,CAAE,CAAR,EAAW,CAAX,CAAf,CAAV;;EAEA,YAAI9wD,IAAI,CAACuK,GAAL,CAASumD,GAAT,IAAgB,OAApB,EAA6B;EAEzB,eAAK1jC,EAAL,GAAUptB,IAAI,CAAC8b,KAAL,CAAW,CAAEm1C,GAAb,EAAkBG,GAAlB,CAAV;EACA,eAAK9jC,EAAL,GAAUttB,IAAI,CAAC8b,KAAL,CAAW,CAAE+0C,GAAb,EAAkBD,GAAlB,CAAV;EAEH,SALD,MAKO;EAEH,eAAKxjC,EAAL,GAAUptB,IAAI,CAAC8b,KAAL,CAAWq1C,GAAX,EAAgBH,GAAhB,CAAV;EACA,eAAK1jC,EAAL,GAAU,CAAV;EAEH;EAEJ,OAhBD,MAgBO,IAAIf,KAAK,KAAK,KAAd,EAAqB;EAExB,aAAKa,EAAL,GAAUptB,IAAI,CAACi0D,IAAL,CAAU,CAAE7uC,KAAK,CAAC6rC,GAAD,EAAM,CAAE,CAAR,EAAW,CAAX,CAAjB,CAAV;;EAEA,YAAIjxD,IAAI,CAACuK,GAAL,CAAS0mD,GAAT,IAAgB,OAApB,EAA6B;EAEzB,eAAK5jC,EAAL,GAAUrtB,IAAI,CAAC8b,KAAL,CAAWg1C,GAAX,EAAgBM,GAAhB,CAAV;EACA,eAAK9jC,EAAL,GAAUttB,IAAI,CAAC8b,KAAL,CAAWi1C,GAAX,EAAgBC,GAAhB,CAAV;EAEH,SALD,MAKO;EAEH,eAAK3jC,EAAL,GAAUrtB,IAAI,CAAC8b,KAAL,CAAW,CAAEo1C,GAAb,EAAkBN,GAAlB,CAAV;EACA,eAAKtjC,EAAL,GAAU,CAAV;EAEH;EAEJ,OAhBM,MAgBA,IAAIf,KAAK,KAAK,KAAd,EAAqB;EAExB,aAAKa,EAAL,GAAUptB,IAAI,CAACi0D,IAAL,CAAU7uC,KAAK,CAAC+rC,GAAD,EAAM,CAAE,CAAR,EAAW,CAAX,CAAf,CAAV;;EAEA,YAAInxD,IAAI,CAACuK,GAAL,CAAS4mD,GAAT,IAAgB,OAApB,EAA6B;EAEzB,eAAK9jC,EAAL,GAAUrtB,IAAI,CAAC8b,KAAL,CAAW,CAAEo1C,GAAb,EAAkBE,GAAlB,CAAV;EACA,eAAK9jC,EAAL,GAAUttB,IAAI,CAAC8b,KAAL,CAAW,CAAE+0C,GAAb,EAAkBG,GAAlB,CAAV;EAEH,SALD,MAKO;EAEH,eAAK3jC,EAAL,GAAU,CAAV;EACA,eAAKC,EAAL,GAAUttB,IAAI,CAAC8b,KAAL,CAAWi1C,GAAX,EAAgBH,GAAhB,CAAV;EAEH;EAEJ,OAhBM,MAgBA,IAAIrkC,KAAK,KAAK,KAAd,EAAqB;EAExB,aAAKc,EAAL,GAAUrtB,IAAI,CAACi0D,IAAL,CAAU,CAAE7uC,KAAK,CAAC8rC,GAAD,EAAM,CAAE,CAAR,EAAW,CAAX,CAAjB,CAAV;;EAEA,YAAIlxD,IAAI,CAACuK,GAAL,CAAS2mD,GAAT,IAAgB,OAApB,EAA6B;EAEzB,eAAK9jC,EAAL,GAAUptB,IAAI,CAAC8b,KAAL,CAAWq1C,GAAX,EAAgBC,GAAhB,CAAV;EACA,eAAK9jC,EAAL,GAAUttB,IAAI,CAAC8b,KAAL,CAAWi1C,GAAX,EAAgBH,GAAhB,CAAV;EAEH,SALD,MAKO;EAEH,eAAKxjC,EAAL,GAAU,CAAV;EACA,eAAKE,EAAL,GAAUttB,IAAI,CAAC8b,KAAL,CAAW,CAAE+0C,GAAb,EAAkBG,GAAlB,CAAV;EAEH;EAEJ,OAhBM,MAgBA,IAAIzkC,KAAK,KAAK,KAAd,EAAqB;EAExB,aAAKe,EAAL,GAAUttB,IAAI,CAACi0D,IAAL,CAAU7uC,KAAK,CAAC2rC,GAAD,EAAM,CAAE,CAAR,EAAW,CAAX,CAAf,CAAV;;EAEA,YAAI/wD,IAAI,CAACuK,GAAL,CAASwmD,GAAT,IAAgB,OAApB,EAA6B;EAEzB,eAAK3jC,EAAL,GAAUptB,IAAI,CAAC8b,KAAL,CAAW,CAAEm1C,GAAb,EAAkBD,GAAlB,CAAV;EACA,eAAK3jC,EAAL,GAAUrtB,IAAI,CAAC8b,KAAL,CAAW,CAAEo1C,GAAb,EAAkBN,GAAlB,CAAV;EAEH,SALD,MAKO;EAEH,eAAKxjC,EAAL,GAAU,CAAV;EACA,eAAKC,EAAL,GAAUrtB,IAAI,CAAC8b,KAAL,CAAWg1C,GAAX,EAAgBM,GAAhB,CAAV;EAEH;EAEJ,OAhBM,MAgBA,IAAI7kC,KAAK,KAAK,KAAd,EAAqB;EAExB,aAAKe,EAAL,GAAUttB,IAAI,CAACi0D,IAAL,CAAU,CAAE7uC,KAAK,CAACyrC,GAAD,EAAM,CAAE,CAAR,EAAW,CAAX,CAAjB,CAAV;;EAEA,YAAI7wD,IAAI,CAACuK,GAAL,CAASsmD,GAAT,IAAgB,OAApB,EAA6B;EAEzB,eAAKzjC,EAAL,GAAUptB,IAAI,CAAC8b,KAAL,CAAWq1C,GAAX,EAAgBH,GAAhB,CAAV;EACA,eAAK3jC,EAAL,GAAUrtB,IAAI,CAAC8b,KAAL,CAAWg1C,GAAX,EAAgBF,GAAhB,CAAV;EAEH,SALD,MAKO;EAEH,eAAKxjC,EAAL,GAAUptB,IAAI,CAAC8b,KAAL,CAAW,CAAEm1C,GAAb,EAAkBG,GAAlB,CAAV;EACA,eAAK/jC,EAAL,GAAU,CAAV;EAEH;EAEJ,OAhBM,MAgBA;EAEHvH,QAAAA,OAAO,CAACC,IAAR,CAAa,8DAA8DwG,KAA3E;EAEH;;EAED,WAAKwnC,MAAL,GAAcxnC,KAAd;EAEA,UAAI2iB,MAAM,KAAK,KAAf,EAAsB,KAAKkhB,gBAAL;EAEtB,aAAO,IAAP;EAEH;;;wCAEiBhqC,GAAGmG,OAAO2iB,QAAQ;EAEhCpoB,MAAAA,MAAM,CAACyK,0BAAP,CAAkCnL,CAAlC;EAEA,aAAO,KAAK8L,qBAAL,CAA2BpL,MAA3B,EAAmCyF,KAAnC,EAA0C2iB,MAA1C,CAAP;EAEH;;;qCAEcpqB,GAAGyH,OAAO;EAErB,aAAO,KAAK/X,GAAL,CAASsQ,CAAC,CAACxJ,CAAX,EAAcwJ,CAAC,CAACvJ,CAAhB,EAAmBuJ,CAAC,CAACJ,CAArB,EAAwB6H,KAAK,IAAI,KAAKwnC,MAAtC,CAAP;EAEH;;;;8BAOOG,UAAU;EAEd9tC,MAAAA,CAAC,CAAC+tC,YAAF,CAAe,IAAf;EAEA,aAAO,KAAKC,iBAAL,CAAuBhuC,CAAvB,EAA0B8tC,QAA1B,CAAP;EAEH;;;6BAEM7nC,OAAO;EAEV,aAAQA,KAAK,CAACe,EAAN,KAAa,KAAKA,EAAnB,IAA2Bf,KAAK,CAACgB,EAAN,KAAa,KAAKA,EAA7C,IAAqDhB,KAAK,CAACiB,EAAN,KAAa,KAAKA,EAAvE,IAA+EjB,KAAK,CAAC0nC,MAAN,KAAiB,KAAKA,MAA5G;EAEH;;;gCAEShzD,OAAO;EAEb,WAAKqsB,EAAL,GAAUrsB,KAAK,CAAC,CAAD,CAAf;EACA,WAAKssB,EAAL,GAAUtsB,KAAK,CAAC,CAAD,CAAf;EACA,WAAKusB,EAAL,GAAUvsB,KAAK,CAAC,CAAD,CAAf;EACA,UAAIA,KAAK,CAAC,CAAD,CAAL,KAAaoE,SAAjB,EAA4B,KAAK4uD,MAAL,GAAchzD,KAAK,CAAC,CAAD,CAAnB;EAE5B,WAAKqvD,gBAAL;EAEA,aAAO,IAAP;EAEH;;;8BAEOrvD,OAAO2Q,QAAQ;EAEnB,UAAI3Q,KAAK,KAAKoE,SAAd,EAAyBpE,KAAK,GAAG,EAAR;EACzB,UAAI2Q,MAAM,KAAKvM,SAAf,EAA0BuM,MAAM,GAAG,CAAT;EAE1B3Q,MAAAA,KAAK,CAAC2Q,MAAD,CAAL,GAAgB,KAAK0b,EAArB;EACArsB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoB,KAAK2b,EAAzB;EACAtsB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoB,KAAK4b,EAAzB;EACAvsB,MAAAA,KAAK,CAAC2Q,MAAM,GAAG,CAAV,CAAL,GAAoB,KAAKqiD,MAAzB;EAEA,aAAOhzD,KAAP;EAEH;;;gCAESszD,gBAAgB;EAEtB,UAAIA,cAAJ,EAAoB;EAEhB,eAAOA,cAAc,CAAC7/C,GAAf,CAAmB,KAAK4Y,EAAxB,EAA4B,KAAKC,EAAjC,EAAqC,KAAKC,EAA1C,CAAP;EAEH,OAJD,MAIO;EAEH,eAAO,IAAI3H,OAAJ,CAAY,KAAKyH,EAAjB,EAAqB,KAAKC,EAA1B,EAA8B,KAAKC,EAAnC,CAAP;EAEH;EAEJ;;;+BAEQklC,UAAU;EAEf,WAAKpC,gBAAL,GAAwBoC,QAAxB;EAEA,aAAO,IAAP;EAEH;;;yCAEkB;;;0BAtSX;EAEJ,aAAO,KAAKplC,EAAZ;EAEH;wBAEKjsB,OAAO;EAET,WAAKisB,EAAL,GAAUjsB,KAAV;EACA,WAAKivD,gBAAL;EAEH;;;0BAIO;EAEJ,aAAO,KAAK/iC,EAAZ;EAEH;wBAEKlsB,OAAO;EAET,WAAKksB,EAAL,GAAUlsB,KAAV;EACA,WAAKivD,gBAAL;EAEH;;;0BAGO;EAEJ,aAAO,KAAK9iC,EAAZ;EAEH;wBAEKnsB,OAAO;EAET,WAAKmsB,EAAL,GAAUnsB,KAAV;EACA,WAAKivD,gBAAL;EAEH;;;0BAIW;EAER,aAAO,KAAK2D,MAAZ;EAEH;wBAES5yD,OAAO;EAEb,WAAK4yD,MAAL,GAAc5yD,KAAd;EACA,WAAKivD,gBAAL;EAEH;;;;;;EAoPL0D,KAAK,CAACQ,cAAN,GAAuB,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,CAAvB;EAEAR,KAAK,CAACE,YAAN,GAAqB,KAArB;;ECrTA;;;;;;EAKA,IAAIO,UAAU,GAAG,CAAjB;;MACMC;;;;;EAEF,sBAAc;EAAA;;EAAA;;EACV;EACAx2D,IAAAA,MAAM,CAACiuC,cAAP,wDAA4B,IAA5B,EAAkC;EAAE9qC,MAAAA,KAAK,EAAEozD,UAAU;EAAnB,KAAlC;EAEA,UAAKv2C,MAAL,GAAc,IAAd;EACA,UAAKM,QAAL,GAAgB,EAAhB;EAGA,UAAK+P,EAAL,GAAUmmC,QAAQ,CAACC,SAAT,CAAmB/vD,KAAnB,EAAV;EAEA,QAAIiP,QAAQ,GAAG,IAAIgS,OAAJ,EAAf;EACA,QAAI4P,QAAQ,GAAG,IAAIu+B,KAAJ,EAAf;EACA,QAAIxiC,UAAU,GAAG,IAAI6+B,UAAJ,EAAjB;EACA,QAAIzpD,KAAK,GAAG,IAAIif,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAZ;;EAEA,aAAS+uC,gBAAT,GAA4B;EAExBpjC,MAAAA,UAAU,CAAC6iC,YAAX,CAAwB5+B,QAAxB,EAAkC,KAAlC;EAEH;;EAED,aAASo/B,kBAAT,GAA8B;EAE1Bp/B,MAAAA,QAAQ,CAAC6+B,iBAAT,CAA2B9iC,UAA3B,EAAuCnsB,SAAvC,EAAkD,KAAlD;EAEH;;EAEDowB,IAAAA,QAAQ,CAACq/B,QAAT,CAAkBF,gBAAlB;EACApjC,IAAAA,UAAU,CAACsjC,QAAX,CAAoBD,kBAApB;EAEA32D,IAAAA,MAAM,CAAC62D,gBAAP,wDAA8B;EAC1BlhD,MAAAA,QAAQ,EAAE;EACNmhD,QAAAA,UAAU,EAAE,IADN;EAEN3zD,QAAAA,KAAK,EAAEwS;EAFD,OADgB;EAK1B4hB,MAAAA,QAAQ,EAAE;EACNu/B,QAAAA,UAAU,EAAE,IADN;EAEN3zD,QAAAA,KAAK,EAAEo0B;EAFD,OALgB;EAS1BjE,MAAAA,UAAU,EAAE;EACRwjC,QAAAA,UAAU,EAAE,IADJ;EAER3zD,QAAAA,KAAK,EAAEmwB;EAFC,OATc;EAa1B5qB,MAAAA,KAAK,EAAE;EACHouD,QAAAA,UAAU,EAAE,IADT;EAEH3zD,QAAAA,KAAK,EAAEuF;EAFJ,OAbmB;EAiB1B8lD,MAAAA,eAAe,EAAE;EACbrrD,QAAAA,KAAK,EAAE,IAAIwpB,OAAJ;EADM,OAjBS;EAoB1BiM,MAAAA,YAAY,EAAE;EACVz1B,QAAAA,KAAK,EAAE,IAAIi0B,OAAJ;EADG;EApBY,KAA9B;EA0BA,UAAKtO,MAAL,GAAc,IAAI6D,OAAJ,EAAd;EACA,UAAKzD,WAAL,GAAmB,IAAIyD,OAAJ,EAAnB;EAEA,UAAKiqB,gBAAL,GAAwB4f,QAAQ,CAACO,uBAAjC;EACA,UAAKC,sBAAL,GAA8B,KAA9B;EAEA,UAAKhJ,OAAL,GAAe,IAAf;EAEA,UAAKiJ,UAAL,GAAkB,KAAlB;EACA,UAAKC,aAAL,GAAqB,KAArB;EAEA,UAAK/I,aAAL,GAAqB,IAArB;EACA,UAAKjM,WAAL,GAAmB,CAAnB;EAEA,UAAKiV,QAAL,GAAgB,EAAhB;EAtEU;EAwEb;;;;qCAMc/f,UAAUmL,OAAO15B,QAAQmN,UAAU2R,UAAUyF,OAAO;EAElE;;;oCACagK,UAAUmL,OAAO15B,QAAQmN,UAAU2R,UAAUyF,OAAO;EAEjE;;;kCAEWtkB,QAAQ;EAEhB,WAAKA,MAAL,CAAYC,gBAAZ,CAA6BD,MAA7B,EAAqC,KAAKA,MAA1C;EAEA,WAAKA,MAAL,CAAY4K,SAAZ,CAAsB,KAAK/d,QAA3B,EAAqC,KAAK2d,UAA1C,EAAsD,KAAK5qB,KAA3D;EAEH;;;6BAEM4U,GAAGC,GAAGmJ,GAAG;EAEZ0wC,MAAAA,OAAM,CAAC10D,IAAP,CAAY,IAAZ,EAAkB4a,CAAlB,EAAqBC,CAArB,EAAwBmJ,CAAxB;EACH;;;0BAGGqO,QAAQ;EACR,UAAItvB,SAAS,CAACpD,MAAV,GAAmB,CAAvB,EAA0B;EAEtB,aAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkD,SAAS,CAACpD,MAA9B,EAAsCE,CAAC,EAAvC,EAA2C;EAEvC,eAAKknB,GAAL,CAAShkB,SAAS,CAAClD,CAAD,CAAlB;EAEH;;EAED,eAAO,IAAP;EAEH;;EAED,UAAIwyB,MAAM,KAAK,IAAf,EAAqB;EAEjBjN,QAAAA,OAAO,CAAC8E,KAAR,CAAc,2DAAd,EAA2EmI,MAA3E;EACA,eAAO,IAAP;EAEH;;EAED,UAAKA,MAAM,IAAIA,MAAM,CAACsiC,UAAtB,EAAmC;EAE/B,YAAItiC,MAAM,CAAC/U,MAAP,KAAkB,IAAtB,EAA4B;EAExB+U,UAAAA,MAAM,CAAC/U,MAAP,CAAcsxB,MAAd,CAAqBvc,MAArB;EAEH;;EAEDA,QAAAA,MAAM,CAAC/U,MAAP,GAAgB,IAAhB;EAEA+U,QAAAA,MAAM,CAACob,IAAP,CAAY;EAAE9lC,UAAAA,IAAI,EAAE;EAAR,SAAZ;EAEA,aAAKiW,QAAL,CAAcngB,IAAd,CAAmB40B,MAAnB;EAEH,OAdD,MAcO;EAEHjN,QAAAA,OAAO,CAAC8E,KAAR,CAAc,mDAAd,EAAmEmI,MAAnE;EAEH;;EAED,aAAO,IAAP;EACH;;;6BAEMA,QAAQ;EAEX,UAAItvB,SAAS,CAACpD,MAAV,GAAmB,CAAvB,EAA0B;EAEtB,aAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkD,SAAS,CAACpD,MAA9B,EAAsCE,CAAC,EAAvC,EAA2C;EAEvC,eAAK+uC,MAAL,CAAY7rC,SAAS,CAAClD,CAAD,CAArB;EAEH;;EAED,eAAO,IAAP;EAEH;;EAED,UAAIa,KAAK,GAAG,KAAKkd,QAAL,CAAclf,OAAd,CAAsB2zB,MAAtB,CAAZ;;EAEA,UAAI3xB,KAAK,KAAK,CAAE,CAAhB,EAAmB;EAEf2xB,QAAAA,MAAM,CAAC/U,MAAP,GAAgB,IAAhB;EAEA+U,QAAAA,MAAM,CAACob,IAAP,CAAY;EAAE9lC,UAAAA,IAAI,EAAE;EAAR,SAAZ;EAEA,aAAKiW,QAAL,CAAc3T,MAAd,CAAqBvJ,KAArB,EAA4B,CAA5B;EAEH;;EAED,aAAO,IAAP;EACH;;;+BAEQoxD,UAAU;EAEfA,MAAAA,QAAQ,CAAC,IAAD,CAAR;EAEA,UAAIl0C,QAAQ,GAAG,KAAKA,QAApB;;EAEA,WAAK,IAAI/d,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG+R,QAAQ,CAACje,MAA7B,EAAqCE,CAAC,GAAGgM,CAAzC,EAA4ChM,CAAC,EAA7C,EAAiD;EAE7C+d,QAAAA,QAAQ,CAAC/d,CAAD,CAAR,CAAYwzB,QAAZ,CAAqBy+B,QAArB;EAEH;EAEJ;;;wCAGiB8C,OAAO;EAErB,UAAI,KAAK1gB,gBAAT,EAA2B,KAAKmZ,YAAL;;EAE3B,UAAI,KAAKiH,sBAAL,IAA+BM,KAAnC,EAA0C;EAEtC,YAAI,KAAKt3C,MAAL,KAAgB,IAApB,EAA0B;EAEtB,eAAKkJ,WAAL,CAAiBjiB,IAAjB,CAAsB,KAAK6hB,MAA3B;EAEH,SAJD,MAIO;EAEH,eAAKI,WAAL,CAAiBH,gBAAjB,CAAkC,KAAK/I,MAAL,CAAYkJ,WAA9C,EAA2D,KAAKJ,MAAhE;EAEH;;EAED,aAAKkuC,sBAAL,GAA8B,KAA9B;EAEAM,QAAAA,KAAK,GAAG,IAAR;EAEH,OApBoB;;;EAwBrB,UAAIh3C,QAAQ,GAAG,KAAKA,QAApB;;EAEA,WAAK,IAAI/d,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG+R,QAAQ,CAACje,MAA7B,EAAqCE,CAAC,GAAGgM,CAAzC,EAA4ChM,CAAC,EAA7C,EAAiD;EAE7C+d,QAAAA,QAAQ,CAAC/d,CAAD,CAAR,CAAYuzB,iBAAZ,CAA8BwhC,KAA9B;EAEH;EAEJ;;;sCAEelvC,GAAG;EAEf,WAAKkL,UAAL,CAAgBikC,WAAhB,CAA4BnvC,CAA5B;EAEA,aAAO,IAAP;EAEH;;;+CAEwBzd,MAAM8P,OAAO;EAElC;EAEA,WAAK6Y,UAAL,CAAgBkkC,gBAAhB,CAAiC7sD,IAAjC,EAAuC8P,KAAvC;EAEH;;;2CAEoB4T,OAAO;EAExB,WAAKiF,UAAL,CAAgB6iC,YAAhB,CAA6B9nC,KAA7B,EAAoC,IAApC;EAEH;;;4CAEqB/mB,GAAG;EAErB;EAEA,WAAKgsB,UAAL,CAAgBY,qBAAhB,CAAsC5sB,CAAtC;EAEH;;;gDAEyB8gB,GAAG;EAEzB;EAEA,WAAKkL,UAAL,CAAgBrsB,IAAhB,CAAqBmhB,CAArB;EAEH;;;qCAEc;EAEX,WAAKU,MAAL,CAAY2uC,OAAZ,CAAoB,KAAK9hD,QAAzB,EAAmC,KAAK2d,UAAxC,EAAoD,KAAK5qB,KAAzD;EAEA,WAAKsuD,sBAAL,GAA8B,IAA9B;EAEH;;;8BAEOv8C,OAAO;EAEX,UAAI8O,EAAE,GAAG,IAAI5B,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAT;EAEA,WAAK+vC,YAAL,CAAkBnuC,EAAlB,EAAsB9O,KAAtB;EAEA8O,MAAAA,EAAE,GAAG,IAAL;EAEA,aAAO,IAAP;EAGH;;;8BAEO9O,OAAO;EAEX,UAAI8O,EAAE,GAAG,IAAI5B,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAT;EAEA,WAAK+vC,YAAL,CAAkBnuC,EAAlB,EAAsB9O,KAAtB;EAEA8O,MAAAA,EAAE,GAAG,IAAL;EAEA,aAAO,IAAP;EAIH;;;8BAEO9O,OAAO;EAEX,UAAI8O,EAAE,GAAG,IAAI5B,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAT;EAEA,WAAK+vC,YAAL,CAAkBnuC,EAAlB,EAAsB9O,KAAtB;EAEA8O,MAAAA,EAAE,GAAG,IAAL;EAEA,aAAO,IAAP;EAEH;;;mCAEY5e,MAAM8P,OAAO;EAEtB;EACA;EAEA,UAAIk9C,EAAE,GAAG,IAAIxF,UAAJ,EAAT;EAEAwF,MAAAA,EAAE,CAACH,gBAAH,CAAoB7sD,IAApB,EAA0B8P,KAA1B;EAEA,WAAK6Y,UAAL,CAAgBskC,QAAhB,CAAyBD,EAAzB;EAEAA,MAAAA,EAAE,GAAG,IAAL;EAEA,aAAO,IAAP;EACH;;;wCAEiBhtD,MAAM8P,OAAO;EAE3B;EACA;EACA;EAEA,UAAIk9C,EAAE,GAAG,IAAIxF,UAAJ,EAAT;EAEAwF,MAAAA,EAAE,CAACH,gBAAH,CAAoB7sD,IAApB,EAA0B8P,KAA1B;EAEA,WAAK6Y,UAAL,CAAgBikC,WAAhB,CAA4BI,EAA5B;EAEA,aAAO,IAAP;EAGH;;;sCAEehtD,MAAMowB,UAAU;EAE5B;EACA;EAEA,UAAIxR,EAAE,GAAG,IAAI5B,OAAJ,EAAT;EAEA4B,MAAAA,EAAE,CAACtiB,IAAH,CAAQ0D,IAAR,EAAcktD,eAAd,CAA8B,KAAKvkC,UAAnC;EAEA,WAAK3d,QAAL,CAAc8T,GAAd,CAAkBF,EAAE,CAACtC,cAAH,CAAkB8T,QAAlB,CAAlB;EAEAxR,MAAAA,EAAE,GAAG,IAAL;EAEA,aAAO,IAAP;EAEH;;;iCAEUwR,UAAU;EAEjB,UAAIxR,EAAE,GAAG,IAAI5B,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAT;EAEA,WAAKmwC,eAAL,CAAqBvuC,EAArB,EAAyBwR,QAAzB;EAEAxR,MAAAA,EAAE,GAAG,IAAL;EAEA,aAAO,IAAP;EAGH;;;iCAEUwR,UAAU;EAEjB,UAAIxR,EAAE,GAAG,IAAI5B,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAT;EAEA,WAAKmwC,eAAL,CAAqBvuC,EAArB,EAAyBwR,QAAzB;EAEAxR,MAAAA,EAAE,GAAG,IAAL;EAEA,aAAO,IAAP;EAEH;;;iCAEUwR,UAAU;EAEjB,UAAIxR,EAAE,GAAG,IAAI5B,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAT;EACA,WAAKmwC,eAAL,CAAqBvuC,EAArB,EAAyBwR,QAAzB;EAEAxR,MAAAA,EAAE,GAAG,IAAL;EAEA,aAAO,IAAP;EAGH;;;mCAEYU,QAAQ;EACjB,aAAOA,MAAM,CAACd,YAAP,CAAoB,KAAKD,WAAzB,CAAP;EACH;;;mCAEYe,QAAQ;EAEjB,UAAI8N,EAAE,GAAG,IAAIpL,OAAJ,EAAT;EACA,aAAO1C,MAAM,CAACd,YAAP,CAAoB4O,EAAE,CAAC9O,UAAH,CAAc,KAAKC,WAAnB,CAApB,CAAP;EACH;;;uCACgBhjB,QAAQ;EAErB,UAAIA,MAAM,KAAKiB,SAAf,EAA0B;EAEtB2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,sDAAb;EACA7hB,QAAAA,MAAM,GAAG,IAAIyhB,OAAJ,EAAT;EAEH;;EAED,WAAKmO,iBAAL,CAAuB,IAAvB;EAEA,aAAO5vB,MAAM,CAACmhD,qBAAP,CAA6B,KAAKn+B,WAAlC,CAAP;EAEH;;;yCAEkBhjB,QAAQ;EAEvB,aAAO6xD,mBAAkB,CAACr1D,IAAnB,CAAwB,IAAxB,EAA8BwD,MAA9B,CAAP;EAEH;;;oCAEaA,QAAQ;EAElB,aAAO8xD,cAAa,CAACt1D,IAAd,CAAmB,IAAnB,EAAyBwD,MAAzB,CAAP;EAEH;;;wCACiBA,QAAQ;EACtB,aAAO+xD,kBAAiB,CAACv1D,IAAlB,CAAuB,IAAvB,EAA6BwD,MAA7B,CAAP;EAEH;;;gCAES;;;0BAtWO;EACb,aAAO,IAAP;EACH;;;;IA9EkB4b;;EAsbvB00C,QAAQ,CAACC,SAAT,GAAqB,IAAI9uC,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAArB;EACA6uC,QAAQ,CAACO,uBAAT,GAAmC,IAAnC;;EAGA,IAAIK,OAAM,GAAI,YAAY;EAEtB;EAEA,MAAIr/B,EAAE,GAAG,IAAIpL,OAAJ,EAAT;EACA,MAAI1C,MAAM,GAAG,IAAItC,OAAJ,EAAb;EAEA,SAAO,SAASyvC,MAAT,CAAgB95C,CAAhB,EAAmBC,CAAnB,EAAsBmJ,CAAtB,EAAyB;EAE5B,QAAIpJ,CAAC,CAACsK,SAAN,EAAiB;EAEbqC,MAAAA,MAAM,CAAChjB,IAAP,CAAYqW,CAAZ;EAEH,KAJD,MAIO;EAEH2M,MAAAA,MAAM,CAACzT,GAAP,CAAW8G,CAAX,EAAcC,CAAd,EAAiBmJ,CAAjB;EAEH;;EAED,QAAI,KAAK6kC,QAAT,EAAmB;EAEfxzB,MAAAA,EAAE,CAACq/B,MAAH,CAAU,KAAKzhD,QAAf,EAAyBsU,MAAzB,EAAiC,KAAKoG,EAAtC;EAEH,KAJD,MAIO;EAEH0H,MAAAA,EAAE,CAACq/B,MAAH,CAAUntC,MAAV,EAAkB,KAAKtU,QAAvB,EAAiC,KAAK0a,EAAtC;EAEH;;EAED,SAAKiD,UAAL,CAAgBY,qBAAhB,CAAsC6D,EAAtC;EAEH,GAxBD;EA0BH,CAjCY,EAAb;;EAoCA,IAAIggC,mBAAkB,GAAI,YAAY;EAElC,MAAIpiD,QAAQ,GAAG,IAAIgS,OAAJ,EAAf;EACA,MAAIjf,KAAK,GAAG,IAAIif,OAAJ,EAAZ;EAEA,SAAO,SAASowC,kBAAT,CAA4B7xD,MAA5B,EAAoC;EAEvC,QAAIA,MAAM,KAAKiB,SAAf,EAA0B;EAEtB2gB,MAAAA,OAAO,CAACC,IAAR,CAAa,wDAAb;EACA7hB,MAAAA,MAAM,GAAG,IAAIisD,UAAJ,EAAT;EAEH;;EAED,SAAKr8B,iBAAL,CAAuB,IAAvB;EAEA,SAAK5M,WAAL,CAAiBwK,SAAjB,CAA2B/d,QAA3B,EAAqCzP,MAArC,EAA6CwC,KAA7C;EAEA,WAAOxC,MAAP;EAEH,GAfD;EAiBH,CAtBwB,EAAzB;;EAyBA,IAAI8xD,cAAa,GAAI,YAAY;EAE7B,MAAIriD,QAAQ,GAAG,IAAIgS,OAAJ,EAAf;EACA,MAAI2L,UAAU,GAAG,IAAI6+B,UAAJ,EAAjB;EAEA,SAAO,SAAS6F,aAAT,CAAuB9xD,MAAvB,EAA+B;EAElC,QAAIA,MAAM,KAAKiB,SAAf,EAA0B;EAEtB2gB,MAAAA,OAAO,CAACC,IAAR,CAAa,mDAAb;EACA7hB,MAAAA,MAAM,GAAG,IAAIyhB,OAAJ,EAAT;EAEH;;EAED,SAAKmO,iBAAL,CAAuB,IAAvB;EAEA,SAAK5M,WAAL,CAAiBwK,SAAjB,CAA2B/d,QAA3B,EAAqC2d,UAArC,EAAiDptB,MAAjD;EAEA,WAAOA,MAAP;EAEH,GAfD;EAiBH,CAtBmB,EAApB;;EAwBA,IAAI+xD,kBAAiB,GAAI,YAAY;EAEjC,MAAI3kC,UAAU,GAAG,IAAI6+B,UAAJ,EAAjB;EAEA,SAAO,SAAS8F,iBAAT,CAA2B/xD,MAA3B,EAAmC;EAEtC,QAAIA,MAAM,KAAKiB,SAAf,EAA0B;EAEtB2gB,MAAAA,OAAO,CAACC,IAAR,CAAa,uDAAb;EACA7hB,MAAAA,MAAM,GAAG,IAAIyhB,OAAJ,EAAT;EAEH;;EAED,SAAKowC,kBAAL,CAAwBzkC,UAAxB;EAEA,WAAOptB,MAAM,CAACsQ,GAAP,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoBqhD,eAApB,CAAoCvkC,UAApC,CAAP;EAEH,GAbD;EAeH,CAnBuB,EAAxB;;EC7hBA;;;;;MAMM4kC;;;;;EACF,mBAAc;EAAA;;EAAA;;EACV;EACA,UAAKpM,UAAL,GAAgB,IAAhB;EACA,UAAKqM,OAAL,GAAe,IAAf;EACA,UAAK1M,UAAL,GAAkB,IAAlB,CAJU;;EAAA;EAKb;;;IANe+K;;ECLpB;;;;;;MAMM4B;;;;;EACF,mBAAc;EAAA;;EAAA;;EACV;EACA,UAAK/tD,IAAL,GAAY,OAAZ;EAFU;EAGb;;;;0BAEY;EACT,aAAO,IAAP;EACH;;;;IARemsD;;ECNpB,IAAI1vC,CAAC,GAAG,IAAIa,OAAJ,EAAR;EACA,IAAI4B,IAAE,GAAG,IAAI5B,OAAJ,EAAT;EACA,IAAI6B,IAAE,GAAG,IAAI7B,OAAJ,EAAT;EACA,IAAIkQ,IAAE,GAAG,IAAIlQ,OAAJ,EAAT;EAEA,IAAI0wC,SAAS,GAAG,IAAI1wC,OAAJ,EAAhB;EACA,IAAI2wC,MAAM,GAAG,IAAI3wC,OAAJ,EAAb;EACA,IAAI4wC,IAAI,GAAG,IAAI5wC,OAAJ,EAAX;EAEA,IAAI4wC,IAAI,GAAG,IAAI5wC,OAAJ,EAAX;EACA,IAAI6wC,KAAK,GAAG,IAAI7wC,OAAJ,EAAZ;EACA,IAAI8wC,KAAK,GAAG,IAAI9wC,OAAJ,EAAZ;EACA,IAAI4N,MAAM,GAAG,IAAI5N,OAAJ,EAAb;;MAEM+wC;;;EACF,eAAY/sD,MAAZ,EAAoB2sB,SAApB,EAA+B;EAAA;;EAC3B,SAAK3sB,MAAL,GAAeA,MAAM,KAAKxE,SAAZ,GAAyBwE,MAAzB,GAAkC,IAAIgc,OAAJ,EAAhD;EACA,SAAK2Q,SAAL,GAAkBA,SAAS,KAAKnxB,SAAf,GAA4BmxB,SAA5B,GAAwC,IAAI3Q,OAAJ,EAAzD;EACH;;;;0BAEGhc,QAAQ2sB,WAAW;EAEnB,WAAK3sB,MAAL,CAAY1E,IAAZ,CAAiB0E,MAAjB;EACA,WAAK2sB,SAAL,CAAerxB,IAAf,CAAoBqxB,SAApB;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAKlxB,WAAT,GAAuBH,IAAvB,CAA4B,IAA5B,CAAP;EAEH;;;2BAEI0xD,KAAK;EAEN,WAAKhtD,MAAL,CAAY1E,IAAZ,CAAiB0xD,GAAG,CAAChtD,MAArB;EACA,WAAK2sB,SAAL,CAAerxB,IAAf,CAAoB0xD,GAAG,CAACrgC,SAAxB;EAEA,aAAO,IAAP;EAEH;;;yBAEEpZ,GAAG+V,gBAAgB;EAElB,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EAEA,aAAO3iB,MAAM,CAACiC,IAAP,CAAY,KAAKqxB,SAAjB,EAA4BrR,cAA5B,CAA2C/H,CAA3C,EAA8CuK,GAA9C,CAAkD,KAAK9d,MAAvD,CAAP;EAEH;;;6BAEMmb,GAAG;EAEN,WAAKwR,SAAL,CAAerxB,IAAf,CAAoB6f,CAApB,EAAuBoO,GAAvB,CAA2B,KAAKvpB,MAAhC,EAAwCyd,SAAxC;EAEA,aAAO,IAAP;EAEH;;;6BAEMlK,GAAG;EAEN,WAAKvT,MAAL,CAAY1E,IAAZ,CAAiB,KAAK2xD,EAAL,CAAQ15C,CAAR,EAAWqK,IAAX,CAAjB;EAEA,aAAO,IAAP;EAEH;;;0CAEmBrM,OAAO+X,gBAAgB;EAEvC,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EACA3iB,MAAAA,MAAM,CAACkjB,UAAP,CAAkBhL,KAAlB,EAAyB,KAAKvR,MAA9B;EACA,UAAIktD,iBAAiB,GAAG7zD,MAAM,CAACklB,GAAP,CAAW,KAAKoO,SAAhB,CAAxB;;EAEA,UAAIugC,iBAAiB,GAAG,CAAxB,EAA2B;EAEvB,eAAO7zD,MAAM,CAACiC,IAAP,CAAY,KAAK0E,MAAjB,CAAP;EAEH;;EAED,aAAO3G,MAAM,CAACiC,IAAP,CAAY,KAAKqxB,SAAjB,EAA4BrR,cAA5B,CAA2C4xC,iBAA3C,EAA8DpvC,GAA9D,CAAkE,KAAK9d,MAAvE,CAAP;EAEH;;;sCAEeuR,OAAO;EAEnB,aAAOlb,IAAI,CAACklB,IAAL,CAAU,KAAK4xC,iBAAL,CAAuB57C,KAAvB,CAAV,CAAP;EAEH;;;wCACiBA,OAAO;EAErB,UAAI27C,iBAAiB,GAAGrvC,IAAE,CAACtB,UAAH,CAAchL,KAAd,EAAqB,KAAKvR,MAA1B,EAAkCue,GAAlC,CAAsC,KAAKoO,SAA3C,CAAxB,CAFqB;;EAMrB,UAAIugC,iBAAiB,GAAG,CAAxB,EAA2B;EAEvB,eAAO,KAAKltD,MAAL,CAAY2e,iBAAZ,CAA8BpN,KAA9B,CAAP;EAEH;;EAEDsM,MAAAA,IAAE,CAACviB,IAAH,CAAQ,KAAKqxB,SAAb,EAAwBrR,cAAxB,CAAuC4xC,iBAAvC,EAA0DpvC,GAA1D,CAA8D,KAAK9d,MAAnE;EAEA,aAAO6d,IAAE,CAACc,iBAAH,CAAqBpN,KAArB,CAAP;EAEH;;;0CAEmB67C,IAAIxvC,IAAIyvC,oBAAoBC,wBAAwB;EAEpE;EACA;EACA;EACA;EACA;EACA;EAEAZ,MAAAA,SAAS,CAACpxD,IAAV,CAAe8xD,EAAf,EAAmBtvC,GAAnB,CAAuBF,EAAvB,EAA2BtC,cAA3B,CAA0C,GAA1C;EACAqxC,MAAAA,MAAM,CAACrxD,IAAP,CAAYsiB,EAAZ,EAAgB2L,GAAhB,CAAoB6jC,EAApB,EAAwB3vC,SAAxB;EACAmvC,MAAAA,IAAI,CAACtxD,IAAL,CAAU,KAAK0E,MAAf,EAAuBupB,GAAvB,CAA2BmjC,SAA3B;EAEA,UAAIa,SAAS,GAAGH,EAAE,CAAChiC,UAAH,CAAcxN,EAAd,IAAoB,GAApC;EACA,UAAI4vC,GAAG,GAAG,CAAE,KAAK7gC,SAAL,CAAepO,GAAf,CAAmBouC,MAAnB,CAAZ;EACA,UAAIc,EAAE,GAAGb,IAAI,CAACruC,GAAL,CAAS,KAAKoO,SAAd,CAAT;EACA,UAAI+gC,EAAE,GAAG,CAAEd,IAAI,CAACruC,GAAL,CAASouC,MAAT,CAAX;EACA,UAAIngD,CAAC,GAAGogD,IAAI,CAACpuC,QAAL,EAAR;EACA,UAAI2I,GAAG,GAAG9wB,IAAI,CAACuK,GAAL,CAAS,IAAI4sD,GAAG,GAAGA,GAAnB,CAAV;EACA,UAAIG,EAAJ,EAAQ9G,EAAR,EAAY+G,OAAZ,EAAqBC,MAArB;;EAEA,UAAI1mC,GAAG,GAAG,CAAV,EAAa;EAET;EAEAwmC,QAAAA,EAAE,GAAGH,GAAG,GAAGE,EAAN,GAAWD,EAAhB;EACA5G,QAAAA,EAAE,GAAG2G,GAAG,GAAGC,EAAN,GAAWC,EAAhB;EACAG,QAAAA,MAAM,GAAGN,SAAS,GAAGpmC,GAArB;;EAEA,YAAIwmC,EAAE,IAAI,CAAV,EAAa;EAET,cAAI9G,EAAE,IAAI,CAAEgH,MAAZ,EAAoB;EAEhB,gBAAIhH,EAAE,IAAIgH,MAAV,EAAkB;EAEd;EACA;EAEA,kBAAIC,MAAM,GAAG,IAAI3mC,GAAjB;EACAwmC,cAAAA,EAAE,IAAIG,MAAN;EACAjH,cAAAA,EAAE,IAAIiH,MAAN;EACAF,cAAAA,OAAO,GAAGD,EAAE,IAAIA,EAAE,GAAGH,GAAG,GAAG3G,EAAX,GAAgB,IAAI4G,EAAxB,CAAF,GAAgC5G,EAAE,IAAI2G,GAAG,GAAGG,EAAN,GAAW9G,EAAX,GAAgB,IAAI6G,EAAxB,CAAlC,GAAgElhD,CAA1E;EAEH,aAVD,MAUO;EAEH;EAEAq6C,cAAAA,EAAE,GAAG0G,SAAL;EACAI,cAAAA,EAAE,GAAGt3D,IAAI,CAACsC,GAAL,CAAS,CAAT,EAAY,EAAG60D,GAAG,GAAG3G,EAAN,GAAW4G,EAAd,CAAZ,CAAL;EACAG,cAAAA,OAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAY9G,EAAE,IAAIA,EAAE,GAAG,IAAI6G,EAAb,CAAd,GAAiClhD,CAA3C;EAEH;EAEJ,WAtBD,MAsBO;EAEH;EAEAq6C,YAAAA,EAAE,GAAG,CAAE0G,SAAP;EACAI,YAAAA,EAAE,GAAGt3D,IAAI,CAACsC,GAAL,CAAS,CAAT,EAAY,EAAG60D,GAAG,GAAG3G,EAAN,GAAW4G,EAAd,CAAZ,CAAL;EACAG,YAAAA,OAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAY9G,EAAE,IAAIA,EAAE,GAAG,IAAI6G,EAAb,CAAd,GAAiClhD,CAA3C;EAEH;EAEJ,SAlCD,MAkCO;EAEH,cAAIq6C,EAAE,IAAI,CAAEgH,MAAZ,EAAoB;EAEhB;EAEAF,YAAAA,EAAE,GAAGt3D,IAAI,CAACsC,GAAL,CAAS,CAAT,EAAY,EAAG,CAAE60D,GAAF,GAAQD,SAAR,GAAoBE,EAAvB,CAAZ,CAAL;EACA5G,YAAAA,EAAE,GAAI8G,EAAE,GAAG,CAAN,GAAW,CAAEJ,SAAb,GAAyBl3D,IAAI,CAACiD,GAAL,CAASjD,IAAI,CAACsC,GAAL,CAAS,CAAE40D,SAAX,EAAsB,CAAEG,EAAxB,CAAT,EAAsCH,SAAtC,CAA9B;EACAK,YAAAA,OAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAY9G,EAAE,IAAIA,EAAE,GAAG,IAAI6G,EAAb,CAAd,GAAiClhD,CAA3C;EAEH,WARD,MAQO,IAAIq6C,EAAE,IAAIgH,MAAV,EAAkB;EAErB;EAEAF,YAAAA,EAAE,GAAG,CAAL;EACA9G,YAAAA,EAAE,GAAGxwD,IAAI,CAACiD,GAAL,CAASjD,IAAI,CAACsC,GAAL,CAAS,CAAE40D,SAAX,EAAsB,CAAEG,EAAxB,CAAT,EAAsCH,SAAtC,CAAL;EACAK,YAAAA,OAAO,GAAG/G,EAAE,IAAIA,EAAE,GAAG,IAAI6G,EAAb,CAAF,GAAqBlhD,CAA/B;EAEH,WARM,MAQA;EAEH;EAEAmhD,YAAAA,EAAE,GAAGt3D,IAAI,CAACsC,GAAL,CAAS,CAAT,EAAY,EAAG60D,GAAG,GAAGD,SAAN,GAAkBE,EAArB,CAAZ,CAAL;EACA5G,YAAAA,EAAE,GAAI8G,EAAE,GAAG,CAAN,GAAWJ,SAAX,GAAuBl3D,IAAI,CAACiD,GAAL,CAASjD,IAAI,CAACsC,GAAL,CAAS,CAAE40D,SAAX,EAAsB,CAAEG,EAAxB,CAAT,EAAsCH,SAAtC,CAA5B;EACAK,YAAAA,OAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAY9G,EAAE,IAAIA,EAAE,GAAG,IAAI6G,EAAb,CAAd,GAAiClhD,CAA3C;EAEH;EAEJ;EAEJ,OAxED,MAwEO;EAEH;EAEAq6C,QAAAA,EAAE,GAAI2G,GAAG,GAAG,CAAP,GAAY,CAAED,SAAd,GAA0BA,SAA/B;EACAI,QAAAA,EAAE,GAAGt3D,IAAI,CAACsC,GAAL,CAAS,CAAT,EAAY,EAAG60D,GAAG,GAAG3G,EAAN,GAAW4G,EAAd,CAAZ,CAAL;EACAG,QAAAA,OAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAY9G,EAAE,IAAIA,EAAE,GAAG,IAAI6G,EAAb,CAAd,GAAiClhD,CAA3C;EAEH;;EAED,UAAI6gD,kBAAJ,EAAwB;EAEpBA,QAAAA,kBAAkB,CAAC/xD,IAAnB,CAAwB,KAAKqxB,SAA7B,EAAwCrR,cAAxC,CAAuDqyC,EAAvD,EAA2D7vC,GAA3D,CAA+D,KAAK9d,MAApE;EAEH;;EAED,UAAIstD,sBAAJ,EAA4B;EAExBA,QAAAA,sBAAsB,CAAChyD,IAAvB,CAA4BqxD,MAA5B,EAAoCrxC,cAApC,CAAmDurC,EAAnD,EAAuD/oC,GAAvD,CAA2D4uC,SAA3D;EAEH;;EAED,aAAOkB,OAAP;EAEH;;;sCAEenkC,QAAQH,gBAAgB;EAEpC4C,MAAAA,IAAE,CAAC3P,UAAH,CAAckN,MAAM,CAACP,MAArB,EAA6B,KAAKlpB,MAAlC;EACA,UAAI+tD,GAAG,GAAG7hC,IAAE,CAAC3N,GAAH,CAAO,KAAKoO,SAAZ,CAAV;EACA,UAAI8C,EAAE,GAAGvD,IAAE,CAAC3N,GAAH,CAAO2N,IAAP,IAAa6hC,GAAG,GAAGA,GAA5B;EACA,UAAIC,OAAO,GAAGvkC,MAAM,CAAC9Y,MAAP,GAAgB8Y,MAAM,CAAC9Y,MAArC;EAEA,UAAI8e,EAAE,GAAGu+B,OAAT,EAAkB,OAAO,IAAP;EAElB,UAAIC,GAAG,GAAG53D,IAAI,CAACklB,IAAL,CAAUyyC,OAAO,GAAGv+B,EAApB,CAAV,CAToC;;EAYpC,UAAIy+B,EAAE,GAAGH,GAAG,GAAGE,GAAf,CAZoC;;EAepC,UAAIE,EAAE,GAAGJ,GAAG,GAAGE,GAAf,CAfoC;;EAkBpC,UAAIC,EAAE,GAAG,CAAL,IAAUC,EAAE,GAAG,CAAnB,EAAsB,OAAO,IAAP,CAlBc;EAqBpC;EACA;;EACA,UAAID,EAAE,GAAG,CAAT,EAAY,OAAO,KAAKjB,EAAL,CAAQkB,EAAR,EAAY7kC,cAAZ,CAAP,CAvBwB;;EA0BpC,aAAO,KAAK2jC,EAAL,CAAQiB,EAAR,EAAY5kC,cAAZ,CAAP;EAEH;;;uCAEgBG,QAAQ;EAErB,aAAO,KAAKK,eAAL,CAAqBL,MAAM,CAACP,MAA5B,KAAuCO,MAAM,CAAC9Y,MAArD;EAEH;;;sCAEegZ,OAAO;EAEnB,UAAIiD,WAAW,GAAGjD,KAAK,CAACC,MAAN,CAAarL,GAAb,CAAiB,KAAKoO,SAAtB,CAAlB;;EAEA,UAAIC,WAAW,KAAK,CAApB,EAAuB;EAEnB;EACA,YAAIjD,KAAK,CAACG,eAAN,CAAsB,KAAK9pB,MAA3B,MAAuC,CAA3C,EAA8C;EAE1C,iBAAO,CAAP;EAEH,SAPkB;;;EAWnB,eAAO,IAAP;EAEH;;EAED,UAAIuT,CAAC,GAAG,EAAG,KAAKvT,MAAL,CAAYue,GAAZ,CAAgBoL,KAAK,CAACC,MAAtB,IAAgCD,KAAK,CAACE,QAAzC,IAAqD+C,WAA7D,CAnBmB;;EAuBnB,aAAOrZ,CAAC,IAAI,CAAL,GAASA,CAAT,GAAa,IAApB;EAEH;;;qCAEcoW,OAAOL,gBAAgB;EAElC,UAAI/V,CAAC,GAAG,KAAK66C,eAAL,CAAqBzkC,KAArB,CAAR;;EAEA,UAAIpW,CAAC,KAAK,IAAV,EAAgB;EAEZ,eAAO,IAAP;EAEH;;EAED,aAAO,KAAK05C,EAAL,CAAQ15C,CAAR,EAAW+V,cAAX,CAAP;EAEH;;;sCAEeK,OAAO;EAEnB;EAEA,UAAI0kC,WAAW,GAAG1kC,KAAK,CAACG,eAAN,CAAsB,KAAK9pB,MAA3B,CAAlB;;EAEA,UAAIquD,WAAW,KAAK,CAApB,EAAuB;EAEnB,eAAO,IAAP;EAEH;;EAED,UAAIzhC,WAAW,GAAGjD,KAAK,CAACC,MAAN,CAAarL,GAAb,CAAiB,KAAKoO,SAAtB,CAAlB;;EAEA,UAAIC,WAAW,GAAGyhC,WAAd,GAA4B,CAAhC,EAAmC;EAE/B,eAAO,IAAP;EAEH,OAlBkB;;;EAsBnB,aAAO,KAAP;EAEH;;;mCAEYrmD,KAAKshB,gBAAgB;EAE9B,UAAIglC,IAAJ,EAAUC,IAAV,EAAgBC,KAAhB,EAAuBC,KAAvB,EAA8BC,KAA9B,EAAqCC,KAArC;EAEA,UAAIC,OAAO,GAAG,IAAI,KAAKjiC,SAAL,CAAehb,CAAjC;EAAA,UACIk9C,OAAO,GAAG,IAAI,KAAKliC,SAAL,CAAe/a,CADjC;EAAA,UAEIk9C,OAAO,GAAG,IAAI,KAAKniC,SAAL,CAAe5R,CAFjC;EAIA,UAAI/a,MAAM,GAAG,KAAKA,MAAlB;;EAEA,UAAI4uD,OAAO,IAAI,CAAf,EAAkB;EAEdN,QAAAA,IAAI,GAAG,CAACtmD,GAAG,CAAC1O,GAAJ,CAAQqY,CAAR,GAAY3R,MAAM,CAAC2R,CAApB,IAAyBi9C,OAAhC;EACAL,QAAAA,IAAI,GAAG,CAACvmD,GAAG,CAACrP,GAAJ,CAAQgZ,CAAR,GAAY3R,MAAM,CAAC2R,CAApB,IAAyBi9C,OAAhC;EAEH,OALD,MAKO;EAEHN,QAAAA,IAAI,GAAG,CAACtmD,GAAG,CAACrP,GAAJ,CAAQgZ,CAAR,GAAY3R,MAAM,CAAC2R,CAApB,IAAyBi9C,OAAhC;EACAL,QAAAA,IAAI,GAAG,CAACvmD,GAAG,CAAC1O,GAAJ,CAAQqY,CAAR,GAAY3R,MAAM,CAAC2R,CAApB,IAAyBi9C,OAAhC;EAEH;;EAED,UAAIC,OAAO,IAAI,CAAf,EAAkB;EAEdL,QAAAA,KAAK,GAAG,CAACxmD,GAAG,CAAC1O,GAAJ,CAAQsY,CAAR,GAAY5R,MAAM,CAAC4R,CAApB,IAAyBi9C,OAAjC;EACAJ,QAAAA,KAAK,GAAG,CAACzmD,GAAG,CAACrP,GAAJ,CAAQiZ,CAAR,GAAY5R,MAAM,CAAC4R,CAApB,IAAyBi9C,OAAjC;EAEH,OALD,MAKO;EAEHL,QAAAA,KAAK,GAAG,CAACxmD,GAAG,CAACrP,GAAJ,CAAQiZ,CAAR,GAAY5R,MAAM,CAAC4R,CAApB,IAAyBi9C,OAAjC;EACAJ,QAAAA,KAAK,GAAG,CAACzmD,GAAG,CAAC1O,GAAJ,CAAQsY,CAAR,GAAY5R,MAAM,CAAC4R,CAApB,IAAyBi9C,OAAjC;EAEH;;EAED,UAAKP,IAAI,GAAGG,KAAR,IAAmBD,KAAK,GAAGD,IAA/B,EAAsC,OAAO,IAAP,CAlCR;EAqC9B;;EAEA,UAAIC,KAAK,GAAGF,IAAR,IAAgBA,IAAI,KAAKA,IAA7B,EAAmCA,IAAI,GAAGE,KAAP;EAEnC,UAAIC,KAAK,GAAGF,IAAR,IAAgBA,IAAI,KAAKA,IAA7B,EAAmCA,IAAI,GAAGE,KAAP;;EAEnC,UAAIK,OAAO,IAAI,CAAf,EAAkB;EAEdJ,QAAAA,KAAK,GAAG,CAAC1mD,GAAG,CAAC1O,GAAJ,CAAQyhB,CAAR,GAAY/a,MAAM,CAAC+a,CAApB,IAAyB+zC,OAAjC;EACAH,QAAAA,KAAK,GAAG,CAAC3mD,GAAG,CAACrP,GAAJ,CAAQoiB,CAAR,GAAY/a,MAAM,CAAC+a,CAApB,IAAyB+zC,OAAjC;EAEH,OALD,MAKO;EAEHJ,QAAAA,KAAK,GAAG,CAAC1mD,GAAG,CAACrP,GAAJ,CAAQoiB,CAAR,GAAY/a,MAAM,CAAC+a,CAApB,IAAyB+zC,OAAjC;EACAH,QAAAA,KAAK,GAAG,CAAC3mD,GAAG,CAAC1O,GAAJ,CAAQyhB,CAAR,GAAY/a,MAAM,CAAC+a,CAApB,IAAyB+zC,OAAjC;EAEH;;EAED,UAAKR,IAAI,GAAGK,KAAR,IAAmBD,KAAK,GAAGH,IAA/B,EAAsC,OAAO,IAAP;EAEtC,UAAIG,KAAK,GAAGJ,IAAR,IAAgBA,IAAI,KAAKA,IAA7B,EAAmCA,IAAI,GAAGI,KAAP;EAEnC,UAAIC,KAAK,GAAGJ,IAAR,IAAgBA,IAAI,KAAKA,IAA7B,EAAmCA,IAAI,GAAGI,KAAP,CA3DL;;EA+D9B,UAAIJ,IAAI,GAAG,CAAX,EAAc,OAAO,IAAP;EAEd,aAAO,KAAKtB,EAAL,CAAQqB,IAAI,IAAI,CAAR,GAAYA,IAAZ,GAAmBC,IAA3B,EAAiCjlC,cAAjC,CAAP;EAEH;;;oCAEathB,KAAK;EAEf,aAAO,KAAK+mD,YAAL,CAAkB/mD,GAAlB,EAAuBmT,CAAvB,MAA8B,IAArC;EAEH;;;;wCAKiBnV,GAAGG,GAAGqG,GAAGwiD,iBAAiB1lC,gBAAgB;EAExD;EAEAujC,MAAAA,KAAK,CAACtwC,UAAN,CAAiBpW,CAAjB,EAAoBH,CAApB;EACA8mD,MAAAA,KAAK,CAACvwC,UAAN,CAAiB/P,CAAjB,EAAoBxG,CAApB;EACA4jB,MAAAA,MAAM,CAAC7L,YAAP,CAAoB8uC,KAApB,EAA2BC,KAA3B,EANwD;EASxD;EACA;EACA;EACA;;EACA,UAAImC,GAAG,GAAG,KAAKtiC,SAAL,CAAepO,GAAf,CAAmBqL,MAAnB,CAAV;EACA,UAAIslC,IAAJ;;EAEA,UAAID,GAAG,GAAG,CAAV,EAAa;EAET,YAAID,eAAJ,EAAqB,OAAO,IAAP;EACrBE,QAAAA,IAAI,GAAG,CAAP;EAEH,OALD,MAKO,IAAID,GAAG,GAAG,CAAV,EAAa;EAEhBC,QAAAA,IAAI,GAAG,CAAE,CAAT;EACAD,QAAAA,GAAG,GAAG,CAAEA,GAAR;EAEH,OALM,MAKA;EAEH,eAAO,IAAP;EAEH;;EAEDrC,MAAAA,IAAI,CAACrwC,UAAL,CAAgB,KAAKvc,MAArB,EAA6BgG,CAA7B;EACA,UAAImpD,MAAM,GAAGD,IAAI,GAAG,KAAKviC,SAAL,CAAepO,GAAf,CAAmBuuC,KAAK,CAAC/uC,YAAN,CAAmB6uC,IAAnB,EAAyBE,KAAzB,CAAnB,CAApB,CAjCwD;;EAoCxD,UAAIqC,MAAM,GAAG,CAAb,EAAgB;EAEZ,eAAO,IAAP;EAEH;;EAED,UAAIC,MAAM,GAAGF,IAAI,GAAG,KAAKviC,SAAL,CAAepO,GAAf,CAAmBsuC,KAAK,CAACvgC,KAAN,CAAYsgC,IAAZ,CAAnB,CAApB,CA1CwD;;EA6CxD,UAAIwC,MAAM,GAAG,CAAb,EAAgB;EAEZ,eAAO,IAAP;EAEH,OAjDuD;;;EAoDxD,UAAID,MAAM,GAAGC,MAAT,GAAkBH,GAAtB,EAA2B;EAEvB,eAAO,IAAP;EAEH,OAxDuD;;;EA2DxD,UAAII,GAAG,GAAG,CAAEH,IAAF,GAAStC,IAAI,CAACruC,GAAL,CAASqL,MAAT,CAAnB,CA3DwD;;EA8DxD,UAAIylC,GAAG,GAAG,CAAV,EAAa;EAET,eAAO,IAAP;EAEH,OAlEuD;;;EAqExD,aAAO,KAAKpC,EAAL,CAAQoC,GAAG,GAAGJ,GAAd,EAAmB3lC,cAAnB,CAAP;EAEH;;;mCAEYyC,SAAS;EAElB,WAAK/rB,MAAL,CAAYwd,YAAZ,CAAyBuO,OAAzB;EACA,WAAKY,SAAL,CAAegvB,kBAAf,CAAkC5vB,OAAlC;EAEA,aAAO,IAAP;EAEH;;;6BAEMihC,KAAK;EAER,aAAOA,GAAG,CAAChtD,MAAJ,CAAWgqB,MAAX,CAAkB,KAAKhqB,MAAvB,KAAkCgtD,GAAG,CAACrgC,SAAJ,CAAc3C,MAAd,CAAqB,KAAK2C,SAA1B,CAAzC;EAEH;;;;;;EC7eL,IAAI2iC,MAAM,GAAG,IAAItzC,OAAJ,EAAb;EACA,IAAIuzC,QAAQ,GAAG,IAAIvzC,OAAJ,EAAf;;MACMwzC;;;EACF,iBAAY5pD,KAAZ,EAAmBC,GAAnB,EAAwB;EAAA;;EACpB,SAAKD,KAAL,GAAcA,KAAK,KAAKpK,SAAX,GAAwBoK,KAAxB,GAAgC,IAAIoW,OAAJ,EAA7C;EACA,SAAKnW,GAAL,GAAYA,GAAG,KAAKrK,SAAT,GAAsBqK,GAAtB,GAA4B,IAAImW,OAAJ,EAAvC;EACH;;;;0BAEGpW,OAAOC,KAAK;EAEZ,WAAKD,KAAL,CAAWtK,IAAX,CAAgBsK,KAAhB;EACA,WAAKC,GAAL,CAASvK,IAAT,CAAcuK,GAAd;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAKpK,WAAT,GAAuBH,IAAvB,CAA4B,IAA5B,CAAP;EAEH;;;2BAEIoxB,MAAM;EAEP,WAAK9mB,KAAL,CAAWtK,IAAX,CAAgBoxB,IAAI,CAAC9mB,KAArB;EACA,WAAKC,GAAL,CAASvK,IAAT,CAAcoxB,IAAI,CAAC7mB,GAAnB;EAEA,aAAO,IAAP;EAEH;;;gCAESyjB,gBAAgB;EAEtB,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EACA,aAAO3iB,MAAM,CAACgjB,UAAP,CAAkB,KAAKzW,KAAvB,EAA8B,KAAKC,GAAnC,EAAwCyV,cAAxC,CAAuD,GAAvD,CAAP;EAEH;;;4BAEKgO,gBAAgB;EAElB,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EACA,aAAO3iB,MAAM,CAACkjB,UAAP,CAAkB,KAAK1W,GAAvB,EAA4B,KAAKD,KAAjC,CAAP;EAEH;;;mCAEY;EAET,aAAO,KAAKA,KAAL,CAAW+Y,iBAAX,CAA6B,KAAK9Y,GAAlC,CAAP;EAEH;;;iCAEU;EAEP,aAAO,KAAKD,KAAL,CAAWwlB,UAAX,CAAsB,KAAKvlB,GAA3B,CAAP;EAEH;;;yBAEE0N,GAAG+V,gBAAgB;EAElB,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EAEA,aAAO,KAAK6E,KAAL,CAAWxnB,MAAX,EAAmBiiB,cAAnB,CAAkC/H,CAAlC,EAAqCuK,GAArC,CAAyC,KAAKlY,KAA9C,CAAP;EAEH;;;mDAE4B2L,OAAOk+C,aAAa;EAE7CH,MAAAA,MAAM,CAAC/yC,UAAP,CAAkBhL,KAAlB,EAAyB,KAAK3L,KAA9B;EACA2pD,MAAAA,QAAQ,CAAChzC,UAAT,CAAoB,KAAK1W,GAAzB,EAA8B,KAAKD,KAAnC;EAEA,UAAI8pD,SAAS,GAAGH,QAAQ,CAAChxC,GAAT,CAAagxC,QAAb,CAAhB;EACA,UAAII,eAAe,GAAGJ,QAAQ,CAAChxC,GAAT,CAAa+wC,MAAb,CAAtB;EAEA,UAAI/7C,CAAC,GAAGo8C,eAAe,GAAGD,SAA1B;;EAEA,UAAID,WAAJ,EAAiB;EAEbl8C,QAAAA,CAAC,GAAGiI,KAAK,CAACC,KAAN,CAAYlI,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAJ;EAEH;;EAED,aAAOA,CAAP;EAEH;;;0CAEmBhC,OAAOk+C,aAAanmC,gBAAgB;EAEpD,UAAI/V,CAAC,GAAG,KAAKq8C,4BAAL,CAAkCr+C,KAAlC,EAAyCk+C,WAAzC,CAAR;EAEA,UAAIp2D,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EAEA,aAAO,KAAK6E,KAAL,CAAWxnB,MAAX,EAAmBiiB,cAAnB,CAAkC/H,CAAlC,EAAqCuK,GAArC,CAAyC,KAAKlY,KAA9C,CAAP;EAEH;;;mCAEYuX,QAAQ;EAEjB,WAAKvX,KAAL,CAAW4X,YAAX,CAAwBL,MAAxB;EACA,WAAKtX,GAAL,CAAS2X,YAAT,CAAsBL,MAAtB;EAEA,aAAO,IAAP;EAEH;;;6BAEMuP,MAAM;EAET,aAAOA,IAAI,CAAC9mB,KAAL,CAAWokB,MAAX,CAAkB,KAAKpkB,KAAvB,KAAiC8mB,IAAI,CAAC7mB,GAAL,CAASmkB,MAAT,CAAgB,KAAKnkB,GAArB,CAAxC;EAEH;;;;;;EC5GL,IAAIsV,GAAC,GAAG,IAAIa,OAAJ,EAAR;EAEA,IAAIoxC,EAAE,GAAG,IAAIpxC,OAAJ,EAAT;EACA,IAAI4B,IAAE,GAAG,IAAI5B,OAAJ,EAAT;EACA,IAAI6B,IAAE,GAAG,IAAI7B,OAAJ,EAAT;EAEA,IAAImQ,IAAE,GAAG,IAAInQ,OAAJ,EAAT;EAEA,IAAI6zC,EAAE,GAAG,IAAI7zC,OAAJ,EAAT;EACA,IAAI8zC,EAAE,GAAG,IAAI9zC,OAAJ,EAAT;EAEA,IAAI2N,KAAK,GAAG,IAAI0C,KAAJ,EAAZ;EACA,IAAI0jC,QAAQ,GAAG,CAAC,IAAIP,KAAJ,EAAD,EAAc,IAAIA,KAAJ,EAAd,EAA2B,IAAIA,KAAJ,EAA3B,CAAf;EACA,IAAIQ,cAAc,GAAG,IAAIh0C,OAAJ,EAArB;EACA,IAAI2O,YAAY,GAAG,IAAI3O,OAAJ,EAAnB;;MAGMi0C;;;EACF,oBAAYjqD,CAAZ,EAAeG,CAAf,EAAkBqG,CAAlB,EAAqB;EAAA;;EACjB,SAAKxG,CAAL,GAAUA,CAAC,KAAKxK,SAAP,GAAoBwK,CAApB,GAAwB,IAAIgW,OAAJ,EAAjC;EACA,SAAK7V,CAAL,GAAUA,CAAC,KAAK3K,SAAP,GAAoB2K,CAApB,GAAwB,IAAI6V,OAAJ,EAAjC;EACA,SAAKxP,CAAL,GAAUA,CAAC,KAAKhR,SAAP,GAAoBgR,CAApB,GAAwB,IAAIwP,OAAJ,EAAjC;EACH;;;;0BAqEGhW,GAAGG,GAAGqG,GAAG;EAET,WAAKxG,CAAL,CAAO1K,IAAP,CAAY0K,CAAZ;EACA,WAAKG,CAAL,CAAO7K,IAAP,CAAY6K,CAAZ;EACA,WAAKqG,CAAL,CAAOlR,IAAP,CAAYkR,CAAZ;EAEA,aAAO,IAAP;EAEH;;;8CAEuB4E,QAAQ8+C,IAAIC,IAAIC,IAAI;EAExC,WAAKpqD,CAAL,CAAO1K,IAAP,CAAY8V,MAAM,CAAC8+C,EAAD,CAAlB;EACA,WAAK/pD,CAAL,CAAO7K,IAAP,CAAY8V,MAAM,CAAC++C,EAAD,CAAlB;EACA,WAAK3jD,CAAL,CAAOlR,IAAP,CAAY8V,MAAM,CAACg/C,EAAD,CAAlB;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAK30D,WAAT,GAAuBH,IAAvB,CAA4B,IAA5B,CAAP;EAEH;;;2BAEI+0D,UAAU;EAEX,WAAKrqD,CAAL,CAAO1K,IAAP,CAAY+0D,QAAQ,CAACrqD,CAArB;EACA,WAAKG,CAAL,CAAO7K,IAAP,CAAY+0D,QAAQ,CAAClqD,CAArB;EACA,WAAKqG,CAAL,CAAOlR,IAAP,CAAY+0D,QAAQ,CAAC7jD,CAArB;EAEA,aAAO,IAAP;EAEH;EAGD;;;;6BAKO;EAEHqjD,MAAAA,EAAE,CAACtzC,UAAH,CAAc,KAAK/P,CAAnB,EAAsB,KAAKrG,CAA3B;EACA2pD,MAAAA,EAAE,CAACvzC,UAAH,CAAc,KAAKvW,CAAnB,EAAsB,KAAKG,CAA3B;EAEA,aAAO0pD,EAAE,CAACvjC,KAAH,CAASwjC,EAAT,EAAap5D,MAAb,KAAwB,GAA/B;EAEH;;;+BAEQ4yB,gBAAgB;EAErB,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EACA,aAAO3iB,MAAM,CAACgjB,UAAP,CAAkB,KAAKrW,CAAvB,EAA0B,KAAKG,CAA/B,EAAkC2X,GAAlC,CAAsC,KAAKtR,CAA3C,EAA8C8O,cAA9C,CAA6D,IAAI,CAAjE,CAAP;EAEH;;;6BAEMgO,gBAAgB;EAEnB,aAAO2mC,QAAQ,CAACrmC,MAAT,CAAgB,KAAK5jB,CAArB,EAAwB,KAAKG,CAA7B,EAAgC,KAAKqG,CAArC,EAAwC8c,cAAxC,CAAP;EAEH;;;4BAEKA,gBAAgB;EAElB,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAI+C,KAAJ,EAA/B;EAEA,aAAOhzB,MAAM,CAACi3D,qBAAP,CAA6B,KAAKtqD,CAAlC,EAAqC,KAAKG,CAA1C,EAA6C,KAAKqG,CAAlD,CAAP;EAEH;;;yCAEkB+E,OAAO+X,gBAAgB;EAEtC,aAAO2mC,QAAQ,CAACM,kBAAT,CAA4Bh/C,KAA5B,EAAmC,KAAKvL,CAAxC,EAA2C,KAAKG,CAAhD,EAAmD,KAAKqG,CAAxD,EAA2D8c,cAA3D,CAAP;EAEH;;;oCAEa/X,OAAO;EAEjB,aAAO0+C,QAAQ,CAACO,aAAT,CAAuBj/C,KAAvB,EAA8B,KAAKvL,CAAnC,EAAsC,KAAKG,CAA3C,EAA8C,KAAKqG,CAAnD,CAAP;EAEH;;;0CAEmB+E,OAAO+X,gBAAgB;EAEvC,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EACA,UAAIy0C,WAAW,GAAGl3D,QAAlB,CAHuC;;EAOvCowB,MAAAA,KAAK,CAAC2mC,qBAAN,CAA4B,KAAKtqD,CAAjC,EAAoC,KAAKG,CAAzC,EAA4C,KAAKqG,CAAjD;EACAmd,MAAAA,KAAK,CAAC+mC,YAAN,CAAmBn/C,KAAnB,EAA0By+C,cAA1B,EARuC;;EAYvC,UAAI,KAAKQ,aAAL,CAAmBR,cAAnB,MAAuC,IAA3C,EAAiD;EAE7C;EAEA32D,QAAAA,MAAM,CAACiC,IAAP,CAAY00D,cAAZ;EAEH,OAND,MAMO;EAEH;EAEAD,QAAAA,QAAQ,CAAC,CAAD,CAAR,CAAYllD,GAAZ,CAAgB,KAAK7E,CAArB,EAAwB,KAAKG,CAA7B;EACA4pD,QAAAA,QAAQ,CAAC,CAAD,CAAR,CAAYllD,GAAZ,CAAgB,KAAK1E,CAArB,EAAwB,KAAKqG,CAA7B;EACAujD,QAAAA,QAAQ,CAAC,CAAD,CAAR,CAAYllD,GAAZ,CAAgB,KAAK2B,CAArB,EAAwB,KAAKxG,CAA7B;;EAEA,aAAK,IAAIpP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGm5D,QAAQ,CAACr5D,MAA7B,EAAqCE,CAAC,EAAtC,EAA0C;EAEtCm5D,UAAAA,QAAQ,CAACn5D,CAAD,CAAR,CAAY+5D,mBAAZ,CAAgCX,cAAhC,EAAgD,IAAhD,EAAsDrlC,YAAtD;EAEA,cAAIyE,QAAQ,GAAG4gC,cAAc,CAACrxC,iBAAf,CAAiCgM,YAAjC,CAAf;;EAEA,cAAIyE,QAAQ,GAAGqhC,WAAf,EAA4B;EAExBA,YAAAA,WAAW,GAAGrhC,QAAd;EAEA/1B,YAAAA,MAAM,CAACiC,IAAP,CAAYqvB,YAAZ;EAEH;EAEJ;EAEJ;;EAED,aAAOtxB,MAAP;EAEH;;;6BAEMg3D,UAAU;EAEb,aAAOA,QAAQ,CAACrqD,CAAT,CAAWgkB,MAAX,CAAkB,KAAKhkB,CAAvB,KAA6BqqD,QAAQ,CAAClqD,CAAT,CAAW6jB,MAAX,CAAkB,KAAK7jB,CAAvB,CAA7B,IAA0DkqD,QAAQ,CAAC7jD,CAAT,CAAWwd,MAAX,CAAkB,KAAKxd,CAAvB,CAAjE;EAEH;;;6BA3MaxG,GAAGG,GAAGqG,GAAG8c,gBAAgB;EAEnC,UAAIjwB,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B;EAEA3iB,MAAAA,MAAM,CAACkjB,UAAP,CAAkB/P,CAAlB,EAAqBrG,CAArB;EACAgV,MAAAA,GAAC,CAACoB,UAAF,CAAavW,CAAb,EAAgBG,CAAhB;EACA9M,MAAAA,MAAM,CAACizB,KAAP,CAAanR,GAAb;EAEA,UAAIy1C,cAAc,GAAGv3D,MAAM,CAACmlB,QAAP,EAArB;;EACA,UAAIoyC,cAAc,GAAG,CAArB,EAAwB;EAEpB,eAAOv3D,MAAM,CAACiiB,cAAP,CAAsB,IAAIjlB,IAAI,CAACklB,IAAL,CAAUq1C,cAAV,CAA1B,CAAP;EAEH;;EAED,aAAOv3D,MAAM,CAACwR,GAAP,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAP;EAEH;;;gCAEgB7E,GAAGG,GAAGqG,GAAGjS,QAAQ;EAC9B,aAAOs2D,UAAS,CAAC95D,IAAV,CAAe,IAAf,EAAqBiP,CAArB,EAAwBG,CAAxB,EAA2BqG,CAA3B,EAA8BjS,MAA9B,CAAP;EACH;EAGD;;;;yCAC0BgX,OAAOvL,GAAGG,GAAGqG,GAAG8c,gBAAgB;EAEtD8jC,MAAAA,EAAE,CAAC7wC,UAAH,CAAc/P,CAAd,EAAiBxG,CAAjB;EACA4X,MAAAA,IAAE,CAACrB,UAAH,CAAcpW,CAAd,EAAiBH,CAAjB;EACA6X,MAAAA,IAAE,CAACtB,UAAH,CAAchL,KAAd,EAAqBvL,CAArB;EAEA,UAAI8qD,KAAK,GAAG1D,EAAE,CAAC7uC,GAAH,CAAO6uC,EAAP,CAAZ;EACA,UAAI2D,KAAK,GAAG3D,EAAE,CAAC7uC,GAAH,CAAOX,IAAP,CAAZ;EACA,UAAIozC,KAAK,GAAG5D,EAAE,CAAC7uC,GAAH,CAAOV,IAAP,CAAZ;EACA,UAAIozC,KAAK,GAAGrzC,IAAE,CAACW,GAAH,CAAOX,IAAP,CAAZ;EACA,UAAIszC,KAAK,GAAGtzC,IAAE,CAACW,GAAH,CAAOV,IAAP,CAAZ;EAEA,UAAIszC,KAAK,GAAIL,KAAK,GAAGG,KAAR,GAAgBF,KAAK,GAAGA,KAArC;EAEA,UAAI13D,MAAM,GAAGiwB,cAAc,IAAI,IAAItN,OAAJ,EAA/B,CAdsD;;EAiBtD,UAAIm1C,KAAK,KAAK,CAAd,EAAiB;EAEb;EACA;EACA,eAAO93D,MAAM,CAACwR,GAAP,CAAW,CAAE,CAAb,EAAgB,CAAE,CAAlB,EAAqB,CAAE,CAAvB,CAAP;EAEH;;EAED,UAAIumD,QAAQ,GAAG,IAAID,KAAnB;EACA,UAAInqB,CAAC,GAAG,CAACiqB,KAAK,GAAGD,KAAR,GAAgBD,KAAK,GAAGG,KAAzB,IAAkCE,QAA1C;EACA,UAAIj2C,CAAC,GAAG,CAAC21C,KAAK,GAAGI,KAAR,GAAgBH,KAAK,GAAGC,KAAzB,IAAkCI,QAA1C,CA3BsD;;EA8BtD,aAAO/3D,MAAM,CAACwR,GAAP,CAAW,IAAIm8B,CAAJ,GAAQ7rB,CAAnB,EAAsBA,CAAtB,EAAyB6rB,CAAzB,CAAP;EAEH;;;oCAEoBz1B,OAAOvL,GAAGG,GAAGqG,GAAG;EAEjC,UAAInT,MAAM,GAAG42D,QAAQ,CAACM,kBAAT,CAA4Bh/C,KAA5B,EAAmCvL,CAAnC,EAAsCG,CAAtC,EAAyCqG,CAAzC,EAA4C2f,IAA5C,CAAb;EAEA,aAAQ9yB,MAAM,CAACsY,CAAP,IAAY,CAAb,IAAoBtY,MAAM,CAACuY,CAAP,IAAY,CAAhC,IAAwCvY,MAAM,CAACsY,CAAP,GAAWtY,MAAM,CAACuY,CAAnB,IAAyB,CAAvE;EAEH;;;mCAwCmBL,OAAOvL,GAAGG,GAAGqG,GAAGjS,QAAQ;EACxC,aAAO82D,aAAY,CAACt6D,IAAb,CAAkB,IAAlB,EAAwBwa,KAAxB,EAA+BvL,CAA/B,EAAkCG,CAAlC,EAAqCqG,CAArC,EAAwCjS,MAAxC,CAAP;EACH;;;4BAiGYgX,OAAOgc,IAAIC,IAAIC,IAAI6jC,KAAKC,KAAKC,KAAKj3D,QAAQ;EACnD,aAAOk3D,MAAK,CAAC16D,IAAN,CAAW,IAAX,EAAiBwa,KAAjB,EAAwBgc,EAAxB,EAA4BC,EAA5B,EAAgCC,EAAhC,EAAoC6jC,GAApC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDj3D,MAAnD,CAAP;EACH;;;;;;EAIL,IAAIk3D,MAAK,GAAI,YAAY;EAErB,MAAIC,SAAS,GAAG,IAAI11C,OAAJ,EAAhB;EAEA,SAAO,SAASy1C,KAAT,CAAelgD,KAAf,EAAsBgc,EAAtB,EAA0BC,EAA1B,EAA8BC,EAA9B,EAAkC6jC,GAAlC,EAAuCC,GAAvC,EAA4CC,GAA5C,EAAiDj3D,MAAjD,EAAyD;EAE5D,SAAK82D,YAAL,CAAkB9/C,KAAlB,EAAyBgc,EAAzB,EAA6BC,EAA7B,EAAiCC,EAAjC,EAAqCikC,SAArC;EAEAn3D,IAAAA,MAAM,CAACsQ,GAAP,CAAW,CAAX,EAAc,CAAd;EACAtQ,IAAAA,MAAM,CAACo3D,eAAP,CAAuBL,GAAvB,EAA4BI,SAAS,CAAC//C,CAAtC;EACApX,IAAAA,MAAM,CAACo3D,eAAP,CAAuBJ,GAAvB,EAA4BG,SAAS,CAAC9/C,CAAtC;EACArX,IAAAA,MAAM,CAACo3D,eAAP,CAAuBH,GAAvB,EAA4BE,SAAS,CAAC32C,CAAtC;EAEA,WAAOxgB,MAAP;EAEH,GAXD;EAaH,CAjBW,EAAZ;;EAkBA,IAAI82D,aAAY,GAAI,YAAY;EAE5B,MAAIjE,EAAE,GAAG,IAAIpxC,OAAJ,EAAT;EACA,MAAI4B,EAAE,GAAG,IAAI5B,OAAJ,EAAT;EACA,MAAI6B,EAAE,GAAG,IAAI7B,OAAJ,EAAT;EAEA,SAAO,SAASq1C,YAAT,CAAsB9/C,KAAtB,EAA6BvL,CAA7B,EAAgCG,CAAhC,EAAmCqG,CAAnC,EAAsCjS,MAAtC,EAA8C;EAEjD6yD,IAAAA,EAAE,CAAC7wC,UAAH,CAAc/P,CAAd,EAAiBxG,CAAjB;EACA4X,IAAAA,EAAE,CAACrB,UAAH,CAAcpW,CAAd,EAAiBH,CAAjB;EACA6X,IAAAA,EAAE,CAACtB,UAAH,CAAchL,KAAd,EAAqBvL,CAArB;EAEA,QAAI8qD,KAAK,GAAG1D,EAAE,CAAC7uC,GAAH,CAAO6uC,EAAP,CAAZ;EACA,QAAI2D,KAAK,GAAG3D,EAAE,CAAC7uC,GAAH,CAAOX,EAAP,CAAZ;EACA,QAAIozC,KAAK,GAAG5D,EAAE,CAAC7uC,GAAH,CAAOV,EAAP,CAAZ;EACA,QAAIozC,KAAK,GAAGrzC,EAAE,CAACW,GAAH,CAAOX,EAAP,CAAZ;EACA,QAAIszC,KAAK,GAAGtzC,EAAE,CAACW,GAAH,CAAOV,EAAP,CAAZ;EAEA,QAAIszC,KAAK,GAAIL,KAAK,GAAGG,KAAR,GAAgBF,KAAK,GAAGA,KAArC;;EAEA,QAAIx2D,MAAM,KAAKiB,SAAf,EAA0B;EAEtB2gB,MAAAA,OAAO,CAACC,IAAR,CAAa,kDAAb;EACA7hB,MAAAA,MAAM,GAAG,IAAIyhB,OAAJ,EAAT;EAEH,KAnBgD;;;EAsBjD,QAAIm1C,KAAK,KAAK,CAAd,EAAiB;EAEb;EACA;EACA,aAAO52D,MAAM,CAACsQ,GAAP,CAAW,CAAE,CAAb,EAAgB,CAAE,CAAlB,EAAqB,CAAE,CAAvB,CAAP;EAEH;;EAED,QAAIumD,QAAQ,GAAG,IAAID,KAAnB;EACA,QAAInqB,CAAC,GAAG,CAACiqB,KAAK,GAAGD,KAAR,GAAgBD,KAAK,GAAGG,KAAzB,IAAkCE,QAA1C;EACA,QAAIj2C,CAAC,GAAG,CAAC21C,KAAK,GAAGI,KAAR,GAAgBH,KAAK,GAAGC,KAAzB,IAAkCI,QAA1C,CAhCiD;;EAmCjD,WAAO72D,MAAM,CAACsQ,GAAP,CAAW,IAAIm8B,CAAJ,GAAQ7rB,CAAnB,EAAsBA,CAAtB,EAAyB6rB,CAAzB,CAAP;EAEH,GArCD;EAuCH,CA7CmB,EAApB;;EAgDA,IAAI6pB,UAAS,GAAI,YAAY;EAEzB,MAAIzD,EAAE,GAAG,IAAIpxC,OAAJ,EAAT;EAEA,SAAO,SAAS60C,SAAT,CAAmB7qD,CAAnB,EAAsBG,CAAtB,EAAyBqG,CAAzB,EAA4BjS,MAA5B,EAAoC;EAEvC,QAAIA,MAAM,KAAKiB,SAAf,EAA0B;EAEtB2gB,MAAAA,OAAO,CAACC,IAAR,CAAa,qDAAb;EACA7hB,MAAAA,MAAM,GAAG,IAAIyhB,OAAJ,EAAT;EAEH;;EAEDzhB,IAAAA,MAAM,CAACgiB,UAAP,CAAkB/P,CAAlB,EAAqBrG,CAArB;EACAinD,IAAAA,EAAE,CAAC7wC,UAAH,CAAcvW,CAAd,EAAiBG,CAAjB;EACA5L,IAAAA,MAAM,CAAC+xB,KAAP,CAAa8gC,EAAb;EAEA,QAAIwE,cAAc,GAAGr3D,MAAM,CAACikB,QAAP,EAArB;;EACA,QAAIozC,cAAc,GAAG,CAArB,EAAwB;EAEpB,aAAOr3D,MAAM,CAAC+gB,cAAP,CAAsB,IAAIjlB,IAAI,CAACklB,IAAL,CAAUq2C,cAAV,CAA1B,CAAP;EAEH;;EAED,WAAOr3D,MAAM,CAACsQ,GAAP,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAP;EAEH,GAtBD;EAwBH,CA5BgB,EAAjB;;MC7SMgnD;;;EACF,iBAAY7rD,CAAZ,EAAeG,CAAf,EAAkBqG,CAAlB,EAAqBod,MAArB,EAA6BxJ,KAA7B,EAAoCshB,aAApC,EAAmD;EAAA;;EAC/C,SAAK17B,CAAL,GAASA,CAAT;EACA,SAAKG,CAAL,GAASA,CAAT;EACA,SAAKqG,CAAL,GAASA,CAAT;EAEA,SAAKod,MAAL,GAAeA,MAAM,IAAIA,MAAM,CAAC3N,SAAlB,GAA+B2N,MAA/B,GAAwC,IAAI5N,OAAJ,EAAtD;EACA,SAAKgmB,aAAL,GAAqB9tC,KAAK,CAAC0B,OAAN,CAAcg0B,MAAd,IAAwBA,MAAxB,GAAiC,EAAtD;EAEA,SAAKxJ,KAAL,GAAcA,KAAK,IAAIA,KAAK,CAACN,OAAhB,GAA2BM,KAA3B,GAAmC,IAAIR,OAAJ,EAAhD;EACA,SAAKqiB,YAAL,GAAoB/tC,KAAK,CAAC0B,OAAN,CAAcwqB,KAAd,IAAuBA,KAAvB,GAA+B,EAAnD;EAEA,SAAKshB,aAAL,GAAqBA,aAAa,KAAKlmC,SAAlB,GAA8BkmC,aAA9B,GAA8C,CAAnE;EACH;;;;8BACO;EAEJ,aAAO,IAAI,KAAKjmC,WAAT,GAAuBH,IAAvB,CAA4B,IAA5B,CAAP;EAEH;;;2BAEIgpC,QAAQ;EAET,WAAKt+B,CAAL,GAASs+B,MAAM,CAACt+B,CAAhB;EACA,WAAKG,CAAL,GAASm+B,MAAM,CAACn+B,CAAhB;EACA,WAAKqG,CAAL,GAAS83B,MAAM,CAAC93B,CAAhB;EAEA,WAAKod,MAAL,CAAYtuB,IAAZ,CAAiBgpC,MAAM,CAAC1a,MAAxB;EACA,WAAKxJ,KAAL,CAAW9kB,IAAX,CAAgBgpC,MAAM,CAAClkB,KAAvB;EAEA,WAAKshB,aAAL,GAAqB4C,MAAM,CAAC5C,aAA5B;;EAEA,WAAK,IAAI9qC,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAG8iC,MAAM,CAACtC,aAAP,CAAqBtrC,MAA1C,EAAkDE,CAAC,GAAG4K,EAAtD,EAA0D5K,CAAC,EAA3D,EAA+D;EAE3D,aAAKorC,aAAL,CAAmBprC,CAAnB,IAAwB0tC,MAAM,CAACtC,aAAP,CAAqBprC,CAArB,EAAwBmE,KAAxB,EAAxB;EAEH;;EAED,WAAK,IAAInE,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAG8iC,MAAM,CAACrC,YAAP,CAAoBvrC,MAAzC,EAAiDE,CAAC,GAAG4K,EAArD,EAAyD5K,CAAC,EAA1D,EAA8D;EAE1D,aAAKqrC,YAAL,CAAkBrrC,CAAlB,IAAuB0tC,MAAM,CAACrC,YAAP,CAAoBrrC,CAApB,EAAuBmE,KAAvB,EAAvB;EAEH;;EAED,aAAO,IAAP;EAEH;;;;;;EC9CL;;;;;EAIA,IAAI+2D,UAAU,GAAG,CAAjB;;MAEMC;;;;;EACF,sBAAc;EAAA;;EAAA;;EACV;EAEA,UAAKrzD,IAAL,GAAY,UAAZ;EACArK,IAAAA,MAAM,CAACiuC,cAAP,wDAA4B,IAA5B,EAAkC;EAAE9qC,MAAAA,KAAK,EAAEs6D,UAAU;EAAnB,KAAlC;EAEA,UAAK/rB,OAAL,GAAe,CAAf;EACA,UAAKzJ,WAAL,GAAmB,KAAnB;EAEA,UAAK2J,MAAL,GAAc,IAAd;EACA,UAAKtQ,SAAL,GAAiBze,cAAjB;EACA,UAAKke,SAAL,GAAiB,IAAjB;EACA,UAAKqH,UAAL,GAAkB,IAAlB;EAEA,UAAKzE,QAAL,GAAgBlgB,cAAhB;EACA,UAAKskB,IAAL,GAAY1kB,SAAZ;EACA,UAAKuqB,YAAL,GAAoBpnB,QAApB;EAEA,UAAKwnC,OAAL,GAAe,IAAf;EACA,UAAKhe,WAAL,GAAmB,IAAnB;EAEA,UAAK3H,UAAL,GAAkB,IAAlB;EACA,UAAKnL,SAAL,GAAiB,IAAjB;EAEA,UAAKqL,aAAL,GAAqB,KAArB;EACA,UAAKC,mBAAL,GAA2B,CAA3B;EACA,UAAKC,kBAAL,GAA0B,CAA1B;EAEA,UAAK5E,QAAL,GAAgBxf,cAAhB;EACA,UAAKyf,QAAL,GAAgBxf,sBAAhB;EACA,UAAKsf,aAAL,GAAqB9f,WAArB;EACA,UAAKkgB,aAAL,GAAqB,IAArB;EACA,UAAKC,aAAL,GAAqB,IAArB;EACA,UAAKF,kBAAL,GAA0B,IAA1B;EAEA,UAAKxD,kBAAL,GAA0B,KAA1B;EAEA,UAAK42B,QAAL,GAAgB,EAAhB;;EAEA,UAAKxG,eAAL,GAAuB,YAAY,EAAnC;;EAvCU;EAwCb;;;;gCAISruD,QAAQ;EAEd,UAAIA,MAAM,KAAK6E,SAAf,EAA0B;;EAE1B,WAAK,IAAItF,GAAT,IAAgBS,MAAhB,EAAwB;EAEpB,YAAIq7D,QAAQ,GAAGr7D,MAAM,CAACT,GAAD,CAArB;;EAEA,YAAI87D,QAAQ,KAAKx2D,SAAjB,EAA4B;EAExB2gB,UAAAA,OAAO,CAACC,IAAR,CAAa,gBAAgBlmB,GAAhB,GAAsB,2BAAnC;EACA;EAEH,SATmB;EAYpB;EAEA;EACA;EACA;EAEA;;;EAEA,YAAI+7D,YAAY,GAAG,KAAK/7D,GAAL,CAAnB;;EAEA,YAAI+7D,YAAY,KAAKz2D,SAArB,EAAgC;EAE5B2gB,UAAAA,OAAO,CAACC,IAAR,CAAa,KAAK1d,IAAL,GAAY,KAAZ,GAAoBxI,GAApB,GAA0B,uCAAvC;EACA;EAEH;;EAED,YAAI+7D,YAAY,IAAIA,YAAY,CAACnyC,OAAjC,EAA0C;EAEtCmyC,UAAAA,YAAY,CAACpnD,GAAb,CAAiBmnD,QAAjB;EAEH,SAJD,MAIO,IAAKC,YAAY,IAAIA,YAAY,CAACh2C,SAA9B,IAA6C+1C,QAAQ,IAAIA,QAAQ,CAAC/1C,SAAtE,EAAkF;EAErFg2C,UAAAA,YAAY,CAAC32D,IAAb,CAAkB02D,QAAlB;EAEH,SAJM,MAIA,IAAI97D,GAAG,KAAK,UAAZ,EAAwB;EAE3B;EACA,eAAKA,GAAL,IAAY6K,MAAM,CAACixD,QAAD,CAAlB;EAEH,SALM,MAKA;EAEH,eAAK97D,GAAL,IAAY87D,QAAZ;EAEH;EAEJ;EAEJ;;;8BAEO;EAEJ,aAAO,IAAI,KAAKv2D,WAAT,GAAuBH,IAAvB,CAA4B,IAA5B,CAAP;EAEH;;;2BAEIgpC,QAAQ;EAET,WAAK3sC,IAAL,GAAY2sC,MAAM,CAAC3sC,IAAnB;EAEA,WAAKsuC,MAAL,GAAc3B,MAAM,CAAC2B,MAArB;EAEA,WAAKjO,QAAL,GAAgBsM,MAAM,CAACtM,QAAvB;EACA,WAAKoE,IAAL,GAAYkI,MAAM,CAAClI,IAAnB;EACA,WAAKuY,WAAL,GAAmBrQ,MAAM,CAACqQ,WAA1B;EACA,WAAK1S,YAAL,GAAoBqC,MAAM,CAACrC,YAA3B;EAEA,WAAK8D,OAAL,GAAezB,MAAM,CAACyB,OAAtB;EACA,WAAKzJ,WAAL,GAAmBgI,MAAM,CAAChI,WAA1B;EAEA,WAAKpE,QAAL,GAAgBoM,MAAM,CAACpM,QAAvB;EACA,WAAKC,QAAL,GAAgBmM,MAAM,CAACnM,QAAvB;EACA,WAAKF,aAAL,GAAqBqM,MAAM,CAACrM,aAA5B;EACA,WAAKI,aAAL,GAAqBiM,MAAM,CAACjM,aAA5B;EACA,WAAKC,aAAL,GAAqBgM,MAAM,CAAChM,aAA5B;EACA,WAAKF,kBAAL,GAA0BkM,MAAM,CAAClM,kBAAjC;EAEA,WAAKzC,SAAL,GAAiB2O,MAAM,CAAC3O,SAAxB;EACA,WAAKP,SAAL,GAAiBkP,MAAM,CAAClP,SAAxB;EACA,WAAKqH,UAAL,GAAkB6H,MAAM,CAAC7H,UAAzB;EAEA,WAAKC,UAAL,GAAkB4H,MAAM,CAAC5H,UAAzB;EAEA,WAAKnL,SAAL,GAAiB+S,MAAM,CAAC/S,SAAxB;EAEA,WAAKqL,aAAL,GAAqB0H,MAAM,CAAC1H,aAA5B;EACA,WAAKC,mBAAL,GAA2ByH,MAAM,CAACzH,mBAAlC;EACA,WAAKC,kBAAL,GAA0BwH,MAAM,CAACxH,kBAAjC;EAGA,WAAK8Y,SAAL,GAAiBtR,MAAM,CAACsR,SAAxB;EACA,WAAKhhB,kBAAL,GAA0B0P,MAAM,CAAC1P,kBAAjC;EAEA,WAAKytB,OAAL,GAAe/d,MAAM,CAAC+d,OAAtB;EAEA,aAAO,IAAP;EAEH;;;gCAKS;EAEN,WAAK7d,IAAL,CAAU;EAAE9lC,QAAAA,IAAI,EAAE;EAAR,OAAV;EAEH;;;0BARgB;EACb,aAAO,IAAP;EACH;;;;IAvJkByX;;MCLjBg/B;;;;;EACF,gCAAY9kB,UAAZ,EAAwB;EAAA;;EAAA;;EACpB;EACA,UAAKjQ,KAAL,GAAa,IAAIR,OAAJ,CAAU,QAAV,CAAb,CAFoB;;EAGpB,UAAK5qB,GAAL,GAAW,IAAX;EAEA,UAAK0J,IAAL,GAAY,mBAAZ;EACA,UAAKoiD,SAAL,GAAiB,KAAjB;EACA,UAAKY,kBAAL,GAA0B,CAA1B,CAPoB;;EAUpB,UAAKzb,MAAL,GAAc,KAAd;;EAEA,UAAKisB,SAAL,CAAe7hC,UAAf;;EAZoB;EAavB;;;;2BAMIiU,QAAQ;EACT,qFAAWA,MAAX;;EAEA,WAAKlkB,KAAL,CAAW9kB,IAAX,CAAgBgpC,MAAM,CAAClkB,KAAvB;EACA,WAAKprB,GAAL,GAAWsvC,MAAM,CAACtvC,GAAlB;EACA,WAAK8rD,SAAL,GAAiBxc,MAAM,CAACwc,SAAxB;EAEA,aAAO,IAAP;EACH;;;6BAZyB;EACtB,aAAO,IAAP;EACH;;;;IAlB2BiR;;ECShC;;;;;;MAMMI;;;;;EACF,gBAAY9nC,QAAZ,EAAsB2R,QAAtB,EAAgC;EAAA;;EAAA;;EAC5B;EAEA,UAAK3R,QAAL,GAAgBA,QAAhB;EACA,UAAK2R,QAAL,GAAgBA,QAAhB;EAEA,UAAK4lB,QAAL,GAAgBhrC,iBAAhB;EAN4B;EAQ/B;;;;kCAMWpf,OAAO;EAEf,WAAKoqD,QAAL,GAAgBpqD,KAAhB;EAEH;;;8BAEO46D,WAAWC,YAAY;EAC3BC,MAAAA,QAAO,CAACv7D,IAAR,CAAa,IAAb,EAAmBq7D,SAAnB,EAA8BC,UAA9B;EACH;;;0BAZW;EACR,aAAO,IAAP;EACH;;;;IAbcxH;;EA4BnB,IAAIyH,QAAO,GAAI,YAAY;EAEvB,MAAIC,aAAa,GAAG,IAAIvxC,OAAJ,EAApB;EACA,MAAIgsC,GAAG,GAAG,IAAID,GAAJ,EAAV;EACA,MAAItjC,MAAM,GAAG,IAAIqB,MAAJ,EAAb;EAEA,MAAI2Y,EAAE,GAAG,IAAIznB,OAAJ,EAAT;EACA,MAAI0nB,EAAE,GAAG,IAAI1nB,OAAJ,EAAT;EACA,MAAI2nB,EAAE,GAAG,IAAI3nB,OAAJ,EAAT;EAEA,MAAIw2C,KAAK,GAAG,IAAIx2C,OAAJ,EAAZ;EACA,MAAIy2C,KAAK,GAAG,IAAIz2C,OAAJ,EAAZ;EACA,MAAI02C,KAAK,GAAG,IAAI12C,OAAJ,EAAZ;EAEA,MAAI22C,GAAG,GAAG,IAAIlzB,OAAJ,EAAV;EACA,MAAImzB,GAAG,GAAG,IAAInzB,OAAJ,EAAV;EACA,MAAIozB,GAAG,GAAG,IAAIpzB,OAAJ,EAAV;EAEA,MAAIiyB,SAAS,GAAG,IAAI11C,OAAJ,EAAhB;EAEA,MAAI82C,iBAAiB,GAAG,IAAI92C,OAAJ,EAAxB;EACA,MAAI+2C,sBAAsB,GAAG,IAAI/2C,OAAJ,EAA7B;;EAEA,WAASg3C,cAAT,CAAwBzhD,KAAxB,EAA+Bgc,EAA/B,EAAmCC,EAAnC,EAAuCC,EAAvC,EAA2C6jC,GAA3C,EAAgDC,GAAhD,EAAqDC,GAArD,EAA0D;EAEtDvB,IAAAA,QAAQ,CAACoB,YAAT,CAAsB9/C,KAAtB,EAA6Bgc,EAA7B,EAAiCC,EAAjC,EAAqCC,EAArC,EAAyCikC,SAAzC;EAEAJ,IAAAA,GAAG,CAACh2C,cAAJ,CAAmBo2C,SAAS,CAAC//C,CAA7B;EACA4/C,IAAAA,GAAG,CAACj2C,cAAJ,CAAmBo2C,SAAS,CAAC9/C,CAA7B;EACA4/C,IAAAA,GAAG,CAACl2C,cAAJ,CAAmBo2C,SAAS,CAAC32C,CAA7B;EAEAu2C,IAAAA,GAAG,CAACxzC,GAAJ,CAAQyzC,GAAR,EAAazzC,GAAb,CAAiB0zC,GAAjB;EAEA,WAAOF,GAAG,CAACv2D,KAAJ,EAAP;EAEH;;EAED,WAASk4D,iBAAT,CAA2B7pC,MAA3B,EAAmC4S,QAAnC,EAA6Co2B,SAA7C,EAAwDpF,GAAxD,EAA6DppB,EAA7D,EAAiEC,EAAjE,EAAqEC,EAArE,EAAyEvyB,KAAzE,EAAgF;EAE5E,QAAI2hD,SAAJ;;EAEA,QAAIl3B,QAAQ,CAACI,IAAT,KAAkBzkB,QAAtB,EAAgC;EAE5Bu7C,MAAAA,SAAS,GAAGlG,GAAG,CAACmG,iBAAJ,CAAsBrvB,EAAtB,EAA0BD,EAA1B,EAA8BD,EAA9B,EAAkC,IAAlC,EAAwCryB,KAAxC,CAAZ;EAEH,KAJD,MAIO;EAEH2hD,MAAAA,SAAS,GAAGlG,GAAG,CAACmG,iBAAJ,CAAsBvvB,EAAtB,EAA0BC,EAA1B,EAA8BC,EAA9B,EAAkC9H,QAAQ,CAACI,IAAT,KAAkBxkB,UAApD,EAAgErG,KAAhE,CAAZ;EAEH;;EAED,QAAI2hD,SAAS,KAAK,IAAlB,EAAwB,OAAO,IAAP;EAExBH,IAAAA,sBAAsB,CAACz3D,IAAvB,CAA4BiW,KAA5B;EACAwhD,IAAAA,sBAAsB,CAACv1C,YAAvB,CAAoC4L,MAAM,CAAC7L,WAA3C;EAEA,QAAI6R,QAAQ,GAAGgjC,SAAS,CAACpF,GAAV,CAAchtD,MAAd,CAAqBorB,UAArB,CAAgC2nC,sBAAhC,CAAf;EAEA,QAAI3jC,QAAQ,GAAGgjC,SAAS,CAACnqC,IAArB,IAA6BmH,QAAQ,GAAGgjC,SAAS,CAAClqC,GAAtD,EAA2D,OAAO,IAAP;EAE3D,WAAO;EACHkH,MAAAA,QAAQ,EAAEA,QADP;EAEH7d,MAAAA,KAAK,EAAEwhD,sBAAsB,CAACh4D,KAAvB,EAFJ;EAGHquB,MAAAA,MAAM,EAAEA;EAHL,KAAP;EAMH;;EAED,WAASgqC,+BAAT,CAAyChqC,MAAzC,EAAiDgpC,SAAjD,EAA4DpF,GAA5D,EAAiEhjD,QAAjE,EAA2EqpD,EAA3E,EAA+ErtD,CAA/E,EAAkFG,CAAlF,EAAqFqG,CAArF,EAAwF;EAEpFi3B,IAAAA,EAAE,CAAC/Y,mBAAH,CAAuB1gB,QAAvB,EAAiChE,CAAjC;EACA09B,IAAAA,EAAE,CAAChZ,mBAAH,CAAuB1gB,QAAvB,EAAiC7D,CAAjC;EACAw9B,IAAAA,EAAE,CAACjZ,mBAAH,CAAuB1gB,QAAvB,EAAiCwC,CAAjC;EAEA,QAAI8mD,YAAY,GAAGL,iBAAiB,CAAC7pC,MAAD,EAASA,MAAM,CAAC4S,QAAhB,EAA0Bo2B,SAA1B,EAAqCpF,GAArC,EAA0CvpB,EAA1C,EAA8CC,EAA9C,EAAkDC,EAAlD,EAAsDmvB,iBAAtD,CAApC;;EAEA,QAAIQ,YAAJ,EAAkB;EAEd,UAAID,EAAJ,EAAQ;EAEJV,QAAAA,GAAG,CAACjoC,mBAAJ,CAAwB2oC,EAAxB,EAA4BrtD,CAA5B;EACA4sD,QAAAA,GAAG,CAACloC,mBAAJ,CAAwB2oC,EAAxB,EAA4BltD,CAA5B;EACA0sD,QAAAA,GAAG,CAACnoC,mBAAJ,CAAwB2oC,EAAxB,EAA4B7mD,CAA5B;EAEA8mD,QAAAA,YAAY,CAACD,EAAb,GAAkBL,cAAc,CAACF,iBAAD,EAAoBrvB,EAApB,EAAwBC,EAAxB,EAA4BC,EAA5B,EAAgCgvB,GAAhC,EAAqCC,GAArC,EAA0CC,GAA1C,CAAhC;EAEH;;EAED,UAAIjxB,IAAI,GAAG,IAAIiwB,KAAJ,CAAU7rD,CAAV,EAAaG,CAAb,EAAgBqG,CAAhB,CAAX;EACAyjD,MAAAA,QAAQ,CAACY,SAAT,CAAmBptB,EAAnB,EAAuBC,EAAvB,EAA2BC,EAA3B,EAA+B/B,IAAI,CAAChY,MAApC;EAEA0pC,MAAAA,YAAY,CAAC1xB,IAAb,GAAoBA,IAApB;EAEH;;EAED,WAAO0xB,YAAP;EAEH;;EAED,SAAO,SAAShB,OAAT,CAAiBF,SAAjB,EAA4BC,UAA5B,EAAwC;EAE3C,QAAIhoC,QAAQ,GAAG,KAAKA,QAApB;EACA,QAAI2R,QAAQ,GAAG,KAAKA,QAApB;EACA,QAAIze,WAAW,GAAG,KAAKA,WAAvB;EAEA,QAAIye,QAAQ,KAAKxgC,SAAjB,EAA4B,OANe;;EAU3C,QAAI6uB,QAAQ,CAACiF,cAAT,KAA4B,IAAhC,EAAsCjF,QAAQ,CAACkF,qBAAT;EAEtC9F,IAAAA,MAAM,CAACnuB,IAAP,CAAY+uB,QAAQ,CAACiF,cAArB;EACA7F,IAAAA,MAAM,CAACjM,YAAP,CAAoBD,WAApB;EAEA,QAAI60C,SAAS,CAACpF,GAAV,CAActjC,gBAAd,CAA+BD,MAA/B,MAA2C,KAA/C,EAAsD,OAfX;;EAmB3C8oC,IAAAA,aAAa,CAACj1C,UAAd,CAAyBC,WAAzB;EACAyvC,IAAAA,GAAG,CAAC1xD,IAAJ,CAAS82D,SAAS,CAACpF,GAAnB,EAAwBxvC,YAAxB,CAAqC+0C,aAArC,EApB2C;;EAwB3C,QAAIloC,QAAQ,CAAC8W,WAAT,KAAyB,IAA7B,EAAmC;EAE/B,UAAI6rB,GAAG,CAAC39B,aAAJ,CAAkBhF,QAAQ,CAAC8W,WAA3B,MAA4C,KAAhD,EAAuD;EAE1D;;EAED,QAAImyB,YAAJ;;EAEA,QAAIjpC,QAAQ,CAACG,gBAAb,EAA+B;EAE3B,UAAIxkB,CAAJ,EAAOG,CAAP,EAAUqG,CAAV;EACA,UAAI/U,KAAK,GAAG4yB,QAAQ,CAAC5yB,KAArB;EACA,UAAIuS,QAAQ,GAAGqgB,QAAQ,CAACI,UAAT,CAAoBzgB,QAAnC;EACA,UAAIqpD,EAAE,GAAGhpC,QAAQ,CAACI,UAAT,CAAoB4oC,EAA7B;EACA,UAAIz8D,CAAJ,EAAOgM,CAAP;;EAEA,UAAInL,KAAK,KAAK,IAAd,EAAoB;EAEhB;EAEA,aAAKb,CAAC,GAAG,CAAJ,EAAOgM,CAAC,GAAGnL,KAAK,CAACkvB,KAAtB,EAA6B/vB,CAAC,GAAGgM,CAAjC,EAAoChM,CAAC,IAAI,CAAzC,EAA4C;EAExCoP,UAAAA,CAAC,GAAGvO,KAAK,CAAC8nB,IAAN,CAAW3oB,CAAX,CAAJ;EACAuP,UAAAA,CAAC,GAAG1O,KAAK,CAAC8nB,IAAN,CAAW3oB,CAAC,GAAG,CAAf,CAAJ;EACA4V,UAAAA,CAAC,GAAG/U,KAAK,CAAC8nB,IAAN,CAAW3oB,CAAC,GAAG,CAAf,CAAJ;EAEA08D,UAAAA,YAAY,GAAGF,+BAA+B,CAAC,IAAD,EAAOhB,SAAP,EAAkBpF,GAAlB,EAAuBhjD,QAAvB,EAAiCqpD,EAAjC,EAAqCrtD,CAArC,EAAwCG,CAAxC,EAA2CqG,CAA3C,CAA9C;;EAEA,cAAI8mD,YAAJ,EAAkB;EAEdA,YAAAA,YAAY,CAACC,SAAb,GAAyBl9D,IAAI,CAACqE,KAAL,CAAW9D,CAAC,GAAG,CAAf,CAAzB,CAFc;;EAGdy7D,YAAAA,UAAU,CAAC79D,IAAX,CAAgB8+D,YAAhB;EAEH;EAEJ;EAEJ,OArBD,MAqBO,IAAItpD,QAAQ,KAAKxO,SAAjB,EAA4B;EAE/B;EAEA,aAAK5E,CAAC,GAAG,CAAJ,EAAOgM,CAAC,GAAGoH,QAAQ,CAAC2c,KAAzB,EAAgC/vB,CAAC,GAAGgM,CAApC,EAAuChM,CAAC,IAAI,CAA5C,EAA+C;EAE3CoP,UAAAA,CAAC,GAAGpP,CAAJ;EACAuP,UAAAA,CAAC,GAAGvP,CAAC,GAAG,CAAR;EACA4V,UAAAA,CAAC,GAAG5V,CAAC,GAAG,CAAR;EAEA08D,UAAAA,YAAY,GAAGF,+BAA+B,CAAC,IAAD,EAAOhB,SAAP,EAAkBpF,GAAlB,EAAuBhjD,QAAvB,EAAiCqpD,EAAjC,EAAqCrtD,CAArC,EAAwCG,CAAxC,EAA2CqG,CAA3C,CAA9C;;EAEA,cAAI8mD,YAAJ,EAAkB;EAEdA,YAAAA,YAAY,CAACC,SAAb,GAAyBl9D,IAAI,CAACqE,KAAL,CAAW9D,CAAC,GAAG,CAAf,CAAzB,CAFc;;EAGdy7D,YAAAA,UAAU,CAAC79D,IAAX,CAAgB8+D,YAAhB;EAEH;EAEJ;EAEJ;EAEJ,KApDD,MAoDO,IAAIjpC,QAAQ,CAACC,UAAb,EAAyB;EAE5B,UAAIkpC,GAAJ,EAASC,GAAT,EAAcC,GAAd;EACA,UAAIC,eAAe,GAAGz/D,KAAK,CAAC0B,OAAN,CAAcomC,QAAd,CAAtB;EAEA,UAAIzR,QAAQ,GAAGF,QAAQ,CAACE,QAAxB;EACA,UAAIoX,KAAK,GAAGtX,QAAQ,CAACsX,KAArB;EACA,UAAIX,GAAJ;EAEA,UAAIa,aAAa,GAAGxX,QAAQ,CAACwX,aAAT,CAAuB,CAAvB,CAApB;EACA,UAAIA,aAAa,CAACnrC,MAAd,GAAuB,CAA3B,EAA8BsqC,GAAG,GAAGa,aAAN;;EAE9B,WAAK,IAAI58B,CAAC,GAAG,CAAR,EAAW2uD,EAAE,GAAGjyB,KAAK,CAACjrC,MAA3B,EAAmCuO,CAAC,GAAG2uD,EAAvC,EAA2C3uD,CAAC,EAA5C,EAAgD;EAE5C,YAAI28B,IAAI,GAAGD,KAAK,CAAC18B,CAAD,CAAhB;EACA,YAAI4uD,YAAY,GAAGF,eAAe,GAAG33B,QAAQ,CAAC4F,IAAI,CAACF,aAAN,CAAX,GAAkC1F,QAApE;EAEA,YAAI63B,YAAY,KAAKr4D,SAArB,EAAgC;EAEhCg4D,QAAAA,GAAG,GAAGjpC,QAAQ,CAACqX,IAAI,CAAC57B,CAAN,CAAd;EACAytD,QAAAA,GAAG,GAAGlpC,QAAQ,CAACqX,IAAI,CAACz7B,CAAN,CAAd;EACAutD,QAAAA,GAAG,GAAGnpC,QAAQ,CAACqX,IAAI,CAACp1B,CAAN,CAAd;;EAEA,YAAIqnD,YAAY,CAACC,YAAb,KAA8B,IAAlC,EAAwC;EAEpC,cAAIA,YAAY,GAAGzpC,QAAQ,CAACypC,YAA5B;EACA,cAAIC,eAAe,GAAG,KAAKC,qBAA3B;EAEAvwB,UAAAA,EAAE,CAAC54B,GAAH,CAAO,CAAP,EAAU,CAAV,EAAa,CAAb;EACA64B,UAAAA,EAAE,CAAC74B,GAAH,CAAO,CAAP,EAAU,CAAV,EAAa,CAAb;EACA84B,UAAAA,EAAE,CAAC94B,GAAH,CAAO,CAAP,EAAU,CAAV,EAAa,CAAb;;EAEA,eAAK,IAAI0I,CAAC,GAAG,CAAR,EAAW0gD,EAAE,GAAGH,YAAY,CAACp9D,MAAlC,EAA0C6c,CAAC,GAAG0gD,EAA9C,EAAkD1gD,CAAC,EAAnD,EAAuD;EAEnD,gBAAI2gD,SAAS,GAAGH,eAAe,CAACxgD,CAAD,CAA/B;EAEA,gBAAI2gD,SAAS,KAAK,CAAlB,EAAqB;EAErB,gBAAIC,OAAO,GAAGL,YAAY,CAACvgD,CAAD,CAAZ,CAAgBgX,QAA9B;EAEAkZ,YAAAA,EAAE,CAACkuB,eAAH,CAAmBa,KAAK,CAACj2C,UAAN,CAAiB43C,OAAO,CAACvyB,IAAI,CAAC57B,CAAN,CAAxB,EAAkCwtD,GAAlC,CAAnB,EAA2DU,SAA3D;EACAxwB,YAAAA,EAAE,CAACiuB,eAAH,CAAmBc,KAAK,CAACl2C,UAAN,CAAiB43C,OAAO,CAACvyB,IAAI,CAACz7B,CAAN,CAAxB,EAAkCstD,GAAlC,CAAnB,EAA2DS,SAA3D;EACAvwB,YAAAA,EAAE,CAACguB,eAAH,CAAmBe,KAAK,CAACn2C,UAAN,CAAiB43C,OAAO,CAACvyB,IAAI,CAACp1B,CAAN,CAAxB,EAAkCknD,GAAlC,CAAnB,EAA2DQ,SAA3D;EAEH;;EAEDzwB,UAAAA,EAAE,CAAC3lB,GAAH,CAAO01C,GAAP;EACA9vB,UAAAA,EAAE,CAAC5lB,GAAH,CAAO21C,GAAP;EACA9vB,UAAAA,EAAE,CAAC7lB,GAAH,CAAO41C,GAAP;EAEAF,UAAAA,GAAG,GAAG/vB,EAAN;EACAgwB,UAAAA,GAAG,GAAG/vB,EAAN;EACAgwB,UAAAA,GAAG,GAAG/vB,EAAN;EAEH;;EAED2vB,QAAAA,YAAY,GAAGL,iBAAiB,CAAC,IAAD,EAAOY,YAAP,EAAqBzB,SAArB,EAAgCpF,GAAhC,EAAqCwG,GAArC,EAA0CC,GAA1C,EAA+CC,GAA/C,EAAoDZ,iBAApD,CAAhC;;EAEA,YAAIQ,YAAJ,EAAkB;EAEd,cAAItyB,GAAG,IAAIA,GAAG,CAAC/7B,CAAD,CAAd,EAAmB;EAEf,gBAAImvD,KAAK,GAAGpzB,GAAG,CAAC/7B,CAAD,CAAf;EACA0tD,YAAAA,GAAG,CAACr3D,IAAJ,CAAS84D,KAAK,CAAC,CAAD,CAAd;EACAxB,YAAAA,GAAG,CAACt3D,IAAJ,CAAS84D,KAAK,CAAC,CAAD,CAAd;EACAvB,YAAAA,GAAG,CAACv3D,IAAJ,CAAS84D,KAAK,CAAC,CAAD,CAAd;EAEAd,YAAAA,YAAY,CAACD,EAAb,GAAkBL,cAAc,CAACF,iBAAD,EAAoBU,GAApB,EAAyBC,GAAzB,EAA8BC,GAA9B,EAAmCf,GAAnC,EAAwCC,GAAxC,EAA6CC,GAA7C,CAAhC;EAEH;;EAEDS,UAAAA,YAAY,CAAC1xB,IAAb,GAAoBA,IAApB;EACA0xB,UAAAA,YAAY,CAACC,SAAb,GAAyBtuD,CAAzB;EACAotD,UAAAA,UAAU,CAAC79D,IAAX,CAAgB8+D,YAAhB;EAEH;EAEJ;EAEJ;EAEJ,GArKD;EAuKH,CA1Qc,EAAf;;MC1CMle;;;;;EACF,6BAAY/kB,UAAZ,EAAwB;EAAA;;EAAA;;EACpB;EACA,UAAK3xB,IAAL,GAAY,mBAAZ;EACA,UAAK0hB,KAAL,GAAa,IAAIR,OAAJ,CAAU,QAAV,CAAb;EACA,UAAKmpB,SAAL,GAAiB,CAAjB,CAJoB;;EAOpB,UAAK9C,MAAL,GAAc,KAAd;;EAGA,UAAKisB,SAAL,CAAe7hC,UAAf;;EAVoB;EAWvB;;;;2BAMIiU,QAAQ;EACT,kFAAWA,MAAX;;EACA,WAAKlkB,KAAL,CAAW9kB,IAAX,CAAgBgpC,MAAM,CAAClkB,KAAvB;EACA,WAAK2oB,SAAL,GAAiBzE,MAAM,CAACyE,SAAxB;EAEA,aAAO,IAAP;EAEH;;;6BAXyB;EACtB,aAAO,IAAP;EACH;;;;IAhB2BgpB;;ECOhC;;;;;;MAMMsC;;;;;EACF,gBAAYhqC,QAAZ,EAAsB2R,QAAtB,EAAgC;EAAA;;EAAA;;EAC5B;EACA,UAAKt9B,IAAL,GAAY,MAAZ;EAEA,UAAK2rB,QAAL,GAAgBA,QAAQ,KAAK7uB,SAAb,GAAyB6uB,QAAzB,GAAoC,IAAIgY,cAAJ,EAApD;EACA,UAAKrG,QAAL,GAAgBA,QAAQ,KAAKxgC,SAAb,GAAyBwgC,QAAzB,GAAoC,IAAIoZ,iBAAJ,CAAsB;EAAEh1B,MAAAA,KAAK,EAAE/pB,IAAI,CAACoE,MAAL,KAAgB;EAAzB,KAAtB,CAApD;EACA,UAAKmnD,QAAL,GAAgBnrC,SAAhB;;EAEA,QAAI,MAAKulB,QAAL,CAAcqoB,oBAAlB,EAAwC;EACpC,YAAKiQ,oBAAL;EACH;;EAV2B;EAY/B;;;;kCAMW98D,OAAO;EACf,WAAKoqD,QAAL,GAAgBpqD,KAAhB;EACH;;;6CAEsB;EACnB88D,MAAAA,qBAAoB,CAACv9D,IAArB,CAA0B,IAA1B;EACH;;;8BAEOq7D,WAAWC,YAAY;EAC3BC,MAAAA,UAAO,CAACv7D,IAAR,CAAa,IAAb,EAAmBq7D,SAAnB,EAA8BC,UAA9B;EACH;;;0BAdW;EACR,aAAO,IAAP;EACH;;;;IAjBcxH;;EAiCnB,IAAIyJ,qBAAoB,GAAI,YAAY;EAEpC,MAAI1uD,KAAK,GAAG,IAAIoW,OAAJ,EAAZ;EACA,MAAInW,GAAG,GAAG,IAAImW,OAAJ,EAAV;EAEA,SAAO,SAASs4C,oBAAT,GAAgC;EAEnC,QAAIjqC,QAAQ,GAAG,KAAKA,QAApB;;EAEA,QAAIA,QAAQ,CAACG,gBAAb,EAA+B;EAE3B;EAEA,UAAIH,QAAQ,CAAC5yB,KAAT,KAAmB,IAAvB,EAA6B;EAEzB,YAAI88D,iBAAiB,GAAGlqC,QAAQ,CAACI,UAAT,CAAoBzgB,QAA5C;EACA,YAAI+4B,aAAa,GAAG,EAApB;;EAEA,aAAK,IAAInsC,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG2xD,iBAAiB,CAAC5tC,KAAtC,EAA6C/vB,CAAC,GAAGgM,CAAjD,EAAoDhM,CAAC,IAAI,CAAzD,EAA4D;EAExDgP,UAAAA,KAAK,CAAC8kB,mBAAN,CAA0B6pC,iBAA1B,EAA6C39D,CAA7C;EACAiP,UAAAA,GAAG,CAAC6kB,mBAAJ,CAAwB6pC,iBAAxB,EAA2C39D,CAAC,GAAG,CAA/C;EAEAmsC,UAAAA,aAAa,CAACnsC,CAAD,CAAb,GAAoBA,CAAC,KAAK,CAAP,GAAY,CAAZ,GAAgBmsC,aAAa,CAACnsC,CAAC,GAAG,CAAL,CAAhD;EACAmsC,UAAAA,aAAa,CAACnsC,CAAC,GAAG,CAAL,CAAb,GAAuBmsC,aAAa,CAACnsC,CAAD,CAAb,GAAmBgP,KAAK,CAACwlB,UAAN,CAAiBvlB,GAAjB,CAA1C;EAEH;;EAEDwkB,QAAAA,QAAQ,CAACmY,YAAT,CAAsB,cAAtB,EAAsC,IAAI5B,sBAAJ,CAA2BmC,aAA3B,EAA0C,CAA1C,CAAtC;EAEH;EAEJ,KAvBD,MAuBO,IAAI1Y,QAAQ,CAACC,UAAb,EAAyB;EAE5B,UAAIC,QAAQ,GAAGF,QAAQ,CAACE,QAAxB;EACA,UAAIwY,aAAa,GAAG1Y,QAAQ,CAAC0Y,aAA7B;;EAEA,WAAK,IAAInsC,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG2nB,QAAQ,CAAC7zB,MAA7B,EAAqCE,CAAC,GAAGgM,CAAzC,EAA4ChM,CAAC,IAAI,CAAjD,EAAoD;EAEhDgP,QAAAA,KAAK,CAACtK,IAAN,CAAWivB,QAAQ,CAAC3zB,CAAD,CAAnB;EACAiP,QAAAA,GAAG,CAACvK,IAAJ,CAASivB,QAAQ,CAAC3zB,CAAC,GAAG,CAAL,CAAjB;EAEAmsC,QAAAA,aAAa,CAACnsC,CAAD,CAAb,GAAoBA,CAAC,KAAK,CAAP,GAAY,CAAZ,GAAgBmsC,aAAa,CAACnsC,CAAC,GAAG,CAAL,CAAhD;EACAmsC,QAAAA,aAAa,CAACnsC,CAAC,GAAG,CAAL,CAAb,GAAuBmsC,aAAa,CAACnsC,CAAD,CAAb,GAAmBgP,KAAK,CAACwlB,UAAN,CAAiBvlB,GAAjB,CAA1C;EAEH;EAGJ;;EAED,WAAO,IAAP;EAEH,GA/CD;EAiDH,CAtD0B,EAA3B;;EAyDA,IAAIysD,UAAO,GAAI,YAAY;EAEvB,MAAIC,aAAa,GAAG,IAAIvxC,OAAJ,EAApB;EACA,MAAIgsC,GAAG,GAAG,IAAID,GAAJ,EAAV;EACA,MAAItjC,MAAM,GAAG,IAAIqB,MAAJ,EAAb;EAEA,SAAO,SAASwnC,OAAT,CAAiBF,SAAjB,EAA4BC,UAA5B,EAAwC;EAE3C,QAAI9gC,SAAS,GAAG6gC,SAAS,CAACoC,aAA1B;EACA,QAAIC,WAAW,GAAGljC,SAAS,GAAGA,SAA9B;EAEA,QAAIlH,QAAQ,GAAG,KAAKA,QAApB;EACA,QAAI9M,WAAW,GAAG,KAAKA,WAAvB,CAN2C;;EAU3C,QAAI8M,QAAQ,CAACiF,cAAT,KAA4B,IAAhC,EAAsCjF,QAAQ,CAACkF,qBAAT;EAEtC9F,IAAAA,MAAM,CAACnuB,IAAP,CAAY+uB,QAAQ,CAACiF,cAArB;EACA7F,IAAAA,MAAM,CAACjM,YAAP,CAAoBD,WAApB;EAEA,QAAI60C,SAAS,CAACpF,GAAV,CAActjC,gBAAd,CAA+BD,MAA/B,MAA2C,KAA/C,EAAsD,OAfX;;EAmB3C8oC,IAAAA,aAAa,CAACj1C,UAAd,CAAyBC,WAAzB;EACAyvC,IAAAA,GAAG,CAAC1xD,IAAJ,CAAS82D,SAAS,CAACpF,GAAnB,EAAwBxvC,YAAxB,CAAqC+0C,aAArC;EAEA,QAAImC,MAAM,GAAG,IAAI14C,OAAJ,EAAb;EACA,QAAI24C,IAAI,GAAG,IAAI34C,OAAJ,EAAX;EACA,QAAI44C,YAAY,GAAG,IAAI54C,OAAJ,EAAnB;EACA,QAAI64C,QAAQ,GAAG,IAAI74C,OAAJ,EAAf;EACA,QAAI84C,IAAI,GAAI,CAAZ;;EAEA,QAAIzqC,QAAQ,CAACG,gBAAb,EAA+B;EAE3B,UAAI/yB,KAAK,GAAG4yB,QAAQ,CAAC5yB,KAArB;EACA,UAAIgzB,UAAU,GAAGJ,QAAQ,CAACI,UAA1B;EACA,UAAImY,SAAS,GAAGnY,UAAU,CAACzgB,QAAX,CAAoB5S,KAApC;;EAEA,UAAIK,KAAK,KAAK,IAAd,EAAoB;EAEhB,YAAIusC,OAAO,GAAGvsC,KAAK,CAACL,KAApB;;EAEA,aAAK,IAAIR,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGohC,OAAO,CAACttC,MAAR,GAAiB,CAArC,EAAwCE,CAAC,GAAGgM,CAA5C,EAA+ChM,CAAC,IAAIk+D,IAApD,EAA0D;EAEtD,cAAI9uD,CAAC,GAAGg+B,OAAO,CAACptC,CAAD,CAAf;EACA,cAAIuP,CAAC,GAAG69B,OAAO,CAACptC,CAAC,GAAG,CAAL,CAAf;EAEA89D,UAAAA,MAAM,CAACr1C,SAAP,CAAiBujB,SAAjB,EAA4B58B,CAAC,GAAG,CAAhC;EACA2uD,UAAAA,IAAI,CAACt1C,SAAL,CAAeujB,SAAf,EAA0Bz8B,CAAC,GAAG,CAA9B;EAEA,cAAI4uD,MAAM,GAAG/H,GAAG,CAACgI,mBAAJ,CAAwBN,MAAxB,EAAgCC,IAAhC,EAAsCE,QAAtC,EAAgDD,YAAhD,CAAb;EAEA,cAAIG,MAAM,GAAGN,WAAb,EAA0B;EAE1BI,UAAAA,QAAQ,CAACr3C,YAAT,CAAsB,KAAKD,WAA3B,EAZsD;;EActD,cAAI6R,QAAQ,GAAGgjC,SAAS,CAACpF,GAAV,CAAchtD,MAAd,CAAqBorB,UAArB,CAAgCypC,QAAhC,CAAf;EAEA,cAAIzlC,QAAQ,GAAGgjC,SAAS,CAACnqC,IAArB,IAA6BmH,QAAQ,GAAGgjC,SAAS,CAAClqC,GAAtD,EAA2D;EAE3DmqC,UAAAA,UAAU,CAAC79D,IAAX,CAAgB;EAEZ46B,YAAAA,QAAQ,EAAEA,QAFE;EAGZ;EACA;EACA7d,YAAAA,KAAK,EAAEqjD,YAAY,CAAC75D,KAAb,GAAqByiB,YAArB,CAAkC,KAAKD,WAAvC,CALK;EAMZ9lB,YAAAA,KAAK,EAAEb,CANK;EAOZgrC,YAAAA,IAAI,EAAE,IAPM;EAQZ2xB,YAAAA,SAAS,EAAE,IARC;EASZnqC,YAAAA,MAAM,EAAE;EATI,WAAhB;EAaH;EAEJ,OArCD,MAqCO;EAEH,aAAK,IAAIxyB,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGggC,SAAS,CAAClsC,MAAV,GAAmB,CAAnB,GAAuB,CAA3C,EAA8CE,CAAC,GAAGgM,CAAlD,EAAqDhM,CAAC,IAAIk+D,IAA1D,EAAgE;EAE5DJ,UAAAA,MAAM,CAACr1C,SAAP,CAAiBujB,SAAjB,EAA4B,IAAIhsC,CAAhC;EACA+9D,UAAAA,IAAI,CAACt1C,SAAL,CAAeujB,SAAf,EAA0B,IAAIhsC,CAAJ,GAAQ,CAAlC;EAEA,cAAIm+D,MAAM,GAAG/H,GAAG,CAACgI,mBAAJ,CAAwBN,MAAxB,EAAgCC,IAAhC,EAAsCE,QAAtC,EAAgDD,YAAhD,CAAb;EAEA,cAAIG,MAAM,GAAGN,WAAb,EAA0B;EAE1BI,UAAAA,QAAQ,CAACr3C,YAAT,CAAsB,KAAKD,WAA3B,EAT4D;;EAW5D,cAAI6R,QAAQ,GAAGgjC,SAAS,CAACpF,GAAV,CAAchtD,MAAd,CAAqBorB,UAArB,CAAgCypC,QAAhC,CAAf;EAEA,cAAIzlC,QAAQ,GAAGgjC,SAAS,CAACnqC,IAArB,IAA6BmH,QAAQ,GAAGgjC,SAAS,CAAClqC,GAAtD,EAA2D;EAE3DmqC,UAAAA,UAAU,CAAC79D,IAAX,CAAgB;EAEZ46B,YAAAA,QAAQ,EAAEA,QAFE;EAGZ;EACA;EACA7d,YAAAA,KAAK,EAAEqjD,YAAY,CAAC75D,KAAb,GAAqByiB,YAArB,CAAkC,KAAKD,WAAvC,CALK;EAMZ9lB,YAAAA,KAAK,EAAEb,CANK;EAOZgrC,YAAAA,IAAI,EAAE,IAPM;EAQZ2xB,YAAAA,SAAS,EAAE,IARC;EASZnqC,YAAAA,MAAM,EAAE;EATI,WAAhB;EAaH;EAEJ;EAEJ,KA7ED,MA6EO,IAAIiB,QAAQ,CAACC,UAAb,EAAyB;EAE5B,UAAIC,QAAQ,GAAGF,QAAQ,CAACE,QAAxB;EACA,UAAI0qC,UAAU,GAAG1qC,QAAQ,CAAC7zB,MAA1B;;EAEA,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq+D,UAAU,GAAG,CAAjC,EAAoCr+D,CAAC,IAAIk+D,IAAzC,EAA+C;EAE3C,YAAIC,MAAM,GAAG/H,GAAG,CAACgI,mBAAJ,CAAwBzqC,QAAQ,CAAC3zB,CAAD,CAAhC,EAAqC2zB,QAAQ,CAAC3zB,CAAC,GAAG,CAAL,CAA7C,EAAsDi+D,QAAtD,EAAgED,YAAhE,CAAb;EAEA,YAAIG,MAAM,GAAGN,WAAb,EAA0B;EAE1BI,QAAAA,QAAQ,CAACr3C,YAAT,CAAsB,KAAKD,WAA3B,EAN2C;;EAQ3C,YAAI6R,QAAQ,GAAGgjC,SAAS,CAACpF,GAAV,CAAchtD,MAAd,CAAqBorB,UAArB,CAAgCypC,QAAhC,CAAf;EAEA,YAAIzlC,QAAQ,GAAGgjC,SAAS,CAACnqC,IAArB,IAA6BmH,QAAQ,GAAGgjC,SAAS,CAAClqC,GAAtD,EAA2D;EAE3DmqC,QAAAA,UAAU,CAAC79D,IAAX,CAAgB;EAEZ46B,UAAAA,QAAQ,EAAEA,QAFE;EAGZ;EACA;EACA7d,UAAAA,KAAK,EAAEqjD,YAAY,CAAC75D,KAAb,GAAqByiB,YAArB,CAAkC,KAAKD,WAAvC,CALK;EAMZ9lB,UAAAA,KAAK,EAAEb,CANK;EAOZgrC,UAAAA,IAAI,EAAE,IAPM;EAQZ2xB,UAAAA,SAAS,EAAE,IARC;EASZnqC,UAAAA,MAAM,EAAE;EATI,SAAhB;EAaH;EAEJ;EAEJ,GA3ID;EA6IH,CAnJc,EAAf;;MCzGM8rC;;;;;EACF,qCAAc;EAAA;;EAAA;;EAEV;EAEA,UAAKx2D,IAAL,GAAY,yBAAZ;EACA,UAAKw4C,iBAAL,GAAyB17C,SAAzB;EACA,UAAKsmD,yBAAL,GAAiC,IAAjC;EANU;EAQb;;;;2BAEIxd,QAAQ;EAET,wFAAWA,MAAX;;EAEA,WAAK4S,iBAAL,GAAyB5S,MAAM,CAAC4S,iBAAhC;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAKie,YAAT,GAAwB75D,IAAxB,CAA6B,IAA7B,CAAP;EAEH;;;;IAzBiC+mC;;MCDhC+yB;;;EACF,6BAAYh+D,KAAZ,EAAmBwuD,MAAnB,EAA2B;EAAA;;EAEvB,SAAKxuD,KAAL,GAAaA,KAAb;EACA,SAAKwuD,MAAL,GAAcA,MAAd;EACA,SAAKj/B,KAAL,GAAavvB,KAAK,KAAKoE,SAAV,GAAsBpE,KAAK,CAACV,MAAN,GAAekvD,MAArC,GAA8C,CAA3D;EAEA,SAAK3nB,OAAL,GAAe,KAAf;EACA,SAAKW,WAAL,GAAmB;EAAE72B,MAAAA,MAAM,EAAE,CAAV;EAAa4e,MAAAA,KAAK,EAAE,CAAE;EAAtB,KAAnB;EAEA,SAAKnQ,OAAL,GAAe,CAAf;EAEA,SAAK6+C,mBAAL,GAA2B,IAA3B;EAEH;;;;yCAKkB;;;+BAEVj+D,OAAO;EAEZ,UAAIlD,KAAK,CAAC0B,OAAN,CAAcwB,KAAd,CAAJ,EAA0B;EAEtB,cAAM,IAAIP,SAAJ,CAAc,iDAAd,CAAN;EAEH;;EAED,WAAK8vB,KAAL,GAAavvB,KAAK,KAAKoE,SAAV,GAAsBpE,KAAK,CAACV,MAAN,GAAe,KAAKkvD,MAA1C,GAAmD,CAAhE;EACA,WAAKxuD,KAAL,GAAaA,KAAb;EAEA,aAAO,IAAP;EAEH;;;iCAEUI,OAAO;EAEd,WAAKymC,OAAL,GAAezmC,KAAf;EAEA,aAAO,IAAP;EAEH;;;2BAEI8sC,QAAQ;EAET,WAAKltC,KAAL,GAAa,IAAIktC,MAAM,CAACltC,KAAP,CAAaqE,WAAjB,CAA6B6oC,MAAM,CAACltC,KAApC,CAAb;EACA,WAAKuvB,KAAL,GAAa2d,MAAM,CAAC3d,KAApB;EACA,WAAKi/B,MAAL,GAActhB,MAAM,CAACshB,MAArB;EACA,WAAK3nB,OAAL,GAAeqG,MAAM,CAACrG,OAAtB;EAEA,aAAO,IAAP;EAEH;;;6BAEMq3B,QAAQh2C,WAAWi2C,QAAQ;EAE9BD,MAAAA,MAAM,IAAI,KAAK1P,MAAf;EACA2P,MAAAA,MAAM,IAAIj2C,SAAS,CAACsmC,MAApB;;EAEA,WAAK,IAAIhvD,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG,KAAKgjD,MAAzB,EAAiChvD,CAAC,GAAGgM,CAArC,EAAwChM,CAAC,EAAzC,EAA6C;EAEzC,aAAKQ,KAAL,CAAWk+D,MAAM,GAAG1+D,CAApB,IAAyB0oB,SAAS,CAACloB,KAAV,CAAgBm+D,MAAM,GAAG3+D,CAAzB,CAAzB;EAEH;;EAED,aAAO,IAAP;EAEH;;;0BAEGY,OAAOuQ,QAAQ;EAEf,UAAIA,MAAM,KAAKvM,SAAf,EAA0BuM,MAAM,GAAG,CAAT;EAE1B,WAAK3Q,KAAL,CAAWyT,GAAX,CAAerT,KAAf,EAAsBuQ,MAAtB;EAEA,aAAO,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAI,KAAKtM,WAAT,GAAuBH,IAAvB,CAA4B,IAA5B,CAAP;EAEH;;;+BAEQutD,UAAU;EAEf,WAAKrqB,gBAAL,GAAwBqqB,QAAxB;EAEA,aAAO,IAAP;EAEH;;;wBA7EerxD,OAAO;EACnB,UAAIA,KAAK,KAAK,IAAd,EAAoB,KAAKgf,OAAL;EACvB;;;;;;MCfCg/C;;;;;EACF,sCAAYp+D,KAAZ,EAAmBwuD,MAAnB,EAA2BxuB,gBAA3B,EAA6C;EAAA;;EAAA;;EAEzC,oGAAMhgC,KAAN,EAAawuD,MAAb;EAEA,UAAKxuB,gBAAL,GAAwBA,gBAAgB,IAAI,CAA5C;EACA,UAAKyuB,4BAAL,GAAoC,IAApC;EALyC;EAO5C;;;;2BAEIvhB,QAAQ;EAET,2FAAWA,MAAX;;EAEA,WAAKlN,gBAAL,GAAwBkN,MAAM,CAAClN,gBAA/B;EAEA,aAAO,IAAP;EAEH;;;;IAlBoCg+B;;MCHnCK;;;EACF,sCAAYC,iBAAZ,EAA+B91B,QAA/B,EAAyC73B,MAAzC,EAAiDzL,UAAjD,EAA6D;EAAA;;EAEzD,SAAK6B,IAAL,GAAYu3D,iBAAZ;EACA,SAAK91B,QAAL,GAAgBA,QAAhB;EACA,SAAK73B,MAAL,GAAcA,MAAd;EAEA,SAAKzL,UAAL,GAAkBA,UAAU,KAAK,IAAjC;EAEA,SAAKyiC,4BAAL,GAAoC,IAApC;EAEH;;;;2BASItnC,OAAOka,GAAG;EAEX,WAAKxT,IAAL,CAAU/G,KAAV,CAAgBK,KAAK,GAAG,KAAK0G,IAAL,CAAUynD,MAAlB,GAA2B,KAAK79C,MAAhD,IAA0D4J,CAA1D;EAEA,aAAO,IAAP;EAEH;;;2BAEIla,OAAOma,GAAG;EAEX,WAAKzT,IAAL,CAAU/G,KAAV,CAAgBK,KAAK,GAAG,KAAK0G,IAAL,CAAUynD,MAAlB,GAA2B,KAAK79C,MAAhC,GAAyC,CAAzD,IAA8D6J,CAA9D;EAEA,aAAO,IAAP;EAEH;;;2BAEIna,OAAOsjB,GAAG;EAEX,WAAK5c,IAAL,CAAU/G,KAAV,CAAgBK,KAAK,GAAG,KAAK0G,IAAL,CAAUynD,MAAlB,GAA2B,KAAK79C,MAAhC,GAAyC,CAAzD,IAA8DgT,CAA9D;EAEA,aAAO,IAAP;EAEH;;;2BAEItjB,OAAOujB,GAAG;EAEX,WAAK7c,IAAL,CAAU/G,KAAV,CAAgBK,KAAK,GAAG,KAAK0G,IAAL,CAAUynD,MAAlB,GAA2B,KAAK79C,MAAhC,GAAyC,CAAzD,IAA8DiT,CAA9D;EAEA,aAAO,IAAP;EAEH;;;2BAEIvjB,OAAO;EAER,aAAO,KAAK0G,IAAL,CAAU/G,KAAV,CAAgBK,KAAK,GAAG,KAAK0G,IAAL,CAAUynD,MAAlB,GAA2B,KAAK79C,MAAhD,CAAP;EAEH;;;2BAEItQ,OAAO;EAER,aAAO,KAAK0G,IAAL,CAAU/G,KAAV,CAAgBK,KAAK,GAAG,KAAK0G,IAAL,CAAUynD,MAAlB,GAA2B,KAAK79C,MAAhC,GAAyC,CAAzD,CAAP;EAEH;;;2BAEItQ,OAAO;EAER,aAAO,KAAK0G,IAAL,CAAU/G,KAAV,CAAgBK,KAAK,GAAG,KAAK0G,IAAL,CAAUynD,MAAlB,GAA2B,KAAK79C,MAAhC,GAAyC,CAAzD,CAAP;EAEH;;;2BAEItQ,OAAO;EAER,aAAO,KAAK0G,IAAL,CAAU/G,KAAV,CAAgBK,KAAK,GAAG,KAAK0G,IAAL,CAAUynD,MAAlB,GAA2B,KAAK79C,MAAhC,GAAyC,CAAzD,CAAP;EAEH;;;4BAEKtQ,OAAOka,GAAGC,GAAG;EAEf,WAAKmuB,IAAL,CAAUtoC,KAAV,EAAiBka,CAAjB;EACA,WAAKquB,IAAL,CAAUvoC,KAAV,EAAiBma,CAAjB;EAEA,aAAO,IAAP;EAEH;;;6BAEMna,OAAOka,GAAGC,GAAGmJ,GAAG;EAEnB,WAAKglB,IAAL,CAAUtoC,KAAV,EAAiBka,CAAjB;EACA,WAAKquB,IAAL,CAAUvoC,KAAV,EAAiBma,CAAjB;EACA,WAAKsuB,IAAL,CAAUzoC,KAAV,EAAiBsjB,CAAjB;EAEA,aAAO,IAAP;EAEH;;;8BAEOtjB,OAAOka,GAAGC,GAAGmJ,GAAGC,GAAG;EAEvB,WAAK+kB,IAAL,CAAUtoC,KAAV,EAAiBka,CAAjB;EACA,WAAKquB,IAAL,CAAUvoC,KAAV,EAAiBma,CAAjB;EACA,WAAKsuB,IAAL,CAAUzoC,KAAV,EAAiBsjB,CAAjB;EACA,WAAKolB,IAAL,CAAU1oC,KAAV,EAAiBujB,CAAjB;EAEA,aAAO,IAAP;EAEH;;;0BA5FW;EACR,aAAO,KAAK7c,IAAL,CAAUwoB,KAAjB;EACH;;;0BAEW;EACR,aAAO,KAAKxoB,IAAL,CAAU/G,KAAjB;EACH;;;;;;MCVCu+D;;;;;EACF,kCAAc;EAAA;;EAAA;;EACV;EACA,UAAKj3D,IAAL,GAAY,sBAAZ;EAEA,QAAIkkC,SAAS,GAAG,CAAC,CAAE,CAAH,EAAM,CAAN,EAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,EAAqB,CAAE,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC,CAAE,CAA3C,EAA8C,CAA9C,EAAiD,CAAjD,EAAoD,CAApD,EAAuD,CAAvD,EAA0D,CAA1D,EAA6D,CAAE,CAA/D,EAAkE,CAAE,CAApE,EAAuE,CAAvE,EAA0E,CAA1E,EAA6E,CAAE,CAA/E,EAAkF,CAAlF,CAAhB;EACA,QAAI5B,GAAG,GAAG,CAAC,CAAE,CAAH,EAAM,CAAN,EAAS,CAAT,EAAY,CAAZ,EAAe,CAAE,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAAE,CAA/B,EAAkC,CAAE,CAApC,EAAuC,CAAvC,EAA0C,CAAE,CAA5C,EAA+C,CAAE,CAAjD,EAAoD,CAAE,CAAtD,EAAyD,CAAzD,EAA4D,CAAE,CAA9D,CAAV;EACA,QAAIvpC,KAAK,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,EAA8C,CAA9C,EAAiD,CAAjD,EAAoD,CAApD,CAAZ;;EAEA,UAAKgrC,QAAL,CAAchrC,KAAd;;EACA,UAAK+qC,YAAL,CAAkB,UAAlB,EAA8B,IAAI5B,sBAAJ,CAA2BgC,SAA3B,EAAsC,CAAtC,CAA9B;;EACA,UAAKJ,YAAL,CAAkB,IAAlB,EAAwB,IAAI5B,sBAAJ,CAA2BI,GAA3B,EAAgC,CAAhC,CAAxB;;EAEA,UAAK40B,sBAAL,GAA8B,IAA9B;EAZU;EAab;;;;kCAEWz4C,QAAQ;EAEhB,UAAIvX,KAAK,GAAG,KAAK6kB,UAAL,CAAgBorC,aAA5B;EACA,UAAIhwD,GAAG,GAAG,KAAK4kB,UAAL,CAAgBqrC,WAA1B;;EAEA,UAAIlwD,KAAK,KAAKpK,SAAd,EAAyB;EAErB2hB,QAAAA,MAAM,CAAC44C,sBAAP,CAA8BnwD,KAA9B;EAEAuX,QAAAA,MAAM,CAAC44C,sBAAP,CAA8BlwD,GAA9B;EAEAD,QAAAA,KAAK,CAACzH,IAAN,CAAWkmC,WAAX,GAAyB,IAAzB;EAEH;;EAED,UAAI,KAAKlD,WAAL,KAAqB,IAAzB,EAA+B;EAE3B,aAAK60B,kBAAL;EAEH;;EAED,UAAI,KAAK1mC,cAAL,KAAwB,IAA5B,EAAkC;EAE9B,aAAKC,qBAAL;EAEH;;EAED,aAAO,IAAP;EAEH;;;mCAEYn4B,OAAO;EAEhB,UAAI6+D,cAAc,GAAGC,YAAY,CAAC9+D,KAAD,CAAjC,CAFgB;;EAIhB,WAAKorC,YAAL,CAAkB,eAAlB,EAAmC,IAAIizB,0BAAJ,CAA+BQ,cAA/B,EAA+C,CAA/C,EAAkD,CAAlD,CAAnC,EAJgB;;EAKhB,WAAKzzB,YAAL,CAAkB,aAAlB,EAAiC,IAAIizB,0BAAJ,CAA+BQ,cAA/B,EAA+C,CAA/C,EAAkD,CAAlD,CAAjC,EALgB;EAOhB;;EACA,UAAI,KAAK1qD,YAAL,CAAkB,oBAAlB,MAA4C/P,SAA5C,IACA,KAAK+P,YAAL,CAAkB,kBAAlB,MAA0C/P,SAD9C,EACyD;EAErD,YAAIoP,MAAM,GAAGxT,KAAK,CAACpC,GAAN,CAAU,YAAM;EACzB,iBAAO,GAAP;EACH,SAFY,CAAb;;EAGAmhE,QAAAA,UAAS,CAACp/D,IAAV,CAAe,IAAf,EAAqB6T,MAArB;EACH;;EAED,WAAKorD,kBAAL;EACA,WAAKzmC,qBAAL;EAEA,aAAO,IAAP;EAEH;;;gCAESn4B,OAAO;EACb,aAAO++D,UAAS,CAACp/D,IAAV,CAAe,IAAf,EAAqBK,KAArB,CAAP;EACH;;;2CAEoB;EAEjB4+D,MAAAA,mBAAkB,CAACj/D,IAAnB,CAAwB,IAAxB;EAEH;;;8CAEuB;EACpBw4B,MAAAA,wBAAqB,CAACx4B,IAAtB,CAA2B,IAA3B;EACH;;;;IAnF8Bm+D;;EAuFnC,IAAIiB,UAAS,GAAG,SAAZA,UAAY,CAAU/+D,KAAV,EAAiB;EAE7B,MAAIg/D,mBAAmB,GAAGF,YAAY,CAAC9+D,KAAD,CAAtC;EAEA,OAAKorC,YAAL,CAAkB,oBAAlB,EAAwC,IAAIizB,0BAAJ,CAA+BW,mBAA/B,EAAoD,CAApD,EAAuD,CAAvD,CAAxC,EAJ6B;;EAK7B,OAAK5zB,YAAL,CAAkB,kBAAlB,EAAsC,IAAIizB,0BAAJ,CAA+BW,mBAA/B,EAAoD,CAApD,EAAuD,CAAvD,CAAtC,EAL6B;;EAO7B,SAAO,IAAP;EACH,CARD;;EAUA,IAAIJ,mBAAkB,GAAI,YAAY;EAElC,MAAIhuD,GAAG,GAAG,IAAIwgB,IAAJ,EAAV;EAEA,SAAO,SAASwtC,kBAAT,GAA8B;EAEjC,QAAI,KAAK70B,WAAL,KAAqB,IAAzB,EAA+B;EAE3B,WAAKA,WAAL,GAAmB,IAAI3Y,IAAJ,EAAnB;EAEH;;EAED,QAAI5iB,KAAK,GAAG,KAAK6kB,UAAL,CAAgBorC,aAA5B;EACA,QAAIhwD,GAAG,GAAG,KAAK4kB,UAAL,CAAgBqrC,WAA1B;;EAEA,QAAIlwD,KAAK,KAAKpK,SAAV,IAAuBqK,GAAG,KAAKrK,SAAnC,EAA8C;EAE1C,WAAK2lC,WAAL,CAAiBqC,sBAAjB,CAAwC59B,KAAxC;EAEAoC,MAAAA,GAAG,CAACw7B,sBAAJ,CAA2B39B,GAA3B;EAEA,WAAKs7B,WAAL,CAAiBk1B,KAAjB,CAAuBruD,GAAvB;EAEH;EAEJ,GArBD;EAuBH,CA3BwB,EAAzB;;EA6BA,IAAIunB,wBAAqB,GAAI,YAAY;EAErC,MAAIjR,MAAM,GAAG,IAAItC,OAAJ,EAAb;EAEA,SAAO,SAASuT,qBAAT,GAAiC;EAEpC,QAAI,KAAKD,cAAL,KAAwB,IAA5B,EAAkC;EAE9B,WAAKA,cAAL,GAAsB,IAAIxE,MAAJ,EAAtB;EAEH;;EAED,QAAI,KAAKqW,WAAL,KAAqB,IAAzB,EAA+B;EAE3B,WAAK60B,kBAAL;EAEH;;EAED,QAAIpwD,KAAK,GAAG,KAAK6kB,UAAL,CAAgBorC,aAA5B;EACA,QAAIhwD,GAAG,GAAG,KAAK4kB,UAAL,CAAgBqrC,WAA1B;;EAEA,QAAIlwD,KAAK,KAAKpK,SAAV,IAAuBqK,GAAG,KAAKrK,SAAnC,EAA8C;EAE1C,UAAI0tB,MAAM,GAAG,KAAKoG,cAAL,CAAoBpG,MAAjC;EAEA,WAAKiY,WAAL,CAAiBpW,SAAjB,CAA2B7B,MAA3B;EAEA,UAAIiC,WAAW,GAAG,CAAlB;;EAEA,WAAK,IAAIv0B,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAGoE,KAAK,CAAC+gB,KAA3B,EAAkC/vB,CAAC,GAAG4K,EAAtC,EAA0C5K,CAAC,EAA3C,EAA+C;EAE3C0nB,QAAAA,MAAM,CAACoM,mBAAP,CAA2B9kB,KAA3B,EAAkChP,CAAlC;EACAu0B,QAAAA,WAAW,GAAG90B,IAAI,CAACsC,GAAL,CAASwyB,WAAT,EAAsBjC,MAAM,CAACvK,iBAAP,CAAyBL,MAAzB,CAAtB,CAAd;EAEAA,QAAAA,MAAM,CAACoM,mBAAP,CAA2B7kB,GAA3B,EAAgCjP,CAAhC;EACAu0B,QAAAA,WAAW,GAAG90B,IAAI,CAACsC,GAAL,CAASwyB,WAAT,EAAsBjC,MAAM,CAACvK,iBAAP,CAAyBL,MAAzB,CAAtB,CAAd;EAEH;;EAED,WAAKgR,cAAL,CAAoB3e,MAApB,GAA6Bta,IAAI,CAACklB,IAAL,CAAU4P,WAAV,CAA7B;;EAEA,UAAIpzB,KAAK,CAAC,KAAKu3B,cAAL,CAAoB3e,MAArB,CAAT,EAAuC;EAEnCwL,QAAAA,OAAO,CAAC8E,KAAR,CAAc,iIAAd,EAAiJ,IAAjJ;EAEH;EAEJ;EAEJ,GA7CD;EA+CH,CAnD2B,EAA5B;;EAsDA,SAASi1C,YAAT,CAAsB9+D,KAAtB,EAA6B;EAEzB,MAAIk/D,SAAJ;;EAEA,MAAIl/D,KAAK,YAAY8nC,YAArB,EAAmC;EAE/Bo3B,IAAAA,SAAS,GAAGl/D,KAAZ;EAEH,GAJD,MAIO,IAAIlD,KAAK,CAAC0B,OAAN,CAAcwB,KAAd,CAAJ,EAA0B;EAE7Bk/D,IAAAA,SAAS,GAAG,IAAIp3B,YAAJ,CAAiB9nC,KAAjB,CAAZ;EAEH;;EAED,SAAO,IAAIo+D,0BAAJ,CAA+Bc,SAA/B,EAA0C,CAA1C,EAA6C,CAA7C,CAAP;EAEH;;MC1MKC;;;;;EACF,0BAAc;EAAA;;EAAA;;EACV;EACA,UAAK73D,IAAL,GAAY,cAAZ;EACA,UAAK83D,cAAL,GAAsB,IAAtB;EAHU;EAIb;;;;mCAEYp/D,OAAO;EAEhB,UAAIga,MAAM,GAAGqlD,aAAa,CAACr/D,KAAD,CAA1B;;EAEA,qFAAmBga,MAAnB;;EAEA,aAAO,IAAP;EAEH;;;gCAESha,OAAO;EAEb,UAAIwT,MAAM,GAAG6rD,aAAa,CAACr/D,KAAD,CAA1B;;EAEA,kFAAgBwT,MAAhB;;EAEA,aAAO,IAAP;EAEH;;;+BAEQ8hB,MAAM;EAEX,UAAIrC,QAAQ,GAAGqC,IAAI,CAACrC,QAApB;;EAEA,UAAIA,QAAQ,CAACC,UAAb,EAAyB;EAErB,aAAKosC,YAAL,CAAkBrsC,QAAQ,CAACE,QAA3B;EAEH,OAJD,MAIO,IAAIF,QAAQ,CAACG,gBAAb,EAA+B;EAElC,aAAKksC,YAAL,CAAkBrsC,QAAQ,CAACrgB,QAAT,CAAkB5S,KAApC,EAFkC;EAIrC,OAZU;;;EAgBX,aAAO,IAAP;EAEH;;;;IA7CsBu+D;;EAiD3B,SAASc,aAAT,CAAuBr/D,KAAvB,EAA8B;EAC1B;EACA,MAAIV,MAAM,GAAGU,KAAK,CAACV,MAAN,GAAe,CAA5B;EACA,MAAIigE,OAAO,GAAG,IAAIz3B,YAAJ,CAAiB,IAAIxoC,MAArB,CAAd;;EAEA,OAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,MAApB,EAA4BE,CAAC,IAAI,CAAjC,EAAoC;EAEhC+/D,IAAAA,OAAO,CAAC,IAAI//D,CAAL,CAAP,GAAiBQ,KAAK,CAACR,CAAD,CAAtB;EACA+/D,IAAAA,OAAO,CAAC,IAAI//D,CAAJ,GAAQ,CAAT,CAAP,GAAqBQ,KAAK,CAACR,CAAC,GAAG,CAAL,CAA1B;EACA+/D,IAAAA,OAAO,CAAC,IAAI//D,CAAJ,GAAQ,CAAT,CAAP,GAAqBQ,KAAK,CAACR,CAAC,GAAG,CAAL,CAA1B;EAEA+/D,IAAAA,OAAO,CAAC,IAAI//D,CAAJ,GAAQ,CAAT,CAAP,GAAqBQ,KAAK,CAACR,CAAC,GAAG,CAAL,CAA1B;EACA+/D,IAAAA,OAAO,CAAC,IAAI//D,CAAJ,GAAQ,CAAT,CAAP,GAAqBQ,KAAK,CAACR,CAAC,GAAG,CAAL,CAA1B;EACA+/D,IAAAA,OAAO,CAAC,IAAI//D,CAAJ,GAAQ,CAAT,CAAP,GAAqBQ,KAAK,CAACR,CAAC,GAAG,CAAL,CAA1B;EAEH;;EAED,SAAO+/D,OAAP;EAEH;;MCjEKlhB;;;;;EACF,4BAAYplB,UAAZ,EAAwB;EAAA;;EAAA;;EACpB;EACA,UAAK3xB,IAAL,GAAY,kBAAZ;EACA,UAAK0hB,KAAL,GAAa,IAAIR,OAAJ,CAAU,QAAV,CAAb;EACA,UAAKmpB,SAAL,GAAiB,CAAjB;EAEA,UAAKF,MAAL,GAAc,KAAd;EACA,UAAK9rC,KAAL,GAAa,CAAb,CAPoB;;EAQpB,UAAK2pC,QAAL,GAAgB,CAAhB,CARoB;;EASpB,UAAKgd,OAAL,GAAe,CAAf,CAToB;;EAWpB,UAAK1a,UAAL,GAAkB,IAAIvJ,OAAJ,EAAlB,CAXoB;;EAcpB,UAAKwG,MAAL,GAAc,KAAd;;EAGA,UAAKisB,SAAL,CAAe7hC,UAAf;;EAjBoB;EAkBvB;;;;2BAMIiU,QAAQ;EACT,iFAAWA,MAAX;;EACA,WAAKlkB,KAAL,CAAW9kB,IAAX,CAAgBgpC,MAAM,CAAClkB,KAAvB;EACA,WAAK2oB,SAAL,GAAiBzE,MAAM,CAACyE,SAAxB;EACA,WAAKhsC,KAAL,GAAaunC,MAAM,CAACvnC,KAApB;EACA,WAAK2pC,QAAL,GAAgBpC,MAAM,CAACoC,QAAvB;EACA,WAAKgd,OAAL,GAAepf,MAAM,CAACof,OAAtB;EACA,WAAK7a,MAAL,GAAcvE,MAAM,CAACuE,MAArB;EAEA,WAAKG,UAAL,CAAgB1tC,IAAhB,CAAqBgpC,MAAM,CAAC0E,UAA5B;EAEA,aAAO,IAAP;EAEH;;;6BAjBwB;EACrB,aAAO,IAAP;EACH;;;;IAvB0B+oB;;MCIzB6E;;;;;EACF,iBAAYvsC,QAAZ,EAAsB2R,QAAtB,EAAgC;EAAA;;EAAA;;EAE5B,+EAAM3R,QAAN,EAAgB2R,QAAhB;EAEA,UAAK3R,QAAL,GAAgBA,QAAQ,KAAK7uB,SAAb,GAAyB6uB,QAAzB,GAAoC,IAAIksC,YAAJ,EAApD;EACA,UAAKv6B,QAAL,GAAgBA,QAAQ,KAAKxgC,SAAb,GAAyBwgC,QAAzB,GAAoC,IAAIyZ,gBAAJ,CAAqB;EAAEr1B,MAAAA,KAAK,EAAE/pB,IAAI,CAACoE,MAAL,KAAgB;EAAzB,KAArB,CAApD;EAL4B;EAM/B;;;;6CAMsB;EACnB65D,MAAAA,uBAAoB,CAACv9D,IAArB,CAA0B,IAA1B;EACH;;;0BANa;EACV,aAAO,IAAP;EACH;;;;IAXeo7D;;EAmBpB,IAAImC,uBAAoB,GAAI,YAAY;EAAE;EAEtC,MAAI1uD,KAAK,GAAG,IAAIoW,OAAJ,EAAZ;EACA,MAAInW,GAAG,GAAG,IAAImW,OAAJ,EAAV;EAEA,SAAO,SAASs4C,oBAAT,GAAgC;EAEnC,QAAIjqC,QAAQ,GAAG,KAAKA,QAApB;EAEA,QAAIwrC,aAAa,GAAGxrC,QAAQ,CAACI,UAAT,CAAoBorC,aAAxC;EACA,QAAIC,WAAW,GAAGzrC,QAAQ,CAACI,UAAT,CAAoBqrC,WAAtC;EACA,QAAI/yB,aAAa,GAAG,IAAI7D,YAAJ,CAAiB,IAAI22B,aAAa,CAAC13D,IAAd,CAAmBwoB,KAAxC,CAApB;;EAEA,SAAK,IAAI/vB,CAAC,GAAG,CAAR,EAAWstC,CAAC,GAAG,CAAf,EAAkBthC,CAAC,GAAGizD,aAAa,CAAC13D,IAAd,CAAmBwoB,KAA9C,EAAqD/vB,CAAC,GAAGgM,CAAzD,EAA4DhM,CAAC,IAAKstC,CAAC,IAAI,CAAvE,EAA0E;EAEtEt+B,MAAAA,KAAK,CAAC8kB,mBAAN,CAA0BmrC,aAA1B,EAAyCj/D,CAAzC;EACAiP,MAAAA,GAAG,CAAC6kB,mBAAJ,CAAwBorC,WAAxB,EAAqCl/D,CAArC;EAEAmsC,MAAAA,aAAa,CAACmB,CAAD,CAAb,GAAoBA,CAAC,KAAK,CAAP,GAAY,CAAZ,GAAgBnB,aAAa,CAACmB,CAAC,GAAG,CAAL,CAAhD;EACAnB,MAAAA,aAAa,CAACmB,CAAC,GAAG,CAAL,CAAb,GAAuBnB,aAAa,CAACmB,CAAD,CAAb,GAAmBt+B,KAAK,CAACwlB,UAAN,CAAiBvlB,GAAjB,CAA1C;EAEH;;EAED,QAAIgxD,sBAAsB,GAAG,IAAIrB,0BAAJ,CAA+BzyB,aAA/B,EAA8C,CAA9C,EAAiD,CAAjD,CAA7B,CAlBmC;;EAoBnC1Y,IAAAA,QAAQ,CAACmY,YAAT,CAAsB,uBAAtB,EAA+C,IAAIizB,0BAAJ,CAA+BoB,sBAA/B,EAAuD,CAAvD,EAA0D,CAA1D,CAA/C,EApBmC;;EAqBnCxsC,IAAAA,QAAQ,CAACmY,YAAT,CAAsB,qBAAtB,EAA6C,IAAIizB,0BAAJ,CAA+BoB,sBAA/B,EAAuD,CAAvD,EAA0D,CAA1D,CAA7C,EArBmC;;EAuBnC,WAAO,IAAP;EAEH,GAzBD;EA2BH,CAhC2B,EAA5B;;MCxBMvhB;;;;;EACF,0BAAYjlB,UAAZ,EAAwB;EAAA;;EAAA;;EACpB;EAEA,UAAK3xB,IAAL,GAAY,gBAAZ;EACA,UAAK0hB,KAAL,GAAa,IAAIR,OAAJ,CAAU,QAAV,CAAb;EAEA,UAAK5qB,GAAL,GAAW,IAAX,CANoB;;EAQpB,UAAKsrB,IAAL,GAAY,CAAZ,CARoB;;EAUpB,UAAKmyB,eAAL,GAAuB,IAAvB,CAVoB;;EAYpB,UAAKxM,MAAL,GAAc,KAAd;;EAEA,UAAKisB,SAAL,CAAe7hC,UAAf;;EAdoB;EAiBvB;;;;2BAMIiU,QAAQ;EACT,+EAAWA,MAAX;;EACA,WAAKlkB,KAAL,CAAW9kB,IAAX,CAAgBgpC,MAAM,CAAClkB,KAAvB;EAEA,WAAKprB,GAAL,GAAWsvC,MAAM,CAACtvC,GAAlB;EAEA,WAAKsrB,IAAL,GAAYgkB,MAAM,CAAChkB,IAAnB;EACA,WAAKmyB,eAAL,GAAuBnO,MAAM,CAACmO,eAA9B;EAEA,aAAO,IAAP;EACH;;;6BAdsB;EACnB,aAAO,IAAP;EACH;;;;IAtBwBsf;;MCMvB+E;;;;;EACF,kBAAYzsC,QAAZ,EAAsB2R,QAAtB,EAAgC;EAAA;;EAAA;;EAC5B;EAEA,UAAKt9B,IAAL,GAAY,QAAZ;EAEA,UAAK2rB,QAAL,GAAgBA,QAAQ,KAAK7uB,SAAb,GAAyB6uB,QAAzB,GAAoC,IAAIgY,cAAJ,EAApD;EACA,UAAKrG,QAAL,GAAgBA,QAAQ,KAAKxgC,SAAb,GAAyBwgC,QAAzB,GAAoC,IAAIsZ,cAAJ,CAAmB;EAAEl1B,MAAAA,KAAK,EAAE/pB,IAAI,CAACoE,MAAL,KAAgB;EAAzB,KAAnB,CAApD;EAN4B;EAO/B;;;;8BAMO23D,WAAWC,YAAY;EAC3BC,MAAAA,UAAO,CAACv7D,IAAR,CAAa,IAAb,EAAmBq7D,SAAnB,EAA8BC,UAA9B;EACH;;;0BANa;EACV,aAAO,IAAP;EACH;;;;IAZgBxH;;EAoBrB,IAAIyH,UAAO,GAAI,YAAY;EAEvB,MAAIC,aAAa,GAAG,IAAIvxC,OAAJ,EAApB;EACA,MAAIgsC,GAAG,GAAG,IAAID,GAAJ,EAAV;EACA,MAAItjC,MAAM,GAAG,IAAIqB,MAAJ,EAAb;EAEA,SAAO,SAASwnC,OAAT,CAAiBF,SAAjB,EAA4BC,UAA5B,EAAwC;EAE3C,QAAIjpC,MAAM,GAAG,IAAb;EACA,QAAIiB,QAAQ,GAAG,KAAKA,QAApB;EACA,QAAI9M,WAAW,GAAG,KAAKA,WAAvB;EACA,QAAIw5C,SAAS,GAAG3E,SAAS,CAAC59C,MAAV,CAAiBsiD,MAAjB,CAAwBC,SAAxC,CAL2C;;EAS3C,QAAI1sC,QAAQ,CAACiF,cAAT,KAA4B,IAAhC,EAAsCjF,QAAQ,CAACkF,qBAAT;EAEtC9F,IAAAA,MAAM,CAACnuB,IAAP,CAAY+uB,QAAQ,CAACiF,cAArB;EACA7F,IAAAA,MAAM,CAACjM,YAAP,CAAoBD,WAApB;EACAkM,IAAAA,MAAM,CAAC9Y,MAAP,IAAiBomD,SAAjB;EAEA,QAAI3E,SAAS,CAACpF,GAAV,CAActjC,gBAAd,CAA+BD,MAA/B,MAA2C,KAA/C,EAAsD,OAfX;;EAmB3C8oC,IAAAA,aAAa,CAACj1C,UAAd,CAAyBC,WAAzB;EACAyvC,IAAAA,GAAG,CAAC1xD,IAAJ,CAAS82D,SAAS,CAACpF,GAAnB,EAAwBxvC,YAAxB,CAAqC+0C,aAArC;EAEA,QAAIyE,cAAc,GAAGD,SAAS,IAAI,CAAC,KAAKh6D,KAAL,CAAW4U,CAAX,GAAe,KAAK5U,KAAL,CAAW6U,CAA1B,GAA8B,KAAK7U,KAAL,CAAWge,CAA1C,IAA+C,CAAnD,CAA9B;EACA,QAAIk8C,gBAAgB,GAAGD,cAAc,GAAGA,cAAxC;EACA,QAAIhtD,QAAQ,GAAG,IAAIgS,OAAJ,EAAf;EACA,QAAIk7C,cAAc,GAAG,IAAIl7C,OAAJ,EAArB;;EAEA,aAASm7C,SAAT,CAAmB5lD,KAAnB,EAA0B9Z,KAA1B,EAAiC;EAE7B,UAAI2/D,kBAAkB,GAAGpK,GAAG,CAACG,iBAAJ,CAAsB57C,KAAtB,CAAzB;;EAEA,UAAI6lD,kBAAkB,GAAGH,gBAAzB,EAA2C;EAEvCjK,QAAAA,GAAG,CAAC2D,mBAAJ,CAAwBp/C,KAAxB,EAA+B2lD,cAA/B;EACAA,QAAAA,cAAc,CAAC15C,YAAf,CAA4BD,WAA5B;EAEA,YAAI6R,QAAQ,GAAGgjC,SAAS,CAACpF,GAAV,CAAchtD,MAAd,CAAqBorB,UAArB,CAAgC8rC,cAAhC,CAAf;EAEA,YAAI9nC,QAAQ,GAAGgjC,SAAS,CAACnqC,IAArB,IAA6BmH,QAAQ,GAAGgjC,SAAS,CAAClqC,GAAtD,EAA2D;EAE3DmqC,QAAAA,UAAU,CAAC79D,IAAX,CAAgB;EAEZ46B,UAAAA,QAAQ,EAAEA,QAFE;EAGZioC,UAAAA,aAAa,EAAEhhE,IAAI,CAACklB,IAAL,CAAU67C,kBAAV,CAHH;EAIZ7lD,UAAAA,KAAK,EAAE2lD,cAAc,CAACn8D,KAAf,EAJK;EAKZtD,UAAAA,KAAK,EAAEA,KALK;EAMZmqC,UAAAA,IAAI,EAAE,IANM;EAOZxY,UAAAA,MAAM,EAAEA;EAPI,SAAhB;EAWH;EAEJ;;EAED,QAAIiB,QAAQ,CAACG,gBAAb,EAA+B;EAE3B,UAAI/yB,KAAK,GAAG4yB,QAAQ,CAAC5yB,KAArB;EACA,UAAIgzB,UAAU,GAAGJ,QAAQ,CAACI,UAA1B;EACA,UAAImY,SAAS,GAAGnY,UAAU,CAACzgB,QAAX,CAAoB5S,KAApC;;EAEA,UAAIK,KAAK,KAAK,IAAd,EAAoB;EAEhB,YAAIusC,OAAO,GAAGvsC,KAAK,CAACL,KAApB;;EAEA,aAAK,IAAIR,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAGwiC,OAAO,CAACttC,MAA7B,EAAqCE,CAAC,GAAG4K,EAAzC,EAA6C5K,CAAC,EAA9C,EAAkD;EAE9C,cAAIoP,CAAC,GAAGg+B,OAAO,CAACptC,CAAD,CAAf;EAEAoT,UAAAA,QAAQ,CAACqV,SAAT,CAAmBujB,SAAnB,EAA8B58B,CAAC,GAAG,CAAlC;EAEAmxD,UAAAA,SAAS,CAACntD,QAAD,EAAWhE,CAAX,CAAT;EAEH;EAEJ,OAdD,MAcO;EAEH,aAAK,IAAIpP,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGggC,SAAS,CAAClsC,MAAV,GAAmB,CAAvC,EAA0CE,CAAC,GAAGgM,CAA9C,EAAiDhM,CAAC,EAAlD,EAAsD;EAElDoT,UAAAA,QAAQ,CAACqV,SAAT,CAAmBujB,SAAnB,EAA8BhsC,CAAC,GAAG,CAAlC;EAEAugE,UAAAA,SAAS,CAACntD,QAAD,EAAWpT,CAAX,CAAT;EAEH;EAEJ;EAEJ,KAhCD,MAgCO;EAEH,UAAI2zB,QAAQ,GAAGF,QAAQ,CAACE,QAAxB;;EAEA,WAAK,IAAI3zB,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG2nB,QAAQ,CAAC7zB,MAA7B,EAAqCE,CAAC,GAAGgM,CAAzC,EAA4ChM,CAAC,EAA7C,EAAiD;EAE7CugE,QAAAA,SAAS,CAAC5sC,QAAQ,CAAC3zB,CAAD,CAAT,EAAcA,CAAd,CAAT;EAEH;EAEJ;EAEJ,GAnGD;EAqGH,CA3Gc,EAAf;;MC3BM8+C;;;;;EACF,6BAAYrlB,UAAZ,EAAwB;EAAA;;EAAA;;EACpB;EACA,UAAK3xB,IAAL,GAAY,gBAAZ;EAEA,UAAK0hB,KAAL,GAAa,IAAIR,OAAJ,CAAU,QAAV,CAAb;EACA,UAAK5qB,GAAL,GAAW,IAAX;EAEA,UAAK42B,QAAL,GAAgB,CAAhB;EAEA,UAAK6mB,eAAL,GAAuB,IAAvB;EAEA,UAAKxM,MAAL,GAAc,KAAd;EACA,UAAK3J,WAAL,GAAmB,IAAnB;;EAEA,UAAK41B,SAAL,CAAe7hC,UAAf;;EAdoB;EAgBvB;;;;2BAMIiU,QAAQ;EACT,kFAAWA,MAAX;;EAEA,WAAKlkB,KAAL,CAAW9kB,IAAX,CAAgBgpC,MAAM,CAAClkB,KAAvB;EACA,WAAKprB,GAAL,GAAWsvC,MAAM,CAACtvC,GAAlB;EAEA,WAAK42B,QAAL,GAAgB0Y,MAAM,CAAC1Y,QAAvB;EAEA,WAAK6mB,eAAL,GAAuBnO,MAAM,CAACmO,eAA9B;EAEA,aAAO,IAAP;EACH;;;6BAfsB;EACnB,aAAO,IAAP;EACH;;;;IArBwBsf;;ECQ7B,IAAI1nC,QAAJ;;MAEMitC;;;;;EAEF,kBAAYt7B,QAAZ,EAAsB;EAAA;;EAAA;;EAClB;EACA,UAAKt9B,IAAL,GAAY,QAAZ;;EAEA,QAAI2rB,QAAQ,KAAK7uB,SAAjB,EAA4B;EAExB6uB,MAAAA,QAAQ,GAAG,IAAIgY,cAAJ,EAAX;EAEA,UAAIk1B,YAAY,GAAG,IAAIr4B,YAAJ,CAAiB,CAChC,CAAE,GAD8B,EACzB,CAAE,GADuB,EAClB,CADkB,EACf,CADe,EACZ,CADY,EAEhC,GAFgC,EAE3B,CAAE,GAFyB,EAEpB,CAFoB,EAEjB,CAFiB,EAEd,CAFc,EAGhC,GAHgC,EAG3B,GAH2B,EAGtB,CAHsB,EAGnB,CAHmB,EAGhB,CAHgB,EAIhC,CAAE,GAJ8B,EAIzB,GAJyB,EAIpB,CAJoB,EAIjB,CAJiB,EAId,CAJc,CAAjB,CAAnB;EAOA,UAAIw2B,iBAAiB,GAAG,IAAIN,iBAAJ,CAAsBmC,YAAtB,EAAoC,CAApC,CAAxB;EAEAltC,MAAAA,QAAQ,CAACoY,QAAT,CAAkB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAAlB;EACApY,MAAAA,QAAQ,CAACmY,YAAT,CAAsB,UAAtB,EAAkC,IAAIizB,0BAAJ,CAA+BC,iBAA/B,EAAkD,CAAlD,EAAqD,CAArD,EAAwD,KAAxD,CAAlC;EACArrC,MAAAA,QAAQ,CAACmY,YAAT,CAAsB,IAAtB,EAA4B,IAAIizB,0BAAJ,CAA+BC,iBAA/B,EAAkD,CAAlD,EAAqD,CAArD,EAAwD,KAAxD,CAA5B;EAEH;;EAED,UAAKrrC,QAAL,GAAgBA,QAAhB;EAEA,UAAK2R,QAAL,GAAiBA,QAAQ,KAAKxgC,SAAd,GAA2BwgC,QAA3B,GAAsC,IAAI0Z,iBAAJ,EAAtD;EAEA,UAAKxsB,MAAL,GAAc,IAAIuW,OAAJ,CAAY,GAAZ,EAAiB,GAAjB,CAAd;EA3BkB;EA4BrB;;;;8BAMO2yB,WAAWC,YAAY;EAC3BC,MAAAA,UAAO,CAACv7D,IAAR,CAAa,IAAb,EAAmBq7D,SAAnB,EAA8BC,UAA9B;EACH;;;8BACO;EAEJ,aAAO,IAAI,KAAK52D,WAAT,CAAqB,KAAKugC,QAA1B,EAAoC1gC,IAApC,CAAyC,IAAzC,CAAP;EAEH;;;2BAEIgpC,QAAQ;EAETumB,MAAAA,QAAQ,CAAC12D,SAAT,CAAmBmH,IAAnB,CAAwBvE,IAAxB,CAA6B,IAA7B,EAAmCutC,MAAnC;EAEA,UAAIA,MAAM,CAACpb,MAAP,KAAkB1tB,SAAtB,EAAiC,KAAK0tB,MAAL,CAAY5tB,IAAZ,CAAiBgpC,MAAM,CAACpb,MAAxB;EAEjC,aAAO,IAAP;EAEH;;;0BArBc;EACX,aAAO,IAAP;EACH;;;;IAlCgB2hC;;EAyDrB,IAAIyH,UAAO,GAAI,YAAY;EACvB,MAAI4E,cAAc,GAAG,IAAIl7C,OAAJ,EAArB;EACA,MAAIw7C,UAAU,GAAG,IAAIx7C,OAAJ,EAAjB;EACA,MAAIy7C,UAAU,GAAG,IAAIz7C,OAAJ,EAAjB;EAEA,MAAI07C,eAAe,GAAG,IAAIj4B,OAAJ,EAAtB;EACA,MAAIk4B,eAAe,GAAG,IAAIl4B,OAAJ,EAAtB;EACA,MAAIm4B,eAAe,GAAG,IAAI52C,OAAJ,EAAtB;EAEA,MAAIyiB,EAAE,GAAG,IAAIznB,OAAJ,EAAT;EACA,MAAI0nB,EAAE,GAAG,IAAI1nB,OAAJ,EAAT;EACA,MAAI2nB,EAAE,GAAG,IAAI3nB,OAAJ,EAAT;EAEA,MAAI22C,GAAG,GAAG,IAAIlzB,OAAJ,EAAV;EACA,MAAImzB,GAAG,GAAG,IAAInzB,OAAJ,EAAV;EACA,MAAIozB,GAAG,GAAG,IAAIpzB,OAAJ,EAAV;;EAEA,WAASo4B,eAAT,CAAyBC,cAAzB,EAAyCL,UAAzC,EAAqDvuC,MAArD,EAA6DnsB,KAA7D,EAAoEsR,GAApE,EAAyEF,GAAzE,EAA8E;EAE1E;EACAupD,IAAAA,eAAe,CAACn7C,UAAhB,CAA2Bu7C,cAA3B,EAA2C5uC,MAA3C,EAAmDM,SAAnD,CAA6D,GAA7D,EAAkEyiC,QAAlE,CAA2ElvD,KAA3E,EAH0E;;EAM1E,QAAIsR,GAAG,KAAK7S,SAAZ,EAAuB;EAEnBm8D,MAAAA,eAAe,CAAChmD,CAAhB,GAAqBxD,GAAG,GAAGupD,eAAe,CAAC/lD,CAAvB,GAA6BtD,GAAG,GAAGqpD,eAAe,CAAC9lD,CAAvE;EACA+lD,MAAAA,eAAe,CAAC/lD,CAAhB,GAAqBvD,GAAG,GAAGqpD,eAAe,CAAC/lD,CAAvB,GAA6BxD,GAAG,GAAGupD,eAAe,CAAC9lD,CAAvE;EAEH,KALD,MAKO;EAEH+lD,MAAAA,eAAe,CAACr8D,IAAhB,CAAqBo8D,eAArB;EAEH;;EAGDI,IAAAA,cAAc,CAACx8D,IAAf,CAAoBm8D,UAApB;EACAK,IAAAA,cAAc,CAACnmD,CAAf,IAAoBgmD,eAAe,CAAChmD,CAApC;EACAmmD,IAAAA,cAAc,CAAClmD,CAAf,IAAoB+lD,eAAe,CAAC/lD,CAApC,CApB0E;;EAuB1EkmD,IAAAA,cAAc,CAACt6C,YAAf,CAA4Bo6C,eAA5B;EAEH;;EAED,SAAO,SAAStF,OAAT,CAAiBF,SAAjB,EAA4BC,UAA5B,EAAwC;EAE3CmF,IAAAA,UAAU,CAACO,kBAAX,CAA8B,KAAKx6C,WAAnC;EACAq6C,IAAAA,eAAe,CAACt6C,UAAhB,CAA2B,KAAKulC,eAAhC,EAAiD+I,WAAjD,CAA6D,KAAKruC,WAAlE;EACAk6C,IAAAA,UAAU,CAAC/b,qBAAX,CAAiC,KAAKmH,eAAtC;EAEA,QAAIj3B,QAAQ,GAAG,KAAKoQ,QAAL,CAAcpQ,QAA7B;EACA,QAAIvd,GAAJ,EAASF,GAAT;;EACA,QAAIyd,QAAQ,KAAK,CAAjB,EAAoB;EAEhBzd,MAAAA,GAAG,GAAG9X,IAAI,CAAC8X,GAAL,CAASyd,QAAT,CAAN;EACAvd,MAAAA,GAAG,GAAGhY,IAAI,CAACgY,GAAL,CAASud,QAAT,CAAN;EAEH;;EAED,QAAI1C,MAAM,GAAG,KAAKA,MAAlB;EAEA2uC,IAAAA,eAAe,CAACp0B,EAAE,CAAC54B,GAAH,CAAO,CAAE,GAAT,EAAc,CAAE,GAAhB,EAAqB,CAArB,CAAD,EAA0B4sD,UAA1B,EAAsCvuC,MAAtC,EAA8CsuC,UAA9C,EAA0DnpD,GAA1D,EAA+DF,GAA/D,CAAf;EACA0pD,IAAAA,eAAe,CAACn0B,EAAE,CAAC74B,GAAH,CAAO,GAAP,EAAY,CAAE,GAAd,EAAmB,CAAnB,CAAD,EAAwB4sD,UAAxB,EAAoCvuC,MAApC,EAA4CsuC,UAA5C,EAAwDnpD,GAAxD,EAA6DF,GAA7D,CAAf;EACA0pD,IAAAA,eAAe,CAACl0B,EAAE,CAAC94B,GAAH,CAAO,GAAP,EAAY,GAAZ,EAAiB,CAAjB,CAAD,EAAsB4sD,UAAtB,EAAkCvuC,MAAlC,EAA0CsuC,UAA1C,EAAsDnpD,GAAtD,EAA2DF,GAA3D,CAAf;EAEAwkD,IAAAA,GAAG,CAAC9nD,GAAJ,CAAQ,CAAR,EAAW,CAAX;EACA+nD,IAAAA,GAAG,CAAC/nD,GAAJ,CAAQ,CAAR,EAAW,CAAX;EACAgoD,IAAAA,GAAG,CAAChoD,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAvB2C;;EA0B3C,QAAIqoD,SAAS,GAAGd,SAAS,CAACpF,GAAV,CAAcmG,iBAAd,CAAgC1vB,EAAhC,EAAoCC,EAApC,EAAwCC,EAAxC,EAA4C,KAA5C,EAAmDuzB,cAAnD,CAAhB;;EAEA,QAAIhE,SAAS,KAAK,IAAlB,EAAwB;EAEpB;EACA2E,MAAAA,eAAe,CAACn0B,EAAE,CAAC74B,GAAH,CAAO,CAAE,GAAT,EAAc,GAAd,EAAmB,CAAnB,CAAD,EAAwB4sD,UAAxB,EAAoCvuC,MAApC,EAA4CsuC,UAA5C,EAAwDnpD,GAAxD,EAA6DF,GAA7D,CAAf;EACAykD,MAAAA,GAAG,CAAC/nD,GAAJ,CAAQ,CAAR,EAAW,CAAX;EAEAqoD,MAAAA,SAAS,GAAGd,SAAS,CAACpF,GAAV,CAAcmG,iBAAd,CAAgC1vB,EAAhC,EAAoCE,EAApC,EAAwCD,EAAxC,EAA4C,KAA5C,EAAmDwzB,cAAnD,CAAZ;;EACA,UAAIhE,SAAS,KAAK,IAAlB,EAAwB;EAEpB;EAEH;EAEJ;;EAED,QAAI9jC,QAAQ,GAAGgjC,SAAS,CAACpF,GAAV,CAAchtD,MAAd,CAAqBorB,UAArB,CAAgC8rC,cAAhC,CAAf;EAEA,QAAI9nC,QAAQ,GAAGgjC,SAAS,CAACnqC,IAArB,IAA6BmH,QAAQ,GAAGgjC,SAAS,CAAClqC,GAAtD,EAA2D;EAE3DmqC,IAAAA,UAAU,CAAC79D,IAAX,CAAgB;EAEZ46B,MAAAA,QAAQ,EAAEA,QAFE;EAGZ7d,MAAAA,KAAK,EAAE2lD,cAAc,CAACn8D,KAAf,EAHK;EAIZs4D,MAAAA,EAAE,EAAEpD,QAAQ,CAACwB,KAAT,CAAeyF,cAAf,EAA+BzzB,EAA/B,EAAmCC,EAAnC,EAAuCC,EAAvC,EAA2CgvB,GAA3C,EAAgDC,GAAhD,EAAqDC,GAArD,EAA0D,IAAIpzB,OAAJ,EAA1D,CAJQ;EAKZmC,MAAAA,IAAI,EAAE,IALM;EAMZxY,MAAAA,MAAM,EAAE;EANI,KAAhB;EAUH,GAzDD;EA2DH,CAvGa,EAAd;;MCnEM4uC;;;;;EACF,yBAqB2B;EAAA;;EAAA,mFAAJ,EAAI;EAAA,+BApBrBC,UAoBqB;EAAA,QApBrBA,UAoBqB,gCApBR,IAoBQ;EAAA,yBAnBnBC,IAmBmB;EAAA,QAnBnBA,IAmBmB,0BAnBZ,EAmBY;EAAA,8BAlBnBC,SAkBmB;EAAA,QAlBnBA,SAkBmB,+BAlBP,QAkBO;EAAA,mCAjBnBC,cAiBmB;EAAA,QAjBnBA,cAiBmB,oCAjBF,IAiBE;EAAA,+BAhBnBC,UAgBmB;EAAA,QAhBnBA,UAgBmB,gCAhBN,YAgBM;EAAA,6BAfnBC,QAemB;EAAA,QAfnBA,QAemB,8BAfR,EAeQ;EAAA,+BAdnBC,UAcmB;EAAA,QAdnBA,UAcmB,gCAdN,QAcM;EAAA,gCAbnBC,WAamB;EAAA,QAbnBA,WAamB,iCAbL,QAaK;EAAA,8BAZnBC,SAYmB;EAAA,QAZnBA,SAYmB,+BAZP,QAYO;EAAA,8BAXnBC,SAWmB;EAAA,QAXnBA,SAWmB,+BAXP,OAWO;EAAA,8BAVnBh7B,SAUmB;EAAA,QAVnBA,SAUmB,+BAVP,CAUO;EAAA,gCATnBi7B,WASmB;EAAA,QATnBA,WASmB,iCATL,OASK;EAAA,4BARnBC,OAQmB;EAAA,QARnBA,OAQmB,6BART,IAQS;EAAA,8BAPnBnuB,SAOmB;EAAA,QAPnBA,SAOmB,+BAPPlxB,YAOO;EAAA,8BANnBmxB,SAMmB;EAAA,QANnBA,SAMmB,+BANPnxB,YAMO;EAAA,QALnB+wB,OAKmB,QALnBA,OAKmB;EAAA,QAJnBC,KAImB,QAJnBA,KAImB;EAAA,QAHnBC,KAGmB,QAHnBA,KAGmB;EAAA,QAFnBlkC,MAEmB,QAFnBA,MAEmB;EAAA,QADnB5H,IACmB,QADnBA,IACmB;EAAA,QAAnBisC,UAAmB,QAAnBA,UAAmB;;EAAA;;EAEvB,qFACIlhC,YAAY,EADhB,EAEI6gC,OAFJ,EAGIC,KAHJ,EAIIC,KAJJ,EAKIC,SALJ,EAMIC,SANJ,EAOIpkC,MAPJ,EAQI5H,IARJ,EASIisC,UATJ;EAYA,UAAKstB,UAAL,GAAkBA,UAAlB;EACA,UAAKY,KAAL,GAAaX,IAAb;EACA,UAAKY,UAAL,GAAkBX,SAAlB;EACA,UAAKY,eAAL,GAAuBX,cAAvB;EACA,UAAKY,WAAL,GAAmBX,UAAnB;EACA,UAAKY,SAAL,GAAiBX,QAAjB;EACA,UAAKY,WAAL,GAAmBX,UAAnB;EACA,UAAKY,YAAL,GAAoBX,WAApB;EACA,UAAKY,UAAL,GAAkBX,SAAlB;EACA,UAAKY,UAAL,GAAkBX,SAAlB;EACA,UAAKY,UAAL,GAAkB57B,SAAlB;EACA,UAAK67B,YAAL,GAAoBZ,WAApB;EACA,UAAKa,QAAL,GAAgBZ,OAAhB;;EAEA,UAAKa,MAAL;;EA5BuB;EA+B1B;;;;+BAIQ;EAAA;;EAEL,UAAIC,GAAG,GAAG,KAAKrvB,KAAL,CAAWqP,UAAX,CAAsB,IAAtB,CAAV;EACAggB,MAAAA,GAAG,CAACC,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBD,GAAG,CAAC7vD,MAAJ,CAAWI,KAA/B,EAAsCyvD,GAAG,CAAC7vD,MAAJ,CAAWK,MAAjD;;EACA,UAAI,KAAK0vD,iBAAL,IAA0B,KAAKC,kBAAnC,EAAuD;EACnDH,QAAAA,GAAG,CAAC7vD,MAAJ,CAAWI,KAAX,GAAmB,KAAK6vD,kBAAxB;EACAJ,QAAAA,GAAG,CAAC7vD,MAAJ,CAAWK,MAAX,GAAoB,KAAK6vD,mBAAzB;EAEAL,QAAAA,GAAG,CAACM,IAAJ,GAAW,KAAKA,IAAhB;EACAN,QAAAA,GAAG,CAACO,YAAJ,GAAmB,QAAnB;EACA,YAAIrxD,IAAJ;;EACA,gBAAQ,KAAKuvD,SAAb;EACI,eAAK,MAAL;EACIuB,YAAAA,GAAG,CAACvB,SAAJ,GAAgB,MAAhB;EACAvvD,YAAAA,IAAI,GAAG,KAAKsxD,eAAL,GAAuB,KAAKC,iBAAL,GAAyB,CAAvD;EACA;;EACJ,eAAK,OAAL;EACIT,YAAAA,GAAG,CAACvB,SAAJ,GAAgB,OAAhB;EACAvvD,YAAAA,IAAI,GAAG,KAAKsxD,eAAL,GAAuB,KAAKC,iBAAL,GAAyB,CAAhD,GAAoD,KAAKP,iBAAhE;EACA;;EACJ,eAAK,QAAL;EACIF,YAAAA,GAAG,CAACvB,SAAJ,GAAgB,QAAhB;EACAvvD,YAAAA,IAAI,GAAG,KAAKsxD,eAAL,GAAuB,KAAKC,iBAAL,GAAyB,CAAhD,GAAoD,KAAKP,iBAAL,GAAyB,CAApF;EACA;EAZR;;EAcA,YAAI9wD,GAAG,GAAG,KAAKoxD,eAAL,GAAuB,KAAKC,iBAAL,GAAyB,CAAhD,GAAoD,KAAK7B,QAAL,GAAgB,CAA9E;EACAoB,QAAAA,GAAG,CAAChB,SAAJ,GAAgB,KAAKA,SAArB;EACAgB,QAAAA,GAAG,CAACU,UAAJ,GAAiB,CAAjB;EACAV,QAAAA,GAAG,CAACh8B,SAAJ,GAAgB,KAAKy8B,iBAArB;EACAT,QAAAA,GAAG,CAACf,WAAJ,GAAkB,KAAKA,WAAvB;EAEA,aAAK0B,SAAL,CAAevlE,OAAf,CAAuB,UAAAojE,IAAI,EAAI;EAC3B,cAAI,MAAI,CAACx6B,SAAT,EAAoB;EAChBg8B,YAAAA,GAAG,CAACY,UAAJ,CAAepC,IAAf,EAAqBtvD,IAArB,EAA2BE,GAA3B;EACH;;EACD4wD,UAAAA,GAAG,CAACa,QAAJ,CAAarC,IAAb,EAAmBtvD,IAAnB,EAAyBE,GAAzB;EACAA,UAAAA,GAAG,IAAI,MAAI,CAAC0xD,sBAAZ;EACH,SAND;EAOH,OAlCD,MAkCO;EACHd,QAAAA,GAAG,CAAC7vD,MAAJ,CAAWI,KAAX,GAAmByvD,GAAG,CAAC7vD,MAAJ,CAAWK,MAAX,GAAoB,CAAvC;EACH;;EACD,WAAKm6B,WAAL,GAAmB,IAAnB;EACH;;;sCAEe;EACZ,UAAI,KAAK4zB,UAAT,EAAqB;EACjB,aAAKwB,MAAL;EACH;EACJ;;;0BAnDmB;EAChB,aAAO,IAAP;EACH;;;0BAmDU;EACP,aAAO,KAAKZ,KAAZ;EACH;wBAEQrhE,OAAO;EACZ,UAAI,KAAKqhE,KAAL,KAAerhE,KAAnB,EAA0B;EACtB,aAAKqhE,KAAL,GAAarhE,KAAb;EACA,aAAKijE,UAAL,GAAkBj/D,SAAlB;EACA,aAAKk/D,kBAAL,GAA0Bl/D,SAA1B;;EACA,aAAKm/D,aAAL;EACH;EACJ;;;0BAEe;EACZ,aAAO,KAAK7B,UAAZ;EACH;wBAEathE,OAAO;EACjB,UAAI,KAAKshE,UAAL,KAAoBthE,KAAxB,EAA+B;EAC3B,aAAKshE,UAAL,GAAkBthE,KAAlB;;EACA,aAAKmjE,aAAL;EACH;EACJ;;;0BAEe;EACZ,UAAIC,gBAAgB,CAAC,KAAKH,UAAN,CAApB,EAAuC;EACnC,aAAKA,UAAL,GAAkBI,YAAY,CAAC,KAAK3C,IAAN,CAA9B;EACH;;EACD,aAAO,KAAKuC,UAAZ;EACH;;;0BAEoB;EACjB,aAAO,KAAK1B,eAAZ;EACH;wBAEkBvhE,OAAO;EACtB,UAAI,KAAKuhE,eAAL,KAAyBvhE,KAA7B,EAAoC;EAChC,aAAKuhE,eAAL,GAAuBvhE,KAAvB;;EACA,aAAKmjE,aAAL;EACH;EACJ;;;0BAE4B;EACzB,aAAO,KAAKrC,QAAL,GAAgB,KAAKF,cAA5B;EACH;;;0BAEgB;EACb,aAAO,KAAKY,WAAZ;EACH;wBAEcxhE,OAAO;EAClB,UAAI,KAAKwhE,WAAL,KAAqBxhE,KAAzB,EAAgC;EAC5B,aAAKwhE,WAAL,GAAmBxhE,KAAnB;EACA,aAAKkjE,kBAAL,GAA0Bl/D,SAA1B;;EACA,aAAKm/D,aAAL;EACH;EACJ;;;0BAEc;EACX,aAAO,KAAK1B,SAAZ;EACH;wBAEYzhE,OAAO;EAChB,UAAI,KAAKyhE,SAAL,KAAmBzhE,KAAvB,EAA8B;EAC1B,aAAKyhE,SAAL,GAAiBzhE,KAAjB;EACA,aAAKkjE,kBAAL,GAA0Bl/D,SAA1B;;EACA,aAAKm/D,aAAL;EACH;EACJ;;;0BAEgB;EACb,aAAO,KAAKzB,WAAZ;EACH;wBAEc1hE,OAAO;EAClB,UAAI,KAAK0hE,WAAL,KAAqB1hE,KAAzB,EAAgC;EAC5B,aAAK0hE,WAAL,GAAmB1hE,KAAnB;EACA,aAAKkjE,kBAAL,GAA0Bl/D,SAA1B;;EACA,aAAKm/D,aAAL;EACH;EACJ;;;0BAEiB;EACd,aAAO,KAAKxB,YAAZ;EACH;wBAEe3hE,OAAO;EACnB,UAAI,KAAK2hE,YAAL,KAAsB3hE,KAA1B,EAAiC;EAC7B,aAAK2hE,YAAL,GAAoB3hE,KAApB;EACA,aAAKkjE,kBAAL,GAA0Bl/D,SAA1B;;EACA,aAAKm/D,aAAL;EACH;EACJ;;;0BAEe;EACZ,aAAO,KAAKvB,UAAZ;EACH;wBAEa5hE,OAAO;EACjB,UAAI,KAAK4hE,UAAL,KAAoB5hE,KAAxB,EAA+B;EAC3B,aAAK4hE,UAAL,GAAkB5hE,KAAlB;EACA,aAAKkjE,kBAAL,GAA0Bl/D,SAA1B;;EACA,aAAKm/D,aAAL;EACH;EACJ;;;0BAEU;EACP,aAAOG,OAAO,CACV,KAAKrC,SADK,EAEV,KAAKD,WAFK,EAGV,KAAKD,UAHK,EAIV,KAAKD,QAJK,EAKV,KAAKD,UALK,CAAd;EAOH;;;0BAEe;EACZ,aAAO,KAAKgB,UAAZ;EACH;wBAEa7hE,OAAO;EACjB,UAAI,KAAK6hE,UAAL,KAAoB7hE,KAAxB,EAA+B;EAC3B,aAAK6hE,UAAL,GAAkB7hE,KAAlB;;EACA,aAAKmjE,aAAL;EACH;EACJ;;;0BAEe;EACZ,aAAO,KAAKrB,UAAZ;EACH;wBAEa9hE,OAAO;EACjB,UAAI,KAAK8hE,UAAL,KAAoB9hE,KAAxB,EAA+B;EAC3B,aAAK8hE,UAAL,GAAkB9hE,KAAlB;;EACA,aAAKmjE,aAAL;EACH;EACJ;;;0BAEuB;EACpB,aAAO,KAAKrB,UAAL,GAAkB,KAAKhB,QAA9B;EACH;;;0BAEiB;EACd,aAAO,KAAKiB,YAAZ;EACH;wBAEe/hE,OAAO;EACnB,UAAI,KAAK+hE,YAAL,KAAsB/hE,KAA1B,EAAiC;EAC7B,aAAK+hE,YAAL,GAAoB/hE,KAApB;;EACA,aAAKmjE,aAAL;EACH;EACJ;;;0BAEuB;EACpB,UAAIC,gBAAgB,CAAC,KAAKF,kBAAN,CAApB,EAA+C;EAC3C,aAAKA,kBAAL,GAA0BK,aAAY,CAClC,KAAKV,SAD6B,EAElC,KAAKL,IAF6B,CAAtC;EAIH;;EACD,aAAO,KAAKU,kBAAZ;EACH;;;0BAEgB;EACb,aAAO,KAAKtC,cAAL,IAAuB,KAAKiC,SAAL,CAAe3jE,MAAf,GAAwB,CAA/C,IAAoD,CAA3D;EACH;;;0BAEwB;EACrB,aAAO,KAAKskE,UAAL,GAAkB,KAAK1C,QAA9B;EACH;;;0BAEa;EACV,aAAO,KAAKkB,QAAZ;EACH;wBAEWhiE,OAAO;EACf,UAAI,KAAKgiE,QAAL,KAAkBhiE,KAAtB,EAA6B;EACzB,aAAKgiE,QAAL,GAAgBhiE,KAAhB;;EACA,aAAKmjE,aAAL;EACH;EACJ;;;0BAEqB;EAClB,aAAO,KAAK/B,OAAL,GAAe,KAAKN,QAA3B;EACH;;;0BAEwB;EACrB,aAAO,KAAKsB,iBAAL,GAAyB,KAAKO,iBAA9B,GAAkD,KAAKD,eAAL,GAAuB,CAAhF;EACH;;;0BAEiB;EACd,aAAO,KAAKc,UAAL,GAAkB,KAAKt9B,SAAvB,GAAmC,KAAKk7B,OAAL,GAAe,CAAzD;EACH;;;0BAEyB;EACtB,aAAO,KAAKqC,WAAL,GAAmB,KAAK3C,QAA/B;EACH;;;0BAEiB;EACd,UAAI,KAAKjuB,KAAL,CAAWpgC,KAAX,IAAoB,KAAKogC,KAAL,CAAWngC,MAAnC,EAA2C;EACvC,eAAO,KAAKmgC,KAAL,CAAWpgC,KAAX,GAAmB,KAAKogC,KAAL,CAAWngC,MAArC;EACH;;EACD,aAAO,CAAP;EACH;;;mCACmBmwD,WAAWL,MAAM;EACjC,aAAOe,aAAY,CAACV,SAAD,EAAYL,IAAZ,CAAnB;EACH;;;;IAzTqB5vB;;EA6T1B,SAASwwB,gBAAT,CAA0BpjE,KAA1B,EAAiC;EAC7B,SAAOA,KAAK,KAAKgE,SAAjB;EACH;;EAED,SAASq/D,YAAT,CAAsB3C,IAAtB,EAA4B;EACxB,SAAOA,IAAI,GAAGA,IAAI,CAACllD,KAAL,CAAW,IAAX,CAAH,GAAsB,EAAjC;EACH;;EAED,SAAS8nD,OAAT,CAAiBrC,SAAjB,EAA4BD,WAA5B,EAAyCD,UAAzC,EAAqDD,QAArD,EAA+DD,UAA/D,EAA2E;EACvE,SAAO,CAACI,SAAD,EAAYD,WAAZ,EAAyBD,UAAzB,YAAwCD,QAAxC,SAAsDD,UAAtD,EAAkExnB,IAAlE,CAAuE,GAAvE,CAAP;EACH;;EAGD,SAASkqB,aAAT,CAAsBV,SAAtB,EAAiCL,IAAjC,EAAuC;EACnC,MAAIK,SAAS,CAAC3jE,MAAd,EAAsB;EAClB,QAAIgjE,GAAG,GAAGjwD,YAAY,GAAGiwC,UAAf,CAA0B,IAA1B,CAAV;EACAggB,IAAAA,GAAG,CAACM,IAAJ,GAAWA,IAAX;EACA,WAAOkB,SAAS,CAACb,SAAS,CAACrlE,GAAV,CAAc,UAAAkjE,IAAI;EAAA,aAAIwB,GAAG,CAACyB,WAAJ,CAAgBjD,IAAhB,EAAsBjuD,KAA1B;EAAA,KAAlB,CAAD,CAAhB;EACH;;EACD,SAAO,CAAP;EACH;;EAGD,SAASixD,SAAT,CAAmB9jE,KAAnB,EAA0B;EACtB,MAAIA,KAAK,CAACV,MAAN,GAAe,CAAnB,EAAsB;EAClB,WAAOU,KAAK,CAACgkE,MAAN,CAAa,UAACC,QAAD,EAAW7jE,KAAX;EAAA,aAAqBnB,IAAI,CAACsC,GAAL,CAAS0iE,QAAT,EAAmB7jE,KAAnB,CAArB;EAAA,KAAb,CAAP;EACH;EACJ;;EAGD,SAASiS,YAAT,GAAwB;EACpB,SAAOlC,QAAQ,CAACkyC,eAAT,CAAyB,8BAAzB,EAAyD,QAAzD,CAAP;EACH;;MC1VK6hB;;;;;EACF,wBAKQ;EAAA;;EAAA,mFAAJ,EAAI;EAAA,6BAJJhD,QAII;EAAA,QAJJA,QAII,8BAJO,EAIP;EAAA,mCAHJiD,cAGI;EAAA,QAHJA,cAGI,oCAHa,CAGb;EAAA,6BAFJv/B,QAEI;EAAA,QAFJA,QAEI,8BAFO,EAEP;EAAA,4BADJxC,OACI;EAAA,QADJA,OACI,6BADM,EACN;;EAAA;;EACJ,QAAIhlB,MAAM,GAAG,EAAb;;EACA,SAAK,IAAIte,GAAT,IAAgB8lC,QAAhB,EAA0B;EACtBxnB,MAAAA,MAAM,CAACte,GAAD,CAAN,GAAc8lC,QAAQ,CAAC9lC,GAAD,CAAtB;EACH;;EACDse,IAAAA,MAAM,CAAC,KAAD,CAAN,GAAgB,IAAIwjD,WAAJ,CAAgBx+B,OAAhB,CAAhB;EACA,oFAAM,IAAIkc,iBAAJ,CAAmBlhC,MAAnB,CAAN;EAEA,UAAK8jD,QAAL,GAAgBA,QAAhB;EACA,UAAKiD,cAAL,GAAsBA,cAAtB;EACA,UAAKC,UAAL,GAAkB,CAAlB;EAVI;EAWP;;;;qCAMc/vB,UAAUmL,OAAO15B,QAAQ;EACpC,WAAKu8C,MAAL,CAAYhuB,QAAZ,EAAsBvuB,MAAtB;EACH;;;kCACWuuB,UAAUvuB,QAAQ;EAE1B,UAAIu+C,cAAc,GAAG,CAArB;EACA,UAAIC,QAAQ,GAAG,KAAKpD,QAApB;EACA,UAAIpuD,MAAM,GAAG,CAAb;EACA,UAAIyxD,YAAY,GAAGlwB,QAAQ,CAACiR,UAAT,CAAoBkf,YAAvC;;EACA,UAAI1+C,MAAM,CAAC2+C,oBAAX,EAAiC;EAC7B3xD,QAAAA,MAAM,GAAGgT,MAAM,CAACpU,GAAP,GAAaoU,MAAM,CAAC8K,MAA7B;EACH,OAFD,MAEO;EACH,YAAI8zC,cAAc,GAAG,IAAI9/C,OAAJ,EAArB;EACAkB,QAAAA,MAAM,CAACiN,iBAAP,CAAyB,IAAzB;EACA2xC,QAAAA,cAAc,CAACt+C,YAAf,CAA4BN,MAAM,CAACK,WAAnC;EAEA,YAAIhgB,GAAG,GAAG,IAAIye,OAAJ,EAAV;EACA,aAAKmO,iBAAL,CAAuB,IAAvB;EACA5sB,QAAAA,GAAG,CAACigB,YAAJ,CAAiB,KAAKD,WAAtB;EAEA,YAAIw+C,IAAI,GAAGD,cAAc,CAAC1wC,UAAf,CAA0B7tB,GAA1B,CAAX;;EACA,YAAIy+D,IAAI,GAAGxgD,KAAK,CAACzf,QAAN,CAAemhB,MAAM,CAAC++C,GAAtB,CAAX,CAVG;;;EAWH/xD,QAAAA,MAAM,GAAG,IAAI7T,IAAI,CAAC6lE,GAAL,CAASF,IAAI,GAAG,CAAhB,CAAJ,GAAyBD,IAAlC,CAXG;EAYH;EACH;;EAEDN,MAAAA,cAAc,GAAGvxD,MAAM,GAAGyxD,YAAT,GAAwBD,QAAzC;EAEA,WAAK3+D,KAAL,CAAW8N,GAAX,CAAe,KAAKmxB,QAAL,CAAchnC,GAAd,CAAkBmnE,WAAjC,EAA8C,CAA9C,EAAiD,CAAjD,EAAoD7gD,cAApD,CAAmEmgD,cAAnE;EAEH;EAGD;EACA;EACA;;;;6BAEOhwB,UAAUvuB,QAAQ;EAAA;;EACrB,UAAI,KAAKs+C,UAAL,GAAkB,KAAKD,cAAvB,GAAwCa,IAAI,CAACC,GAAL,EAA5C,EAAwD;EACpD,YAAI,KAAKd,cAAT,EAAyB;EACrBe,UAAAA,UAAU,CAAC,YAAM;EACb,YAAA,MAAI,CAACC,SAAL,CAAe9wB,QAAf,EAAyBvuB,MAAzB;EACH,WAFS,EAEP,CAFO,CAAV;EAGH,SAJD,MAIO;EACH,eAAKq/C,SAAL,CAAe9wB,QAAf,EAAyBvuB,MAAzB;EACH;EACJ;EACJ;;;gCAESuuB,UAAUvuB,QAAQ;EACxB,WAAKs/C,WAAL,CAAiB/wB,QAAjB,EAA2BvuB,MAA3B;EACA,WAAK8e,QAAL,CAAchnC,GAAd,CAAkBijE,UAAlB,GAA+B,IAA/B;EAEA,WAAKj8B,QAAL,CAAchnC,GAAd,CAAkBsjE,QAAlB,GAA6B98C,KAAK,CAACO,cAAN,CAAqB0gD,kBAAkB,CAAC,IAAD,EAAOhxB,QAAP,EAAiBvuB,MAAjB,CAAvC,CAA7B;EAEA,WAAKs+C,UAAL,GAAkBY,IAAI,CAACC,GAAL,EAAlB;EACH;;;gCAES;EACN;EACA,WAAKrgC,QAAL,CAAchnC,GAAd,CAAkB+mD,OAAlB;EACA,WAAK/f,QAAL,CAAc+f,OAAd;EACH;;;0BAlEkB;EACf,aAAO,IAAP;EACH;;;;IArBoBub;;EAyFzB,IAAImF,kBAAkB,GAAI,YAAY;EAClC,MAAMC,mBAAmB,GAAG,IAAI1gD,OAAJ,EAA5B;EACA,MAAM2gD,mBAAmB,GAAG,IAAI3gD,OAAJ,EAA5B;EACA,MAAM4gD,gBAAgB,GAAG,IAAI5gD,OAAJ,EAAzB;EACA,SAAO,SAASygD,kBAAT,CAA4BrzC,MAA5B,EAAoCqiB,QAApC,EAA8CvuB,MAA9C,EAAsD;EACzD,QAAIuuB,QAAQ,CAACiR,UAAT,CAAoBzyC,KAApB,IAA6BwhC,QAAQ,CAACiR,UAAT,CAAoBxyC,MAAjD,IAA2Dkf,MAAM,CAAC4S,QAAP,CAAgBhnC,GAAhB,CAAoBqlE,SAApB,CAA8B3jE,MAA7F,EAAqG;EACjG,UAAI04B,QAAQ,GAAGhG,MAAM,CAACyzC,gBAAP,CAAwBH,mBAAxB,EAA6CtxC,UAA7C,CAAwDlO,MAAM,CAAC2/C,gBAAP,CAAwBF,mBAAxB,CAAxD,CAAf;;EACA,UAAIvtC,QAAJ,EAAc;EACV,YAAI0tC,cAAc,GAAG1zC,MAAM,CAACijC,aAAP,CAAqBuQ,gBAArB,EAAuChrD,CAAvC,GAA2C65B,QAAQ,CAACiR,UAAT,CAAoBxyC,MAA/D,GAAwEklB,QAA7F;;EACA,YAAI0tC,cAAJ,EAAoB;EAChB,iBAAOzmE,IAAI,CAACqnB,KAAL,CAAWo/C,cAAc,GAAG1zC,MAAM,CAAC4S,QAAP,CAAgBhnC,GAAhB,CAAoBimE,WAAhD,CAAP;EACH;EACJ;EACJ;;EACD,WAAO,CAAP;EACH,GAXD;EAaH,CAjBwB,EAAzB;;ECvFA;;;;;;EAOA,IAAI8B,UAAU,GAAG,CAAjB;;MACMC;;;;;EACF,sBAAc;EAAA;;EAAA;;EACV;EACA3oE,IAAAA,MAAM,CAACiuC,cAAP,wDAA4B,IAA5B,EAAkC;EAAE9qC,MAAAA,KAAK,EAAEulE,UAAU,IAAI;EAAvB,KAAlC;EACA,UAAKr+D,IAAL,GAAY,UAAZ;EAEA,UAAK6rB,QAAL,GAAgB,EAAhB;EACA,UAAK3f,MAAL,GAAc,EAAd;EACA,UAAK+2B,KAAL,GAAa,EAAb;EACA,UAAKE,aAAL,GAAqB,CAAC,EAAD,CAArB;EAEA,UAAKvX,UAAL,GAAkB,IAAlB;EAEA,UAAKyY,aAAL,GAAqB,EAArB,CAZU;;EAaV,UAAKzT,cAAL,GAAsB,IAAtB;EACA,UAAK6R,WAAL,GAAmB,IAAnB,CAdU;;EAkBV,UAAKoC,kBAAL,GAA0B,KAA1B;EACA,UAAKnC,kBAAL,GAA0B,KAA1B;EACA,UAAKG,aAAL,GAAqB,KAArB;EACA,UAAKF,iBAAL,GAAyB,KAAzB;EACA,UAAKC,gBAAL,GAAwB,KAAxB;EACA,UAAK27B,uBAAL,GAA+B,KAA/B;EACA,UAAKz7B,gBAAL,GAAwB,KAAxB;EAxBU;EAyBb;;;;yCAEkBnX,UAAU;EAEzB,UAAIH,KAAK,GAAG,IAAZ;EAEA,UAAI8Z,OAAO,GAAG3Z,QAAQ,CAAC5yB,KAAT,KAAmB,IAAnB,GAA0B4yB,QAAQ,CAAC5yB,KAAT,CAAeL,KAAzC,GAAiDoE,SAA/D;EACA,UAAIivB,UAAU,GAAGJ,QAAQ,CAACI,UAA1B;EAEA,UAAImY,SAAS,GAAGnY,UAAU,CAACzgB,QAAX,CAAoB5S,KAApC;EACA,UAAI2pC,OAAO,GAAGtW,UAAU,CAACb,MAAX,KAAsBpuB,SAAtB,GAAkCivB,UAAU,CAACb,MAAX,CAAkBxyB,KAApD,GAA4DoE,SAA1E;EACA,UAAIoP,MAAM,GAAG6f,UAAU,CAACrK,KAAX,KAAqB5kB,SAArB,GAAiCivB,UAAU,CAACrK,KAAX,CAAiBhpB,KAAlD,GAA0DoE,SAAvE;EACA,UAAIwlC,GAAG,GAAGvW,UAAU,CAAC4oC,EAAX,KAAkB73D,SAAlB,GAA8BivB,UAAU,CAAC4oC,EAAX,CAAcj8D,KAA5C,GAAoDoE,SAA9D;EACA,UAAIylC,IAAI,GAAGxW,UAAU,CAAC8mC,GAAX,KAAmB/1D,SAAnB,GAA+BivB,UAAU,CAAC8mC,GAAX,CAAen6D,KAA9C,GAAsDoE,SAAjE;EAEA,UAAIylC,IAAI,KAAKzlC,SAAb,EAAwB,KAAKqmC,aAAL,CAAmB,CAAnB,IAAwB,EAAxB;EAExB,UAAIq7B,WAAW,GAAG,EAAlB;EACA,UAAIC,OAAO,GAAG,EAAd;EACA,UAAIC,QAAQ,GAAG,EAAf;;EAEA,WAAK,IAAIxmE,CAAC,GAAG,CAAR,EAAWstC,CAAC,GAAG,CAApB,EAAuBttC,CAAC,GAAGgsC,SAAS,CAAClsC,MAArC,EAA6CE,CAAC,IAAI,CAAL,EAAQstC,CAAC,IAAI,CAA1D,EAA6D;EAEzDha,QAAAA,KAAK,CAACK,QAAN,CAAe/1B,IAAf,CAAoB,IAAIwnB,OAAJ,CAAY4mB,SAAS,CAAChsC,CAAD,CAArB,EAA0BgsC,SAAS,CAAChsC,CAAC,GAAG,CAAL,CAAnC,EAA4CgsC,SAAS,CAAChsC,CAAC,GAAG,CAAL,CAArD,CAApB;;EAEA,YAAImqC,OAAO,KAAKvlC,SAAhB,EAA2B;EAEvB0hE,UAAAA,WAAW,CAAC1oE,IAAZ,CAAiB,IAAIwnB,OAAJ,CAAY+kB,OAAO,CAACnqC,CAAD,CAAnB,EAAwBmqC,OAAO,CAACnqC,CAAC,GAAG,CAAL,CAA/B,EAAwCmqC,OAAO,CAACnqC,CAAC,GAAG,CAAL,CAA/C,CAAjB;EAEH;;EAED,YAAIgU,MAAM,KAAKpP,SAAf,EAA0B;EAEtB0uB,UAAAA,KAAK,CAACtf,MAAN,CAAapW,IAAb,CAAkB,IAAIorB,KAAJ,CAAUhV,MAAM,CAAChU,CAAD,CAAhB,EAAqBgU,MAAM,CAAChU,CAAC,GAAG,CAAL,CAA3B,EAAoCgU,MAAM,CAAChU,CAAC,GAAG,CAAL,CAA1C,CAAlB;EAEH;;EAED,YAAIoqC,GAAG,KAAKxlC,SAAZ,EAAuB;EAEnB2hE,UAAAA,OAAO,CAAC3oE,IAAR,CAAa,IAAIirC,OAAJ,CAAYuB,GAAG,CAACkD,CAAD,CAAf,EAAoBlD,GAAG,CAACkD,CAAC,GAAG,CAAL,CAAvB,CAAb;EAEH;;EAED,YAAIjD,IAAI,KAAKzlC,SAAb,EAAwB;EAEpB4hE,UAAAA,QAAQ,CAAC5oE,IAAT,CAAc,IAAIirC,OAAJ,CAAYwB,IAAI,CAACiD,CAAD,CAAhB,EAAqBjD,IAAI,CAACiD,CAAC,GAAG,CAAL,CAAzB,CAAd;EAEH;EAEJ;;EAED,eAASm5B,OAAT,CAAiBr3D,CAAjB,EAAoBG,CAApB,EAAuBqG,CAAvB,EAA0Bk1B,aAA1B,EAAyC;EAErC,YAAIM,aAAa,GAAGjB,OAAO,KAAKvlC,SAAZ,GAAwB,CAAC0hE,WAAW,CAACl3D,CAAD,CAAX,CAAejL,KAAf,EAAD,EAAyBmiE,WAAW,CAAC/2D,CAAD,CAAX,CAAepL,KAAf,EAAzB,EAAiDmiE,WAAW,CAAC1wD,CAAD,CAAX,CAAezR,KAAf,EAAjD,CAAxB,GAAmG,EAAvH;EACA,YAAIknC,YAAY,GAAGr3B,MAAM,KAAKpP,SAAX,GAAuB,CAAC0uB,KAAK,CAACtf,MAAN,CAAa5E,CAAb,EAAgBjL,KAAhB,EAAD,EAA0BmvB,KAAK,CAACtf,MAAN,CAAazE,CAAb,EAAgBpL,KAAhB,EAA1B,EAAmDmvB,KAAK,CAACtf,MAAN,CAAa4B,CAAb,EAAgBzR,KAAhB,EAAnD,CAAvB,GAAqG,EAAxH;EAEA,YAAI6mC,IAAI,GAAG,IAAIiwB,KAAJ,CAAU7rD,CAAV,EAAaG,CAAb,EAAgBqG,CAAhB,EAAmBw1B,aAAnB,EAAkCC,YAAlC,EAAgDP,aAAhD,CAAX;EAEAxX,QAAAA,KAAK,CAACyX,KAAN,CAAYntC,IAAZ,CAAiBotC,IAAjB;;EAEA,YAAIZ,GAAG,KAAKxlC,SAAZ,EAAuB;EAEnB0uB,UAAAA,KAAK,CAAC2X,aAAN,CAAoB,CAApB,EAAuBrtC,IAAvB,CAA4B,CAAC2oE,OAAO,CAACn3D,CAAD,CAAP,CAAWjL,KAAX,EAAD,EAAqBoiE,OAAO,CAACh3D,CAAD,CAAP,CAAWpL,KAAX,EAArB,EAAyCoiE,OAAO,CAAC3wD,CAAD,CAAP,CAAWzR,KAAX,EAAzC,CAA5B;EAEH;;EAED,YAAIkmC,IAAI,KAAKzlC,SAAb,EAAwB;EAEpB0uB,UAAAA,KAAK,CAAC2X,aAAN,CAAoB,CAApB,EAAuBrtC,IAAvB,CAA4B,CAAC4oE,QAAQ,CAACp3D,CAAD,CAAR,CAAYjL,KAAZ,EAAD,EAAsBqiE,QAAQ,CAACj3D,CAAD,CAAR,CAAYpL,KAAZ,EAAtB,EAA2CqiE,QAAQ,CAAC5wD,CAAD,CAAR,CAAYzR,KAAZ,EAA3C,CAA5B;EAEH;EAEJ;;EAED,UAAImmC,MAAM,GAAG7W,QAAQ,CAAC6W,MAAtB;;EAEA,UAAIA,MAAM,CAACxqC,MAAP,GAAgB,CAApB,EAAuB;EAEnB,aAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsqC,MAAM,CAACxqC,MAA3B,EAAmCE,CAAC,EAApC,EAAwC;EAEpC,cAAI6qC,KAAK,GAAGP,MAAM,CAACtqC,CAAD,CAAlB;EAEA,cAAIgP,KAAK,GAAG67B,KAAK,CAAC77B,KAAlB;EACA,cAAI+gB,KAAK,GAAG8a,KAAK,CAAC9a,KAAlB;;EAEA,eAAK,IAAIud,CAAC,GAAGt+B,KAAR,EAAeu+B,EAAE,GAAGv+B,KAAK,GAAG+gB,KAAjC,EAAwCud,CAAC,GAAGC,EAA5C,EAAgDD,CAAC,IAAI,CAArD,EAAwD;EAEpD,gBAAIF,OAAO,KAAKxoC,SAAhB,EAA2B;EAEvB6hE,cAAAA,OAAO,CAACr5B,OAAO,CAACE,CAAD,CAAR,EAAaF,OAAO,CAACE,CAAC,GAAG,CAAL,CAApB,EAA6BF,OAAO,CAACE,CAAC,GAAG,CAAL,CAApC,EAA6CzC,KAAK,CAACC,aAAnD,CAAP;EAEH,aAJD,MAIO;EAEH27B,cAAAA,OAAO,CAACn5B,CAAD,EAAIA,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG,CAAf,EAAkBzC,KAAK,CAACC,aAAxB,CAAP;EAEH;EAEJ;EAEJ;EAEJ,OAzBD,MAyBO;EAEH,YAAIsC,OAAO,KAAKxoC,SAAhB,EAA2B;EAEvB,eAAK,IAAI5E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGotC,OAAO,CAACttC,MAA5B,EAAoCE,CAAC,IAAI,CAAzC,EAA4C;EAExCymE,YAAAA,OAAO,CAACr5B,OAAO,CAACptC,CAAD,CAAR,EAAaotC,OAAO,CAACptC,CAAC,GAAG,CAAL,CAApB,EAA6BotC,OAAO,CAACptC,CAAC,GAAG,CAAL,CAApC,CAAP;EAEH;EAEJ,SARD,MAQO;EAEH,eAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgsC,SAAS,CAAClsC,MAAV,GAAmB,CAAvC,EAA0CE,CAAC,IAAI,CAA/C,EAAkD;EAE9CymE,YAAAA,OAAO,CAACzmE,CAAD,EAAIA,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG,CAAf,CAAP;EAEH;EAEJ;EAEJ;;EAED,WAAK0mE,kBAAL;;EAEA,UAAIjzC,QAAQ,CAAC8W,WAAT,KAAyB,IAA7B,EAAmC;EAE/B,aAAKA,WAAL,GAAmB9W,QAAQ,CAAC8W,WAAT,CAAqBpmC,KAArB,EAAnB;EAEH;;EAED,UAAIsvB,QAAQ,CAACiF,cAAT,KAA4B,IAAhC,EAAsC;EAElC,aAAKA,cAAL,GAAsBjF,QAAQ,CAACiF,cAAT,CAAwBv0B,KAAxB,EAAtB;EAEH;;EAED,aAAO,IAAP;EAEH;;;2CAEoB;EAEjB,UAAI,KAAKomC,WAAL,KAAqB,IAAzB,EAA+B;EAE3B,aAAKA,WAAL,GAAmB,IAAI3Y,IAAJ,EAAnB;EAEH;;EAED,WAAK2Y,WAAL,CAAiBlW,aAAjB,CAA+B,KAAKV,QAApC;EAEH;;;8CAEuB;EAEpB,UAAI,KAAK+E,cAAL,KAAwB,IAA5B,EAAkC;EAE9B,aAAKA,cAAL,GAAsB,IAAIxE,MAAJ,EAAtB;EAEH;;EAED,WAAKwE,cAAL,CAAoBrE,aAApB,CAAkC,KAAKV,QAAvC;EAEH;;;2CAEoB;EAEjB,UAAIwE,EAAE,GAAG,IAAI/S,OAAJ,EAAT;EAAA,UAAwB+nB,EAAE,GAAG,IAAI/nB,OAAJ,EAA7B;;EAEA,WAAK,IAAI/W,CAAC,GAAG,CAAR,EAAW2uD,EAAE,GAAG,KAAKjyB,KAAL,CAAWjrC,MAAhC,EAAwCuO,CAAC,GAAG2uD,EAA5C,EAAgD3uD,CAAC,EAAjD,EAAqD;EAEjD,YAAI28B,IAAI,GAAG,KAAKD,KAAL,CAAW18B,CAAX,CAAX;EAEA,YAAIw+B,EAAE,GAAG,KAAKlZ,QAAL,CAAcqX,IAAI,CAAC57B,CAAnB,CAAT;EACA,YAAI09B,EAAE,GAAG,KAAKnZ,QAAL,CAAcqX,IAAI,CAACz7B,CAAnB,CAAT;EACA,YAAIw9B,EAAE,GAAG,KAAKpZ,QAAL,CAAcqX,IAAI,CAACp1B,CAAnB,CAAT;EAEAuiB,QAAAA,EAAE,CAACxS,UAAH,CAAconB,EAAd,EAAkBD,EAAlB;EACAK,QAAAA,EAAE,CAACxnB,UAAH,CAAcknB,EAAd,EAAkBC,EAAlB;EACA3U,QAAAA,EAAE,CAACzC,KAAH,CAASyX,EAAT;EAEAhV,QAAAA,EAAE,CAACtR,SAAH;EAEAmkB,QAAAA,IAAI,CAAChY,MAAL,CAAYtuB,IAAZ,CAAiByzB,EAAjB;EAEH;EAEJ;EAED;;;;;;;;sCAMgB;EAEZ,UAAIwuC,WAAW,GAAG,EAAlB,CAFY;;EAGZ,UAAIrjE,MAAM,GAAG,EAAb;EAAA,UAAiBsjE,OAAO,GAAG,EAA3B;EAEA,UAAIriD,CAAJ,EAAOjlB,GAAP;EACA,UAAIunE,eAAe,GAAG,CAAtB,CANY;;EAOZ,UAAIlsC,SAAS,GAAGl7B,IAAI,CAACC,GAAL,CAAS,EAAT,EAAamnE,eAAb,CAAhB;EACA,UAAI7mE,CAAJ,EAAO4K,EAAP,EAAWogC,IAAX;EACA,UAAIoC,OAAJ,EAAaE,CAAb,EAAgBC,EAAhB;;EAEA,WAAKvtC,CAAC,GAAG,CAAJ,EAAO4K,EAAE,GAAG,KAAK+oB,QAAL,CAAc7zB,MAA/B,EAAuCE,CAAC,GAAG4K,EAA3C,EAA+C5K,CAAC,EAAhD,EAAoD;EAEhDukB,QAAAA,CAAC,GAAG,KAAKoP,QAAL,CAAc3zB,CAAd,CAAJ;EACAV,QAAAA,GAAG,GAAGG,IAAI,CAACqnB,KAAL,CAAWvC,CAAC,CAACxJ,CAAF,GAAM4f,SAAjB,IAA8B,GAA9B,GAAoCl7B,IAAI,CAACqnB,KAAL,CAAWvC,CAAC,CAACvJ,CAAF,GAAM2f,SAAjB,CAApC,GAAkE,GAAlE,GAAwEl7B,IAAI,CAACqnB,KAAL,CAAWvC,CAAC,CAACJ,CAAF,GAAMwW,SAAjB,CAA9E;;EAEA,YAAIgsC,WAAW,CAACrnE,GAAD,CAAX,KAAqBsF,SAAzB,EAAoC;EAEhC+hE,UAAAA,WAAW,CAACrnE,GAAD,CAAX,GAAmBU,CAAnB;EACAsD,UAAAA,MAAM,CAAC1F,IAAP,CAAY,KAAK+1B,QAAL,CAAc3zB,CAAd,CAAZ;EACA4mE,UAAAA,OAAO,CAAC5mE,CAAD,CAAP,GAAasD,MAAM,CAACxD,MAAP,GAAgB,CAA7B;EAEH,SAND,MAMO;EAEH;EACA8mE,UAAAA,OAAO,CAAC5mE,CAAD,CAAP,GAAa4mE,OAAO,CAACD,WAAW,CAACrnE,GAAD,CAAZ,CAApB;EAEH;EAEJ,OA7BW;EAiCZ;;;EACA,UAAIwnE,mBAAmB,GAAG,EAA1B;;EAEA,WAAK9mE,CAAC,GAAG,CAAJ,EAAO4K,EAAE,GAAG,KAAKmgC,KAAL,CAAWjrC,MAA5B,EAAoCE,CAAC,GAAG4K,EAAxC,EAA4C5K,CAAC,EAA7C,EAAiD;EAE7CgrC,QAAAA,IAAI,GAAG,KAAKD,KAAL,CAAW/qC,CAAX,CAAP;EAEAgrC,QAAAA,IAAI,CAAC57B,CAAL,GAASw3D,OAAO,CAAC57B,IAAI,CAAC57B,CAAN,CAAhB;EACA47B,QAAAA,IAAI,CAACz7B,CAAL,GAASq3D,OAAO,CAAC57B,IAAI,CAACz7B,CAAN,CAAhB;EACAy7B,QAAAA,IAAI,CAACp1B,CAAL,GAASgxD,OAAO,CAAC57B,IAAI,CAACp1B,CAAN,CAAhB;EAEAw3B,QAAAA,OAAO,GAAG,CAACpC,IAAI,CAAC57B,CAAN,EAAS47B,IAAI,CAACz7B,CAAd,EAAiBy7B,IAAI,CAACp1B,CAAtB,CAAV,CAR6C;EAW7C;;EACA,aAAK,IAAI3R,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;EAExB,cAAImpC,OAAO,CAACnpC,CAAD,CAAP,KAAempC,OAAO,CAAC,CAACnpC,CAAC,GAAG,CAAL,IAAU,CAAX,CAA1B,EAAyC;EAErC6iE,YAAAA,mBAAmB,CAAClpE,IAApB,CAAyBoC,CAAzB;EACA;EAEH;EAEJ;EAEJ;;EAED,WAAKA,CAAC,GAAG8mE,mBAAmB,CAAChnE,MAApB,GAA6B,CAAtC,EAAyCE,CAAC,IAAI,CAA9C,EAAiDA,CAAC,EAAlD,EAAsD;EAElD,YAAI+mE,GAAG,GAAGD,mBAAmB,CAAC9mE,CAAD,CAA7B;EAEA,aAAK+qC,KAAL,CAAW3gC,MAAX,CAAkB28D,GAAlB,EAAuB,CAAvB;;EAEA,aAAKz5B,CAAC,GAAG,CAAJ,EAAOC,EAAE,GAAG,KAAKtC,aAAL,CAAmBnrC,MAApC,EAA4CwtC,CAAC,GAAGC,EAAhD,EAAoDD,CAAC,EAArD,EAAyD;EAErD,eAAKrC,aAAL,CAAmBqC,CAAnB,EAAsBljC,MAAtB,CAA6B28D,GAA7B,EAAkC,CAAlC;EAEH;EAEJ,OAzEW;;;EA6EZ,UAAI/Q,IAAI,GAAG,KAAKriC,QAAL,CAAc7zB,MAAd,GAAuBwD,MAAM,CAACxD,MAAzC;EACA,WAAK6zB,QAAL,GAAgBrwB,MAAhB;EACA,aAAO0yD,IAAP;EAEH;;;8BAEO;EAEJ,aAAO,IAAIoQ,QAAJ,GAAe1hE,IAAf,CAAoB,IAApB,CAAP;EAEH;;;2BAEIgpC,QAAQ;EAET,UAAI1tC,CAAJ,EAAO4K,EAAP,EAAW0iC,CAAX,EAAcC,EAAd,EAAkBy5B,CAAlB,EAAqBC,EAArB,CAFS;;EAMT,WAAKtzC,QAAL,GAAgB,EAAhB;EACA,WAAK3f,MAAL,GAAc,EAAd;EACA,WAAK+2B,KAAL,GAAa,EAAb;EACA,WAAKE,aAAL,GAAqB,CAAC,EAAD,CAArB;EACA,WAAKV,WAAL,GAAmB,IAAnB;EACA,WAAK7R,cAAL,GAAsB,IAAtB,CAXS;;EAeT,WAAK33B,IAAL,GAAY2sC,MAAM,CAAC3sC,IAAnB,CAfS;;EAmBT,UAAI4yB,QAAQ,GAAG+Z,MAAM,CAAC/Z,QAAtB;;EAEA,WAAK3zB,CAAC,GAAG,CAAJ,EAAO4K,EAAE,GAAG+oB,QAAQ,CAAC7zB,MAA1B,EAAkCE,CAAC,GAAG4K,EAAtC,EAA0C5K,CAAC,EAA3C,EAA+C;EAE3C,aAAK2zB,QAAL,CAAc/1B,IAAd,CAAmB+1B,QAAQ,CAAC3zB,CAAD,CAAR,CAAYmE,KAAZ,EAAnB;EAEH,OAzBQ;;;EA6BT,UAAI6P,MAAM,GAAG05B,MAAM,CAAC15B,MAApB;;EAEA,WAAKhU,CAAC,GAAG,CAAJ,EAAO4K,EAAE,GAAGoJ,MAAM,CAAClU,MAAxB,EAAgCE,CAAC,GAAG4K,EAApC,EAAwC5K,CAAC,EAAzC,EAA6C;EAEzC,aAAKgU,MAAL,CAAYpW,IAAZ,CAAiBoW,MAAM,CAAChU,CAAD,CAAN,CAAUmE,KAAV,EAAjB;EAEH,OAnCQ;;;EAuCT,UAAI4mC,KAAK,GAAG2C,MAAM,CAAC3C,KAAnB;;EAEA,WAAK/qC,CAAC,GAAG,CAAJ,EAAO4K,EAAE,GAAGmgC,KAAK,CAACjrC,MAAvB,EAA+BE,CAAC,GAAG4K,EAAnC,EAAuC5K,CAAC,EAAxC,EAA4C;EAExC,aAAK+qC,KAAL,CAAWntC,IAAX,CAAgBmtC,KAAK,CAAC/qC,CAAD,CAAL,CAASmE,KAAT,EAAhB;EAEH,OA7CQ;;;EAiDT,WAAKnE,CAAC,GAAG,CAAJ,EAAO4K,EAAE,GAAG8iC,MAAM,CAACzC,aAAP,CAAqBnrC,MAAtC,EAA8CE,CAAC,GAAG4K,EAAlD,EAAsD5K,CAAC,EAAvD,EAA2D;EAEvD,YAAIirC,aAAa,GAAGyC,MAAM,CAACzC,aAAP,CAAqBjrC,CAArB,CAApB;;EAEA,YAAI,KAAKirC,aAAL,CAAmBjrC,CAAnB,MAA0B4E,SAA9B,EAAyC;EAErC,eAAKqmC,aAAL,CAAmBjrC,CAAnB,IAAwB,EAAxB;EAEH;;EAED,aAAKstC,CAAC,GAAG,CAAJ,EAAOC,EAAE,GAAGtC,aAAa,CAACnrC,MAA/B,EAAuCwtC,CAAC,GAAGC,EAA3C,EAA+CD,CAAC,EAAhD,EAAoD;EAEhD,cAAIlD,GAAG,GAAGa,aAAa,CAACqC,CAAD,CAAvB;EAAA,cAA4B45B,OAAO,GAAG,EAAtC;;EAEA,eAAKF,CAAC,GAAG,CAAJ,EAAOC,EAAE,GAAG78B,GAAG,CAACtqC,MAArB,EAA6BknE,CAAC,GAAGC,EAAjC,EAAqCD,CAAC,EAAtC,EAA0C;EAEtC,gBAAIvK,EAAE,GAAGryB,GAAG,CAAC48B,CAAD,CAAZ;EAEAE,YAAAA,OAAO,CAACtpE,IAAR,CAAa6+D,EAAE,CAACt4D,KAAH,EAAb;EAEH;;EAED,eAAK8mC,aAAL,CAAmBjrC,CAAnB,EAAsBpC,IAAtB,CAA2BspE,OAA3B;EAEH;EAEJ,OA3EQ;;;EAgFT,UAAI38B,WAAW,GAAGmD,MAAM,CAACnD,WAAzB;;EAEA,UAAIA,WAAW,KAAK,IAApB,EAA0B;EAEtB,aAAKA,WAAL,GAAmBA,WAAW,CAACpmC,KAAZ,EAAnB;EAEH,OAtFQ;;;EA0FT,UAAIu0B,cAAc,GAAGgV,MAAM,CAAChV,cAA5B;;EAEA,UAAIA,cAAc,KAAK,IAAvB,EAA6B;EAEzB,aAAKA,cAAL,GAAsBA,cAAc,CAACv0B,KAAf,EAAtB;EAEH,OAhGQ;;;EAoGT,WAAKwoC,kBAAL,GAA0Be,MAAM,CAACf,kBAAjC;EACA,WAAKnC,kBAAL,GAA0BkD,MAAM,CAAClD,kBAAjC;EACA,WAAKG,aAAL,GAAqB+C,MAAM,CAAC/C,aAA5B;EACA,WAAKF,iBAAL,GAAyBiD,MAAM,CAACjD,iBAAhC;EACA,WAAKC,gBAAL,GAAwBgD,MAAM,CAAChD,gBAA/B;EACA,WAAK27B,uBAAL,GAA+B34B,MAAM,CAAC24B,uBAAtC;EACA,WAAKz7B,gBAAL,GAAwB8C,MAAM,CAAC9C,gBAA/B;EAEA,aAAO,IAAP;EAEH;;;gCAES;EAEN,WAAKgD,IAAL,CAAU;EAAE9lC,QAAAA,IAAI,EAAE;EAAR,OAAV;EAEH;;;;IA1akByX;;MCRjB4nD;;;;;EACF,0BAAYptD,MAAZ,EAAoBqtD,QAApB,EAA8BC,UAA9B,EAA0CC,WAA1C,EAAuD;EAAA;;EAAA;;EAEnD;EAEA,UAAKx/D,IAAL,GAAY,gBAAZ;EAEA,UAAK2xB,UAAL,GAAkB;EACd1f,MAAAA,MAAM,EAAEA,MADM;EAEdqtD,MAAAA,QAAQ,EAAEA,QAFI;EAGdC,MAAAA,UAAU,EAAEA,UAHE;EAIdC,MAAAA,WAAW,EAAEA;EAJC,KAAlB;;EAOA,UAAKC,kBAAL,CAAwB,IAAIC,oBAAJ,CAAyBztD,MAAzB,EAAiCqtD,QAAjC,EAA2CC,UAA3C,EAAuDC,WAAvD,CAAxB;;EACA,UAAKG,aAAL;;EAdmD;EAgBtD;;;IAjBwBrB;;;MAsBvBoB;;;;;EACF,gCAAYztD,MAAZ,EAAoBqtD,QAApB,EAA8BC,UAA9B,EAA0CC,WAA1C,EAAuD;EAAA;;EAAA;;EAEnD;EAEA,WAAKx/D,IAAL,GAAY,sBAAZ;EAEA,WAAK2xB,UAAL,GAAkB;EACd1f,MAAAA,MAAM,EAAEA,MADM;EAEdqtD,MAAAA,QAAQ,EAAEA,QAFI;EAGdC,MAAAA,UAAU,EAAEA,UAHE;EAIdC,MAAAA,WAAW,EAAEA;EAJC,KAAlB;EAOAvtD,IAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;EACAqtD,IAAAA,QAAQ,GAAGA,QAAQ,KAAKxiE,SAAb,GAAyBnF,IAAI,CAACsC,GAAL,CAAS,CAAT,EAAYqlE,QAAZ,CAAzB,GAAiD,CAA5D;EAEAC,IAAAA,UAAU,GAAGA,UAAU,KAAKziE,SAAf,GAA2ByiE,UAA3B,GAAwC,CAArD;EACAC,IAAAA,WAAW,GAAGA,WAAW,KAAK1iE,SAAhB,GAA4B0iE,WAA5B,GAA0C7nE,IAAI,CAACwF,EAAL,GAAU,CAAlE,CAjBmD;;EAqBnD,QAAImoC,OAAO,GAAG,EAAd;EACA,QAAIzZ,QAAQ,GAAG,EAAf;EACA,QAAIwW,OAAO,GAAG,EAAd;EACA,QAAIC,GAAG,GAAG,EAAV,CAxBmD;;EA4BnD,QAAIpqC,CAAJ,EAAO0lB,CAAP;EACA,QAAIgiD,MAAM,GAAG,IAAItiD,OAAJ,EAAb;EACA,QAAIq3C,EAAE,GAAG,IAAI5zB,OAAJ,EAAT,CA9BmD;;EAkCnDlV,IAAAA,QAAQ,CAAC/1B,IAAT,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;EACAusC,IAAAA,OAAO,CAACvsC,IAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;EACAwsC,IAAAA,GAAG,CAACxsC,IAAJ,CAAS,GAAT,EAAc,GAAd;;EAEA,SAAK8nB,CAAC,GAAG,CAAJ,EAAO1lB,CAAC,GAAG,CAAhB,EAAmB0lB,CAAC,IAAI0hD,QAAxB,EAAkC1hD,CAAC,IAAK1lB,CAAC,IAAI,CAA7C,EAAgD;EAE5C,UAAI2nE,OAAO,GAAGN,UAAU,GAAG3hD,CAAC,GAAG0hD,QAAJ,GAAeE,WAA1C,CAF4C;;EAM5CI,MAAAA,MAAM,CAAC3sD,CAAP,GAAWhB,MAAM,GAAGta,IAAI,CAAC8X,GAAL,CAASowD,OAAT,CAApB;EACAD,MAAAA,MAAM,CAAC1sD,CAAP,GAAWjB,MAAM,GAAGta,IAAI,CAACgY,GAAL,CAASkwD,OAAT,CAApB;EAEAh0C,MAAAA,QAAQ,CAAC/1B,IAAT,CAAc8pE,MAAM,CAAC3sD,CAArB,EAAwB2sD,MAAM,CAAC1sD,CAA/B,EAAkC0sD,MAAM,CAACvjD,CAAzC,EAT4C;;EAa5CgmB,MAAAA,OAAO,CAACvsC,IAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAb4C;;EAiB5C6+D,MAAAA,EAAE,CAAC1hD,CAAH,GAAO,CAAC4Y,QAAQ,CAAC3zB,CAAD,CAAR,GAAc+Z,MAAd,GAAuB,CAAxB,IAA6B,CAApC;EACA0iD,MAAAA,EAAE,CAACzhD,CAAH,GAAO,CAAC2Y,QAAQ,CAAC3zB,CAAC,GAAG,CAAL,CAAR,GAAkB+Z,MAAlB,GAA2B,CAA5B,IAAiC,CAAxC;EAEAqwB,MAAAA,GAAG,CAACxsC,IAAJ,CAAS6+D,EAAE,CAAC1hD,CAAZ,EAAe0hD,EAAE,CAACzhD,CAAlB;EAEH,KA5DkD;;;EAgEnD,SAAKhb,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAIonE,QAAjB,EAA2BpnE,CAAC,EAA5B,EAAgC;EAE5BotC,MAAAA,OAAO,CAACxvC,IAAR,CAAaoC,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuB,CAAvB;EAEH,KApEkD;;;EAwEnD,WAAK6rC,QAAL,CAAcuB,OAAd;;EACA,WAAKxB,YAAL,CAAkB,UAAlB,EAA8B,IAAI5B,sBAAJ,CAA2BrW,QAA3B,EAAqC,CAArC,CAA9B;;EACA,WAAKiY,YAAL,CAAkB,QAAlB,EAA4B,IAAI5B,sBAAJ,CAA2BG,OAA3B,EAAoC,CAApC,CAA5B;;EACA,WAAKyB,YAAL,CAAkB,IAAlB,EAAwB,IAAI5B,sBAAJ,CAA2BI,GAA3B,EAAgC,CAAhC,CAAxB;;EA3EmD;EA6EtD;;;IA9E8BqB;;MCxB7Bm8B;;;;;EACF,yBAAYv0D,KAAZ,EAAmBC,MAAnB,EAA2Bu0D,aAA3B,EAA0CC,cAA1C,EAA0D;EAAA;;EAAA;;EAEtD;EAEA,UAAKhgE,IAAL,GAAY,eAAZ;EAEA,UAAK2xB,UAAL,GAAkB;EACdpmB,MAAAA,KAAK,EAAEA,KADO;EAEdC,MAAAA,MAAM,EAAEA,MAFM;EAGdu0D,MAAAA,aAAa,EAAEA,aAHD;EAIdC,MAAAA,cAAc,EAAEA;EAJF,KAAlB;;EAOA,UAAKP,kBAAL,CAAwB,IAAIQ,mBAAJ,CAAwB10D,KAAxB,EAA+BC,MAA/B,EAAuCu0D,aAAvC,EAAsDC,cAAtD,CAAxB;;EACA,UAAKL,aAAL;;EAdsD;EAgBzD;;;IAjBuBrB;;;MAsBtB2B;;;;;EACF,+BAAY10D,KAAZ,EAAmBC,MAAnB,EAA2Bu0D,aAA3B,EAA0CC,cAA1C,EAA0D;EAAA;;EAAA;;EAEtD;EAEA,WAAKhgE,IAAL,GAAY,qBAAZ;EAEA,WAAK2xB,UAAL,GAAkB;EACdpmB,MAAAA,KAAK,EAAEA,KADO;EAEdC,MAAAA,MAAM,EAAEA,MAFM;EAGdu0D,MAAAA,aAAa,EAAEA,aAHD;EAIdC,MAAAA,cAAc,EAAEA;EAJF,KAAlB;EAOA,QAAIE,UAAU,GAAG30D,KAAK,GAAG,CAAzB;EACA,QAAI40D,WAAW,GAAG30D,MAAM,GAAG,CAA3B;EAEA,QAAI40D,KAAK,GAAGzoE,IAAI,CAACqE,KAAL,CAAW+jE,aAAX,KAA6B,CAAzC;EACA,QAAIM,KAAK,GAAG1oE,IAAI,CAACqE,KAAL,CAAWgkE,cAAX,KAA8B,CAA1C;EAEA,QAAIM,MAAM,GAAGF,KAAK,GAAG,CAArB;EACA,QAAIG,MAAM,GAAGF,KAAK,GAAG,CAArB;EAEA,QAAIG,aAAa,GAAGj1D,KAAK,GAAG60D,KAA5B;EACA,QAAIK,cAAc,GAAGj1D,MAAM,GAAG60D,KAA9B;EAEA,QAAIjiD,EAAJ,EAAQC,EAAR,CAzBsD;;EA6BtD,QAAIinB,OAAO,GAAG,EAAd;EACA,QAAIzZ,QAAQ,GAAG,EAAf;EACA,QAAIwW,OAAO,GAAG,EAAd;EACA,QAAIC,GAAG,GAAG,EAAV,CAhCsD;;EAoCtD,SAAKjkB,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAGkiD,MAAlB,EAA0BliD,EAAE,EAA5B,EAAgC;EAE5B,UAAInL,CAAC,GAAGmL,EAAE,GAAGoiD,cAAL,GAAsBN,WAA9B;;EAEA,WAAK/hD,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAGkiD,MAAlB,EAA0BliD,EAAE,EAA5B,EAAgC;EAE5B,YAAInL,CAAC,GAAGmL,EAAE,GAAGoiD,aAAL,GAAqBN,UAA7B;EAEAr0C,QAAAA,QAAQ,CAAC/1B,IAAT,CAAcmd,CAAd,EAAiB,CAAEC,CAAnB,EAAsB,CAAtB;EAEAmvB,QAAAA,OAAO,CAACvsC,IAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;EAEAwsC,QAAAA,GAAG,CAACxsC,IAAJ,CAASsoB,EAAE,GAAGgiD,KAAd;EACA99B,QAAAA,GAAG,CAACxsC,IAAJ,CAAS,IAAKuoB,EAAE,GAAGgiD,KAAnB;EAEH;EAEJ,KArDqD;;;EAyDtD,SAAKhiD,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAGgiD,KAAlB,EAAyBhiD,EAAE,EAA3B,EAA+B;EAE3B,WAAKD,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAGgiD,KAAlB,EAAyBhiD,EAAE,EAA3B,EAA+B;EAE3B,YAAI9W,CAAC,GAAG8W,EAAE,GAAGkiD,MAAM,GAAGjiD,EAAtB;EACA,YAAI5W,CAAC,GAAG2W,EAAE,GAAGkiD,MAAM,IAAIjiD,EAAE,GAAG,CAAT,CAAnB;EACA,YAAIvQ,CAAC,GAAIsQ,EAAE,GAAG,CAAN,GAAWkiD,MAAM,IAAIjiD,EAAE,GAAG,CAAT,CAAzB;EACA,YAAItb,CAAC,GAAIqb,EAAE,GAAG,CAAN,GAAWkiD,MAAM,GAAGjiD,EAA5B,CAL2B;;EAS3BinB,QAAAA,OAAO,CAACxvC,IAAR,CAAawR,CAAb,EAAgBG,CAAhB,EAAmB1E,CAAnB;EACAuiC,QAAAA,OAAO,CAACxvC,IAAR,CAAa2R,CAAb,EAAgBqG,CAAhB,EAAmB/K,CAAnB;EAEH;EAEJ,KAzEqD;;;EA6EtD,WAAKghC,QAAL,CAAcuB,OAAd;;EACA,WAAKxB,YAAL,CAAkB,UAAlB,EAA8B,IAAI5B,sBAAJ,CAA2BrW,QAA3B,EAAqC,CAArC,CAA9B;;EACA,WAAKiY,YAAL,CAAkB,QAAlB,EAA4B,IAAI5B,sBAAJ,CAA2BG,OAA3B,EAAoC,CAApC,CAA5B;;EACA,WAAKyB,YAAL,CAAkB,IAAlB,EAAwB,IAAI5B,sBAAJ,CAA2BI,GAA3B,EAAgC,CAAhC,CAAxB;;EAhFsD;EAkFzD;;;IAnF6BqB;;MCrB5B+8B;;;;;EACF,uBAAYn1D,KAAZ,EAAmBC,MAAnB,EAA2BurB,KAA3B,EAAkCgpC,aAAlC,EAAiDC,cAAjD,EAAiEW,aAAjE,EAAgF;EAAA;;EAAA;;EAC5E;EACA,UAAK3gE,IAAL,GAAY,aAAZ;EACA,UAAK2xB,UAAL,GAAkB;EACdpmB,MAAAA,KAAK,EAAEA,KADO;EAEdC,MAAAA,MAAM,EAAEA,MAFM;EAGdurB,MAAAA,KAAK,EAAEA,KAHO;EAIdgpC,MAAAA,aAAa,EAAEA,aAJD;EAKdC,MAAAA,cAAc,EAAEA,cALF;EAMdW,MAAAA,aAAa,EAAEA;EAND,KAAlB;;EASA,UAAKlB,kBAAL,CAAwB,IAAImB,iBAAJ,CAAsBr1D,KAAtB,EAA6BC,MAA7B,EAAqCurB,KAArC,EAA4CgpC,aAA5C,EAA2DC,cAA3D,EAA2EW,aAA3E,CAAxB;;EACA,UAAKhB,aAAL;;EAb4E;EAc/E;;;IAfqBrB;;;MAmBpBsC;;;;;EACF,6BAAYr1D,KAAZ,EAAmBC,MAAnB,EAA2BurB,KAA3B,EAAkCgpC,aAAlC,EAAiDC,cAAjD,EAAiEW,aAAjE,EAAgF;EAAA;;EAAA;;EAC5E;EAEA,WAAK3gE,IAAL,GAAY,mBAAZ;EAEA,WAAK2xB,UAAL,GAAkB;EACdpmB,MAAAA,KAAK,EAAEA,KADO;EAEdC,MAAAA,MAAM,EAAEA,MAFM;EAGdurB,MAAAA,KAAK,EAAEA,KAHO;EAIdgpC,MAAAA,aAAa,EAAEA,aAJD;EAKdC,MAAAA,cAAc,EAAEA,cALF;EAMdW,MAAAA,aAAa,EAAEA;EAND,KAAlB;;EASA,QAAIn1C,KAAK,yDAAT,CAd4E;;;EAkB5Eu0C,IAAAA,aAAa,GAAGpoE,IAAI,CAACqE,KAAL,CAAW+jE,aAAX,KAA6B,CAA7C;EACAC,IAAAA,cAAc,GAAGroE,IAAI,CAACqE,KAAL,CAAWgkE,cAAX,KAA8B,CAA/C;EACAW,IAAAA,aAAa,GAAGhpE,IAAI,CAACqE,KAAL,CAAW2kE,aAAX,KAA6B,CAA7C,CApB4E;;EAwB5E,QAAIr7B,OAAO,GAAG,EAAd;EACA,QAAIzZ,QAAQ,GAAG,EAAf;EACA,QAAIwW,OAAO,GAAG,EAAd;EACA,QAAIC,GAAG,GAAG,EAAV,CA3B4E;;EA+B5E,QAAIu+B,gBAAgB,GAAG,CAAvB;EACA,QAAIne,UAAU,GAAG,CAAjB,CAhC4E;;EAoC5Eoe,IAAAA,UAAU,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,CAAE,CAAlB,EAAqB,CAAE,CAAvB,EAA0B/pC,KAA1B,EAAiCvrB,MAAjC,EAAyCD,KAAzC,EAAgDo1D,aAAhD,EAA+DX,cAA/D,EAA+E,CAA/E,CAAV,CApC4E;;EAqC5Ec,IAAAA,UAAU,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,CAAhB,EAAmB,CAAE,CAArB,EAAwB/pC,KAAxB,EAA+BvrB,MAA/B,EAAuC,CAAED,KAAzC,EAAgDo1D,aAAhD,EAA+DX,cAA/D,EAA+E,CAA/E,CAAV,CArC4E;;EAsC5Ec,IAAAA,UAAU,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,CAAhB,EAAmB,CAAnB,EAAsBv1D,KAAtB,EAA6BwrB,KAA7B,EAAoCvrB,MAApC,EAA4Cu0D,aAA5C,EAA2DY,aAA3D,EAA0E,CAA1E,CAAV,CAtC4E;;EAuC5EG,IAAAA,UAAU,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,CAAhB,EAAmB,CAAE,CAArB,EAAwBv1D,KAAxB,EAA+BwrB,KAA/B,EAAsC,CAAEvrB,MAAxC,EAAgDu0D,aAAhD,EAA+DY,aAA/D,EAA8E,CAA9E,CAAV,CAvC4E;;EAwC5EG,IAAAA,UAAU,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,CAAhB,EAAmB,CAAE,CAArB,EAAwBv1D,KAAxB,EAA+BC,MAA/B,EAAuCurB,KAAvC,EAA8CgpC,aAA9C,EAA6DC,cAA7D,EAA6E,CAA7E,CAAV,CAxC4E;;EAyC5Ec,IAAAA,UAAU,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,CAAE,CAAlB,EAAqB,CAAE,CAAvB,EAA0Bv1D,KAA1B,EAAiCC,MAAjC,EAAyC,CAAEurB,KAA3C,EAAkDgpC,aAAlD,EAAiEC,cAAjE,EAAiF,CAAjF,CAAV,CAzC4E;EA2C5E;;EAEA,WAAKj8B,QAAL,CAAcuB,OAAd;;EACA,WAAKxB,YAAL,CAAkB,UAAlB,EAA8B,IAAI5B,sBAAJ,CAA2BrW,QAA3B,EAAqC,CAArC,CAA9B;;EACA,WAAKiY,YAAL,CAAkB,QAAlB,EAA4B,IAAI5B,sBAAJ,CAA2BG,OAA3B,EAAoC,CAApC,CAA5B;;EACA,WAAKyB,YAAL,CAAkB,IAAlB,EAAwB,IAAI5B,sBAAJ,CAA2BI,GAA3B,EAAgC,CAAhC,CAAxB;;EAEA,aAASw+B,UAAT,CAAoBx4B,CAApB,EAAuB7rB,CAAvB,EAA0BH,CAA1B,EAA6BykD,IAA7B,EAAmCC,IAAnC,EAAyCz1D,KAAzC,EAAgDC,MAAhD,EAAwDurB,KAAxD,EAA+DqpC,KAA/D,EAAsEC,KAAtE,EAA6Er9B,aAA7E,EAA4F;EAExF,UAAIi+B,YAAY,GAAG11D,KAAK,GAAG60D,KAA3B;EACA,UAAIc,aAAa,GAAG11D,MAAM,GAAG60D,KAA7B;EAEA,UAAIc,SAAS,GAAG51D,KAAK,GAAG,CAAxB;EACA,UAAI61D,UAAU,GAAG51D,MAAM,GAAG,CAA1B;EACA,UAAI61D,SAAS,GAAGtqC,KAAK,GAAG,CAAxB;EAEA,UAAIupC,MAAM,GAAGF,KAAK,GAAG,CAArB;EACA,UAAIG,MAAM,GAAGF,KAAK,GAAG,CAArB;EAEA,UAAIiB,aAAa,GAAG,CAApB;EACA,UAAI3e,UAAU,GAAG,CAAjB;EAEA,UAAIvkC,EAAJ,EAAQC,EAAR;EAEA,UAAIuB,MAAM,GAAG,IAAItC,OAAJ,EAAb,CAjBwF;;EAqBxF,WAAKe,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAGkiD,MAAlB,EAA0BliD,EAAE,EAA5B,EAAgC;EAE5B,YAAInL,CAAC,GAAGmL,EAAE,GAAG6iD,aAAL,GAAqBE,UAA7B;;EAEA,aAAKhjD,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAGkiD,MAAlB,EAA0BliD,EAAE,EAA5B,EAAgC;EAE5B,cAAInL,CAAC,GAAGmL,EAAE,GAAG6iD,YAAL,GAAoBE,SAA5B,CAF4B;;EAM5BvhD,UAAAA,MAAM,CAAC0oB,CAAD,CAAN,GAAYr1B,CAAC,GAAG8tD,IAAhB;EACAnhD,UAAAA,MAAM,CAACnD,CAAD,CAAN,GAAYvJ,CAAC,GAAG8tD,IAAhB;EACAphD,UAAAA,MAAM,CAACtD,CAAD,CAAN,GAAY+kD,SAAZ,CAR4B;;EAY5Bx1C,UAAAA,QAAQ,CAAC/1B,IAAT,CAAc8pB,MAAM,CAAC3M,CAArB,EAAwB2M,MAAM,CAAC1M,CAA/B,EAAkC0M,MAAM,CAACvD,CAAzC,EAZ4B;;EAgB5BuD,UAAAA,MAAM,CAAC0oB,CAAD,CAAN,GAAY,CAAZ;EACA1oB,UAAAA,MAAM,CAACnD,CAAD,CAAN,GAAY,CAAZ;EACAmD,UAAAA,MAAM,CAACtD,CAAD,CAAN,GAAYya,KAAK,GAAG,CAAR,GAAY,CAAZ,GAAgB,CAAE,CAA9B,CAlB4B;;EAsB5BsL,UAAAA,OAAO,CAACvsC,IAAR,CAAa8pB,MAAM,CAAC3M,CAApB,EAAuB2M,MAAM,CAAC1M,CAA9B,EAAiC0M,MAAM,CAACvD,CAAxC,EAtB4B;;EA0B5BimB,UAAAA,GAAG,CAACxsC,IAAJ,CAASsoB,EAAE,GAAGgiD,KAAd;EACA99B,UAAAA,GAAG,CAACxsC,IAAJ,CAAS,IAAKuoB,EAAE,GAAGgiD,KAAnB,EA3B4B;;EA+B5BiB,UAAAA,aAAa,IAAI,CAAjB;EAEH;EAEJ,OA5DuF;EAgExF;EACA;EACA;;;EAEA,WAAKjjD,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAGgiD,KAAlB,EAAyBhiD,EAAE,EAA3B,EAA+B;EAE3B,aAAKD,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAGgiD,KAAlB,EAAyBhiD,EAAE,EAA3B,EAA+B;EAE3B,cAAI9W,CAAC,GAAGu5D,gBAAgB,GAAGziD,EAAnB,GAAwBkiD,MAAM,GAAGjiD,EAAzC;EACA,cAAI5W,CAAC,GAAGo5D,gBAAgB,GAAGziD,EAAnB,GAAwBkiD,MAAM,IAAIjiD,EAAE,GAAG,CAAT,CAAtC;EACA,cAAIvQ,CAAC,GAAG+yD,gBAAgB,IAAIziD,EAAE,GAAG,CAAT,CAAhB,GAA8BkiD,MAAM,IAAIjiD,EAAE,GAAG,CAAT,CAA5C;EACA,cAAItb,CAAC,GAAG89D,gBAAgB,IAAIziD,EAAE,GAAG,CAAT,CAAhB,GAA8BkiD,MAAM,GAAGjiD,EAA/C,CAL2B;;EAS3BinB,UAAAA,OAAO,CAACxvC,IAAR,CAAawR,CAAb,EAAgBG,CAAhB,EAAmB1E,CAAnB;EACAuiC,UAAAA,OAAO,CAACxvC,IAAR,CAAa2R,CAAb,EAAgBqG,CAAhB,EAAmB/K,CAAnB,EAV2B;;EAc3B4/C,UAAAA,UAAU,IAAI,CAAd;EAEH;EAEJ,OAxFuF;;;EA4FxFn3B,MAAAA,KAAK,CAAC+Z,QAAN,CAAemd,UAAf,EAA2BC,UAA3B,EAAuC3f,aAAvC,EA5FwF;;EAgGxF0f,MAAAA,UAAU,IAAIC,UAAd,CAhGwF;;EAoGxFke,MAAAA,gBAAgB,IAAIS,aAApB;EACH;;EAvJ2E;EAwJ/E;;;IAzJ2B39B;;MCnB1B49B;;;;;EACF,0BAAYtvD,MAAZ,EAAoB8tD,aAApB,EAAmCC,cAAnC,EAAmDwB,QAAnD,EAA6DC,SAA7D,EAAwElC,UAAxE,EAAoFC,WAApF,EAAiG;EAAA;;EAAA;;EAE7F;EAEA,UAAKx/D,IAAL,GAAY,gBAAZ;EAEA,UAAK2xB,UAAL,GAAkB;EACd1f,MAAAA,MAAM,EAAEA,MADM;EAEd8tD,MAAAA,aAAa,EAAEA,aAFD;EAGdC,MAAAA,cAAc,EAAEA,cAHF;EAIdwB,MAAAA,QAAQ,EAAEA,QAJI;EAKdC,MAAAA,SAAS,EAAEA,SALG;EAMdlC,MAAAA,UAAU,EAAEA,UANE;EAOdC,MAAAA,WAAW,EAAEA;EAPC,KAAlB;;EAUA,UAAKC,kBAAL,CAAwB,IAAIiC,oBAAJ,CAAyBzvD,MAAzB,EAAiC8tD,aAAjC,EAAgDC,cAAhD,EAAgEwB,QAAhE,EAA0EC,SAA1E,EAAqFlC,UAArF,EAAiGC,WAAjG,CAAxB;;EACA,UAAKG,aAAL;;EAjB6F;EAmBhG;;;IApBwBrB;;;MAyBvBoD;;;;;EACF,gCAAYzvD,MAAZ,EAAoB8tD,aAApB,EAAmCC,cAAnC,EAAmDwB,QAAnD,EAA6DC,SAA7D,EAAwElC,UAAxE,EAAoFC,WAApF,EAAiG;EAAA;;EAAA;;EAE7F;EAEA,WAAKx/D,IAAL,GAAY,sBAAZ;EAEA,WAAK2xB,UAAL,GAAkB;EACd1f,MAAAA,MAAM,EAAEA,MADM;EAEd8tD,MAAAA,aAAa,EAAEA,aAFD;EAGdC,MAAAA,cAAc,EAAEA,cAHF;EAIdwB,MAAAA,QAAQ,EAAEA,QAJI;EAKdC,MAAAA,SAAS,EAAEA,SALG;EAMdlC,MAAAA,UAAU,EAAEA,UANE;EAOdC,MAAAA,WAAW,EAAEA;EAPC,KAAlB;EAUAvtD,IAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;EAEA8tD,IAAAA,aAAa,GAAGpoE,IAAI,CAACsC,GAAL,CAAS,CAAT,EAAYtC,IAAI,CAACqE,KAAL,CAAW+jE,aAAX,KAA6B,CAAzC,CAAhB;EACAC,IAAAA,cAAc,GAAGroE,IAAI,CAACsC,GAAL,CAAS,CAAT,EAAYtC,IAAI,CAACqE,KAAL,CAAWgkE,cAAX,KAA8B,CAA1C,CAAjB;EAEAwB,IAAAA,QAAQ,GAAGA,QAAQ,KAAK1kE,SAAb,GAAyB0kE,QAAzB,GAAoC,CAA/C;EACAC,IAAAA,SAAS,GAAGA,SAAS,KAAK3kE,SAAd,GAA0B2kE,SAA1B,GAAsC9pE,IAAI,CAACwF,EAAL,GAAU,CAA5D;EAEAoiE,IAAAA,UAAU,GAAGA,UAAU,KAAKziE,SAAf,GAA2ByiE,UAA3B,GAAwC,CAArD;EACAC,IAAAA,WAAW,GAAGA,WAAW,KAAK1iE,SAAhB,GAA4B0iE,WAA5B,GAA0C7nE,IAAI,CAACwF,EAA7D;EAEA,QAAIwkE,QAAQ,GAAGpC,UAAU,GAAGC,WAA5B;EAEA,QAAIphD,EAAJ,EAAQC,EAAR;EAEA,QAAItlB,KAAK,GAAG,CAAZ;EACA,QAAI6oE,IAAI,GAAG,EAAX;EAEA,QAAIhC,MAAM,GAAG,IAAItiD,OAAJ,EAAb;EACA,QAAI4N,MAAM,GAAG,IAAI5N,OAAJ,EAAb,CAnC6F;;EAuC7F,QAAIgoB,OAAO,GAAG,EAAd;EACA,QAAIzZ,QAAQ,GAAG,EAAf;EACA,QAAIwW,OAAO,GAAG,EAAd;EACA,QAAIC,GAAG,GAAG,EAAV,CA1C6F;;EA8C7F,SAAKjkB,EAAE,GAAG,CAAV,EAAaA,EAAE,IAAI2hD,cAAnB,EAAmC3hD,EAAE,EAArC,EAAyC;EAErC,UAAIwjD,WAAW,GAAG,EAAlB;EAEA,UAAIplD,CAAC,GAAG4B,EAAE,GAAG2hD,cAAb;;EAEA,WAAK5hD,EAAE,GAAG,CAAV,EAAaA,EAAE,IAAI2hD,aAAnB,EAAkC3hD,EAAE,EAApC,EAAwC;EAEpC,YAAIkqB,CAAC,GAAGlqB,EAAE,GAAG2hD,aAAb,CAFoC;;EAMpCH,QAAAA,MAAM,CAAC3sD,CAAP,GAAW,CAAEhB,MAAF,GAAWta,IAAI,CAAC8X,GAAL,CAAS+xD,QAAQ,GAAGl5B,CAAC,GAAGm5B,SAAxB,CAAX,GAAgD9pE,IAAI,CAACgY,GAAL,CAAS4vD,UAAU,GAAG9iD,CAAC,GAAG+iD,WAA1B,CAA3D;EACAI,QAAAA,MAAM,CAAC1sD,CAAP,GAAWjB,MAAM,GAAGta,IAAI,CAAC8X,GAAL,CAAS8vD,UAAU,GAAG9iD,CAAC,GAAG+iD,WAA1B,CAApB;EACAI,QAAAA,MAAM,CAACvjD,CAAP,GAAWpK,MAAM,GAAGta,IAAI,CAACgY,GAAL,CAAS6xD,QAAQ,GAAGl5B,CAAC,GAAGm5B,SAAxB,CAAT,GAA8C9pE,IAAI,CAACgY,GAAL,CAAS4vD,UAAU,GAAG9iD,CAAC,GAAG+iD,WAA1B,CAAzD;EAEA3zC,QAAAA,QAAQ,CAAC/1B,IAAT,CAAc8pE,MAAM,CAAC3sD,CAArB,EAAwB2sD,MAAM,CAAC1sD,CAA/B,EAAkC0sD,MAAM,CAACvjD,CAAzC,EAVoC;;EAcpC6O,QAAAA,MAAM,CAAC/e,GAAP,CAAWyzD,MAAM,CAAC3sD,CAAlB,EAAqB2sD,MAAM,CAAC1sD,CAA5B,EAA+B0sD,MAAM,CAACvjD,CAAtC,EAAyC0C,SAAzC;EACAsjB,QAAAA,OAAO,CAACvsC,IAAR,CAAao1B,MAAM,CAACjY,CAApB,EAAuBiY,MAAM,CAAChY,CAA9B,EAAiCgY,MAAM,CAAC7O,CAAxC,EAfoC;;EAmBpCimB,QAAAA,GAAG,CAACxsC,IAAJ,CAASwyC,CAAT,EAAY,IAAI7rB,CAAhB;EAEAolD,QAAAA,WAAW,CAAC/rE,IAAZ,CAAiBiD,KAAK,EAAtB;EAEH;;EAED6oE,MAAAA,IAAI,CAAC9rE,IAAL,CAAU+rE,WAAV;EAEH,KA/E4F;;;EAmF7F,SAAKxjD,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAG2hD,cAAlB,EAAkC3hD,EAAE,EAApC,EAAwC;EAEpC,WAAKD,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAG2hD,aAAlB,EAAiC3hD,EAAE,EAAnC,EAAuC;EAEnC,YAAI9W,CAAC,GAAGs6D,IAAI,CAACvjD,EAAD,CAAJ,CAASD,EAAE,GAAG,CAAd,CAAR;EACA,YAAI3W,CAAC,GAAGm6D,IAAI,CAACvjD,EAAD,CAAJ,CAASD,EAAT,CAAR;EACA,YAAItQ,CAAC,GAAG8zD,IAAI,CAACvjD,EAAE,GAAG,CAAN,CAAJ,CAAaD,EAAb,CAAR;EACA,YAAIrb,CAAC,GAAG6+D,IAAI,CAACvjD,EAAE,GAAG,CAAN,CAAJ,CAAaD,EAAE,GAAG,CAAlB,CAAR;EAEA,YAAIC,EAAE,KAAK,CAAP,IAAYkhD,UAAU,GAAG,CAA7B,EAAgCj6B,OAAO,CAACxvC,IAAR,CAAawR,CAAb,EAAgBG,CAAhB,EAAmB1E,CAAnB;EAChC,YAAIsb,EAAE,KAAK2hD,cAAc,GAAG,CAAxB,IAA6B2B,QAAQ,GAAGhqE,IAAI,CAACwF,EAAjD,EAAqDmoC,OAAO,CAACxvC,IAAR,CAAa2R,CAAb,EAAgBqG,CAAhB,EAAmB/K,CAAnB;EAExD;EAEJ,KAjG4F;;;EAqG7F,WAAKghC,QAAL,CAAcuB,OAAd;;EACA,WAAKxB,YAAL,CAAkB,UAAlB,EAA8B,IAAI5B,sBAAJ,CAA2BrW,QAA3B,EAAqC,CAArC,CAA9B;;EACA,WAAKiY,YAAL,CAAkB,QAAlB,EAA4B,IAAI5B,sBAAJ,CAA2BG,OAA3B,EAAoC,CAApC,CAA5B;;EACA,WAAKyB,YAAL,CAAkB,IAAlB,EAAwB,IAAI5B,sBAAJ,CAA2BI,GAA3B,EAAgC,CAAhC,CAAxB;;EAxG6F;EA0GhG;;;IA3G8BqB;;MCxB7Bm+B;;;;;EACF,4BAAYC,SAAZ,EAAuBC,YAAvB,EAAqCx2D,MAArC,EAA6Cy2D,cAA7C,EAA6DjC,cAA7D,EAA6EkC,SAA7E,EAAwF3C,UAAxF,EAAoGC,WAApG,EAAiH;EAAA;;EAAA;;EAE7G;EAEA,UAAKx/D,IAAL,GAAY,kBAAZ;EAEA,UAAK2xB,UAAL,GAAkB;EACdowC,MAAAA,SAAS,EAAEA,SADG;EAEdC,MAAAA,YAAY,EAAEA,YAFA;EAGdx2D,MAAAA,MAAM,EAAEA,MAHM;EAIdy2D,MAAAA,cAAc,EAAEA,cAJF;EAKdjC,MAAAA,cAAc,EAAEA,cALF;EAMdkC,MAAAA,SAAS,EAAEA,SANG;EAOd3C,MAAAA,UAAU,EAAEA,UAPE;EAQdC,MAAAA,WAAW,EAAEA;EARC,KAAlB;;EAWA,UAAKC,kBAAL,CAAwB,IAAI0C,sBAAJ,CAA2BJ,SAA3B,EAAsCC,YAAtC,EAAoDx2D,MAApD,EAA4Dy2D,cAA5D,EAA4EjC,cAA5E,EAA4FkC,SAA5F,EAAuG3C,UAAvG,EAAmHC,WAAnH,CAAxB;;EACA,UAAKG,aAAL;;EAlB6G;EAoBhH;;;IArB0BrB;;;MA0BzB6D;;;;;EACF,kCAAYJ,SAAZ,EAAuBC,YAAvB,EAAqCx2D,MAArC,EAA6Cy2D,cAA7C,EAA6DjC,cAA7D,EAA6EkC,SAA7E,EAAwF3C,UAAxF,EAAoGC,WAApG,EAAiH;EAAA;;EAAA;;EAE7G;EAEA,WAAKx/D,IAAL,GAAY,wBAAZ;EAEA,WAAK2xB,UAAL,GAAkB;EACdowC,MAAAA,SAAS,EAAEA,SADG;EAEdC,MAAAA,YAAY,EAAEA,YAFA;EAGdx2D,MAAAA,MAAM,EAAEA,MAHM;EAIdy2D,MAAAA,cAAc,EAAEA,cAJF;EAKdjC,MAAAA,cAAc,EAAEA,cALF;EAMdkC,MAAAA,SAAS,EAAEA,SANG;EAOd3C,MAAAA,UAAU,EAAEA,UAPE;EAQdC,MAAAA,WAAW,EAAEA;EARC,KAAlB;;EAWA,QAAIh0C,KAAK,yDAAT;;EAEAu2C,IAAAA,SAAS,GAAGA,SAAS,KAAKjlE,SAAd,GAA0BilE,SAA1B,GAAsC,EAAlD;EACAC,IAAAA,YAAY,GAAGA,YAAY,KAAKllE,SAAjB,GAA6BklE,YAA7B,GAA4C,EAA3D;EACAx2D,IAAAA,MAAM,GAAGA,MAAM,KAAK1O,SAAX,GAAuB0O,MAAvB,GAAgC,GAAzC;EAEAy2D,IAAAA,cAAc,GAAGtqE,IAAI,CAACqE,KAAL,CAAWimE,cAAX,KAA8B,CAA/C;EACAjC,IAAAA,cAAc,GAAGroE,IAAI,CAACqE,KAAL,CAAWgkE,cAAX,KAA8B,CAA/C;EAEAkC,IAAAA,SAAS,GAAGA,SAAS,KAAKplE,SAAd,GAA0BolE,SAA1B,GAAsC,KAAlD;EACA3C,IAAAA,UAAU,GAAGA,UAAU,KAAKziE,SAAf,GAA2ByiE,UAA3B,GAAwC,GAArD;EACAC,IAAAA,WAAW,GAAGA,WAAW,KAAK1iE,SAAhB,GAA4B0iE,WAA5B,GAA0C,MAAM7nE,IAAI,CAACwF,EAAnE,CA5B6G;;EAgC7G,QAAImoC,OAAO,GAAG,EAAd;EACA,QAAIzZ,QAAQ,GAAG,EAAf;EACA,QAAIwW,OAAO,GAAG,EAAd;EACA,QAAIC,GAAG,GAAG,EAAV,CAnC6G;;EAuC7G,QAAIvpC,KAAK,GAAG,CAAZ;EACA,QAAIqpE,UAAU,GAAG,EAAjB;EACA,QAAIC,UAAU,GAAG72D,MAAM,GAAG,CAA1B;EACA,QAAIk3C,UAAU,GAAG,CAAjB,CA1C6G;;EA8C7G4f,IAAAA,aAAa;;EAEb,QAAIJ,SAAS,KAAK,KAAlB,EAAyB;EAErB,UAAIH,SAAS,GAAG,CAAhB,EAAmBQ,WAAW,CAAC,IAAD,CAAX;EACnB,UAAIP,YAAY,GAAG,CAAnB,EAAsBO,WAAW,CAAC,KAAD,CAAX;EAEzB,KArD4G;;;EAyD7G,WAAKx+B,QAAL,CAAcuB,OAAd;;EACA,WAAKxB,YAAL,CAAkB,UAAlB,EAA8B,IAAI5B,sBAAJ,CAA2BrW,QAA3B,EAAqC,CAArC,CAA9B;;EACA,WAAKiY,YAAL,CAAkB,QAAlB,EAA4B,IAAI5B,sBAAJ,CAA2BG,OAA3B,EAAoC,CAApC,CAA5B;;EACA,WAAKyB,YAAL,CAAkB,IAAlB,EAAwB,IAAI5B,sBAAJ,CAA2BI,GAA3B,EAAgC,CAAhC,CAAxB;;EAEA,aAASggC,aAAT,GAAyB;EAErB,UAAIrvD,CAAJ,EAAOC,CAAP;EACA,UAAIgY,MAAM,GAAG,IAAI5N,OAAJ,EAAb;EACA,UAAIsiD,MAAM,GAAG,IAAItiD,OAAJ,EAAb;EAEA,UAAIqlC,UAAU,GAAG,CAAjB,CANqB;;EASrB,UAAI6f,KAAK,GAAG,CAACR,YAAY,GAAGD,SAAhB,IAA6Bv2D,MAAzC,CATqB;;EAarB,WAAK0H,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAI8sD,cAAjB,EAAiC9sD,CAAC,EAAlC,EAAsC;EAElC,YAAIuvD,QAAQ,GAAG,EAAf;EAEA,YAAIhmD,CAAC,GAAGvJ,CAAC,GAAG8sD,cAAZ,CAJkC;;EAQlC,YAAI/tD,MAAM,GAAGwK,CAAC,IAAIulD,YAAY,GAAGD,SAAnB,CAAD,GAAiCA,SAA9C;;EAEA,aAAK9uD,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAIgvD,cAAjB,EAAiChvD,CAAC,EAAlC,EAAsC;EAElC,cAAIq1B,CAAC,GAAGr1B,CAAC,GAAGgvD,cAAZ;EAEA,cAAIliD,KAAK,GAAGuoB,CAAC,GAAGk3B,WAAJ,GAAkBD,UAA9B;EAEA,cAAImD,QAAQ,GAAG/qE,IAAI,CAACgY,GAAL,CAASoQ,KAAT,CAAf;EACA,cAAI4iD,QAAQ,GAAGhrE,IAAI,CAAC8X,GAAL,CAASsQ,KAAT,CAAf,CAPkC;;EAWlC6/C,UAAAA,MAAM,CAAC3sD,CAAP,GAAWhB,MAAM,GAAGywD,QAApB;EACA9C,UAAAA,MAAM,CAAC1sD,CAAP,GAAW,CAAEuJ,CAAF,GAAMjR,MAAN,GAAe62D,UAA1B;EACAzC,UAAAA,MAAM,CAACvjD,CAAP,GAAWpK,MAAM,GAAG0wD,QAApB;EACA92C,UAAAA,QAAQ,CAAC/1B,IAAT,CAAc8pE,MAAM,CAAC3sD,CAArB,EAAwB2sD,MAAM,CAAC1sD,CAA/B,EAAkC0sD,MAAM,CAACvjD,CAAzC,EAdkC;;EAkBlC6O,UAAAA,MAAM,CAAC/e,GAAP,CAAWu2D,QAAX,EAAqBF,KAArB,EAA4BG,QAA5B,EAAsC5jD,SAAtC;EACAsjB,UAAAA,OAAO,CAACvsC,IAAR,CAAao1B,MAAM,CAACjY,CAApB,EAAuBiY,MAAM,CAAChY,CAA9B,EAAiCgY,MAAM,CAAC7O,CAAxC,EAnBkC;;EAuBlCimB,UAAAA,GAAG,CAACxsC,IAAJ,CAASwyC,CAAT,EAAY,IAAI7rB,CAAhB,EAvBkC;;EA2BlCgmD,UAAAA,QAAQ,CAAC3sE,IAAT,CAAciD,KAAK,EAAnB;EAEH,SAvCiC;;;EA2ClCqpE,QAAAA,UAAU,CAACtsE,IAAX,CAAgB2sE,QAAhB;EAEH,OA1DoB;;;EA8DrB,WAAKxvD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGgvD,cAAhB,EAAgChvD,CAAC,EAAjC,EAAqC;EAEjC,aAAKC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG8sD,cAAhB,EAAgC9sD,CAAC,EAAjC,EAAqC;EAEjC;EAEA,cAAI5L,CAAC,GAAG86D,UAAU,CAAClvD,CAAD,CAAV,CAAcD,CAAd,CAAR;EACA,cAAIxL,CAAC,GAAG26D,UAAU,CAAClvD,CAAC,GAAG,CAAL,CAAV,CAAkBD,CAAlB,CAAR;EACA,cAAInF,CAAC,GAAGs0D,UAAU,CAAClvD,CAAC,GAAG,CAAL,CAAV,CAAkBD,CAAC,GAAG,CAAtB,CAAR;EACA,cAAIlQ,CAAC,GAAGq/D,UAAU,CAAClvD,CAAD,CAAV,CAAcD,CAAC,GAAG,CAAlB,CAAR,CAPiC;;EAWjCqyB,UAAAA,OAAO,CAACxvC,IAAR,CAAawR,CAAb,EAAgBG,CAAhB,EAAmB1E,CAAnB;EACAuiC,UAAAA,OAAO,CAACxvC,IAAR,CAAa2R,CAAb,EAAgBqG,CAAhB,EAAmB/K,CAAnB,EAZiC;;EAgBjC4/C,UAAAA,UAAU,IAAI,CAAd;EAEH;EAEJ,OApFoB;;;EAwFrBn3B,MAAAA,KAAK,CAAC+Z,QAAN,CAAemd,UAAf,EAA2BC,UAA3B,EAAuC,CAAvC,EAxFqB;;EA4FrBD,MAAAA,UAAU,IAAIC,UAAd;EAEH;;EAED,aAAS4f,WAAT,CAAqBn4D,GAArB,EAA0B;EAEtB,UAAI6I,CAAJ,EAAO2vD,gBAAP,EAAyBC,cAAzB;EAEA,UAAIlO,EAAE,GAAG,IAAI5zB,OAAJ,EAAT;EACA,UAAI6+B,MAAM,GAAG,IAAItiD,OAAJ,EAAb;EAEA,UAAIqlC,UAAU,GAAG,CAAjB;EAEA,UAAI1wC,MAAM,GAAI7H,GAAG,KAAK,IAAT,GAAiB23D,SAAjB,GAA6BC,YAA1C;EACA,UAAIxR,IAAI,GAAIpmD,GAAG,KAAK,IAAT,GAAiB,CAAjB,GAAqB,CAAE,CAAlC,CAVsB;;EAatBw4D,MAAAA,gBAAgB,GAAG7pE,KAAnB,CAbsB;EAgBtB;EACA;;EAEA,WAAKka,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAIgvD,cAAjB,EAAiChvD,CAAC,EAAlC,EAAsC;EAElC;EAEA4Y,QAAAA,QAAQ,CAAC/1B,IAAT,CAAc,CAAd,EAAiBusE,UAAU,GAAG7R,IAA9B,EAAoC,CAApC,EAJkC;;EAQlCnuB,QAAAA,OAAO,CAACvsC,IAAR,CAAa,CAAb,EAAgB06D,IAAhB,EAAsB,CAAtB,EARkC;;EAYlCluB,QAAAA,GAAG,CAACxsC,IAAJ,CAAS,GAAT,EAAc,GAAd,EAZkC;;EAgBlCiD,QAAAA,KAAK;EAER,OArCqB;;;EAyCtB8pE,MAAAA,cAAc,GAAG9pE,KAAjB,CAzCsB;;EA6CtB,WAAKka,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAIgvD,cAAjB,EAAiChvD,CAAC,EAAlC,EAAsC;EAElC,YAAIq1B,CAAC,GAAGr1B,CAAC,GAAGgvD,cAAZ;EACA,YAAIliD,KAAK,GAAGuoB,CAAC,GAAGk3B,WAAJ,GAAkBD,UAA9B;EAEA,YAAIoD,QAAQ,GAAGhrE,IAAI,CAAC8X,GAAL,CAASsQ,KAAT,CAAf;EACA,YAAI2iD,QAAQ,GAAG/qE,IAAI,CAACgY,GAAL,CAASoQ,KAAT,CAAf,CANkC;;EAUlC6/C,QAAAA,MAAM,CAAC3sD,CAAP,GAAWhB,MAAM,GAAGywD,QAApB;EACA9C,QAAAA,MAAM,CAAC1sD,CAAP,GAAWmvD,UAAU,GAAG7R,IAAxB;EACAoP,QAAAA,MAAM,CAACvjD,CAAP,GAAWpK,MAAM,GAAG0wD,QAApB;EACA92C,QAAAA,QAAQ,CAAC/1B,IAAT,CAAc8pE,MAAM,CAAC3sD,CAArB,EAAwB2sD,MAAM,CAAC1sD,CAA/B,EAAkC0sD,MAAM,CAACvjD,CAAzC,EAbkC;;EAiBlCgmB,QAAAA,OAAO,CAACvsC,IAAR,CAAa,CAAb,EAAgB06D,IAAhB,EAAsB,CAAtB,EAjBkC;;EAqBlCmE,QAAAA,EAAE,CAAC1hD,CAAH,GAAQ0vD,QAAQ,GAAG,GAAZ,GAAmB,GAA1B;EACAhO,QAAAA,EAAE,CAACzhD,CAAH,GAAQwvD,QAAQ,GAAG,GAAX,GAAiBlS,IAAlB,GAA0B,GAAjC;EACAluB,QAAAA,GAAG,CAACxsC,IAAJ,CAAS6+D,EAAE,CAAC1hD,CAAZ,EAAe0hD,EAAE,CAACzhD,CAAlB,EAvBkC;;EA2BlCna,QAAAA,KAAK;EAER,OA1EqB;;;EA8EtB,WAAKka,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGgvD,cAAhB,EAAgChvD,CAAC,EAAjC,EAAqC;EAEjC,YAAInF,CAAC,GAAG80D,gBAAgB,GAAG3vD,CAA3B;EACA,YAAI/a,CAAC,GAAG2qE,cAAc,GAAG5vD,CAAzB;;EAEA,YAAI7I,GAAG,KAAK,IAAZ,EAAkB;EAEd;EAEAk7B,UAAAA,OAAO,CAACxvC,IAAR,CAAaoC,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuB4V,CAAvB;EAEH,SAND,MAMO;EAEH;EAEAw3B,UAAAA,OAAO,CAACxvC,IAAR,CAAaoC,CAAC,GAAG,CAAjB,EAAoBA,CAApB,EAAuB4V,CAAvB;EAEH;;EAED60C,QAAAA,UAAU,IAAI,CAAd;EAEH,OAnGqB;;;EAuGtBn3B,MAAAA,KAAK,CAAC+Z,QAAN,CAAemd,UAAf,EAA2BC,UAA3B,EAAuCv4C,GAAG,KAAK,IAAR,GAAe,CAAf,GAAmB,CAA1D,EAvGsB;;EA2GtBs4C,MAAAA,UAAU,IAAIC,UAAd;EAEH;;EA3Q4G;EA6QhH;;;IA9QgChf;;MC1B/Bm/B;;;;;EACF;;;;;;;;;EASA,4BAAYC,YAAZ,EAA0Bv3D,MAA1B,EAA4F;EAAA;;EAAA,QAA1DqF,WAA0D,uEAA5C,CAA4C;EAAA,QAAzCoxD,cAAyC;EAAA,QAAzB1C,UAAyB;EAAA,QAAbC,WAAa;;EAAA;;EAExF;EAEA,UAAKx/D,IAAL,GAAY,kBAAZ;EAEA,UAAK2xB,UAAL,GAAkB;EACdoxC,MAAAA,YAAY,EAAZA,YADc;EAEdv3D,MAAAA,MAAM,EAANA,MAFc;EAGdqF,MAAAA,WAAW,EAAXA,WAHc;EAIdoxD,MAAAA,cAAc,EAAdA,cAJc;EAKd1C,MAAAA,UAAU,EAAVA,UALc;EAMdC,MAAAA,WAAW,EAAXA;EANc,KAAlB;;EASA,UAAKC,kBAAL,CAAwB,IAAIuD,sBAAJ,CAA2BD,YAA3B,EAAyCv3D,MAAzC,EAAiDqF,WAAjD,EAA8DoxD,cAA9D,EAA8E1C,UAA9E,EAA0FC,WAA1F,CAAxB;;EACA,UAAKG,aAAL;;EAhBwF;EAkB3F;;;IA5B0BrB;;;MAiCzB0E;;;;;EACF,kCAAYD,YAAZ,EAA0Bv3D,MAA1B,EAAqH;EAAA;;EAAA,QAAnFqF,WAAmF,uEAArE,CAAqE;EAAA,QAAlEoxD,cAAkE,uEAAjD,EAAiD;EAAA,QAA7C1C,UAA6C,uEAAhC,CAAgC;EAAA,QAA7BC,WAA6B,uEAAf,MAAM7nE,IAAI,CAACwF,EAAI;;EAAA;;EAEjH;EACA,WAAK6C,IAAL,GAAY,wBAAZ;EAEA,WAAK2xB,UAAL,GAAkB;EACdoxC,MAAAA,YAAY,EAAZA,YADc;EAEdv3D,MAAAA,MAAM,EAANA,MAFc;EAGdqF,MAAAA,WAAW,EAAXA,WAHc;EAIdoxD,MAAAA,cAAc,EAAdA,cAJc;EAKd1C,MAAAA,UAAU,EAAVA,UALc;EAMdC,MAAAA,WAAW,EAAXA;EANc,KAAlB;;EASA,QAAIh0C,KAAK,yDAAT,CAdiH;;;EAkBjH,QAAI8Z,OAAO,GAAG,EAAd;EACA,QAAIzZ,QAAQ,GAAG,EAAf;EACA,QAAIwW,OAAO,GAAG,EAAd;EACA,QAAIC,GAAG,GAAG,EAAV,CArBiH;;EAyBjH,QAAIvpC,KAAK,GAAG,CAAZ;EACA,QAAIqpE,UAAU,GAAG,EAAjB;EACA,QAAIC,UAAU,GAAG72D,MAAM,GAAG,CAA1B;EACA,QAAIk3C,UAAU,GAAG,CAAjB;EAEA8c,IAAAA,WAAW,GAAG7nE,IAAI,CAACiD,GAAL,CAAS4kE,WAAT,EAAsB7nE,IAAI,CAACwF,EAAL,GAAU,CAAhC,CAAd,CA9BiH;;EAkCjH8lE,IAAAA,iBAAiB,CAACF,YAAD,EAAelyD,WAAf,EAA4BrF,MAA5B,CAAjB;EACA03D,IAAAA,uBAAuB,CAACH,YAAD,EAAelyD,WAAf,EAA4BrF,MAA5B,CAAvB;;EACA,QAAIg0D,WAAW,KAAK7nE,IAAI,CAACwF,EAAL,GAAU,CAA9B,EAAiC;EAC7BgmE,MAAAA,qBAAqB;EACxB,KAtCgH;;;EA0CjH,WAAKp/B,QAAL,CAAcuB,OAAd;;EACA,WAAKxB,YAAL,CAAkB,UAAlB,EAA8B,IAAI5B,sBAAJ,CAA2BrW,QAA3B,EAAqC,CAArC,CAA9B,EA3CiH;;;EA6CjH,WAAKiY,YAAL,CAAkB,IAAlB,EAAwB,IAAI5B,sBAAJ,CAA2BI,GAA3B,EAAgC,CAAhC,CAAxB;;EAIA,aAAS2gC,iBAAT,CAA2BF,YAA3B,EAAyClyD,WAAzC,EAAsDrF,MAAtD,EAA8D;EAE1D,UAAIm3C,UAAU,GAAG,CAAjB;EACA,UAAI1vC,CAAJ,EAAOC,CAAP;EACA,UAAIgY,MAAM,GAAG,IAAI5N,OAAJ,EAAb;EACA,UAAIsiD,MAAM,GAAG,IAAItiD,OAAJ,EAAb;EACA,UAAI0iD,cAAc,GAAG,CAArB;;EAGA,WAAK9sD,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAI8sD,cAAjB,EAAiC9sD,CAAC,EAAlC,EAAsC;EAClC,YAAIuvD,QAAQ,GAAG,EAAf;EACA,YAAIhmD,CAAC,GAAGvJ,CAAC,GAAG8sD,cAAZ;;EAEA,aAAK/sD,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAIgvD,cAAjB,EAAiChvD,CAAC,EAAlC,EAAsC;EAElC,cAAIq1B,CAAC,GAAGr1B,CAAC,GAAGgvD,cAAZ;EAEA,cAAIliD,KAAK,GAAGuoB,CAAC,GAAGk3B,WAAJ,GAAkBD,UAA9B;EAEA,cAAImD,QAAQ,GAAG/qE,IAAI,CAACgY,GAAL,CAASoQ,KAAT,CAAf;EACA,cAAI4iD,QAAQ,GAAGhrE,IAAI,CAAC8X,GAAL,CAASsQ,KAAT,CAAf;;EAIA,cAAIlP,WAAW,GAAG,CAAlB,EAAqB;EAEjB+uD,YAAAA,MAAM,CAAC3sD,CAAP,GAAWpC,WAAW,GAAG6xD,QAAzB;EACA9C,YAAAA,MAAM,CAAC1sD,CAAP,GAAW,CAAEuJ,CAAF,GAAMjR,MAAN,GAAe62D,UAA1B;EACAzC,YAAAA,MAAM,CAACvjD,CAAP,GAAWxL,WAAW,GAAG8xD,QAAzB;EACA92C,YAAAA,QAAQ,CAAC/1B,IAAT,CAAc8pE,MAAM,CAAC3sD,CAArB,EAAwB2sD,MAAM,CAAC1sD,CAA/B,EAAkC0sD,MAAM,CAACvjD,CAAzC;EAEAomD,YAAAA,QAAQ,CAAC3sE,IAAT,CAAciD,KAAK,EAAnB;EAEAupC,YAAAA,GAAG,CAACxsC,IAAJ,CAASwyC,CAAT,EAAY7rB,CAAZ;EAEAyO,YAAAA,MAAM,CAAC/e,GAAP,CAAW,CAAX,EAAc,CAAC,CAAf,EAAkB,CAAlB;EACAk2B,YAAAA,OAAO,CAACvsC,IAAR,CAAao1B,MAAM,CAACjY,CAApB,EAAuBiY,MAAM,CAAChY,CAA9B,EAAiCgY,MAAM,CAAC7O,CAAxC;EAEH,WAdD,MAcO;EACH,gBAAIomD,QAAQ,CAACzqE,MAAT,KAAoB,CAAxB,EAA2B;EACvByqE,cAAAA,QAAQ,CAAC3sE,IAAT,CAAciD,KAAK,EAAnB;EACA,kBAAIf,MAAM,GAAG6zB,QAAQ,CAAC7zB,MAAtB;EACA6zB,cAAAA,QAAQ,CAAC7zB,MAAD,CAAR,GAAmB,CAAnB;EACA6zB,cAAAA,QAAQ,CAAC7zB,MAAM,GAAG,CAAV,CAAR,GAAuB,CAAEykB,CAAF,GAAMjR,MAAN,GAAe62D,UAAtC;EACAx2C,cAAAA,QAAQ,CAAC7zB,MAAM,GAAG,CAAV,CAAR,GAAuB,CAAvB,CALuB;;EASvB,kBAAIorE,KAAK,GAAG9gC,GAAG,CAACtqC,MAAhB;EACAsqC,cAAAA,GAAG,CAAC8gC,KAAD,CAAH,GAAa,GAAb;EACA9gC,cAAAA,GAAG,CAAC8gC,KAAK,GAAG,CAAT,CAAH,GAAiB,CAAjB,CAXuB;EAgBvB;EACA;EACA;;EACAl4C,cAAAA,MAAM,CAAC/e,GAAP,CAAW,CAAX,EAAc,CAAC,CAAf,EAAkB,CAAlB,EAnBuB;;EAsBvBk2B,cAAAA,OAAO,CAACvsC,IAAR,CAAao1B,MAAM,CAACjY,CAApB,EAAuBiY,MAAM,CAAChY,CAA9B,EAAiCgY,MAAM,CAAC7O,CAAxC;EACH;EAGJ,WApDiC;;;EAyDlCujD,UAAAA,MAAM,CAAC3sD,CAAP,GAAW8vD,YAAY,GAAGL,QAA1B;EACA9C,UAAAA,MAAM,CAAC1sD,CAAP,GAAW,CAAEuJ,CAAF,GAAMjR,MAAN,GAAe62D,UAA1B;EACAzC,UAAAA,MAAM,CAACvjD,CAAP,GAAW0mD,YAAY,GAAGJ,QAA1B;EACA92C,UAAAA,QAAQ,CAAC/1B,IAAT,CAAc8pE,MAAM,CAAC3sD,CAArB,EAAwB2sD,MAAM,CAAC1sD,CAA/B,EAAkC0sD,MAAM,CAACvjD,CAAzC,EA5DkC;;EAgElCimB,UAAAA,GAAG,CAACxsC,IAAJ,CAASwyC,CAAT,EAAY,IAAI7rB,CAAhB,EAhEkC;EAoElC;EACA;EACA;;EACAyO,UAAAA,MAAM,CAAC/e,GAAP,CAAW,CAAX,EAAc,CAAC,CAAf,EAAkB,CAAlB,EAvEkC;;EA0ElCk2B,UAAAA,OAAO,CAACvsC,IAAR,CAAao1B,MAAM,CAACjY,CAApB,EAAuBiY,MAAM,CAAChY,CAA9B,EAAiCgY,MAAM,CAAC7O,CAAxC;EAEAomD,UAAAA,QAAQ,CAAC3sE,IAAT,CAAciD,KAAK,EAAnB;EAEH,SAlFiC;;;EAsFlCqpE,QAAAA,UAAU,CAACtsE,IAAX,CAAgB2sE,QAAhB;EAEH,OAjGyD;;;EAmG1D,WAAKvvD,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAI8sD,cAAjB,EAAiC9sD,CAAC,EAAlC,EAAsC;EAElCyvC,QAAAA,UAAU,GAAG,CAAb;;EAEA,aAAK1vC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGgvD,cAAhB,EAAgChvD,CAAC,EAAjC,EAAqC;EAGjC,cAAIpC,WAAW,GAAG,CAAlB,EAAqB;EACjB,gBAAIvJ,CAAC,GAAG86D,UAAU,CAAClvD,CAAD,CAAV,CAAc,IAAID,CAAJ,GAAQ,CAAtB,CAAR;EACA,gBAAIxL,CAAC,GAAG26D,UAAU,CAAClvD,CAAD,CAAV,CAAc,IAAID,CAAlB,CAAR;EACA,gBAAInF,CAAC,GAAGs0D,UAAU,CAAClvD,CAAD,CAAV,CAAc,IAAID,CAAJ,GAAQ,CAAtB,CAAR;EACA,gBAAIlQ,CAAC,GAAGq/D,UAAU,CAAClvD,CAAD,CAAV,CAAc,IAAID,CAAJ,GAAQ,CAAtB,CAAR,CAJiB;;EAOjBqyB,YAAAA,OAAO,CAACxvC,IAAR,CAAawR,CAAb,EAAgBG,CAAhB,EAAmB1E,CAAnB;EACAuiC,YAAAA,OAAO,CAACxvC,IAAR,CAAa2R,CAAb,EAAgBqG,CAAhB,EAAmB/K,CAAnB,EARiB;;EAYjB4/C,YAAAA,UAAU,IAAI,CAAd;EAEH,WAdD,MAcO;EACH,gBAAIr7C,CAAC,GAAG86D,UAAU,CAAClvD,CAAD,CAAV,CAAcD,CAAC,GAAG,CAAlB,CAAR;EACA,gBAAIxL,CAAC,GAAG26D,UAAU,CAAClvD,CAAD,CAAV,CAAc,CAAd,CAAR;EACA,gBAAIpF,CAAC,GAAGs0D,UAAU,CAAClvD,CAAD,CAAV,CAAcD,CAAC,GAAG,CAAlB,CAAR,CAHG;;EAMHqyB,YAAAA,OAAO,CAACxvC,IAAR,CAAawR,CAAb,EAAgBG,CAAhB,EAAmBqG,CAAnB;EACA60C,YAAAA,UAAU,IAAI,CAAd;EACH;EACJ,SA9BiC;;;EAkClCn3B,QAAAA,KAAK,CAAC+Z,QAAN,CAAemd,UAAf,EAA2BC,UAA3B,EAAuC,CAAvC,EAlCkC;;EAuClCD,QAAAA,UAAU,IAAIC,UAAd;EACH;EAGJ;;EAGD,aAASugB,uBAAT,CAAiCH,YAAjC,EAA+ClyD,WAA/C,EAA4DrF,MAA5D,EAAoE;EAEhE,UAAIm3C,UAAU,GAAG,CAAjB;EACA,UAAI1vC,CAAJ,EAAOC,CAAP;EACA,UAAIgY,MAAM,GAAG,IAAI5N,OAAJ,EAAb;EACA,UAAIsiD,MAAM,GAAG,IAAItiD,OAAJ,EAAb;EACA,UAAI0iD,cAAc,GAAG,CAArB;;EACA,WAAK9sD,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAI8sD,cAAjB,EAAiC9sD,CAAC,EAAlC,EAAsC;EAClC,YAAIuvD,QAAQ,GAAG,EAAf;EACA,YAAIhmD,CAAC,GAAGvJ,CAAC,GAAG8sD,cAAZ;;EAEA,aAAK/sD,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAIgvD,cAAjB,EAAiChvD,CAAC,EAAlC,EAAsC;EAElC,cAAIq1B,CAAC,GAAGr1B,CAAC,GAAGgvD,cAAZ;EAEA,cAAIliD,KAAK,GAAGuoB,CAAC,GAAGk3B,WAAJ,GAAkBD,UAA9B;EAEA,cAAImD,QAAQ,GAAG/qE,IAAI,CAACgY,GAAL,CAASoQ,KAAT,CAAf;EACA,cAAI4iD,QAAQ,GAAGhrE,IAAI,CAAC8X,GAAL,CAASsQ,KAAT,CAAf;;EAIA,cAAIlP,WAAW,GAAG,CAAlB,EAAqB;EAEjB+uD,YAAAA,MAAM,CAAC3sD,CAAP,GAAWpC,WAAW,GAAG6xD,QAAzB;EACA9C,YAAAA,MAAM,CAAC1sD,CAAP,GAAW,CAAEuJ,CAAF,GAAMjR,MAAN,GAAe62D,UAA1B;EACAzC,YAAAA,MAAM,CAACvjD,CAAP,GAAWxL,WAAW,GAAG8xD,QAAzB;EACA92C,YAAAA,QAAQ,CAAC/1B,IAAT,CAAc8pE,MAAM,CAAC3sD,CAArB,EAAwB2sD,MAAM,CAAC1sD,CAA/B,EAAkC0sD,MAAM,CAACvjD,CAAzC;EAEAomD,YAAAA,QAAQ,CAAC3sE,IAAT,CAAciD,KAAK,EAAnB;EAEAupC,YAAAA,GAAG,CAACxsC,IAAJ,CAASwyC,CAAT,EAAY7rB,CAAZ;EAEAyO,YAAAA,MAAM,CAAC/e,GAAP,CAAWu2D,QAAX,EAAqB,CAArB,EAAwBC,QAAxB,EAAkC5jD,SAAlC;EACAsjB,YAAAA,OAAO,CAACvsC,IAAR,CAAao1B,MAAM,CAACjY,CAApB,EAAuBiY,MAAM,CAAChY,CAA9B,EAAiCgY,MAAM,CAAC7O,CAAxC;EAEH,WAzBiC;;;EA8BlCujD,UAAAA,MAAM,CAAC3sD,CAAP,GAAW8vD,YAAY,GAAGL,QAA1B;EACA9C,UAAAA,MAAM,CAAC1sD,CAAP,GAAW,CAAEuJ,CAAF,GAAMjR,MAAN,GAAe62D,UAA1B;EACAzC,UAAAA,MAAM,CAACvjD,CAAP,GAAW0mD,YAAY,GAAGJ,QAA1B;EACA92C,UAAAA,QAAQ,CAAC/1B,IAAT,CAAc8pE,MAAM,CAAC3sD,CAArB,EAAwB2sD,MAAM,CAAC1sD,CAA/B,EAAkC0sD,MAAM,CAACvjD,CAAzC,EAjCkC;;EAqClCimB,UAAAA,GAAG,CAACxsC,IAAJ,CAASwyC,CAAT,EAAY,IAAI7rB,CAAhB,EArCkC;EAyClC;EACA;EACA;;EACAyO,UAAAA,MAAM,CAAC/e,GAAP,CAAWu2D,QAAX,EAAqB,CAArB,EAAwBC,QAAxB,EAAkC5jD,SAAlC,GA5CkC;;EA+ClCsjB,UAAAA,OAAO,CAACvsC,IAAR,CAAao1B,MAAM,CAACjY,CAApB,EAAuBiY,MAAM,CAAChY,CAA9B,EAAiCgY,MAAM,CAAC7O,CAAxC;EAEAomD,UAAAA,QAAQ,CAAC3sE,IAAT,CAAciD,KAAK,EAAnB;EAEH,SAvDiC;;;EA2DlCqpE,QAAAA,UAAU,CAACtsE,IAAX,CAAgB2sE,QAAhB;EAEH,OApE+D;EAuEhE;;;EACA,UAAIY,OAAO,GAAGxyD,WAAW,KAAK,CAAhB,GAAoB,CAApB,GAAwB,CAAtC;EACA,UAAIyyD,QAAQ,GAAGlB,UAAU,CAACpqE,MAAX,GAAoB,CAAnC;EACA,UAAIsP,CAAJ,EAAOG,CAAP,EAAUqG,CAAV,EAAa/K,CAAb;;EACA,WAAK,IAAI8R,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIwuD,OAArB,EAA8BxuD,CAAC,EAA/B,EAAmC;EAE/B8tC,QAAAA,UAAU,GAAG,CAAb;;EAEA,aAAK1vC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGgvD,cAAhB,EAAgChvD,CAAC,EAAjC,EAAqC;EAEjC,cAAI4B,CAAC,IAAI,CAAT,EAAY;EACR,gBAAIwuD,OAAO,KAAKxuD,CAAhB,EAAmB;EACfvN,cAAAA,CAAC,GAAG86D,UAAU,CAAClvD,CAAD,CAAV,CAAcD,CAAd,CAAJ;EACAxL,cAAAA,CAAC,GAAG26D,UAAU,CAAClvD,CAAC,GAAG,CAAL,CAAV,CAAkBD,CAAlB,CAAJ;EACAnF,cAAAA,CAAC,GAAGs0D,UAAU,CAAClvD,CAAC,GAAG,CAAL,CAAV,CAAkBD,CAAC,GAAG,CAAtB,CAAJ;EACAlQ,cAAAA,CAAC,GAAGq/D,UAAU,CAAClvD,CAAD,CAAV,CAAcD,CAAC,GAAG,CAAlB,CAAJ;EACH,aALD,MAKO;EACH3L,cAAAA,CAAC,GAAG86D,UAAU,CAACkB,QAAD,CAAV,CAAqB,IAAIrwD,CAAJ,GAAQ,CAA7B,CAAJ;EACAxL,cAAAA,CAAC,GAAG26D,UAAU,CAACkB,QAAQ,GAAG,CAAZ,CAAV,CAAyB,IAAIrwD,CAAJ,GAAQ,CAAjC,CAAJ;EAEAnF,cAAAA,CAAC,GAAGs0D,UAAU,CAACkB,QAAQ,GAAG,CAAZ,CAAV,CAAyB,IAAIrwD,CAAJ,GAAQ,CAAjC,CAAJ;EACAlQ,cAAAA,CAAC,GAAGq/D,UAAU,CAACkB,QAAD,CAAV,CAAqB,IAAIrwD,CAAJ,GAAQ,CAA7B,CAAJ;EACH;EAIJ,WAhBD,MAgBO;EACH3L,YAAAA,CAAC,GAAG86D,UAAU,CAACkB,QAAD,CAAV,CAAqB,IAAIrwD,CAAzB,CAAJ;EACAxL,YAAAA,CAAC,GAAG26D,UAAU,CAACkB,QAAQ,GAAG,CAAZ,CAAV,CAAyB,IAAIrwD,CAA7B,CAAJ;EAEAnF,YAAAA,CAAC,GAAGs0D,UAAU,CAACkB,QAAQ,GAAG,CAAZ,CAAV,CAAyB,IAAIrwD,CAAJ,GAAQ,CAAjC,CAAJ;EACAlQ,YAAAA,CAAC,GAAGq/D,UAAU,CAACkB,QAAD,CAAV,CAAqB,IAAIrwD,CAAJ,GAAQ,CAA7B,CAAJ;EACH,WAxBgC;;;EA0BjCqyB,UAAAA,OAAO,CAACxvC,IAAR,CAAawR,CAAb,EAAgBG,CAAhB,EAAmB1E,CAAnB;EACAuiC,UAAAA,OAAO,CAACxvC,IAAR,CAAa2R,CAAb,EAAgBqG,CAAhB,EAAmB/K,CAAnB,EA3BiC;;EA+BjC4/C,UAAAA,UAAU,IAAI,CAAd;EACH,SApC8B;;;EAwC/Bn3B,QAAAA,KAAK,CAAC+Z,QAAN,CAAemd,UAAf,EAA2BC,UAA3B,EAAuC,CAAvC,EAxC+B;;EA6C/BD,QAAAA,UAAU,IAAIC,UAAd;EACH;EAEJ;;EAED,aAASwgB,qBAAT,GAAiC;EAC7B;EACA,UAAI77D,CAAJ,EAAOG,CAAP,EAAUqG,CAAV,EAAa/K,CAAb;EAEAuE,MAAAA,CAAC,GAAG86D,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,CAAJ;EACA36D,MAAAA,CAAC,GAAG26D,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,CAAJ;EACAt0D,MAAAA,CAAC,GAAGs0D,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,CAAJ;EACAr/D,MAAAA,CAAC,GAAGq/D,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,CAAJ;;EAEA,eAASmB,YAAT,CAAsBj8D,CAAtB,EAAyBG,CAAzB,EAA4BqG,CAA5B,EAA+B/K,CAA/B,EAAkC;EAC9B,YAAI4/C,UAAU,GAAG,CAAjB;EACA,YAAI8f,QAAQ,GAAG,EAAf;EACA,YAAIv3C,MAAM,GAAG,IAAI5N,OAAJ,EAAb;EAEA,SAAChW,CAAD,EAAIG,CAAJ,EAAOqG,CAAP,EAAU/K,CAAV,EAAa3M,OAAb,CAAqB,UAACotE,EAAD,EAAK9hE,GAAL,EAAa;EAE9BmqB,UAAAA,QAAQ,CAAC/1B,IAAT,CAAc+1B,QAAQ,CAAC,IAAI23C,EAAL,CAAtB,EAAgC33C,QAAQ,CAAC,IAAI23C,EAAJ,GAAS,CAAV,CAAxC,EAAsD33C,QAAQ,CAAC,IAAI23C,EAAJ,GAAS,CAAV,CAA9D,EAF8B;;EAI9BlhC,UAAAA,GAAG,CAACxsC,IAAJ,CAAS4L,GAAG,GAAG,CAAN,GAAU,CAAV,GAAc,CAAvB,EAA0BA,GAAG,IAAI,CAAP,IAAYA,GAAG,IAAI,CAAnB,GAAuB,CAAvB,GAA2B,CAArD;EAEA,cAAI+hE,IAAI,GAAG,IAAInmD,OAAJ,CAAYuO,QAAQ,CAAC,IAAI9oB,CAAL,CAApB,EAA6B8oB,QAAQ,CAAC,IAAI9oB,CAAJ,GAAQ,CAAT,CAArC,EAAkD8oB,QAAQ,CAAC,IAAI9oB,CAAJ,GAAQ,CAAT,CAA1D,CAAX;EACA0gE,UAAAA,IAAI,CAAC54C,GAAL,CAAS,IAAIvN,OAAJ,CAAYuO,QAAQ,CAAC,IAAIvkB,CAAL,CAApB,EAA6BukB,QAAQ,CAAC,IAAIvkB,CAAJ,GAAQ,CAAT,CAArC,EAAkDukB,QAAQ,CAAC,IAAIvkB,CAAJ,GAAQ,CAAT,CAA1D,CAAT;EACA,cAAIo8D,IAAI,GAAG,IAAIpmD,OAAJ,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB,CAAnB,CAAX;EACA4N,UAAAA,MAAM,GAAGu4C,IAAI,CAAC71C,KAAL,CAAW81C,IAAX,CAAT;EACAx4C,UAAAA,MAAM,CAACnM,SAAP;EACAsjB,UAAAA,OAAO,CAACvsC,IAAR,CAAao1B,MAAM,CAACjY,CAApB,EAAuBiY,MAAM,CAAChY,CAA9B,EAAiCgY,MAAM,CAAC7O,CAAxC;EAEAomD,UAAAA,QAAQ,CAAC3sE,IAAT,CAAciD,KAAK,EAAnB;EACH,SAdD;EAgBAqpE,QAAAA,UAAU,CAACtsE,IAAX,CAAgB2sE,QAAhB;EAEAn7D,QAAAA,CAAC,GAAGm7D,QAAQ,CAAC,CAAD,CAAZ;EACAh7D,QAAAA,CAAC,GAAGg7D,QAAQ,CAAC,CAAD,CAAZ;EACA30D,QAAAA,CAAC,GAAG20D,QAAQ,CAAC,CAAD,CAAZ;EACA1/D,QAAAA,CAAC,GAAG0/D,QAAQ,CAAC,CAAD,CAAZ,CA1B8B;;EA6B9Bn9B,QAAAA,OAAO,CAACxvC,IAAR,CAAawR,CAAb,EAAgBG,CAAhB,EAAmB1E,CAAnB;EACAuiC,QAAAA,OAAO,CAACxvC,IAAR,CAAa2R,CAAb,EAAgBqG,CAAhB,EAAmB/K,CAAnB,EA9B8B;;EAkC9B4/C,QAAAA,UAAU,IAAI,CAAd;EAEAn3B,QAAAA,KAAK,CAAC+Z,QAAN,CAAemd,UAAf,EAA2BC,UAA3B,EAAuC,CAAvC;EAEAD,QAAAA,UAAU,IAAIC,UAAd;EACH;;EACD4gB,MAAAA,YAAY,CAACj8D,CAAD,EAAIG,CAAJ,EAAOqG,CAAP,EAAU/K,CAAV,CAAZ,CAjD6B;;EAoD7B,UAAIE,GAAG,GAAGm/D,UAAU,CAAC,CAAD,CAAV,CAAcpqE,MAAd,GAAuB,CAAjC;;EACA,UAAI6Y,WAAW,GAAG,CAAlB,EAAqB;EACjBvJ,QAAAA,CAAC,GAAG86D,UAAU,CAAC,CAAD,CAAV,CAAcn/D,GAAG,GAAG,CAApB,CAAJ;EACAwE,QAAAA,CAAC,GAAG26D,UAAU,CAAC,CAAD,CAAV,CAAcn/D,GAAG,GAAG,CAApB,CAAJ;EACA6K,QAAAA,CAAC,GAAGs0D,UAAU,CAAC,CAAD,CAAV,CAAcn/D,GAAd,CAAJ;EACAF,QAAAA,CAAC,GAAGq/D,UAAU,CAAC,CAAD,CAAV,CAAcn/D,GAAd,CAAJ;EACH,OALD,MAKO;EACHqE,QAAAA,CAAC,GAAG86D,UAAU,CAAC,CAAD,CAAV,CAAcn/D,GAAd,CAAJ;EACAwE,QAAAA,CAAC,GAAG26D,UAAU,CAAC,CAAD,CAAV,CAAcn/D,GAAd,CAAJ;EACA6K,QAAAA,CAAC,GAAGs0D,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,CAAJ;EACAr/D,QAAAA,CAAC,GAAGq/D,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,CAAJ;EACH;;EAEDmB,MAAAA,YAAY,CAACj8D,CAAD,EAAIG,CAAJ,EAAOqG,CAAP,EAAU/K,CAAV,CAAZ;EAEH;;EAlYgH;EAoYpH;;;IArYgC4gC;;ECzCrC;;;;EAKA,IAAIggC,MAAM,GAAG;EAEZC,EAAAA,WAAW,EAAE,qBAAWnkE,IAAX,EAAiBokE,WAAjB,EAA8BC,GAA9B,EAAoC;EAEhDA,IAAAA,GAAG,GAAGA,GAAG,IAAI,CAAb;EAEA,QAAIC,QAAQ,GAAGF,WAAW,IAAIA,WAAW,CAAC7rE,MAA1C;EAAA,QACCgsE,QAAQ,GAAGD,QAAQ,GAAGF,WAAW,CAAE,CAAF,CAAX,GAAmBC,GAAtB,GAA4BrkE,IAAI,CAACzH,MADrD;EAAA,QAECisE,SAAS,GAAGC,UAAU,CAAEzkE,IAAF,EAAQ,CAAR,EAAWukE,QAAX,EAAqBF,GAArB,EAA0B,IAA1B,CAFvB;EAAA,QAGCl5B,SAAS,GAAG,EAHb;EAKA,QAAK,CAAEq5B,SAAP,EAAmB,OAAOr5B,SAAP;EAEnB,QAAI5gB,IAAJ,EAAUC,IAAV,EAAgBE,IAAhB,EAAsBC,IAAtB,EAA4BnX,CAA5B,EAA+BC,CAA/B,EAAkCixD,OAAlC;EAEA,QAAKJ,QAAL,EAAgBE,SAAS,GAAGG,cAAc,CAAE3kE,IAAF,EAAQokE,WAAR,EAAqBI,SAArB,EAAgCH,GAAhC,CAA1B,CAbgC;;EAiBhD,QAAKrkE,IAAI,CAACzH,MAAL,GAAc,KAAK8rE,GAAxB,EAA8B;EAE7B95C,MAAAA,IAAI,GAAGG,IAAI,GAAG1qB,IAAI,CAAE,CAAF,CAAlB;EACAwqB,MAAAA,IAAI,GAAGG,IAAI,GAAG3qB,IAAI,CAAE,CAAF,CAAlB;;EAEA,WAAM,IAAIvH,CAAC,GAAG4rE,GAAd,EAAmB5rE,CAAC,GAAG8rE,QAAvB,EAAiC9rE,CAAC,IAAI4rE,GAAtC,EAA4C;EAE3C7wD,QAAAA,CAAC,GAAGxT,IAAI,CAAEvH,CAAF,CAAR;EACAgb,QAAAA,CAAC,GAAGzT,IAAI,CAAEvH,CAAC,GAAG,CAAN,CAAR;EACA,YAAK+a,CAAC,GAAG+W,IAAT,EAAgBA,IAAI,GAAG/W,CAAP;EAChB,YAAKC,CAAC,GAAG+W,IAAT,EAAgBA,IAAI,GAAG/W,CAAP;EAChB,YAAKD,CAAC,GAAGkX,IAAT,EAAgBA,IAAI,GAAGlX,CAAP;EAChB,YAAKC,CAAC,GAAGkX,IAAT,EAAgBA,IAAI,GAAGlX,CAAP;EAEhB,OAd4B;;;EAkB7BixD,MAAAA,OAAO,GAAGxsE,IAAI,CAACsC,GAAL,CAAUkwB,IAAI,GAAGH,IAAjB,EAAuBI,IAAI,GAAGH,IAA9B,CAAV;EACAk6C,MAAAA,OAAO,GAAGA,OAAO,KAAK,CAAZ,GAAgB,IAAIA,OAApB,GAA8B,CAAxC;EAEA;;EAEDE,IAAAA,YAAY,CAAEJ,SAAF,EAAar5B,SAAb,EAAwBk5B,GAAxB,EAA6B95C,IAA7B,EAAmCC,IAAnC,EAAyCk6C,OAAzC,CAAZ;EAEA,WAAOv5B,SAAP;EAEA;EA9CW,CAAb;;EAoDA,SAASs5B,UAAT,CAAqBzkE,IAArB,EAA2ByH,KAA3B,EAAkCC,GAAlC,EAAuC28D,GAAvC,EAA4CQ,SAA5C,EAAwD;EAEvD,MAAIpsE,CAAJ,EAAOoE,IAAP;;EAEA,MAAKgoE,SAAS,KAAOC,UAAU,CAAE9kE,IAAF,EAAQyH,KAAR,EAAeC,GAAf,EAAoB28D,GAApB,CAAV,GAAsC,CAA3D,EAAiE;EAEhE,SAAM5rE,CAAC,GAAGgP,KAAV,EAAiBhP,CAAC,GAAGiP,GAArB,EAA0BjP,CAAC,IAAI4rE,GAA/B;EAAqCxnE,MAAAA,IAAI,GAAGkoE,UAAU,CAAEtsE,CAAF,EAAKuH,IAAI,CAAEvH,CAAF,CAAT,EAAgBuH,IAAI,CAAEvH,CAAC,GAAG,CAAN,CAApB,EAA+BoE,IAA/B,CAAjB;EAArC;EAEA,GAJD,MAIO;EAEN,SAAMpE,CAAC,GAAGiP,GAAG,GAAG28D,GAAhB,EAAqB5rE,CAAC,IAAIgP,KAA1B,EAAiChP,CAAC,IAAI4rE,GAAtC;EAA4CxnE,MAAAA,IAAI,GAAGkoE,UAAU,CAAEtsE,CAAF,EAAKuH,IAAI,CAAEvH,CAAF,CAAT,EAAgBuH,IAAI,CAAEvH,CAAC,GAAG,CAAN,CAApB,EAA+BoE,IAA/B,CAAjB;EAA5C;EAEA;;EAED,MAAKA,IAAI,IAAIgvB,MAAM,CAAEhvB,IAAF,EAAQA,IAAI,CAAC0zC,IAAb,CAAnB,EAAyC;EAExCy0B,IAAAA,UAAU,CAAEnoE,IAAF,CAAV;EACAA,IAAAA,IAAI,GAAGA,IAAI,CAAC0zC,IAAZ;EAEA;;EAED,SAAO1zC,IAAP;EAEA;;;EAID,SAASooE,YAAT,CAAuBx9D,KAAvB,EAA8BC,GAA9B,EAAoC;EAEnC,MAAK,CAAED,KAAP,EAAe,OAAOA,KAAP;EACf,MAAK,CAAEC,GAAP,EAAaA,GAAG,GAAGD,KAAN;EAEb,MAAI/G,CAAC,GAAG+G,KAAR;EAAA,MAAey9D,KAAf;;EAEA,KAAG;EAEFA,IAAAA,KAAK,GAAG,KAAR;;EAEA,QAAK,CAAExkE,CAAC,CAACykE,OAAJ,KAAiBt5C,MAAM,CAAEnrB,CAAF,EAAKA,CAAC,CAAC6vC,IAAP,CAAN,IAAuB60B,IAAI,CAAE1kE,CAAC,CAAC2kE,IAAJ,EAAU3kE,CAAV,EAAaA,CAAC,CAAC6vC,IAAf,CAAJ,KAA8B,CAAtE,CAAL,EAAiF;EAEhFy0B,MAAAA,UAAU,CAAEtkE,CAAF,CAAV;EACAA,MAAAA,CAAC,GAAGgH,GAAG,GAAGhH,CAAC,CAAC2kE,IAAZ;EACA,UAAK3kE,CAAC,KAAKA,CAAC,CAAC6vC,IAAb,EAAoB;EACpB20B,MAAAA,KAAK,GAAG,IAAR;EAEA,KAPD,MAOO;EAENxkE,MAAAA,CAAC,GAAGA,CAAC,CAAC6vC,IAAN;EAEA;EAED,GAjBD,QAiBU20B,KAAK,IAAIxkE,CAAC,KAAKgH,GAjBzB;;EAmBA,SAAOA,GAAP;EAEA;;;EAID,SAASk9D,YAAT,CAAuBU,GAAvB,EAA4Bn6B,SAA5B,EAAuCk5B,GAAvC,EAA4C95C,IAA5C,EAAkDC,IAAlD,EAAwDk6C,OAAxD,EAAiEa,IAAjE,EAAwE;EAEvE,MAAK,CAAED,GAAP,EAAa,OAF0D;;EAMvE,MAAK,CAAEC,IAAF,IAAUb,OAAf,EAAyBc,UAAU,CAAEF,GAAF,EAAO/6C,IAAP,EAAaC,IAAb,EAAmBk6C,OAAnB,CAAV;EAEzB,MAAIe,IAAI,GAAGH,GAAX;EAAA,MAAgBD,IAAhB;EAAA,MAAsB90B,IAAtB,CARuE;;EAYvE,SAAQ+0B,GAAG,CAACD,IAAJ,KAAaC,GAAG,CAAC/0B,IAAzB,EAAgC;EAE/B80B,IAAAA,IAAI,GAAGC,GAAG,CAACD,IAAX;EACA90B,IAAAA,IAAI,GAAG+0B,GAAG,CAAC/0B,IAAX;;EAEA,QAAKm0B,OAAO,GAAGgB,WAAW,CAAEJ,GAAF,EAAO/6C,IAAP,EAAaC,IAAb,EAAmBk6C,OAAnB,CAAd,GAA6CiB,KAAK,CAAEL,GAAF,CAA9D,EAAwE;EAEvE;EACAn6B,MAAAA,SAAS,CAAC90C,IAAV,CAAgBgvE,IAAI,CAAC5sE,CAAL,GAAS4rE,GAAzB;EACAl5B,MAAAA,SAAS,CAAC90C,IAAV,CAAgBivE,GAAG,CAAC7sE,CAAJ,GAAQ4rE,GAAxB;EACAl5B,MAAAA,SAAS,CAAC90C,IAAV,CAAgBk6C,IAAI,CAAC93C,CAAL,GAAS4rE,GAAzB;EAEAW,MAAAA,UAAU,CAAEM,GAAF,CAAV,CAPuE;;EAUvEA,MAAAA,GAAG,GAAG/0B,IAAI,CAACA,IAAX;EACAk1B,MAAAA,IAAI,GAAGl1B,IAAI,CAACA,IAAZ;EAEA;EAEA;;EAED+0B,IAAAA,GAAG,GAAG/0B,IAAN,CAtB+B;;EA0B/B,QAAK+0B,GAAG,KAAKG,IAAb,EAAoB;EAEnB;EAEA,UAAK,CAAEF,IAAP,EAAc;EAEbX,QAAAA,YAAY,CAAEK,YAAY,CAAEK,GAAF,CAAd,EAAuBn6B,SAAvB,EAAkCk5B,GAAlC,EAAuC95C,IAAvC,EAA6CC,IAA7C,EAAmDk6C,OAAnD,EAA4D,CAA5D,CAAZ,CAFa;EAMb,OAND,MAMO,IAAKa,IAAI,KAAK,CAAd,EAAkB;EAExBD,QAAAA,GAAG,GAAGM,sBAAsB,CAAEN,GAAF,EAAOn6B,SAAP,EAAkBk5B,GAAlB,CAA5B;EACAO,QAAAA,YAAY,CAAEU,GAAF,EAAOn6B,SAAP,EAAkBk5B,GAAlB,EAAuB95C,IAAvB,EAA6BC,IAA7B,EAAmCk6C,OAAnC,EAA4C,CAA5C,CAAZ,CAHwB;EAOxB,OAPM,MAOA,IAAKa,IAAI,KAAK,CAAd,EAAkB;EAExBM,QAAAA,WAAW,CAAEP,GAAF,EAAOn6B,SAAP,EAAkBk5B,GAAlB,EAAuB95C,IAAvB,EAA6BC,IAA7B,EAAmCk6C,OAAnC,CAAX;EAEA;;EAED;EAEA;EAED;EAED;;;EAID,SAASiB,KAAT,CAAgBL,GAAhB,EAAsB;EAErB,MAAIz9D,CAAC,GAAGy9D,GAAG,CAACD,IAAZ;EAAA,MACCr9D,CAAC,GAAGs9D,GADL;EAAA,MAECj3D,CAAC,GAAGi3D,GAAG,CAAC/0B,IAFT;EAIA,MAAK60B,IAAI,CAAEv9D,CAAF,EAAKG,CAAL,EAAQqG,CAAR,CAAJ,IAAmB,CAAxB,EAA4B,OAAO,KAAP,CANP;EAQrB;;EACA,MAAI3N,CAAC,GAAG4kE,GAAG,CAAC/0B,IAAJ,CAASA,IAAjB;;EAEA,SAAQ7vC,CAAC,KAAK4kE,GAAG,CAACD,IAAlB,EAAyB;EAExB,QAAKS,eAAe,CAAEj+D,CAAC,CAAC2L,CAAJ,EAAO3L,CAAC,CAAC4L,CAAT,EAAYzL,CAAC,CAACwL,CAAd,EAAiBxL,CAAC,CAACyL,CAAnB,EAAsBpF,CAAC,CAACmF,CAAxB,EAA2BnF,CAAC,CAACoF,CAA7B,EAAgC/S,CAAC,CAAC8S,CAAlC,EAAqC9S,CAAC,CAAC+S,CAAvC,CAAf,IAA6D2xD,IAAI,CAAE1kE,CAAC,CAAC2kE,IAAJ,EAAU3kE,CAAV,EAAaA,CAAC,CAAC6vC,IAAf,CAAJ,IAA6B,CAA/F,EAAmG;EAElG,aAAO,KAAP;EAEA;;EAED7vC,IAAAA,CAAC,GAAGA,CAAC,CAAC6vC,IAAN;EAEA;;EAED,SAAO,IAAP;EAEA;;EAED,SAASm1B,WAAT,CAAsBJ,GAAtB,EAA2B/6C,IAA3B,EAAiCC,IAAjC,EAAuCk6C,OAAvC,EAAiD;EAEhD,MAAI78D,CAAC,GAAGy9D,GAAG,CAACD,IAAZ;EAAA,MACCr9D,CAAC,GAAGs9D,GADL;EAAA,MAECj3D,CAAC,GAAGi3D,GAAG,CAAC/0B,IAFT;EAIA,MAAK60B,IAAI,CAAEv9D,CAAF,EAAKG,CAAL,EAAQqG,CAAR,CAAJ,IAAmB,CAAxB,EAA4B,OAAO,KAAP,CANoB;EAQhD;;EAEA,MAAI03D,KAAK,GAAGl+D,CAAC,CAAC2L,CAAF,GAAMxL,CAAC,CAACwL,CAAR,GAAc3L,CAAC,CAAC2L,CAAF,GAAMnF,CAAC,CAACmF,CAAR,GAAY3L,CAAC,CAAC2L,CAAd,GAAkBnF,CAAC,CAACmF,CAAlC,GAA0CxL,CAAC,CAACwL,CAAF,GAAMnF,CAAC,CAACmF,CAAR,GAAYxL,CAAC,CAACwL,CAAd,GAAkBnF,CAAC,CAACmF,CAA1E;EAAA,MACCwyD,KAAK,GAAGn+D,CAAC,CAAC4L,CAAF,GAAMzL,CAAC,CAACyL,CAAR,GAAc5L,CAAC,CAAC4L,CAAF,GAAMpF,CAAC,CAACoF,CAAR,GAAY5L,CAAC,CAAC4L,CAAd,GAAkBpF,CAAC,CAACoF,CAAlC,GAA0CzL,CAAC,CAACyL,CAAF,GAAMpF,CAAC,CAACoF,CAAR,GAAYzL,CAAC,CAACyL,CAAd,GAAkBpF,CAAC,CAACoF,CADvE;EAAA,MAECwyD,KAAK,GAAGp+D,CAAC,CAAC2L,CAAF,GAAMxL,CAAC,CAACwL,CAAR,GAAc3L,CAAC,CAAC2L,CAAF,GAAMnF,CAAC,CAACmF,CAAR,GAAY3L,CAAC,CAAC2L,CAAd,GAAkBnF,CAAC,CAACmF,CAAlC,GAA0CxL,CAAC,CAACwL,CAAF,GAAMnF,CAAC,CAACmF,CAAR,GAAYxL,CAAC,CAACwL,CAAd,GAAkBnF,CAAC,CAACmF,CAFvE;EAAA,MAGC0yD,KAAK,GAAGr+D,CAAC,CAAC4L,CAAF,GAAMzL,CAAC,CAACyL,CAAR,GAAc5L,CAAC,CAAC4L,CAAF,GAAMpF,CAAC,CAACoF,CAAR,GAAY5L,CAAC,CAAC4L,CAAd,GAAkBpF,CAAC,CAACoF,CAAlC,GAA0CzL,CAAC,CAACyL,CAAF,GAAMpF,CAAC,CAACoF,CAAR,GAAYzL,CAAC,CAACyL,CAAd,GAAkBpF,CAAC,CAACoF,CAHvE,CAVgD;;EAiBhD,MAAIgX,IAAI,GAAG07C,MAAM,CAAEJ,KAAF,EAASC,KAAT,EAAgBz7C,IAAhB,EAAsBC,IAAtB,EAA4Bk6C,OAA5B,CAAjB;EAAA,MACC95C,IAAI,GAAGu7C,MAAM,CAAEF,KAAF,EAASC,KAAT,EAAgB37C,IAAhB,EAAsBC,IAAtB,EAA4Bk6C,OAA5B,CADd,CAjBgD;;EAsBhD,MAAIhkE,CAAC,GAAG4kE,GAAG,CAACc,KAAZ;;EAEA,SAAQ1lE,CAAC,IAAIA,CAAC,CAACkc,CAAF,IAAOgO,IAApB,EAA2B;EAE1B,QAAKlqB,CAAC,KAAK4kE,GAAG,CAACD,IAAV,IAAkB3kE,CAAC,KAAK4kE,GAAG,CAAC/0B,IAA5B,IACHu1B,eAAe,CAAEj+D,CAAC,CAAC2L,CAAJ,EAAO3L,CAAC,CAAC4L,CAAT,EAAYzL,CAAC,CAACwL,CAAd,EAAiBxL,CAAC,CAACyL,CAAnB,EAAsBpF,CAAC,CAACmF,CAAxB,EAA2BnF,CAAC,CAACoF,CAA7B,EAAgC/S,CAAC,CAAC8S,CAAlC,EAAqC9S,CAAC,CAAC+S,CAAvC,CADZ,IAEH2xD,IAAI,CAAE1kE,CAAC,CAAC2kE,IAAJ,EAAU3kE,CAAV,EAAaA,CAAC,CAAC6vC,IAAf,CAAJ,IAA6B,CAF/B,EAEmC,OAAO,KAAP;EACnC7vC,IAAAA,CAAC,GAAGA,CAAC,CAAC0lE,KAAN;EAEA,GA/B+C;;;EAmChD1lE,EAAAA,CAAC,GAAG4kE,GAAG,CAACe,KAAR;;EAEA,SAAQ3lE,CAAC,IAAIA,CAAC,CAACkc,CAAF,IAAO6N,IAApB,EAA2B;EAE1B,QAAK/pB,CAAC,KAAK4kE,GAAG,CAACD,IAAV,IAAkB3kE,CAAC,KAAK4kE,GAAG,CAAC/0B,IAA5B,IACHu1B,eAAe,CAAEj+D,CAAC,CAAC2L,CAAJ,EAAO3L,CAAC,CAAC4L,CAAT,EAAYzL,CAAC,CAACwL,CAAd,EAAiBxL,CAAC,CAACyL,CAAnB,EAAsBpF,CAAC,CAACmF,CAAxB,EAA2BnF,CAAC,CAACoF,CAA7B,EAAgC/S,CAAC,CAAC8S,CAAlC,EAAqC9S,CAAC,CAAC+S,CAAvC,CADZ,IAEH2xD,IAAI,CAAE1kE,CAAC,CAAC2kE,IAAJ,EAAU3kE,CAAV,EAAaA,CAAC,CAAC6vC,IAAf,CAAJ,IAA6B,CAF/B,EAEmC,OAAO,KAAP;EAEnC7vC,IAAAA,CAAC,GAAGA,CAAC,CAAC2lE,KAAN;EAEA;;EAED,SAAO,IAAP;EAEA;;;EAID,SAAST,sBAAT,CAAiCn+D,KAAjC,EAAwC0jC,SAAxC,EAAmDk5B,GAAnD,EAAyD;EAExD,MAAI3jE,CAAC,GAAG+G,KAAR;;EAEA,KAAG;EAEF,QAAII,CAAC,GAAGnH,CAAC,CAAC2kE,IAAV;EAAA,QAAgBr9D,CAAC,GAAGtH,CAAC,CAAC6vC,IAAF,CAAOA,IAA3B;;EAEA,QAAK,CAAE1kB,MAAM,CAAEhkB,CAAF,EAAKG,CAAL,CAAR,IAAoBksD,UAAU,CAAErsD,CAAF,EAAKnH,CAAL,EAAQA,CAAC,CAAC6vC,IAAV,EAAgBvoC,CAAhB,CAA9B,IAAqDs+D,aAAa,CAAEz+D,CAAF,EAAKG,CAAL,CAAlE,IAA8Es+D,aAAa,CAAEt+D,CAAF,EAAKH,CAAL,CAAhG,EAA2G;EAE1GsjC,MAAAA,SAAS,CAAC90C,IAAV,CAAgBwR,CAAC,CAACpP,CAAF,GAAM4rE,GAAtB;EACAl5B,MAAAA,SAAS,CAAC90C,IAAV,CAAgBqK,CAAC,CAACjI,CAAF,GAAM4rE,GAAtB;EACAl5B,MAAAA,SAAS,CAAC90C,IAAV,CAAgB2R,CAAC,CAACvP,CAAF,GAAM4rE,GAAtB,EAJ0G;;EAQ1GW,MAAAA,UAAU,CAAEtkE,CAAF,CAAV;EACAskE,MAAAA,UAAU,CAAEtkE,CAAC,CAAC6vC,IAAJ,CAAV;EAEA7vC,MAAAA,CAAC,GAAG+G,KAAK,GAAGO,CAAZ;EAEA;;EAEDtH,IAAAA,CAAC,GAAGA,CAAC,CAAC6vC,IAAN;EAEA,GArBD,QAqBU7vC,CAAC,KAAK+G,KArBhB;;EAuBA,SAAO/G,CAAP;EAEA;;;EAID,SAASmlE,WAAT,CAAsBp+D,KAAtB,EAA6B0jC,SAA7B,EAAwCk5B,GAAxC,EAA6C95C,IAA7C,EAAmDC,IAAnD,EAAyDk6C,OAAzD,EAAmE;EAElE;EAEA,MAAI78D,CAAC,GAAGJ,KAAR;;EAEA,KAAG;EAEF,QAAIO,CAAC,GAAGH,CAAC,CAAC0oC,IAAF,CAAOA,IAAf;;EAEA,WAAQvoC,CAAC,KAAKH,CAAC,CAACw9D,IAAhB,EAAuB;EAEtB,UAAKx9D,CAAC,CAACpP,CAAF,KAAQuP,CAAC,CAACvP,CAAV,IAAe8tE,eAAe,CAAE1+D,CAAF,EAAKG,CAAL,CAAnC,EAA8C;EAE7C;EAEA,YAAIqG,CAAC,GAAGm4D,YAAY,CAAE3+D,CAAF,EAAKG,CAAL,CAApB,CAJ6C;;EAQ7CH,QAAAA,CAAC,GAAGo9D,YAAY,CAAEp9D,CAAF,EAAKA,CAAC,CAAC0oC,IAAP,CAAhB;EACAliC,QAAAA,CAAC,GAAG42D,YAAY,CAAE52D,CAAF,EAAKA,CAAC,CAACkiC,IAAP,CAAhB,CAT6C;;EAa7Cq0B,QAAAA,YAAY,CAAE/8D,CAAF,EAAKsjC,SAAL,EAAgBk5B,GAAhB,EAAqB95C,IAArB,EAA2BC,IAA3B,EAAiCk6C,OAAjC,CAAZ;EACAE,QAAAA,YAAY,CAAEv2D,CAAF,EAAK88B,SAAL,EAAgBk5B,GAAhB,EAAqB95C,IAArB,EAA2BC,IAA3B,EAAiCk6C,OAAjC,CAAZ;EACA;EAEA;;EAED18D,MAAAA,CAAC,GAAGA,CAAC,CAACuoC,IAAN;EAEA;;EAED1oC,IAAAA,CAAC,GAAGA,CAAC,CAAC0oC,IAAN;EAEA,GA/BD,QA+BU1oC,CAAC,KAAKJ,KA/BhB;EAiCA;;;EAID,SAASk9D,cAAT,CAAyB3kE,IAAzB,EAA+BokE,WAA/B,EAA4CI,SAA5C,EAAuDH,GAAvD,EAA6D;EAE5D,MAAIoC,KAAK,GAAG,EAAZ;EAAA,MAAgBhuE,CAAhB;EAAA,MAAmB+K,GAAnB;EAAA,MAAwBiE,KAAxB;EAAA,MAA+BC,GAA/B;EAAA,MAAoCnO,IAApC;;EAEA,OAAMd,CAAC,GAAG,CAAJ,EAAO+K,GAAG,GAAG4gE,WAAW,CAAC7rE,MAA/B,EAAuCE,CAAC,GAAG+K,GAA3C,EAAgD/K,CAAC,EAAjD,EAAuD;EAEtDgP,IAAAA,KAAK,GAAG28D,WAAW,CAAE3rE,CAAF,CAAX,GAAmB4rE,GAA3B;EACA38D,IAAAA,GAAG,GAAGjP,CAAC,GAAG+K,GAAG,GAAG,CAAV,GAAc4gE,WAAW,CAAE3rE,CAAC,GAAG,CAAN,CAAX,GAAuB4rE,GAArC,GAA2CrkE,IAAI,CAACzH,MAAtD;EACAgB,IAAAA,IAAI,GAAGkrE,UAAU,CAAEzkE,IAAF,EAAQyH,KAAR,EAAeC,GAAf,EAAoB28D,GAApB,EAAyB,KAAzB,CAAjB;EACA,QAAK9qE,IAAI,KAAKA,IAAI,CAACg3C,IAAnB,EAA0Bh3C,IAAI,CAAC4rE,OAAL,GAAe,IAAf;EAC1BsB,IAAAA,KAAK,CAACpwE,IAAN,CAAYqwE,WAAW,CAAEntE,IAAF,CAAvB;EAEA;;EAEDktE,EAAAA,KAAK,CAACziE,IAAN,CAAY2iE,QAAZ,EAd4D;;EAkB5D,OAAMluE,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAGguE,KAAK,CAACluE,MAAvB,EAA+BE,CAAC,EAAhC,EAAsC;EAErCmuE,IAAAA,aAAa,CAAEH,KAAK,CAAEhuE,CAAF,CAAP,EAAc+rE,SAAd,CAAb;EACAA,IAAAA,SAAS,GAAGS,YAAY,CAAET,SAAF,EAAaA,SAAS,CAACj0B,IAAvB,CAAxB;EAEA;;EAED,SAAOi0B,SAAP;EAEA;;EAED,SAASmC,QAAT,CAAmB9+D,CAAnB,EAAsBG,CAAtB,EAA0B;EAEzB,SAAOH,CAAC,CAAC2L,CAAF,GAAMxL,CAAC,CAACwL,CAAf;EAEA;;;EAID,SAASozD,aAAT,CAAwBC,IAAxB,EAA8BrC,SAA9B,EAA0C;EAEzCA,EAAAA,SAAS,GAAGsC,cAAc,CAAED,IAAF,EAAQrC,SAAR,CAA1B;;EAEA,MAAKA,SAAL,EAAiB;EAEhB,QAAIx8D,CAAC,GAAGw+D,YAAY,CAAEhC,SAAF,EAAaqC,IAAb,CAApB;EAEA5B,IAAAA,YAAY,CAAEj9D,CAAF,EAAKA,CAAC,CAACuoC,IAAP,CAAZ;EAEA;EAED;;;EAID,SAASu2B,cAAT,CAAyBD,IAAzB,EAA+BrC,SAA/B,EAA2C;EAE1C,MAAI9jE,CAAC,GAAG8jE,SAAR;EAAA,MACCuC,EAAE,GAAGF,IAAI,CAACrzD,CADX;EAAA,MAECwzD,EAAE,GAAGH,IAAI,CAACpzD,CAFX;EAAA,MAGC8K,EAAE,GAAG,CAAEnjB,QAHR;EAAA,MAICoC,CAJD,CAF0C;EAS1C;;EAEA,KAAG;EAEF,QAAKwpE,EAAE,IAAItmE,CAAC,CAAC+S,CAAR,IAAauzD,EAAE,IAAItmE,CAAC,CAAC6vC,IAAF,CAAO98B,CAA1B,IAA+B/S,CAAC,CAAC6vC,IAAF,CAAO98B,CAAP,KAAa/S,CAAC,CAAC+S,CAAnD,EAAuD;EAEtD,UAAID,CAAC,GAAG9S,CAAC,CAAC8S,CAAF,GAAM,CAAEwzD,EAAE,GAAGtmE,CAAC,CAAC+S,CAAT,KAAiB/S,CAAC,CAAC6vC,IAAF,CAAO/8B,CAAP,GAAW9S,CAAC,CAAC8S,CAA9B,KAAsC9S,CAAC,CAAC6vC,IAAF,CAAO98B,CAAP,GAAW/S,CAAC,CAAC+S,CAAnD,CAAd;;EAEA,UAAKD,CAAC,IAAIuzD,EAAL,IAAWvzD,CAAC,GAAG+K,EAApB,EAAyB;EAExBA,QAAAA,EAAE,GAAG/K,CAAL;;EAEA,YAAKA,CAAC,KAAKuzD,EAAX,EAAgB;EAEf,cAAKC,EAAE,KAAKtmE,CAAC,CAAC+S,CAAd,EAAkB,OAAO/S,CAAP;EAClB,cAAKsmE,EAAE,KAAKtmE,CAAC,CAAC6vC,IAAF,CAAO98B,CAAnB,EAAuB,OAAO/S,CAAC,CAAC6vC,IAAT;EAEvB;;EAED/yC,QAAAA,CAAC,GAAGkD,CAAC,CAAC8S,CAAF,GAAM9S,CAAC,CAAC6vC,IAAF,CAAO/8B,CAAb,GAAiB9S,CAAjB,GAAqBA,CAAC,CAAC6vC,IAA3B;EAEA;EAED;;EAED7vC,IAAAA,CAAC,GAAGA,CAAC,CAAC6vC,IAAN;EAEA,GAzBD,QAyBU7vC,CAAC,KAAK8jE,SAzBhB;;EA2BA,MAAK,CAAEhnE,CAAP,EAAW,OAAO,IAAP;EAEX,MAAKupE,EAAE,KAAKxoD,EAAZ,EAAiB,OAAO/gB,CAAC,CAAC6nE,IAAT,CAxCyB;EA0C1C;EACA;EACA;;EAEA,MAAII,IAAI,GAAGjoE,CAAX;EAAA,MACCypE,EAAE,GAAGzpE,CAAC,CAACgW,CADR;EAAA,MAEC0zD,EAAE,GAAG1pE,CAAC,CAACiW,CAFR;EAAA,MAGC0zD,MAAM,GAAG/rE,QAHV;EAAA,MAIC2iE,GAJD;EAMAr9D,EAAAA,CAAC,GAAGlD,CAAC,CAAC+yC,IAAN;;EAEA,SAAQ7vC,CAAC,KAAK+kE,IAAd,EAAqB;EAEpB,QAAKsB,EAAE,IAAIrmE,CAAC,CAAC8S,CAAR,IAAa9S,CAAC,CAAC8S,CAAF,IAAOyzD,EAApB,IAA0BF,EAAE,KAAKrmE,CAAC,CAAC8S,CAAnC,IACDsyD,eAAe,CAAEkB,EAAE,GAAGE,EAAL,GAAUH,EAAV,GAAexoD,EAAjB,EAAqByoD,EAArB,EAAyBC,EAAzB,EAA6BC,EAA7B,EAAiCF,EAAE,GAAGE,EAAL,GAAU3oD,EAAV,GAAewoD,EAAhD,EAAoDC,EAApD,EAAwDtmE,CAAC,CAAC8S,CAA1D,EAA6D9S,CAAC,CAAC+S,CAA/D,CADnB,EACwF;EAEvFsqD,MAAAA,GAAG,GAAG7lE,IAAI,CAACuK,GAAL,CAAUukE,EAAE,GAAGtmE,CAAC,CAAC+S,CAAjB,KAAyBszD,EAAE,GAAGrmE,CAAC,CAAC8S,CAAhC,CAAN,CAFuF;;EAIvF,UAAK,CAAEuqD,GAAG,GAAGoJ,MAAN,IAAkBpJ,GAAG,KAAKoJ,MAAR,IAAkBzmE,CAAC,CAAC8S,CAAF,GAAMhW,CAAC,CAACgW,CAA9C,KAAuD8yD,aAAa,CAAE5lE,CAAF,EAAKmmE,IAAL,CAAzE,EAAuF;EAEtFrpE,QAAAA,CAAC,GAAGkD,CAAJ;EACAymE,QAAAA,MAAM,GAAGpJ,GAAT;EAEA;EAED;;EAEDr9D,IAAAA,CAAC,GAAGA,CAAC,CAAC6vC,IAAN;EAEA;;EAED,SAAO/yC,CAAP;EAEA;;;EAID,SAASgoE,UAAT,CAAqB/9D,KAArB,EAA4B8iB,IAA5B,EAAkCC,IAAlC,EAAwCk6C,OAAxC,EAAkD;EAEjD,MAAIhkE,CAAC,GAAG+G,KAAR;;EAEA,KAAG;EAEF,QAAK/G,CAAC,CAACkc,CAAF,KAAQ,IAAb,EAAoBlc,CAAC,CAACkc,CAAF,GAAMupD,MAAM,CAAEzlE,CAAC,CAAC8S,CAAJ,EAAO9S,CAAC,CAAC+S,CAAT,EAAY8W,IAAZ,EAAkBC,IAAlB,EAAwBk6C,OAAxB,CAAZ;EACpBhkE,IAAAA,CAAC,CAAC2lE,KAAF,GAAU3lE,CAAC,CAAC2kE,IAAZ;EACA3kE,IAAAA,CAAC,CAAC0lE,KAAF,GAAU1lE,CAAC,CAAC6vC,IAAZ;EACA7vC,IAAAA,CAAC,GAAGA,CAAC,CAAC6vC,IAAN;EAEA,GAPD,QAOU7vC,CAAC,KAAK+G,KAPhB;;EASA/G,EAAAA,CAAC,CAAC2lE,KAAF,CAAQD,KAAR,GAAgB,IAAhB;EACA1lE,EAAAA,CAAC,CAAC2lE,KAAF,GAAU,IAAV;EAEAe,EAAAA,UAAU,CAAE1mE,CAAF,CAAV;EAEA;EAGD;;;EAEA,SAAS0mE,UAAT,CAAqB7tE,IAArB,EAA4B;EAE3B,MAAId,CAAJ;EAAA,MAAOiI,CAAP;EAAA,MAAU4d,CAAV;EAAA,MAAahW,CAAb;EAAA,MAAgB++D,IAAhB;EAAA,MAAsBC,SAAtB;EAAA,MAAiCC,KAAjC;EAAA,MAAwCC,KAAxC;EAAA,MAA+CC,MAAM,GAAG,CAAxD;;EAEA,KAAG;EAEF/mE,IAAAA,CAAC,GAAGnH,IAAJ;EACAA,IAAAA,IAAI,GAAG,IAAP;EACA8tE,IAAAA,IAAI,GAAG,IAAP;EACAC,IAAAA,SAAS,GAAG,CAAZ;;EAEA,WAAQ5mE,CAAR,EAAY;EAEX4mE,MAAAA,SAAS;EACThpD,MAAAA,CAAC,GAAG5d,CAAJ;EACA6mE,MAAAA,KAAK,GAAG,CAAR;;EAEA,WAAM9uE,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAGgvE,MAAjB,EAAyBhvE,CAAC,EAA1B,EAAgC;EAE/B8uE,QAAAA,KAAK;EACLjpD,QAAAA,CAAC,GAAGA,CAAC,CAAC8nD,KAAN;EACA,YAAK,CAAE9nD,CAAP,EAAW;EAEX;;EAEDkpD,MAAAA,KAAK,GAAGC,MAAR;;EAEA,aAAQF,KAAK,GAAG,CAAR,IAAeC,KAAK,GAAG,CAAR,IAAalpD,CAApC,EAA0C;EAEzC,YAAKipD,KAAK,KAAK,CAAV,KAAiBC,KAAK,KAAK,CAAV,IAAe,CAAElpD,CAAjB,IAAsB5d,CAAC,CAACkc,CAAF,IAAO0B,CAAC,CAAC1B,CAAhD,CAAL,EAA2D;EAE1DtU,UAAAA,CAAC,GAAG5H,CAAJ;EACAA,UAAAA,CAAC,GAAGA,CAAC,CAAC0lE,KAAN;EACAmB,UAAAA,KAAK;EAEL,SAND,MAMO;EAENj/D,UAAAA,CAAC,GAAGgW,CAAJ;EACAA,UAAAA,CAAC,GAAGA,CAAC,CAAC8nD,KAAN;EACAoB,UAAAA,KAAK;EAEL;;EAED,YAAKH,IAAL,EAAYA,IAAI,CAACjB,KAAL,GAAa99D,CAAb,CAAZ,KACK/O,IAAI,GAAG+O,CAAP;EAELA,QAAAA,CAAC,CAAC+9D,KAAF,GAAUgB,IAAV;EACAA,QAAAA,IAAI,GAAG/+D,CAAP;EAEA;;EAED5H,MAAAA,CAAC,GAAG4d,CAAJ;EAEA;;EAED+oD,IAAAA,IAAI,CAACjB,KAAL,GAAa,IAAb;EACAqB,IAAAA,MAAM,IAAI,CAAV;EAEA,GAtDD,QAsDUH,SAAS,GAAG,CAtDtB;;EAwDA,SAAO/tE,IAAP;EAEA;;;EAID,SAAS4sE,MAAT,CAAiB3yD,CAAjB,EAAoBC,CAApB,EAAuB8W,IAAvB,EAA6BC,IAA7B,EAAmCk6C,OAAnC,EAA6C;EAE5C;EAEAlxD,EAAAA,CAAC,GAAG,SAAUA,CAAC,GAAG+W,IAAd,IAAuBm6C,OAA3B;EACAjxD,EAAAA,CAAC,GAAG,SAAUA,CAAC,GAAG+W,IAAd,IAAuBk6C,OAA3B;EAEAlxD,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;EACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;EACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;EACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;EAEAC,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;EACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;EACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;EACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;EAEA,SAAOD,CAAC,GAAKC,CAAC,IAAI,CAAlB;EAEA;;;EAID,SAASizD,WAAT,CAAsBj/D,KAAtB,EAA8B;EAE7B,MAAI/G,CAAC,GAAG+G,KAAR;EAAA,MAAeigE,QAAQ,GAAGjgE,KAA1B;;EAEA,KAAG;EAEF,QAAK/G,CAAC,CAAC8S,CAAF,GAAMk0D,QAAQ,CAACl0D,CAApB,EAAwBk0D,QAAQ,GAAGhnE,CAAX;EACxBA,IAAAA,CAAC,GAAGA,CAAC,CAAC6vC,IAAN;EAEA,GALD,QAKU7vC,CAAC,KAAK+G,KALhB;;EAOA,SAAOigE,QAAP;EAEA;;;EAID,SAAS5B,eAAT,CAA0BjmD,EAA1B,EAA8BC,EAA9B,EAAkCE,EAAlC,EAAsCC,EAAtC,EAA0CyN,EAA1C,EAA8CC,EAA9C,EAAkDg6C,EAAlD,EAAsDC,EAAtD,EAA2D;EAE1D,SAAO,CAAEl6C,EAAE,GAAGi6C,EAAP,KAAgB7nD,EAAE,GAAG8nD,EAArB,IAA4B,CAAE/nD,EAAE,GAAG8nD,EAAP,KAAgBh6C,EAAE,GAAGi6C,EAArB,CAA5B,IAAyD,CAAzD,IACN,CAAE/nD,EAAE,GAAG8nD,EAAP,KAAgB1nD,EAAE,GAAG2nD,EAArB,IAA4B,CAAE5nD,EAAE,GAAG2nD,EAAP,KAAgB7nD,EAAE,GAAG8nD,EAArB,CAA5B,IAAyD,CADnD,IAEN,CAAE5nD,EAAE,GAAG2nD,EAAP,KAAgBh6C,EAAE,GAAGi6C,EAArB,IAA4B,CAAEl6C,EAAE,GAAGi6C,EAAP,KAAgB1nD,EAAE,GAAG2nD,EAArB,CAA5B,IAAyD,CAF1D;EAIA;;;EAID,SAASrB,eAAT,CAA0B1+D,CAA1B,EAA6BG,CAA7B,EAAiC;EAEhC,SAAOH,CAAC,CAAC0oC,IAAF,CAAO93C,CAAP,KAAauP,CAAC,CAACvP,CAAf,IAAoBoP,CAAC,CAACw9D,IAAF,CAAO5sE,CAAP,KAAauP,CAAC,CAACvP,CAAnC,IAAwC,CAAEovE,iBAAiB,CAAEhgE,CAAF,EAAKG,CAAL,CAA3D,IACNs+D,aAAa,CAAEz+D,CAAF,EAAKG,CAAL,CADP,IACmBs+D,aAAa,CAAEt+D,CAAF,EAAKH,CAAL,CADhC,IAC4CigE,YAAY,CAAEjgE,CAAF,EAAKG,CAAL,CAD/D;EAGA;;;EAID,SAASo9D,IAAT,CAAe1kE,CAAf,EAAkB4d,CAAlB,EAAqBvL,CAArB,EAAyB;EAExB,SAAO,CAAEuL,CAAC,CAAC7K,CAAF,GAAM/S,CAAC,CAAC+S,CAAV,KAAkBV,CAAC,CAACS,CAAF,GAAM8K,CAAC,CAAC9K,CAA1B,IAAgC,CAAE8K,CAAC,CAAC9K,CAAF,GAAM9S,CAAC,CAAC8S,CAAV,KAAkBT,CAAC,CAACU,CAAF,GAAM6K,CAAC,CAAC7K,CAA1B,CAAvC;EAEA;;;EAID,SAASoY,MAAT,CAAiBuD,EAAjB,EAAqBC,EAArB,EAA0B;EAEzB,SAAOD,EAAE,CAAC5b,CAAH,KAAS6b,EAAE,CAAC7b,CAAZ,IAAiB4b,EAAE,CAAC3b,CAAH,KAAS4b,EAAE,CAAC5b,CAApC;EAEA;;;EAID,SAASygD,UAAT,CAAqB9kC,EAArB,EAAyBy+B,EAAzB,EAA6Bx+B,EAA7B,EAAiC04C,EAAjC,EAAsC;EAErC,MAAOl8C,MAAM,CAAEuD,EAAF,EAAMy+B,EAAN,CAAN,IAAoBhiC,MAAM,CAAEwD,EAAF,EAAM04C,EAAN,CAA5B,IACDl8C,MAAM,CAAEuD,EAAF,EAAM24C,EAAN,CAAN,IAAoBl8C,MAAM,CAAEwD,EAAF,EAAMw+B,EAAN,CAD9B,EAC6C,OAAO,IAAP;EAE7C,SAAOuX,IAAI,CAAEh2C,EAAF,EAAMy+B,EAAN,EAAUx+B,EAAV,CAAJ,GAAqB,CAArB,KAA2B+1C,IAAI,CAAEh2C,EAAF,EAAMy+B,EAAN,EAAUka,EAAV,CAAJ,GAAqB,CAAhD,IACH3C,IAAI,CAAE/1C,EAAF,EAAM04C,EAAN,EAAU34C,EAAV,CAAJ,GAAqB,CAArB,KAA2Bg2C,IAAI,CAAE/1C,EAAF,EAAM04C,EAAN,EAAUla,EAAV,CAAJ,GAAqB,CADpD;EAGA;;;EAID,SAASga,iBAAT,CAA4BhgE,CAA5B,EAA+BG,CAA/B,EAAmC;EAElC,MAAItH,CAAC,GAAGmH,CAAR;;EAEA,KAAG;EAEF,QAAKnH,CAAC,CAACjI,CAAF,KAAQoP,CAAC,CAACpP,CAAV,IAAeiI,CAAC,CAAC6vC,IAAF,CAAO93C,CAAP,KAAaoP,CAAC,CAACpP,CAA9B,IAAmCiI,CAAC,CAACjI,CAAF,KAAQuP,CAAC,CAACvP,CAA7C,IAAkDiI,CAAC,CAAC6vC,IAAF,CAAO93C,CAAP,KAAauP,CAAC,CAACvP,CAAjE,IACDy7D,UAAU,CAAExzD,CAAF,EAAKA,CAAC,CAAC6vC,IAAP,EAAa1oC,CAAb,EAAgBG,CAAhB,CADd,EACoC;EAEnC,aAAO,IAAP;EAEA;;EAEDtH,IAAAA,CAAC,GAAGA,CAAC,CAAC6vC,IAAN;EAEA,GAXD,QAWU7vC,CAAC,KAAKmH,CAXhB;;EAaA,SAAO,KAAP;EAEA;;;EAID,SAASy+D,aAAT,CAAwBz+D,CAAxB,EAA2BG,CAA3B,EAA+B;EAE9B,SAAOo9D,IAAI,CAAEv9D,CAAC,CAACw9D,IAAJ,EAAUx9D,CAAV,EAAaA,CAAC,CAAC0oC,IAAf,CAAJ,GAA4B,CAA5B,GACN60B,IAAI,CAAEv9D,CAAF,EAAKG,CAAL,EAAQH,CAAC,CAAC0oC,IAAV,CAAJ,IAAwB,CAAxB,IAA6B60B,IAAI,CAAEv9D,CAAF,EAAKA,CAAC,CAACw9D,IAAP,EAAar9D,CAAb,CAAJ,IAAwB,CAD/C,GAENo9D,IAAI,CAAEv9D,CAAF,EAAKG,CAAL,EAAQH,CAAC,CAACw9D,IAAV,CAAJ,GAAuB,CAAvB,IAA4BD,IAAI,CAAEv9D,CAAF,EAAKA,CAAC,CAAC0oC,IAAP,EAAavoC,CAAb,CAAJ,GAAuB,CAFpD;EAIA;;;EAID,SAAS8/D,YAAT,CAAuBjgE,CAAvB,EAA0BG,CAA1B,EAA8B;EAE7B,MAAItH,CAAC,GAAGmH,CAAR;EAAA,MACCmgE,MAAM,GAAG,KADV;EAAA,MAECL,EAAE,GAAG,CAAE9/D,CAAC,CAAC2L,CAAF,GAAMxL,CAAC,CAACwL,CAAV,IAAgB,CAFtB;EAAA,MAGCo0D,EAAE,GAAG,CAAE//D,CAAC,CAAC4L,CAAF,GAAMzL,CAAC,CAACyL,CAAV,IAAgB,CAHtB;;EAKA,KAAG;EAEF,QAAS/S,CAAC,CAAC+S,CAAF,GAAMm0D,EAAR,KAAmBlnE,CAAC,CAAC6vC,IAAF,CAAO98B,CAAP,GAAWm0D,EAAhC,IAA0ClnE,CAAC,CAAC6vC,IAAF,CAAO98B,CAAP,KAAa/S,CAAC,CAAC+S,CAAzD,IACCk0D,EAAE,GAAG,CAAEjnE,CAAC,CAAC6vC,IAAF,CAAO/8B,CAAP,GAAW9S,CAAC,CAAC8S,CAAf,KAAuBo0D,EAAE,GAAGlnE,CAAC,CAAC+S,CAA9B,KAAsC/S,CAAC,CAAC6vC,IAAF,CAAO98B,CAAP,GAAW/S,CAAC,CAAC+S,CAAnD,IAAyD/S,CAAC,CAAC8S,CADtE,EAC4E;EAE3Ew0D,MAAAA,MAAM,GAAG,CAAEA,MAAX;EAEA;;EAEDtnE,IAAAA,CAAC,GAAGA,CAAC,CAAC6vC,IAAN;EAEA,GAXD,QAWU7vC,CAAC,KAAKmH,CAXhB;;EAaA,SAAOmgE,MAAP;EAEA;EAGD;;;EAEA,SAASxB,YAAT,CAAuB3+D,CAAvB,EAA0BG,CAA1B,EAA8B;EAE7B,MAAIigE,EAAE,GAAG,IAAIC,IAAJ,CAAUrgE,CAAC,CAACpP,CAAZ,EAAeoP,CAAC,CAAC2L,CAAjB,EAAoB3L,CAAC,CAAC4L,CAAtB,CAAT;EAAA,MACC00D,EAAE,GAAG,IAAID,IAAJ,CAAUlgE,CAAC,CAACvP,CAAZ,EAAeuP,CAAC,CAACwL,CAAjB,EAAoBxL,CAAC,CAACyL,CAAtB,CADN;EAAA,MAEC20D,EAAE,GAAGvgE,CAAC,CAAC0oC,IAFR;EAAA,MAGC83B,EAAE,GAAGrgE,CAAC,CAACq9D,IAHR;EAKAx9D,EAAAA,CAAC,CAAC0oC,IAAF,GAASvoC,CAAT;EACAA,EAAAA,CAAC,CAACq9D,IAAF,GAASx9D,CAAT;EAEAogE,EAAAA,EAAE,CAAC13B,IAAH,GAAU63B,EAAV;EACAA,EAAAA,EAAE,CAAC/C,IAAH,GAAU4C,EAAV;EAEAE,EAAAA,EAAE,CAAC53B,IAAH,GAAU03B,EAAV;EACAA,EAAAA,EAAE,CAAC5C,IAAH,GAAU8C,EAAV;EAEAE,EAAAA,EAAE,CAAC93B,IAAH,GAAU43B,EAAV;EACAA,EAAAA,EAAE,CAAC9C,IAAH,GAAUgD,EAAV;EAEA,SAAOF,EAAP;EAEA;;;EAID,SAASpD,UAAT,CAAqBtsE,CAArB,EAAwB+a,CAAxB,EAA2BC,CAA3B,EAA8B5W,IAA9B,EAAqC;EAEpC,MAAI6D,CAAC,GAAG,IAAIwnE,IAAJ,CAAUzvE,CAAV,EAAa+a,CAAb,EAAgBC,CAAhB,CAAR;;EAEA,MAAK,CAAE5W,IAAP,EAAc;EAEb6D,IAAAA,CAAC,CAAC2kE,IAAF,GAAS3kE,CAAT;EACAA,IAAAA,CAAC,CAAC6vC,IAAF,GAAS7vC,CAAT;EAEA,GALD,MAKO;EAENA,IAAAA,CAAC,CAAC6vC,IAAF,GAAS1zC,IAAI,CAAC0zC,IAAd;EACA7vC,IAAAA,CAAC,CAAC2kE,IAAF,GAASxoE,IAAT;EACAA,IAAAA,IAAI,CAAC0zC,IAAL,CAAU80B,IAAV,GAAiB3kE,CAAjB;EACA7D,IAAAA,IAAI,CAAC0zC,IAAL,GAAY7vC,CAAZ;EAEA;;EAED,SAAOA,CAAP;EAEA;;EAED,SAASskE,UAAT,CAAqBtkE,CAArB,EAAyB;EAExBA,EAAAA,CAAC,CAAC6vC,IAAF,CAAO80B,IAAP,GAAc3kE,CAAC,CAAC2kE,IAAhB;EACA3kE,EAAAA,CAAC,CAAC2kE,IAAF,CAAO90B,IAAP,GAAc7vC,CAAC,CAAC6vC,IAAhB;EAEA,MAAK7vC,CAAC,CAAC2lE,KAAP,EAAe3lE,CAAC,CAAC2lE,KAAF,CAAQD,KAAR,GAAgB1lE,CAAC,CAAC0lE,KAAlB;EACf,MAAK1lE,CAAC,CAAC0lE,KAAP,EAAe1lE,CAAC,CAAC0lE,KAAF,CAAQC,KAAR,GAAgB3lE,CAAC,CAAC2lE,KAAlB;EAEf;;EAED,SAAS6B,IAAT,CAAezvE,CAAf,EAAkB+a,CAAlB,EAAqBC,CAArB,EAAyB;EAExB;EACA,OAAKhb,CAAL,GAASA,CAAT,CAHwB;;EAMxB,OAAK+a,CAAL,GAASA,CAAT;EACA,OAAKC,CAAL,GAASA,CAAT,CAPwB;;EAUxB,OAAK4xD,IAAL,GAAY,IAAZ;EACA,OAAK90B,IAAL,GAAY,IAAZ,CAXwB;;EAcxB,OAAK3zB,CAAL,GAAS,IAAT,CAdwB;;EAiBxB,OAAKypD,KAAL,GAAa,IAAb;EACA,OAAKD,KAAL,GAAa,IAAb,CAlBwB;;EAqBxB,OAAKjB,OAAL,GAAe,KAAf;EAEA;;EAED,SAASL,UAAT,CAAqB9kE,IAArB,EAA2ByH,KAA3B,EAAkCC,GAAlC,EAAuC28D,GAAvC,EAA6C;EAE5C,MAAIiE,GAAG,GAAG,CAAV;;EAEA,OAAM,IAAI7vE,CAAC,GAAGgP,KAAR,EAAes+B,CAAC,GAAGr+B,GAAG,GAAG28D,GAA/B,EAAoC5rE,CAAC,GAAGiP,GAAxC,EAA6CjP,CAAC,IAAI4rE,GAAlD,EAAwD;EAEvDiE,IAAAA,GAAG,IAAI,CAAEtoE,IAAI,CAAE+lC,CAAF,CAAJ,GAAY/lC,IAAI,CAAEvH,CAAF,CAAlB,KAA8BuH,IAAI,CAAEvH,CAAC,GAAG,CAAN,CAAJ,GAAgBuH,IAAI,CAAE+lC,CAAC,GAAG,CAAN,CAAlD,CAAP;EACAA,IAAAA,CAAC,GAAGttC,CAAJ;EAEA;;EAED,SAAO6vE,GAAP;EAEA;;ECvyBD;;;AAIA,EAEA,IAAIC,UAAU,GAAG;EAEhB;EAEAnD,EAAAA,IAAI,EAAE,cAAWoD,OAAX,EAAqB;EAE1B,QAAI9rE,CAAC,GAAG8rE,OAAO,CAACjwE,MAAhB;EACA,QAAIsP,CAAC,GAAG,GAAR;;EAEA,SAAM,IAAInH,CAAC,GAAGhE,CAAC,GAAG,CAAZ,EAAe4hB,CAAC,GAAG,CAAzB,EAA4BA,CAAC,GAAG5hB,CAAhC,EAAmCgE,CAAC,GAAG4d,CAAC,EAAxC,EAA8C;EAE7CzW,MAAAA,CAAC,IAAI2gE,OAAO,CAAE9nE,CAAF,CAAP,CAAa8S,CAAb,GAAiBg1D,OAAO,CAAElqD,CAAF,CAAP,CAAa7K,CAA9B,GAAkC+0D,OAAO,CAAElqD,CAAF,CAAP,CAAa9K,CAAb,GAAiBg1D,OAAO,CAAE9nE,CAAF,CAAP,CAAa+S,CAArE;EAEA;;EAED,WAAO5L,CAAC,GAAG,GAAX;EAEA,GAjBe;EAmBhB4gE,EAAAA,WAAW,EAAE,qBAAWC,GAAX,EAAiB;EAE7B,WAAOH,UAAU,CAACnD,IAAX,CAAiBsD,GAAjB,IAAyB,CAAhC;EAEA,GAvBe;EAyBhBC,EAAAA,gBAAgB,EAAE,0BAAWH,OAAX,EAAoBI,KAApB,EAA4B;EAE7C,QAAIx8C,QAAQ,GAAG,EAAf,CAF6C;;EAG7C,QAAIg4C,WAAW,GAAG,EAAlB,CAH6C;;EAI7C,QAAI5gC,KAAK,GAAG,EAAZ,CAJ6C;;EAM7CqlC,IAAAA,eAAe,CAAEL,OAAF,CAAf;EACAM,IAAAA,UAAU,CAAE18C,QAAF,EAAYo8C,OAAZ,CAAV,CAP6C;;EAW7C,QAAIO,SAAS,GAAGP,OAAO,CAACjwE,MAAxB;EAEAqwE,IAAAA,KAAK,CAACjyE,OAAN,CAAekyE,eAAf;;EAEA,SAAM,IAAIpwE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmwE,KAAK,CAACrwE,MAA3B,EAAmCE,CAAC,EAApC,EAA0C;EAEzC2rE,MAAAA,WAAW,CAAC/tE,IAAZ,CAAkB0yE,SAAlB;EACAA,MAAAA,SAAS,IAAIH,KAAK,CAAEnwE,CAAF,CAAL,CAAWF,MAAxB;EACAuwE,MAAAA,UAAU,CAAE18C,QAAF,EAAYw8C,KAAK,CAAEnwE,CAAF,CAAjB,CAAV;EAEA,KArB4C;;;EAyB7C,QAAI0yC,SAAS,GAAG+4B,MAAM,CAACC,WAAP,CAAoB/3C,QAApB,EAA8Bg4C,WAA9B,CAAhB,CAzB6C;;EA6B7C,SAAM,IAAI3rE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG0yC,SAAS,CAAC5yC,MAA/B,EAAuCE,CAAC,IAAI,CAA5C,EAAgD;EAE/C+qC,MAAAA,KAAK,CAACntC,IAAN,CAAY80C,SAAS,CAAC70C,KAAV,CAAiBmC,CAAjB,EAAoBA,CAAC,GAAG,CAAxB,CAAZ;EAEA;;EAED,WAAO+qC,KAAP;EAEA;EA9De,CAAjB;;EAkEA,SAASqlC,eAAT,CAA0B51D,MAA1B,EAAmC;EAElC,MAAIxO,CAAC,GAAGwO,MAAM,CAAC1a,MAAf;;EAEA,MAAKkM,CAAC,GAAG,CAAJ,IAASwO,MAAM,CAAExO,CAAC,GAAG,CAAN,CAAN,CAAgBonB,MAAhB,CAAwB5Y,MAAM,CAAE,CAAF,CAA9B,CAAd,EAAsD;EAErDA,IAAAA,MAAM,CAACxT,GAAP;EAEA;EAED;;EAED,SAASqpE,UAAT,CAAqB18C,QAArB,EAA+Bo8C,OAA/B,EAAyC;EAExC,OAAM,IAAI/vE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG+vE,OAAO,CAACjwE,MAA7B,EAAqCE,CAAC,EAAtC,EAA4C;EAE3C2zB,IAAAA,QAAQ,CAAC/1B,IAAT,CAAemyE,OAAO,CAAE/vE,CAAF,CAAP,CAAa+a,CAA5B;EACA4Y,IAAAA,QAAQ,CAAC/1B,IAAT,CAAemyE,OAAO,CAAE/vE,CAAF,CAAP,CAAagb,CAA5B;EAEA;EAED;;MC7DKu1D;;;;;EACF,2BAAYC,MAAZ,EAAoBhsE,OAApB,EAA6B;EAAA;;EAAA;;EAEzB;EAEA,UAAKsD,IAAL,GAAY,iBAAZ;EAEA,UAAK2xB,UAAL,GAAkB;EACd+2C,MAAAA,MAAM,EAAEA,MADM;EAEdhsE,MAAAA,OAAO,EAAEA;EAFK,KAAlB;;EAKA,UAAK+iE,kBAAL,CAAwB,IAAIkJ,qBAAJ,CAA0BD,MAA1B,EAAkChsE,OAAlC,CAAxB;;EACA,UAAKijE,aAAL;;EAZyB;EAc5B;;;IAfyBrB;;;MAqBxBqK;;;;;EACF,iCAAYD,MAAZ,EAAoBhsE,OAApB,EAA6B;EAAA;;EAAA;;EAEzB;EAEA,WAAKsD,IAAL,GAAY,uBAAZ;EAEA,WAAK2xB,UAAL,GAAkB;EACd+2C,MAAAA,MAAM,EAAEA,MADM;EAEdhsE,MAAAA,OAAO,EAAEA;EAFK,KAAlB;EAKAgsE,IAAAA,MAAM,GAAGlzE,KAAK,CAAC0B,OAAN,CAAcwxE,MAAd,IAAwBA,MAAxB,GAAiC,CAACA,MAAD,CAA1C;;EAEA,QAAIl9C,KAAK,yDAAT;;EAEA,QAAIo9C,aAAa,GAAG,EAApB;EACA,QAAIC,OAAO,GAAG,EAAd;;EAEA,SAAK,IAAI3wE,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGwkE,MAAM,CAAC1wE,MAA3B,EAAmCE,CAAC,GAAGgM,CAAvC,EAA0ChM,CAAC,EAA3C,EAA+C;EAE3C,UAAI4wE,KAAK,GAAGJ,MAAM,CAACxwE,CAAD,CAAlB;EACA6wE,MAAAA,QAAQ,CAACD,KAAD,CAAR;EAEH,KAvBwB;;;EA2BzB,WAAKhlC,YAAL,CAAkB,UAAlB,EAA8B,IAAI5B,sBAAJ,CAA2B0mC,aAA3B,EAA0C,CAA1C,CAA9B;;EACA,WAAK9kC,YAAL,CAAkB,IAAlB,EAAwB,IAAI5B,sBAAJ,CAA2B2mC,OAA3B,EAAoC,CAApC,CAAxB;;EAEA,WAAKG,oBAAL,GA9ByB;;;EAkCzB,aAASD,QAAT,CAAkBD,KAAlB,EAAyB;EAErB,UAAIG,WAAW,GAAG,EAAlB,CAFqB;;EAMrB,UAAIC,aAAa,GAAGxsE,OAAO,CAACwsE,aAAR,KAA0BpsE,SAA1B,GAAsCJ,OAAO,CAACwsE,aAA9C,GAA8D,EAAlF;EACA,UAAIC,KAAK,GAAGzsE,OAAO,CAACysE,KAAR,KAAkBrsE,SAAlB,GAA8BJ,OAAO,CAACysE,KAAtC,GAA8C,CAA1D;EACA,UAAIpyC,KAAK,GAAGr6B,OAAO,CAACq6B,KAAR,KAAkBj6B,SAAlB,GAA8BJ,OAAO,CAACq6B,KAAtC,GAA8C,GAA1D;EAEA,UAAIqyC,YAAY,GAAG1sE,OAAO,CAAC0sE,YAAR,KAAyBtsE,SAAzB,GAAqCJ,OAAO,CAAC0sE,YAA7C,GAA4D,IAA/E;EACA,UAAIC,cAAc,GAAG3sE,OAAO,CAAC2sE,cAAR,KAA2BvsE,SAA3B,GAAuCJ,OAAO,CAAC2sE,cAA/C,GAAgE,CAArF;EACA,UAAIC,SAAS,GAAG5sE,OAAO,CAAC4sE,SAAR,KAAsBxsE,SAAtB,GAAkCJ,OAAO,CAAC4sE,SAA1C,GAAsDD,cAAc,GAAG,CAAvF;EACA,UAAIE,aAAa,GAAG7sE,OAAO,CAAC6sE,aAAR,KAA0BzsE,SAA1B,GAAsCJ,OAAO,CAAC6sE,aAA9C,GAA8D,CAAlF;EAEA,UAAIC,WAAW,GAAG9sE,OAAO,CAAC8sE,WAA1B;EAEA,UAAIC,KAAK,GAAG/sE,OAAO,CAACgtE,WAAR,KAAwB5sE,SAAxB,GAAoCJ,OAAO,CAACgtE,WAA5C,GAA0DC,gBAAtE,CAjBqB;;EAqBrB,UAAIjtE,OAAO,CAACktE,MAAR,KAAmB9sE,SAAvB,EAAkC;EAE9B2gB,QAAAA,OAAO,CAACC,IAAR,CAAa,gEAAb;EACAqZ,QAAAA,KAAK,GAAGr6B,OAAO,CAACktE,MAAhB;EAEH,OA1BoB;;;EA8BrB,UAAIC,UAAJ;EAAA,UAAgBC,aAAa,GAAG,KAAhC;EACA,UAAIC,UAAJ,EAAgBC,QAAhB,EAA0B9+C,MAA1B,EAAkC++C,SAAlC;;EAEA,UAAIT,WAAJ,EAAiB;EAEbK,QAAAA,UAAU,GAAGL,WAAW,CAACU,eAAZ,CAA4Bf,KAA5B,CAAb;EAEAW,QAAAA,aAAa,GAAG,IAAhB;EACAV,QAAAA,YAAY,GAAG,KAAf,CALa;EAOb;EAEA;;EAEAW,QAAAA,UAAU,GAAGP,WAAW,CAACW,mBAAZ,CAAgChB,KAAhC,EAAuC,KAAvC,CAAb,CAXa;;EAeba,QAAAA,QAAQ,GAAG,IAAI1sD,OAAJ,EAAX;EACA4N,QAAAA,MAAM,GAAG,IAAI5N,OAAJ,EAAT;EACA2sD,QAAAA,SAAS,GAAG,IAAI3sD,OAAJ,EAAZ;EAEH,OApDoB;;;EAwDrB,UAAI,CAAC8rD,YAAL,EAAmB;EAEfG,QAAAA,aAAa,GAAG,CAAhB;EACAF,QAAAA,cAAc,GAAG,CAAjB;EACAC,QAAAA,SAAS,GAAG,CAAZ;EAEH,OA9DoB;;;EAkErB,UAAIc,KAAJ,EAAW/kE,CAAX,EAAcglE,EAAd,CAlEqB;;EAoErB,UAAIC,WAAW,GAAGxB,KAAK,CAACyB,aAAN,CAAoBrB,aAApB,CAAlB;EAEA,UAAIr9C,QAAQ,GAAGy+C,WAAW,CAACxB,KAA3B;EACA,UAAIT,KAAK,GAAGiC,WAAW,CAACjC,KAAxB;EAEA,UAAI1kE,OAAO,GAAG,CAACqkE,UAAU,CAACE,WAAX,CAAuBr8C,QAAvB,CAAf;;EAEA,UAAIloB,OAAJ,EAAa;EAETkoB,QAAAA,QAAQ,GAAGA,QAAQ,CAACloB,OAAT,EAAX,CAFS;;EAMT,aAAK0B,CAAC,GAAG,CAAJ,EAAOglE,EAAE,GAAGhC,KAAK,CAACrwE,MAAvB,EAA+BqN,CAAC,GAAGglE,EAAnC,EAAuChlE,CAAC,EAAxC,EAA4C;EAExC+kE,UAAAA,KAAK,GAAG/B,KAAK,CAAChjE,CAAD,CAAb;;EAEA,cAAI2iE,UAAU,CAACE,WAAX,CAAuBkC,KAAvB,CAAJ,EAAmC;EAE/B/B,YAAAA,KAAK,CAAChjE,CAAD,CAAL,GAAW+kE,KAAK,CAACzmE,OAAN,EAAX;EAEH;EAEJ;EAEJ;;EAGD,UAAIs/B,KAAK,GAAG+kC,UAAU,CAACI,gBAAX,CAA4Bv8C,QAA5B,EAAsCw8C,KAAtC,CAAZ;EAEA;;EAEA,UAAIJ,OAAO,GAAGp8C,QAAd,CApGqB;;EAsGrB,WAAKxmB,CAAC,GAAG,CAAJ,EAAOglE,EAAE,GAAGhC,KAAK,CAACrwE,MAAvB,EAA+BqN,CAAC,GAAGglE,EAAnC,EAAuChlE,CAAC,EAAxC,EAA4C;EAExC+kE,QAAAA,KAAK,GAAG/B,KAAK,CAAChjE,CAAD,CAAb;EAEAwmB,QAAAA,QAAQ,GAAGA,QAAQ,CAAC71B,MAAT,CAAgBo0E,KAAhB,CAAX;EAEH;;EAGD,eAASI,QAAT,CAAkBC,EAAlB,EAAsBC,GAAtB,EAA2B9oD,IAA3B,EAAiC;EAE7B,YAAI,CAAC8oD,GAAL,EAAUjtD,OAAO,CAAC8E,KAAR,CAAc,2CAAd;EAEV,eAAOmoD,GAAG,CAACruE,KAAJ,GAAYugB,cAAZ,CAA2BgF,IAA3B,EAAiCxC,GAAjC,CAAqCqrD,EAArC,CAAP;EAEH;;EAED,UAAIhjE,CAAJ;EAAA,UAAOkjE,EAAP;EAAA,UAAW91D,CAAX;EAAA,UAAcwH,CAAd;EAAA,UACIuuD,IADJ;EAAA,UACUC,IAAI,GAAGh/C,QAAQ,CAAC7zB,MAD1B;EAAA,UAEIkrC,IAFJ;EAAA,UAEU4nC,IAAI,GAAG7nC,KAAK,CAACjrC,MAFvB,CAvHqB;;EA+HrB,eAAS+yE,WAAT,CAAqBC,IAArB,EAA2BC,MAA3B,EAAmCC,MAAnC,EAA2C;EAEvC;EACA;EACA;EACA;EACA;EACA;EAEA,YAAIC,SAAJ,EAAeC,SAAf,EAA0BC,SAA1B,CATuC;EAWvC;EACA;;EAEA,YAAIC,QAAQ,GAAGN,IAAI,CAAC/3D,CAAL,GAASg4D,MAAM,CAACh4D,CAA/B;EAAA,YACIs4D,QAAQ,GAAGP,IAAI,CAAC93D,CAAL,GAAS+3D,MAAM,CAAC/3D,CAD/B;EAEA,YAAIs4D,QAAQ,GAAGN,MAAM,CAACj4D,CAAP,GAAW+3D,IAAI,CAAC/3D,CAA/B;EAAA,YACIw4D,QAAQ,GAAGP,MAAM,CAACh4D,CAAP,GAAW83D,IAAI,CAAC93D,CAD/B;EAGA,YAAIw4D,YAAY,GAAIJ,QAAQ,GAAGA,QAAX,GAAsBC,QAAQ,GAAGA,QAArD,CAnBuC;;EAsBvC,YAAII,UAAU,GAAIL,QAAQ,GAAGG,QAAX,GAAsBF,QAAQ,GAAGC,QAAnD;;EAEA,YAAI7zE,IAAI,CAACuK,GAAL,CAASypE,UAAT,IAAuBtpE,MAAM,CAACkpD,OAAlC,EAA2C;EAEvC;EAEA;EAEA,cAAIqgB,UAAU,GAAGj0E,IAAI,CAACklB,IAAL,CAAU6uD,YAAV,CAAjB;EACA,cAAIG,UAAU,GAAGl0E,IAAI,CAACklB,IAAL,CAAU2uD,QAAQ,GAAGA,QAAX,GAAsBC,QAAQ,GAAGA,QAA3C,CAAjB,CAPuC;;EAWvC,cAAIK,aAAa,GAAIb,MAAM,CAACh4D,CAAP,GAAWs4D,QAAQ,GAAGK,UAA3C;EACA,cAAIG,aAAa,GAAId,MAAM,CAAC/3D,CAAP,GAAWo4D,QAAQ,GAAGM,UAA3C;EAEA,cAAII,aAAa,GAAId,MAAM,CAACj4D,CAAP,GAAWw4D,QAAQ,GAAGI,UAA3C;EACA,cAAII,aAAa,GAAIf,MAAM,CAACh4D,CAAP,GAAWs4D,QAAQ,GAAGK,UAA3C,CAfuC;;EAmBvC,cAAIK,EAAE,GAAG,CAAC,CAACF,aAAa,GAAGF,aAAjB,IAAkCL,QAAlC,GACN,CAACQ,aAAa,GAAGF,aAAjB,IAAkCP,QAD7B,KAEJF,QAAQ,GAAGG,QAAX,GAAsBF,QAAQ,GAAGC,QAF7B,CAAT,CAnBuC;;EAyBvCL,UAAAA,SAAS,GAAIW,aAAa,GAAGR,QAAQ,GAAGY,EAA3B,GAAgClB,IAAI,CAAC/3D,CAAlD;EACAm4D,UAAAA,SAAS,GAAIW,aAAa,GAAGR,QAAQ,GAAGW,EAA3B,GAAgClB,IAAI,CAAC93D,CAAlD,CA1BuC;EA6BvC;;EACA,cAAIi5D,aAAa,GAAIhB,SAAS,GAAGA,SAAZ,GAAwBC,SAAS,GAAGA,SAAzD;;EACA,cAAIe,aAAa,IAAI,CAArB,EAAwB;EAEpB,mBAAO,IAAIprC,OAAJ,CAAYoqC,SAAZ,EAAuBC,SAAvB,CAAP;EAEH,WAJD,MAIO;EAEHC,YAAAA,SAAS,GAAG1zE,IAAI,CAACklB,IAAL,CAAUsvD,aAAa,GAAG,CAA1B,CAAZ;EAEH;EAEJ,SAzCD,MAyCO;EAEH;EAEA,cAAIC,YAAY,GAAG,KAAnB,CAJG;;EAKH,cAAId,QAAQ,GAAGjpE,MAAM,CAACkpD,OAAtB,EAA+B;EAE3B,gBAAIigB,QAAQ,GAAGnpE,MAAM,CAACkpD,OAAtB,EAA+B;EAE3B6gB,cAAAA,YAAY,GAAG,IAAf;EAEH;EAEJ,WARD,MAQO;EAEH,gBAAId,QAAQ,GAAG,CAAEjpE,MAAM,CAACkpD,OAAxB,EAAiC;EAE7B,kBAAIigB,QAAQ,GAAG,CAAEnpE,MAAM,CAACkpD,OAAxB,EAAiC;EAE7B6gB,gBAAAA,YAAY,GAAG,IAAf;EAEH;EAEJ,aARD,MAQO;EAEH,kBAAIz0E,IAAI,CAAC64D,IAAL,CAAU+a,QAAV,MAAwB5zE,IAAI,CAAC64D,IAAL,CAAUib,QAAV,CAA5B,EAAiD;EAE7CW,gBAAAA,YAAY,GAAG,IAAf;EAEH;EAEJ;EAEJ;;EAED,cAAIA,YAAJ,EAAkB;EAEd;EACAjB,YAAAA,SAAS,GAAG,CAAEI,QAAd;EACAH,YAAAA,SAAS,GAAGE,QAAZ;EACAD,YAAAA,SAAS,GAAG1zE,IAAI,CAACklB,IAAL,CAAU6uD,YAAV,CAAZ;EAEH,WAPD,MAOO;EAEH;EACAP,YAAAA,SAAS,GAAGG,QAAZ;EACAF,YAAAA,SAAS,GAAGG,QAAZ;EACAF,YAAAA,SAAS,GAAG1zE,IAAI,CAACklB,IAAL,CAAU6uD,YAAY,GAAG,CAAzB,CAAZ;EAEH;EAEJ;;EAED,eAAO,IAAI3qC,OAAJ,CAAYoqC,SAAS,GAAGE,SAAxB,EAAmCD,SAAS,GAAGC,SAA/C,CAAP;EAEH;;EAGD,UAAIgB,gBAAgB,GAAG,EAAvB;;EAEA,WAAK,IAAIn0E,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAGmlE,OAAO,CAACjwE,MAAxB,EAAgCwtC,CAAC,GAAG1iC,EAAE,GAAG,CAAzC,EAA4Co8D,CAAC,GAAGhnE,CAAC,GAAG,CAAzD,EAA4DA,CAAC,GAAG4K,EAAhE,EAAoE5K,CAAC,IAAKstC,CAAC,EAAN,EAAW05B,CAAC,EAAjF,EAAqF;EAEjF,YAAI15B,CAAC,KAAK1iC,EAAV,EAAc0iC,CAAC,GAAG,CAAJ;EACd,YAAI05B,CAAC,KAAKp8D,EAAV,EAAco8D,CAAC,GAAG,CAAJ,CAHmE;EAMjF;;EAEAmN,QAAAA,gBAAgB,CAACn0E,CAAD,CAAhB,GAAsB6yE,WAAW,CAAC9C,OAAO,CAAC/vE,CAAD,CAAR,EAAa+vE,OAAO,CAACziC,CAAD,CAApB,EAAyByiC,OAAO,CAAC/I,CAAD,CAAhC,CAAjC;EAEH;;EAED,UAAIoN,cAAc,GAAG,EAArB;EAAA,UACIC,gBADJ;EAAA,UACsBC,iBAAiB,GAAGH,gBAAgB,CAACr2E,MAAjB,EAD1C;;EAGA,WAAKqP,CAAC,GAAG,CAAJ,EAAOglE,EAAE,GAAGhC,KAAK,CAACrwE,MAAvB,EAA+BqN,CAAC,GAAGglE,EAAnC,EAAuChlE,CAAC,EAAxC,EAA4C;EAExC+kE,QAAAA,KAAK,GAAG/B,KAAK,CAAChjE,CAAD,CAAb;EAEAknE,QAAAA,gBAAgB,GAAG,EAAnB;;EAEA,aAAKr0E,CAAC,GAAG,CAAJ,EAAO4K,EAAE,GAAGsnE,KAAK,CAACpyE,MAAlB,EAA0BwtC,CAAC,GAAG1iC,EAAE,GAAG,CAAnC,EAAsCo8D,CAAC,GAAGhnE,CAAC,GAAG,CAAnD,EAAsDA,CAAC,GAAG4K,EAA1D,EAA8D5K,CAAC,IAAKstC,CAAC,EAAN,EAAW05B,CAAC,EAA3E,EAA+E;EAE3E,cAAI15B,CAAC,KAAK1iC,EAAV,EAAc0iC,CAAC,GAAG,CAAJ;EACd,cAAI05B,CAAC,KAAKp8D,EAAV,EAAco8D,CAAC,GAAG,CAAJ,CAH6D;;EAM3EqN,UAAAA,gBAAgB,CAACr0E,CAAD,CAAhB,GAAsB6yE,WAAW,CAACX,KAAK,CAAClyE,CAAD,CAAN,EAAWkyE,KAAK,CAAC5kC,CAAD,CAAhB,EAAqB4kC,KAAK,CAAClL,CAAD,CAA1B,CAAjC;EAEH;;EAEDoN,QAAAA,cAAc,CAACx2E,IAAf,CAAoBy2E,gBAApB;EACAC,QAAAA,iBAAiB,GAAGA,iBAAiB,CAACx2E,MAAlB,CAAyBu2E,gBAAzB,CAApB;EAEH,OA9RoB;;;EAmSrB,WAAK9kE,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG8hE,aAAhB,EAA+B9hE,CAAC,EAAhC,EAAoC;EAEhC;EAEAoN,QAAAA,CAAC,GAAGpN,CAAC,GAAG8hE,aAAR;EACAltD,QAAAA,CAAC,GAAGgtD,cAAc,GAAG1xE,IAAI,CAAC8X,GAAL,CAASoF,CAAC,GAAGld,IAAI,CAACwF,EAAT,GAAc,CAAvB,CAArB;EACAwtE,QAAAA,EAAE,GAAGrB,SAAS,GAAG3xE,IAAI,CAACgY,GAAL,CAASkF,CAAC,GAAGld,IAAI,CAACwF,EAAT,GAAc,CAAvB,CAAjB,CANgC;;EAUhC,aAAKjF,CAAC,GAAG,CAAJ,EAAO4K,EAAE,GAAGmlE,OAAO,CAACjwE,MAAzB,EAAiCE,CAAC,GAAG4K,EAArC,EAAyC5K,CAAC,EAA1C,EAA8C;EAE1C0yE,UAAAA,IAAI,GAAGJ,QAAQ,CAACvC,OAAO,CAAC/vE,CAAD,CAAR,EAAam0E,gBAAgB,CAACn0E,CAAD,CAA7B,EAAkCyyE,EAAlC,CAAf;EAEAluD,UAAAA,CAAC,CAACmuD,IAAI,CAAC33D,CAAN,EAAS23D,IAAI,CAAC13D,CAAd,EAAiB,CAAEmJ,CAAnB,CAAD;EAEH,SAhB+B;;;EAoBhC,aAAKhX,CAAC,GAAG,CAAJ,EAAOglE,EAAE,GAAGhC,KAAK,CAACrwE,MAAvB,EAA+BqN,CAAC,GAAGglE,EAAnC,EAAuChlE,CAAC,EAAxC,EAA4C;EAExC+kE,UAAAA,KAAK,GAAG/B,KAAK,CAAChjE,CAAD,CAAb;EACAknE,UAAAA,gBAAgB,GAAGD,cAAc,CAACjnE,CAAD,CAAjC;;EAEA,eAAKnN,CAAC,GAAG,CAAJ,EAAO4K,EAAE,GAAGsnE,KAAK,CAACpyE,MAAvB,EAA+BE,CAAC,GAAG4K,EAAnC,EAAuC5K,CAAC,EAAxC,EAA4C;EAExC0yE,YAAAA,IAAI,GAAGJ,QAAQ,CAACJ,KAAK,CAAClyE,CAAD,CAAN,EAAWq0E,gBAAgB,CAACr0E,CAAD,CAA3B,EAAgCyyE,EAAhC,CAAf;EAEAluD,YAAAA,CAAC,CAACmuD,IAAI,CAAC33D,CAAN,EAAS23D,IAAI,CAAC13D,CAAd,EAAiB,CAAEmJ,CAAnB,CAAD;EAEH;EAEJ;EAEJ;;EAEDsuD,MAAAA,EAAE,GAAGrB,SAAL,CAxUqB;;EA4UrB,WAAKpxE,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2yE,IAAhB,EAAsB3yE,CAAC,EAAvB,EAA2B;EAEvB0yE,QAAAA,IAAI,GAAGxB,YAAY,GAAGoB,QAAQ,CAAC3+C,QAAQ,CAAC3zB,CAAD,CAAT,EAAcs0E,iBAAiB,CAACt0E,CAAD,CAA/B,EAAoCyyE,EAApC,CAAX,GAAqD9+C,QAAQ,CAAC3zB,CAAD,CAAhF;;EAEA,YAAI,CAAC4xE,aAAL,EAAoB;EAEhBrtD,UAAAA,CAAC,CAACmuD,IAAI,CAAC33D,CAAN,EAAS23D,IAAI,CAAC13D,CAAd,EAAiB,CAAjB,CAAD;EAEH,SAJD,MAIO;EAEH;EAEAgY,UAAAA,MAAM,CAACtuB,IAAP,CAAYmtE,UAAU,CAAC1nC,OAAX,CAAmB,CAAnB,CAAZ,EAAmCzlB,cAAnC,CAAkDguD,IAAI,CAAC33D,CAAvD;EACA+2D,UAAAA,QAAQ,CAACptE,IAAT,CAAcmtE,UAAU,CAAC0C,SAAX,CAAqB,CAArB,CAAd,EAAuC7vD,cAAvC,CAAsDguD,IAAI,CAAC13D,CAA3D;EAEA+2D,UAAAA,SAAS,CAACrtE,IAAV,CAAeitE,UAAU,CAAC,CAAD,CAAzB,EAA8BzqD,GAA9B,CAAkC8L,MAAlC,EAA0C9L,GAA1C,CAA8C4qD,QAA9C;EAEAvtD,UAAAA,CAAC,CAACwtD,SAAS,CAACh3D,CAAX,EAAcg3D,SAAS,CAAC/2D,CAAxB,EAA2B+2D,SAAS,CAAC5tD,CAArC,CAAD;EAEH;EAEJ,OAjWoB;EAoWrB;;;EAEA,UAAIuB,CAAJ;;EAEA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAIurD,KAAjB,EAAwBvrD,CAAC,EAAzB,EAA6B;EAEzB,aAAK1lB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2yE,IAAhB,EAAsB3yE,CAAC,EAAvB,EAA2B;EAEvB0yE,UAAAA,IAAI,GAAGxB,YAAY,GAAGoB,QAAQ,CAAC3+C,QAAQ,CAAC3zB,CAAD,CAAT,EAAcs0E,iBAAiB,CAACt0E,CAAD,CAA/B,EAAoCyyE,EAApC,CAAX,GAAqD9+C,QAAQ,CAAC3zB,CAAD,CAAhF;;EAEA,cAAI,CAAC4xE,aAAL,EAAoB;EAEhBrtD,YAAAA,CAAC,CAACmuD,IAAI,CAAC33D,CAAN,EAAS23D,IAAI,CAAC13D,CAAd,EAAiB6jB,KAAK,GAAGoyC,KAAR,GAAgBvrD,CAAjC,CAAD;EAEH,WAJD,MAIO;EAEH;EAEAsN,YAAAA,MAAM,CAACtuB,IAAP,CAAYmtE,UAAU,CAAC1nC,OAAX,CAAmBzkB,CAAnB,CAAZ,EAAmChB,cAAnC,CAAkDguD,IAAI,CAAC33D,CAAvD;EACA+2D,YAAAA,QAAQ,CAACptE,IAAT,CAAcmtE,UAAU,CAAC0C,SAAX,CAAqB7uD,CAArB,CAAd,EAAuChB,cAAvC,CAAsDguD,IAAI,CAAC13D,CAA3D;EAEA+2D,YAAAA,SAAS,CAACrtE,IAAV,CAAeitE,UAAU,CAACjsD,CAAD,CAAzB,EAA8BwB,GAA9B,CAAkC8L,MAAlC,EAA0C9L,GAA1C,CAA8C4qD,QAA9C;EAEAvtD,YAAAA,CAAC,CAACwtD,SAAS,CAACh3D,CAAX,EAAcg3D,SAAS,CAAC/2D,CAAxB,EAA2B+2D,SAAS,CAAC5tD,CAArC,CAAD;EAEH;EAEJ;EAEJ,OAjYoB;EAsYrB;;;EACA,WAAK5U,CAAC,GAAG8hE,aAAa,GAAG,CAAzB,EAA4B9hE,CAAC,IAAI,CAAjC,EAAoCA,CAAC,EAArC,EAAyC;EAErCoN,QAAAA,CAAC,GAAGpN,CAAC,GAAG8hE,aAAR;EACAltD,QAAAA,CAAC,GAAGgtD,cAAc,GAAG1xE,IAAI,CAAC8X,GAAL,CAASoF,CAAC,GAAGld,IAAI,CAACwF,EAAT,GAAc,CAAvB,CAArB;EACAwtE,QAAAA,EAAE,GAAGrB,SAAS,GAAG3xE,IAAI,CAACgY,GAAL,CAASkF,CAAC,GAAGld,IAAI,CAACwF,EAAT,GAAc,CAAvB,CAAjB,CAJqC;;EAQrC,aAAKjF,CAAC,GAAG,CAAJ,EAAO4K,EAAE,GAAGmlE,OAAO,CAACjwE,MAAzB,EAAiCE,CAAC,GAAG4K,EAArC,EAAyC5K,CAAC,EAA1C,EAA8C;EAE1C0yE,UAAAA,IAAI,GAAGJ,QAAQ,CAACvC,OAAO,CAAC/vE,CAAD,CAAR,EAAam0E,gBAAgB,CAACn0E,CAAD,CAA7B,EAAkCyyE,EAAlC,CAAf;EACAluD,UAAAA,CAAC,CAACmuD,IAAI,CAAC33D,CAAN,EAAS23D,IAAI,CAAC13D,CAAd,EAAiB6jB,KAAK,GAAG1a,CAAzB,CAAD;EAEH,SAboC;;;EAiBrC,aAAKhX,CAAC,GAAG,CAAJ,EAAOglE,EAAE,GAAGhC,KAAK,CAACrwE,MAAvB,EAA+BqN,CAAC,GAAGglE,EAAnC,EAAuChlE,CAAC,EAAxC,EAA4C;EAExC+kE,UAAAA,KAAK,GAAG/B,KAAK,CAAChjE,CAAD,CAAb;EACAknE,UAAAA,gBAAgB,GAAGD,cAAc,CAACjnE,CAAD,CAAjC;;EAEA,eAAKnN,CAAC,GAAG,CAAJ,EAAO4K,EAAE,GAAGsnE,KAAK,CAACpyE,MAAvB,EAA+BE,CAAC,GAAG4K,EAAnC,EAAuC5K,CAAC,EAAxC,EAA4C;EAExC0yE,YAAAA,IAAI,GAAGJ,QAAQ,CAACJ,KAAK,CAAClyE,CAAD,CAAN,EAAWq0E,gBAAgB,CAACr0E,CAAD,CAA3B,EAAgCyyE,EAAhC,CAAf;;EAEA,gBAAI,CAACb,aAAL,EAAoB;EAEhBrtD,cAAAA,CAAC,CAACmuD,IAAI,CAAC33D,CAAN,EAAS23D,IAAI,CAAC13D,CAAd,EAAiB6jB,KAAK,GAAG1a,CAAzB,CAAD;EAEH,aAJD,MAIO;EAEHI,cAAAA,CAAC,CAACmuD,IAAI,CAAC33D,CAAN,EAAS23D,IAAI,CAAC13D,CAAL,GAAS22D,UAAU,CAACV,KAAK,GAAG,CAAT,CAAV,CAAsBj2D,CAAxC,EAA2C22D,UAAU,CAACV,KAAK,GAAG,CAAT,CAAV,CAAsBl2D,CAAtB,GAA0BoJ,CAArE,CAAD;EAEH;EAEJ;EAEJ;EAEJ;EAED;EAEA;;;EAEAqwD,MAAAA,aAAa,GArbQ;;EAybrBC,MAAAA,cAAc,GAzbO;;EA8brB,eAASD,aAAT,GAAyB;EAErB,YAAIxlE,KAAK,GAAG0hE,aAAa,CAAC5wE,MAAd,GAAuB,CAAnC;;EAEA,YAAIoxE,YAAJ,EAAkB;EAEd,cAAIwD,KAAK,GAAG,CAAZ,CAFc;;EAGd,cAAIvjE,MAAM,GAAGwhE,IAAI,GAAG+B,KAApB,CAHc;;EAOd,eAAK10E,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4yE,IAAhB,EAAsB5yE,CAAC,EAAvB,EAA2B;EAEvBgrC,YAAAA,IAAI,GAAGD,KAAK,CAAC/qC,CAAD,CAAZ;EACA20E,YAAAA,EAAE,CAAC3pC,IAAI,CAAC,CAAD,CAAJ,GAAU75B,MAAX,EAAmB65B,IAAI,CAAC,CAAD,CAAJ,GAAU75B,MAA7B,EAAqC65B,IAAI,CAAC,CAAD,CAAJ,GAAU75B,MAA/C,CAAF;EAEH;;EAEDujE,UAAAA,KAAK,GAAGzD,KAAK,GAAGI,aAAa,GAAG,CAAhC;EACAlgE,UAAAA,MAAM,GAAGwhE,IAAI,GAAG+B,KAAhB,CAfc;;EAmBd,eAAK10E,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4yE,IAAhB,EAAsB5yE,CAAC,EAAvB,EAA2B;EAEvBgrC,YAAAA,IAAI,GAAGD,KAAK,CAAC/qC,CAAD,CAAZ;EACA20E,YAAAA,EAAE,CAAC3pC,IAAI,CAAC,CAAD,CAAJ,GAAU75B,MAAX,EAAmB65B,IAAI,CAAC,CAAD,CAAJ,GAAU75B,MAA7B,EAAqC65B,IAAI,CAAC,CAAD,CAAJ,GAAU75B,MAA/C,CAAF;EAEH;EAEJ,SA1BD,MA0BO;EAEH;EAEA,eAAKnR,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4yE,IAAhB,EAAsB5yE,CAAC,EAAvB,EAA2B;EAEvBgrC,YAAAA,IAAI,GAAGD,KAAK,CAAC/qC,CAAD,CAAZ;EACA20E,YAAAA,EAAE,CAAC3pC,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,CAAF;EAEH,WATE;;;EAaH,eAAKhrC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4yE,IAAhB,EAAsB5yE,CAAC,EAAvB,EAA2B;EAEvBgrC,YAAAA,IAAI,GAAGD,KAAK,CAAC/qC,CAAD,CAAZ;EACA20E,YAAAA,EAAE,CAAC3pC,IAAI,CAAC,CAAD,CAAJ,GAAU2nC,IAAI,GAAG1B,KAAlB,EAAyBjmC,IAAI,CAAC,CAAD,CAAJ,GAAU2nC,IAAI,GAAG1B,KAA1C,EAAiDjmC,IAAI,CAAC,CAAD,CAAJ,GAAU2nC,IAAI,GAAG1B,KAAlE,CAAF;EAEH;EAEJ;;EAED39C,QAAAA,KAAK,CAAC+Z,QAAN,CAAer+B,KAAf,EAAsB0hE,aAAa,CAAC5wE,MAAd,GAAuB,CAAvB,GAA2BkP,KAAjD,EAAwD,CAAxD;EAEH,OApfoB;;;EAwfrB,eAASylE,cAAT,GAA0B;EAEtB,YAAIzlE,KAAK,GAAG0hE,aAAa,CAAC5wE,MAAd,GAAuB,CAAnC;EACA,YAAI80E,WAAW,GAAG,CAAlB;EACAC,QAAAA,SAAS,CAAC9E,OAAD,EAAU6E,WAAV,CAAT;EACAA,QAAAA,WAAW,IAAI7E,OAAO,CAACjwE,MAAvB;;EAEA,aAAKqN,CAAC,GAAG,CAAJ,EAAOglE,EAAE,GAAGhC,KAAK,CAACrwE,MAAvB,EAA+BqN,CAAC,GAAGglE,EAAnC,EAAuChlE,CAAC,EAAxC,EAA4C;EAExC+kE,UAAAA,KAAK,GAAG/B,KAAK,CAAChjE,CAAD,CAAb;EACA0nE,UAAAA,SAAS,CAAC3C,KAAD,EAAQ0C,WAAR,CAAT,CAHwC;;EAMxCA,UAAAA,WAAW,IAAI1C,KAAK,CAACpyE,MAArB;EAEH;;EAGDwzB,QAAAA,KAAK,CAAC+Z,QAAN,CAAer+B,KAAf,EAAsB0hE,aAAa,CAAC5wE,MAAd,GAAuB,CAAvB,GAA2BkP,KAAjD,EAAwD,CAAxD;EAGH;;EAED,eAAS6lE,SAAT,CAAmB9E,OAAnB,EAA4B6E,WAA5B,EAAyC;EAErC,YAAItnC,CAAJ,EAAO05B,CAAP;EACAhnE,QAAAA,CAAC,GAAG+vE,OAAO,CAACjwE,MAAZ;;EAEA,eAAO,EAAEE,CAAF,IAAO,CAAd,EAAiB;EAEbstC,UAAAA,CAAC,GAAGttC,CAAJ;EACAgnE,UAAAA,CAAC,GAAGhnE,CAAC,GAAG,CAAR;EACA,cAAIgnE,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG+I,OAAO,CAACjwE,MAAR,GAAiB,CAArB,CAJE;;EAQb,cAAI4lB,CAAC,GAAG,CAAR;EAAA,cACIovD,EAAE,GAAG7D,KAAK,GAAGI,aAAa,GAAG,CADjC;;EAGA,eAAK3rD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGovD,EAAhB,EAAoBpvD,CAAC,EAArB,EAAyB;EAErB,gBAAIqvD,KAAK,GAAGpC,IAAI,GAAGjtD,CAAnB;EACA,gBAAIsvD,KAAK,GAAGrC,IAAI,IAAIjtD,CAAC,GAAG,CAAR,CAAhB;EAEA,gBAAItW,CAAC,GAAGwlE,WAAW,GAAGtnC,CAAd,GAAkBynC,KAA1B;EAAA,gBACIxlE,CAAC,GAAGqlE,WAAW,GAAG5N,CAAd,GAAkB+N,KAD1B;EAAA,gBAEIn/D,CAAC,GAAGg/D,WAAW,GAAG5N,CAAd,GAAkBgO,KAF1B;EAAA,gBAGInqE,CAAC,GAAG+pE,WAAW,GAAGtnC,CAAd,GAAkB0nC,KAH1B;EAKAC,YAAAA,EAAE,CAAC7lE,CAAD,EAAIG,CAAJ,EAAOqG,CAAP,EAAU/K,CAAV,CAAF;EAEH;EAEJ;EAEJ;;EAED,eAAS0Z,CAAT,CAAWxJ,CAAX,EAAcC,CAAd,EAAiBmJ,CAAjB,EAAoB;EAEhB4sD,QAAAA,WAAW,CAACnzE,IAAZ,CAAiBmd,CAAjB;EACAg2D,QAAAA,WAAW,CAACnzE,IAAZ,CAAiBod,CAAjB;EACA+1D,QAAAA,WAAW,CAACnzE,IAAZ,CAAiBumB,CAAjB;EAEH;;EAGD,eAASwwD,EAAT,CAAYvlE,CAAZ,EAAeG,CAAf,EAAkBqG,CAAlB,EAAqB;EAEjBs/D,QAAAA,SAAS,CAAC9lE,CAAD,CAAT;EACA8lE,QAAAA,SAAS,CAAC3lE,CAAD,CAAT;EACA2lE,QAAAA,SAAS,CAACt/D,CAAD,CAAT;EAEA,YAAIu/D,SAAS,GAAGzE,aAAa,CAAC5wE,MAAd,GAAuB,CAAvC;EACA,YAAIsqC,GAAG,GAAGmnC,KAAK,CAAC6D,aAAN,CAAoB9hD,KAApB,EAA2Bo9C,aAA3B,EAA0CyE,SAAS,GAAG,CAAtD,EAAyDA,SAAS,GAAG,CAArE,EAAwEA,SAAS,GAAG,CAApF,CAAV;EAEAE,QAAAA,KAAK,CAACjrC,GAAG,CAAC,CAAD,CAAJ,CAAL;EACAirC,QAAAA,KAAK,CAACjrC,GAAG,CAAC,CAAD,CAAJ,CAAL;EACAirC,QAAAA,KAAK,CAACjrC,GAAG,CAAC,CAAD,CAAJ,CAAL;EAEH;;EAED,eAAS6qC,EAAT,CAAY7lE,CAAZ,EAAeG,CAAf,EAAkBqG,CAAlB,EAAqB/K,CAArB,EAAwB;EAEpBqqE,QAAAA,SAAS,CAAC9lE,CAAD,CAAT;EACA8lE,QAAAA,SAAS,CAAC3lE,CAAD,CAAT;EACA2lE,QAAAA,SAAS,CAACrqE,CAAD,CAAT;EAEAqqE,QAAAA,SAAS,CAAC3lE,CAAD,CAAT;EACA2lE,QAAAA,SAAS,CAACt/D,CAAD,CAAT;EACAs/D,QAAAA,SAAS,CAACrqE,CAAD,CAAT;EAGA,YAAIsqE,SAAS,GAAGzE,aAAa,CAAC5wE,MAAd,GAAuB,CAAvC;EACA,YAAIsqC,GAAG,GAAGmnC,KAAK,CAAC+D,kBAAN,CAAyBhiD,KAAzB,EAAgCo9C,aAAhC,EAA+CyE,SAAS,GAAG,CAA3D,EAA8DA,SAAS,GAAG,CAA1E,EAA6EA,SAAS,GAAG,CAAzF,EAA4FA,SAAS,GAAG,CAAxG,CAAV;EAEAE,QAAAA,KAAK,CAACjrC,GAAG,CAAC,CAAD,CAAJ,CAAL;EACAirC,QAAAA,KAAK,CAACjrC,GAAG,CAAC,CAAD,CAAJ,CAAL;EACAirC,QAAAA,KAAK,CAACjrC,GAAG,CAAC,CAAD,CAAJ,CAAL;EAEAirC,QAAAA,KAAK,CAACjrC,GAAG,CAAC,CAAD,CAAJ,CAAL;EACAirC,QAAAA,KAAK,CAACjrC,GAAG,CAAC,CAAD,CAAJ,CAAL;EACAirC,QAAAA,KAAK,CAACjrC,GAAG,CAAC,CAAD,CAAJ,CAAL;EAEH;;EAED,eAAS8qC,SAAT,CAAmBr0E,KAAnB,EAA0B;EAEtB6vE,QAAAA,aAAa,CAAC9yE,IAAd,CAAmBmzE,WAAW,CAAClwE,KAAK,GAAG,CAAR,GAAY,CAAb,CAA9B;EACA6vE,QAAAA,aAAa,CAAC9yE,IAAd,CAAmBmzE,WAAW,CAAClwE,KAAK,GAAG,CAAR,GAAY,CAAb,CAA9B;EACA6vE,QAAAA,aAAa,CAAC9yE,IAAd,CAAmBmzE,WAAW,CAAClwE,KAAK,GAAG,CAAR,GAAY,CAAb,CAA9B;EAEH;;EAGD,eAASw0E,KAAT,CAAeE,OAAf,EAAwB;EAEpB5E,QAAAA,OAAO,CAAC/yE,IAAR,CAAa23E,OAAO,CAACx6D,CAArB;EACA41D,QAAAA,OAAO,CAAC/yE,IAAR,CAAa23E,OAAO,CAACv6D,CAArB;EAEH;EAEJ;;EAnpBwB;EAopB5B;;;IArpB+BywB;;EAwpBpC,IAAIgmC,gBAAgB,GAAG;EAEnB2D,EAAAA,aAAa,EAAE,uBAAU3hD,QAAV,EAAoBE,QAApB,EAA8B6hD,MAA9B,EAAsCC,MAAtC,EAA8CC,MAA9C,EAAsD;EAEjE,QAAIC,GAAG,GAAGhiD,QAAQ,CAAC6hD,MAAM,GAAG,CAAV,CAAlB;EACA,QAAII,GAAG,GAAGjiD,QAAQ,CAAC6hD,MAAM,GAAG,CAAT,GAAa,CAAd,CAAlB;EACA,QAAIK,GAAG,GAAGliD,QAAQ,CAAC8hD,MAAM,GAAG,CAAV,CAAlB;EACA,QAAIK,GAAG,GAAGniD,QAAQ,CAAC8hD,MAAM,GAAG,CAAT,GAAa,CAAd,CAAlB;EACA,QAAIM,GAAG,GAAGpiD,QAAQ,CAAC+hD,MAAM,GAAG,CAAV,CAAlB;EACA,QAAIM,GAAG,GAAGriD,QAAQ,CAAC+hD,MAAM,GAAG,CAAT,GAAa,CAAd,CAAlB;EAEA,WAAO,CACH,IAAI7sC,OAAJ,CAAY8sC,GAAZ,EAAiBC,GAAjB,CADG,EAEH,IAAI/sC,OAAJ,CAAYgtC,GAAZ,EAAiBC,GAAjB,CAFG,EAGH,IAAIjtC,OAAJ,CAAYktC,GAAZ,EAAiBC,GAAjB,CAHG,CAAP;EAMH,GAjBkB;EAmBnBV,EAAAA,kBAAkB,EAAE,4BAAU7hD,QAAV,EAAoBE,QAApB,EAA8B6hD,MAA9B,EAAsCC,MAAtC,EAA8CC,MAA9C,EAAsDO,MAAtD,EAA8D;EAE9E,QAAIN,GAAG,GAAGhiD,QAAQ,CAAC6hD,MAAM,GAAG,CAAV,CAAlB;EACA,QAAII,GAAG,GAAGjiD,QAAQ,CAAC6hD,MAAM,GAAG,CAAT,GAAa,CAAd,CAAlB;EACA,QAAIU,GAAG,GAAGviD,QAAQ,CAAC6hD,MAAM,GAAG,CAAT,GAAa,CAAd,CAAlB;EACA,QAAIK,GAAG,GAAGliD,QAAQ,CAAC8hD,MAAM,GAAG,CAAV,CAAlB;EACA,QAAIK,GAAG,GAAGniD,QAAQ,CAAC8hD,MAAM,GAAG,CAAT,GAAa,CAAd,CAAlB;EACA,QAAIU,GAAG,GAAGxiD,QAAQ,CAAC8hD,MAAM,GAAG,CAAT,GAAa,CAAd,CAAlB;EACA,QAAIM,GAAG,GAAGpiD,QAAQ,CAAC+hD,MAAM,GAAG,CAAV,CAAlB;EACA,QAAIM,GAAG,GAAGriD,QAAQ,CAAC+hD,MAAM,GAAG,CAAT,GAAa,CAAd,CAAlB;EACA,QAAIU,GAAG,GAAGziD,QAAQ,CAAC+hD,MAAM,GAAG,CAAT,GAAa,CAAd,CAAlB;EACA,QAAIW,GAAG,GAAG1iD,QAAQ,CAACsiD,MAAM,GAAG,CAAV,CAAlB;EACA,QAAIK,GAAG,GAAG3iD,QAAQ,CAACsiD,MAAM,GAAG,CAAT,GAAa,CAAd,CAAlB;EACA,QAAIM,GAAG,GAAG5iD,QAAQ,CAACsiD,MAAM,GAAG,CAAT,GAAa,CAAd,CAAlB;;EAEA,QAAIx2E,IAAI,CAACuK,GAAL,CAAS4rE,GAAG,GAAGE,GAAf,IAAsB,IAA1B,EAAgC;EAE5B,aAAO,CACH,IAAIjtC,OAAJ,CAAY8sC,GAAZ,EAAiB,IAAIO,GAArB,CADG,EAEH,IAAIrtC,OAAJ,CAAYgtC,GAAZ,EAAiB,IAAIM,GAArB,CAFG,EAGH,IAAIttC,OAAJ,CAAYktC,GAAZ,EAAiB,IAAIK,GAArB,CAHG,EAIH,IAAIvtC,OAAJ,CAAYwtC,GAAZ,EAAiB,IAAIE,GAArB,CAJG,CAAP;EAOH,KATD,MASO;EAEH,aAAO,CACH,IAAI1tC,OAAJ,CAAY+sC,GAAZ,EAAiB,IAAIM,GAArB,CADG,EAEH,IAAIrtC,OAAJ,CAAYitC,GAAZ,EAAiB,IAAIK,GAArB,CAFG,EAGH,IAAIttC,OAAJ,CAAYmtC,GAAZ,EAAiB,IAAII,GAArB,CAHG,EAIH,IAAIvtC,OAAJ,CAAYytC,GAAZ,EAAiB,IAAIC,GAArB,CAJG,CAAP;EAOH;EAEJ;EAtDkB,CAAvB;;EC7sBA;;MCGM53B;;;;;EACF,+BAAYllB,UAAZ,EAAwB;EAAA;;EAAA;;EACpB;EAEA,UAAK3xB,IAAL,GAAY,qBAAZ;EAEA,UAAK0hB,KAAL,GAAa,IAAIR,OAAJ,CAAU,QAAV,CAAb,CALoB;;EAOpB,UAAK5qB,GAAL,GAAW,IAAX,CAPoB;;EAUpB,UAAKyzC,QAAL,GAAgB,IAAI7oB,OAAJ,CAAU,QAAV,CAAhB,CAVoB;;EAYpB,UAAKukC,iBAAL,GAAyB,GAAzB;EAEA,UAAKrD,SAAL,GAAiB,KAAjB;EACA,UAAKY,kBAAL,GAA0B,CAA1B;;EAGA,UAAKwQ,SAAL,CAAe7hC,UAAf;;EAlBoB;EAqBvB;;;;2BAMIiU,QAAQ;EACT,oFAAWA,MAAX;;EAEA,WAAKlkB,KAAL,CAAW9kB,IAAX,CAAgBgpC,MAAM,CAAClkB,KAAvB;EAEA,WAAKprB,GAAL,GAAWsvC,MAAM,CAACtvC,GAAlB;EAEA,WAAKyzC,QAAL,CAAcntC,IAAd,CAAmBgpC,MAAM,CAACmE,QAA1B;EACA,WAAK0b,iBAAL,GAAyB7f,MAAM,CAAC6f,iBAAhC;EAEA,WAAKrD,SAAL,GAAiBxc,MAAM,CAACwc,SAAxB;EACA,WAAKY,kBAAL,GAA0Bpd,MAAM,CAACod,kBAAjC;EAEA,aAAO,IAAP;EACH;;;6BAlB2B;EACxB,aAAO,IAAP;EACH;;;;IA1B6BqQ;;MCA5Bvc;;;;;EACF,6BAAYnlB,UAAZ,EAAwB;EAAA;;EAAA;;EAEpB;EAEA,UAAK3xB,IAAL,GAAY,mBAAZ;EAEA,UAAK0hB,KAAL,GAAa,IAAIR,OAAJ,CAAU,QAAV,CAAb,CANoB;EAOpB;;EACA,UAAK+oB,QAAL,GAAgB,IAAI/oB,OAAJ,CAAU,QAAV,CAAhB,CARoB;;EAWpB,UAAKgpB,SAAL,GAAiB,EAAjB;EAEA,UAAK5zC,GAAL,GAAW,IAAX,CAboB;;EAgBpB,UAAKyzC,QAAL,GAAgB,IAAI7oB,OAAJ,CAAU,QAAV,CAAhB,CAhBoB;;EAkBpB,UAAKukC,iBAAL,GAAyB,GAAzB;EAGA,UAAKrD,SAAL,GAAiB,KAAjB;EACA,UAAKY,kBAAL,GAA0B,CAA1B;;EACA,UAAKwQ,SAAL,CAAe7hC,UAAf;;EAvBoB;EAyBvB;;;;2BAMIiU,QAAQ;EACT,kFAAWA,MAAX;;EAEA,WAAKlkB,KAAL,CAAW9kB,IAAX,CAAgBgpC,MAAM,CAAClkB,KAAvB;EACA,WAAKuoB,QAAL,CAAcrtC,IAAd,CAAmBgpC,MAAM,CAACqE,QAA1B;EACA,WAAKC,SAAL,GAAiBtE,MAAM,CAACsE,SAAxB;EAEA,WAAK5zC,GAAL,GAAWsvC,MAAM,CAACtvC,GAAlB;EAEA,WAAKyzC,QAAL,CAAcntC,IAAd,CAAmBgpC,MAAM,CAACmE,QAA1B;EACA,WAAK0b,iBAAL,GAAyB7f,MAAM,CAAC6f,iBAAhC;EAEA,WAAKrD,SAAL,GAAiBxc,MAAM,CAACwc,SAAxB;EACA,WAAKY,kBAAL,GAA0Bpd,MAAM,CAACod,kBAAjC;EAEA,aAAO,IAAP;EACH;;;6BApByB;EACtB,aAAO,IAAP;EACH;;;;IA9B2BqQ;;MCA1B1c;;;;;EACF,8BAAYhlB,UAAZ,EAAwB;EAAA;;EAAA;;EACpB;EAEA,UAAK3xB,IAAL,GAAY,oBAAZ,CAHoB;;EAOpB,UAAK3B,KAAL,GAAa,CAAb,CAPoB;;EAQpB,UAAK2pC,QAAL,GAAgB,CAAhB,CARoB;;EASpB,UAAKgd,OAAL,GAAe,CAAf,CAToB;;EAWpB,UAAKwO,SAAL,CAAe7hC,UAAf;;EAXoB;EAavB;;;;2BAMIiU,QAAQ;EAET,mFAAWA,MAAX;;EACA,WAAKvnC,KAAL,GAAaunC,MAAM,CAACvnC,KAApB;EACA,WAAK2pC,QAAL,GAAgBpC,MAAM,CAACoC,QAAvB;EACA,WAAKgd,OAAL,GAAepf,MAAM,CAACof,OAAtB;EAEA,aAAO,IAAP;EACH;;;6BAZ0B;EACvB,aAAO,IAAP;EACH;;;;IAlB4BtO;;MCA3Bg4B;;;;;EACF,0BAAY/8C,UAAZ,EAAwB;EAAA;;EAAA;;EACpB;EAEA,UAAK3xB,IAAL,GAAY,gBAAZ;EAEA,UAAKgzC,OAAL,GAAe,EAAf;EACA,UAAK5K,QAAL,GAAgB,EAAhB;EAEA,UAAKwB,YAAL,GAAoB,+FAApB;EACA,UAAKC,cAAL,GAAsB,gEAAtB;EAEA,UAAKQ,SAAL,GAAiB,CAAjB;EAEA,UAAK+X,SAAL,GAAiB,KAAjB;EACA,UAAKY,kBAAL,GAA0B,CAA1B;EAEA,UAAKzb,MAAL,GAAc,KAAd,CAhBoB;EAmBpB;;EACA,UAAKwf,sBAAL,GAA8B;EAC1B,eAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CADiB;EAE1B,YAAM,CAAC,CAAD,EAAI,CAAJ,CAFoB;EAG1B,aAAO,CAAC,CAAD,EAAI,CAAJ;EAHmB,KAA9B;EAMA,UAAK4nB,mBAAL,GAA2B7xE,SAA3B;EACA,UAAKipD,kBAAL,GAA0B,KAA1B;;EAEA,QAAIp0B,UAAU,KAAK70B,SAAnB,EAA8B;EAE1B,UAAI60B,UAAU,CAAC5F,UAAX,KAA0BjvB,SAA9B,EAAyC;EAErC2gB,QAAAA,OAAO,CAAC8E,KAAR,CAAc,6EAAd;EAEH;;EAED,YAAKixC,SAAL,CAAe7hC,UAAf;EAEH;;EAvCmB;EAyCvB;;;;2BAMIiU,QAAQ;EAET,+EAAWA,MAAX;;EACA,WAAKiE,cAAL,GAAsBjE,MAAM,CAACiE,cAA7B;EACA,WAAKD,YAAL,GAAoBhE,MAAM,CAACgE,YAA3B;EAEA,WAAKxB,QAAL,GAAgBF,aAAa,CAAC7rC,KAAd,CAAoBupC,MAAM,CAACwC,QAA3B,CAAhB;EAEA,WAAK4K,OAAL,GAAer9C,MAAM,CAACkc,MAAP,CAAc,EAAd,EAAkB+zB,MAAM,CAACoN,OAAzB,CAAf;EAEA,WAAKoP,SAAL,GAAiBxc,MAAM,CAACwc,SAAxB;EACA,WAAKY,kBAAL,GAA0Bpd,MAAM,CAACod,kBAAjC;EAEA,WAAKzb,MAAL,GAAc3B,MAAM,CAAC2B,MAArB;EAEA,aAAO,IAAP;EAGH;;;6BAtBqB;EAClB,aAAO,IAAP;EACH;;;;IA9CwB8rB;;MCCvBub;;;;;EACF,6BAAYj9C,UAAZ,EAAwB;EAAA;;EAAA;;EAEpB,2FAAMA,UAAN;EAEA,UAAK3xB,IAAL,GAAY,mBAAZ;EAJoB;EAMvB;;;;0BACwB;EACrB,aAAO,IAAP;EACH;;;;IAV2B0uE;;ECJhC;;MCGMG;;;;;EACF,iBAAYntD,KAAZ,EAAmBm7B,SAAnB,EAA8B;EAAA;;EAAA;;EAC1B;EACA,UAAK78C,IAAL,GAAY,OAAZ;EAEA,UAAK0hB,KAAL,GAAa,IAAIR,OAAJ,CAAUQ,KAAV,CAAb;EACA,UAAKm7B,SAAL,GAAiBA,SAAS,KAAK//C,SAAd,GAA0B+/C,SAA1B,GAAsC,CAAvD;EAL0B;EAO7B;;;;0BACa;EACV,aAAO,IAAP;EACH;;;;IAXesP;;MCAd2iB;;;;;EACF,qBAAYptD,KAAZ,EAAmBm7B,SAAnB,EAA8BnsB,QAA9B,EAAwCtgB,KAAxC,EAA+C+sC,QAA/C,EAAyDrV,KAAzD,EAAgE;EAAA;;EAAA;;EAC5D,mFAAMpmB,KAAN,EAAam7B,SAAb;EAEA,UAAK78C,IAAL,GAAY,WAAZ;;EAEA,UAAKsL,QAAL,CAAc1O,IAAd,CAAmBuvD,QAAQ,CAACC,SAA5B;;EACA,UAAK1G,YAAL;;EAEA,UAAK7pD,MAAL,GAAc,IAAIswD,QAAJ,EAAd;EAEA,UAAKz7B,QAAL,GAAiBA,QAAQ,KAAK5zB,SAAd,GAA2B4zB,QAA3B,GAAsC,CAAtD;EACA,UAAKtgB,KAAL,GAAcA,KAAK,KAAKtT,SAAX,GAAwBsT,KAAxB,GAAgCzY,IAAI,CAACwF,EAAL,GAAU,CAAvD;EACA,UAAKggD,QAAL,GAAiBA,QAAQ,KAAKrgD,SAAd,GAA2BqgD,QAA3B,GAAsC,CAAtD;EACA,UAAKrV,KAAL,GAAcA,KAAK,KAAKhrC,SAAX,GAAwBgrC,KAAxB,GAAgC,CAA7C,CAb4D;;EAAA;EAgB/D;;;;0BAEgB;EACb,aAAO,IAAP;EACH;EAGD;;;;0BACY;EACR,aAAO,KAAK+U,SAAL,GAAiBllD,IAAI,CAACwF,EAA7B;EACH;wBACS4xE,OAAO;EAEb,WAAKlyB,SAAL,GAAiBkyB,KAAK,GAAGp3E,IAAI,CAACwF,EAA9B;EAEH;;;;IAhCmB0xE;;MCAlBG;;;;;EACF,sBAAYttD,KAAZ,EAAmBm7B,SAAnB,EAA8BnsB,QAA9B,EAAwCoX,KAAxC,EAA+C;EAAA;;EAAA;;EAC3C,oFAAMpmB,KAAN,EAAam7B,SAAb;EACA,UAAK78C,IAAL,GAAY,YAAZ;EAEA,UAAK0wB,QAAL,GAAiBA,QAAQ,KAAK5zB,SAAd,GAA2B4zB,QAA3B,GAAsC,CAAtD;EACA,UAAKoX,KAAL,GAAcA,KAAK,KAAKhrC,SAAX,GAAwBgrC,KAAxB,GAAgC,CAA7C,CAL2C;;EAAA;EAO9C;;;;0BACiB;EACd,aAAO,IAAP;EACH;EAED;;;;0BACY;EACR,aAAO,KAAK+U,SAAL,GAAiB,CAAjB,GAAqBllD,IAAI,CAACwF,EAAjC;EACH;wBACS4xE,OAAO;EAEb,WAAKlyB,SAAL,GAAiBkyB,KAAK,IAAI,IAAIp3E,IAAI,CAACwF,EAAb,CAAtB;EAEH;;;;IArBoB0xE;;MCCnBI;;;;;EACF,4BAAYvtD,KAAZ,EAAmBm7B,SAAnB,EAA8B;EAAA;;EAAA;;EAC1B,0FAAMn7B,KAAN,EAAam7B,SAAb;EAEA,UAAK78C,IAAL,GAAY,kBAAZ;;EAEA,UAAKsL,QAAL,CAAc1O,IAAd,CAAmBuvD,QAAQ,CAACC,SAA5B;;EACA,UAAK1G,YAAL;;EAEA,UAAK7pD,MAAL,GAAc,IAAIswD,QAAJ,EAAd;EAR0B;EAW7B;;;;0BAEwB;EACrB,aAAO,IAAP;EACH;;;;IAhB0B0iB;;MCDzBK;;;;;EACF,wBAAYxtD,KAAZ,EAAmBm7B,SAAnB,EAA8B;EAAA;;EAAA;;EAC1B,sFAAMn7B,KAAN,EAAam7B,SAAb;EACA,UAAK78C,IAAL,GAAY,cAAZ;EAF0B;EAG7B;;;;0BACoB;EACjB,aAAO,IAAP;EACH;;;;IAPsB6uE;;MCGrBM;;;;;EACF,oBAAc;EAAA;;EAAA;;EACV,iFADU;;EAIV,UAAKxyB,kBAAL,GAA0B,IAAIr6B,OAAJ,EAA1B;EACA,UAAK3D,gBAAL,GAAwB,IAAI2D,OAAJ,EAAxB;EAEA,UAAK4+B,QAAL,GAAgB,IAAhB;EAPU;EAQb;;;;wCAEiB+L,OAAO;EAErB,oFAAwBA,KAAxB;;EAEA,WAAKtQ,kBAAL,CAAwB/9B,UAAxB,CAAmC,KAAKC,WAAxC;EAEH;;;wCAEiBhjB,QAAQ;EACtB,aAAO+xD,oBAAiB,CAACv1D,IAAlB,CAAuB,IAAvB,EAA6BwD,MAA7B,CAAP;EACH;;;;IArBgBswD;;EA0BrB,IAAIyB,oBAAiB,GAAI,YAAY;EAEjC,MAAI3kC,UAAU,GAAG,IAAI6+B,UAAJ,EAAjB;EAEA,SAAO,SAAS8F,iBAAT,CAA2B/xD,MAA3B,EAAmC;EAEtC,QAAIA,MAAM,KAAKiB,SAAf,EAA0B;EAEtB2gB,MAAAA,OAAO,CAACC,IAAR,CAAa,qDAAb;EACA7hB,MAAAA,MAAM,GAAG,IAAIyhB,OAAJ,EAAT;EAEH;;EAED,SAAKowC,kBAAL,CAAwBzkC,UAAxB;EAEA,WAAOptB,MAAM,CAACsQ,GAAP,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAE,CAAnB,EAAsBqhD,eAAtB,CAAsCvkC,UAAtC,CAAP;EAEH,GAbD;EAeH,CAnBuB,EAAxB;;EC7BA;;;;;MAKMmmD;;;;;EACF,6BAAY7R,GAAZ,EAAiB8R,MAAjB,EAAyB9lD,IAAzB,EAA+BC,GAA/B,EAAoC;EAAA;;EAAA;;EAChC;EAEA,UAAKxpB,IAAL,GAAY,mBAAZ;EAEA,UAAKu9D,GAAL,GAAWA,GAAG,KAAKzgE,SAAR,GAAoBygE,GAApB,GAA0B,EAArC;EACA,UAAKxzD,IAAL,GAAY,CAAZ;EAEA,UAAKwf,IAAL,GAAYA,IAAI,KAAKzsB,SAAT,GAAqBysB,IAArB,GAA4B,GAAxC;EACA,UAAKC,GAAL,GAAWA,GAAG,KAAK1sB,SAAR,GAAoB0sB,GAApB,GAA0B,IAArC;EACA,UAAK8lD,KAAL,GAAa,EAAb;EAEA,UAAKD,MAAL,GAAcA,MAAM,KAAKvyE,SAAX,GAAuBuyE,MAAvB,GAAgC,CAA9C;EACA,UAAK1jE,IAAL,GAAY,IAAZ;;EAGA,UAAK4jE,sBAAL;;EAEA,UAAKC,mBAAL,GAA2B,IAA3B;EAlBgC;EAmBnC;;;;+CAEwB;EAErB,UAAIjmD,IAAI,GAAG,KAAKA,IAAhB;EAAA,UACInf,GAAG,GAAGmf,IAAI,GAAG5xB,IAAI,CAAC6lE,GAAL,CACT1gD,KAAK,CAAC5f,OAAN,GAAgB,GAAhB,GAAsB,KAAKqgE,GADlB,CAAP,GACgC,KAAKxzD,IAF/C;EAAA,UAGIyB,MAAM,GAAG,IAAIpB,GAHjB;EAAA,UAIImB,KAAK,GAAG,KAAK8jE,MAAL,GAAc7jE,MAJ1B;EAAA,UAKItB,IAAI,GAAG,CAAE,GAAF,GAAQqB,KALnB;EAAA,UAMII,IAAI,GAAG,KAAKA,IANhB;EAQA,WAAKgT,gBAAL,CAAsB8wD,eAAtB,CAAsCvlE,IAAtC,EAA4CA,IAAI,GAAGqB,KAAnD,EAA0DnB,GAA1D,EAA+DA,GAAG,GAAGoB,MAArE,EAA6E+d,IAA7E,EAAmF,KAAKC,GAAxF;EAEH;;;;IAlC2B2lD;;ECNhC;;;;;MAKMO;;;;;EACF,8BAAYxlE,IAAZ,EAAkBD,KAAlB,EAAyBG,GAAzB,EAA8Bkf,MAA9B,EAAsCC,IAAtC,EAA4CC,GAA5C,EAAkD;EAAA;;EAAA;;EAC9C;EACA,UAAKxpB,IAAL,GAAY,oBAAZ;EAEA,UAAK+J,IAAL,GAAY,CAAZ;EACA,UAAK4B,IAAL,GAAY,IAAZ;EAEA,UAAKzB,IAAL,GAAYA,IAAZ;EACA,UAAKD,KAAL,GAAaA,KAAb;EACA,UAAKG,GAAL,GAAWA,GAAX;EACA,UAAKkf,MAAL,GAAcA,MAAd;EAEA,UAAKC,IAAL,GAAaA,IAAI,KAAKzsB,SAAV,GAAuBysB,IAAvB,GAA8B,GAA1C;EACA,UAAKC,GAAL,GAAYA,GAAG,KAAK1sB,SAAT,GAAsB0sB,GAAtB,GAA4B,IAAvC;EAEA,UAAK2zC,oBAAL,GAA4B,IAA5B;;EAEA,UAAKoS,sBAAL;;EAjB8C;EAkBjD;;;;+CAEwB;EAErB,UAAIrvD,EAAE,GAAG,CAAC,KAAKjW,KAAL,GAAa,KAAKC,IAAnB,KAA4B,IAAI,KAAKH,IAArC,CAAT;EACA,UAAIoW,EAAE,GAAG,CAAC,KAAK/V,GAAL,GAAW,KAAKkf,MAAjB,KAA4B,IAAI,KAAKvf,IAArC,CAAT;EACA,UAAIojB,EAAE,GAAG,CAAC,KAAKljB,KAAL,GAAa,KAAKC,IAAnB,IAA2B,CAApC;EACA,UAAIkjB,EAAE,GAAG,CAAC,KAAKhjB,GAAL,GAAW,KAAKkf,MAAjB,IAA2B,CAApC;EAEA,UAAIpf,IAAI,GAAGijB,EAAE,GAAGjN,EAAhB;EACA,UAAIjW,KAAK,GAAGkjB,EAAE,GAAGjN,EAAjB;EACA,UAAI9V,GAAG,GAAGgjB,EAAE,GAAGjN,EAAf;EACA,UAAImJ,MAAM,GAAG8D,EAAE,GAAGjN,EAAlB;EAEA,WAAKxB,gBAAL,CAAsBgxD,gBAAtB,CAAuCzlE,IAAvC,EAA6CD,KAA7C,EAAoDG,GAApD,EAAyDkf,MAAzD,EAAiE,KAAKC,IAAtE,EAA4E,KAAKC,GAAjF;EAEH;;;;IAnC4B2lD;;MCL3BS;;;;;EACF,oCAAYl3E,KAAZ,EAAmBwoC,QAAnB,EAA6BxI,gBAA7B,EAA+C;EAAA;;EAAA;;EAC3C;EAEAuI,IAAAA,eAAe,CAAC5oC,IAAhB,wDAA2BK,KAA3B,EAAkCwoC,QAAlC;EAEA,UAAKxI,gBAAL,GAAwBA,gBAAgB,IAAI,CAA5C;EAEA,UAAK4uB,0BAAL,GAAkC,IAAlC;EAP2C;EAS9C;;;;2BACI1hB,QAAQ;EAET,yFAAWA,MAAX;;EAEA,WAAKlN,gBAAL,GAAwBkN,MAAM,CAAClN,gBAA/B;EAEA,aAAO,IAAP;EAEH;;;;IAnBkCuI;;MCEjC4uC;;;EACF,wBAAYvuE,MAAZ,EAAoB2sB,SAApB,EAA+B1E,IAA/B,EAAqCC,GAArC,EAA0C;EAAA;;EAEtC;EACA,SAAK8kC,GAAL,GAAW,IAAID,GAAJ,CAAQ/sD,MAAR,EAAgB2sB,SAAhB,CAAX;EAEA,SAAK1E,IAAL,GAAYA,IAAI,IAAI,CAApB;EACA,SAAKC,GAAL,GAAWA,GAAG,IAAI3uB,QAAlB;EAEA,SAAKib,MAAL,GAAc;EACV29C,MAAAA,IAAI,EAAE,EADI;EAEVkC,MAAAA,IAAI,EAAE,EAFI;EAGVma,MAAAA,GAAG,EAAE,EAHK;EAIV1X,MAAAA,MAAM,EAAE;EAAEC,QAAAA,SAAS,EAAE;EAAb,OAJE;EAKVO,MAAAA,MAAM,EAAE;EALE,KAAd;EAQA,SAAK9C,aAAL,GAAqB,CAArB;EACH;;;;0BAEGx0D,QAAQ2sB,WAAW;EAEnB;EACA,WAAKqgC,GAAL,CAASniD,GAAT,CAAa7K,MAAb,EAAqB2sB,SAArB;EACH;;;oCAEa8hD,QAAQvxD,QAAQ;EAE1B;EACA,UAAIwxD,OAAO,GAAG,IAAI1tD,OAAJ,EAAd;EACA0tD,MAAAA,OAAO,CAACtxD,gBAAR,CAAyBF,MAAM,CAACK,WAAhC,EAA6CmxD,OAAO,CAACpxD,UAAR,CAAmBJ,MAAM,CAACG,gBAA1B,CAA7C;;EAEA,UAAKH,MAAM,IAAIA,MAAM,CAACgxD,mBAAtB,EAA4C;EAExC,aAAKlhB,GAAL,CAAShtD,MAAT,CAAgB07C,qBAAhB,CAAsCx+B,MAAM,CAACK,WAA7C;EAEA,aAAKyvC,GAAL,CAASrgC,SAAT,CAAmB9hB,GAAnB,CAAuB4jE,MAAM,CAAC98D,CAA9B,EAAiC88D,MAAM,CAAC78D,CAAxC,EAA2C,GAA3C,EAAgD4L,YAAhD,CAA6DkxD,OAA7D,EAAsEnlD,GAAtE,CAA0E,KAAKyjC,GAAL,CAAShtD,MAAnF,EAA2Fyd,SAA3F;EAEH,OAND,MAMO,IAAKP,MAAM,IAAIA,MAAM,CAAC2+C,oBAAtB,EAA6C;EAEhD,aAAK7O,GAAL,CAAShtD,MAAT,CAAgB6K,GAAhB,CAAoB4jE,MAAM,CAAC98D,CAA3B,EAA8B88D,MAAM,CAAC78D,CAArC,EAAwC,CAACsL,MAAM,CAAC+K,IAAP,GAAc/K,MAAM,CAACgL,GAAtB,KAA8BhL,MAAM,CAAC+K,IAAP,GAAc/K,MAAM,CAACgL,GAAnD,CAAxC,EAAiG1K,YAAjG,CAA8GkxD,OAA9G,EAFgD;;EAGhD,aAAK1hB,GAAL,CAASrgC,SAAT,CAAmB9hB,GAAnB,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAAE,CAA/B,EAAkC8wC,kBAAlC,CAAqDz+B,MAAM,CAACK,WAA5D;EAEH,OALM,MAKA;EAEHpB,QAAAA,OAAO,CAAC8E,KAAR,CAAc,qCAAd;EAEH;EAEJ;;;sCAEemI,QAAQulD,WAAWrlD,gBAAgB;EAE/C,UAAI+oC,UAAU,GAAG/oC,cAAc,IAAI,EAAnC;;EAEAslD,MAAAA,gBAAe,CAACxlD,MAAD,EAAS,IAAT,EAAeipC,UAAf,EAA2Bsc,SAA3B,CAAf;;EAEAtc,MAAAA,UAAU,CAAClwD,IAAX,CAAgB0sE,OAAhB;EAEA,aAAOxc,UAAP;EAEH;EAGD;;;;uCACiByc,SAASH,WAAWrlD,gBAAgB;EAEjD,UAAI+oC,UAAU,GAAG/oC,cAAc,IAAI,EAAnC;;EAEA,UAAIp1B,KAAK,CAAC0B,OAAN,CAAck5E,OAAd,MAA2B,KAA/B,EAAsC;EAElC3yD,QAAAA,OAAO,CAACC,IAAR,CAAa,sDAAb;EACA,eAAOi2C,UAAP;EAEH;;EAED,WAAK,IAAIz7D,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGksE,OAAO,CAACp4E,MAA5B,EAAoCE,CAAC,GAAGgM,CAAxC,EAA2ChM,CAAC,EAA5C,EAAgD;EAE5Cg4E,QAAAA,gBAAe,CAACE,OAAO,CAACl4E,CAAD,CAAR,EAAa,IAAb,EAAmBy7D,UAAnB,EAA+Bsc,SAA/B,CAAf;EAEH;;EAEDtc,MAAAA,UAAU,CAAClwD,IAAX,CAAgB0sE,OAAhB;EAEA,aAAOxc,UAAP;EAEH;;;;;;EAIL,SAASwc,OAAT,CAAiB7oE,CAAjB,EAAoBG,CAApB,EAAuB;EAEnB,SAAOH,CAAC,CAACopB,QAAF,GAAajpB,CAAC,CAACipB,QAAtB;EAEH;;EAED,SAASw/C,gBAAT,CAAyBxlD,MAAzB,EAAiCgpC,SAAjC,EAA4CC,UAA5C,EAAwDsc,SAAxD,EAAmE;EAE/D,MAAIvlD,MAAM,CAACi5B,OAAP,KAAmB,KAAvB,EAA8B;EAE9Bj5B,EAAAA,MAAM,CAACkpC,OAAP,CAAeF,SAAf,EAA0BC,UAA1B;;EAEA,MAAIsc,SAAS,KAAK,IAAlB,EAAwB;EAEpB,QAAIh6D,QAAQ,GAAGyU,MAAM,CAACzU,QAAtB;;EAEA,SAAK,IAAI/d,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG+R,QAAQ,CAACje,MAA7B,EAAqCE,CAAC,GAAGgM,CAAzC,EAA4ChM,CAAC,EAA7C,EAAiD;EAE7Cg4E,MAAAA,gBAAe,CAACj6D,QAAQ,CAAC/d,CAAD,CAAT,EAAcw7D,SAAd,EAAyBC,UAAzB,EAAqC,IAArC,CAAf;EAEH;EAEJ;EAEJ;;ECpHD;;;;;;;;;;MAUM0c;;;EACF,qBAAYp+D,MAAZ,EAAoBqO,GAApB,EAAyBP,KAAzB,EAAgC;EAAA;;EAE5B,SAAK9N,MAAL,GAAeA,MAAM,KAAKnV,SAAZ,GAAyBmV,MAAzB,GAAkC,GAAhD;EACA,SAAKqO,GAAL,GAAYA,GAAG,KAAKxjB,SAAT,GAAsBwjB,GAAtB,GAA4B,CAAvC,CAH4B;;EAI5B,SAAKP,KAAL,GAAcA,KAAK,KAAKjjB,SAAX,GAAwBijB,KAAxB,GAAgC,CAA7C,CAJ4B;;EAM5B,WAAO,IAAP;EAEH;;;;0BAEG9N,QAAQqO,KAAKP,OAAO;EAEpB,WAAK9N,MAAL,GAAcA,MAAd;EACA,WAAKqO,GAAL,GAAWA,GAAX;EACA,WAAKP,KAAL,GAAaA,KAAb;EAEA,aAAO,IAAP;EAEH;;;8BACO;EAEJ,aAAO,IAAI,KAAKhjB,WAAT,GAAuBH,IAAvB,CAA4B,IAA5B,CAAP;EAEH;;;2BACI0zE,OAAO;EAER,WAAKr+D,MAAL,GAAcq+D,KAAK,CAACr+D,MAApB;EACA,WAAKqO,GAAL,GAAWgwD,KAAK,CAAChwD,GAAjB;EACA,WAAKP,KAAL,GAAauwD,KAAK,CAACvwD,KAAnB;EAEA,aAAO,IAAP;EAEH;;;;iCAEU;EAEP,UAAI8nC,GAAG,GAAG,QAAV;EACA,WAAKvnC,GAAL,GAAW3oB,IAAI,CAACsC,GAAL,CAAS4tD,GAAT,EAAclwD,IAAI,CAACiD,GAAL,CAASjD,IAAI,CAACwF,EAAL,GAAU0qD,GAAnB,EAAwB,KAAKvnC,GAA7B,CAAd,CAAX;EAEA,aAAO,IAAP;EAEH;;;qCAEciwD,MAAM;EAEjB,WAAKt+D,MAAL,GAAcs+D,IAAI,CAACv4E,MAAL,EAAd;;EAEA,UAAI,KAAKia,MAAL,KAAgB,CAApB,EAAuB;EAEnB,aAAK8N,KAAL,GAAa,CAAb;EACA,aAAKO,GAAL,GAAW,CAAX;EAEH,OALD,MAKO;EAEH,aAAKP,KAAL,GAAapoB,IAAI,CAAC8b,KAAL,CAAW88D,IAAI,CAACt9D,CAAhB,EAAmBs9D,IAAI,CAACl0D,CAAxB,CAAb,CAFG;;EAGH,aAAKiE,GAAL,GAAW3oB,IAAI,CAACqoB,IAAL,CAAUlD,KAAK,CAACC,KAAN,CAAYwzD,IAAI,CAACr9D,CAAL,GAAS,KAAKjB,MAA1B,EAAkC,CAAE,CAApC,EAAuC,CAAvC,CAAV,CAAX,CAHG;EAKN;;EAED,aAAO,IAAP;EAEH;;;;;;ECtEL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA+BA;;;;MAIOu+D;;;EACH,mBAAa;EAAA;;EACT,SAAKxwE,IAAL,GAAY,OAAZ;EAEA,SAAKywE,kBAAL,GAA0B,GAA1B;EACH;EAGJ;;;;;;EAEW;EAA0B;EAEpChzD,MAAAA,OAAO,CAACC,IAAR,CAAc,2CAAd;EACA,aAAO,IAAP;EAEA;EAGD;;;;iCAEa4qB,GAAG1d,gBAAiB;EAEhC,UAAI/V,CAAC,GAAG,KAAK67D,cAAL,CAAqBpoC,CAArB,CAAR;EACA,aAAO,KAAKqoC,QAAL,CAAe97D,CAAf,EAAkB+V,cAAlB,CAAP;EAEA;;;;gCAIWgmD,WAAY;EAEvB,UAAKA,SAAS,KAAK9zE,SAAnB,EAA+B8zE,SAAS,GAAG,CAAZ;EAE/B,UAAIl+D,MAAM,GAAG,EAAb;;EAEA,WAAM,IAAI3P,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI6tE,SAAtB,EAAiC7tE,CAAC,EAAlC,EAAwC;EAEvC2P,QAAAA,MAAM,CAAC5c,IAAP,CAAa,KAAK66E,QAAL,CAAe5tE,CAAC,GAAG6tE,SAAnB,CAAb;EAEA;;EAED,aAAOl+D,MAAP;EAEA;;;;sCAIiBk+D,WAAY;EAE7B,UAAKA,SAAS,KAAK9zE,SAAnB,EAA+B8zE,SAAS,GAAG,CAAZ;EAE/B,UAAIl+D,MAAM,GAAG,EAAb;;EAEA,WAAM,IAAI3P,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI6tE,SAAtB,EAAiC7tE,CAAC,EAAlC,EAAwC;EAEvC2P,QAAAA,MAAM,CAAC5c,IAAP,CAAa,KAAK+6E,UAAL,CAAiB9tE,CAAC,GAAG6tE,SAArB,CAAb;EAEA;;EAED,aAAOl+D,MAAP;EAEA;;;;kCAIY;EAEZ,UAAIo+D,OAAO,GAAG,KAAKC,UAAL,EAAd;EACA,aAAOD,OAAO,CAAEA,OAAO,CAAC94E,MAAR,GAAiB,CAAnB,CAAd;EAEA;;;;iCAIW44E,WAAY;EAEvB,UAAKA,SAAS,KAAK9zE,SAAnB,EAA+B8zE,SAAS,GAAG,KAAKH,kBAAjB;;EAE/B,UAAK,KAAKO,eAAL,IACF,KAAKA,eAAL,CAAqBh5E,MAArB,KAAgC44E,SAAS,GAAG,CAD1C,IAEJ,CAAE,KAAKjrC,WAFR,EAEsB;EAErB,eAAO,KAAKqrC,eAAZ;EAEA;;EAED,WAAKrrC,WAAL,GAAmB,KAAnB;EAEA,UAAIkI,KAAK,GAAG,EAAZ;EACA,UAAIojC,OAAJ;EAAA,UAAa30E,IAAI,GAAG,KAAKq0E,QAAL,CAAe,CAAf,CAApB;EACA,UAAIxwE,CAAJ;EAAA,UAAO4nE,GAAG,GAAG,CAAb;EAEAl6B,MAAAA,KAAK,CAAC/3C,IAAN,CAAY,CAAZ;;EAEA,WAAMqK,CAAC,GAAG,CAAV,EAAaA,CAAC,IAAIywE,SAAlB,EAA6BzwE,CAAC,EAA9B,EAAoC;EAEnC8wE,QAAAA,OAAO,GAAG,KAAKN,QAAL,CAAexwE,CAAC,GAAGywE,SAAnB,CAAV;EACA7I,QAAAA,GAAG,IAAIkJ,OAAO,CAACvkD,UAAR,CAAoBpwB,IAApB,CAAP;EACAuxC,QAAAA,KAAK,CAAC/3C,IAAN,CAAYiyE,GAAZ;EACAzrE,QAAAA,IAAI,GAAG20E,OAAP;EAEA;;EAED,WAAKD,eAAL,GAAuBnjC,KAAvB;EAEA,aAAOA,KAAP,CA/BuB;EAiCvB;;;yCAEmB;EAEnB,WAAKlI,WAAL,GAAmB,IAAnB;EACA,WAAKorC,UAAL;EAEA;;;;qCAIezoC,GAAG5X,UAAW;EAE7B,UAAIwgD,UAAU,GAAG,KAAKH,UAAL,EAAjB;EAEA,UAAI74E,CAAC,GAAG,CAAR;EAAA,UAAW4K,EAAE,GAAGouE,UAAU,CAACl5E,MAA3B;EAEA,UAAIm5E,eAAJ,CAN6B;;EAQ7B,UAAKzgD,QAAL,EAAgB;EAEfygD,QAAAA,eAAe,GAAGzgD,QAAlB;EAEA,OAJD,MAIO;EAENygD,QAAAA,eAAe,GAAG7oC,CAAC,GAAG4oC,UAAU,CAAEpuE,EAAE,GAAG,CAAP,CAAhC;EAEA,OAhB4B;;;EAoB7B,UAAIsuE,GAAG,GAAG,CAAV;EAAA,UAAaC,IAAI,GAAGvuE,EAAE,GAAG,CAAzB;EAAA,UAA4BwuE,UAA5B;;EAEA,aAAQF,GAAG,IAAIC,IAAf,EAAsB;EAErBn5E,QAAAA,CAAC,GAAGP,IAAI,CAACqE,KAAL,CAAYo1E,GAAG,GAAG,CAAEC,IAAI,GAAGD,GAAT,IAAiB,CAAnC,CAAJ,CAFqB;;EAIrBE,QAAAA,UAAU,GAAGJ,UAAU,CAAEh5E,CAAF,CAAV,GAAkBi5E,eAA/B;;EAEA,YAAKG,UAAU,GAAG,CAAlB,EAAsB;EAErBF,UAAAA,GAAG,GAAGl5E,CAAC,GAAG,CAAV;EAEA,SAJD,MAIO,IAAKo5E,UAAU,GAAG,CAAlB,EAAsB;EAE5BD,UAAAA,IAAI,GAAGn5E,CAAC,GAAG,CAAX;EAEA,SAJM,MAIA;EAENm5E,UAAAA,IAAI,GAAGn5E,CAAP;EACA,gBAHM;EAON;EAED;;EAEDA,MAAAA,CAAC,GAAGm5E,IAAJ;;EAEA,UAAKH,UAAU,CAAEh5E,CAAF,CAAV,KAAoBi5E,eAAzB,EAA2C;EAE1C,eAAOj5E,CAAC,IAAK4K,EAAE,GAAG,CAAV,CAAR;EAEA,OArD4B;;;EAyD7B,UAAIyuE,YAAY,GAAGL,UAAU,CAAEh5E,CAAF,CAA7B;EACA,UAAIs5E,WAAW,GAAGN,UAAU,CAAEh5E,CAAC,GAAG,CAAN,CAA5B;EAEA,UAAIu5E,aAAa,GAAGD,WAAW,GAAGD,YAAlC,CA5D6B;;EAgE7B,UAAIG,eAAe,GAAG,CAAEP,eAAe,GAAGI,YAApB,IAAqCE,aAA3D,CAhE6B;;EAoE7B,UAAI58D,CAAC,GAAG,CAAE3c,CAAC,GAAGw5E,eAAN,KAA4B5uE,EAAE,GAAG,CAAjC,CAAR;EAEA,aAAO+R,CAAP;EAEA;EAGD;EACA;EACA;;;;iCAEaA,GAAI;EAEhB,UAAIsN,KAAK,GAAG,MAAZ;EACA,UAAIstC,EAAE,GAAG56C,CAAC,GAAGsN,KAAb;EACA,UAAIwvD,EAAE,GAAG98D,CAAC,GAAGsN,KAAb,CAJgB;;EAQhB,UAAKstC,EAAE,GAAG,CAAV,EAAcA,EAAE,GAAG,CAAL;EACd,UAAKkiB,EAAE,GAAG,CAAV,EAAcA,EAAE,GAAG,CAAL;EAEd,UAAIC,GAAG,GAAG,KAAKjB,QAAL,CAAelhB,EAAf,CAAV;EACA,UAAIoiB,GAAG,GAAG,KAAKlB,QAAL,CAAegB,EAAf,CAAV;EAEA,UAAIjH,GAAG,GAAGmH,GAAG,CAACx1E,KAAJ,GAAYwuB,GAAZ,CAAiB+mD,GAAjB,CAAV;EACA,aAAOlH,GAAG,CAAC3rD,SAAJ,EAAP;EAEA;;;mCAEcupB,GAAI;EAElB,UAAIzzB,CAAC,GAAG,KAAK67D,cAAL,CAAqBpoC,CAArB,CAAR;EACA,aAAO,KAAKwpC,UAAL,CAAiBj9D,CAAjB,CAAP;EAEA;;;0CAEqByqD,UAAUyS,QAAS;EAExC;EAEA,UAAI7mD,MAAM,GAAG,IAAI5N,OAAJ,EAAb;EAEA,UAAI00D,QAAQ,GAAG,EAAf;EACA,UAAI3vC,OAAO,GAAG,EAAd;EACA,UAAIoqC,SAAS,GAAG,EAAhB;EAEA,UAAI/B,GAAG,GAAG,IAAIptD,OAAJ,EAAV;EACA,UAAI20D,GAAG,GAAG,IAAI3vD,OAAJ,EAAV;EAEA,UAAIpqB,CAAJ,EAAOowC,CAAP,EAAUvoB,KAAV,CAbwC;;EAiBxC,WAAM7nB,CAAC,GAAG,CAAV,EAAaA,CAAC,IAAIonE,QAAlB,EAA4BpnE,CAAC,EAA7B,EAAmC;EAElCowC,QAAAA,CAAC,GAAGpwC,CAAC,GAAGonE,QAAR;EAEA0S,QAAAA,QAAQ,CAAE95E,CAAF,CAAR,GAAgB,KAAKg6E,YAAL,CAAmB5pC,CAAnB,CAAhB;EACA0pC,QAAAA,QAAQ,CAAE95E,CAAF,CAAR,CAAc6mB,SAAd;EAEA,OAxBuC;EA2BxC;;;EAEAsjB,MAAAA,OAAO,CAAE,CAAF,CAAP,GAAe,IAAI/kB,OAAJ,EAAf;EACAmvD,MAAAA,SAAS,CAAE,CAAF,CAAT,GAAiB,IAAInvD,OAAJ,EAAjB;EACA,UAAI1iB,GAAG,GAAGyH,MAAM,CAAC8vE,SAAjB;EACA,UAAIppD,EAAE,GAAGpxB,IAAI,CAACuK,GAAL,CAAU8vE,QAAQ,CAAE,CAAF,CAAR,CAAc/+D,CAAxB,CAAT;EACA,UAAI+V,EAAE,GAAGrxB,IAAI,CAACuK,GAAL,CAAU8vE,QAAQ,CAAE,CAAF,CAAR,CAAc9+D,CAAxB,CAAT;EACA,UAAIk/D,EAAE,GAAGz6E,IAAI,CAACuK,GAAL,CAAU8vE,QAAQ,CAAE,CAAF,CAAR,CAAc31D,CAAxB,CAAT;;EAEA,UAAK0M,EAAE,IAAInuB,GAAX,EAAiB;EAEhBA,QAAAA,GAAG,GAAGmuB,EAAN;EACAmC,QAAAA,MAAM,CAAC/e,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;EAEA;;EAED,UAAK6c,EAAE,IAAIpuB,GAAX,EAAiB;EAEhBA,QAAAA,GAAG,GAAGouB,EAAN;EACAkC,QAAAA,MAAM,CAAC/e,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;EAEA;;EAED,UAAKimE,EAAE,IAAIx3E,GAAX,EAAiB;EAEhBswB,QAAAA,MAAM,CAAC/e,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;EAEA;;EAEDu+D,MAAAA,GAAG,CAACrrD,YAAJ,CAAkB2yD,QAAQ,CAAE,CAAF,CAA1B,EAAiC9mD,MAAjC,EAA0CnM,SAA1C;EAEAsjB,MAAAA,OAAO,CAAE,CAAF,CAAP,CAAahjB,YAAb,CAA2B2yD,QAAQ,CAAE,CAAF,CAAnC,EAA0CtH,GAA1C;EACA+B,MAAAA,SAAS,CAAE,CAAF,CAAT,CAAeptD,YAAf,CAA6B2yD,QAAQ,CAAE,CAAF,CAArC,EAA4C3vC,OAAO,CAAE,CAAF,CAAnD,EA3DwC;;EAgExC,WAAMnqC,CAAC,GAAG,CAAV,EAAaA,CAAC,IAAIonE,QAAlB,EAA4BpnE,CAAC,EAA7B,EAAmC;EAElCmqC,QAAAA,OAAO,CAAEnqC,CAAF,CAAP,GAAemqC,OAAO,CAAEnqC,CAAC,GAAG,CAAN,CAAP,CAAiBmE,KAAjB,EAAf;EAEAowE,QAAAA,SAAS,CAAEv0E,CAAF,CAAT,GAAiBu0E,SAAS,CAAEv0E,CAAC,GAAG,CAAN,CAAT,CAAmBmE,KAAnB,EAAjB;EAEAquE,QAAAA,GAAG,CAACrrD,YAAJ,CAAkB2yD,QAAQ,CAAE95E,CAAC,GAAG,CAAN,CAA1B,EAAqC85E,QAAQ,CAAE95E,CAAF,CAA7C;;EAEA,YAAKwyE,GAAG,CAAC1yE,MAAJ,KAAeqK,MAAM,CAACkpD,OAA3B,EAAqC;EAEpCmf,UAAAA,GAAG,CAAC3rD,SAAJ;EAEAgB,UAAAA,KAAK,GAAGpoB,IAAI,CAACqoB,IAAL,CAAWlD,KAAK,CAACC,KAAN,CAAai1D,QAAQ,CAAE95E,CAAC,GAAG,CAAN,CAAR,CAAkB2nB,GAAlB,CAAuBmyD,QAAQ,CAAE95E,CAAF,CAA/B,CAAb,EAAqD,CAAE,CAAvD,EAA0D,CAA1D,CAAX,CAAR,CAJoC;;EAMpCmqC,UAAAA,OAAO,CAAEnqC,CAAF,CAAP,CAAa4mB,YAAb,CAA2BmzD,GAAG,CAACI,gBAAJ,CAAsB3H,GAAtB,EAA2B3qD,KAA3B,CAA3B;EAEA;;EAED0sD,QAAAA,SAAS,CAAEv0E,CAAF,CAAT,CAAemnB,YAAf,CAA6B2yD,QAAQ,CAAE95E,CAAF,CAArC,EAA4CmqC,OAAO,CAAEnqC,CAAF,CAAnD;EAEA,OApFuC;;;EAwFxC,UAAK65E,MAAM,KAAK,IAAhB,EAAuB;EAEtBhyD,QAAAA,KAAK,GAAGpoB,IAAI,CAACqoB,IAAL,CAAWlD,KAAK,CAACC,KAAN,CAAaslB,OAAO,CAAE,CAAF,CAAP,CAAaxiB,GAAb,CAAkBwiB,OAAO,CAAEi9B,QAAF,CAAzB,CAAb,EAAsD,CAAE,CAAxD,EAA2D,CAA3D,CAAX,CAAR;EACAv/C,QAAAA,KAAK,IAAIu/C,QAAT;;EAEA,YAAK0S,QAAQ,CAAE,CAAF,CAAR,CAAcnyD,GAAd,CAAmB6qD,GAAG,CAACrrD,YAAJ,CAAkBgjB,OAAO,CAAE,CAAF,CAAzB,EAAgCA,OAAO,CAAEi9B,QAAF,CAAvC,CAAnB,IAA6E,CAAlF,EAAsF;EAErFv/C,UAAAA,KAAK,GAAG,CAAEA,KAAV;EAEA;;EAED,aAAM7nB,CAAC,GAAG,CAAV,EAAaA,CAAC,IAAIonE,QAAlB,EAA4BpnE,CAAC,EAA7B,EAAmC;EAElC;EACAmqC,UAAAA,OAAO,CAAEnqC,CAAF,CAAP,CAAa4mB,YAAb,CAA2BmzD,GAAG,CAACI,gBAAJ,CAAsBL,QAAQ,CAAE95E,CAAF,CAA9B,EAAqC6nB,KAAK,GAAG7nB,CAA7C,CAA3B;EACAu0E,UAAAA,SAAS,CAAEv0E,CAAF,CAAT,CAAemnB,YAAf,CAA6B2yD,QAAQ,CAAE95E,CAAF,CAArC,EAA4CmqC,OAAO,CAAEnqC,CAAF,CAAnD;EAEA;EAED;;EAED,aAAO;EACN85E,QAAAA,QAAQ,EAAEA,QADJ;EAEN3vC,QAAAA,OAAO,EAAEA,OAFH;EAGNoqC,QAAAA,SAAS,EAAEA;EAHL,OAAP;EAMA;;;8BAEQ;EAER,aAAO,IAAI,KAAK1vE,WAAT,GAAuBH,IAAvB,CAA6B,IAA7B,CAAP;EAEA;;;2BAEMgpC,QAAS;EAEf,WAAK6qC,kBAAL,GAA0B7qC,MAAM,CAAC6qC,kBAAjC;EAEA,aAAO,IAAP;EAEA;;;+BAES;EAET,UAAIhxE,IAAI,GAAG;EACV6yE,QAAAA,QAAQ,EAAE;EACTx6D,UAAAA,OAAO,EAAE,GADA;EAET9X,UAAAA,IAAI,EAAE,OAFG;EAGTuyE,UAAAA,SAAS,EAAE;EAHF;EADA,OAAX;EAQA9yE,MAAAA,IAAI,CAACgxE,kBAAL,GAA0B,KAAKA,kBAA/B;EACAhxE,MAAAA,IAAI,CAACO,IAAL,GAAY,KAAKA,IAAjB;EAEA,aAAOP,IAAP;EAEA;;;+BAEU+yE,MAAO;EAEjB,WAAK/B,kBAAL,GAA0B+B,IAAI,CAAC/B,kBAA/B;EAEA,aAAO,IAAP;EAEA;;;;;;MC5ZIgC;;;;;EACF,wBAAYC,EAAZ,EAAgBC,EAAhB,EAAoBC,OAApB,EAA6BC,OAA7B,EAAsCC,WAAtC,EAAmDC,SAAnD,EAA8DC,UAA9D,EAA0EC,SAA1E,EAAqF;EAAA;;EAAA;;EAEjF;EAEA,UAAKjzE,IAAL,GAAY,cAAZ;EAEA,UAAK0yE,EAAL,GAAUA,EAAE,IAAI,CAAhB;EACA,UAAKC,EAAL,GAAUA,EAAE,IAAI,CAAhB;EAEA,UAAKC,OAAL,GAAeA,OAAO,IAAI,CAA1B;EACA,UAAKC,OAAL,GAAeA,OAAO,IAAI,CAA1B;EAEA,UAAKC,WAAL,GAAmBA,WAAW,IAAI,CAAlC;EACA,UAAKC,SAAL,GAAiBA,SAAS,IAAI,IAAIp7E,IAAI,CAACwF,EAAvC;EAEA,UAAK61E,UAAL,GAAkBA,UAAU,IAAI,KAAhC;EAEA,UAAKC,SAAL,GAAiBA,SAAS,IAAI,CAA9B;EAjBiF;EAmBpF;;;;+BAKQp+D,GAAG+V,gBAAgB;EAExB,UAAI/X,KAAK,GAAG+X,cAAc,IAAI,IAAImW,OAAJ,EAA9B;EAEA,UAAImyC,KAAK,GAAGv7E,IAAI,CAACwF,EAAL,GAAU,CAAtB;EACA,UAAIg2E,UAAU,GAAG,KAAKJ,SAAL,GAAiB,KAAKD,WAAvC;EACA,UAAIM,UAAU,GAAGz7E,IAAI,CAACuK,GAAL,CAASixE,UAAT,IAAuB9wE,MAAM,CAACkpD,OAA/C,CANwB;;EASxB,aAAO4nB,UAAU,GAAG,CAApB;EAAuBA,QAAAA,UAAU,IAAID,KAAd;EAAvB;;EACA,aAAOC,UAAU,GAAGD,KAApB;EAA2BC,QAAAA,UAAU,IAAID,KAAd;EAA3B;;EAEA,UAAIC,UAAU,GAAG9wE,MAAM,CAACkpD,OAAxB,EAAiC;EAE7B,YAAI6nB,UAAJ,EAAgB;EAEZD,UAAAA,UAAU,GAAG,CAAb;EAEH,SAJD,MAIO;EAEHA,UAAAA,UAAU,GAAGD,KAAb;EAEH;EAEJ;;EAED,UAAI,KAAKF,UAAL,KAAoB,IAApB,IAA4B,CAACI,UAAjC,EAA6C;EAEzC,YAAID,UAAU,KAAKD,KAAnB,EAA0B;EAEtBC,UAAAA,UAAU,GAAG,CAAED,KAAf;EAEH,SAJD,MAIO;EAEHC,UAAAA,UAAU,GAAGA,UAAU,GAAGD,KAA1B;EAEH;EAEJ;;EAED,UAAI9iE,KAAK,GAAG,KAAK0iE,WAAL,GAAmBj+D,CAAC,GAAGs+D,UAAnC;EACA,UAAIlgE,CAAC,GAAG,KAAKy/D,EAAL,GAAU,KAAKE,OAAL,GAAej7E,IAAI,CAAC8X,GAAL,CAASW,KAAT,CAAjC;EACA,UAAI8C,CAAC,GAAG,KAAKy/D,EAAL,GAAU,KAAKE,OAAL,GAAel7E,IAAI,CAACgY,GAAL,CAASS,KAAT,CAAjC;;EAEA,UAAI,KAAK6iE,SAAL,KAAmB,CAAvB,EAA0B;EAEtB,YAAIxjE,GAAG,GAAG9X,IAAI,CAAC8X,GAAL,CAAS,KAAKwjE,SAAd,CAAV;EACA,YAAItjE,GAAG,GAAGhY,IAAI,CAACgY,GAAL,CAAS,KAAKsjE,SAAd,CAAV;EAEA,YAAIlqD,EAAE,GAAG9V,CAAC,GAAG,KAAKy/D,EAAlB;EACA,YAAI1pD,EAAE,GAAG9V,CAAC,GAAG,KAAKy/D,EAAlB,CANsB;;EAStB1/D,QAAAA,CAAC,GAAG8V,EAAE,GAAGtZ,GAAL,GAAWuZ,EAAE,GAAGrZ,GAAhB,GAAsB,KAAK+iE,EAA/B;EACAx/D,QAAAA,CAAC,GAAG6V,EAAE,GAAGpZ,GAAL,GAAWqZ,EAAE,GAAGvZ,GAAhB,GAAsB,KAAKkjE,EAA/B;EAEH;;EAED,aAAO9/D,KAAK,CAAC1G,GAAN,CAAU8G,CAAV,EAAaC,CAAb,CAAP;EAEH;;;2BACI0yB,QAAQ;EAET4qC,MAAAA,KAAK,CAAC/6E,SAAN,CAAgBmH,IAAhB,CAAqBvE,IAArB,CAA0B,IAA1B,EAAgCutC,MAAhC;EAEA,WAAK8sC,EAAL,GAAU9sC,MAAM,CAAC8sC,EAAjB;EACA,WAAKC,EAAL,GAAU/sC,MAAM,CAAC+sC,EAAjB;EAEA,WAAKC,OAAL,GAAehtC,MAAM,CAACgtC,OAAtB;EACA,WAAKC,OAAL,GAAejtC,MAAM,CAACitC,OAAtB;EAEA,WAAKC,WAAL,GAAmBltC,MAAM,CAACktC,WAA1B;EACA,WAAKC,SAAL,GAAiBntC,MAAM,CAACmtC,SAAxB;EAEA,WAAKC,UAAL,GAAkBptC,MAAM,CAACotC,UAAzB;EAEA,WAAKC,SAAL,GAAiBrtC,MAAM,CAACqtC,SAAxB;EAEA,aAAO,IAAP;EAEH;;;0BApFoB;EACjB,aAAO,IAAP;EACH;;;;IAvBsBzC;;MCDrB6C;;;;;EACF,oBAAYX,EAAZ,EAAgBC,EAAhB,EAAoBW,OAApB,EAA6BR,WAA7B,EAA0CC,SAA1C,EAAqDC,UAArD,EAAiE;EAAA;;EAAA;;EAE7D,kFAAMN,EAAN,EAAUC,EAAV,EAAcW,OAAd,EAAuBA,OAAvB,EAAgCR,WAAhC,EAA6CC,SAA7C,EAAwDC,UAAxD;EAEA,UAAKhzE,IAAL,GAAY,UAAZ;EAJ6D;EAMhE;;;;0BACgB;EACb,aAAO,IAAP;EACH;;;;IAVkByyE;;ECAvB;;;;;;;;;;;EAYA;;;;;;;;;;EAUA,SAASc,SAAT,GAAqB;EAEjB,MAAIC,EAAE,GAAG,CAAT;EAAA,MAAYxrB,EAAE,GAAG,CAAjB;EAAA,MAAoBC,EAAE,GAAG,CAAzB;EAAA,MAA4BC,EAAE,GAAG,CAAjC;EAEH;;;;;;;;;EAQG,WAAS5G,IAAT,CAAcuJ,EAAd,EAAkBI,EAAlB,EAAsBuE,EAAtB,EAA0BC,EAA1B,EAA8B;EAE1B+jB,IAAAA,EAAE,GAAG3oB,EAAL;EACA7C,IAAAA,EAAE,GAAGwH,EAAL;EACAvH,IAAAA,EAAE,GAAG,CAAE,CAAF,GAAM4C,EAAN,GAAW,IAAII,EAAf,GAAoB,IAAIuE,EAAxB,GAA6BC,EAAlC;EACAvH,IAAAA,EAAE,GAAG,IAAI2C,EAAJ,GAAS,IAAII,EAAb,GAAkBuE,EAAlB,GAAuBC,EAA5B;EAEH;;EAED,SAAO;EAEHgkB,IAAAA,cAAc,EAAE,wBAAU5oB,EAAV,EAAcI,EAAd,EAAkB9lC,EAAlB,EAAsBuuD,EAAtB,EAA0BC,OAA1B,EAAmC;EAE/CryB,MAAAA,IAAI,CAAC2J,EAAD,EAAK9lC,EAAL,EAASwuD,OAAO,IAAIxuD,EAAE,GAAG0lC,EAAT,CAAhB,EAA8B8oB,OAAO,IAAID,EAAE,GAAGzoB,EAAT,CAArC,CAAJ;EAEH,KANE;EAQH2oB,IAAAA,wBAAwB,EAAE,kCAAU/oB,EAAV,EAAcI,EAAd,EAAkB9lC,EAAlB,EAAsBuuD,EAAtB,EAA0BG,GAA1B,EAA+BC,GAA/B,EAAoCC,GAApC,EAAyC;EAE/D;EACA,UAAItkB,EAAE,GAAG,CAACxE,EAAE,GAAGJ,EAAN,IAAYgpB,GAAZ,GAAkB,CAAC1uD,EAAE,GAAG0lC,EAAN,KAAagpB,GAAG,GAAGC,GAAnB,CAAlB,GAA4C,CAAC3uD,EAAE,GAAG8lC,EAAN,IAAY6oB,GAAjE;EACA,UAAInC,EAAE,GAAG,CAACxsD,EAAE,GAAG8lC,EAAN,IAAY6oB,GAAZ,GAAkB,CAACJ,EAAE,GAAGzoB,EAAN,KAAa6oB,GAAG,GAAGC,GAAnB,CAAlB,GAA4C,CAACL,EAAE,GAAGvuD,EAAN,IAAY4uD,GAAjE,CAJ+D;;EAO/DtkB,MAAAA,EAAE,IAAIqkB,GAAN;EACAnC,MAAAA,EAAE,IAAImC,GAAN;EAEAxyB,MAAAA,IAAI,CAAC2J,EAAD,EAAK9lC,EAAL,EAASsqC,EAAT,EAAakiB,EAAb,CAAJ;EAEH,KApBE;EAsBHqC,IAAAA,IAAI,EAAE,cAAUn/D,CAAV,EAAa;EAEf,UAAI88D,EAAE,GAAG98D,CAAC,GAAGA,CAAb;EACA,UAAIo/D,EAAE,GAAGtC,EAAE,GAAG98D,CAAd;EACA,aAAO2+D,EAAE,GAAGxrB,EAAE,GAAGnzC,CAAV,GAAcozC,EAAE,GAAG0pB,EAAnB,GAAwBzpB,EAAE,GAAG+rB,EAApC;EAEH;EA5BE,GAAP;EAgCH;;;EAID,IAAI9rD,GAAG,GAAG,IAAI7K,OAAJ,EAAV;EACA,IAAI8pD,EAAE,GAAG,IAAImM,SAAJ,EAAT;EAAA,IAA0BlM,EAAE,GAAG,IAAIkM,SAAJ,EAA/B;EAAA,IAAgDW,EAAE,GAAG,IAAIX,SAAJ,EAArD;;MAGMY;;;;;EACF,8BAAmF;EAAA;;EAAA,QAAvEzhE,MAAuE,uEAA9D,EAA8D;EAAA,QAA1Dq/D,MAA0D,uEAAjD,KAAiD;EAAA,QAA1CqC,SAA0C,uEAA9B,aAA8B;EAAA,QAAfT,OAAe,uEAAL,GAAK;;EAAA;;EAC/E;EACA,UAAK3zE,IAAL,GAAY,kBAAZ;EAEA,UAAK0S,MAAL,GAAcA,MAAd;EACA,UAAKq/D,MAAL,GAAcA,MAAd;EACA,UAAKqC,SAAL,GAAiBA,SAAjB;EACA,UAAKT,OAAL,GAAeA,OAAf;EAP+E;EAQlF;;;;iCAK+C;EAAA,UAAvC9+D,CAAuC,uEAAnC,CAAmC;EAAA,UAAhC+V,cAAgC,uEAAf,IAAItN,OAAJ,EAAe;EAE5C,UAAIzK,KAAK,GAAG+X,cAAZ;EAEA,UAAIlY,MAAM,GAAG,KAAKA,MAAlB;EACA,UAAIxO,CAAC,GAAGwO,MAAM,CAAC1a,MAAf;EAEA,UAAImI,CAAC,GAAG,CAAC+D,CAAC,IAAI,KAAK6tE,MAAL,GAAc,CAAd,GAAkB,CAAtB,CAAF,IAA8Bl9D,CAAtC;EACA,UAAIw/D,QAAQ,GAAG18E,IAAI,CAACqE,KAAL,CAAWmE,CAAX,CAAf;EACA,UAAIm0E,MAAM,GAAGn0E,CAAC,GAAGk0E,QAAjB;;EAEA,UAAI,KAAKtC,MAAT,EAAiB;EAEbsC,QAAAA,QAAQ,IAAIA,QAAQ,GAAG,CAAX,GAAe,CAAf,GAAmB,CAAC18E,IAAI,CAACqE,KAAL,CAAWrE,IAAI,CAACuK,GAAL,CAASmyE,QAAT,IAAqBnwE,CAAhC,IAAqC,CAAtC,IAA2CA,CAA1E;EAEH,OAJD,MAIO,IAAIowE,MAAM,KAAK,CAAX,IAAgBD,QAAQ,KAAKnwE,CAAC,GAAG,CAArC,EAAwC;EAE3CmwE,QAAAA,QAAQ,GAAGnwE,CAAC,GAAG,CAAf;EACAowE,QAAAA,MAAM,GAAG,CAAT;EAEH;;EAED,UAAI1lD,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBC,EAAhB,CAtB4C;;EAwB5C,UAAI,KAAKgjD,MAAL,IAAesC,QAAQ,GAAG,CAA9B,EAAiC;EAE7BzlD,QAAAA,EAAE,GAAGlc,MAAM,CAAC,CAAC2hE,QAAQ,GAAG,CAAZ,IAAiBnwE,CAAlB,CAAX;EAEH,OAJD,MAIO;EAEH;EACAikB,QAAAA,GAAG,CAACtK,UAAJ,CAAenL,MAAM,CAAC,CAAD,CAArB,EAA0BA,MAAM,CAAC,CAAD,CAAhC,EAAqC0M,GAArC,CAAyC1M,MAAM,CAAC,CAAD,CAA/C;EACAkc,QAAAA,EAAE,GAAGzG,GAAL;EAEH;;EAED0G,MAAAA,EAAE,GAAGnc,MAAM,CAAC2hE,QAAQ,GAAGnwE,CAAZ,CAAX;EACA4qB,MAAAA,EAAE,GAAGpc,MAAM,CAAC,CAAC2hE,QAAQ,GAAG,CAAZ,IAAiBnwE,CAAlB,CAAX;;EAEA,UAAI,KAAK6tE,MAAL,IAAesC,QAAQ,GAAG,CAAX,GAAenwE,CAAlC,EAAqC;EAEjC6qB,QAAAA,EAAE,GAAGrc,MAAM,CAAC,CAAC2hE,QAAQ,GAAG,CAAZ,IAAiBnwE,CAAlB,CAAX;EAEH,OAJD,MAIO;EAEH;EACAikB,QAAAA,GAAG,CAACtK,UAAJ,CAAenL,MAAM,CAACxO,CAAC,GAAG,CAAL,CAArB,EAA8BwO,MAAM,CAACxO,CAAC,GAAG,CAAL,CAApC,EAA6Ckb,GAA7C,CAAiD1M,MAAM,CAACxO,CAAC,GAAG,CAAL,CAAvD;EACA6qB,QAAAA,EAAE,GAAG5G,GAAL;EAEH;;EAED,UAAI,KAAKisD,SAAL,KAAmB,aAAnB,IAAoC,KAAKA,SAAL,KAAmB,SAA3D,EAAsE;EAElE;EACA,YAAIx8E,GAAG,GAAG,KAAKw8E,SAAL,KAAmB,SAAnB,GAA+B,GAA/B,GAAqC,IAA/C;EACA,YAAIP,GAAG,GAAGl8E,IAAI,CAACC,GAAL,CAASg3B,EAAE,CAAC3O,iBAAH,CAAqB4O,EAArB,CAAT,EAAmCj3B,GAAnC,CAAV;EACA,YAAIk8E,GAAG,GAAGn8E,IAAI,CAACC,GAAL,CAASi3B,EAAE,CAAC5O,iBAAH,CAAqB6O,EAArB,CAAT,EAAmCl3B,GAAnC,CAAV;EACA,YAAIm8E,GAAG,GAAGp8E,IAAI,CAACC,GAAL,CAASk3B,EAAE,CAAC7O,iBAAH,CAAqB8O,EAArB,CAAT,EAAmCn3B,GAAnC,CAAV,CANkE;;EASlE,YAAIk8E,GAAG,GAAG,IAAV,EAAgBA,GAAG,GAAG,GAAN;EAChB,YAAID,GAAG,GAAG,IAAV,EAAgBA,GAAG,GAAGC,GAAN;EAChB,YAAIC,GAAG,GAAG,IAAV,EAAgBA,GAAG,GAAGD,GAAN;EAEhB1M,QAAAA,EAAE,CAACwM,wBAAH,CAA4BhlD,EAAE,CAAC3b,CAA/B,EAAkC4b,EAAE,CAAC5b,CAArC,EAAwC6b,EAAE,CAAC7b,CAA3C,EAA8C8b,EAAE,CAAC9b,CAAjD,EAAoD4gE,GAApD,EAAyDC,GAAzD,EAA8DC,GAA9D;EACA1M,QAAAA,EAAE,CAACuM,wBAAH,CAA4BhlD,EAAE,CAAC1b,CAA/B,EAAkC2b,EAAE,CAAC3b,CAArC,EAAwC4b,EAAE,CAAC5b,CAA3C,EAA8C6b,EAAE,CAAC7b,CAAjD,EAAoD2gE,GAApD,EAAyDC,GAAzD,EAA8DC,GAA9D;EACAG,QAAAA,EAAE,CAACN,wBAAH,CAA4BhlD,EAAE,CAACvS,CAA/B,EAAkCwS,EAAE,CAACxS,CAArC,EAAwCyS,EAAE,CAACzS,CAA3C,EAA8C0S,EAAE,CAAC1S,CAAjD,EAAoDw3D,GAApD,EAAyDC,GAAzD,EAA8DC,GAA9D;EAEH,OAjBD,MAiBO,IAAI,KAAKK,SAAL,KAAmB,YAAvB,EAAqC;EAExChN,QAAAA,EAAE,CAACqM,cAAH,CAAkB7kD,EAAE,CAAC3b,CAArB,EAAwB4b,EAAE,CAAC5b,CAA3B,EAA8B6b,EAAE,CAAC7b,CAAjC,EAAoC8b,EAAE,CAAC9b,CAAvC,EAA0C,KAAK0gE,OAA/C;EACAtM,QAAAA,EAAE,CAACoM,cAAH,CAAkB7kD,EAAE,CAAC1b,CAArB,EAAwB2b,EAAE,CAAC3b,CAA3B,EAA8B4b,EAAE,CAAC5b,CAAjC,EAAoC6b,EAAE,CAAC7b,CAAvC,EAA0C,KAAKygE,OAA/C;EACAO,QAAAA,EAAE,CAACT,cAAH,CAAkB7kD,EAAE,CAACvS,CAArB,EAAwBwS,EAAE,CAACxS,CAA3B,EAA8ByS,EAAE,CAACzS,CAAjC,EAAoC0S,EAAE,CAAC1S,CAAvC,EAA0C,KAAKs3D,OAA/C;EAEH;;EAED9gE,MAAAA,KAAK,CAAC1G,GAAN,CACIi7D,EAAE,CAAC4M,IAAH,CAAQM,MAAR,CADJ,EAEIjN,EAAE,CAAC2M,IAAH,CAAQM,MAAR,CAFJ,EAGIJ,EAAE,CAACF,IAAH,CAAQM,MAAR,CAHJ;EAMA,aAAOzhE,KAAP;EAEH;;;2BAEI+yB,QAAQ;EAET,iFAAWA,MAAX;;EAEA,WAAKlzB,MAAL,GAAc,EAAd;;EAEA,WAAK,IAAIxa,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG0hC,MAAM,CAAClzB,MAAP,CAAc1a,MAAlC,EAA0CE,CAAC,GAAGgM,CAA9C,EAAiDhM,CAAC,EAAlD,EAAsD;EAElD,YAAI2a,KAAK,GAAG+yB,MAAM,CAAClzB,MAAP,CAAcxa,CAAd,CAAZ;EAEA,aAAKwa,MAAL,CAAY5c,IAAZ,CAAiB+c,KAAK,CAACxW,KAAN,EAAjB;EAEH;;EAED,WAAK01E,MAAL,GAAcnsC,MAAM,CAACmsC,MAArB;EACA,WAAKqC,SAAL,GAAiBxuC,MAAM,CAACwuC,SAAxB;EACA,WAAKT,OAAL,GAAe/tC,MAAM,CAAC+tC,OAAtB;EAEA,aAAO,IAAP;EAEH;;;+BACQ;EAEL,UAAIl0E,IAAI,+EAAR;;EAEAA,MAAAA,IAAI,CAACiT,MAAL,GAAc,EAAd;;EAEA,WAAK,IAAIxa,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG,KAAKwO,MAAL,CAAY1a,MAAhC,EAAwCE,CAAC,GAAGgM,CAA5C,EAA+ChM,CAAC,EAAhD,EAAoD;EAEhD,YAAI2a,KAAK,GAAG,KAAKH,MAAL,CAAYxa,CAAZ,CAAZ;EACAuH,QAAAA,IAAI,CAACiT,MAAL,CAAY5c,IAAZ,CAAiB+c,KAAK,CAACg+B,OAAN,EAAjB;EAEH;;EAEDpxC,MAAAA,IAAI,CAACsyE,MAAL,GAAc,KAAKA,MAAnB;EACAtyE,MAAAA,IAAI,CAAC20E,SAAL,GAAiB,KAAKA,SAAtB;EACA30E,MAAAA,IAAI,CAACk0E,OAAL,GAAe,KAAKA,OAApB;EAEA,aAAOl0E,IAAP;EAEH;;;+BACQ+yE,MAAM;EAEX,qFAAeA,IAAf;;EAEA,WAAK9/D,MAAL,GAAc,EAAd;;EAEA,WAAK,IAAIxa,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGsuE,IAAI,CAAC9/D,MAAL,CAAY1a,MAAhC,EAAwCE,CAAC,GAAGgM,CAA5C,EAA+ChM,CAAC,EAAhD,EAAoD;EAEhD,YAAI2a,KAAK,GAAG2/D,IAAI,CAAC9/D,MAAL,CAAYxa,CAAZ,CAAZ;EACA,aAAKwa,MAAL,CAAY5c,IAAZ,CAAiB,IAAIwnB,OAAJ,GAAcqD,SAAd,CAAwB9N,KAAxB,CAAjB;EAEH;;EAED,WAAKk/D,MAAL,GAAcS,IAAI,CAACT,MAAnB;EACA,WAAKqC,SAAL,GAAiB5B,IAAI,CAAC4B,SAAtB;EACA,WAAKT,OAAL,GAAenB,IAAI,CAACmB,OAApB;EAEA,aAAO,IAAP;EAEH;;;6BAtJwB;EACrB,aAAO,IAAP;EACH;;;;IAZ0BnD;;ECtF/B;;;;;;EAOA,SAAS+D,UAAT,CAAoB1/D,CAApB,EAAuB+Z,EAAvB,EAA2BC,EAA3B,EAA+BC,EAA/B,EAAmCC,EAAnC,EAAuC;EAEnC,MAAI2/B,EAAE,GAAG,CAAC5/B,EAAE,GAAGF,EAAN,IAAY,GAArB;EACA,MAAI1P,EAAE,GAAG,CAAC6P,EAAE,GAAGF,EAAN,IAAY,GAArB;EACA,MAAI8iD,EAAE,GAAG98D,CAAC,GAAGA,CAAb;EACA,MAAIo/D,EAAE,GAAGp/D,CAAC,GAAG88D,EAAb;EACA,SAAO,CAAC,IAAI9iD,EAAJ,GAAS,IAAIC,EAAb,GAAkB4/B,EAAlB,GAAuBxvC,EAAxB,IAA8B+0D,EAA9B,GAAmC,CAAC,CAAE,CAAF,GAAMplD,EAAN,GAAW,IAAIC,EAAf,GAAoB,IAAI4/B,EAAxB,GAA6BxvC,EAA9B,IAAoCyyD,EAAvE,GAA4EjjB,EAAE,GAAG75C,CAAjF,GAAqFga,EAA5F;EAEH;;;EAID,SAAS2lD,iBAAT,CAA2B3/D,CAA3B,EAA8B1U,CAA9B,EAAiC;EAE7B,MAAI++D,CAAC,GAAG,IAAIrqD,CAAZ;EACA,SAAOqqD,CAAC,GAAGA,CAAJ,GAAQ/+D,CAAf;EAEH;;EAED,SAASs0E,iBAAT,CAA2B5/D,CAA3B,EAA8B1U,CAA9B,EAAiC;EAE7B,SAAO,KAAK,IAAI0U,CAAT,IAAcA,CAAd,GAAkB1U,CAAzB;EAEH;;EAED,SAASu0E,iBAAT,CAA2B7/D,CAA3B,EAA8B1U,CAA9B,EAAiC;EAE7B,SAAO0U,CAAC,GAAGA,CAAJ,GAAQ1U,CAAf;EAEH;;EAED,SAASw0E,eAAT,CAAyB9/D,CAAzB,EAA4B+Z,EAA5B,EAAgCC,EAAhC,EAAoCC,EAApC,EAAwC;EAEpC,SAAO0lD,iBAAiB,CAAC3/D,CAAD,EAAI+Z,EAAJ,CAAjB,GAA2B6lD,iBAAiB,CAAC5/D,CAAD,EAAIga,EAAJ,CAA5C,GACH6lD,iBAAiB,CAAC7/D,CAAD,EAAIia,EAAJ,CADrB;EAGH;;;EAID,SAAS8lD,aAAT,CAAuB//D,CAAvB,EAA0B1U,CAA1B,EAA6B;EAEzB,MAAI++D,CAAC,GAAG,IAAIrqD,CAAZ;EACA,SAAOqqD,CAAC,GAAGA,CAAJ,GAAQA,CAAR,GAAY/+D,CAAnB;EAEH;;EAED,SAAS00E,aAAT,CAAuBhgE,CAAvB,EAA0B1U,CAA1B,EAA6B;EAEzB,MAAI++D,CAAC,GAAG,IAAIrqD,CAAZ;EACA,SAAO,IAAIqqD,CAAJ,GAAQA,CAAR,GAAYrqD,CAAZ,GAAgB1U,CAAvB;EAEH;;EAED,SAAS20E,aAAT,CAAuBjgE,CAAvB,EAA0B1U,CAA1B,EAA6B;EAEzB,SAAO,KAAK,IAAI0U,CAAT,IAAcA,CAAd,GAAkBA,CAAlB,GAAsB1U,CAA7B;EAEH;;EAED,SAAS40E,aAAT,CAAuBlgE,CAAvB,EAA0B1U,CAA1B,EAA6B;EAEzB,SAAO0U,CAAC,GAAGA,CAAJ,GAAQA,CAAR,GAAY1U,CAAnB;EAEH;;EAED,SAAS60E,WAAT,CAAqBngE,CAArB,EAAwB+Z,EAAxB,EAA4BC,EAA5B,EAAgCC,EAAhC,EAAoCC,EAApC,EAAwC;EAEpC,SAAO6lD,aAAa,CAAC//D,CAAD,EAAI+Z,EAAJ,CAAb,GAAuBimD,aAAa,CAAChgE,CAAD,EAAIga,EAAJ,CAApC,GAA8CimD,aAAa,CAACjgE,CAAD,EAAIia,EAAJ,CAA3D,GACHimD,aAAa,CAAClgE,CAAD,EAAIka,EAAJ,CADjB;EAGH;;MCzEKkmD;;;;;EAEF,4BAAYvmB,EAAZ,EAAgBxvC,EAAhB,EAAoBC,EAApB,EAAwBqO,EAAxB,EAA4B;EAAA;;EAAA;;EACxB;EAEA,UAAKxtB,IAAL,GAAY,kBAAZ;EAEA,UAAK0uD,EAAL,GAAUA,EAAE,IAAI,IAAI3tB,OAAJ,EAAhB;EACA,UAAK7hB,EAAL,GAAUA,EAAE,IAAI,IAAI6hB,OAAJ,EAAhB;EACA,UAAK5hB,EAAL,GAAUA,EAAE,IAAI,IAAI4hB,OAAJ,EAAhB;EACA,UAAKvT,EAAL,GAAUA,EAAE,IAAI,IAAIuT,OAAJ,EAAhB;EARwB;EAU3B;;;;+BAIQlsB,GAAG+V,gBAAgB;EAExB,UAAI/X,KAAK,GAAG+X,cAAc,IAAI,IAAImW,OAAJ,EAA9B;EAEA,UAAI2tB,EAAE,GAAG,KAAKA,EAAd;EAAA,UAAkBxvC,EAAE,GAAG,KAAKA,EAA5B;EAAA,UAAgCC,EAAE,GAAG,KAAKA,EAA1C;EAAA,UAA8CqO,EAAE,GAAG,KAAKA,EAAxD;EAEA3a,MAAAA,KAAK,CAAC1G,GAAN,CACI6oE,WAAW,CAACngE,CAAD,EAAI65C,EAAE,CAACz7C,CAAP,EAAUiM,EAAE,CAACjM,CAAb,EAAgBkM,EAAE,CAAClM,CAAnB,EAAsBua,EAAE,CAACva,CAAzB,CADf,EAEI+hE,WAAW,CAACngE,CAAD,EAAI65C,EAAE,CAACx7C,CAAP,EAAUgM,EAAE,CAAChM,CAAb,EAAgBiM,EAAE,CAACjM,CAAnB,EAAsBsa,EAAE,CAACta,CAAzB,CAFf;EAKA,aAAOL,KAAP;EAEH;;;2BACI+yB,QAAQ;EAET4qC,MAAAA,KAAK,CAAC/6E,SAAN,CAAgBmH,IAAhB,CAAqBvE,IAArB,CAA0B,IAA1B,EAAgCutC,MAAhC;EAEA,WAAK8oB,EAAL,CAAQ9xD,IAAR,CAAagpC,MAAM,CAAC8oB,EAApB;EACA,WAAKxvC,EAAL,CAAQtiB,IAAR,CAAagpC,MAAM,CAAC1mB,EAApB;EACA,WAAKC,EAAL,CAAQviB,IAAR,CAAagpC,MAAM,CAACzmB,EAApB;EACA,WAAKqO,EAAL,CAAQ5wB,IAAR,CAAagpC,MAAM,CAACpY,EAApB;EAEA,aAAO,IAAP;EAEH;;;0BA5BwB;EACrB,aAAO,IAAP;EACH;;;;IAf0BgjD;;MCAzB0E;;;;;EACF,6BAAYxmB,EAAZ,EAAgBxvC,EAAhB,EAAoBC,EAApB,EAAwBqO,EAAxB,EAA4B;EAAA;;EAAA;;EAExB;EAEA,UAAKxtB,IAAL,GAAY,mBAAZ;EAEA,UAAK0uD,EAAL,GAAUA,EAAE,IAAI,IAAIpxC,OAAJ,EAAhB;EACA,UAAK4B,EAAL,GAAUA,EAAE,IAAI,IAAI5B,OAAJ,EAAhB;EACA,UAAK6B,EAAL,GAAUA,EAAE,IAAI,IAAI7B,OAAJ,EAAhB;EACA,UAAKkQ,EAAL,GAAUA,EAAE,IAAI,IAAIlQ,OAAJ,EAAhB;EATwB;EAW3B;;;;+BAIQzI,GAAG+V,gBAAgB;EAExB,UAAI/X,KAAK,GAAG+X,cAAc,IAAI,IAAItN,OAAJ,EAA9B;EAEA,UAAIoxC,EAAE,GAAG,KAAKA,EAAd;EAAA,UAAkBxvC,EAAE,GAAG,KAAKA,EAA5B;EAAA,UAAgCC,EAAE,GAAG,KAAKA,EAA1C;EAAA,UAA8CqO,EAAE,GAAG,KAAKA,EAAxD;EAEA3a,MAAAA,KAAK,CAAC1G,GAAN,CACI6oE,WAAW,CAACngE,CAAD,EAAI65C,EAAE,CAACz7C,CAAP,EAAUiM,EAAE,CAACjM,CAAb,EAAgBkM,EAAE,CAAClM,CAAnB,EAAsBua,EAAE,CAACva,CAAzB,CADf,EAEI+hE,WAAW,CAACngE,CAAD,EAAI65C,EAAE,CAACx7C,CAAP,EAAUgM,EAAE,CAAChM,CAAb,EAAgBiM,EAAE,CAACjM,CAAnB,EAAsBsa,EAAE,CAACta,CAAzB,CAFf,EAGI8hE,WAAW,CAACngE,CAAD,EAAI65C,EAAE,CAACryC,CAAP,EAAU6C,EAAE,CAAC7C,CAAb,EAAgB8C,EAAE,CAAC9C,CAAnB,EAAsBmR,EAAE,CAACnR,CAAzB,CAHf;EAMA,aAAOxJ,KAAP;EAEH;;;2BACI+yB,QAAQ;EAET,kFAAWA,MAAX;;EAEA,WAAK8oB,EAAL,CAAQ9xD,IAAR,CAAagpC,MAAM,CAAC8oB,EAApB;EACA,WAAKxvC,EAAL,CAAQtiB,IAAR,CAAagpC,MAAM,CAAC1mB,EAApB;EACA,WAAKC,EAAL,CAAQviB,IAAR,CAAagpC,MAAM,CAACzmB,EAApB;EACA,WAAKqO,EAAL,CAAQ5wB,IAAR,CAAagpC,MAAM,CAACpY,EAApB;EAEA,aAAO,IAAP;EAEH;;;6BA7ByB;EACtB,aAAO,IAAP;EACH;;;;IAf2BgjD;;MCD1B2E;;;;;EAEF,qBAAYj2D,EAAZ,EAAgBC,EAAhB,EAAoB;EAAA;;EAAA;;EAEhB;EACA,UAAKnf,IAAL,GAAY,WAAZ;EAEA,UAAKkf,EAAL,GAAUA,EAAE,IAAI,IAAI6hB,OAAJ,EAAhB;EACA,UAAK5hB,EAAL,GAAUA,EAAE,IAAI,IAAI4hB,OAAJ,EAAhB;EANgB;EAQnB;;;;+BAKQlsB,GAAG+V,gBAAgB;EAExB,UAAI/X,KAAK,GAAG+X,cAAc,IAAI,IAAImW,OAAJ,EAA9B;;EAEA,UAAIlsB,CAAC,KAAK,CAAV,EAAa;EAEThC,QAAAA,KAAK,CAACjW,IAAN,CAAW,KAAKuiB,EAAhB;EAEH,OAJD,MAIO;EAEHtM,QAAAA,KAAK,CAACjW,IAAN,CAAW,KAAKuiB,EAAhB,EAAoB0L,GAApB,CAAwB,KAAK3L,EAA7B;EACArM,QAAAA,KAAK,CAAC+J,cAAN,CAAqB/H,CAArB,EAAwBuK,GAAxB,CAA4B,KAAKF,EAAjC;EAEH;;EAED,aAAOrM,KAAP;EAEH;;;EAED;iCAEWy1B,GAAG1d,gBAAgB;EAE1B,aAAO,KAAK+lD,QAAL,CAAcroC,CAAd,EAAiB1d,cAAjB,CAAP;EAEH;;;;EAEW;EAAS;EAEjB,UAAIwqD,OAAO,GAAG,KAAKj2D,EAAL,CAAQ9iB,KAAR,GAAgBwuB,GAAhB,CAAoB,KAAK3L,EAAzB,CAAd;EAEA,aAAOk2D,OAAO,CAACr2D,SAAR,EAAP;EAEH;;;2BAEI6mB,QAAQ;EAET,0EAAWA,MAAX;;EAEA,WAAK1mB,EAAL,CAAQtiB,IAAR,CAAagpC,MAAM,CAAC1mB,EAApB;EACA,WAAKC,EAAL,CAAQviB,IAAR,CAAagpC,MAAM,CAACzmB,EAApB;EAEA,aAAO,IAAP;EAEH;;;6BAhDiB;EACd,aAAO,IAAP;EACH;;;;IAbmBqxD;;MCAlB6E;;;;;EAEF,sBAAYn2D,EAAZ,EAAgBC,EAAhB,EAAoB;EAAA;;EAAA;;EAChB;EAEA,UAAKnf,IAAL,GAAY,YAAZ;EAEA,UAAKkf,EAAL,GAAUA,EAAE,IAAI,IAAI5B,OAAJ,EAAhB;EACA,UAAK6B,EAAL,GAAUA,EAAE,IAAI,IAAI7B,OAAJ,EAAhB;EANgB;EAQnB;;;;+BAMQzI,GAAG+V,gBAAgB;EAExB,UAAI/X,KAAK,GAAG+X,cAAc,IAAI,IAAItN,OAAJ,EAA9B;;EAEA,UAAIzI,CAAC,KAAK,CAAV,EAAa;EAEThC,QAAAA,KAAK,CAACjW,IAAN,CAAW,KAAKuiB,EAAhB;EAEH,OAJD,MAIO;EAEHtM,QAAAA,KAAK,CAACjW,IAAN,CAAW,KAAKuiB,EAAhB,EAAoB0L,GAApB,CAAwB,KAAK3L,EAA7B;EACArM,QAAAA,KAAK,CAAC+J,cAAN,CAAqB/H,CAArB,EAAwBuK,GAAxB,CAA4B,KAAKF,EAAjC;EAEH;;EAED,aAAOrM,KAAP;EAEH;;;;iCAIUy1B,GAAG1d,gBAAgB;EAE1B,aAAO,KAAK+lD,QAAL,CAAcroC,CAAd,EAAiB1d,cAAjB,CAAP;EAEH;;;2BAEIgb,QAAQ;EAET,2EAAWA,MAAX;;EAEA,WAAK1mB,EAAL,CAAQtiB,IAAR,CAAagpC,MAAM,CAAC1mB,EAApB;EACA,WAAKC,EAAL,CAAQviB,IAAR,CAAagpC,MAAM,CAACzmB,EAApB;EAEA,aAAO,IAAP;EAEH;;;6BAxCkB;EACf,aAAO,IAAP;EACH;;;;IAdoBqxD;;MCCnB8E;;;;;EAEF,gCAAY5mB,EAAZ,EAAgBxvC,EAAhB,EAAoBC,EAApB,EAAwB;EAAA;;EAAA;;EAEpB;EAEA,UAAKnf,IAAL,GAAY,sBAAZ;EAEA,UAAK0uD,EAAL,GAAUA,EAAE,IAAI,IAAI3tB,OAAJ,EAAhB;EACA,UAAK7hB,EAAL,GAAUA,EAAE,IAAI,IAAI6hB,OAAJ,EAAhB;EACA,UAAK5hB,EAAL,GAAUA,EAAE,IAAI,IAAI4hB,OAAJ,EAAhB;EARoB;EAUvB;;;;+BAOQlsB,GAAG+V,gBAAgB;EAExB,UAAI/X,KAAK,GAAG+X,cAAc,IAAI,IAAImW,OAAJ,EAA9B;EAEA,UAAI2tB,EAAE,GAAG,KAAKA,EAAd;EAAA,UAAkBxvC,EAAE,GAAG,KAAKA,EAA5B;EAAA,UAAgCC,EAAE,GAAG,KAAKA,EAA1C;EAEAtM,MAAAA,KAAK,CAAC1G,GAAN,CACIwoE,eAAe,CAAC9/D,CAAD,EAAI65C,EAAE,CAACz7C,CAAP,EAAUiM,EAAE,CAACjM,CAAb,EAAgBkM,EAAE,CAAClM,CAAnB,CADnB,EAEI0hE,eAAe,CAAC9/D,CAAD,EAAI65C,EAAE,CAACx7C,CAAP,EAAUgM,EAAE,CAAChM,CAAb,EAAgBiM,EAAE,CAACjM,CAAnB,CAFnB;EAKA,aAAOL,KAAP;EAEH;;;2BAEI+yB,QAAQ;EAET,qFAAWA,MAAX;;EAEA,WAAK8oB,EAAL,CAAQ9xD,IAAR,CAAagpC,MAAM,CAAC8oB,EAApB;EACA,WAAKxvC,EAAL,CAAQtiB,IAAR,CAAagpC,MAAM,CAAC1mB,EAApB;EACA,WAAKC,EAAL,CAAQviB,IAAR,CAAagpC,MAAM,CAACzmB,EAApB;EAEA,aAAO,IAAP;EAEH;;;6BA9B4B;EACzB,aAAO,IAAP;EACH;;;;IAhB8BqxD;;MCA7B+E;;;;;EAEF,iCAAY7mB,EAAZ,EAAgBxvC,EAAhB,EAAoBC,EAApB,EAAwB;EAAA;;EAAA;;EAEpB;EAEA,UAAKnf,IAAL,GAAY,uBAAZ;EAEA,UAAK0uD,EAAL,GAAUA,EAAE,IAAI,IAAIpxC,OAAJ,EAAhB;EACA,UAAK4B,EAAL,GAAUA,EAAE,IAAI,IAAI5B,OAAJ,EAAhB;EACA,UAAK6B,EAAL,GAAUA,EAAE,IAAI,IAAI7B,OAAJ,EAAhB;EARoB;EAUvB;;;;+BAOQzI,GAAG+V,gBAAgB;EAExB,UAAI/X,KAAK,GAAG+X,cAAc,IAAI,IAAItN,OAAJ,EAA9B;EAEA,UAAIoxC,EAAE,GAAG,KAAKA,EAAd;EAAA,UAAkBxvC,EAAE,GAAG,KAAKA,EAA5B;EAAA,UAAgCC,EAAE,GAAG,KAAKA,EAA1C;EAEAtM,MAAAA,KAAK,CAAC1G,GAAN,CACIwoE,eAAe,CAAC9/D,CAAD,EAAI65C,EAAE,CAACz7C,CAAP,EAAUiM,EAAE,CAACjM,CAAb,EAAgBkM,EAAE,CAAClM,CAAnB,CADnB,EAEI0hE,eAAe,CAAC9/D,CAAD,EAAI65C,EAAE,CAACx7C,CAAP,EAAUgM,EAAE,CAAChM,CAAb,EAAgBiM,EAAE,CAACjM,CAAnB,CAFnB,EAGIyhE,eAAe,CAAC9/D,CAAD,EAAI65C,EAAE,CAACryC,CAAP,EAAU6C,EAAE,CAAC7C,CAAb,EAAgB8C,EAAE,CAAC9C,CAAnB,CAHnB;EAMA,aAAOxJ,KAAP;EAEH;;;2BAEI+yB,QAAQ;EAET,sFAAWA,MAAX;;EAEA,WAAK8oB,EAAL,CAAQ9xD,IAAR,CAAagpC,MAAM,CAAC8oB,EAApB;EACA,WAAKxvC,EAAL,CAAQtiB,IAAR,CAAagpC,MAAM,CAAC1mB,EAApB;EACA,WAAKC,EAAL,CAAQviB,IAAR,CAAagpC,MAAM,CAACzmB,EAApB;EAEA,aAAO,IAAP;EAEH;;;6BA/B6B;EAC1B,aAAO,IAAP;EACH;;;;IAhB+BqxD;;MCA9BgF;;;;;EAEF,uBAAY9iE;EAAO;EAAnB,IAA2C;EAAA;;EAAA;;EAEvC;EAEA,UAAK1S,IAAL,GAAY,aAAZ;EAEA,UAAK0S,MAAL,GAAcA,MAAM,IAAI,EAAxB;EANuC;EAQ1C;;;;+BAMQmC,GAAG+V,gBAAgB;EAExB,UAAI/X,KAAK,GAAG+X,cAAc,IAAI,IAAImW,OAAJ,EAA9B;EAEA,UAAIruB,MAAM,GAAG,KAAKA,MAAlB;EACA,UAAIvS,CAAC,GAAG,CAACuS,MAAM,CAAC1a,MAAP,GAAgB,CAAjB,IAAsB6c,CAA9B;EAEA,UAAIw/D,QAAQ,GAAG18E,IAAI,CAACqE,KAAL,CAAWmE,CAAX,CAAf;EACA,UAAIm0E,MAAM,GAAGn0E,CAAC,GAAGk0E,QAAjB;EAEA,UAAIzlD,EAAE,GAAGlc,MAAM,CAAC2hE,QAAQ,KAAK,CAAb,GAAiBA,QAAjB,GAA4BA,QAAQ,GAAG,CAAxC,CAAf;EACA,UAAIxlD,EAAE,GAAGnc,MAAM,CAAC2hE,QAAD,CAAf;EACA,UAAIvlD,EAAE,GAAGpc,MAAM,CAAC2hE,QAAQ,GAAG3hE,MAAM,CAAC1a,MAAP,GAAgB,CAA3B,GAA+B0a,MAAM,CAAC1a,MAAP,GAAgB,CAA/C,GAAmDq8E,QAAQ,GAAG,CAA/D,CAAf;EACA,UAAItlD,EAAE,GAAGrc,MAAM,CAAC2hE,QAAQ,GAAG3hE,MAAM,CAAC1a,MAAP,GAAgB,CAA3B,GAA+B0a,MAAM,CAAC1a,MAAP,GAAgB,CAA/C,GAAmDq8E,QAAQ,GAAG,CAA/D,CAAf;EAEAxhE,MAAAA,KAAK,CAAC1G,GAAN,CACIooE,UAAU,CAACD,MAAD,EAAS1lD,EAAE,CAAC3b,CAAZ,EAAe4b,EAAE,CAAC5b,CAAlB,EAAqB6b,EAAE,CAAC7b,CAAxB,EAA2B8b,EAAE,CAAC9b,CAA9B,CADd,EAEIshE,UAAU,CAACD,MAAD,EAAS1lD,EAAE,CAAC1b,CAAZ,EAAe2b,EAAE,CAAC3b,CAAlB,EAAqB4b,EAAE,CAAC5b,CAAxB,EAA2B6b,EAAE,CAAC7b,CAA9B,CAFd;EAKA,aAAOL,KAAP;EAEH;;;2BAEI+yB,QAAQ;EAET,4EAAWA,MAAX;;EAEA,WAAKlzB,MAAL,GAAc,EAAd;;EAEA,WAAK,IAAIxa,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG0hC,MAAM,CAAClzB,MAAP,CAAc1a,MAAlC,EAA0CE,CAAC,GAAGgM,CAA9C,EAAiDhM,CAAC,EAAlD,EAAsD;EAElD,YAAI2a,KAAK,GAAG+yB,MAAM,CAAClzB,MAAP,CAAcxa,CAAd,CAAZ;EAEA,aAAKwa,MAAL,CAAY5c,IAAZ,CAAiB+c,KAAK,CAACxW,KAAN,EAAjB;EAEH;;EAED,aAAO,IAAP;EAEH;;;6BA5CmB;EAChB,aAAO,IAAP;EACH;;;;IAdqBm0E;;ECF1B;;;;;EAKA;;;;;MAMMiF;;;;;EACF,uBAAc;EAAA;;EAAA;;EACV;EAEA,UAAKz1E,IAAL,GAAY,WAAZ;EAEA,UAAK01E,MAAL,GAAc,EAAd;EACA,UAAKC,SAAL,GAAiB,KAAjB,CANU;;EAAA;EAOb;;;;0BACGC,OAAO;EAEP,WAAKF,MAAL,CAAY5/E,IAAZ,CAAiB8/E,KAAjB;EAEH;;;kCAEW;EAER;EACA,UAAIC,UAAU,GAAG,KAAKH,MAAL,CAAY,CAAZ,EAAe/E,QAAf,CAAwB,CAAxB,CAAjB;EACA,UAAImF,QAAQ,GAAG,KAAKJ,MAAL,CAAY,KAAKA,MAAL,CAAY19E,MAAZ,GAAqB,CAAjC,EAAoC24E,QAApC,CAA6C,CAA7C,CAAf;;EAEA,UAAI,CAACkF,UAAU,CAACvqD,MAAX,CAAkBwqD,QAAlB,CAAL,EAAkC;EAE9B,aAAKJ,MAAL,CAAY5/E,IAAZ,CAAiB,IAAIigF,SAAJ,CAAwBD,QAAxB,EAAkCD,UAAlC,CAAjB;EAEH;EAEJ;EAGD;EACA;EAEA;EACA;EACA;EACA;;;;+BAEShhE,GAAG;EAER,UAAI9R,CAAC,GAAG8R,CAAC,GAAG,KAAKhd,SAAL,EAAZ;EACA,UAAIm+E,YAAY,GAAG,KAAKC,eAAL,EAAnB;EACA,UAAI/9E,CAAC,GAAG,CAAR,CAJQ;;EAQR,aAAOA,CAAC,GAAG89E,YAAY,CAACh+E,MAAxB,EAAgC;EAE5B,YAAIg+E,YAAY,CAAC99E,CAAD,CAAZ,IAAmB6K,CAAvB,EAA0B;EAEtB,cAAImrD,IAAI,GAAG8nB,YAAY,CAAC99E,CAAD,CAAZ,GAAkB6K,CAA7B;EACA,cAAI6yE,KAAK,GAAG,KAAKF,MAAL,CAAYx9E,CAAZ,CAAZ;EAEA,cAAIu5E,aAAa,GAAGmE,KAAK,CAAC/9E,SAAN,EAApB;EACA,cAAIywC,CAAC,GAAGmpC,aAAa,KAAK,CAAlB,GAAsB,CAAtB,GAA0B,IAAIvjB,IAAI,GAAGujB,aAA7C;EAEA,iBAAOmE,KAAK,CAAC/E,UAAN,CAAiBvoC,CAAjB,CAAP;EAEH;;EAEDpwC,QAAAA,CAAC;EAEJ;;EAED,aAAO,IAAP,CA1BQ;EA8BX;EAGD;EACA;;;;kCAEY;EAER,UAAIg+E,IAAI,GAAG,KAAKD,eAAL,EAAX;EACA,aAAOC,IAAI,CAACA,IAAI,CAACl+E,MAAL,GAAc,CAAf,CAAX;EAEH;;;;yCAGkB;EAEf,WAAK2tC,WAAL,GAAmB,IAAnB;EACA,WAAKwwC,YAAL,GAAoB,IAApB;EACA,WAAKF,eAAL;EAEH;EAGD;;;;wCAEkB;EAEd;EAEA,UAAI,KAAKE,YAAL,IAAqB,KAAKA,YAAL,CAAkBn+E,MAAlB,KAA6B,KAAK09E,MAAL,CAAY19E,MAAlE,EAA0E;EAEtE,eAAO,KAAKm+E,YAAZ;EAEH,OARa;EAWd;;;EAEA,UAAIrF,OAAO,GAAG,EAAd;EAAA,UAAkBsF,IAAI,GAAG,CAAzB;;EAEA,WAAK,IAAIl+E,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG,KAAKwxE,MAAL,CAAY19E,MAAhC,EAAwCE,CAAC,GAAGgM,CAA5C,EAA+ChM,CAAC,EAAhD,EAAoD;EAEhDk+E,QAAAA,IAAI,IAAI,KAAKV,MAAL,CAAYx9E,CAAZ,EAAeL,SAAf,EAAR;EACAi5E,QAAAA,OAAO,CAACh7E,IAAR,CAAasgF,IAAb;EAEH;;EAED,WAAKD,YAAL,GAAoBrF,OAApB;EAEA,aAAOA,OAAP;EAEH;;;sCAEeF,WAAW;EAEvB,UAAIA,SAAS,KAAK9zE,SAAlB,EAA6B8zE,SAAS,GAAG,EAAZ;EAE7B,UAAIl+D,MAAM,GAAG,EAAb;;EAEA,WAAK,IAAIxa,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI04E,SAArB,EAAgC14E,CAAC,EAAjC,EAAqC;EAEjCwa,QAAAA,MAAM,CAAC5c,IAAP,CAAY,KAAK66E,QAAL,CAAcz4E,CAAC,GAAG04E,SAAlB,CAAZ;EAEH;;EAED,UAAI,KAAK+E,SAAT,EAAoB;EAEhBjjE,QAAAA,MAAM,CAAC5c,IAAP,CAAY4c,MAAM,CAAC,CAAD,CAAlB;EAEH;;EAED,aAAOA,MAAP;EAEH;;;gCAESk+D,WAAW;EAEjBA,MAAAA,SAAS,GAAGA,SAAS,IAAI,EAAzB;EAEA,UAAIl+D,MAAM,GAAG,EAAb;EAAA,UAAiBpW,IAAjB;;EAEA,WAAK,IAAIpE,CAAC,GAAG,CAAR,EAAWw9E,MAAM,GAAG,KAAKA,MAA9B,EAAsCx9E,CAAC,GAAGw9E,MAAM,CAAC19E,MAAjD,EAAyDE,CAAC,EAA1D,EAA8D;EAE1D,YAAI09E,KAAK,GAAGF,MAAM,CAACx9E,CAAD,CAAlB;EACA,YAAIoyC,UAAU,GAAIsrC,KAAK,IAAIA,KAAK,CAACS,cAAhB,GAAkCzF,SAAS,GAAG,CAA9C,GACVgF,KAAK,IAAIA,KAAK,CAACU,WAAhB,GAA+B,CAA/B,GACKV,KAAK,IAAIA,KAAK,CAACW,aAAhB,GAAiC3F,SAAS,GAAGgF,KAAK,CAACljE,MAAN,CAAa1a,MAA1D,GACI44E,SAHd;EAKA,YAAIzI,GAAG,GAAGyN,KAAK,CAACY,SAAN,CAAgBlsC,UAAhB,CAAV;;EAEA,aAAK,IAAI9E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2iC,GAAG,CAACnwE,MAAxB,EAAgCwtC,CAAC,EAAjC,EAAqC;EAEjC,cAAI3yB,KAAK,GAAGs1D,GAAG,CAAC3iC,CAAD,CAAf;EAEA,cAAIlpC,IAAI,IAAIA,IAAI,CAACgvB,MAAL,CAAYzY,KAAZ,CAAZ,EAAgC,SAJC;;EAMjCH,UAAAA,MAAM,CAAC5c,IAAP,CAAY+c,KAAZ;EACAvW,UAAAA,IAAI,GAAGuW,KAAP;EAEH;EAEJ;;EAED,UAAI,KAAK8iE,SAAL,IAAkBjjE,MAAM,CAAC1a,MAAP,GAAgB,CAAlC,IAAuC,CAAC0a,MAAM,CAACA,MAAM,CAAC1a,MAAP,GAAgB,CAAjB,CAAN,CAA0BszB,MAA1B,CAAiC5Y,MAAM,CAAC,CAAD,CAAvC,CAA5C,EAAyF;EAErFA,QAAAA,MAAM,CAAC5c,IAAP,CAAY4c,MAAM,CAAC,CAAD,CAAlB;EAEH;;EAED,aAAOA,MAAP;EAEH;;;2BAEIkzB,QAAQ;EAET4qC,MAAAA,KAAK,CAAC/6E,SAAN,CAAgBmH,IAAhB,CAAqBvE,IAArB,CAA0B,IAA1B,EAAgCutC,MAAhC;EAEA,WAAK8vC,MAAL,GAAc,EAAd;;EAEA,WAAK,IAAIx9E,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG0hC,MAAM,CAAC8vC,MAAP,CAAc19E,MAAlC,EAA0CE,CAAC,GAAGgM,CAA9C,EAAiDhM,CAAC,EAAlD,EAAsD;EAElD,YAAI09E,KAAK,GAAGhwC,MAAM,CAAC8vC,MAAP,CAAcx9E,CAAd,CAAZ;EAEA,aAAKw9E,MAAL,CAAY5/E,IAAZ,CAAiB8/E,KAAK,CAACv5E,KAAN,EAAjB;EAEH;;EAED,WAAKs5E,SAAL,GAAiB/vC,MAAM,CAAC+vC,SAAxB;EAEA,aAAO,IAAP;EAEH;;;;IAxMmBnF;;ECNxB;;;;;MAKMiG;;;;;EACF,gBAAY/jE,MAAZ,EAAoB;EAAA;;EAAA;;EAEhB;EAEA,UAAK1S,IAAL,GAAY,MAAZ;EAEA,UAAK02E,YAAL,GAAoB,IAAI31C,OAAJ,EAApB;;EAEA,QAAIruB,MAAJ,EAAY;EAER,YAAK6Z,aAAL,CAAmB7Z,MAAnB;EAEH;;EAZe;EAanB;;;;oCACaA,QAAQ;EAElB,WAAKikE,MAAL,CAAYjkE,MAAM,CAAC,CAAD,CAAN,CAAUO,CAAtB,EAAyBP,MAAM,CAAC,CAAD,CAAN,CAAUQ,CAAnC;;EAEA,WAAK,IAAIhb,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGwO,MAAM,CAAC1a,MAA3B,EAAmCE,CAAC,GAAGgM,CAAvC,EAA0ChM,CAAC,EAA3C,EAA+C;EAE3C,aAAK0+E,MAAL,CAAYlkE,MAAM,CAACxa,CAAD,CAAN,CAAU+a,CAAtB,EAAyBP,MAAM,CAACxa,CAAD,CAAN,CAAUgb,CAAnC;EAEH;EAEJ;;;6BAEMD,GAAGC,GAAG;EAET,WAAKwjE,YAAL,CAAkBvqE,GAAlB,CAAsB8G,CAAtB,EAAyBC,CAAzB,EAFS;EAIZ;;;6BAEMD,GAAGC,GAAG;EAET,UAAI0iE,KAAK,GAAG,IAAIT,SAAJ,CAAc,KAAKuB,YAAL,CAAkBr6E,KAAlB,EAAd,EAAyC,IAAI0kC,OAAJ,CAAY9tB,CAAZ,EAAeC,CAAf,CAAzC,CAAZ;EACA,WAAKwiE,MAAL,CAAY5/E,IAAZ,CAAiB8/E,KAAjB;EAEA,WAAKc,YAAL,CAAkBvqE,GAAlB,CAAsB8G,CAAtB,EAAyBC,CAAzB;EAEH;;;uCAEgB2jE,MAAMC,MAAMpE,IAAIC,IAAI;EAEjC,UAAIiD,KAAK,GAAG,IAAIN,oBAAJ,CACR,KAAKoB,YAAL,CAAkBr6E,KAAlB,EADQ,EAER,IAAI0kC,OAAJ,CAAY81C,IAAZ,EAAkBC,IAAlB,CAFQ,EAGR,IAAI/1C,OAAJ,CAAY2xC,EAAZ,EAAgBC,EAAhB,CAHQ,CAAZ;EAMA,WAAK+C,MAAL,CAAY5/E,IAAZ,CAAiB8/E,KAAjB;EAEA,WAAKc,YAAL,CAAkBvqE,GAAlB,CAAsBumE,EAAtB,EAA0BC,EAA1B;EAEH;;;oCAEaoE,OAAOC,OAAOC,OAAOC,OAAOxE,IAAIC,IAAI;EAE9C,UAAIiD,KAAK,GAAG,IAAIX,gBAAJ,CACR,KAAKyB,YAAL,CAAkBr6E,KAAlB,EADQ,EAER,IAAI0kC,OAAJ,CAAYg2C,KAAZ,EAAmBC,KAAnB,CAFQ,EAGR,IAAIj2C,OAAJ,CAAYk2C,KAAZ,EAAmBC,KAAnB,CAHQ,EAIR,IAAIn2C,OAAJ,CAAY2xC,EAAZ,EAAgBC,EAAhB,CAJQ,CAAZ;EAOA,WAAK+C,MAAL,CAAY5/E,IAAZ,CAAiB8/E,KAAjB;EAEA,WAAKc,YAAL,CAAkBvqE,GAAlB,CAAsBumE,EAAtB,EAA0BC,EAA1B;EAEH;;;iCAEUxK;EAAI;QAAqB;EAEhC,UAAIgP,IAAI,GAAG,CAAC,KAAKT,YAAL,CAAkBr6E,KAAlB,EAAD,EAA4BrG,MAA5B,CAAmCmyE,GAAnC,CAAX;EAEA,UAAIyN,KAAK,GAAG,IAAIJ,WAAJ,CAAgB2B,IAAhB,CAAZ;EACA,WAAKzB,MAAL,CAAY5/E,IAAZ,CAAiB8/E,KAAjB;EAEA,WAAKc,YAAL,CAAkB95E,IAAlB,CAAuBurE,GAAG,CAACA,GAAG,CAACnwE,MAAJ,GAAa,CAAd,CAA1B;EAEH;;;0BAEG06E,IAAIC,IAAIW,SAASR,aAAaC,WAAWC,YAAY;EAErD,UAAInoB,EAAE,GAAG,KAAK6rB,YAAL,CAAkBzjE,CAA3B;EACA,UAAI63C,EAAE,GAAG,KAAK4rB,YAAL,CAAkBxjE,CAA3B;EAEA,WAAKkkE,MAAL,CAAY1E,EAAE,GAAG7nB,EAAjB,EAAqB8nB,EAAE,GAAG7nB,EAA1B,EAA8BwoB,OAA9B,EACIR,WADJ,EACiBC,SADjB,EAC4BC,UAD5B;EAGH;;;6BAEMN,IAAIC,IAAIW,SAASR,aAAaC,WAAWC,YAAY;EAExD,WAAKqE,UAAL,CAAgB3E,EAAhB,EAAoBC,EAApB,EAAwBW,OAAxB,EAAiCA,OAAjC,EAA0CR,WAA1C,EAAuDC,SAAvD,EAAkEC,UAAlE;EAEH;;;8BAEON,IAAIC,IAAIC,SAASC,SAASC,aAAaC,WAAWC,YAAYC,WAAW;EAE7E,UAAIpoB,EAAE,GAAG,KAAK6rB,YAAL,CAAkBzjE,CAA3B;EACA,UAAI63C,EAAE,GAAG,KAAK4rB,YAAL,CAAkBxjE,CAA3B;EAEA,WAAKmkE,UAAL,CAAgB3E,EAAE,GAAG7nB,EAArB,EAAyB8nB,EAAE,GAAG7nB,EAA9B,EAAkC8nB,OAAlC,EAA2CC,OAA3C,EAAoDC,WAApD,EAAiEC,SAAjE,EAA4EC,UAA5E,EAAwFC,SAAxF;EAEH;;;iCAEUP,IAAIC,IAAIC,SAASC,SAASC,aAAaC,WAAWC,YAAYC,WAAW;EAEhF,UAAI2C,KAAK,GAAG,IAAInD,YAAJ,CAAiBC,EAAjB,EAAqBC,EAArB,EAAyBC,OAAzB,EAAkCC,OAAlC,EAA2CC,WAA3C,EAAwDC,SAAxD,EAAmEC,UAAnE,EAA+EC,SAA/E,CAAZ;;EAEA,UAAI,KAAKyC,MAAL,CAAY19E,MAAZ,GAAqB,CAAzB,EAA4B;EAExB;EACA,YAAIs/E,UAAU,GAAG1B,KAAK,CAACjF,QAAN,CAAe,CAAf,CAAjB;;EAEA,YAAI,CAAC2G,UAAU,CAAChsD,MAAX,CAAkB,KAAKorD,YAAvB,CAAL,EAA2C;EAEvC,eAAKE,MAAL,CAAYU,UAAU,CAACrkE,CAAvB,EAA0BqkE,UAAU,CAACpkE,CAArC;EAEH;EAEJ;;EAED,WAAKwiE,MAAL,CAAY5/E,IAAZ,CAAiB8/E,KAAjB;EAEA,UAAI2B,SAAS,GAAG3B,KAAK,CAACjF,QAAN,CAAe,CAAf,CAAhB;EACA,WAAK+F,YAAL,CAAkB95E,IAAlB,CAAuB26E,SAAvB;EAEH;;;2BAEI3xC,QAAQ;EAET,qEAAWA,MAAX;;EAEA,WAAK8wC,YAAL,CAAkB95E,IAAlB,CAAuBgpC,MAAM,CAAC8wC,YAA9B;EAEA,aAAO,IAAP;EAEH;;;;IA3IcjB;;ECVnB;;;;EAKA;EACA;EACA;EACA;EACA;;MAEM+B;;;;;EACF,iBAAY9kE,MAAZ,EAAoB;EAAA;;EAAA;;EAEhB,+EAAMA,MAAN,GAFgB;;EAMhB,UAAK1S,IAAL,GAAY,OAAZ;EAEA,UAAKqoE,KAAL,GAAa,EAAb;EARgB;EAUnB;;;;qCACcuI,WAAW;EAEtB,UAAI6G,QAAQ,GAAG,EAAf;;EAEA,WAAK,IAAIv/E,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG,KAAKmkE,KAAL,CAAWrwE,MAA/B,EAAuCE,CAAC,GAAGgM,CAA3C,EAA8ChM,CAAC,EAA/C,EAAmD;EAE/Cu/E,QAAAA,QAAQ,CAACv/E,CAAD,CAAR,GAAc,KAAKmwE,KAAL,CAAWnwE,CAAX,EAAcs+E,SAAd,CAAwB5F,SAAxB,CAAd;EAEH;;EAED,aAAO6G,QAAP;EAEH;;;;oCAIa7G,WAAW;EAErB,aAAO;EAEH9H,QAAAA,KAAK,EAAE,KAAK0N,SAAL,CAAe5F,SAAf,CAFJ;EAGHvI,QAAAA,KAAK,EAAE,KAAKqP,cAAL,CAAoB9G,SAApB;EAHJ,OAAP;EAOH;;;2BACIhrC,QAAQ;EAET,sEAAWA,MAAX;;EAEA,WAAKyiC,KAAL,GAAa,EAAb;;EAEA,WAAK,IAAInwE,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG0hC,MAAM,CAACyiC,KAAP,CAAarwE,MAAjC,EAAyCE,CAAC,GAAGgM,CAA7C,EAAgDhM,CAAC,EAAjD,EAAqD;EAEjD,YAAIouE,IAAI,GAAG1gC,MAAM,CAACyiC,KAAP,CAAanwE,CAAb,CAAX;EAEA,aAAKmwE,KAAL,CAAWvyE,IAAX,CAAgBwwE,IAAI,CAACjqE,KAAL,EAAhB;EAEH;;EAED,aAAO,IAAP;EAEH;;;;IAtDeo6E;;MCJdkB;;;EAEF,uBAAc;EAAA;;EACV,SAAK33E,IAAL,GAAY,WAAZ;EAEA,SAAK0hB,KAAL,GAAa,IAAIR,OAAJ,EAAb;EAEA,SAAK02D,QAAL,GAAgB,EAAhB;EACA,SAAKC,WAAL,GAAmB,IAAnB;EACH;;;;6BACM5kE,GAAGC,GAAG;EAET,WAAK2kE,WAAL,GAAmB,IAAIpB,IAAJ,EAAnB;EACA,WAAKmB,QAAL,CAAc9hF,IAAd,CAAmB,KAAK+hF,WAAxB;EACA,WAAKA,WAAL,CAAiBlB,MAAjB,CAAwB1jE,CAAxB,EAA2BC,CAA3B;EAEH;;;6BAEMD,GAAGC,GAAG;EAET,WAAK2kE,WAAL,CAAiBjB,MAAjB,CAAwB3jE,CAAxB,EAA2BC,CAA3B;EAEH;;;uCAEgB2jE,MAAMC,MAAMpE,IAAIC,IAAI;EAEjC,WAAKkF,WAAL,CAAiBC,gBAAjB,CAAkCjB,IAAlC,EAAwCC,IAAxC,EAA8CpE,EAA9C,EAAkDC,EAAlD;EAEH;;;oCAEaoE,OAAOC,OAAOC,OAAOC,OAAOxE,IAAIC,IAAI;EAE9C,WAAKkF,WAAL,CAAiBE,aAAjB,CAA+BhB,KAA/B,EAAsCC,KAAtC,EAA6CC,KAA7C,EAAoDC,KAApD,EAA2DxE,EAA3D,EAA+DC,EAA/D;EAEH;;;iCAEUxK,KAAK;EAEZ,WAAK0P,WAAL,CAAiBG,UAAjB,CAA4B7P,GAA5B;EAEH;;;+BAEQ8P,OAAOC,SAAS;EAErB,eAASC,eAAT,CAAyBC,UAAzB,EAAqC;EAEjC,YAAI1P,MAAM,GAAG,EAAb;;EAEA,aAAK,IAAIxwE,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGk0E,UAAU,CAACpgF,MAA/B,EAAuCE,CAAC,GAAGgM,CAA3C,EAA8ChM,CAAC,EAA/C,EAAmD;EAE/C,cAAImgF,OAAO,GAAGD,UAAU,CAAClgF,CAAD,CAAxB;EAEA,cAAIogF,QAAQ,GAAG,IAAId,KAAJ,EAAf;EACAc,UAAAA,QAAQ,CAAC5C,MAAT,GAAkB2C,OAAO,CAAC3C,MAA1B;EAEAhN,UAAAA,MAAM,CAAC5yE,IAAP,CAAYwiF,QAAZ;EAEH;;EAED,eAAO5P,MAAP;EAEH;;EAED,eAAS6P,oBAAT,CAA8BvN,IAA9B,EAAoCwN,SAApC,EAA+C;EAE3C,YAAIC,OAAO,GAAGD,SAAS,CAACxgF,MAAxB,CAF2C;EAK3C;EACA;EACA;;EACA,YAAIyvE,MAAM,GAAG,KAAb;;EACA,aAAK,IAAItnE,CAAC,GAAGs4E,OAAO,GAAG,CAAlB,EAAqB16D,CAAC,GAAG,CAA9B,EAAiCA,CAAC,GAAG06D,OAArC,EAA8Ct4E,CAAC,GAAG4d,CAAC,EAAnD,EAAuD;EAEnD,cAAI26D,SAAS,GAAGF,SAAS,CAACr4E,CAAD,CAAzB;EACA,cAAIw4E,UAAU,GAAGH,SAAS,CAACz6D,CAAD,CAA1B;EAEA,cAAI66D,MAAM,GAAGD,UAAU,CAAC1lE,CAAX,GAAeylE,SAAS,CAACzlE,CAAtC;EACA,cAAI4lE,MAAM,GAAGF,UAAU,CAACzlE,CAAX,GAAewlE,SAAS,CAACxlE,CAAtC;;EAEA,cAAIvb,IAAI,CAACuK,GAAL,CAAS22E,MAAT,IAAmBx2E,MAAM,CAACkpD,OAA9B,EAAuC;EAEnC;EACA,gBAAIstB,MAAM,GAAG,CAAb,EAAgB;EAEZH,cAAAA,SAAS,GAAGF,SAAS,CAACz6D,CAAD,CAArB;EAA0B66D,cAAAA,MAAM,GAAG,CAAEA,MAAX;EAC1BD,cAAAA,UAAU,GAAGH,SAAS,CAACr4E,CAAD,CAAtB;EAA2B04E,cAAAA,MAAM,GAAG,CAAEA,MAAX;EAE9B;;EACD,gBAAK7N,IAAI,CAAC93D,CAAL,GAASwlE,SAAS,CAACxlE,CAApB,IAA2B83D,IAAI,CAAC93D,CAAL,GAASylE,UAAU,CAACzlE,CAAnD,EAAuD;;EAEvD,gBAAI83D,IAAI,CAAC93D,CAAL,KAAWwlE,SAAS,CAACxlE,CAAzB,EAA4B;EAExB,kBAAI83D,IAAI,CAAC/3D,CAAL,KAAWylE,SAAS,CAACzlE,CAAzB,EAA4B,OAAO,IAAP,CAFJ;EAGxB;EAEH,aALD,MAKO;EAEH,kBAAI6lE,QAAQ,GAAGD,MAAM,IAAI7N,IAAI,CAAC/3D,CAAL,GAASylE,SAAS,CAACzlE,CAAvB,CAAN,GAAkC2lE,MAAM,IAAI5N,IAAI,CAAC93D,CAAL,GAASwlE,SAAS,CAACxlE,CAAvB,CAAvD;EACA,kBAAI4lE,QAAQ,KAAK,CAAjB,EAAoB,OAAO,IAAP,CAHjB;;EAIH,kBAAIA,QAAQ,GAAG,CAAf,EAAkB;EAClBrR,cAAAA,MAAM,GAAG,CAACA,MAAV,CALG;EAON;EAEJ,WAzBD,MAyBO;EAEH;EACA,gBAAIuD,IAAI,CAAC93D,CAAL,KAAWwlE,SAAS,CAACxlE,CAAzB,EAA4B,SAHzB;EAIH;;EACA,gBAAMylE,UAAU,CAAC1lE,CAAX,IAAgB+3D,IAAI,CAAC/3D,CAAtB,IAA6B+3D,IAAI,CAAC/3D,CAAL,IAAUylE,SAAS,CAACzlE,CAAlD,IACEylE,SAAS,CAACzlE,CAAV,IAAe+3D,IAAI,CAAC/3D,CAArB,IAA4B+3D,IAAI,CAAC/3D,CAAL,IAAU0lE,UAAU,CAAC1lE,CADtD,EAC2D,OAAO,IAAP,CANxD;EAOH;EAEH;EAEJ;;EAED,eAAOw0D,MAAP;EAEH;;EAED,UAAIS,WAAW,GAAGF,UAAU,CAACE,WAA7B;EAEA,UAAI0P,QAAQ,GAAG,KAAKA,QAApB;EACA,UAAIA,QAAQ,CAAC5/E,MAAT,KAAoB,CAAxB,EAA2B,OAAO,EAAP;EAE3B,UAAIkgF,OAAO,KAAK,IAAhB,EAAsB,OAAOC,eAAe,CAACP,QAAD,CAAtB;EAGtB,UAAImB,KAAJ;EAAA,UAAWV,OAAX;EAAA,UAAoBC,QAApB;EAAA,UAA8B5P,MAAM,GAAG,EAAvC;;EAEA,UAAIkP,QAAQ,CAAC5/E,MAAT,KAAoB,CAAxB,EAA2B;EAEvBqgF,QAAAA,OAAO,GAAGT,QAAQ,CAAC,CAAD,CAAlB;EACAU,QAAAA,QAAQ,GAAG,IAAId,KAAJ,EAAX;EACAc,QAAAA,QAAQ,CAAC5C,MAAT,GAAkB2C,OAAO,CAAC3C,MAA1B;EACAhN,QAAAA,MAAM,CAAC5yE,IAAP,CAAYwiF,QAAZ;EACA,eAAO5P,MAAP;EAEH;;EAED,UAAIsQ,UAAU,GAAG,CAAC9Q,WAAW,CAAC0P,QAAQ,CAAC,CAAD,CAAR,CAAYpB,SAAZ,EAAD,CAA7B;EACAwC,MAAAA,UAAU,GAAGf,KAAK,GAAG,CAACe,UAAJ,GAAiBA,UAAnC,CArGqB;;EAyGrB,UAAIC,gBAAgB,GAAG,EAAvB;EACA,UAAIC,SAAS,GAAG,EAAhB;EACA,UAAIC,aAAa,GAAG,EAApB;EACA,UAAIC,OAAO,GAAG,CAAd;EACA,UAAIC,SAAJ;EAEAH,MAAAA,SAAS,CAACE,OAAD,CAAT,GAAqBt8E,SAArB;EACAq8E,MAAAA,aAAa,CAACC,OAAD,CAAb,GAAyB,EAAzB;;EAEA,WAAK,IAAIlhF,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG0zE,QAAQ,CAAC5/E,MAA7B,EAAqCE,CAAC,GAAGgM,CAAzC,EAA4ChM,CAAC,EAA7C,EAAiD;EAE7CmgF,QAAAA,OAAO,GAAGT,QAAQ,CAAC1/E,CAAD,CAAlB;EACAmhF,QAAAA,SAAS,GAAGhB,OAAO,CAAC7B,SAAR,EAAZ;EACAuC,QAAAA,KAAK,GAAG7Q,WAAW,CAACmR,SAAD,CAAnB;EACAN,QAAAA,KAAK,GAAGd,KAAK,GAAG,CAACc,KAAJ,GAAYA,KAAzB;;EAEA,YAAIA,KAAJ,EAAW;EAEP,cAAK,CAACC,UAAF,IAAkBE,SAAS,CAACE,OAAD,CAA/B,EAA2CA,OAAO;EAElDF,UAAAA,SAAS,CAACE,OAAD,CAAT,GAAqB;EAAEx7D,YAAAA,CAAC,EAAE,IAAI45D,KAAJ,EAAL;EAAkBr3E,YAAAA,CAAC,EAAEk5E;EAArB,WAArB;EACAH,UAAAA,SAAS,CAACE,OAAD,CAAT,CAAmBx7D,CAAnB,CAAqB83D,MAArB,GAA8B2C,OAAO,CAAC3C,MAAtC;EAEA,cAAIsD,UAAJ,EAAgBI,OAAO;EACvBD,UAAAA,aAAa,CAACC,OAAD,CAAb,GAAyB,EAAzB,CARO;EAYV,SAZD,MAYO;EAEHD,UAAAA,aAAa,CAACC,OAAD,CAAb,CAAuBtjF,IAAvB,CAA4B;EAAEuP,YAAAA,CAAC,EAAEgzE,OAAL;EAAcl4E,YAAAA,CAAC,EAAEk5E,SAAS,CAAC,CAAD;EAA1B,WAA5B,EAFG;EAMN;EAEJ,OA7IoB;;;EAgJrB,UAAI,CAACH,SAAS,CAAC,CAAD,CAAd,EAAmB,OAAOf,eAAe,CAACP,QAAD,CAAtB;;EAGnB,UAAIsB,SAAS,CAAClhF,MAAV,GAAmB,CAAvB,EAA0B;EAEtB,YAAIshF,SAAS,GAAG,KAAhB;EACA,YAAIC,QAAQ,GAAG,EAAf;;EAEA,aAAK,IAAIC,IAAI,GAAG,CAAX,EAAcC,IAAI,GAAGP,SAAS,CAAClhF,MAApC,EAA4CwhF,IAAI,GAAGC,IAAnD,EAAyDD,IAAI,EAA7D,EAAiE;EAE7DP,UAAAA,gBAAgB,CAACO,IAAD,CAAhB,GAAyB,EAAzB;EAEH;;EAED,aAAK,IAAIA,IAAI,GAAG,CAAX,EAAcC,IAAI,GAAGP,SAAS,CAAClhF,MAApC,EAA4CwhF,IAAI,GAAGC,IAAnD,EAAyDD,IAAI,EAA7D,EAAiE;EAE7D,cAAIE,GAAG,GAAGP,aAAa,CAACK,IAAD,CAAvB;;EAEA,eAAK,IAAIG,IAAI,GAAG,CAAhB,EAAmBA,IAAI,GAAGD,GAAG,CAAC1hF,MAA9B,EAAsC2hF,IAAI,EAA1C,EAA8C;EAE1C,gBAAIC,EAAE,GAAGF,GAAG,CAACC,IAAD,CAAZ;EACA,gBAAIE,eAAe,GAAG,IAAtB;;EAEA,iBAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGZ,SAAS,CAAClhF,MAAtC,EAA8C8hF,KAAK,EAAnD,EAAuD;EAEnD,kBAAIvB,oBAAoB,CAACqB,EAAE,CAACz5E,CAAJ,EAAO+4E,SAAS,CAACY,KAAD,CAAT,CAAiB35E,CAAxB,CAAxB,EAAoD;EAEhD,oBAAIq5E,IAAI,KAAKM,KAAb,EAAoBP,QAAQ,CAACzjF,IAAT,CAAc;EAAEikF,kBAAAA,KAAK,EAAEP,IAAT;EAAeQ,kBAAAA,GAAG,EAAEF,KAApB;EAA2BxT,kBAAAA,IAAI,EAAEqT;EAAjC,iBAAd;;EACpB,oBAAIE,eAAJ,EAAqB;EAEjBA,kBAAAA,eAAe,GAAG,KAAlB;EACAZ,kBAAAA,gBAAgB,CAACa,KAAD,CAAhB,CAAwBhkF,IAAxB,CAA6B8jF,EAA7B;EAEH,iBALD,MAKO;EAEHN,kBAAAA,SAAS,GAAG,IAAZ;EAEH;EAEJ;EAEJ;;EACD,gBAAIO,eAAJ,EAAqB;EAEjBZ,cAAAA,gBAAgB,CAACO,IAAD,CAAhB,CAAuB1jF,IAAvB,CAA4B8jF,EAA5B;EAEH;EAEJ;EAEJ,SA/CqB;;;EAiDtB,YAAIL,QAAQ,CAACvhF,MAAT,GAAkB,CAAtB,EAAyB;EAErB;EACA,cAAI,CAACshF,SAAL,EAAgBH,aAAa,GAAGF,gBAAhB;EAEnB;EAEJ;;EAED,UAAIgB,QAAJ;;EAEA,WAAK,IAAI/hF,CAAC,GAAG,CAAR,EAAW4K,EAAE,GAAGo2E,SAAS,CAAClhF,MAA/B,EAAuCE,CAAC,GAAG4K,EAA3C,EAA+C5K,CAAC,EAAhD,EAAoD;EAEhDogF,QAAAA,QAAQ,GAAGY,SAAS,CAAChhF,CAAD,CAAT,CAAa0lB,CAAxB;EACA8qD,QAAAA,MAAM,CAAC5yE,IAAP,CAAYwiF,QAAZ;EACA2B,QAAAA,QAAQ,GAAGd,aAAa,CAACjhF,CAAD,CAAxB;;EAEA,aAAK,IAAIstC,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGw0C,QAAQ,CAACjiF,MAA9B,EAAsCwtC,CAAC,GAAGC,EAA1C,EAA8CD,CAAC,EAA/C,EAAmD;EAE/C8yC,UAAAA,QAAQ,CAACjQ,KAAT,CAAevyE,IAAf,CAAoBmkF,QAAQ,CAACz0C,CAAD,CAAR,CAAYngC,CAAhC;EAEH;EAEJ,OA3NoB;;;EA+NrB,aAAOqjE,MAAP;EAEH;;;;;;MClRCwR;;;;;EACF,uBAAc;EAAA;;EAAA;;EACV;EAEA,UAAKC,MAAL,GAAc,EAAd;EACA,UAAKC,QAAL,GAAgB,IAAhB;EACA,UAAKC,QAAL,GAAgB,IAAI3c,IAAJ,GAAW4c,OAAX,EAAhB;EACA,UAAKC,QAAL,GAAgB,IAAhB;EACA,UAAKxtC,QAAL,GAAgB,IAAhB;EACA,UAAKytC,OAAL,GAAe,EAAf;EARU;EAUb;;;;6BAEM;EAEH,WAAKC,WAAL;EAEH;;;oCAEa;EAEV;EACA,UAAI;EACA,aAAK1tC,QAAL,GAAgB,IAAIgR,aAAJ,CAAkB;EAC9B9+B,UAAAA,KAAK,EAAE,IADuB;EAE9B8X,UAAAA,KAAK,EAAE,IAFuB;EAG9BuoB,UAAAA,SAAS,EAAE,IAHmB;EAI9BppB,UAAAA,kBAAkB,EAAE,IAJU;EAK9BupB,UAAAA,qBAAqB,EAAE,IALO;EAM9BtJ,UAAAA,sBAAsB,EAAE;EANM,SAAlB,CAAhB,CADA;EAYH,OAZD,CAYE,OAAOpuC,CAAP,EAAU;EACR,aAAK4D,IAAL,CAAUN,KAAV,CAAgBQ,OAAhB,GAA0B,4GAA1B;EACA,aAAKF,IAAL,CAAU+uE,SAAV,GAAsB,+DAAtB;EACAj9D,QAAAA,OAAO,CAAC8E,KAAR,CAAcxa,CAAd;EACA;EACH;EAEJ;;;+BAIQ;EAAA;;EAEL,UAAIgzD,MAAM,GAAG,KAAKqf,QAAlB;;EAEA,UAAI,KAAKG,QAAL,GAAgB,KAAKF,QAArB,GAAgC,IAApC,EAA0C;EACtC,aAAKD,QAAL,GAAgB,KAAhB;EACH;;EAED,WAAKt0C,IAAL,CAAU;EAAE9lC,QAAAA,IAAI,EAAE;EAAR,OAAV;;EACA,UAAI+6D,MAAJ,EAAY;EAER,aAAKof,MAAL,CAAY/jF,OAAZ,CAAoB,UAACuV,IAAD,EAAO5S,KAAP,EAAiB;EACjC;EACA,cAAG,CAAC,MAAI,CAACg0C,QAAT,EAAmB;;EACnB,cAAI,MAAI,CAACotC,MAAL,CAAYniF,MAAZ,GAAqB,CAArB,IAA0Be,KAAK,KAAK,MAAI,CAACohF,MAAL,CAAYniF,MAAZ,GAAqB,CAA7D,EAAgE;EAC5D,YAAA,MAAI,CAAC+0C,QAAL,CAAc6R,SAAd,GAA0B,IAA1B;EACH,WAFD,MAEO;EACH,YAAA,MAAI,CAAC7R,QAAL,CAAc6R,SAAd,GAA0B,KAA1B;EACH,WAPgC;EASjC;EACA;EACA;EACA;;;EACA,UAAA,MAAI,CAAC7R,QAAL,CAActC,MAAd,CAAqB9+B,IAAI,CAACgvE,MAA1B,EAAkChvE,IAAI,CAACivE,OAAvC,EAbiC;;EAiBpC,SAjBD;EAkBA,aAAKL,QAAL,GAAgB,IAAI7c,IAAJ,GAAW4c,OAAX,EAAhB;EACH;;EACD,WAAKx0C,IAAL,CAAU;EAAE9lC,QAAAA,IAAI,EAAE;EAAR,OAAV;EACH;;;oCAEa;EACV,UAAIoB,EAAE,GAAG,IAAT;EACA,WAAKqpC,MAAL;EACA,WAAKowC,OAAL,GAAezgF,MAAM,CAAC0gF,qBAAP,CAA6B,YAAY;EACpD15E,QAAAA,EAAE,CAAC25E,WAAH;EACH,OAFc,CAAf;EAGH;;;wCAGiB;EACd3gF,MAAAA,MAAM,CAAC4gF,oBAAP,CAA4B,KAAKH,OAAjC;EACA,WAAKA,OAAL,GAAe,IAAf;EACH;;;8BAEOlvE,MAAM;EACV,WAAKwuE,MAAL,CAAYrkF,IAAZ,CAAiB6V,IAAjB;EACH;;;iCAEUA,MAAM;EAEb;EACA,UAAI5S,KAAK,GAAG,KAAKohF,MAAL,CAAYpjF,OAAZ,CAAoB4U,IAApB,CAAZ;;EACA,UAAI5S,KAAK,IAAI,CAAb,EAAgB;EACZ,aAAKohF,MAAL,CAAY73E,MAAZ,CAAmBvJ,KAAnB,EAA0B,CAA1B;EACH;EACJ;EACD;;;;;;;qCAIuC;EAAA,2BAA5BE,IAA4B;EAAA,UAA5BA,IAA4B,0BAArB,EAAqB;EAAA,4BAAjByzC,KAAiB;EAAA,UAAjBA,KAAiB,2BAAT,KAAS;;EACnC,UAAIuuC,MAAM,GAAG,IAAIltB,KAAJ,EAAb;;EACAktB,MAAAA,MAAM,CAAC1tE,EAAP,CAAU,SAAV,EAAqB,YAAY;EAC7B,YAAI,KAAKoe,QAAT,EAAmB;EACf,eAAKA,QAAL,CAAc0xB,OAAd;EACH;;EACD,YAAI,KAAK/f,QAAT,EAAmB;EACf,eAAKA,QAAL,CAAc+f,OAAd;EACH;EACJ,OAPD;;EAQA49B,MAAAA,MAAM,CAAChiF,IAAP,GAAcA,IAAd,CAVmC;;EAanC,UAAIyzC,KAAJ,EAAW;EACP,YAAIwuC,YAAY,GAAGD,MAAM,CAACx8D,MAAP,CAAc/B,QAAjC;EACAw+D,QAAAA,YAAY,CAAC,CAAD,CAAZ,GAAkB,CAAEA,YAAY,CAAC,CAAD,CAAhC;EACAA,QAAAA,YAAY,CAAC,CAAD,CAAZ,GAAkB,CAAEA,YAAY,CAAC,CAAD,CAAhC;EACAA,QAAAA,YAAY,CAAC,CAAD,CAAZ,GAAkB,CAAEA,YAAY,CAAC,CAAD,CAAhC;EACAA,QAAAA,YAAY,CAAC,EAAD,CAAZ,GAAmB,CAAEA,YAAY,CAAC,EAAD,CAAjC;EACAD,QAAAA,MAAM,CAAC1uC,gBAAP,GAA0B,KAA1B;EACH;;EAGD,WAAKiuC,OAAL,CAAa1kF,IAAb,CAAkBmlF,MAAlB,EAvBmC;;;EAwBnC,aAAOA,MAAP;EACH;;;oCAEa;EACV;EACA,WAAKb,QAAL,GAAgB,IAAhB;EACH;;;mCACY;EACT,UAAI,KAAKrtC,QAAT,EAAmB;EACf,aAAKA,QAAL,CAAcoM,MAAd,CAAqBja,KAArB;EACH;EACJ;;;;IAhJmBznB;;ECHxB;AAEA,EAAO,IAAM0jE,QAAQ,GAAG,WAAjB;AACP,EAAO,IAAMC,SAAS,GAAG,YAAlB;;AAGP,EAAO,IAAMC,IAAI,GAAG;EAChBC,EAAAA,IAAI,EAAE,MADU;EAEhBC,EAAAA,GAAG,EAAE,KAFW;EAGhBC,EAAAA,MAAM,EAAE,QAHQ;EAIhBC,EAAAA,KAAK,EAAE,OAJS;EAKhBC,EAAAA,MAAM,EAAE,QALQ;EAMhBC,EAAAA,OAAO,EAAE,SANO;EAOhBC,EAAAA,QAAQ,EAAE,UAPM;EAQhBC,EAAAA,UAAU,EAAE,YARI;EAShBC,EAAAA,WAAW,EAAE,aATG;;EAAA,CAAb;AAYP,EAAO,IAAMC,SAAS,GAAG;EACrBT,EAAAA,IAAI,EAAE,MADe;EAErBG,EAAAA,KAAK,EAAE,OAFc;EAGrBF,EAAAA,GAAG,EAAE,KAHgB;EAIrBC,EAAAA,MAAM,EAAE,QAJa;EAKrB18C,EAAAA,KAAK,EAAE,OALc;EAMrBD,EAAAA,IAAI,EAAE;EANe,CAAlB;;MCLDm9C;;;EACF,gBAAYC,UAAZ,EAAwBC,QAAxB,EAAkC;EAAA;;EAE9B,SAAKvB,MAAL,GAAc,IAAI9sB,KAAJ,EAAd;EACA,SAAK+sB,OAAL,GAAe,IAAf;EAEA,SAAK3hF,IAAL,GAAYijF,QAAQ,IAAI,EAAxB;EAEA,SAAKD,UAAL,GAAkBA,UAAlB;EACA,SAAKlvC,QAAL,GAAgBkvC,UAAU,CAAClvC,QAA3B;EAEA,SAAKxhC,KAAL,GAAa,CAAb;EACA,SAAKC,MAAL,GAAc,CAAd;EAEA,SAAK6jE,MAAL,GAAc,CAAd;EACA,SAAK9R,GAAL,GAAW,EAAX;EACA,SAAKh0C,IAAL,GAAY,GAAZ;EACA,SAAKC,GAAL,GAAW,KAAX;EACA,SAAKwhB,IAAL,GAAY,IAAZ;EACA,SAAK0oB,SAAL,GAAiB,IAAImc,YAAJ,EAAjB;EACA,SAAKsM,QAAL,GAAgB,IAAhB;EAEH;;;;kCAEW;EACR,aAAO,KAAKvB,OAAZ;EACH;;;iCACU;EACP,aAAO,KAAKD,MAAZ;EACH;;;mCACY97E,KAAK;EAEd,WAAK60D,SAAL,CAAe0oB,aAAf,CAA6Bv9E,GAA7B,EAAkC,KAAK+7E,OAAvC;EACA,aAAO,KAAKlnB,SAAZ;EACH;;;8BAEOnoD,OAAOC,QAAQ;EACnB,WAAKD,KAAL,GAAaA,KAAb;EACA,WAAKC,MAAL,GAAcA,MAAd;EACA,WAAK6jE,MAAL,GAAc,KAAK7jE,MAAL,GAAc,KAAKD,KAAL,GAAa,KAAKC,MAAhC,GAAyC,CAAvD;EACA,WAAKuhC,QAAL,CAAcsvC,aAAd,CAA4BjiF,MAAM,CAACqO,gBAAP,IAA2B,CAAvD;EACA,WAAKskC,QAAL,CAAc0T,OAAd,CAAsBl1C,KAAtB,EAA6BC,MAA7B;EAGH;;;oCAEakW,OAAO;EACjB,WAAKi5D,MAAL,CAAYl5B,UAAZ,GAAyB//B,KAAzB;EACH;;;kCACW46D,KAAK;EACb,WAAKH,QAAL,GAAgBG,GAAhB;EACH;;;gCAGS7kF,KAAK;EACX,WAAKkjF,MAAL,CAAYv7D,GAAZ,CAAgB3nB,GAAhB;EACH;;;mCAGYA,KAAK;EAEd,WAAKkjF,MAAL,CAAY1zC,MAAZ,CAAmBxvC,GAAnB;EACH;;;;8BAGOuzC,MAAM;EACV,WAAKA,IAAL,GAAYA,IAAZ;EACA,UAAIuxC,YAAY,GAAG,KAAKJ,QAAxB;EAEA,UAAI9M,MAAM,GAAG,KAAKA,MAAlB,CAJU;;EAMV,UAAI3+C,QAAQ,GAAG6rD,YAAY,CAAC7rD,QAA5B;;EAEA,UAAIsa,IAAI,KAAK,aAAb,EAA4B;EACxB,aAAK4vC,OAAL,GAAe,IAAIxL,iBAAJ,CAAsB,KAAK7R,GAA3B,EAAgC,KAAK8R,MAArC,EAA6C,KAAK9lD,IAAlD,EAAwD,KAAKC,GAA7D,CAAf,CADwB;EAGxB;EAGA;EAEA;;EACA,aAAKoxD,OAAL,CAAatvE,QAAb,CAAsBa,GAAtB,CAA0B,CAA1B,EAA6B,CAA7B,EAAgCukB,QAAhC;EAIH,OAbD,MAaO;EACH;EACA;EACA,aAAKkqD,OAAL,GAAe,IAAIlL,kBAAJ,CAAuB6M,YAAY,CAACC,QAAb,GAAwB,CAAC,CAAhD,EAAmDD,YAAY,CAACC,QAAb,GAAwB,CAA3E,EAA8ED,YAAY,CAACE,SAAb,GAAyB,CAAvG,EAA0GF,YAAY,CAACE,SAAb,GAAyB,CAAE,CAArI,EAAwI,KAAKlzD,IAA7I,EAAmJ,KAAKC,GAAxJ,CAAf;;EACA,aAAKoxD,OAAL,CAAatvE,QAAb,CAAsBa,GAAtB,CAA0B,CAA1B,EAA6B,CAA7B,EAAgCukB,QAAhC;EACH,OA1BS;;EA8Bb;;;4CAEqB;EAClB,UAAIA,QAAQ,GAAG,KAAKyrD,QAAL,CAAcO,WAA7B;EACA,WAAK9B,OAAL,GAAe,IAAIlL,kBAAJ,CAAuB,CAAvB,EAA0B,KAAKnkE,KAA/B,EAAsC,CAAtC,EAAyC,CAAC,KAAKC,MAA/C,EAAuD,KAAK+d,IAA5D,EAAkE,KAAKC,GAAvE,CAAf;;EACA,WAAKoxD,OAAL,CAAatvE,QAAb,CAAsBa,GAAtB,CAA0B,CAA1B,EAA6B,CAA7B,EAAgCukB,QAAhC;EACH;;;uCAI4C;EAAA,UAA9BisD,YAA8B,uEAAf,IAAIr/D,OAAJ,EAAe;EAEzC,UAAI3iB,MAAM,GAAG;EAAE4Q,QAAAA,KAAK,EAAE,CAAT;EAAYC,QAAAA,MAAM,EAAE,CAApB;EAAuBoxE,QAAAA,KAAK,EAAE;EAA9B,OAAb;;EACA,UAAI,KAAK5xC,IAAL,IAAa,OAAjB,EAA0B;EACtBrwC,QAAAA,MAAM,CAAC4Q,KAAP,GAAe5T,IAAI,CAACqnB,KAAL,CAAW,KAAK47D,OAAL,CAAa3wE,KAAb,GAAqB,KAAK2wE,OAAL,CAAa1wE,IAA7C,CAAf;EACAvP,QAAAA,MAAM,CAAC6Q,MAAP,GAAgB7T,IAAI,CAACqnB,KAAL,CAAW,KAAK47D,OAAL,CAAaxwE,GAAb,GAAmB,KAAKwwE,OAAL,CAAatxD,MAA3C,CAAhB;EAEH;;EAED,UAAI,KAAK0hB,IAAL,IAAa,aAAjB,EAAgC;EAE5B,YAAI6xC,cAAc,GAAG,KAAKjC,OAAL,CAAatvE,QAAb,CAAsBjP,KAAtB,EAArB;;EACA,YAAIghE,IAAI,GAAGwf,cAAc,CAACnwD,UAAf,CAA0BiwD,YAA1B,CAAX;;EACA,YAAIrf,IAAI,GAAGxgD,KAAK,CAACzf,QAAN,CAAe,KAAKkgE,GAApB,CAAX,CAJ4B;;;EAK5B,YAAI/xD,MAAM,GAAG,IAAI7T,IAAI,CAAC6lE,GAAL,CAASF,IAAI,GAAG,CAAhB,CAAJ,GAAyBD,IAAtC;EAEA1iE,QAAAA,MAAM,CAAC4Q,KAAP,GAAeC,MAAM,GAAG,KAAK6jE,MAA7B;EACA10E,QAAAA,MAAM,CAAC6Q,MAAP,GAAgBA,MAAhB;EAGH;;EACD,UAAI,KAAKD,KAAL,IAAc,CAAlB,EAAqB;EACjB5Q,QAAAA,MAAM,CAACiiF,KAAP,GAAejiF,MAAM,CAAC4Q,KAAP,GAAe,KAAKA,KAAnC;EACH;;EAID,aAAO5Q,MAAP;EAEH;;;qCAEc+vB,QAAQ;EACnB,UAAMwzC,gBAAgB,GAAG,IAAI5gD,OAAJ,EAAzB;EACA,aAAOoN,MAAM,CAACijC,aAAP,CAAqBuQ,gBAArB,CAAP;EACH;;;6BACMlzD,QAAQC,SAAS6xE,aAAa;EACjC,WAAKr8B,OAAL,CAAaz1C,MAAb,EAAqBC,OAArB;;EAEA,UAAI,KAAK+/B,IAAL,IAAa,aAAjB,EAAgC;EAC5B,aAAK4vC,OAAL,CAAavL,MAAb,GAAsB,KAAKA,MAA3B;EACH,OAFD,MAEO;EAEH,aAAKuL,OAAL,CAAa1wE,IAAb,GAAoB4yE,WAAW,GAAG,KAAKzN,MAAnB,GAA4B,CAAC,CAAjD;EACA,aAAKuL,OAAL,CAAa3wE,KAAb,GAAqB6yE,WAAW,GAAG,KAAKzN,MAAnB,GAA4B,CAAjD;EACA,aAAKuL,OAAL,CAAaxwE,GAAb,GAAmB0yE,WAAW,GAAG,CAAjC;EACA,aAAKlC,OAAL,CAAatxD,MAAb,GAAsBwzD,WAAW,GAAG,CAAE,CAAtC;EAEH,OAZgC;;;EAcjC,UAAI,KAAK7jF,IAAL,KAAcmiF,SAAlB,EAA6B;EAEzB,aAAKR,OAAL,CAAa1wE,IAAb,GAAoB,CAApB;EACA,aAAK0wE,OAAL,CAAa3wE,KAAb,GAAqB,KAAKsB,KAA1B;EACA,aAAKqvE,OAAL,CAAaxwE,GAAb,GAAmB,CAAnB;EACA,aAAKwwE,OAAL,CAAatxD,MAAb,GAAsB,CAAC,KAAK9d,MAA5B;EACH;;EACD,WAAKovE,OAAL,CAAarL,sBAAb;EACH;;;gCAES;EAEN,WAAKoL,MAAL,GAAc,IAAd;EACA,WAAKC,OAAL,GAAe,IAAf;EACA,WAAKqB,UAAL,GAAkB,IAAlB;EACA,WAAKlvC,QAAL,GAAgB,IAAhB;EACH;;;;;;ECrLL,IAAMgwC,qBAAqB,GAAI,YAAY;EACvC,MAAI5xE,MAAM,GAAGtC,QAAQ,CAACkyC,eAAT,CAAyB,8BAAzB,EAAyD,QAAzD,CAAb;EACA,MAAIviD,OAAO,GAAG2S,MAAM,CAAC6vC,UAAP,CAAkB,IAAlB,CAAd;EACA,SAAOxiD,OAAP;EACH,CAJ6B,EAA9B;;MAOMwkF;;;EACF,wBAWQ;EAAA,mFAAJ,EAAI;EAAA,0BAVJ3+E,KAUI;EAAA,QAVJA,KAUI,2BAVI,CAUJ;EAAA,8BATJ27D,SASI;EAAA,QATJA,SASI,+BATQ,SASR;EAAA,gCARJC,WAQI;EAAA,QARJA,WAQI,iCARU,IAQV;EAAA,8BAPJj7B,SAOI;EAAA,QAPJA,SAOI,+BAPQ,CAOR;EAAA,6BANJ46B,QAMI;EAAA,QANJA,QAMI,8BANO,EAMP;EAAA,+BALJD,UAKI;EAAA,QALJA,UAKI,gCALS,iBAKT;EAAA,2BAJJsjB,MAII;EAAA,QAJJA,MAII,4BAJK,KAIL;EAAA,+BAHJC,UAGI;EAAA,QAHJA,UAGI,gCAHS,GAGT;EAAA,qCAFJC,mBAEI;EAAA,QAFJA,mBAEI,sCAFkB,GAElB;EAAA,2BADJhyE,MACI;EAAA,QADJA,MACI,4BADK,IACL;;EAAA;;EACJ,SAAK9M,KAAL,GAAaA,KAAK,IAAIjE,MAAM,CAACqO,gBAAhB,IAAoC,CAAjD;EACA,SAAK4C,KAAL,GAAa;EACT2uD,MAAAA,SAAS,EAATA,SADS;EAETC,MAAAA,WAAW,EAAXA,WAFS;EAGTj7B,MAAAA,SAAS,EAATA,SAHS;EAIT46B,MAAAA,QAAQ,EAARA,QAJS;EAKTD,MAAAA,UAAU,EAAVA,UALS;EAMTsjB,MAAAA,MAAM,EAANA,MANS;EAOTC,MAAAA,UAAU,EAAVA;EAPS,KAAb;EASA,SAAK7xE,KAAL,CAAWouD,SAAX,GAAuB,MAAvB,CAXI;;EAYJ,SAAKpuD,KAAL,CAAWkwD,YAAX,GAA0B,KAA1B;EACA,SAAK4hB,mBAAL,GAA2BA,mBAA3B;EAEA,SAAKC,UAAL,GAAkB,OAAlB;EAEA,SAAKjyE,MAAL,GAAcA,MAAM,IAAItC,QAAQ,CAACkyC,eAAT,CAAyB,8BAAzB,EAAyD,QAAzD,CAAxB;EACA,SAAKviD,OAAL,GAAe,KAAK2S,MAAL,CAAY6vC,UAAZ,CAAuB,IAAvB,CAAf;EAEH;;;;gCACS;EACN,aAAO,CAAC,KAAK3vC,KAAL,CAAW4xE,MAAX,GAAoB,OAApB,GAA8B,SAA/B,IAA4C,KAAK5xE,KAAL,CAAWuuD,QAAvD,GAAkE,KAAlE,GAA0E,KAAKvuD,KAAL,CAAWsuD,UAA5F;EACH;;;mCACY0jB,KAAgB;EAAA,UAAX/hB,IAAW,uEAAJ,EAAI;EACzB,UAAI/vD,KAAK,GAAG,CAAZ;;EACA,UAAIwxE,qBAAJ,EAA2B;EACvBA,QAAAA,qBAAqB,CAACO,IAAtB;;EACAP,QAAAA,qBAAqB,CAACzhB,IAAtB,GAA6BA,IAAI,IAAI,KAAKc,OAAL,EAArC;EACA7wD,QAAAA,KAAK,GAAG,KAAKgyE,aAAL,CAAmBR,qBAAnB,EAA0C,KAAKS,aAAL,CAAmBH,GAAnB,CAA1C,CAAR;;EACAN,QAAAA,qBAAqB,CAACU,OAAtB;EACH;EACD,aAAOlyE,KAAP;EACH;;;oCAEa8xE,KAAK;EACf,aAAO,KAAKK,cAAL,CAAoB,KAAKF,aAAL,CAAmBH,GAAnB,CAApB,CAAP;EACH;;;oCACariB,KAAqB;EAAA,UAAhBW,SAAgB,uEAAJ,EAAI;EAC/B,UAAIgiB,QAAQ,GAAG,CAAf;EAEAhiB,MAAAA,SAAS,CAACvlE,OAAV,CAAkB,UAAAinF,GAAG,EAAI;EACrB,YAAIO,gBAAgB,GAAG5iB,GAAG,CAACyB,WAAJ,CAAgB4gB,GAAhB,EAAqB9xE,KAA5C;EACAoyE,QAAAA,QAAQ,GAAGhmF,IAAI,CAACsC,GAAL,CAAS0jF,QAAT,EAAmBC,gBAAnB,CAAX;EACH,OAHD;EAKA,aAAOD,QAAP;EACH;;;oCAEaN,KAAK;EACfA,MAAAA,GAAG,GAAGA,GAAG,GAAG,EAAZ;EACA,aAAOA,GAAG,CAAC/oE,KAAJ,CAAU,KAAK8oE,UAAf,CAAP;EACH;;;qCAEczhB,WAAW;EACtB,aAAO,KAAKtwD,KAAL,CAAWuuD,QAAX,GAAsB+B,SAAS,CAAC3jE,MAAhC,GAAyC,KAAKqT,KAAL,CAAW6xE,UAA3D;EACH;;;;8CAGuBW,OAAO;EAAA;;EAC3B,UAAIF,QAAQ,GAAG,CAAf;EAAA,UACIG,SAAS,GAAG,CADhB;EAAA,UAEIC,WAAW,GAAG,CAFlB;EAAA,UAGIC,YAAY,GAAG,CAHnB;EAAA,UAII17C,GAAG,GAAG,EAJV;EAAA,UAKI27C,KAAK,GAAG,EALZ;EAOA,UAAIC,EAAE,GAAG,CAAT;EACA,UAAIC,EAAE,GAAG,CAAT,CAT2B;;EAW3BN,MAAAA,KAAK,CAACznF,OAAN,CAAc,UAAAojE,IAAI,EAAI;EAClB,YAAIjuD,KAAK,GAAG,KAAI,CAAC8wD,YAAL,CAAkB7C,IAAlB,CAAZ;;EACAmkB,QAAAA,QAAQ,GAAGhmF,IAAI,CAACsC,GAAL,CAAS0jF,QAAT,EAAmBpyE,KAAnB,CAAX;EACAuyE,QAAAA,SAAS,GAAGnmF,IAAI,CAACsC,GAAL,CAAS6jF,SAAT,EAAoB,KAAI,CAACM,aAAL,CAAmB5kB,IAAnB,CAApB,CAAZ;EACA0kB,QAAAA,EAAE,IAAI3yE,KAAN;;EACA,YAAI2yE,EAAE,GAAG,KAAI,CAACf,mBAAd,EAAmC;EAC/BgB,UAAAA,EAAE;EACFD,UAAAA,EAAE,GAAG3yE,KAAL;EACH;EACJ,OATD,EAX2B;;EAsB3B,UAAI4yE,EAAE,IAAI,CAAV,EAAa;EACTJ,QAAAA,WAAW,GAAGjhE,KAAK,CAACO,cAAN,CAAqB6gE,EAArB,CAAd;EACAF,QAAAA,YAAY,GAAGlhE,KAAK,CAACO,cAAN,CAAqBygE,SAArB,CAAf;EACH,OAHD,MAGO;EACH;EACAC,QAAAA,WAAW,GAAG,KAAKZ,mBAAnB;EACAa,QAAAA,YAAY,GAAGlhE,KAAK,CAACO,cAAN,CAAqBygE,SAAS,GAAGK,EAAjC,CAAf;EACH;;EAED,UAAIE,EAAE,GAAG,CAAT,CA/B2B;;EAgC3BH,MAAAA,EAAE,GAAG,CAAL;EACAC,MAAAA,EAAE,GAAG,CAAL,CAjC2B;;EAoC3BN,MAAAA,KAAK,CAACznF,OAAN,CAAc,UAACojE,IAAD,EAAOzgE,KAAP,EAAiB;EAC3B,YAAIwS,KAAK,GAAG,KAAI,CAAC8wD,YAAL,CAAkB7C,IAAlB,CAAZ;;EACA,YAAIhuD,MAAM,GAAG,KAAI,CAAC4yE,aAAL,CAAmB5kB,IAAnB,CAAb;;EACAykB,QAAAA,KAAK,CAACzkB,IAAD,CAAL,GAAc,CAACjuD,KAAD,EAAQC,MAAR,CAAd;EACA6yE,QAAAA,EAAE,GAAGH,EAAL;EACAA,QAAAA,EAAE,IAAI3yE,KAAN;;EACA,YAAIxS,KAAK,IAAI,CAAb,EAAgB;EACZolF,UAAAA,EAAE,GAAG3yE,MAAL;EACH;;EAED,YAAI0yE,EAAE,GAAG,KAAI,CAACf,mBAAd,EAAmC,CAAnC,MAEO;EACHgB,UAAAA,EAAE,IAAI3yE,MAAN;EACA0yE,UAAAA,EAAE,GAAG3yE,KAAL;EACA8yE,UAAAA,EAAE,GAAG,CAAL;EACH;;EAED,YAAIC,EAAE,GAAIN,YAAY,GAAGG,EAAzB;;EACA,YAAIj5D,EAAE,GAAGg5D,EAAT;;EACA,YAAIK,GAAG,GAAIP,YAAY,GAAGG,EAAf,GAAoB3yE,MAA/B;;EACA82B,QAAAA,GAAG,CAACk3B,IAAD,CAAH,GAAY,CACR6kB,EADQ,EACJC,EADI,EAERp5D,EAFQ,EAEJo5D,EAFI,EAGRp5D,EAHQ,EAGJq5D,GAHI,EAIRF,EAJQ,EAIJE,GAJI,CAAZ;EAOH,OA5BD;EAiCA,aAAO;EACHR,QAAAA,WAAW,EAAXA,WADG;EAEHC,QAAAA,YAAY,EAAZA,YAFG;EAGHF,QAAAA,SAAS,EAATA,SAHG;EAIHH,QAAAA,QAAQ,EAARA,QAJG;EAKHr7C,QAAAA,GAAG,EAAHA,GALG;EAMH27C,QAAAA,KAAK,EAALA;EANG,OAAP;EASH;;;oCAGa1yE,OAAOC,QAAQ;EAEzB,WAAKL,MAAL,CAAYI,KAAZ,GAAoBA,KAAK,GAAG,KAAKlN,KAAjC;EACA,WAAK8M,MAAL,CAAYK,MAAZ,GAAqBA,MAAM,GAAG,KAAKnN,KAAnC;EACA,WAAK8M,MAAL,CAAYE,KAAZ,CAAkBE,KAAlB,GAA0BA,KAAK,GAAG,IAAlC;EACA,WAAKJ,MAAL,CAAYE,KAAZ,CAAkBG,MAAlB,GAA2BA,MAAM,GAAG,IAApC;EACA,WAAKhT,OAAL,CAAa6F,KAAb,CAAmB,KAAKA,KAAxB,EAA+B,KAAKA,KAApC;EAEA,WAAKkN,KAAL,GAAaA,KAAb;EACA,WAAKC,MAAL,GAAcA,MAAd,CATyB;;EAYzB,WAAKhT,OAAL,CAAawhE,SAAb,GAAyB,eAAzB;EACA,WAAKxhE,OAAL,CAAayiE,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B1vD,KAAK,GAAG,KAAKlN,KAA1C,EAAiDmN,MAAM,GAAG,KAAKnN,KAA/D;EACH;;;gCAESw/E,OAAO;EAAA;;EACb,UAAIz8E,EAAE,GAAG,IAAT;EACA,UAAIo9E,GAAG,GAAG,EAAV;;EAFa,kCAIwD,KAAKC,uBAAL,CAA6BZ,KAA7B,CAJxD;EAAA,UAIPF,QAJO,yBAIPA,QAJO;EAAA,UAIGG,SAJH,yBAIGA,SAJH;EAAA,UAIcC,WAJd,yBAIcA,WAJd;EAAA,UAI2BC,YAJ3B,yBAI2BA,YAJ3B;EAAA,UAIyC17C,GAJzC,yBAIyCA,GAJzC;EAAA,UAI8C27C,KAJ9C,yBAI8CA,KAJ9C;;EAKb,WAAKS,aAAL,CAAmBX,WAAnB,EAAgCC,YAAhC;EAEA58E,MAAAA,EAAE,CAAC5I,OAAH,CAAWwhE,SAAX,GAAuB54D,EAAE,CAACiK,KAAH,CAAS2uD,SAAhC;;EACA,UAAI54D,EAAE,CAACiK,KAAH,CAAS4uD,WAAb,EAA0B;EACtB74D,QAAAA,EAAE,CAAC5I,OAAH,CAAWyhE,WAAX,GAAyB74D,EAAE,CAACiK,KAAH,CAAS4uD,WAAlC;EACA74D,QAAAA,EAAE,CAAC5I,OAAH,CAAWwmC,SAAX,GAAuB59B,EAAE,CAACiK,KAAH,CAAS2zB,SAAhC;EACH;;EACD59B,MAAAA,EAAE,CAAC5I,OAAH,CAAWihE,SAAX,GAAuBr4D,EAAE,CAACiK,KAAH,CAASouD,SAAhC;EACAr4D,MAAAA,EAAE,CAAC5I,OAAH,CAAW+iE,YAAX,GAA0Bn6D,EAAE,CAACiK,KAAH,CAASkwD,YAAnC;EACAn6D,MAAAA,EAAE,CAAC5I,OAAH,CAAWmmF,2BAAX,GAAyC,IAAzC;EAEAv9E,MAAAA,EAAE,CAAC5I,OAAH,CAAW8iE,IAAX,GAAkB,KAAKc,OAAL,EAAlB;EAGAyhB,MAAAA,KAAK,CAACznF,OAAN,CAAc,UAAAojE,IAAI,EAAI;EAClB,YAAI7E,EAAE,GAAGryB,GAAG,CAACk3B,IAAD,CAAZ;EAEAglB,QAAAA,GAAG,CAAChlB,IAAD,CAAH,GAAY,IAAIh5B,YAAJ,CAAiB,CACzBm0B,EAAE,CAAC,CAAD,CAAF,GAAQopB,WADiB,EACJppB,EAAE,CAAC,CAAD,CAAF,GAAQqpB,YADJ,EAEzBrpB,EAAE,CAAC,CAAD,CAAF,GAAQopB,WAFiB,EAEJppB,EAAE,CAAC,CAAD,CAAF,GAAQqpB,YAFJ,EAGzBrpB,EAAE,CAAC,CAAD,CAAF,GAAQopB,WAHiB,EAGJppB,EAAE,CAAC,CAAD,CAAF,GAAQqpB,YAHJ,EAIzBrpB,EAAE,CAAC,CAAD,CAAF,GAAQopB,WAJiB,EAIJppB,EAAE,CAAC,CAAD,CAAF,GAAQqpB,YAJJ,CAAjB,CAAZ;;EAOA,YAAIY,MAAM,GAAG,MAAI,CAACpB,aAAL,CAAmBhkB,IAAnB,CAAb;;EAEAolB,QAAAA,MAAM,CAACxoF,OAAP,CAAe,UAACinF,GAAD,EAAMrvD,IAAN,EAAe;EAC1B5sB,UAAAA,EAAE,CAAC5I,OAAH,CAAWqjE,QAAX,CAAoBwhB,GAApB,EAAyB1oB,EAAE,CAAC,CAAD,CAA3B,EAAgCqpB,YAAY,GAAGrpB,EAAE,CAAC,CAAD,CAAjB,GAAuB,MAAI,CAACtpD,KAAL,CAAWuuD,QAAX,GAAsB,MAAI,CAACvuD,KAAL,CAAW6xE,UAAjC,GAA8ClvD,IAArG;;EACA,cAAI5sB,EAAE,CAACiK,KAAH,CAAS4uD,WAAb,EAA0B;EACtB74D,YAAAA,EAAE,CAAC5I,OAAH,CAAWojE,UAAX,CAAsByhB,GAAtB,EAA2B1oB,EAAE,CAAC,CAAD,CAA7B,EAAkCqpB,YAAY,GAAGrpB,EAAE,CAAC,CAAD,CAAjB,GAAuB,MAAI,CAACtpD,KAAL,CAAWuuD,QAAX,GAAsB,MAAI,CAACvuD,KAAL,CAAW6xE,UAAjC,GAA8ClvD,IAAvG;EACH;EACJ,SALD;EAOH,OAnBD;;EAqBA,UAAI5zB,MAAM,CAACykF,MAAX,EAAmB;EACf;EACAh2E,QAAAA,QAAQ,CAACa,IAAT,CAAcsC,WAAd,CAA0B5K,EAAE,CAAC+J,MAA7B;EAEA/J,QAAAA,EAAE,CAAC+J,MAAH,CAAUE,KAAV,CAAgBC,QAAhB,GAA2B,UAA3B;EACAlK,QAAAA,EAAE,CAAC+J,MAAH,CAAUE,KAAV,CAAgBnB,IAAhB,GAAuB,OAAvB;EACA9I,QAAAA,EAAE,CAAC+J,MAAH,CAAUE,KAAV,CAAgBjB,GAAhB,GAAsB,GAAtB;EAEH;;EAED,aAAO;EACHo0E,QAAAA,GAAG,EAAHA,GADG;EAEHP,QAAAA,KAAK,EAALA,KAFG;EAGHN,QAAAA,QAAQ,EAARA,QAHG;EAIHG,QAAAA,SAAS,EAATA;EAJG,OAAP;EAMH;;;kCAGWT,KAAK;EACb,aAAO;EACH9xE,QAAAA,KAAK,EAAE,KAAK8wD,YAAL,CAAkBghB,GAAlB,CADJ;EAEH7xE,QAAAA,MAAM,EAAE,KAAK4yE,aAAL,CAAmBf,GAAnB;EAFL,OAAP;EAIH;;;;;;EChML,IAAMyB,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;EAC3B,SAAO,IAAIroC,oBAAJ,CAAsB;EACzB/0B,IAAAA,KAAK,EAAC,WAAS/pB,IAAI,CAACoE,MAAL;EADU,GAAtB,CAAP;EAGH,CAJD;;;EAOA,IAAMgjF,SAAS,GAAG;EAEd;EACAC,EAAAA,SAHc,uBAG8D;EAAA,QAAlEzzE,KAAkE,uEAA1D,CAA0D;EAAA,QAAvDC,MAAuD,uEAA9C,CAA8C;EAAA,QAA3CurB,KAA2C,uEAAnC,CAAmC;EAAA,QAAhCkoD,SAAgC,uEAApBH,gBAAgB,EAAI;EAExE;EACA,QAAII,WAAW,GAAG,IAAI58D,OAAJ,EAAlB;EACA,QAAIqJ,QAAQ,GAAG,IAAI+0C,WAAJ,CAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAAf;EAEA,QAAIye,IAAI,GAAG,IAAI1rB,IAAJ,CAAS9nC,QAAT,EAAmBszD,SAAnB,CAAX,CANwE;;EASxEtzD,IAAAA,QAAQ,CAACE,QAAT,CAAkBz1B,OAAlB,CAA0B,UAAAgpF,OAAO,EAAI;EACjCA,MAAAA,OAAO,CAACt0D,SAAR,CAAkB,GAAlB,EADiC;EAGpC,KAHD,EATwE;EAcxE;EACA;EACA;EACA;EACA;EACA;EAEA;;EACAo0D,IAAAA,WAAW,CAACG,SAAZ,CAAsB9zE,KAAtB,EAA6BC,MAA7B,EAAqCurB,KAArC;EAEApL,IAAAA,QAAQ,CAACE,QAAT,CAAkBz1B,OAAlB,CAA0B,UAAAgpF,OAAO,EAAI;EACjCA,MAAAA,OAAO,CAACtgE,YAAR,CAAqBogE,WAArB;EACH,KAFD;EAIA,WAAOC,IAAP;EACH,GAhCa;EAiCd;EACAG,EAAAA,cAlCc,4BAkCmE;EAAA,QAAlE/zE,KAAkE,uEAA1D,CAA0D;EAAA,QAAvDC,MAAuD,uEAA9C,CAA8C;AAAA,EAAA,QAAhCyzE,SAAgC,uEAApBH,gBAAgB,EAAI;EAE7E;EACA,QAAII,WAAW,GAAG,IAAI58D,OAAJ,EAAlB,CAH6E;;EAK7E,QAAIi9D,IAAI,GAAG,EAAX;EACA,QAAI5zD,QAAQ,GAAG,IAAIm2C,gBAAJ,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B,EAA8Byd,IAA9B,CAAf;EAEA,QAAIJ,IAAI,GAAG,IAAI1rB,IAAJ,CAAS9nC,QAAT,EAAmBszD,SAAnB,CAAX,CAR6E;;EAW7EtzD,IAAAA,QAAQ,CAACE,QAAT,CAAkBz1B,OAAlB,CAA0B,UAAAgpF,OAAO,EAAI;EAEjCA,MAAAA,OAAO,CAACt0D,SAAR,CAAkB,GAAlB,EAFiC;EAKjC;EACH,KAND,EAX6E;EAmB7E;EACA;EACA;EACA;EACA;EACA;EAEA;;EACA,QAAI7Y,MAAM,GAAG1G,KAAK,GAAG,GAArB;EAEA2zE,IAAAA,WAAW,CAACG,SAAZ,CAAsBptE,MAAtB,EAA8BzG,MAA9B,EAAsCyG,MAAtC;EAEA0Z,IAAAA,QAAQ,CAACE,QAAT,CAAkBz1B,OAAlB,CAA0B,UAAAgpF,OAAO,EAAI;EACjCA,MAAAA,OAAO,CAACtgE,YAAR,CAAqBogE,WAArB;EACH,KAFD;EAKA,WAAOC,IAAP;EAGH,GAzEa;EA0EdK,EAAAA,UA1Ec,wBA0E+D;EAAA,QAAlEj0E,KAAkE,uEAA1D,CAA0D;EAAA,QAAvDC,MAAuD,uEAA9C,CAA8C;AAAA,EAAA,QAAhCyzE,SAAgC,uEAApBH,gBAAgB,EAAI;EAEzE;EACA,QAAII,WAAW,GAAG,IAAI58D,OAAJ,EAAlB,CAHyE;;EAKzE,QAAIqJ,QAAQ,GAAG,IAAIm2C,gBAAJ,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B,EAA8B,EAA9B,CAAf;EAEA,QAAIqd,IAAI,GAAG,IAAI1rB,IAAJ,CAAS9nC,QAAT,EAAmBszD,SAAnB,CAAX,CAPyE;;EAWzEtzD,IAAAA,QAAQ,CAACE,QAAT,CAAkBz1B,OAAlB,CAA0B,UAAAgpF,OAAO,EAAI;EAEjCA,MAAAA,OAAO,CAACt0D,SAAR,CAAkB,GAAlB,EAFiC;EAIjC;EACH,KALD,EAXyE;EAmBzE;EACA;EACA;EACA;EACA;EACA;EAEA;;EACA,QAAI7Y,MAAM,GAAG1G,KAAK,GAAG,GAArB;EACA2zE,IAAAA,WAAW,CAACG,SAAZ,CAAsBptE,MAAtB,EAA8BzG,MAA9B,EAAsCyG,MAAtC;EAEA0Z,IAAAA,QAAQ,CAACE,QAAT,CAAkBz1B,OAAlB,CAA0B,UAAAgpF,OAAO,EAAI;EACjCA,MAAAA,OAAO,CAACtgE,YAAR,CAAqBogE,WAArB;EACH,KAFD;EAKA,WAAOC,IAAP;EAGH,GAhHa;EAkHd;EACAM,EAAAA,WAnHc,yBAmH+G;EAAA,QAAjHl0E,KAAiH,uEAAzG,CAAyG;EAAA,QAAtGC,MAAsG,uEAA7F,CAA6F;EAAA,QAA1FyzE,SAA0F,uEAA9EniF,SAA8E;EAAA,QAAnE4iF,QAAmE,uEAAxD;EAACr0B,MAAAA,GAAG,EAAC,IAAI/tC,OAAJ;EAAL,KAAwD;EAAA,QAAnCylB,KAAmC,uEAA3BjmC,SAA2B;EAAA,QAAhB6iF,SAAgB,uEAAJ,EAAI;;EAEzH,QAAI,CAACV,SAAL,EAAgB;EAEZA,MAAAA,SAAS,GAAG,IAAIpoC,mBAAJ,CAAwB;EAChCn1B,QAAAA,KAAK,EAAEi+D,SAAS,CAAC3lB,SAAV,IAAuB,WAAWriE,IAAI,CAACoE,MAAL,EADT;EAEhC2hC,QAAAA,IAAI,EAAE1kB,SAF0B;EAGhC4kB,QAAAA,WAAW,EAAE,IAHmB;EAIhCyJ,QAAAA,OAAO,EAAEs4C,SAAS,CAAC1gE,KAAV,IAAmB,CAJI;EAKhCif,QAAAA,aAAa,EAAE,IALiB;EAMhCC,QAAAA,mBAAmB,EAAE,CANW;EAOhCC,QAAAA,kBAAkB,EAAE,GAPY;EAQhC1H,QAAAA,SAAS,EAAE,IARqB;EAShCqH,QAAAA,UAAU,EAAE;EAToB,OAAxB,CAAZ;EAYH;;EAED,QAAI6hD,cAAc,GAAG,IAAI9f,aAAJ,CAAkBv0D,KAAlB,EAAyBC,MAAzB,CAArB;EACA,QAAIq0E,SAAS,GAAG,IAAIpsB,IAAJ,CAASmsB,cAAT,EAAyBX,SAAzB,CAAhB;;EAEA,QAAIS,QAAQ,CAACr0B,GAAT,CAAa//B,MAAb,CAAoB,IAAIhO,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAApB,CAAJ,EAA+C;EAC3CuiE,MAAAA,SAAS,CAACC,OAAV,CAAkBhjE,KAAK,CAACzf,QAAN,CAAe,EAAf,CAAlB;EACH;;EACD,QAAIqiF,QAAQ,CAACr0B,GAAT,CAAa//B,MAAb,CAAoB,IAAIhO,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAApB,CAAJ,EAAgD;EAC5CuiE,MAAAA,SAAS,CAACC,OAAV,CAAkBhjE,KAAK,CAACzf,QAAN,CAAe,CAAC,EAAhB,CAAlB;EACH;;EAED,QAAIqiF,QAAQ,CAACr0B,GAAT,CAAa//B,MAAb,CAAoB,IAAIhO,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAApB,CAAJ,EAA+C;EAC3CuiE,MAAAA,SAAS,CAACE,OAAV,CAAkBjjE,KAAK,CAACzf,QAAN,CAAe,CAAC,EAAhB,CAAlB;EACH;;EAED,QAAIqiF,QAAQ,CAACr0B,GAAT,CAAa//B,MAAb,CAAoB,IAAIhO,OAAJ,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB,CAAnB,CAApB,CAAJ,EAAgD;EAC5CuiE,MAAAA,SAAS,CAACE,OAAV,CAAkBjjE,KAAK,CAACzf,QAAN,CAAe,EAAf,CAAlB;EACH;;EACD,QAAIqiF,QAAQ,CAACr0B,GAAT,CAAa//B,MAAb,CAAoB,IAAIhO,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAApB,CAAJ,EAAgD;EAC5CuiE,MAAAA,SAAS,CAACC,OAAV,CAAkBhjE,KAAK,CAACzf,QAAN,CAAe,GAAf,CAAlB;EACH;;EAED,QAAIqiF,QAAQ,CAACl1D,MAAb,EAAqB;EACjBq1D,MAAAA,SAAS,CAACv0E,QAAV,CAAmB1O,IAAnB,CAAwB8iF,QAAQ,CAACl1D,MAAjC;EAEH;;EACD,QAAIuY,KAAJ,EAAW;EACPA,MAAAA,KAAK,CAAC4gB,OAAN,GAAgB+7B,QAAQ,CAAC/7B,OAAzB;EACA5gB,MAAAA,KAAK,CAAC3jB,GAAN,CAAUygE,SAAV;EACH;;EACDA,IAAAA,SAAS,CAAChoC,WAAV,GAAwB,CAAC,GAAzB;EACA,WAAOgoC,SAAP;EAEH,GArKa;EAuKd;EACAG,EAAAA,gBAxKc,8BAwK2B;EAAA,QAAxBttE,MAAwB,uEAAf,EAAe;EAAA,QAAXutE,SAAW;EACrC;EAEA,QAAI3iD,QAAQ,GAAG,IAAIoZ,iBAAJ,CAAsB;EACjCh1B,MAAAA,KAAK,EAAEu+D,SAAS,CAAChmB,WADgB;EAEjC;EACAvjC,MAAAA,SAAS,EAAE,IAHsB;EAIjCqH,MAAAA,UAAU,EAAE;EAJqB,KAAtB,CAAf;;EAOA,QAAIkiD,SAAS,CAACC,QAAV,IAAsB,QAA1B,EAAoC;EAChC5iD,MAAAA,QAAQ,GAAG,IAAIqZ,kBAAJ,CAAuB;EAC9Bj1B,QAAAA,KAAK,EAAEu+D,SAAS,CAAChmB;EADa,OAAvB,CAAX;EAGH;;EAGD,QAAItuC,QAAQ,GAAG,IAAI2yC,QAAJ,EAAf;EACA5rD,IAAAA,MAAM,CAACtc,OAAP,CAAe,UAAA2D,IAAI,EAAI;EACnB4xB,MAAAA,QAAQ,CAACE,QAAT,CAAkB/1B,IAAlB,CAAuBiE,IAAvB;EACH,KAFD;EAGA,QAAIi0B,IAAI,GAAG,IAAI2nC,IAAJ,CAAShqC,QAAT,EAAmB2R,QAAnB,CAAX,CArBqC;EAuBrC;;EAEA,WAAOtP,IAAP;EAEH,GAnMa;EAqMd;EACAmyD,EAAAA,UAtMc,sBAsMHC,OAtMG,EAsMMnyD,SAtMN,EAsMiBj2B,MAtMjB,EAsMyBgnC,SAtMzB,EAsMoCqhD,SAtMpC,EAsM+C;EAEzD,QAAIt9C,KAAK,GAAG,IAAIgrB,KAAJ,EAAZ;EACA,QAA6B//B,IAAI,GAAG,IAApC;EAEAC,IAAAA,SAAS,CAAClP,SAAV;EACA,QAAIuhE,OAAO,GAAG,IAAIvpC,gBAAJ,CAAqB;EAC/Br1B,MAAAA,KAAK,EAAE2+D,SADwB;EAE/BziD,MAAAA,WAAW,EAAE,IAFkB;EAG/ByM,MAAAA,SAAS,EAAErL,SAHoB;EAGT;EACtBsL,MAAAA,UAAU,EAAE,IAAIvJ,OAAJ,CAAY,KAAKx1B,KAAjB,EAAwB,KAAKC,MAA7B,CAJmB;EAK/B2+B,MAAAA,MAAM,EAAE;EALuB,KAArB,CAAd;;EAQA,QAAI,CAAC90C,CAAC,CAAC6B,OAAF,CAAUkpF,OAAV,CAAL,EAAyB;EACrBA,MAAAA,OAAO,GAAG,CAACA,OAAD,CAAV;EACH;;EACD,QAAIG,gBAAgB,GAAG,EAAvB;EACAH,IAAAA,OAAO,CAAChqF,OAAR,CAAgB,UAAAkL,MAAM,EAAI;EACtBi/E,MAAAA,gBAAgB,GAAG,EAAnB;EACAA,MAAAA,gBAAgB,CAACzqF,IAAjB,CAAsB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAtB;EAEA,UAAIggF,QAAQ,GAAG,IAAIx4D,OAAJ,EAAf,CAJsB;;EAMtB,UAAI6E,KAAK,GAAG,IAAI7E,OAAJ,EAAZ;EACA6E,MAAAA,KAAK,CAACvlB,IAAN,CAAWqxB,SAAX;EACA9L,MAAAA,KAAK,CAACvF,cAAN,CAAqB5kB,MAArB;EACA89E,MAAAA,QAAQ,CAAC12D,GAAT,CAAa+C,KAAb;EAEAo+D,MAAAA,gBAAgB,CAACzqF,IAAjB,CAAsBggF,QAAQ,CAACjlC,OAAT,EAAtB;EACA,UAAI2vC,gBAAgB,GAAG,IAAI3oB,YAAJ,EAAvB;EAEA2oB,MAAAA,gBAAgB,CAACxoB,YAAjB,CAA8B3iE,CAAC,CAACgF,OAAF,CAAUkmF,gBAAV,CAA9B;EAEAvyD,MAAAA,IAAI,GAAG,IAAIkqC,KAAJ,CAAUsoB,gBAAV,EAA4BF,OAA5B,CAAP;EACAtyD,MAAAA,IAAI,CAACk1B,QAAL,GAAgBhrC,iBAAhB;EACA8V,MAAAA,IAAI,CAAC4nC,oBAAL;EACA5nC,MAAAA,IAAI,CAAC3vB,KAAL,CAAW8N,GAAX,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;EACA6hB,MAAAA,IAAI,CAAC1iB,QAAL,CAAc1O,IAAd,CAAmB0E,MAAnB;EACAyhC,MAAAA,KAAK,CAAC3jB,GAAN,CAAU4O,IAAV;EAEH,KAvBD;EA0BA,WAAO+U,KAAP;EAEH,GApPa;EAsPd;EACA09C,EAAAA,gBAvPc,4BAuPG/tE,MAvPH,EAuPWssB,SAvPX,EAuPsBqhD,SAvPtB,EAuPiC;EAC3C,QAAIC,OAAO,GAAG,IAAIvpC,gBAAJ,CAAqB;EAC/Br1B,MAAAA,KAAK,EAAE2+D,SADwB;EAE/Bh2C,MAAAA,SAAS,EAAErL,SAFoB;EAET;EACtBsL,MAAAA,UAAU,EAAE,IAAIvJ,OAAJ,CAAY,KAAKx1B,KAAjB,EAAwB,KAAKC,MAA7B,CAHmB;EAI/B2+B,MAAAA,MAAM,EAAE,KAJuB;EAK/BzT,MAAAA,SAAS,EAAE,IALoB;EAM/BqH,MAAAA,UAAU,EAAE;EANmB,KAArB,CAAd;EAQA,QAAIyiD,gBAAgB,GAAG,IAAI3oB,YAAJ,EAAvB;EAEA,QAAI0oB,gBAAgB,GAAG,EAAvB;EACA7tE,IAAAA,MAAM,CAACtc,OAAP,CAAe,UAAAyc,KAAK,EAAI;EACpB0tE,MAAAA,gBAAgB,GAAGA,gBAAgB,CAACvqF,MAAjB,CAAwB6c,KAAK,CAACg+B,OAAN,EAAxB,CAAnB;EACH,KAFD;EAGA2vC,IAAAA,gBAAgB,CAACxoB,YAAjB,CAA8BuoB,gBAA9B;EACA,QAAIvyD,IAAI,GAAG,IAAIkqC,KAAJ,CAAUsoB,gBAAV,EAA4BF,OAA5B,CAAX;EACAtyD,IAAAA,IAAI,CAACk1B,QAAL,GAAgBhrC,iBAAhB;EACA8V,IAAAA,IAAI,CAAC4nC,oBAAL;EACA,WAAO5nC,IAAP;EAEH,GA5Qa;EA8Qd;EACA0yD,EAAAA,iBA/Qc,6BA+QIluE,CA/QJ,EA+QOmtE,SA/QP,EA+QkBV,SA/QlB,EA+Q6B;EACvC,QAAItzD,QAAQ,GAAG,IAAI+zC,oBAAJ,CAAyBltD,CAAzB,EAA4B,EAA5B,CAAf;;EACA,QAAI,CAACysE,SAAL,EAAgB;EAEZA,MAAAA,SAAS,GAAG,IAAIjoC,iBAAJ,CAAmB;EAC3Bt1B,QAAAA,KAAK,EAAEi+D,SAAS,CAAC3lB,SAAV,IAAuB,WAAWriE,IAAI,CAACoE,MAAL,EADd;EAE3B6hC,QAAAA,WAAW,EAAE,IAFc;EAG3ByJ,QAAAA,OAAO,EAAEs4C,SAAS,CAAC1gE,KAAV,IAAmB,CAHD;EAI3ByX,QAAAA,SAAS,EAAE,IAJgB;EAK3BqH,QAAAA,UAAU,EAAE;EALe,OAAnB,CAAZ;EAQH;;EAED,QAAIxN,MAAM,GAAG,IAAIqoC,MAAJ,CAAWqmB,SAAX,CAAb;EACA1uD,IAAAA,MAAM,CAAC5E,QAAP,GAAkBA,QAAlB;EAEA,WAAO4E,MAAP;EAEH,GAlSa;EAoSd;EACAowD,EAAAA,YArSc,wBAqSDnuE,CArSC,EAqSEmtE,SArSF,EAqSaV,SArSb,EAqSwB;EAClC,QAAI,CAACA,SAAL,EAAgB;EAEZA,MAAAA,SAAS,GAAG,IAAIxoC,oBAAJ,CAAsB;EAC9B/0B,QAAAA,KAAK,EAAEi+D,SAAS,CAAC3lB,SAAV,IAAuB,WAAWriE,IAAI,CAACoE,MAAL,EADX;EAE9B6hC,QAAAA,WAAW,EAAE,IAFiB;EAG9ByJ,QAAAA,OAAO,EAAEs4C,SAAS,CAAC1gE,KAAV,IAAmB,CAHE;EAI9B;EACA;EACA;EACAyX,QAAAA,SAAS,EAAE,IAPmB;EAQ9BqH,QAAAA,UAAU,EAAE;EARkB,OAAtB,CAAZ;EAWH;;EAED,QAAIpS,QAAQ,GAAG,IAAI+1C,oBAAJ,CAAyBlvD,CAAzB,CAAf;EAEA,QAAI2sE,IAAI,GAAG,IAAI1rB,IAAJ,CAAS9nC,QAAT,EAAmBszD,SAAnB,CAAX;EAEA,WAAOE,IAAP;EAEH,GA3Ta;EA6Td;EACAyB,EAAAA,eA9Tc,2BA8TE/C,KA9TF,EA8TS9jB,SA9TT,EA8ToB;EAC9B;EACA;EACA;EACA;EAEA,QAAI8mB,MAAM,GAAG,EAAb;EAEA,QAAIC,UAAU,GAAG,IAAI9D,UAAJ,CAAejjB,SAAf,CAAjB;;EAEA,QAAI,CAAC1kE,CAAC,CAAC6B,OAAF,CAAU2mF,KAAV,CAAL,EAAuB;EACnBA,MAAAA,KAAK,GAAG,CAACA,KAAD,CAAR;EACH;;EAED,QAAIkD,UAAU,GAAGD,UAAU,CAACE,SAAX,CAAqBnD,KAArB,CAAjB;EAEA,QAAIvyE,QAAQ,GAAG,IAAIk1B,YAAJ,CAAiB,CAC5B,CAAE,GAD0B,EACrB,CAAE,GADmB,EACd,CADc,EAE5B,GAF4B,EAEvB,CAAE,GAFqB,EAEhB,CAFgB,EAG5B,GAH4B,EAGvB,GAHuB,EAGlB,CAHkB,EAI5B,CAAE,GAJ0B,EAIrB,GAJqB,EAIhB,CAJgB,CAAjB,CAAf;EAOA,QAAI1F,OAAO,GAAG,IAAI4Q,OAAJ,EAAd;EACA5Q,IAAAA,OAAO,CAAC6Q,KAAR,GAAgBm1C,UAAU,CAAC31E,MAA3B;EAEA2vB,IAAAA,OAAO,CAAC+Q,KAAR,GAAgBtxB,cAAhB;EACAugB,IAAAA,OAAO,CAACgR,KAAR,GAAgBvxB,cAAhB;EACAugB,IAAAA,OAAO,CAACkR,SAAR,GAAoBnxB,YAApB;EACAigB,IAAAA,OAAO,CAACiR,SAAR,GAAoBlxB,YAApB;EACAigB,IAAAA,OAAO,CAAC6K,WAAR,GAAsB,IAAtB;EAEA,QAAIs7C,aAAa,GAAG,IAAIjqC,iBAAJ,CAAmB;EACnCt1B,MAAAA,KAAK,EAAEq4C,SAAS,CAACC,SADkB;EAEnC1jE,MAAAA,GAAG,EAAEwkC,OAF8B;EAGnC8C,MAAAA,WAAW,EAAE,IAHsB;EAInCG,MAAAA,UAAU,EAAE;EAJuB,KAAnB,CAApB;EAQA8/C,IAAAA,KAAK,CAACznF,OAAN,CAAc,UAACojE,IAAD,EAAOzgE,QAAP,EAAiB;EAC3B,UAAImoF,QAAQ,GAAGH,UAAU,CAAC9C,KAAX,CAAiBzkB,IAAjB,CAAf,CAD2B;;EAG3B,UAAIn7D,KAAK,GAAG,IAAIif,OAAJ,CAAY4jE,QAAQ,CAAC,CAAD,CAAR,GAAcA,QAAQ,CAAC,CAAD,CAAlC,EAAuC,CAAvC,EAA0C,CAA1C,CAAZ;EACA7iF,MAAAA,KAAK,CAACue,cAAN,CAAqBskE,QAAQ,CAAC,CAAD,CAA7B;EACA,UAAI3wD,MAAM,GAAG,IAAIqoC,MAAJ,CAAWqoB,aAAX,CAAb;EAGA,UAAIt1D,QAAQ,GAAG,IAAIgY,cAAJ,EAAf;EACAhY,MAAAA,QAAQ,CAACoY,QAAT,CAAkB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAAlB;EACApY,MAAAA,QAAQ,CAACmY,YAAT,CAAsB,UAAtB,EAAkC,IAAI5B,sBAAJ,CAA2B52B,QAA3B,EAAqC,CAArC,EAAwC,KAAxC,CAAlC;EACAqgB,MAAAA,QAAQ,CAACmY,YAAT,CAAsB,IAAtB,EAA4B,IAAI5B,sBAAJ,CAA2B6+C,UAAU,CAACvC,GAAX,CAAehlB,IAAf,CAA3B,EAAiD,CAAjD,EAAoD,KAApD,CAA5B;EAEAjpC,MAAAA,MAAM,CAAC5E,QAAP,GAAkBA,QAAlB;EACA4E,MAAAA,MAAM,CAAClyB,KAAP,CAAazB,IAAb,CAAkByB,KAAlB;EACAkyB,MAAAA,MAAM,CAACu8B,QAAP,GAAkB;EACd0M,QAAAA,IAAI,EAAEA,IADQ;EAEd53C,QAAAA,IAAI,EAAEs/D,QAFQ;EAGdvD,QAAAA,QAAQ,EAAEoD,UAAU,CAACpD,QAHP;EAIdG,QAAAA,SAAS,EAAEiD,UAAU,CAACjD,SAJR;;EAAA,OAAlB;EAQAvtD,MAAAA,MAAM,CAACuzB,aAAP,GAAuB,KAAvB;EACA+8B,MAAAA,MAAM,CAAC/qF,IAAP,CAAYy6B,MAAZ;EAEH,KA1BD;EA6BA,WAAOswD,MAAP;EAEH,GArYa;EAuYd;EACAM,EAAAA,kBAxYc,gCAwY6C;EAAA,QAAxCzuE,MAAwC,uEAA/B,EAA+B;EAAA,QAA3BitE,SAA2B,uEAAf,EAAe;EAAA,QAAXV,SAAW;;EAEvD,QAAI,CAACA,SAAL,EAAgB;EAEZA,MAAAA,SAAS,GAAG,IAAIxoC,oBAAJ,CAAsB;EAC9B/0B,QAAAA,KAAK,EAAEi+D,SAAS,CAAC3lB,SAAV,IAAuB,WAAWriE,IAAI,CAACoE,MAAL,EADX;EAE9B2hC,QAAAA,IAAI,EAAExkB,UAFwB;EAG9B0kB,QAAAA,WAAW,EAAE,IAHiB;EAI9ByJ,QAAAA,OAAO,EAAEs4C,SAAS,CAAC1gE,KAAV,IAAmB,GAJE;EAK9B;EACA;EACA;EACAyX,QAAAA,SAAS,EAAE,IARmB;EAS9BqH,QAAAA,UAAU,EAAE;EATkB,OAAtB,CAAZ;EAYH,KAhBsD;;;EAmBvD,QAAI6M,SAAS,GAAG+4B,MAAM,CAACC,WAAP,CAAmBlxD,MAAnB,EAA2B,IAA3B,EAAiC,CAAjC,CAAhB;EACA,QAAIiZ,QAAQ,GAAG,IAAIgY,cAAJ,EAAf;EACA,QAAIy9C,cAAc,GAAG,IAAIl/C,sBAAJ,CAA2BxvB,MAA3B,EAAmC,CAAnC,CAArB;EACAiZ,IAAAA,QAAQ,CAACmY,YAAT,CAAsB,UAAtB,EAAkCs9C,cAAlC;EACAz1D,IAAAA,QAAQ,CAACoY,QAAT,CAAkB6G,SAAlB;EAEA,QAAIu0C,IAAI,GAAG,IAAI1rB,IAAJ,CAAS9nC,QAAT,EAAmBszD,SAAnB,CAAX;EAEA,WAAOE,IAAP;EACH,GApaa;EAsadkC,EAAAA,UAtac,wBAsa4C;EAAA,QAA/C3uE,MAA+C,uEAAtC,EAAsC;EAAA,QAAlCqkB,KAAkC;EAAA,QAA3B4oD,SAA2B,uEAAf,EAAe;EAAA,QAAXV,SAAW;;EACtD,QAAI,CAACA,SAAL,EAAgB;EAEZA,MAAAA,SAAS,GAAG,IAAInoC,iBAAJ,CAAsB;EAC9Bp1B,QAAAA,KAAK,EAAEi+D,SAAS,CAAC3lB,SAAV,IAAuB,WAAWriE,IAAI,CAACoE,MAAL,EADX;EAE9B2hC,QAAAA,IAAI,EAAExkB,UAFwB;EAG9B0kB,QAAAA,WAAW,EAAE,IAHiB;EAI9ByJ,QAAAA,OAAO,EAAEs4C,SAAS,CAAC1gE,KAAV,IAAmB,GAJE;EAK9B;EACA;EACA;EACAyX,QAAAA,SAAS,EAAE,IARmB;EAS9BqH,QAAAA,UAAU,EAAE;EATkB,OAAtB,CAAZ;EAYH,KAfqD;EAkBtD;EACA;EACA;EACA;EACA;;;EAEA,QAAI+qC,KAAK,GAAG,IAAI0O,KAAJ,CAAU9kE,MAAV,CAAZ;EACA,QAAI4uE,eAAe,GAAG;EAClBvqD,MAAAA,KAAK,EAAEA,KAAK,IAAI,EADE;EAElBqyC,MAAAA,YAAY,EAAE,IAFI;EAGlBG,MAAAA,aAAa,EAAE,CAHG;EAIlBJ,MAAAA,KAAK,EAAE,CAJW;EAKlBG,MAAAA,SAAS,EAAE,CALO;EAMlBD,MAAAA,cAAc,EAAE;EANE,KAAtB;EAQA,QAAI19C,QAAQ,GAAG,IAAIg9C,qBAAJ,CAA0BG,KAA1B,EAAiCwY,eAAjC,CAAf;EACA,QAAInC,IAAI,GAAG,IAAI1rB,IAAJ,CAAS9nC,QAAT,EAAmBszD,SAAnB,CAAX;EAEA,WAAOE,IAAP;EACH,GA3ca;EA8cd;EACAoC,EAAAA,WA/cc,uBA+cF/1E,MA/cE,EA+cMu3D,YA/cN,EA+csE;EAAA,QAAlDlyD,WAAkD,uEAApC,CAAoC;EAAA,QAAjCf,UAAiC;EAAA,QAArBO,QAAqB;EAAA,QAAX4uE,SAAW;EAChF,QAAIhd,cAAc,GAAG,EAArB;EACA,QAAIuf,GAAG,GAAG7pF,IAAI,CAACwF,EAAL,GAAU,CAApB,CAFgF;;EAKhF,QAAIskF,WAAW,GAAG3kE,KAAK,CAACzf,QAAN,CAAeyS,UAAU,GAAG,EAA5B,CAAlB;;EACA,QAAI4xE,SAAS,GAAG5kE,KAAK,CAACzf,QAAN,CAAegT,QAAQ,GAAG,EAA1B,CAAhB;;EAGA,QAAI,CAAC4uE,SAAL,EAAgB;EAEZA,MAAAA,SAAS,GAAG,IAAIxoC,oBAAJ,CAAsB;EAC9B/0B,QAAAA,KAAK,EAAE,WAAW/pB,IAAI,CAACoE,MAAL,EADY;EAE9B2hC,QAAAA,IAAI,EAAExkB,UAFwB;EAG9B0kB,QAAAA,WAAW,EAAE,IAHiB;EAI9ByJ,QAAAA,OAAO,EAAE,CAJqB;EAK9B3Q,QAAAA,SAAS,EAAE,IALmB;EAM9BqH,QAAAA,UAAU,EAAE;EANkB,OAAtB,CAAZ;EAQH;;EACD,QAAIpS,QAAQ,GAAG,IAAIm3C,gBAAJ,CAAqBC,YAArB,EAAmCv3D,MAAnC,EAA2CqF,WAA3C,EAAwDoxD,cAAxD,EAAwE,CAACuf,GAAG,GAAGC,WAAP,IAAsBD,GAA9F,EAAmG,EAAEE,SAAS,GAAGD,WAAd,CAAnG,CAAf;EAEA,QAAItC,IAAI,GAAG,IAAI1rB,IAAJ,CAAS9nC,QAAT,EAAmBszD,SAAnB,CAAX;EACA,WAAOE,IAAP;EAEH;EAxea,CAAlB;;MCnDMwC;;;EAEF,uBAAYC,SAAZ,EAAuBC,UAAvB,EAAmC;EAAA;;EAE/B,SAAKC,UAAL,GAAkB,IAAI5H,SAAJ,EAAlB;;EACA,SAAK4H,UAAL,CAAgBxgC,IAAhB;;EACA,SAAK/1C,KAAL,GAAaq2E,SAAb;EACA,SAAKp2E,MAAL,GAAcq2E,UAAd;EACH;;;;+BAEQ;EACL,WAAKE,UAAL;;EACA,WAAKD,UAAL,CAAgB/G,WAAhB;EACH;;;iCAEUmB,UAAU;EACjB,UAAI8F,KAAK,GAAG,IAAIhG,IAAJ,CAAS,KAAK8F,UAAd,EAA0B5F,QAA1B,CAAZ;;EACA,WAAK4F,UAAL,CAAgBG,OAAhB,CAAwBD,KAAxB;;EACA,aAAOA,KAAP;EACH;;;8BAEO9F,UAAU;EACd,UAAIrgF,MAAM,GAAG,IAAb;;EACA,WAAKimF,UAAL,CAAgB3H,MAAhB,CAAuB/jF,OAAvB,CAA+B,UAAAuV,IAAI,EAAI;EACnC,YAAIA,IAAI,CAAC1S,IAAL,KAAcijF,QAAlB,EAA4B;EACxBrgF,UAAAA,MAAM,GAAG8P,IAAT;EACH;EACJ,OAJD;;EAMA,aAAO9P,MAAP;EACH;;;+BACQ0D,KAAK;EACV,aAAO,KAAKuiF,UAAL,CAAgBv8C,QAAhB,CAAyBhmC,GAAzB,CAAP;EACH;;;gCAES;EAAA;;EAEN,WAAKuiF,UAAL,CAAgB3H,MAAhB,CAAuB/jF,OAAvB,CAA+B,UAAA8rF,EAAE,EAAI;EACjC,QAAA,KAAI,CAACJ,UAAL,CAAgBK,UAAhB,CAA2BD,EAA3B;;EACAA,QAAAA,EAAE,CAAC7kC,OAAH;EACH,OAHD;;EAIA,WAAKykC,UAAL,CAAgBM,eAAhB;;EACA,WAAKN,UAAL,CAAgB/0C,QAAhB,CAAyBsQ,OAAzB;;EACA,WAAKykC,UAAL,CAAgB/0C,QAAhB,GAA2B,IAA3B;EACH;;;6BACMxhC,OAAOC,QAAQsxE,aAAa;EAC/B,WAAKgF,UAAL,CAAgB3H,MAAhB,CAAuB/jF,OAAvB,CAA+B,UAAA8rF,EAAE,EAAI;EACjCA,QAAAA,EAAE,CAACr0E,MAAH,CAAUtC,KAAV,EAAiBC,MAAjB,EAAyBsxE,WAAzB;EACH,OAFD;EAGH;;;oCACa;EACV,WAAKgF,UAAL,CAAgBO,WAAhB;EACH;;;mCACW;EACR,WAAKP,UAAL,CAAgBC,UAAhB;EACH;;;;;;EAKLpsF,MAAM,CAACkc,MAAP,CAAc8vE,WAAW,CAAClsF,SAA1B,EAAqCspF,SAArC;;EC3DA;;MACMuD;;;;;EACF,0BAAYC,IAAZ,EAAkB;EAAA;;EAAA;;EACd;EAEA,UAAKC,KAAL,GAAaD,IAAb;EACA,UAAKxiF,KAAL,GAAa,EAAb,CAJc;;EAOd,UAAKuB,MAAL,GAAc,IAAIgc,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAd,CAPc;;EASd,UAAKkN,MAAL,GAAc,IAAIlN,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAd;EAEA,UAAKmlE,QAAL,GAAgB,IAAI34D,IAAJ,EAAhB;EACA,UAAKlI,IAAL,GAAY,IAAItE,OAAJ,EAAZ;EACA,UAAKolE,YAAL,GAAoB,IAAI54D,IAAJ,EAApB;EACA,UAAKowC,OAAL,GAAe;EACXhwD,MAAAA,IAAI,EAAE,CADK;EAEXE,MAAAA,GAAG,EAAE,CAFM;EAGXH,MAAAA,KAAK,EAAE,CAHI;EAIXqf,MAAAA,MAAM,EAAE,CAJG;EAKXq5D,MAAAA,KAAK,EAAE,CALI;EAMXC,MAAAA,IAAI,EAAE;EANK,KAAf;EASA,UAAKr3E,KAAL,GAAag3E,IAAI,CAACh3E,KAAlB;EACA,UAAKC,MAAL,GAAc+2E,IAAI,CAAC/2E,MAAnB;EAGA,UAAKq3E,QAAL,GAAgB,EAAhB;EACA,UAAK9/C,KAAL,GAAaw/C,IAAI,CAACO,GAAL,CAASv9C,QAAT,CAAkB;EAAEtsC,MAAAA,IAAI,EAAE;EAAR,KAAlB,CAAb;;EACA5D,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB,MAAKsmF,cAAL,CAAoBR,IAAI,CAAChjF,GAAzB,CAArB;;EA7Bc;EA+BjB;;;;qCAEcyjF,MAAM;EACjB,aAAOA,IAAP;EACH;;;6BACM;;;kCAGK;EACR;EAEA,UAAIC,YAAY,GAAG,IAAI/T,YAAJ,CAAiB,QAAjB,EAA2B,GAA3B,CAAnB,CAHQ;;EAKR,WAAKsT,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyB6jE,YAAzB;;EAEA,UAAIz4D,MAAM,GAAG,KAAKA,MAAL,CAAYnuB,KAAZ,EAAb;EACAmuB,MAAAA,MAAM,GAAG,KAAK24D,YAAL,CAAkB34D,MAAlB,CAAT,CARQ;EAWR;;EACA,UAAIqyB,SAAS,GAAG,GAAhB;EACA,UAAIumC,UAAU,GAAG,QAAjB,CAbQ;EAgBR;EACA;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EACA;;EAKA,UAAIC,UAAU,GAAG,EAAjB;EAEAA,MAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,IAAIrU,UAAJ,CAAeoU,UAAf,EAA2BvmC,SAA3B,CAAhB;EACA,UAAIvxC,QAAQ,GAAG,IAAIgS,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAf;EACAhS,MAAAA,QAAQ,CAACsR,cAAT,CAAwB,KAAxB;EACAymE,MAAAA,UAAU,CAAC,CAAD,CAAV,CAAc/3E,QAAd,CAAuB1O,IAAvB,CAA4B0O,QAA5B;;EACA,WAAKk3E,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyBikE,UAAU,CAAC,CAAD,CAAnC;;EAGAA,MAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,IAAIrU,UAAJ,CAAeoU,UAAf,EAA2BvmC,SAA3B,CAAhB;EACAvxC,MAAAA,QAAQ,GAAG,IAAIgS,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAX;EACAhS,MAAAA,QAAQ,CAACsR,cAAT,CAAwB,KAAxB;EACAymE,MAAAA,UAAU,CAAC,CAAD,CAAV,CAAc/3E,QAAd,CAAuB1O,IAAvB,CAA4B0O,QAA5B;;EACA,WAAKk3E,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyBikE,UAAU,CAAC,CAAD,CAAnC;;EAGAA,MAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,IAAIrU,UAAJ,CAAeoU,UAAf,EAA2BvmC,SAA3B,CAAhB;EACAvxC,MAAAA,QAAQ,GAAG,IAAIgS,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAC,CAApB,CAAX;EACAhS,MAAAA,QAAQ,CAACsR,cAAT,CAAwB,KAAxB;EACAymE,MAAAA,UAAU,CAAC,CAAD,CAAV,CAAc/3E,QAAd,CAAuB1O,IAAvB,CAA4B0O,QAA5B;;EACA,WAAKk3E,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyBikE,UAAU,CAAC,CAAD,CAAnC;;EAGAA,MAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,IAAIrU,UAAJ,CAAeoU,UAAf,EAA2BvmC,SAA3B,CAAhB;EACAvxC,MAAAA,QAAQ,GAAG,IAAIgS,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAX;EACAhS,MAAAA,QAAQ,CAACsR,cAAT,CAAwB,IAAxB;EACAymE,MAAAA,UAAU,CAAC,CAAD,CAAV,CAAc/3E,QAAd,CAAuB1O,IAAvB,CAA4B0O,QAA5B;;EACA,WAAKk3E,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyBikE,UAAU,CAAC,CAAD,CAAnC;EAEH;;;qCACc74D,QAAQ;EAEnB;EACAA,MAAAA,MAAM,GAAGA,MAAM,IAAI,KAAKA,MAAL,CAAYnuB,KAAZ,EAAnB;EACAmuB,MAAAA,MAAM,GAAG,KAAK24D,YAAL,CAAkB34D,MAAlB,CAAT;EACA,UAAI84D,WAAW,GAAG,KAAKd,KAAL,CAAWe,UAA7B;EACA,UAAI3I,OAAO,GAAG0I,WAAW,CAAC1I,OAA1B,CANmB;;EASnB,UAAIvd,IAAI,GAAGud,OAAO,CAACtvE,QAAR,CAAiBohB,UAAjB,CAA4BlC,MAA5B,CAAX;;EACA,UAAIlK,GAAG,GAAGxD,KAAK,CAACzf,QAAN,CAAeimF,WAAW,CAACnH,QAAZ,CAAqBl9D,KAApC,CAAV,CAVmB;;;EAWnB,UAAIc,KAAK,GAAGjD,KAAK,CAACzf,QAAN,CAAeimF,WAAW,CAACnH,QAAZ,CAAqBqH,IAApC,CAAZ,CAXmB;;;EAanB,UAAItwE,CAAC,GAAGmqD,IAAI,GAAG1lE,IAAI,CAACgY,GAAL,CAAS2Q,GAAT,CAAf;EACA,UAAI9jB,IAAI,GAAG6gE,IAAI,GAAG1lE,IAAI,CAAC8X,GAAL,CAAS6Q,GAAT,CAAlB;EACA,UAAIrN,CAAC,GAAGzW,IAAI,GAAG7E,IAAI,CAACgY,GAAL,CAASoQ,KAAT,CAAf;EACA,UAAI1D,CAAC,GAAG7f,IAAI,GAAG7E,IAAI,CAAC8X,GAAL,CAASsQ,KAAT,CAAf,CAhBmB;;EAkBnB,UAAI0jE,MAAM,GAAG,IAAInmE,OAAJ,CAAYrK,CAAZ,EAAeC,CAAf,EAAkBmJ,CAAlB,CAAb;EACAonE,MAAAA,MAAM,CAACrkE,GAAP,CAAWoL,MAAX;;EACAowD,MAAAA,OAAO,CAACtvE,QAAR,CAAiB1O,IAAjB,CAAsB6mF,MAAtB,EApBmB;;;EAsBnB7I,MAAAA,OAAO,CAAC7tB,MAAR,CAAeviC,MAAf,EAtBmB;;;EA0BnB,WAAKg4D,KAAL,CAAWkB,aAAX,CAAyB7nF,MAAzB,CAAgCe,IAAhC,CAAqC4tB,MAArC;EAEH;;;uCAEgBpkB,QAAQ;EACrB,UAAIA,MAAJ,EAAY;EACR;EACA;EACA,eAAO,KAAKu9E,mBAAL,CAAyBv9E,MAAzB,CAAP;EACH;EAGD;EACA;EAEA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACH;;;0CAEmBA,QAAQ;EACxB,UAAIhF,EAAE,GAAG,IAAT;EACA,UAAIlD,GAAG,GAAG,EAAV;EAEA,UAAI,CAAC7I,CAAC,CAAC6B,OAAF,CAAUkP,MAAV,CAAL,EAAwBA,MAAM,GAAG,CAACA,MAAD,CAAT;;EACxB/Q,MAAAA,CAAC,CAACiD,IAAF,CAAO8N,MAAP,EAAe,UAAUG,CAAV,EAAa;EACxB,YAAI,CAAClR,CAAC,CAAC6B,OAAF,CAAUqP,CAAV,CAAL,EAAmB;EACf,cAAInF,EAAE,CAACwiF,WAAH,CAAer9E,CAAf,EAAkBwK,OAAtB,EAA+B;EAC3B7S,YAAAA,GAAG,CAACpI,IAAJ,CAASyQ,CAAT;EACH;EACJ,SAJD,MAIO;EACH;EACA,cAAIvD,IAAI,GAAG,EAAX;;EACA3N,UAAAA,CAAC,CAACiD,IAAF,CAAOiO,CAAP,EAAU,UAAUs9E,GAAV,EAAe;EACrB,gBAAIziF,EAAE,CAACwiF,WAAH,CAAeC,GAAf,EAAoB9yE,OAAxB,EAAiC;EAC7B/N,cAAAA,IAAI,CAAClN,IAAL,CAAU+tF,GAAV;EACH;EACJ,WAJD;;EAKA,cAAI7gF,IAAI,CAAChL,MAAT,EAAiB;EACbkG,YAAAA,GAAG,CAACpI,IAAJ,CAASkN,IAAT;EACH;EACJ;EACJ,OAjBD;;EAkBA,aAAO9E,GAAP;EACH;;;kCAEWsJ,OAAO;EAAA;;EACf,UAAIs8E,SAAS,GAAG,IAAhB;EACA,UAAIjB,QAAQ,GAAG,IAAf;;EACA,UAAIz2E,GAAG,GAAG,SAANA,GAAM,CAAC23E,IAAD,EAAU;EAChB,YAAIA,IAAJ,EAAU;EACN,cAAIC,MAAM,GAAG,MAAI,CAACC,iBAAL,IAA0B,MAAI,CAACA,iBAAL,EAAvC;;EACA,cAAID,MAAJ,EAAY;EACRF,YAAAA,SAAS,GAAG;EACRtsF,cAAAA,GAAG,EAAEwsF,MADG;EAERlrF,cAAAA,KAAK,EAAE0O;EAFC,aAAZ;EAIH,WALD,MAKO;EACHs8E,YAAAA,SAAS,GAAG;EACRtsF,cAAAA,GAAG,EAAE,OADG;EAERsB,cAAAA,KAAK,EAAE0O;EAFC,aAAZ;EAIH;;EAEDnS,UAAAA,CAAC,CAACiD,IAAF,CAAOyrF,IAAP,EAAa,UAAUztF,GAAV,EAAe4B,CAAf,EAAkB;EAC3B,gBAAI7C,CAAC,CAAC6B,OAAF,CAAUZ,GAAV,CAAJ,EAAoB;EAChB8V,cAAAA,GAAG,CAAC9V,GAAD,CAAH;EACH,aAFD,MAEO,IAAIA,GAAG,CAACwtF,SAAS,CAACtsF,GAAX,CAAH,IAAsBssF,SAAS,CAAChrF,KAApC,EAA2C;EAC9C+pF,cAAAA,QAAQ,GAAGvsF,GAAX;EACA,qBAAO,KAAP;EACH;EACJ,WAPD;EAQH;EAEJ,OAzBD;;EA0BA8V,MAAAA,GAAG,CAAC,KAAK83E,SAAN,CAAH;EACA,aAAOrB,QAAP;EAEH;;;+BACQr7E,OAAO;EACZ,aAAO,KAAKo8E,WAAL,CAAiBp8E,KAAjB,KAA2B,KAAKo8E,WAAL,CAAiBp8E,KAAjB,EAAwBka,KAA1D;EACH;;;sCAEe;EACZ,UAAItgB,EAAE,GAAG,IAAT;EACA,UAAI3B,IAAI,GAAG,EAAX;;EACApK,MAAAA,CAAC,CAACiD,IAAF,CAAOjD,CAAC,CAACgF,OAAF,CAAU+G,EAAE,CAAC8iF,SAAb,CAAP,EAAgC,UAAU5tF,GAAV,EAAe4B,CAAf,EAAkB;EAC9C;EACA,YAAIisF,aAAa,GAAG,KAApB;;EACA9uF,QAAAA,CAAC,CAACiD,IAAF,CAAO8I,EAAE,CAACgjF,MAAV,EAAkB,UAAUC,IAAV,EAAgB;EAC9B,cAAIhvF,CAAC,CAAC0B,OAAF,CAAU1B,CAAC,CAACgF,OAAF,CAAU,CAACgqF,IAAI,CAAC78E,KAAN,CAAV,CAAV,EAAmClR,GAAG,CAACkR,KAAvC,IAAgD,CAAC,CAArD,EAAwD;EACpD28E,YAAAA,aAAa,GAAG,IAAhB;EACA,mBAAO,KAAP;EACH;EACJ,SALD;;EAOA,YAAIA,aAAJ,EAAmB;EACf1kF,UAAAA,IAAI,CAAC3J,IAAL,CAAU;EACNib,YAAAA,OAAO,EAAEza,GAAG,CAACya,OADP;EAEN9X,YAAAA,IAAI,EAAE3C,GAAG,CAACkR,KAFJ;EAGNA,YAAAA,KAAK,EAAElR,GAAG,CAACkR,KAHL;EAIN9F,YAAAA,GAAG,EAAEpL,GAAG,CAACoL,GAJH;EAKNggB,YAAAA,KAAK,EAAEprB,GAAG,CAACorB,KALL;EAMNiC,YAAAA,KAAK,EAAErtB,GAAG,CAACqtB;EANL,WAAV;EAQH;EACJ,OApBD;;EAqBA,aAAOlkB,IAAP;EACH;;;oCACa;EAEV,UAAI6kF,SAAS,GAAG,IAAIx6D,IAAJ,EAAhB;;EAEA,UAAItpB,IAAI,GAAG,KAAKgiF,KAAL,CAAWjjF,GAAX,CAAeQ,KAAf,CAAqBo8E,QAAhC,CAJU;;EAMV,UAAIlxE,OAAO,GAAGzK,IAAI,CAACi8E,SAAnB;EACA,UAAIzxE,MAAM,GAAGxK,IAAI,CAACg8E,QAAlB;EACA,UAAIr9B,MAAM,GAAG3+C,IAAI,CAAC+jF,QAAlB,CARU;;EAWV,UAAIC,WAAW,GAAGhkF,IAAI,CAACkwB,QAAL,IAAkB,IAAIpT,OAAJ,CAAYtS,MAAZ,EAAoB,CAApB,EAAuBm0C,MAAvB,CAAD,CAAiCnnD,MAAjC,EAAnC;;EAEA,UAAIysF,MAAM,GAAG,KAAKjC,KAAL,CAAWe,UAAX,CAAsBmB,cAAtB,CAAqC,IAAIpnE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAACknE,WAAnB,CAArC,EAAsE5H,KAAnF;;EAEA,UAAI5yD,IAAI,GAAG,CAAEhf,MAAF,GAAW,GAAX,GAAiB,KAAKkvD,OAAL,CAAahwD,IAAb,GAAoBu6E,MAAhD,CAfU;;EAiBV,UAAIx6D,IAAI,GAAG,CAAEhf,OAAF,GAAY,GAAZ,GAAkB,KAAKivD,OAAL,CAAa5wC,MAAb,GAAsBm7D,MAAnD;EACA,UAAIv6D,IAAI,GAAG,KAAKgwC,OAAL,CAAayoB,KAAb,GAAqB6B,WAAW,GAAG,GAAnC,GAAyCrlC,MAApD;EAEA,UAAIh1B,IAAI,GAAGnf,MAAM,GAAG,GAAT,GAAe,KAAKkvD,OAAL,CAAajwD,KAAb,GAAqBw6E,MAA/C,CApBU;;EAsBV,UAAIr6D,IAAI,GAAGnf,OAAO,GAAG,GAAV,GAAgB,KAAKivD,OAAL,CAAa9vD,GAAb,GAAmBq6E,MAA9C;EACA,UAAIp6D,IAAI,GAAG,CAAEm6D,WAAF,GAAgB,GAAhB,GAAsB,KAAKtqB,OAAL,CAAa0oB,IAA9C;;EAEA0B,MAAAA,SAAS,CAAC1pF,GAAV,CAAcuR,GAAd,CAAkB6d,IAAlB,EAAwBC,IAAxB,EAA8BC,IAA9B;;EACAo6D,MAAAA,SAAS,CAACrqF,GAAV,CAAckS,GAAd,CAAkBge,IAAlB,EAAwBC,IAAxB,EAA8BC,IAA9B;;EAEA,WAAKq4D,YAAL,GAAoB4B,SAApB;EACA,aAAOA,SAAP;EACH;;;mCAEYzlF,KAAK;EACd,UAAI8lF,QAAQ,GAAG9lF,GAAG,CAACxC,KAAJ,EAAf;EAEA,WAAK0mC,KAAL,CAAWtX,iBAAX;EACAk5D,MAAAA,QAAQ,CAAC7lE,YAAT,CAAsB,KAAKikB,KAAL,CAAWlkB,WAAjC;EACA,aAAO8lE,QAAP;EACH;;;gCAES;EACN,UAAI,KAAKlC,QAAL,CAAc/oF,OAAd,EAAJ,EAA6B;EACzB,aAAK+oF,QAAL,GAAgB,KAAKmC,WAAL,EAAhB;EACH;;EACD,WAAKhjE,IAAL,GAAY,KAAK6gE,QAAL,CAAcn2D,OAAd,EAAZ;EACA,aAAO,KAAK1K,IAAZ;EACH;;;kCAEWniB,MAAM4rD,KAAK;;;oCAKT;;;oCAIA;EACV;EACA,aAAO,IAAP;EACH;;;+BACQ;EAER;;;gCACS;;;kCAGE;;;uCAIKjlD,QAAQ;EACrB,UAAIK,YAAS,GAAG,KAAK+7E,KAAL,CAAW/7E,SAA3B;EAEA,aAAOA,YAAS,CAACO,UAAV,CAAqBZ,MAArB,EAA6B,UAAU3E,GAAV,EAAe;EAC/C,YAAIA,GAAG,KAAK3E,SAAR,IAAqB2E,GAAG,KAAK,IAA7B,IAAqCA,GAAG,IAAI,EAAhD,EAAoD;EAChD,iBAAOA,GAAP;EACH;;EACD,eAAQpI,KAAK,CAACgJ,MAAM,CAACZ,GAAD,CAAP,CAAL,GAAqBA,GAArB,GAA2BY,MAAM,CAACZ,GAAD,CAAzC;EACH,OALM,CAAP;EAOH;;;uCACgB5C,KAAK;EAClB,aAAOgmF,iBAAgB,CAACxsF,IAAjB,CAAsB,IAAtB,EAA4BwG,GAA5B,CAAP;EACH;;;oCACaqhB,IAAIC,IAAI;EAClB,aAAO2kE,cAAa,CAACzsF,IAAd,CAAmB,IAAnB,EAAyB6nB,EAAzB,EAA6BC,EAA7B,CAAP;EACH;;;;IA5WwB1I;;EAiX7B,IAAIotE,iBAAgB,GAAI,YAAY;EAChC,MAAIpmE,MAAM,GAAG,IAAI6D,OAAJ,EAAb;EAEA,SAAO,UAAUzjB,GAAV,EAAe;EAClB,QAAIkmF,IAAI,GAAG,KAAKvC,KAAL,CAAWe,UAAX,CAAsB3I,OAAjC;EACA,QAAMzZ,SAAS,GAAG,MAAM,KAAKqhB,KAAL,CAAWj3E,KAAnC;EACA,QAAM61D,UAAU,GAAG,MAAM,KAAKohB,KAAL,CAAWh3E,MAApC;EAEA,QAAI3P,MAAM,GAAG,KAAKknC,KAAL,CAAWiiD,YAAX,CAAwBnmF,GAAxB,CAAb;EAEAhD,IAAAA,MAAM,CAACopF,OAAP,CAAeF,IAAf,EAAqBtmE,MAArB;EAEA5iB,IAAAA,MAAM,CAACoX,CAAP,GAAYpX,MAAM,CAACoX,CAAP,GAAWkuD,SAAZ,GAAyBA,SAApC;EACAtlE,IAAAA,MAAM,CAACqX,CAAP,GAAY,EAAGrX,MAAM,CAACqX,CAAP,GAAWkuD,UAAd,IAA4BA,UAAxC;EACA,WAAOvlE,MAAP;EACH,GAZD;EAaH,CAhBsB,EAAvB;;EAoBA,IAAIipF,cAAa,GAAI,YAAY;EAC7B,MAAIrmE,MAAM,GAAG,IAAI6D,OAAJ,EAAb,CAD6B;;EAG7B,SAAO,UAAUpC,EAAV,EAAcC,EAAd,EAAkB;EACrB,QAAI4kE,IAAI,GAAG,KAAKvC,KAAL,CAAWe,UAAX,CAAsB2B,SAAtB,EAAX;;EACA,QAAM/jB,SAAS,GAAG,KAAKqhB,KAAL,CAAWj3E,KAAX,GAAmB,GAArC;EACA,QAAM61D,UAAU,GAAG,KAAKohB,KAAL,CAAWh3E,MAAX,GAAoB,GAAvC;EACA,QAAI25E,KAAK,GAAG,IAAIpkD,OAAJ,EAAZ;EACAokD,IAAAA,KAAK,CAAClyE,CAAN,GAAUiN,EAAE,GAAGihD,SAAL,GAAiB,CAA3B;EACAgkB,IAAAA,KAAK,CAACjyE,CAAN,GAAU,CAACiN,EAAD,GAAMihD,UAAN,GAAmB,CAA7B,CANqB;EAQrB;;EAEA,QAAIvlE,MAAM,GAAG,IAAIyhB,OAAJ,CAAY6nE,KAAK,CAAClyE,CAAlB,EAAqBkyE,KAAK,CAACjyE,CAA3B,EAA8B,GAA9B,EAAmCkyE,SAAnC,CAA6CL,IAA7C,EAAmDtmE,MAAnD,CAAb,CAVqB;EAcrB;EAEA;EACA;;EACA,WAAO5iB,MAAP;EACH,GAnBD;EAoBH,CAvBmB,EAApB;;MCxYMwpF;;;;;EACF,qBAAYC,YAAZ,EAA0B/C,IAA1B,EAAgC;EAAA;;EAAA;;EAC5B;EAEA,UAAK+C,YAAL,GAAoBA,YAApB;EACA,UAAK9C,KAAL,GAAa8C,YAAY,GAAGA,YAAY,CAAC9C,KAAhB,GAAwBD,IAAjD,CAJ4B;EAO5B;EACA;;EACA,UAAKx/C,KAAL,GAAa,MAAKy/C,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EACjCtsC,MAAAA,IAAI,EAAE,MAAK8D,WAAL,CAAiB9D,IAAjB,CAAsB4V,WAAtB,KAAsC;EADX,KAAxB,CAAb;EAKA,UAAK02E,WAAL,GAAmB,IAAnB;EACA,UAAKC,UAAL,GAAkB,IAAlB;EACA,UAAKC,WAAL,GAAmB,IAAnB;EACA,UAAKC,OAAL,GAAe,IAAf;EAjB4B;EAmB/B;;;;mCACYzsF,MAAM;EACf,WAAK8pC,KAAL,CAAW9pC,IAAX,GAAkBA,IAAlB;EACH;;;8BAEO8pC,OAAO;EACX,UAAI4iD,OAAO,GAAG,EAAd;EACA5iD,MAAAA,KAAK,GAAGA,KAAK,IAAI,KAAKA,KAAtB;EACAA,MAAAA,KAAK,CAACrX,QAAN,CAAe,UAAAj0B,GAAG,EAAI;EAClB,YAAIA,GAAG,CAAC8sC,MAAJ,IAAc9sC,GAAG,CAACwsC,MAAlB,IAA4BxsC,GAAG,CAACmuF,OAAhC,IAA2CnuF,GAAG,CAAC0rD,QAAnD,EAA6D;EACzD,cAAI1rD,GAAG,CAACk0B,QAAR,EAAkB;EACdl0B,YAAAA,GAAG,CAACk0B,QAAJ,CAAa0xB,OAAb;EACH;;EACD,cAAI5lD,GAAG,CAAC6lC,QAAR,EAAkB;EACd7lC,YAAAA,GAAG,CAAC6lC,QAAJ,CAAa+f,OAAb;EACH;;EACDsoC,UAAAA,OAAO,CAAC7vF,IAAR,CAAa2B,GAAb;EACH;EACJ,OAVD;;EAWA,aAAOkuF,OAAO,CAAC3tF,MAAf,EAAuB;EACnB,YAAIP,GAAG,GAAGkuF,OAAO,CAACzmF,GAAR,EAAV;;EACA,YAAIzH,GAAG,CAACke,MAAR,EAAgB;EACZle,UAAAA,GAAG,CAACke,MAAJ,CAAWsxB,MAAX,CAAkBxvC,GAAlB;EACH,SAFD,MAEO;EACHA,UAAAA,GAAG,GAAG,IAAN;EACH;EAEJ;;EACD,WAAK8tF,WAAL,GAAmB,IAAnB;EACA,WAAKC,UAAL,GAAkB,IAAlB;EACA,WAAKC,WAAL,GAAmB,IAAnB;EACA,WAAKC,OAAL,GAAe,IAAf;EACH;;;6BACM;EAEN;;;kCACW;;;;;IAxDQjuE;;MCDlBouE;;;;;EACF,oBAAYP,YAAZ,EAA0BtC,IAA1B,EAAgC;EAAA;;EAAA;;EAC5B,kFAAMsC,YAAN;EAEA,UAAKrsF,IAAL,GAAY,UAAZ,CAH4B;;EAK5B,UAAKqI,MAAL,GAAc,IAAIgc,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAd,CAL4B;;EAQ5B,UAAK+tC,GAAL,GAAW,IAAI/tC,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAX,CAR4B;;EAW5B,UAAKtlB,MAAL,GAAc,CAAd,CAX4B;;EAc5B,UAAKgnC,SAAL,GAAiBgkD,IAAI,CAAChkD,SAAL,IAAkB,CAAnC,CAd4B;;EAiB5B,UAAKtd,KAAL,GAAashE,IAAI,CAAC/oB,WAAlB;EAEA,UAAK35D,IAAL,GAAY,IAAZ,CAnB4B;;EAsB5B,UAAKyiC,KAAL,CAAW4gB,OAAX,GAAqB,CAAC,CAACq/B,IAAI,CAACjyE,OAA5B;EAtB4B;EAyB/B;;;;qCAEc;EAEd;;;iCAEU;EAEV;;;gCAESlS,KAAK;EACX,WAAKyC,MAAL,CAAY1E,IAAZ,CAAiBiC,GAAjB;EACH;;;kCACW;EACR,aAAO,KAAKyC,MAAL,CAAYjF,KAAZ,EAAP;EACH;;;6BAEMgvD,KAAK;EACR,WAAKA,GAAL,CAASzuD,IAAT,CAAcyuD,GAAd;EACH;;;gCAESrzD,QAAQ;EAEd,WAAKA,MAAL,GAAcA,MAAd;EACH;;;mCAEYiB,MAAM;EACf,WAAK8pC,KAAL,CAAW9pC,IAAX,GAAkBA,IAAlB;EACH;;;kCAEW;EACR,WAAKqH,IAAL,GAAY,KAAKkiF,KAAL,CAAWM,GAAX,CAAe3C,UAAf,CAA0B,KAAK7+E,MAA/B,EAAuC,KAAK+pD,GAA5C,EAAiD,KAAKrzD,MAAtD,EAA8D,KAAKgnC,SAAnE,EAA8E,KAAKtd,KAAnF,CAAZ;EACH;;;+BAEQ;EACL,UAAI7iB,GAAG,GAAG,KAAKinF,SAAL,EAAV;EACA,WAAKxlF,IAAL,CAAUorB,QAAV,CAAmB,UAAAj0B,GAAG,EAAI;EACtB,YAAIA,GAAG,CAACmuF,OAAR,EAAiB;EACbnuF,UAAAA,GAAG,CAAC6T,QAAJ,CAAa1O,IAAb,CAAkBiC,GAAlB;EACH;EACJ,OAJD;EAKH;;;6BAEM;EAEH,WAAKkkC,KAAL,CAAW3jB,GAAX,CAAe,KAAK9e,IAApB;EAEH;;;gCACS;EACN,UAAI2mC,MAAM,GAAG,EAAb;EACA,WAAKlE,KAAL,CAAWrX,QAAX,CAAoB,UAACj0B,GAAD,EAAS;EACzB,YAAIA,GAAG,CAACmuF,OAAR,EAAiB;EACb,cAAInuF,GAAG,CAACk0B,QAAR,EAAkB;EACdl0B,YAAAA,GAAG,CAACk0B,QAAJ,CAAa0xB,OAAb;EACH;;EACD,cAAI5lD,GAAG,CAAC6lC,QAAR,EAAkB;EACd7lC,YAAAA,GAAG,CAAC6lC,QAAJ,CAAa+f,OAAb;EACH;;EACDpW,UAAAA,MAAM,CAACnxC,IAAP,CAAY2B,GAAZ;EAEH;EACJ,OAXD;;EAYA,aAAOwvC,MAAM,CAACjvC,MAAd,EAAsB;EAClB,YAAIP,GAAG,GAAGwvC,MAAM,CAAC/nC,GAAP,EAAV;EACAzH,QAAAA,GAAG,CAACke,MAAJ,CAAWsxB,MAAX,CAAkBxvC,GAAlB;EACH;EACJ;;;kCAEW;EAEX;;;;IAhGkB4tF;;MCAjBU;;;;;EACF,qBAAYT,YAAZ,EAA0BtC,IAA1B,EAAgC;EAAA;;EAAA;;EAC5B,mFAAMsC,YAAN;EAEA,UAAKrsF,IAAL,GAAY,WAAZ,CAH4B;;EAK5B,UAAKmnF,OAAL,GAAe,EAAf,CAL4B;;EAQ5B,UAAK/0B,GAAL,GAAW,IAAI/tC,OAAJ,EAAX,CAR4B;;EAW5B,UAAK0hB,SAAL,GAAiBgkD,IAAI,CAAChkD,SAAtB,CAX4B;EAc5B;;EACA,UAAKhnC,MAAL,GAAcgrF,IAAI,CAACgD,UAAnB;EAEA,UAAKtkE,KAAL,GAAashE,IAAI,CAAC/oB,WAAlB;EAEA,UAAK5wD,MAAL,GAAc25E,IAAI,CAAC35E,MAAnB;EAEA,UAAK48E,SAAL,GAAiB,IAAjB;EAEA,UAAKp7C,KAAL,GAAa,EAAb;EAEA,UAAK9H,KAAL,CAAW4gB,OAAX,GAAqB,CAAC,CAACq/B,IAAI,CAACjyE,OAA5B;EAzB4B;EA0B/B;;;;+BACQzQ,MAAMsgB,WAAW;EACtB,UAAIxf,EAAE,GAAG,IAAT;;EACA,UAAI8kF,IAAI,GAAG,IAAI5oE,OAAJ,EAAX;;EACA,UAAI6oE,OAAO,GAAGD,IAAI,CAACtpF,IAAL,CAAUwE,EAAE,CAACiqD,GAAb,EAAkBzuC,cAAlB,CAAiC,KAAKupE,OAAtC,CAAd;;EACA,WAAK/F,OAAL,GAAe,EAAf;EACAx/D,MAAAA,SAAS,CAACwlE,iBAAV,CAA4BhwF,OAA5B,CAAoC,UAAA2D,IAAI,EAAI;EACxC,YAAI0H,GAAG,GAAG1H,IAAI,CAAC8E,GAAf;EACA,YAAIg3E,UAAU,GAAGv1E,IAAI,CAAC+qD,GAAL,CAAShvD,KAAT,GAAiBugB,cAAjB,CAAgCnb,GAAhC,CAAjB;EACAo0E,QAAAA,UAAU,CAACz2D,GAAX,CAAe9e,IAAI,CAACgB,MAApB;EACAu0E,QAAAA,UAAU,CAACz2D,GAAX,CAAe+mE,OAAf;EACA/kF,QAAAA,EAAE,CAACg/E,OAAH,CAAWtqF,IAAX,CAAgB+/E,UAAhB;EAEH,OAPD;EAQH;;;6BAiBMxqB,KAAK;EACR,WAAKA,GAAL,GAAWA,GAAX;EACH;;;kCACW;EAAA;;EACR,WAAKxgB,KAAL,GAAa,EAAb;EACA,WAAKo7C,SAAL,GAAiB,KAAKzD,KAAL,CAAWM,GAAX,CAAe3C,UAAf,CAA0B,KAAKC,OAA/B,EAAwC,KAAK/0B,GAA7C,EAAkD,KAAKg7B,OAAvD,EAAgE,KAAKrnD,SAArE,EAAgF,KAAKtd,KAArF,CAAjB;;EACA,WAAKukE,SAAL,CAAev6D,QAAf,CAAwB,UAAAj0B,GAAG,EAAI;EAC3B,YAAIA,GAAG,CAACmuF,OAAR,EAAiB;EACb,UAAA,MAAI,CAAC/6C,KAAL,CAAW/0C,IAAX,CAAgB2B,GAAhB;EACH;EACJ,OAJD;EAKH;;;+BACQ;EACL,UAAI2oF,OAAO,GAAG,KAAKA,OAAnB;EACA,UAAIG,gBAAgB,GAAG,EAAvB;EACA,UAAIzK,QAAQ,GAAG,IAAf;EACA,UAAI7nD,SAAS,GAAG,KAAKo9B,GAAL,CAAShvD,KAAT,EAAhB;EACA,UAAIrE,MAAM,GAAG,KAAKquF,OAAlB;EAGA,UAAInuF,CAAC,GAAG,CAAR;;EACA,WAAK+tF,SAAL,CAAev6D,QAAf,CAAwB,UAAAj0B,GAAG,EAAI;EAC3B,YAAIA,GAAG,CAACmuF,OAAR,EAAiB;EACbrF,UAAAA,gBAAgB,GAAG,EAAnB;EACAA,UAAAA,gBAAgB,CAACzqF,IAAjB,CAAsB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAtB;EAEAggF,UAAAA,QAAQ,GAAG,IAAIx4D,OAAJ,EAAX;EACAw4D,UAAAA,QAAQ,CAACl5E,IAAT,CAAcqxB,SAAd;EACA6nD,UAAAA,QAAQ,CAACl5D,cAAT,CAAwB5kB,MAAxB;EAEAuoF,UAAAA,gBAAgB,CAACzqF,IAAjB,CAAsBggF,QAAQ,CAACjlC,OAAT,EAAtB;EAEAp5C,UAAAA,GAAG,CAACk0B,QAAJ,CAAaqsC,YAAb,CAA0B3iE,CAAC,CAACgF,OAAF,CAAUkmF,gBAAV,CAA1B;EACA9oF,UAAAA,GAAG,CAAC6T,QAAJ,CAAa1O,IAAb,CAAkBwjF,OAAO,CAACloF,CAAD,CAAzB;EACAA,UAAAA,CAAC;EAEJ;EACJ,OAhBD;EAmBH;;;6BAEM;EACH,WAAK6qC,KAAL,CAAW3jB,GAAX,CAAe,KAAK6mE,SAApB;EACH;;;gCACS;EACN,WAAKp7C,KAAL,GAAa,EAAb;EACA,UAAI5D,MAAM,GAAG,EAAb;EACA,WAAKlE,KAAL,CAAWrX,QAAX,CAAoB,UAACj0B,GAAD,EAAS;EACzB,YAAIA,GAAG,CAACmuF,OAAR,EAAiB;EACb,cAAInuF,GAAG,CAACk0B,QAAR,EAAkB;EACdl0B,YAAAA,GAAG,CAACk0B,QAAJ,CAAa0xB,OAAb;EACH;;EACD,cAAI5lD,GAAG,CAAC6lC,QAAR,EAAkB;EACd7lC,YAAAA,GAAG,CAAC6lC,QAAJ,CAAa+f,OAAb;EACH;;EACDpW,UAAAA,MAAM,CAACnxC,IAAP,CAAY2B,GAAZ;EAEH;EACJ,OAXD;;EAYA,aAAOwvC,MAAM,CAACjvC,MAAd,EAAsB;EAClB,YAAIP,GAAG,GAAGwvC,MAAM,CAAC/nC,GAAP,EAAV;EACAzH,QAAAA,GAAG,CAACke,MAAJ,CAAWsxB,MAAX,CAAkBxvC,GAAlB;EACH;EAEJ;;;gCACS6I,MAAMsgB,WAAW;EACvB,WAAKiqB,KAAL,GAAa,EAAb;EACA,WAAKy7C,QAAL,CAAchmF,IAAd,EAAoBsgB,SAApB;EACA,WAAKy8B,OAAL;EACA,WAAKuF,SAAL;EACA,WAAK/b,MAAL;EACA,WAAKv5B,IAAL;EAEH;;;wBA1FUrK,KAAK;EAEZ,WAAKojF,OAAL,GAAepjF,GAAf;EACH;0BACY;EACT,aAAO,KAAKojF,OAAZ;EACH;;;wBAEUF,SAAS;EAChB,WAAKA,OAAL,GAAeA,OAAf;EACH;0BAEY;EACT,aAAO,KAAKA,OAAZ;EACH;;;;IAxDmBd;;MCClBkB;;;;;EACF,qBAAYjB,YAAZ,EAA0BtC,IAA1B,EAAgC;EAAA;;EAAA;;EAC5B,mFAAMsC,YAAN;EAEA,UAAKrsF,IAAL,GAAY,WAAZ,CAH4B;;EAK5B,UAAKmnF,OAAL,GAAe,EAAf;EACA,UAAKvC,KAAL,GAAa,EAAb;EAEA,UAAK2I,SAAL,GAAiBxD,IAAI,CAACwD,SAAL,IAAkB,MAAnC;EAEA,UAAK5sB,QAAL,GAAgBopB,IAAI,CAACppB,QAAL,IAAiB,EAAjC;EAEA,UAAK1sC,QAAL,GAAgB81D,IAAI,CAAC91D,QAAL,IAAiB,CAAjC;EAEA,UAAK5rB,MAAL,GAAc,IAAd;EAEA,UAAKm4D,SAAL,GAAiBupB,IAAI,CAACvpB,SAAtB;EAEA,UAAKgtB,aAAL,GAAqBzD,IAAI,CAACyD,aAA1B;EAEA,UAAKp7B,GAAL,GAAW,IAAI/tC,OAAJ,EAAX;EAEA,UAAKjU,MAAL,GAAc,WAAIiU,OAAJ,qBAAe3nB,MAAM,CAACsC,MAAP,CAAc+qF,IAAI,CAAC35E,MAAnB,CAAf,MAA8C,IAAIiU,OAAJ,EAA5D;EAEA,UAAKopE,cAAL,GAAsB,IAAtB;EAEA,UAAKA,cAAL,GAAsB,MAAKlE,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EAAEtsC,MAAAA,IAAI,EAAE;EAAR,KAAxB,CAAtB;EAEA,UAAK8pC,KAAL,CAAW4gB,OAAX,GAAqB,CAAC,CAACq/B,IAAI,CAACjyE,OAA5B;;EACA,UAAKgyB,KAAL,CAAW3jB,GAAX,CAAe,MAAKsnE,cAApB;;EACA,UAAK7F,MAAL,GAAc,EAAd;EACA,UAAK8F,iBAAL,GAAyB,KAAzB;EA/B4B;EAgC/B;;;;+BAGQrmF,MAAMsgB,WAAW;EACtB,UAAIxf,EAAE,GAAG,IAAT;EACA,UAAI+kF,OAAO,GAAG,KAAK98E,MAAnB;EACAjI,MAAAA,EAAE,CAACg/E,OAAH,GAAa,EAAb;EAEAx/D,MAAAA,SAAS,CAACwlE,iBAAV,CAA4BhwF,OAA5B,CAAoC,UAAA2D,IAAI,EAAI;EACxC,YAAI0H,GAAG,GAAG1H,IAAI,CAAC8E,GAAf;EACA,YAAIg3E,UAAU,GAAGv1E,IAAI,CAAC+qD,GAAL,CAAShvD,KAAT,GAAiBugB,cAAjB,CAAgCnb,GAAhC,CAAjB;EACAo0E,QAAAA,UAAU,CAACz2D,GAAX,CAAe9e,IAAI,CAACgB,MAApB;EACAu0E,QAAAA,UAAU,CAACz2D,GAAX,CAAe+mE,OAAf;EACA/kF,QAAAA,EAAE,CAACg/E,OAAH,CAAWtqF,IAAX,CAAgB+/E,UAAhB;EAEH,OAPD;EASAz0E,MAAAA,EAAE,CAACwlF,aAAH,GAAmB,KAAKC,cAAL,CAAoBvmF,IAApB,EAA0BsgB,SAA1B,CAAnB;EACH;;;6BAEMyqC,KAAK;EACR,WAAKA,GAAL,GAAWA,GAAX;EACH;;;mCACYy7B,OAAO;EAChB,WAAKrtB,SAAL,GAAiBqtB,KAAjB;EACH;;;uCACgBA,OAAO;EACpB,WAAKL,aAAL,GAAqBK,KAArB;EACH;;;qCAEcxmF,MAAMsgB,WAAW;EAC5B,UAAImmE,KAAK,GAAGzmF,IAAZ;EACA,UAAI0mF,UAAU,GAAGpmE,SAAjB;EACA,aAAO,YAAY;EACf,aAAK0lE,QAAL,CAAcS,KAAd,EAAqBC,UAArB;EACH,OAFD;EAGH;;;iCACUxtB,MAAM;EACb,UAAIzgE,KAAK,GAAG1D,CAAC,CAAC0B,OAAF,CAAU,KAAK8mF,KAAf,EAAsBrkB,IAAtB,CAAZ;;EACA,UAAIzgE,KAAK,IAAI,CAAC,CAAd,EAAiB;EACb,eAAO,KAAKqnF,OAAL,CAAarnF,KAAb,CAAP;EACH;;EACD,aAAO,IAAIukB,OAAJ,EAAP;EACH;;;kCAEqB;EAAA;;EAAA,UAAZugE,KAAY,uEAAJ,EAAI;EAClB,UAAIz8E,EAAE,GAAG,IAAT;EACA,UAAI0hF,GAAG,GAAG1hF,EAAE,CAACohF,KAAH,CAASM,GAAnB;EAFkB,UAGZlpB,QAHY,GAGmBx4D,EAHnB,CAGZw4D,QAHY;EAAA,UAGSl4C,KAHT,GAGmBtgB,EAHnB,CAGFolF,SAHE;EAIlB,UAAIS,IAAI,GAAG,IAAI3pE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAX;EACA,WAAKugE,KAAL,GAAaA,KAAK,IAAI,KAAKA,KAA3B;EACA,WAAKgD,MAAL,GAAc,EAAd;EACA,UAAIA,MAAM,GAAGiC,GAAG,CAAClC,eAAJ,CAAoB/C,KAApB,EAA2B;EAAEjkB,QAAAA,QAAQ,EAARA,QAAF;EAAYI,QAAAA,SAAS,EAAEt4C;EAAvB,OAA3B,CAAb;EAEAm/D,MAAAA,MAAM,CAACzqF,OAAP,CAAe,UAAC4b,KAAD,EAAQjZ,KAAR,EAAkB;EAC7BiZ,QAAAA,KAAK,CAAC86C,QAAN,CAAexhD,QAAf,GAA0BlK,EAAE,CAACg/E,OAAH,CAAWrnF,KAAX,EAAkBsD,KAAlB,EAA1B;;EAGA,YAAI+E,EAAE,CAACulF,iBAAP,EAA0B;EACtB,cAAIT,IAAI,GAAG,MAAI,CAACZ,YAAL,CAAkB4B,YAAlB,EAAX;;EACAl1E,UAAAA,KAAK,CAAC1G,QAAN,CAAe1O,IAAf,CAAoBwE,EAAE,CAACg/E,OAAH,CAAWrnF,KAAX,EAAkBsD,KAAlB,EAApB;;EAEA,cAAI,MAAI,CAACo9D,SAAL,KAAmB,OAAvB,EAAgC;EAC5B;EACA;EACA;EACA;EACA;EACA;EACAznD,YAAAA,KAAK,CAAC1G,QAAN,CAAeuf,GAAf,CAAmB,MAAI,CAACwgC,GAAL,CAAShvD,KAAT,GAAiBugB,cAAjB,CAAgC,CAAC5K,KAAK,CAAC86C,QAAN,CAAelrC,IAAf,CAAoB,CAApB,CAAD,GAA0B,GAA1D,CAAnB;EAEH;;EACD,cAAI,MAAI,CAAC63C,SAAL,KAAmB,QAAvB,EAAiC;EAC7BznD,YAAAA,KAAK,CAAC1G,QAAN,CAAeuf,GAAf,CAAmB,MAAI,CAACwgC,GAAL,CAAShvD,KAAT,GAAiBugB,cAAjB,CAAgC,CAAC5K,KAAK,CAAC86C,QAAN,CAAelrC,IAAf,CAAoB,CAApB,CAAD,GAA0B,GAA1D,CAAnB;EACH;;EACD,cAAI,MAAI,CAACsL,QAAL,KAAkB,CAAtB,EAAyB;EACrBlb,YAAAA,KAAK,CAACsrB,QAAN,CAAepQ,QAAf,GAA0BpQ,KAAK,CAACzf,QAAN,CAAe,MAAI,CAAC6vB,QAApB,CAA1B;EACAlb,YAAAA,KAAK,CAACwY,MAAN,CAAare,GAAb,CAAiB,CAAjB,EAAoB,GAApB;EACH,WApBqB;EAuBtB;EACA;EACA;EACA;EACA;;EAEH,SA7BD,MA6BO;EACH6F,UAAAA,KAAK,CAAC26C,sBAAN,GAA+B,KAA/B;;EACA36C,UAAAA,KAAK,CAACkyC,cAAN,GAAuB,UAAUzZ,MAAV,EAAkByN,KAAlB,EAAyB15B,MAAzB,EAAiC;EACpDpd,YAAAA,EAAE,CAACwlF,aAAH,GADoD;;EAKpD,gBAAI/nF,GAAG,GAAGuC,EAAE,CAACkkF,YAAH,CAAgBT,gBAAhB,CAAiCzjF,EAAE,CAAC+lF,UAAH,CAAc,KAAKr6B,QAAL,CAAc0M,IAA5B,EAAkCn9D,KAAlC,EAAjC,CAAV;;EACA,iBAAKywD,QAAL,CAAcjuD,GAAd,GAAoBA,GAAG,CAACxC,KAAJ,EAApB,CANoD;;EAQpD,gBAAI+qF,QAAQ,GAAG,KAAKt6B,QAAL,CAAclrC,IAA7B;EACA,gBAAIylE,SAAS,GAAGD,QAAQ,CAAC,CAAD,CAAR,GAAc,GAA9B;EACA,gBAAI/kB,UAAU,GAAG+kB,QAAQ,CAAC,CAAD,CAAR,GAAc,GAA/B;EAEA,gBAAIE,SAAS,GAAG,IAAIhqE,OAAJ,EAAhB;EACAkB,YAAAA,MAAM,CAACovC,iBAAP,CAAyB05B,SAAzB;EACA,gBAAIC,SAAS,GAAGN,IAAI,CAACpnE,GAAL,CAASynE,SAAT,CAAhB;;EAEA,gBAAIlmF,EAAE,CAACq4D,SAAH,IAAgB,OAApB,EAA6B;EACzB,kBAAI+tB,IAAI,GAAGD,SAAS,GAAG,CAAZ,GAAgB,CAAhB,GAAoB,CAAC,CAAhC;EACA1oF,cAAAA,GAAG,CAACwiC,IAAJ,CAASxiC,GAAG,CAACoU,CAAJ,GAAQo0E,SAAS,GAAGG,IAA7B;EACAx1E,cAAAA,KAAK,CAAC1G,QAAN,CAAe1O,IAAf,CAAoBiC,GAApB;EACH;;EACD,gBAAIuC,EAAE,CAACq4D,SAAH,IAAgB,MAApB,EAA4B;EACxB,kBAAI+tB,KAAI,GAAGD,SAAS,GAAG,CAAZ,GAAgB,CAAC,CAAjB,GAAqB,CAAhC;;EACA1oF,cAAAA,GAAG,CAACwiC,IAAJ,CAASxiC,GAAG,CAACoU,CAAJ,GAAQo0E,SAAS,GAAGG,KAA7B;EACAx1E,cAAAA,KAAK,CAAC1G,QAAN,CAAe1O,IAAf,CAAoBiC,GAApB;EACH;;EACD,gBAAIuC,EAAE,CAACqlF,aAAH,IAAoB,KAAxB,EAA+B;EAC3B5nF,cAAAA,GAAG,CAACyiC,IAAJ,CAASziC,GAAG,CAACqU,CAAJ,GAAQmvD,UAAjB;EACArwD,cAAAA,KAAK,CAAC1G,QAAN,CAAe1O,IAAf,CAAoBiC,GAApB;EACH;;EACD,gBAAIuC,EAAE,CAACqlF,aAAH,IAAoB,QAAxB,EAAkC;EAC9B5nF,cAAAA,GAAG,CAACyiC,IAAJ,CAASziC,GAAG,CAACqU,CAAJ,GAAQmvD,UAAjB;EACArwD,cAAAA,KAAK,CAAC1G,QAAN,CAAe1O,IAAf,CAAoBiC,GAApB;EACH;;EAED,iBAAKyM,QAAL,CAAc1O,IAAd,CAAmBiC,GAAnB;EACA,iBAAK4sB,iBAAL,CAAuB,IAAvB;EACH,WArCD;EAsCH;;EAEDrqB,QAAAA,EAAE,CAACslF,cAAH,CAAkBtnE,GAAlB,CAAsBpN,KAAtB;;EACA,QAAA,MAAI,CAAC6uE,MAAL,CAAY/qF,IAAZ,CAAiBkc,KAAjB;EACH,OA7ED;EA+EH;;;6BACM;EAEH,WAAK+wB,KAAL,CAAW3jB,GAAX,CAAe,KAAKsnE,cAApB;EACH;;;+BAEQ;EAER;;;gCAES;EACN,WAAK7F,MAAL,GAAc,EAAd;EACA,UAAI55C,MAAM,GAAG,EAAb;EACA,WAAKlE,KAAL,CAAWrX,QAAX,CAAoB,UAACj0B,GAAD,EAAS;EACzB,YAAIA,GAAG,CAAC0rD,QAAR,EAAkB;EACd,cAAI1rD,GAAG,CAACk0B,QAAR,EAAkB;EACdl0B,YAAAA,GAAG,CAACk0B,QAAJ,CAAa0xB,OAAb;EACH;;EACD,cAAI5lD,GAAG,CAAC6lC,QAAR,EAAkB;EACd7lC,YAAAA,GAAG,CAAC6lC,QAAJ,CAAa+f,OAAb;;EACA,gBAAI5lD,GAAG,CAAC6lC,QAAJ,CAAahnC,GAAjB,EAAsB;EAClBmB,cAAAA,GAAG,CAAC6lC,QAAJ,CAAahnC,GAAb,CAAiB+mD,OAAjB;EACH;EACJ;;EACDpW,UAAAA,MAAM,CAACnxC,IAAP,CAAY2B,GAAZ;EAEH;EACJ,OAdD;;EAeA,aAAOwvC,MAAM,CAACjvC,MAAd,EAAsB;EAClB,YAAIP,GAAG,GAAGwvC,MAAM,CAAC/nC,GAAP,EAAV;EACAzH,QAAAA,GAAG,CAACke,MAAJ,CAAWsxB,MAAX,CAAkBxvC,GAAlB;EACH;EAEJ;;;gCACS6I,MAAMsgB,WAAWi9D,OAAO;EAC9B,WAAKgD,MAAL,GAAc,EAAd;EACA,WAAKyF,QAAL,CAAchmF,IAAd,EAAoBsgB,SAApB;EACA,WAAKy8B,OAAL;EACA,WAAKuF,SAAL,CAAei7B,KAAf,EAJ8B;;EAM9B,WAAKvwE,IAAL;EAEH;;;;IAhNmB+3E;;ECFxB;;;;;;;EAMA,SAASoC,YAAT,CAAsBC,EAAtB,EAA0BC,EAA1B,EAA8B;EAC1B,MAAI/pE,CAAC,GAAGvb,MAAM,CAACqlF,EAAD,CAAd;EACA,MAAIE,MAAM,GAAGD,EAAE,GAAGA,EAAH,GAAQ,GAAvB;;EACA,MAAI,CAAC/pE,CAAL,EAAQ;EACJ,WAAOiqE,MAAM,CAACH,EAAD,CAAb;EACH;;EACD,MAAI9pE,CAAC,IAAI,IAAT,EAAe;EACX,QAAI7f,GAAG,GAAG6D,QAAQ,CAACgc,CAAC,GAAG,IAAL,CAAlB;EACA,WAAOiqE,MAAM,CAACH,EAAE,CAACzxF,QAAH,GAAcqY,OAAd,CAAsBvQ,GAAtB,EAA2BA,GAAG,GAAG6pF,MAAjC,CAAD,CAAb;EACH,GAHD,MAGO;EACH,WAAOC,MAAM,CAACH,EAAD,CAAb;EACH;EACJ;;;EAGD,SAASI,cAAT,CAAwBp1E,MAAxB,EAAgCG,KAAhC,EAAuC;EACnC,MAAIk/C,WAAW,GAAGl3D,QAAlB;EACA,MAAIF,MAAM,GAAG,IAAI2iB,OAAJ,EAAb;EACA5K,EAAAA,MAAM,CAACtc,OAAP,CAAe,UAAA+J,CAAC,EAAI;EAChB,QAAIuwB,QAAQ,GAAG/4B,IAAI,CAACuK,GAAL,CAAS2Q,KAAK,CAACI,CAAN,GAAU9S,CAAC,CAAC8S,CAArB,CAAf;;EACA,QAAI8+C,WAAW,GAAGrhC,QAAlB,EAA4B;EACxBqhC,MAAAA,WAAW,GAAGrhC,QAAd;EACA/1B,MAAAA,MAAM,CAACiC,IAAP,CAAYuD,CAAZ;EACH;EACJ,GAND;EAOA,SAAOxF,MAAP;EAEH;EAGD;;;;;;;;EAMA,SAASotF,SAAT,CAAmBvmE,GAAnB,EAAwB6lB,OAAxB,EAAiC;EAC7B,SAAO,UAAUzlC,QAAQ,CAAC,OAAO4f,GAAG,CAACzrB,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAR,CAAlB,GAA6C,GAA7C,GAAmD6L,QAAQ,CAAC,OAAO4f,GAAG,CAACzrB,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAR,CAA3D,GAAsF,GAAtF,GAA4F6L,QAAQ,CAAC,OAAO4f,GAAG,CAACzrB,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAR,CAApG,GAA+H,GAA/H,GAAqIsxC,OAArI,GAA+I,GAAtJ;EACH;;MCtCK2gD;;;;;EACF,iBAAYC,YAAZ,EAA0B1oF,GAA1B,EAA+B;EAAA;;EAAA;;EAC3B,+EAAM0oF,YAAY,CAAC3C,YAAnB;EAEA,UAAKrsF,IAAL,GAAY,OAAZ;EACA,UAAKuH,IAAL,GAAYjB,GAAZ;EACA,UAAK2oF,MAAL,GAAc,MAAK5C,YAAL,CAAkBvlF,KAAlB,IAA2B,EAAzC;EACA,UAAKkoF,YAAL,GAAoBA,YAApB;EACA,UAAKhvF,IAAL,GAAYsG,GAAG,CAACtG,IAAhB,CAP2B;EAU3B;EACA;EAEA;;EACA,UAAKuO,KAAL,GAAajI,GAAG,CAACiI,KAAJ,IAAa,EAA1B,CAd2B;;EAgB3B,UAAK2gF,KAAL,GAAa;EACTC,MAAAA,OAAO,EAAE,EADA;EAETC,MAAAA,SAAS,EAAE,MAFF;EAGT7B,MAAAA,SAAS,EAAE,MAHF;EAIT5sB,MAAAA,QAAQ,EAAE,EAJD;EAKTvwD,MAAAA,MAAM,EAAE,CALC;EAMTowD,MAAAA,SAAS,EAAE,QANF;EAOT8B,MAAAA,YAAY,EAAE,QAPL;EAQTtB,MAAAA,WAAW,EAAE,IARJ;EASTijB,MAAAA,UAAU,EAAE;EATH,KAAb;EAWA,UAAKoL,MAAL,GAAc,IAAd,CA3B2B;;EA6B3B,UAAKv3E,OAAL,GAAe,IAAf;EACA,UAAKw3E,QAAL,GAAgB;EAAC;EACbx3E,MAAAA,OAAO,EAAE,CADG;EAEZiuB,MAAAA,SAAS,EAAE,CAFC;EAEE;EACdgnD,MAAAA,UAAU,EAAE,EAHA;EAGI;EAChB/rB,MAAAA,WAAW,EAAE,MAJD;EAKZ5wD,MAAAA,MAAM,EAAE,CALI;;EAAA,KAAhB;EAOA,UAAKm/E,QAAL,GAAgB;EAAC;EACbz3E,MAAAA,OAAO,EAAE,CADG;EAEZiuB,MAAAA,SAAS,EAAE,CAFC;EAEE;EACdi7B,MAAAA,WAAW,EAAE;EAHD,KAAhB;EAKA,UAAKjoD,KAAL,GAAa;EACTjB,MAAAA,OAAO,EAAE,CADA;EAETy1E,MAAAA,SAAS,EAAE,MAFF;EAGT5sB,MAAAA,QAAQ,EAAE,EAHD;EAIThyD,MAAAA,MAAM,EAAE,IAJC;EAKTslB,MAAAA,QAAQ,EAAE,CALD;EAMTusC,MAAAA,SAAS,EAAE,OANF;EAMiB;EAC1BgtB,MAAAA,aAAa,EAAE,QAPN;EAOiB;EAC1BvJ,MAAAA,UAAU,EAAE,CARH;EAST7zE,MAAAA,MAAM,EAAE;EAAE4J,QAAAA,CAAC,EAAE,CAAL;EAAQC,QAAAA,CAAC,EAAE,CAAX;EAAcmJ,QAAAA,CAAC,EAAE,EAAjB;;EAAA;EATC,KAAb;EAYA,UAAK/a,MAAL,GAAc,IAAIgc,OAAJ,EAAd;EACA,UAAKmrE,YAAL,GAAoB,IAAInrE,OAAJ,EAApB;EACA,UAAKorE,aAAL,GAAqB,MAAKpD,YAAL,CAAkBqD,cAAlB,CAAiC,MAAK1vF,IAAtC,CAArB;;EAGA5D,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB;;EAEA,UAAK+hD,IAAL,CAAU/hD,GAAV;;EAEA,UAAKwjC,KAAL,CAAW4gB,OAAX,GAAqB,CAAC,CAAC,MAAK5yC,OAA5B;;EACA,UAAK63E,QAAL;;EAhE2B;EAkE9B;;;;2BAEIrpF,KAAK;EACN,UAAI6B,EAAE,GAAG,IAAT,CADM;EAGN;;EACA,UAAI,CAAC/L,CAAC,CAAC6B,OAAF,CAAU,KAAKsQ,KAAf,CAAL,EAA4B;EACxB,aAAKA,KAAL,GAAa,CAAC,KAAKA,KAAN,CAAb;EACH;;EAED,WAAKqhF,SAAL,CAAe,KAAKH,aAApB;;EAEA,WAAK5C,SAAL;;EAEA,WAAKgD,aAAL,GAAqB,YAAM;EACvB1nF,QAAAA,EAAE,CAAC2nF,YAAH;EACH,OAFD;;EAIA,WAAKvG,KAAL,CAAWkB,aAAX,CAAyBn2E,EAAzB,CAA4B,QAA5B,EAAsC,KAAKu7E,aAA3C;;EACA1nF,MAAAA,EAAE,CAAC2nF,YAAH;EAEH;;;qCACc;EACX,UAAI,CAAC,KAAKh4E,OAAV,EAAmB;;EACnB,UAAMi4E,QAAQ,GAAG,IAAI1rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB;;EACA,UAAMgoE,YAAY,GAAG,KAAKA,YAA1B;;EACA,UAAM2D,aAAa,GAAG3D,YAAY,CAACV,WAAb,EAAtB;;EAJW,+BASP,KAAK6D,YATE;EAAA,UAOJl9E,KAPI,sBAOP0H,CAPO;EAAA,UAQJ8jB,KARI,sBAQP1a,CARO;EAWX,UAAI/a,MAAM,GAAG,KAAKA,MAAL,CAAYjF,KAAZ,EAAb;;EAEA,UAAI6sF,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAnB;;EACA,UAAI6rE,SAAS,GAAG,KAAKlB,YAAL,CAAkBmB,WAAlB,EAAhB;;EACA,UAAIhvB,UAAU,GAAG,KAAKpoD,KAAL,CAAWynD,SAA5B;;EACA,UAAI4vB,QAAQ,GAAG,KAAKr3E,KAAL,CAAW3I,MAAX,CAAkBgT,CAAlB,GAAsB,KAAKmsE,QAAL,CAAcxpD,SAApC,GAAgD,KAAKupD,QAAL,CAAcvC,UAA9D,GAA2E,KAAKuC,QAAL,CAAcl/E,MAAxG;;EAEA,UAAI8/E,SAAS,CAACj/E,IAAV,CAAey5C,OAAnB,EAA4B;EACxB,YAAIwlC,SAAS,CAACvG,IAAV,CAAej/B,OAAnB,EAA4B;EACxB;EACAulC,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAf;EACA88C,UAAAA,UAAU,GAAG,OAAb;EAEH,SALD,MAKO;EACH;EACA,cAAIkrB,YAAY,CAACvlF,KAAb,CAAmB4jB,KAAnB,CAAyB3rB,MAAzB,IAAmC,CAAvC,EAA0C;EACtCsJ,YAAAA,MAAM,GAAG,IAAIgc,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAACyZ,KAAnB,CAAT;EACH;;EACDmyD,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAf;EACA88C,UAAAA,UAAU,GAAG,MAAb;EACAivB,UAAAA,QAAQ,IAAI,CAAC,CAAb;EACH;EACJ,OAfD,MAeO;EACH,YAAIF,SAAS,CAACvG,IAAV,CAAej/B,OAAnB,EAA4B;EACxBriD,UAAAA,MAAM,CAAC+/B,IAAP,CAAY91B,KAAZ;EACA29E,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAf;EACA88C,UAAAA,UAAU,GAAG,MAAb;EACH,SAJD,MAIO;EACH94D,UAAAA,MAAM,CAAC+/B,IAAP,CAAY91B,KAAZ;;EACA,cAAI+5E,YAAY,CAACvlF,KAAb,CAAmB4jB,KAAnB,CAAyB3rB,MAAzB,IAAmC,CAAvC,EAA0C;EACtCsJ,YAAAA,MAAM,GAAG,IAAIgc,OAAJ,CAAY/R,KAAZ,EAAmB,CAAnB,EAAsB,CAACwrB,KAAvB,CAAT;EACH;;EACDmyD,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAf;EACA88C,UAAAA,UAAU,GAAG,OAAb;EACAivB,UAAAA,QAAQ,IAAI,CAAC,CAAb;EACH;EACJ;;EAGD,UAAI,KAAKC,SAAT,EAAoB;EAChB,YAAI,KAAKA,SAAL,CAAexD,SAAf,GAA2Bx6D,MAA3B,CAAkChqB,MAAlC,CAAJ,EAA+C;EAC3C;EACH;;EAED,aAAKgoF,SAAL,CAAeC,SAAf,CAAyBjoF,MAAzB;;EACA,aAAKgoF,SAAL,CAAeziD,MAAf;;EAGA,aAAKo/C,SAAL,CAAeuD,MAAf,CAAsBN,YAAtB;;EACA,aAAKjD,SAAL,CAAeK,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C,EAA4DpD,YAAY,CAACmE,gBAAzE;;EACA,aAAKxD,SAAL,CAAep/C,MAAf;;EAIA,aAAK6iD,SAAL,CAAeF,MAAf,CAAsBN,YAAtB;;EACA,aAAKQ,SAAL,CAAepD,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C,EAA4DpD,YAAY,CAACmE,gBAAzE;;EACA,aAAKC,SAAL,CAAeC,YAAf,CAA4BvvB,UAA5B;;EACA,aAAKsvB,SAAL,CAAergF,MAAf,CAAsBm4B,IAAtB,CAA2B6nD,QAA3B;EAGH,OArBD,MAqBO;EACH;EACA,aAAKC,SAAL,GAAiB,IAAIzD,QAAJ,CAAaP,YAAb,EAA2B,KAAKkD,QAAhC,CAAjB;;EACA,aAAKc,SAAL,CAAeE,MAAf,CAAsBR,QAAtB;;EACA,aAAKM,SAAL,CAAeC,SAAf,CAAyBjoF,MAAzB;;EACA,aAAKgoF,SAAL,CAAeM,SAAf,CAAyB,KAAKlB,aAAL,CAAmB74E,UAA5C;;EACA,aAAKy5E,SAAL,CAAeO,YAAf,CAA4B,WAA5B;;EACA,aAAKP,SAAL,CAAe1mC,SAAf;;EAEA,aAAK7f,KAAL,CAAW3jB,GAAX,CAAe,KAAKkqE,SAAL,CAAevmD,KAA9B,EATG;;EAcH,aAAKkjD,SAAL,GAAiB,IAAIF,SAAJ,CAAcT,YAAd,EAA4B,KAAKiD,QAAjC,CAAjB;;EACA,aAAKtC,SAAL,CAAeuD,MAAf,CAAsBN,YAAtB;;EACA,aAAKjD,SAAL,CAAeK,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C;;EACA,aAAKzC,SAAL,CAAerjC,SAAf;;EACA,aAAK7f,KAAL,CAAW3jB,GAAX,CAAe,KAAK6mE,SAAL,CAAeljD,KAA9B,EAlBG;;EAuBH,aAAK2mD,SAAL,GAAiB,IAAInD,SAAJ,CAAcjB,YAAd,EAA4B,KAAKtzE,KAAjC,CAAjB;EACA,aAAK03E,SAAL,CAAergF,MAAf,CAAsBgT,CAAtB,GAA0BgtE,QAA1B;;EAEA,aAAKK,SAAL,CAAeC,YAAf,CAA4BvvB,UAA5B;;EACA,aAAKsvB,SAAL,CAAeF,MAAf,CAAsBN,YAAtB;;EACA,aAAKQ,SAAL,CAAepD,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C;;EAEA,aAAKgB,SAAL,CAAe9mC,SAAf,CAAyB,KAAKknC,kBAA9B,EA9BG;;;EAgCH,aAAKtH,KAAL,CAAWuH,UAAX,CAAsB3qE,GAAtB,CAA0B,KAAKsqE,SAAL,CAAe3mD,KAAzC;EAEH;EAEJ;;;kCACW;EAER;EACA,UAAIuiD,YAAY,GAAG,KAAKA,YAAxB;;EACA,UAAI2D,aAAa,GAAG3D,YAAY,CAACV,WAAb,EAApB;;EACA,UAAIoF,KAAK,GAAG,IAAI1sE,OAAJ,EAAZ,CALQ;;;EAMR2rE,MAAAA,aAAa,CAAC38D,OAAd,CAAsB09D,KAAtB;EACA,WAAKvB,YAAL,GAAoBuB,KAAK,CAAC3tF,KAAN,EAApB;EAPQ,UASD06B,KATC,GAUJizD,KAVI,CASJ3tE,CATI;;EAWR,UAAI/a,MAAM,GAAGgkF,YAAY,CAACQ,SAAb,EAAb;;EAGA,UAAIjmB,OAAO,GAAGylB,YAAY,CAACvlF,KAAb,CAAmB4jB,KAAnB,CAAyB3rB,MAAvC;;EACA,UAAIe,KAAK,GAAG1D,CAAC,CAAC0B,OAAF,CAAUuuF,YAAY,CAACvlF,KAAb,CAAmB4jB,KAA7B,EAAoC,KAAKnjB,IAAzC,CAAZ;;EACA,UAAI41D,IAAI,GAAG,CAAX;;EACA,UAAIyJ,OAAO,IAAI,CAAf,EAAkB;EACdzJ,QAAAA,IAAI,GAAG,CAAP;EACH,OAFD,MAEO;EACHA,QAAAA,IAAI,GAAGr9D,KAAK,IAAI8mE,OAAO,GAAG,CAAd,CAAZ;EACH;;EACDv+D,MAAAA,MAAM,CAACkgC,IAAP,CAAYzK,KAAK,GAAG,CAACq/B,IAArB;EAEA,WAAK90D,MAAL,GAAcA,MAAd;EAEH;;;mCACY;EAET;EACH;;;iCACU;;;gCAGD7B,MAAM;EACZ,UAAI2B,EAAE,GAAG,IAAT;EAEA,WAAKjC,WAAL,GAAmBM,IAAI,CAACwqF,cAAL,EAAnB;EAEA7oF,MAAAA,EAAE,CAAC0oF,kBAAH,GAAwB,EAAxB;EACA1oF,MAAAA,EAAE,CAAC8oF,aAAH,GAAmB,EAAnB;;EACA70F,MAAAA,CAAC,CAACiD,IAAF,CAAO8I,EAAE,CAACjC,WAAV,EAAuB,UAAUsC,GAAV,EAAevJ,CAAf,EAAkB;EACrCkJ,QAAAA,EAAE,CAAC0oF,kBAAH,CAAsB5xF,CAAtB,IAA2BkJ,EAAE,CAAC+oF,cAAH,CAAkB1oF,GAAlB,EAAuBvJ,CAAvB,CAA3B;EAEH,OAHD;;EAKA,UAAI,KAAK8Z,KAAL,CAAWkb,QAAX,IAAuB,CAA3B,EAA8B;EAC1B;EACA,aAAKlb,KAAL,CAAWynD,SAAX,GAAuB,OAAvB;EACH;;EAGD,QAAE,YAAY,KAAKj5D,IAAnB,MAA6B,KAAKwgB,MAAL,GAAc3rB,CAAC,CAACuF,GAAF,CAAM,KAAKuE,WAAX,CAA3C;;EACA,UAAI9F,KAAK,CAAC,KAAK2nB,MAAN,CAAL,IAAsB,KAAKA,MAAL,IAAenmB,QAAzC,EAAmD;EAC/C,aAAKmmB,MAAL,GAAc,CAAd;EACH;EACD,QAAE,YAAY,KAAKxgB,IAAnB,MAA6B,KAAKygB,MAAL,GAAc5rB,CAAC,CAAC4E,GAAF,CAAM,KAAKkF,WAAX,CAA3C;;EACA,UAAI9F,KAAK,CAAC,KAAK4nB,MAAN,CAAL,IAAsB,KAAKA,MAAL,IAAepmB,QAAzC,EAAmD;EAC/C,aAAKomB,MAAL,GAAc,CAAd;EACH;;EAED,WAAK2nE,QAAL;EAGH;;;qCAEcnnF,KAAKvJ,GAAG;EACnB,UAAIkyF,GAAJ;;EACA,UAAI/0F,CAAC,CAAC8D,UAAF,CAAa,KAAK6Y,KAAL,CAAWpK,MAAxB,CAAJ,EAAqC;EACjCwiF,QAAAA,GAAG,GAAG,KAAKp4E,KAAL,CAAWpK,MAAX,CAAkBnN,KAAlB,CAAwB,IAAxB,EAA8BW,SAA9B,CAAN;EACH,OAFD,MAEO;EACHgvF,QAAAA,GAAG,GAAG3oF,GAAN;EACH;;EAED,UAAIpM,CAAC,CAAC6B,OAAF,CAAUkzF,GAAV,CAAJ,EAAoB;EAChBA,QAAAA,GAAG,GAAG3C,YAAY,CAAC2C,GAAD,CAAlB;EACH;;EACD,UAAI,CAACA,GAAL,EAAU;EACNA,QAAAA,GAAG,GAAG3oF,GAAN;EACH;EACD,aAAO2oF,GAAP;EACH;;;6BAEM;EACH;EACA,UAAI,CAAC,KAAKr5E,OAAV,EAAmB;;EACnB,WAAKu4E,SAAL,CAAeh8E,IAAf;;EACA,WAAK24E,SAAL,CAAe34E,IAAf;;EACA,WAAKo8E,SAAL,CAAep8E,IAAf,GALG;;EAON;;;gCAES;EAEN,WAAKg8E,SAAL,CAAejsC,OAAf;;EACA,WAAK4oC,SAAL,CAAe5oC,OAAf;;EACA,WAAKqsC,SAAL,CAAersC,OAAf;;EACA,WAAKmlC,KAAL,CAAWkB,aAAX,CAAyB12E,GAAzB,CAA6B,QAA7B,EAAuC,KAAK87E,aAA5C;;EACA,WAAKA,aAAL,GAAqB,IAArB;EAEH;;;kCAEW;EACR,WAAKD,SAAL,CAAe,KAAKH,aAApB;;EACA,WAAK5C,SAAL;;EAEA,WAAKwD,SAAL,CAAee,SAAf;;EACA,WAAKpE,SAAL,CAAeoE,SAAf,CAAyB,KAAKf,SAA9B,EAAyC,KAAKZ,aAA9C;;EACA,WAAKgB,SAAL,CAAeW,SAAf,CAAyB,KAAKf,SAA9B,EAAyC,KAAKZ,aAA9C,EAA6D,KAAKoB,kBAAlE;EACH;;;;IAlTezE;;MCAdiF;;;;;EACF,iBAAYrC,YAAZ,EAA0B;EAAA;;EAAA;;EACtB,+EAAMA,YAAY,CAAC3C,YAAnB;EAEA,UAAKrsF,IAAL,GAAU,OAAV;EAEA,QAAIsG,GAAG,GAAG,MAAKiB,IAAL,GAAY,MAAK8kF,YAAL,CAAkBvlF,KAAlB,CAAwB2jB,KAA9C;EAEA,UAAKukE,YAAL,GAAoBA,YAApB;EACA,UAAK18E,KAAL,GAAa,CAAb;EACA,UAAKC,MAAL,GAAc,CAAd;EAEA,UAAK28E,KAAL,GAAa;EACTC,MAAAA,OAAO,EAAE,EADA;EAETC,MAAAA,SAAS,EAAE,MAFF;EAGT7B,MAAAA,SAAS,EAAE,MAHF;EAIT5sB,MAAAA,QAAQ,EAAE,EAJD;EAKTvwD,MAAAA,MAAM,EAAE,CALC;EAMTowD,MAAAA,SAAS,EAAE,QANF;EAOT8B,MAAAA,YAAY,EAAE,QAPL;EAQTtB,MAAAA,WAAW,EAAE,IARJ;EASTijB,MAAAA,UAAU,EAAE;EATH,KAAb;EAWA,UAAKoL,MAAL,GAAc,IAAd,CAtBsB;;EAwBtB,UAAKv3E,OAAL,GAAe,IAAf;EACA,UAAKy3E,QAAL,GAAgB;EACZz3E,MAAAA,OAAO,EAAE,CADG;EACA;EACZiuB,MAAAA,SAAS,EAAE,CAFC;EAGZi7B,MAAAA,WAAW,EAAE;EAHD,KAAhB;EAMA,UAAKsuB,QAAL,GAAgB;EACZx3E,MAAAA,OAAO,EAAE,CADG;EAEZiuB,MAAAA,SAAS,EAAE,CAFC;EAEE;EACdgnD,MAAAA,UAAU,EAAE,EAHA;EAGI;EAChB/rB,MAAAA,WAAW,EAAE,MAJD;EAKZ5wD,MAAAA,MAAM,EAAE,CALI;;EAAA,KAAhB;EAQA,UAAK2I,KAAL,GAAa;EACTjB,MAAAA,OAAO,EAAE,CADA;EAETy1E,MAAAA,SAAS,EAAE,MAFF;EAGT5sB,MAAAA,QAAQ,EAAE,EAHD;EAIT1sC,MAAAA,QAAQ,EAAE,CAJD;EAKTtlB,MAAAA,MAAM,EAAE,IALC;EAMTyB,MAAAA,MAAM,EAAE;EAAE4J,QAAAA,CAAC,EAAE,EAAL;EAASC,QAAAA,CAAC,EAAE,CAAZ;EAAemJ,QAAAA,CAAC,EAAE;EAAlB,OANC;EAOTo9C,MAAAA,SAAS,EAAE,QAPF;EAOkB;EAC3BgtB,MAAAA,aAAa,EAAE,QARN;EAQiB;EAC1BvJ,MAAAA,UAAU,EAAE,CATH;EAUTqN,MAAAA,KAAK,EAAE,IAVE;;EAAA,KAAb;;EAYA,QAAIhrF,GAAG,CAACirF,GAAJ,KAAY,CAACjrF,GAAG,CAACyS,KAAL,IAAczS,GAAG,CAACyS,KAAJ,CAAUy4E,OAAV,KAAsB3tF,SAAhD,CAAJ,EAAgE;EAC5D;EACA,YAAKkV,KAAL,CAAWkb,QAAX,GAAsB,EAAtB;EACH;EAED,UAAKw9D,OAAL,GAAe,CAAf;EAEA,UAAK7rF,GAAL,GAAW;EACPoU,MAAAA,CAAC,EAAE,CADI;EAEPC,MAAAA,CAAC,EAAE;EAFI,KAAX,CA1DsB;;EAgEtB,UAAK/T,WAAL,GAAmB,EAAnB,CAhEsB;;EAkEtB,UAAK0F,UAAL,GAAkB,EAAlB,CAlEsB;;EAoEtB,UAAK0rB,MAAL,GAAc,IAAd,CApEsB;EAuEtB;;EACA,UAAK95B,MAAL,GAAc,IAAd,CAxEsB;;EA0EtB,UAAK+zF,GAAL,GAAW,KAAX,CA1EsB;;EA4EtB,UAAKG,SAAL,GAAiB,KAAjB,CA5EsB;;EA+EtB,UAAK1pE,MAAL,GAAc,IAAd;EACA,UAAKD,MAAL,GAAc,IAAd;EAEA,UAAK4pE,SAAL,GAAiB,CAAjB,CAlFsB;;EAoFtB,UAAKvpF,UAAL,GAAkB,MAAlB,CApFsB;EAsFtB;EACA;EACA;;EACA,UAAKwpF,UAAL,GAAkB,IAAlB;EAEA,UAAK9kF,aAAL,GAAqB,KAArB,CA3FsB;;EA6FtB1Q,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB,EA7FsB;EAgGtB;EACA;;;EAEA,UAAKmpF,aAAL,GAAqB,MAAKpD,YAAL,CAAkBwF,cAAvC;;EAEA,UAAKxpC,IAAL,CAAU/hD,GAAV,EAAe,MAAKmpF,aAApB,EArGsB;EAuGtB;;;EACA,UAAK3lD,KAAL,CAAW4gB,OAAX,GAAqB,CAAC,CAAC,MAAK5yC,OAA5B;EAxGsB;EA0GzB;;;;2BACIxR,KAAKE,MAAM;EACZ,UAAI2B,EAAE,GAAG,IAAT,CADY;EAIZ;;EAEA,WAAKynF,SAAL,CAAeppF,IAAf;;EAEA,WAAKqpF,aAAL,GAAqB,YAAM;EACvB1nF,QAAAA,EAAE,CAAC2nF,YAAH;EACH,OAFD;;EAGA,WAAKvG,KAAL,CAAWkB,aAAX,CAAyBn2E,EAAzB,CAA4B,QAA5B,EAAsC,KAAKu7E,aAA3C;;EACA1nF,MAAAA,EAAE,CAAC2nF,YAAH;EACH;;;gCACStpF,MAAM;EACZ,UAAI2B,EAAE,GAAG,IAAT;;EAEA,UAAI3B,IAAI,IAAIA,IAAI,CAAC+H,KAAjB,EAAwB;EACpB,aAAKA,KAAL,GAAa/H,IAAI,CAAC+H,KAAlB;EACH;;EAED,WAAKrI,WAAL,GAAmBM,IAAI,CAACN,WAAxB;EAEAiC,MAAAA,EAAE,CAAC0oF,kBAAH,GAAwB,EAAxB;EACA1oF,MAAAA,EAAE,CAAC8oF,aAAH,GAAmB,EAAnB;;EACA70F,MAAAA,CAAC,CAACiD,IAAF,CAAO8I,EAAE,CAACjC,WAAV,EAAuB,UAAUsC,GAAV,EAAevJ,CAAf,EAAkB;EACrCkJ,QAAAA,EAAE,CAAC0oF,kBAAH,CAAsB5xF,CAAtB,IAA2BkJ,EAAE,CAAC+oF,cAAH,CAAkB1oF,GAAlB,EAAuBvJ,CAAvB,CAA3B;EACH,OAFD;;EAKA,UAAI,KAAK8Z,KAAL,CAAWkb,QAAX,IAAuB,CAA3B,EAA8B;EAC1B;EACA,aAAKlb,KAAL,CAAWynD,SAAX,GAAuB,OAAvB;EACH;;EAGD,QAAE,YAAY,KAAKj5D,IAAnB,MAA6B,KAAKwgB,MAAL,GAAc3rB,CAAC,CAACuF,GAAF,CAAM,KAAKuE,WAAX,CAA3C;;EACA,UAAI9F,KAAK,CAAC,KAAK2nB,MAAN,CAAL,IAAsB,KAAKA,MAAL,IAAenmB,QAAzC,EAAmD;EAC/C,aAAKmmB,MAAL,GAAc,CAAd;EACH;EACD,QAAE,YAAY,KAAKxgB,IAAnB,MAA6B,KAAKygB,MAAL,GAAc5rB,CAAC,CAAC4E,GAAF,CAAM,KAAKkF,WAAX,CAA3C;;EACA,UAAI9F,KAAK,CAAC,KAAK4nB,MAAN,CAAL,IAAsB,KAAKA,MAAL,IAAepmB,QAAzC,EAAmD;EAC/C,aAAKomB,MAAL,GAAc,CAAd;EACH;;EAED,WAAK2nE,QAAL;EACH;;;qCACcnnF,KAAKvJ,GAAG;EACnB,UAAIkyF,GAAJ;;EACA,UAAI/0F,CAAC,CAAC8D,UAAF,CAAa,KAAK6Y,KAAL,CAAWpK,MAAxB,CAAJ,EAAqC;EACjCwiF,QAAAA,GAAG,GAAG,KAAKp4E,KAAL,CAAWpK,MAAX,CAAkBnN,KAAlB,CAAwB,IAAxB,EAA8BW,SAA9B,CAAN;EACH,OAFD,MAEO;EACHgvF,QAAAA,GAAG,GAAG3oF,GAAN;EACH;;EAED,UAAIpM,CAAC,CAAC6B,OAAF,CAAUkzF,GAAV,CAAJ,EAAoB;EAChBA,QAAAA,GAAG,GAAG3C,YAAY,CAAC2C,GAAD,CAAlB;EACH;;EACD,UAAI,CAACA,GAAL,EAAU;EACNA,QAAAA,GAAG,GAAG3oF,GAAN;EACH;EACD,aAAO2oF,GAAP;EACH;;;qCACc;EAAA;;EACX;EAEA;EACA,UAAMpB,QAAQ,GAAG,IAAI1rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB;;EACA,UAAMgoE,YAAY,GAAG,KAAKA,YAA1B;;EACA,UAAI2D,aAAa,GAAG3D,YAAY,CAACV,WAAb,EAApB;;EAEA,UAAIoF,KAAK,GAAG,IAAI1sE,OAAJ,EAAZ,CARW;;;EASX2rE,MAAAA,aAAa,CAAC38D,OAAd,CAAsB09D,KAAtB;EATW,UAYJx+E,MAZI,GAcPw+E,KAdO,CAYP92E,CAZO;EAAA,UAaJ6jB,KAbI,GAcPizD,KAdO,CAaP3tE,CAbO;;EAeX,UAAI/a,MAAM,GAAGgkF,YAAY,CAACQ,SAAb,EAAb;;EACA,UAAIoD,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAnB;;EACA,UAAI6rE,SAAS,GAAG,KAAKlB,YAAL,CAAkBmB,WAAlB,EAAhB;;EACA,UAAI2B,cAAc,GAAG,KAAK/4E,KAAL,CAAWy0E,aAAhC;;EACA,UAAI4C,QAAQ,GAAG,KAAKr3E,KAAL,CAAW3I,MAAX,CAAkBgT,CAAlB,GAAsB,KAAKmsE,QAAL,CAAcxpD,SAApC,GAAgD,KAAKupD,QAAL,CAAcvC,UAA9D,GAA2E,KAAKuC,QAAL,CAAcl/E,MAAxG;;EAEA,UAAI8/E,SAAS,CAAC7/D,MAAV,CAAiBq6B,OAArB,EAA8B;EAC1B,YAAIwlC,SAAS,CAACvG,IAAV,CAAej/B,OAAnB,EAA4B;EACxBriD,UAAAA,MAAM,GAAGgkF,YAAY,CAACQ,SAAb,EAAT;EACAoD,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAf;EACH,SAHD,MAGO;EACHhc,UAAAA,MAAM,GAAG,IAAIgc,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAACyZ,KAAnB,CAAT;EACAmyD,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAf;EACA+rE,UAAAA,QAAQ,IAAI,CAAC,CAAb;EACH;;EACD0B,QAAAA,cAAc,GAAG,QAAjB;EAEH,OAXD,MAWO;EACH;EACA,YAAI5B,SAAS,CAACvG,IAAV,CAAej/B,OAAnB,EAA4B;EACxBriD,UAAAA,MAAM,GAAG,IAAIgc,OAAJ,CAAY,CAAZ,EAAe9R,MAAf,EAAuB,CAAvB,CAAT;EACA09E,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAf;EAEH,SAJD,MAIO;EACHhc,UAAAA,MAAM,GAAG,IAAIgc,OAAJ,CAAY,CAAZ,EAAe9R,MAAf,EAAuB,CAACurB,KAAxB,CAAT;EACAmyD,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAf;EACA+rE,UAAAA,QAAQ,IAAI,CAAC,CAAb;EACH;;EACD0B,QAAAA,cAAc,GAAG,KAAjB;EACH;;EAED,UAAI,KAAKzB,SAAT,EAAoB;EAChB,YAAI,KAAKA,SAAL,CAAexD,SAAf,GAA2Bx6D,MAA3B,CAAkChqB,MAAlC,CAAJ,EAA+C;EAC3C;EACH;;EACD,aAAKgoF,SAAL,CAAeC,SAAf,CAAyBjoF,MAAzB;;EACA,aAAKgoF,SAAL,CAAeziD,MAAf,GALgB;;;EAQhB,aAAKo/C,SAAL,CAAeuD,MAAf,CAAsBN,YAAtB;;EACA,aAAKjD,SAAL,CAAeK,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C,EAA4DpD,YAAY,CAAC0F,gBAAzE;;EACA,aAAK/E,SAAL,CAAep/C,MAAf;;EAEA,aAAK6iD,SAAL,CAAeF,MAAf,CAAsBN,YAAtB;;EACA,aAAKQ,SAAL,CAAergF,MAAf,CAAsBm4B,IAAtB,CAA2B6nD,QAA3B;;EACA,aAAKK,SAAL,CAAepD,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C,EAA4DpD,YAAY,CAAC0F,gBAAzE;;EACA,aAAKtB,SAAL,CAAeuB,gBAAf,CAAgCF,cAAhC;EAGH,OAlBD,MAkBO;EAEH,aAAKzB,SAAL,GAAiB,IAAIzD,QAAJ,CAAaP,YAAb,EAA2B,KAAKkD,QAAhC,CAAjB;;EACA,aAAKc,SAAL,CAAeE,MAAf,CAAsBR,QAAtB;;EACA,aAAKM,SAAL,CAAeC,SAAf,CAAyBjoF,MAAzB;;EACA,aAAKgoF,SAAL,CAAeM,SAAf,CAAyB,KAAKlB,aAAL,CAAmB74E,UAA5C;;EACA,aAAKy5E,SAAL,CAAeO,YAAf,CAA4B,WAA5B;;EACA,aAAKP,SAAL,CAAe1mC,SAAf;;EAEA,aAAK7f,KAAL,CAAW3jB,GAAX,CAAe,KAAKkqE,SAAL,CAAevmD,KAA9B,EATG;;EAYH,aAAKkjD,SAAL,GAAiB,IAAIF,SAAJ,CAAcT,YAAd,EAA4B,KAAKiD,QAAjC,CAAjB;;EACA,aAAKtC,SAAL,CAAeuD,MAAf,CAAsBN,YAAtB;;EACA,aAAKjD,SAAL,CAAeK,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C,EAA4DpD,YAAY,CAAC0F,gBAAzE;;EACA,aAAK/E,SAAL,CAAerjC,SAAf;;EAEA,aAAK7f,KAAL,CAAW3jB,GAAX,CAAe,KAAK6mE,SAAL,CAAeljD,KAA9B,EAjBG;;EAqBH,aAAK2mD,SAAL,GAAiB,IAAInD,SAAJ,CAAcjB,YAAd,EAA4B,KAAKtzE,KAAjC,CAAjB;EAEA,aAAK03E,SAAL,CAAergF,MAAf,CAAsBgT,CAAtB,IAA2B,KAAKmsE,QAAL,CAAcxpD,SAAd,GAA0B,KAAKupD,QAAL,CAAcvpD,SAAxC,GAAoD,KAAKupD,QAAL,CAAcl/E,MAA7F;;EAEA,aAAKqgF,SAAL,CAAeuB,gBAAf,CAAgCF,cAAhC;;EACA,aAAKrB,SAAL,CAAeF,MAAf,CAAsBN,YAAtB;;EACA,aAAKQ,SAAL,CAAepD,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C,EAA4DpD,YAAY,CAAC0F,gBAAzE,EA3BG;;;EA8BH,aAAKtB,SAAL,CAAe9mC,SAAf,CAAyB,KAAKknC,kBAA9B;;EAEA,aAAKtH,KAAL,CAAWuH,UAAX,CAAsB3qE,GAAtB,CAA0B,KAAKsqE,SAAL,CAAe3mD,KAAzC,EAhCG;;;EAmCH,aAAK2mD,SAAL,CAAe7I,MAAf,CAAsBzqF,OAAtB,CAA8B,UAAC4b,KAAD,EAAQ1K,CAAR,EAAc;EACxCjS,UAAAA,CAAC,CAAC8D,UAAF,CAAa,MAAI,CAAC1C,MAAlB,KAA6B,MAAI,CAACA,MAAL,CAAY;EACrCoO,YAAAA,UAAU,EAAE,MAAI,CAAC6jF,aAAL,CAAmBtC,iBADM;EAErCrtF,YAAAA,KAAK,EAAEuO,CAF8B;EAGrC0K,YAAAA,KAAK,EAAEA,KAH8B;EAIrCgc,YAAAA,IAAI,EAAE,MAAI,CAACi4D,SAAL,CAAep7C,KAAf,CAAqBvjC,CAArB;EAJ+B,WAAZ,CAA7B;EAMH,SAPD;EAWH;EAEJ;;;iCACU;EAEP;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEJ;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EAEA;EAEA;;;;6BAEO;EAEH,WAAKgiF,SAAL,CAAeh8E,IAAf;;EACA,WAAK24E,SAAL,CAAe34E,IAAf;;EACA,WAAKo8E,SAAL,CAAep8E,IAAf,GAJG;;EASN;;;gCACS;EAEN,WAAKg8E,SAAL,CAAejsC,OAAf;;EACA,WAAK4oC,SAAL,CAAe5oC,OAAf;;EACA,WAAKqsC,SAAL,CAAersC,OAAf;;EACA,WAAKmlC,KAAL,CAAWkB,aAAX,CAAyB12E,GAAzB,CAA6B,QAA7B,EAAuC,KAAK87E,aAA5C;;EACA,WAAKA,aAAL,GAAqB,IAArB;EACH;;;kCACW;EACR,WAAKD,SAAL,CAAe,KAAKH,aAApB,EADQ;;;EAIR,WAAKY,SAAL,CAAee,SAAf;;EACA,WAAKpE,SAAL,CAAeoE,SAAf,CAAyB,KAAKf,SAA9B,EAAyC,KAAKZ,aAA9C;;EACA,WAAKgB,SAAL,CAAeW,SAAf,CAAyB,KAAKf,SAA9B,EAAyC,KAAKZ,aAA9C,EAA6D,KAAKoB,kBAAlE;EACH;;;;IA5VezE;;MCCd6F;;;;;EACF,iBAAYjD,YAAZ,EAA0B;EAAA;;EAAA;;EACtB,+EAAMA,YAAY,CAAC3C,YAAnB;EAEA,UAAKrsF,IAAL,GAAU,OAAV;EAEA,QAAIsG,GAAG,GAAG,MAAKiB,IAAL,GAAY,MAAK8kF,YAAL,CAAkBvlF,KAAlB,CAAwB6jB,KAA9C;EACA,UAAKqkE,YAAL,GAAoBA,YAApB;EACA,UAAKC,MAAL,GAAc,MAAK5C,YAAL,CAAkBvlF,KAAlB,IAA2B,EAAzC;EAEA,UAAKwL,KAAL,GAAa,CAAb;EACA,UAAKC,MAAL,GAAc,CAAd;EAEA,UAAK28E,KAAL,GAAa;EACTC,MAAAA,OAAO,EAAE,EADA;EAETC,MAAAA,SAAS,EAAE,MAFF;EAGT7B,MAAAA,SAAS,EAAE,MAHF;EAIT5sB,MAAAA,QAAQ,EAAE,EAJD;EAKTvwD,MAAAA,MAAM,EAAE,CALC;EAMTowD,MAAAA,SAAS,EAAE,QANF;EAOT8B,MAAAA,YAAY,EAAE,QAPL;EAQTtB,MAAAA,WAAW,EAAE,IARJ;EASTijB,MAAAA,UAAU,EAAE;EATH,KAAb;EAWA,UAAKoL,MAAL,GAAc,IAAd,CAvBsB;;EAyBtB,UAAKv3E,OAAL,GAAe,IAAf;EACA,UAAKw3E,QAAL,GAAgB;EACZx3E,MAAAA,OAAO,EAAE,CADG;EAEZiuB,MAAAA,SAAS,EAAE,CAFC;EAEE;EACdgnD,MAAAA,UAAU,EAAE,EAHA;EAGI;EAChB/rB,MAAAA,WAAW,EAAE,MAJD;EAKZ5wD,MAAAA,MAAM,EAAE,CALI;;EAAA,KAAhB;EAOA,UAAKm/E,QAAL,GAAgB;EACZz3E,MAAAA,OAAO,EAAE,CADG;EACA;EACZiuB,MAAAA,SAAS,EAAE,CAFC;EAGZi7B,MAAAA,WAAW,EAAE;EAHD,KAAhB;EAKA,UAAKjoD,KAAL,GAAa;EACTjB,MAAAA,OAAO,EAAE,CADA;EAETy1E,MAAAA,SAAS,EAAE,MAFF;EAGT5sB,MAAAA,QAAQ,EAAE,EAHD;EAIT1sC,MAAAA,QAAQ,EAAE,CAJD;EAKTtlB,MAAAA,MAAM,EAAE,IALC;EAMTyB,MAAAA,MAAM,EAAE;EAAE4J,QAAAA,CAAC,EAAE,EAAL;EAASC,QAAAA,CAAC,EAAE,CAAZ;EAAemJ,QAAAA,CAAC,EAAE;EAAlB,OANC;EAOTo9C,MAAAA,SAAS,EAAE,MAPF;EAOgB;EACzBgtB,MAAAA,aAAa,EAAE,QARN;EAQiB;EAC1BvJ,MAAAA,UAAU,EAAE,CATH;;EAAA,KAAb;;EAYA,QAAI39E,GAAG,CAACirF,GAAJ,KAAY,CAACjrF,GAAG,CAACyS,KAAL,IAAczS,GAAG,CAACyS,KAAJ,CAAUy4E,OAAV,KAAsB3tF,SAAhD,CAAJ,EAAgE;EAC5D;EACA,YAAKkV,KAAL,CAAWkb,QAAX,GAAsB,EAAtB;EACH;;EAGD,UAAKw9D,OAAL,GAAe,CAAf;EAEA,UAAK7rF,GAAL,GAAW;EACPoU,MAAAA,CAAC,EAAE,CADI;EAEPC,MAAAA,CAAC,EAAE;EAFI,KAAX,CA1DsB;;EAgEtB,UAAK/T,WAAL,GAAmB,EAAnB,CAhEsB;;EAkEtB,UAAK0F,UAAL,GAAkB,EAAlB,CAlEsB;;EAoEtB,UAAK0rB,MAAL,GAAc,IAAd,CApEsB;EAuEtB;;EACA,UAAK95B,MAAL,GAAc,IAAd,CAxEsB;;EA0EtB,UAAK+zF,GAAL,GAAW,KAAX,CA1EsB;;EA4EtB,UAAKG,SAAL,GAAiB,KAAjB,CA5EsB;;EA+EtB,UAAK1pE,MAAL,GAAc,IAAd;EACA,UAAKD,MAAL,GAAc,IAAd;EAEA,UAAK4pE,SAAL,GAAiB,CAAjB,CAlFsB;;EAoFtB,UAAKvpF,UAAL,GAAkB,MAAlB,CApFsB;EAsFtB;EACA;EACA;;EACA,UAAKwpF,UAAL,GAAkB,IAAlB,CAzFsB;EA4FtB;EACA;;EAEA,UAAK9kF,aAAL,GAAqB,KAArB,CA/FsB;;EAgGtB1Q,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB;;EAEA,UAAKyS,KAAL,CAAWjB,OAAX,GAAqB,MAAKA,OAAL,IAAgB,MAAKiB,KAAL,CAAWjB,OAAhD;EACA,UAAKw3E,QAAL,CAAcx3E,OAAd,GAAwB,MAAKA,OAAL,IAAgB,MAAKw3E,QAAL,CAAcx3E,OAAtD;EACA,UAAKy3E,QAAL,CAAcz3E,OAAd,GAAwB,MAAKA,OAAL,IAAgB,MAAKy3E,QAAL,CAAcz3E,OAAtD;EAEA,UAAK23E,aAAL,GAAqB,MAAKpD,YAAL,CAAkB6F,cAAvC;;EAEA,UAAK7pC,IAAL,CAAU/hD,GAAV,EAAe,MAAKmpF,aAApB;;EAEA,UAAK3lD,KAAL,CAAW4gB,OAAX,GAAqB,CAAC,CAAC,MAAK5yC,OAA5B;EA1GsB;EA4GzB;;;;2BACIxR,KAAKE,MAAM;EACZ,UAAI2B,EAAE,GAAG,IAAT,CADY;EAIZ;;EAEA,WAAKynF,SAAL,CAAeppF,IAAf;;EAEA,WAAKqpF,aAAL,GAAqB,YAAM;EACvB1nF,QAAAA,EAAE,CAAC2nF,YAAH;EACH,OAFD;;EAIA,WAAKvG,KAAL,CAAWkB,aAAX,CAAyBn2E,EAAzB,CAA4B,QAA5B,EAAsC,KAAKu7E,aAA3C;;EACA1nF,MAAAA,EAAE,CAAC2nF,YAAH;EACH;;;gCACStpF,MAAM;EACZ,UAAI2B,EAAE,GAAG,IAAT;;EAEA,UAAI3B,IAAI,IAAIA,IAAI,CAAC+H,KAAjB,EAAwB;EACpB,aAAKA,KAAL,GAAa/H,IAAI,CAAC+H,KAAlB;EACH;;EAED,WAAKrI,WAAL,GAAmBM,IAAI,CAACwqF,cAAL,EAAnB;EACA,UAAImB,cAAc,GAAG3rF,IAAI,CAACe,IAAL,CAAUrB,WAAV,IAAuB,EAA5C;EACAiC,MAAAA,EAAE,CAAC0oF,kBAAH,GAAwB,EAAxB;EACA1oF,MAAAA,EAAE,CAAC8oF,aAAH,GAAmB,EAAnB;;EACA70F,MAAAA,CAAC,CAACiD,IAAF,CAAO8I,EAAE,CAACjC,WAAV,EAAuB,UAAUsC,GAAV,EAAevJ,CAAf,EAAkB;EACrCuJ,QAAAA,GAAG,GAAG2pF,cAAc,CAAClzF,CAAD,CAAd,IAAmBuJ,GAAzB;EACAL,QAAAA,EAAE,CAAC0oF,kBAAH,CAAsB5xF,CAAtB,IAA2BkJ,EAAE,CAAC+oF,cAAH,CAAkB1oF,GAAlB,EAAuBvJ,CAAvB,CAA3B;EACH,OAHD;;EAKA,UAAI,KAAK8Z,KAAL,CAAWkb,QAAX,IAAuB,CAA3B,EAA8B;EAC1B;EACA,aAAKlb,KAAL,CAAWynD,SAAX,GAAuB,OAAvB;EACH;;EAGD,QAAE,YAAY,KAAKj5D,IAAnB,MAA6B,KAAKwgB,MAAL,GAAc3rB,CAAC,CAACuF,GAAF,CAAM,KAAKuE,WAAX,CAA3C;;EACA,UAAI9F,KAAK,CAAC,KAAK2nB,MAAN,CAAL,IAAsB,KAAKA,MAAL,IAAenmB,QAAzC,EAAmD;EAC/C,aAAKmmB,MAAL,GAAc,CAAd;EACH;EACD,QAAE,YAAY,KAAKxgB,IAAnB,MAA6B,KAAKygB,MAAL,GAAc5rB,CAAC,CAAC4E,GAAF,CAAM,KAAKkF,WAAX,CAA3C;;EACA,UAAI9F,KAAK,CAAC,KAAK4nB,MAAN,CAAL,IAAsB,KAAKA,MAAL,IAAepmB,QAAzC,EAAmD;EAC/C,aAAKomB,MAAL,GAAc,CAAd;EACH;;EAED,WAAK2nE,QAAL;;EAEA,WAAKyC,cAAL;EACH;;;qCACc5pF,KAAKvJ,GAAG;EACnB,UAAIkyF,GAAJ;;EACA,UAAI/0F,CAAC,CAAC8D,UAAF,CAAa,KAAK6Y,KAAL,CAAWpK,MAAxB,CAAJ,EAAqC;EACjCwiF,QAAAA,GAAG,GAAG,KAAKp4E,KAAL,CAAWpK,MAAX,CAAkBnN,KAAlB,CAAwB,IAAxB,EAA8BW,SAA9B,CAAN;EACH,OAFD,MAEO;EACHgvF,QAAAA,GAAG,GAAG3oF,GAAN;EACH;;EAED,UAAIpM,CAAC,CAAC6B,OAAF,CAAUkzF,GAAV,CAAJ,EAAoB;EAChBA,QAAAA,GAAG,GAAG3C,YAAY,CAAC2C,GAAD,CAAlB;EACH;;EACD,UAAI,CAACA,GAAL,EAAU;EACNA,QAAAA,GAAG,GAAG3oF,GAAN;EACH;EACD,aAAO2oF,GAAP;EACH;;;qCACc;EAEX;EACA,UAAMpB,QAAQ,GAAG,IAAI1rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAjB;;EACA,UAAMgoE,YAAY,GAAG,KAAKA,YAA1B;;EACA,UAAI2D,aAAa,GAAG3D,YAAY,CAACV,WAAb,EAApB;;EACA,UAAIoF,KAAK,GAAG,IAAI1sE,OAAJ,EAAZ;;EACA2rE,MAAAA,aAAa,CAAC38D,OAAd,CAAsB09D,KAAtB;EAPW,UAUJz+E,KAVI,GAaPy+E,KAbO,CAUP/2E,CAVO;EAAA,UAWJzH,MAXI,GAaPw+E,KAbO,CAWP92E,CAXO;EAeX,UAAI5R,MAAM,GAAG,IAAIgc,OAAJ,CAAY/R,KAAZ,EAAmB,CAAnB,EAAsB,CAAtB,CAAb;;EACA,UAAI29E,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAnB;;EACA,UAAI6rE,SAAS,GAAG,KAAKlB,YAAL,CAAkBmB,WAAlB,EAAhB;;EAEA,UAAIhvB,UAAU,GAAG,KAAKpoD,KAAL,CAAWynD,SAA5B;;EACA,UAAI6xB,QAAQ,GAAG,KAAKt5E,KAAL,CAAW3I,MAAX,CAAkB4J,CAAlB,GAAsB,KAAKu1E,QAAL,CAAcxpD,SAApC,GAAgD,KAAKupD,QAAL,CAAcvC,UAA9D,GAA2E,KAAKuC,QAAL,CAAcl/E,MAAxG;;EAEA,UAAI8/E,SAAS,CAAC7/D,MAAV,CAAiBq6B,OAArB,EAA8B;EAE1B,YAAIwlC,SAAS,CAACj/E,IAAV,CAAey5C,OAAnB,EAA4B;EACxBriD,UAAAA,MAAM,GAAG,IAAIgc,OAAJ,CAAY/R,KAAZ,EAAmB,CAAnB,EAAsB,CAAtB,CAAT;EACA29E,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAf;EAEH,SAJD,MAIO;EACHhc,UAAAA,MAAM,GAAG,IAAIgc,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAT;EACA4rE,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAf;EACH;;EAED,YAAI6rE,SAAS,CAACxG,KAAV,CAAgBh/B,OAApB,EAA6B;EACzB,cAAIwlC,SAAS,CAACj/E,IAAV,CAAey5C,OAAnB,EAA4B;EACxByW,YAAAA,UAAU,GAAG,OAAb;EACH,WAFD,MAEO;EACHA,YAAAA,UAAU,GAAG,MAAb;EACAkxB,YAAAA,QAAQ,GAAG,CAACA,QAAZ;EACH;EACJ,SAPD,MAOO;EACH,cAAInC,SAAS,CAACj/E,IAAV,CAAey5C,OAAnB,EAA4B;EACxByW,YAAAA,UAAU,GAAG,MAAb;EACH,WAFD,MAEO;EACHA,YAAAA,UAAU,GAAG,OAAb;EACAkxB,YAAAA,QAAQ,GAAG,CAACA,QAAZ;EACH;EACJ;EAEJ,OA3BD,MA2BO;EACH;EACA,YAAInC,SAAS,CAACj/E,IAAV,CAAey5C,OAAnB,EAA4B;EACxBriD,UAAAA,MAAM,GAAG,IAAIgc,OAAJ,CAAY/R,KAAZ,EAAmBC,MAAnB,EAA2B,CAA3B,CAAT;EACA09E,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAf;EAEH,SAJD,MAIO;EACHhc,UAAAA,MAAM,GAAG,IAAIgc,OAAJ,CAAY,CAAZ,EAAe9R,MAAf,EAAuB,CAAvB,CAAT;EACA09E,UAAAA,YAAY,GAAG,IAAI5rE,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAf;EAEH;;EACD,YAAI6rE,SAAS,CAACxG,KAAV,CAAgBh/B,OAApB,EAA6B;EACzB,cAAIwlC,SAAS,CAACj/E,IAAV,CAAey5C,OAAnB,EAA4B;EACxByW,YAAAA,UAAU,GAAG,OAAb;EACH,WAFD,MAEO;EACHA,YAAAA,UAAU,GAAG,MAAb;EACAkxB,YAAAA,QAAQ,GAAG,CAACA,QAAZ;EACH;EACJ,SAPD,MAOO;EACH,cAAInC,SAAS,CAACj/E,IAAV,CAAey5C,OAAnB,EAA4B;EACxByW,YAAAA,UAAU,GAAG,MAAb;EACH,WAFD,MAEO;EACHA,YAAAA,UAAU,GAAG,OAAb;EACAkxB,YAAAA,QAAQ,GAAG,CAACA,QAAZ;EACH;EACJ;EACJ;;EAED,UAAI,KAAKhC,SAAT,EAAoB;EAChB,YAAI,KAAKA,SAAL,CAAexD,SAAf,GAA2Bx6D,MAA3B,CAAkChqB,MAAlC,CAAJ,EAA+C;EAC3C;EACH,SAHe;;;EAKhB,aAAKgoF,SAAL,CAAeC,SAAf,CAAyBjoF,MAAzB;;EACA,aAAKgoF,SAAL,CAAeziD,MAAf,GANgB;EAQhB;EAEA;EACA;;;EACA,aAAKo/C,SAAL,CAAeuD,MAAf,CAAsBN,YAAtB;;EACA,aAAKjD,SAAL,CAAeK,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C,EAA4DpD,YAAY,CAACiG,gBAAzE;;EACA,aAAKtF,SAAL,CAAep/C,MAAf,GAdgB;EAgBhB;EAEA;;;EAEA,aAAK6iD,SAAL,CAAeF,MAAf,CAAsBN,YAAtB;;EACA,aAAKQ,SAAL,CAAepD,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C,EAA4DpD,YAAY,CAACiG,gBAAzE;;EACA,aAAK7B,SAAL,CAAeC,YAAf,CAA4BvvB,UAA5B;;EACA,aAAKsvB,SAAL,CAAergF,MAAf,CAAsBg4B,IAAtB,CAA2BiqD,QAA3B,EAvBgB;EAyBhB;;EAGH,OA5BD,MA4BO;EACH,aAAKhC,SAAL,GAAiB,IAAIzD,QAAJ,CAAaP,YAAb,EAA2B,KAAKkD,QAAhC,CAAjB;;EACA,aAAKc,SAAL,CAAeE,MAAf,CAAsBR,QAAtB;;EACA,aAAKM,SAAL,CAAeC,SAAf,CAAyBjoF,MAAzB;;EACA,aAAKgoF,SAAL,CAAeM,SAAf,CAAyB,KAAKlB,aAAL,CAAmB74E,UAA5C;;EACA,aAAKy5E,SAAL,CAAeO,YAAf,CAA4B,WAA5B;;EACA,aAAKP,SAAL,CAAe1mC,SAAf;;EAEA,aAAK7f,KAAL,CAAW3jB,GAAX,CAAe,KAAKkqE,SAAL,CAAevmD,KAA9B,EARG;;EAaH,aAAKkjD,SAAL,GAAiB,IAAIF,SAAJ,CAAcT,YAAd,EAA4B,KAAKiD,QAAjC,CAAjB;;EACA,aAAKtC,SAAL,CAAeuD,MAAf,CAAsBN,YAAtB;;EACA,aAAKjD,SAAL,CAAeK,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C,EAA4DpD,YAAY,CAACiG,gBAAzE;;EACA,aAAKtF,SAAL,CAAerjC,SAAf;;EAEA,aAAK7f,KAAL,CAAW3jB,GAAX,CAAe,KAAK6mE,SAAL,CAAeljD,KAA9B,EAlBG;;EAuBH,aAAK2mD,SAAL,GAAiB,IAAInD,SAAJ,CAAcjB,YAAd,EAA4B,KAAKtzE,KAAjC,CAAjB;EACA,aAAK03E,SAAL,CAAergF,MAAf,CAAsB4J,CAAtB,GAA0Bq4E,QAA1B;;EAEA,aAAK5B,SAAL,CAAeF,MAAf,CAAsBN,YAAtB;;EACA,aAAKQ,SAAL,CAAepD,QAAf,CAAwB,KAAKgD,SAA7B,EAAwC,KAAKZ,aAA7C,EAA4DpD,YAAY,CAACiG,gBAAzE,EA3BG;;;EA8BH,aAAK7B,SAAL,CAAe9mC,SAAf,CAAyB,KAAKknC,kBAA9B,EA9BG;;;EAgCH,aAAKtH,KAAL,CAAWuH,UAAX,CAAsB3qE,GAAtB,CAA0B,KAAKsqE,SAAL,CAAe3mD,KAAzC;EAEH;EACJ;;;iCACU;EAEP;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACH;;;uCAEgB;EAAE;EACf,UAAI3hC,EAAE,GAAG,IAAT;EACA,UAAMkkF,YAAY,GAAGlkF,EAAE,CAACkkF,YAAxB;;EACA,UAAI,CAAClkF,EAAE,CAAC2P,OAAR,EAAiB;EACb3P,QAAAA,EAAE,CAACmK,KAAH,GAAW,CAAX;EACH,OAFD,MAEO;EACH,YAAIigF,aAAa,GAAG,CAApB;;EAEA,YAAI,KAAKx5E,KAAL,CAAWjB,OAAf,EAAwB;EAEpB;EACA,cAAIxF,KAAK,GAAG+tD,WAAW,CAAC+C,YAAZ,CAAyBj7D,EAAE,CAAC0oF,kBAA5B,EAAgD,CAAC,QAAD,EAAW,QAAX,EAAqB,KAAK93E,KAAL,CAAWw0E,SAAhC,EAA2C,KAAKx0E,KAAL,CAAW4nD,QAAtD,EAAgEznB,IAAhE,CAAqE,GAArE,CAAhD,CAAZ;EACAq5C,UAAAA,aAAa,GAAG7zF,IAAI,CAACsC,GAAL,CAASuxF,aAAT,EAAwBjgF,KAAxB,CAAhB,CAJoB;EAMpB;EAEA;EACA;EACA;EAEA;EACA;EAEA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACH;EACD,aAAKigF,aAAL,GAAqBA,aAArB;;EACA,YAAI5O,KAAK,GAAG0I,YAAY,CAACmG,4BAAb,EAAZ;;EACA,aAAKlgF,KAAL,GAAa,CAACigF,aAAa,GAAG,KAAKjD,QAAL,CAAcvC,UAA9B,GAA2C,KAAKuC,QAAL,CAAcl/E,MAAzD,GAAkE,KAAK2I,KAAL,CAAW3I,MAA7E,GAAsF,KAAKm/E,QAAL,CAAcxpD,SAArG,IAAkH49C,KAA/H,CAxCG;EA0CH;EACA;EACA;EAEH;EACJ;;;;gCAESr9E,KAAK;;;6BAGR;EAEH,WAAK+pF,SAAL,CAAeh8E,IAAf;;EACA,WAAK24E,SAAL,CAAe34E,IAAf;;EACA,WAAKo8E,SAAL,CAAep8E,IAAf,GAJG;;EAON;;;gCACS;EAEN,WAAKg8E,SAAL,CAAejsC,OAAf;;EACA,WAAK4oC,SAAL,CAAe5oC,OAAf;;EACA,WAAKqsC,SAAL,CAAersC,OAAf;;EACA,WAAKmlC,KAAL,CAAWkB,aAAX,CAAyB12E,GAAzB,CAA6B,QAA7B,EAAuC,KAAK87E,aAA5C;;EACA,WAAKA,aAAL,GAAqB,IAArB;EACH;;;kCACU;EACP,WAAKD,SAAL,CAAe,KAAKH,aAApB,EADO;;;EAIP,WAAKY,SAAL,CAAee,SAAf;;EACA,WAAKpE,SAAL,CAAeoE,SAAf,CAAyB,KAAKf,SAA9B,EAAyC,KAAKZ,aAA9C;;EACA,WAAKgB,SAAL,CAAeW,SAAf,CAAyB,KAAKf,SAA9B,EAAyC,KAAKZ,aAA9C,EAA4D,KAAKoB,kBAAjE;EACH;;;;IAjaezE;;MCFdqG;;;;;EACF,gBAAYzD,YAAZ,EAA0B;EAAA;;EAAA;;EACtB,8EAAMA,YAAY,CAAC3C,YAAnB;EAEA,UAAKrsF,IAAL,GAAY,MAAZ;EACA,QAAIsG,GAAG,GAAG,MAAKiB,IAAL,GAAY,MAAK8kF,YAAL,CAAkBvlF,KAAlB,CAAwB6hE,IAA9C;EACA,UAAK7hE,KAAL,GAAa,MAAKulF,YAAL,CAAkBvlF,KAA/B;EAEA,UAAKkoF,YAAL,GAAoBA,YAApB;EAEA,UAAKl3E,OAAL,GAAe,IAAf;EAEA,UAAKid,IAAL,GAAY;EAAiC;EACzCjd,MAAAA,OAAO,EAAE,IADD;EAERmvE,MAAAA,QAAQ,EAAE,OAFF;EAE0B;EAClCjmB,MAAAA,WAAW,EAAE;EAHL,KAAZ;EAMA,UAAK0xB,IAAL,GAAY;EACR56E,MAAAA,OAAO,EAAE,KADD;EAERipD,MAAAA,SAAS,EAAE,MAFH;EAGR/6C,MAAAA,KAAK,EAAE;EAHC,KAAZ;;EAOA5pB,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB;;EAEA,UAAK+hD,IAAL;;EA1BsB;EA2BzB;;;;6BACM;EACH,UAAIlgD,EAAE,GAAG,IAAT;EACA,UAAI0hF,GAAG,GAAG,KAAKN,KAAL,CAAWM,GAArB;EAEA,WAAK8I,SAAL,GAAiB9I,GAAG,CAACv9C,QAAJ,CAAa;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAb,CAAjB,CAJG;;EAKH,WAAK4yF,UAAL,GAAkB/I,GAAG,CAACv9C,QAAJ,CAAa;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAb,CAAlB;EACA,WAAK6yF,QAAL,GAAgBhJ,GAAG,CAACv9C,QAAJ,CAAa;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAb,CAAhB;EACA,WAAK8yF,WAAL,GAAmBjJ,GAAG,CAACv9C,QAAJ,CAAa;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAb,CAAnB;EACA,WAAK+yF,UAAL,GAAkBlJ,GAAG,CAACv9C,QAAJ,CAAa;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAb,CAAlB;EACA,WAAKgzF,SAAL,GAAiBnJ,GAAG,CAACv9C,QAAJ,CAAa;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAb,CAAjB;EAEA,WAAK8pC,KAAL,CAAW3jB,GAAX,CAAe,KAAKwsE,SAApB;EACA,WAAK7oD,KAAL,CAAW3jB,GAAX,CAAe,KAAKysE,UAApB;EACA,WAAK9oD,KAAL,CAAW3jB,GAAX,CAAe,KAAK0sE,QAApB;EACA,WAAK/oD,KAAL,CAAW3jB,GAAX,CAAe,KAAK2sE,WAApB;EACA,WAAKhpD,KAAL,CAAW3jB,GAAX,CAAe,KAAK4sE,UAApB;EACA,WAAKjpD,KAAL,CAAW3jB,GAAX,CAAe,KAAK6sE,SAApB;EAEA,WAAKlpD,KAAL,CAAW8U,WAAX,GAAyB,CAAC,CAA1B;;EAGA,WAAKixC,aAAL,GAAqB,YAAM;EACvB,YAAI,CAAC1nF,EAAE,CAAC2P,OAAR,EAAiB;;EACjB,YAAIo4E,SAAS,GAAG/nF,EAAE,CAAC6mF,YAAH,CAAgBmB,WAAhB,EAAhB;;EACA/zF,QAAAA,CAAC,CAACiD,IAAF,CAAO6wF,SAAP,EAAkB,UAACrwF,KAAD,EAAQtB,GAAR,EAAgB;EAC9B4J,UAAAA,EAAE,CAAC5J,GAAG,GAAG,OAAP,CAAF,CAAkBmsD,OAAlB,GAA4B7qD,KAAK,CAAC6qD,OAAlC;EACH,SAFD;EAIH,OAPD;;EAQA,WAAK6+B,KAAL,CAAWkB,aAAX,CAAyBn2E,EAAzB,CAA4B,QAA5B,EAAsC,KAAKu7E,aAA3C;;EAEA,WAAKv9E,KAAL,GAAa,KAAK+5E,YAAL,CAAkBwF,cAAlB,CAAiCj7E,UAA9C;EACA,WAAKrE,MAAL,GAAc,KAAK85E,YAAL,CAAkB4G,QAAlB,GAA6BC,IAA7B,CAAkCt8E,UAAhD;EACA,WAAKknB,KAAL,GAAa,KAAKuuD,YAAL,CAAkB6F,cAAlB,CAAiCt7E,UAA9C;EAGH;;;iCAIU;EAEP,UAAIzO,EAAE,GAAG,IAAT;EACA,UAAI0hF,GAAG,GAAG1hF,EAAE,CAACohF,KAAH,CAASM,GAAnB;EACA,UAAI,CAAC1hF,EAAE,CAAC2P,OAAR,EAAiB;EACjB,UAAMu0E,YAAY,GAAG,KAAKA,YAA1B;;EACA,UAAI6D,SAAS,GAAG,KAAKlB,YAAL,CAAkBmB,WAAlB,EAAhB;;EAGA,UAAIhoF,EAAE,CAACuqF,IAAH,CAAQ56E,OAAZ,EAAqB;EAEjB;EACA;EACA,aAAKq7E,QAAL,GAAgBtJ,GAAG,CAACrD,WAAJ,CAAgB,KAAK1oD,KAArB,EAA4B,KAAKvrB,MAAjC,EAAyC1O,SAAzC,EAAoDqsF,SAAS,CAACj/E,IAA9D,EAAoE9I,EAAE,CAACwqF,SAAvE,EAAkF,KAAKD,IAAvF,CAAhB;EACA,aAAKU,SAAL,GAAiBvJ,GAAG,CAACrD,WAAJ,CAAgB,KAAK1oD,KAArB,EAA4B,KAAKvrB,MAAjC,EAAyC1O,SAAzC,EAAoDqsF,SAAS,CAACl/E,KAA9D,EAAqE7I,EAAE,CAACyqF,UAAxE,EAAoF,KAAKF,IAAzF,CAAjB;EACA,aAAKW,OAAL,GAAexJ,GAAG,CAACrD,WAAJ,CAAgB,KAAKl0E,KAArB,EAA4B,KAAKwrB,KAAjC,EAAwCj6B,SAAxC,EAAmDqsF,SAAS,CAAC/+E,GAA7D,EAAkEhJ,EAAE,CAAC0qF,QAArE,EAA+E,KAAKH,IAApF,CAAf;EACA,aAAKY,UAAL,GAAkBzJ,GAAG,CAACrD,WAAJ,CAAgB,KAAKl0E,KAArB,EAA4B,KAAKwrB,KAAjC,EAAwCj6B,SAAxC,EAAmDqsF,SAAS,CAAC7/D,MAA7D,EAAqEloB,EAAE,CAAC2qF,WAAxE,EAAqF,KAAKJ,IAA1F,CAAlB;EACA,aAAKttD,SAAL,GAAiBykD,GAAG,CAACrD,WAAJ,CAAgB,KAAKl0E,KAArB,EAA4B,KAAKC,MAAjC,EAAyC1O,SAAzC,EAAoDqsF,SAAS,CAACxG,KAA9D,EAAqEvhF,EAAE,CAAC4qF,UAAxE,EAAoF,KAAKL,IAAzF,CAAjB;EACA,aAAKa,QAAL,GAAgB1J,GAAG,CAACrD,WAAJ,CAAgB,KAAKl0E,KAArB,EAA4B,KAAKC,MAAjC,EAAyC1O,SAAzC,EAAoDqsF,SAAS,CAACvG,IAA9D,EAAoExhF,EAAE,CAAC6qF,SAAvE,EAAkF,KAAKN,IAAvF,CAAhB;EACH;EAEJ;;;iCACU;EAAA;;EACP;EACA,UAAIvqF,EAAE,GAAG,IAAT;EACA,UAAI0hF,GAAG,GAAG1hF,EAAE,CAACohF,KAAH,CAASM,GAAnB;EACA,UAAI,CAAC1hF,EAAE,CAAC2P,OAAR,EAAiB;EAEjB,UAAI07E,QAAQ,GAAGrrF,EAAE,CAACkkF,YAAH,CAAgBwF,cAAhB,CAA+B1E,iBAA9C;;EACA,UAAIsG,UAAU,GAAGtrF,EAAE,CAACkkF,YAAH,CAAgB4G,QAAhB,GAA2BC,IAA5C;;EACA,UAAIQ,QAAQ,GAAGD,UAAU,CAACtG,iBAA1B;EACA,UAAIwG,QAAQ,GAAGxrF,EAAE,CAACkkF,YAAH,CAAgB6F,cAAhB,CAA+B/E,iBAA9C;;EAEA,UAAI,CAAChlF,EAAE,CAAC4sB,IAAH,CAAQjd,OAAb,EAAsB;EAClB;EACH,OAbM;;;EAeP,UAAI87E,YAAY,GAAG,EAAnB;EACAF,MAAAA,QAAQ,CAACv2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAI+yF,IAAI,GAAG/yF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,CAAZ,EAAewvE,IAAf,EAAqB,CAArB,CAAlB;EACAD,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,CAAZ,EAAewvE,IAAf,EAAqB,CAAC,MAAI,CAAC/1D,KAA3B,CAAlB;EACH,OAJD;EAMA61D,MAAAA,QAAQ,CAACx2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAIgzF,IAAI,GAAGhzF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAACyvE,IAAnB,CAAlB;EACAF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,CAAZ,EAAe,MAAI,CAAC9R,MAApB,EAA4B,CAACuhF,IAA7B,CAAlB;EACH,OAJD;EAKA,UAAIliD,KAAK,GAAGi4C,GAAG,CAAC9C,gBAAJ,CAAqB6M,YAArB,EAAmC,KAAK7+D,IAAxC,CAAZ;EACA5sB,MAAAA,EAAE,CAACwqF,SAAH,CAAaxsE,GAAb,CAAiByrB,KAAjB,EA5BO;;EA+BPgiD,MAAAA,YAAY,GAAG,EAAf;EACAF,MAAAA,QAAQ,CAACv2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAI+yF,IAAI,GAAG/yF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,MAAI,CAAC/R,KAAjB,EAAwBuhF,IAAxB,EAA8B,CAA9B,CAAlB;EACAD,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,MAAI,CAAC/R,KAAjB,EAAwBuhF,IAAxB,EAA8B,CAAC,MAAI,CAAC/1D,KAApC,CAAlB;EACH,OAJD;EAMA61D,MAAAA,QAAQ,CAACx2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAIgzF,IAAI,GAAGhzF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,MAAI,CAAC/R,KAAjB,EAAwB,CAAxB,EAA2B,CAACwhF,IAA5B,CAAlB;EACAF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,MAAI,CAAC/R,KAAjB,EAAwB,MAAI,CAACC,MAA7B,EAAqC,CAACuhF,IAAtC,CAAlB;EACH,OAJD;EAKAliD,MAAAA,KAAK,GAAGi4C,GAAG,CAAC9C,gBAAJ,CAAqB6M,YAArB,EAAmC,KAAK7+D,IAAxC,CAAR;EACA5sB,MAAAA,EAAE,CAACyqF,UAAH,CAAczsE,GAAd,CAAkByrB,KAAlB,EA5CO;;EA+CPgiD,MAAAA,YAAY,GAAG,EAAf;EACAJ,MAAAA,QAAQ,CAACr2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAIizF,IAAI,GAAGjzF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY0vE,IAAZ,EAAkB,MAAI,CAACxhF,MAAvB,EAA+B,CAA/B,CAAlB;EACAqhF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY0vE,IAAZ,EAAkB,MAAI,CAACxhF,MAAvB,EAA+B,CAAC,MAAI,CAACurB,KAArC,CAAlB;EACH,OAJD;EAMA61D,MAAAA,QAAQ,CAACx2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAIgzF,IAAI,GAAGhzF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,CAAZ,EAAe,MAAI,CAAC9R,MAApB,EAA4B,CAACuhF,IAA7B,CAAlB;EACAF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,MAAI,CAAC/R,KAAjB,EAAwB,MAAI,CAACC,MAA7B,EAAqC,CAACuhF,IAAtC,CAAlB;EACH,OAJD;EAKAliD,MAAAA,KAAK,GAAGi4C,GAAG,CAAC9C,gBAAJ,CAAqB6M,YAArB,EAAmC,KAAK7+D,IAAxC,CAAR;EACA5sB,MAAAA,EAAE,CAAC0qF,QAAH,CAAY1sE,GAAZ,CAAgByrB,KAAhB,EA5DO;;EAgEPgiD,MAAAA,YAAY,GAAG,EAAf;EACAJ,MAAAA,QAAQ,CAACr2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAIizF,IAAI,GAAGjzF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY0vE,IAAZ,EAAkB,CAAlB,EAAqB,CAArB,CAAlB;EACAH,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY0vE,IAAZ,EAAkB,CAAlB,EAAqB,CAAC,MAAI,CAACj2D,KAA3B,CAAlB;EACH,OAJD;EAMA61D,MAAAA,QAAQ,CAACx2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAIgzF,IAAI,GAAGhzF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAACyvE,IAAnB,CAAlB;EACAF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,MAAI,CAAC/R,KAAjB,EAAwB,CAAxB,EAA2B,CAACwhF,IAA5B,CAAlB;EACH,OAJD;EAKAliD,MAAAA,KAAK,GAAGi4C,GAAG,CAAC9C,gBAAJ,CAAqB6M,YAArB,EAAmC,KAAK7+D,IAAxC,CAAR;EACA5sB,MAAAA,EAAE,CAAC2qF,WAAH,CAAe3sE,GAAf,CAAmByrB,KAAnB,EA7EO;;EAgFPgiD,MAAAA,YAAY,GAAG,EAAf;EACAJ,MAAAA,QAAQ,CAACr2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAIizF,IAAI,GAAGjzF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY0vE,IAAZ,EAAkB,CAAlB,EAAqB,CAArB,CAAlB;EACAH,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY0vE,IAAZ,EAAkB,MAAI,CAACxhF,MAAvB,EAA+B,CAA/B,CAAlB;EACH,OAJD;EAMAmhF,MAAAA,QAAQ,CAACv2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAI+yF,IAAI,GAAG/yF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,CAAZ,EAAewvE,IAAf,EAAqB,CAArB,CAAlB;EACAD,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,MAAI,CAAC/R,KAAjB,EAAwBuhF,IAAxB,EAA8B,CAA9B,CAAlB;EACH,OAJD;EAMAjiD,MAAAA,KAAK,GAAGi4C,GAAG,CAAC9C,gBAAJ,CAAqB6M,YAArB,EAAmC,KAAK7+D,IAAxC,CAAR;EACA5sB,MAAAA,EAAE,CAAC4qF,UAAH,CAAc5sE,GAAd,CAAkByrB,KAAlB,EA9FO;;EAiGPgiD,MAAAA,YAAY,GAAG,EAAf;EACAJ,MAAAA,QAAQ,CAACr2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAIizF,IAAI,GAAGjzF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY0vE,IAAZ,EAAkB,CAAlB,EAAqB,CAAC,MAAI,CAACj2D,KAA3B,CAAlB;EACA81D,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY0vE,IAAZ,EAAkB,MAAI,CAACxhF,MAAvB,EAA+B,CAAC,MAAI,CAACurB,KAArC,CAAlB;EACH,OAJD;EAMA41D,MAAAA,QAAQ,CAACv2F,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,YAAI+yF,IAAI,GAAG/yF,IAAI,CAAC8E,GAAhB;EACAguF,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,CAAZ,EAAewvE,IAAf,EAAqB,CAAC,MAAI,CAAC/1D,KAA3B,CAAlB;EACA81D,QAAAA,YAAY,CAAC/2F,IAAb,CAAkB,IAAIwnB,OAAJ,CAAY,MAAI,CAAC/R,KAAjB,EAAwBuhF,IAAxB,EAA8B,CAAC,MAAI,CAAC/1D,KAApC,CAAlB;EACH,OAJD;EAKA8T,MAAAA,KAAK,GAAGi4C,GAAG,CAAC9C,gBAAJ,CAAqB6M,YAArB,EAAmC,KAAK7+D,IAAxC,CAAR;EACA5sB,MAAAA,EAAE,CAAC6qF,SAAH,CAAa7sE,GAAb,CAAiByrB,KAAjB;EAEH;;;6BAEM;EACH,WAAKoiD,QAAL;EACA,WAAKC,QAAL;EACH;;;gCACS;EACN;;EACA,WAAK1K,KAAL,CAAWkB,aAAX,CAAyB12E,GAAzB,CAA6B,QAA7B,EAAuC,KAAK87E,aAA5C;;EACA,WAAKA,aAAL,GAAqB,IAArB;EACH;;;kCAEW;EACR,WAAKzrC,OAAL;EAEA,WAAK9xC,KAAL,GAAa,KAAK+5E,YAAL,CAAkBwF,cAAlB,CAAiCj7E,UAA9C;EACA,WAAKrE,MAAL,GAAc,KAAK85E,YAAL,CAAkB4G,QAAlB,GAA6BC,IAA7B,CAAkCt8E,UAAhD;EACA,WAAKknB,KAAL,GAAa,KAAKuuD,YAAL,CAAkB6F,cAAlB,CAAiCt7E,UAA9C;EACA,WAAKvC,IAAL;EACH;;;;IA9Nc+3E;;MCAb8H;;;;;EACF,yBAAY7H,YAAZ,EAA0B;EAAA;;EAAA;;EACtB,uFAAMA,YAAN,GADsB;;EAKtB,UAAK8H,MAAL,GAAc,IAAd;EACA,UAAKC,MAAL,GAAc,EAAd;EAEA,UAAKC,MAAL,GAAc,IAAd;EACA,UAAKC,KAAL,GAAa,IAAb;EAEA,QAAIhuF,GAAG,GAAG+lF,YAAY,CAACvlF,KAAvB;EAEA,UAAKC,IAAL,GAAY,aAAZ;EACA,UAAK/G,IAAL,GAAY,eAAZ;EAEA,UAAKu0F,UAAL,GAAkB,KAAlB,CAhBsB;;EAmBtB,UAAK9pE,KAAL,GAAankB,GAAG,CAACmkB,KAAJ,IAAa,EAA1B;EACA,UAAKC,KAAL,GAAapkB,GAAG,CAACokB,KAAJ,IAAa,EAA1B;EACA,UAAKC,KAAL,GAAarkB,GAAG,CAACqkB,KAAJ,IAAa,EAA1B;EACA,UAAKg+C,IAAL,GAAYriE,GAAG,CAACqiE,IAAJ,IAAY,EAAxB;;EAEAvsE,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB;;EAEA,QAAIA,GAAG,CAACiuF,UAAR,EAAoB;EAChB,YAAK9pE,KAAL,CAAW8mE,GAAX,GAAiB,IAAjB;EACA,YAAK5mE,KAAL,CAAW4mE,GAAX,GAAiB,IAAjB;;EACAn1F,MAAAA,CAAC,CAACiD,IAAF,CAAO,MAAKqrB,KAAZ,EAAmB,UAAUA,KAAV,EAAiB;EAChCA,QAAAA,KAAK,CAAC6mE,GAAN,GAAY,IAAZ;EACH,OAFD;EAGH;;EAGD,QAAI,aAAajrF,GAAjB,EAAsB;EAClB;EACAlK,MAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,EAAe,MAAKinB,KAApB,EAA2B;EACvB3S,QAAAA,OAAO,EAAExR,GAAG,CAACwR;EADU,OAA3B;;EAGA1b,MAAAA,CAAC,CAACiD,IAAF,CAAO,MAAKqrB,KAAZ,EAAmB,UAAUA,KAAV,EAAiB;EAChCtuB,QAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,EAAeknB,KAAf,EAAsB;EAClB5S,UAAAA,OAAO,EAAExR,GAAG,CAACwR;EADK,SAAtB;EAGH,OAJD;;EAMA1b,MAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,EAAe,MAAKmnB,KAApB,EAA2B;EACvB7S,QAAAA,OAAO,EAAExR,GAAG,CAACwR;EADU,OAA3B;;EAIA,YAAK6wD,IAAL,CAAU7wD,OAAV,GAAoBxR,GAAG,CAACwR,OAAxB;EACH;;EAED,UAAKuwC,IAAL,CAAU/hD,GAAV;;EArDsB;EAuDzB;;;;2BAGIA,KAAK;EAEN;EACA,WAAKkuF,UAAL,GAAkB,KAAKjL,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EACtCtsC,QAAAA,IAAI,EAAE;EADgC,OAAxB,CAAlB;;EAIA,WAAK8vF,YAAL,GAPM;EAUN;EACA;EACA;;;EACA,WAAKzD,YAAL,CAAkBoI,YAAlB,CAA+B,IAAIpwE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAA/B;EAKH;;;qCACc;EAAA;;EACX,WAAKiwE,KAAL,GAAa,IAAI7B,IAAJ,CAAS,IAAT,CAAb;EACA,WAAK3oD,KAAL,CAAW3jB,GAAX,CAAe,KAAKmuE,KAAL,CAAWxqD,KAA1B;EAEA,WAAKqqD,MAAL,GAAc,IAAI9C,KAAJ,CAAU,IAAV,CAAd;EACA,WAAKvnD,KAAL,CAAW3jB,GAAX,CAAe,KAAKguE,MAAL,CAAYrqD,KAA3B;EAGA,WAAKuqD,MAAL,GAAc,IAAIpC,KAAJ,CAAU,IAAV,CAAd;EACA,WAAKnoD,KAAL,CAAW3jB,GAAX,CAAe,KAAKkuE,MAAL,CAAYvqD,KAA3B;EAGA,WAAKpf,KAAL,CAAWvtB,OAAX,CAAmB,UAACmJ,GAAD,EAAS;EACxB,YAAI8tF,MAAM,GAAG,IAAIrF,KAAJ,CAAU,MAAV,EAAgBzoF,GAAhB,CAAb;;EACA,QAAA,MAAI,CAAC8tF,MAAL,CAAYv3F,IAAZ,CAAiBu3F,MAAjB;;EACA,QAAA,MAAI,CAACI,UAAL,CAAgBruE,GAAhB,CAAoBiuE,MAAM,CAACtqD,KAA3B;EACH,OAJD;EAOA,WAAKA,KAAL,CAAW3jB,GAAX,CAAe,KAAKquE,UAApB;EAEH;;;6BAEM;EAEH;EACA,WAAKJ,MAAL,CAAYj3F,OAAZ,CAAoB,UAAAi3F,MAAM,EAAI;EAC1BA,QAAAA,MAAM,CAAC//E,IAAP;EACH,OAFD;;EAGA,WAAK8/E,MAAL,CAAY9/E,IAAZ;;EACA,WAAKggF,MAAL,CAAYhgF,IAAZ;;EACA,WAAKigF,KAAL,CAAWjgF,IAAX;EAEH;;;oCAEa;EACV;EACA,UAAIg4E,YAAY,GAAG,KAAKA,YAAxB;;EACA,UAAI2D,aAAa,GAAG3D,YAAY,CAACV,WAAb,EAApB;;EACA,UAAIoF,KAAK,GAAG,IAAI1sE,OAAJ,EAAZ,CAJU;;;EAKV2rE,MAAAA,aAAa,CAAC38D,OAAd,CAAsB09D,KAAtB;EALU,UAOHz+E,KAPG,GAUNy+E,KAVM,CAON/2E,CAPM;EAAA,UAQHzH,MARG,GAUNw+E,KAVM,CAQN92E,CARM;EAAA,UASH6jB,KATG,GAUNizD,KAVM,CASN3tE,CATM;EAYV,UAAIsxE,GAAG,GAAG,IAAIrwE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAV;EAAA;EACIswE,MAAAA,GAAG,GAAG,IAAItwE,OAAJ,CAAY,CAAZ,EAAe9R,MAAf,EAAuB,CAAvB,CADV;EAAA;EAEIqiF,MAAAA,GAAG,GAAG,IAAIvwE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAACyZ,KAAnB,CAFV;EAAA;EAGI+2D,MAAAA,GAAG,GAAG,IAAIxwE,OAAJ,CAAY,CAAZ,EAAe9R,MAAf,EAAuB,CAACurB,KAAxB,CAHV;EAAA;EAKIg3D,MAAAA,GAAG,GAAG,IAAIzwE,OAAJ,CAAY/R,KAAZ,EAAmB,CAAnB,EAAsB,CAAtB,CALV;EAAA;EAMIyiF,MAAAA,GAAG,GAAG,IAAI1wE,OAAJ,CAAY/R,KAAZ,EAAmBC,MAAnB,EAA2B,CAA3B,CANV;EAAA;EAOIyiF,MAAAA,GAAG,GAAG,IAAI3wE,OAAJ,CAAY/R,KAAZ,EAAmB,CAAnB,EAAsB,CAACwrB,KAAvB,CAPV;EAAA;EAQIm3D,MAAAA,GAAG,GAAG,IAAI5wE,OAAJ,CAAY/R,KAAZ,EAAmBC,MAAnB,EAA2B,CAACurB,KAA5B,CARV,CAZU;;EAwBV,UAAIkwD,IAAI,GAAG,IAAI3pE,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAX;;EACA,UAAI6wE,WAAW,GAAG,KAAK7I,YAAL,CAAkBnC,YAAlB,CAA+B,KAAKmC,YAAL,CAAkB96D,MAAjD,CAAlB;;EACA,UAAI4jE,SAAS,GAAGD,WAAW,CAAC9xF,KAAZ,EAAhB;;EACA,WAAKmmF,KAAL,CAAWe,UAAX,CAAsB3I,OAAtB,CAA8Bzc,gBAA9B,CAA+CiwB,SAA/C;;EAEA,UAAIzzF,MAAM,GAAG;EACTuP,QAAAA,IAAI,EAAE;EACFmhD,UAAAA,GAAG,EAAE,IAAI/tC,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CADH;EAC6B;EAC/BkN,UAAAA,MAAM,EAAE,IAAIV,IAAJ,GAAWyC,aAAX,CAAyB,CAACqhE,GAAD,EAAMA,GAAN,EAAWC,GAAX,EAAgBC,GAAhB,CAAzB,EAA+CzhE,SAA/C,EAFN;EAGFs3B,UAAAA,OAAO,EAAEyqC,SAAS,CAAC/xF,KAAV,GAAkBuxB,KAAlB,CAAwBq5D,IAAxB,EAA8B/zE,CAA9B,IAAmC;EAH1C,SADG;EAMTjJ,QAAAA,KAAK,EAAE;EACHohD,UAAAA,GAAG,EAAE,IAAI/tC,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADF;EAC6B;EAChCkN,UAAAA,MAAM,EAAE,IAAIV,IAAJ,GAAWyC,aAAX,CAAyB,CAACyhE,GAAD,EAAMA,GAAN,EAAWC,GAAX,EAAgBC,GAAhB,CAAzB,EAA+C7hE,SAA/C,EAFL;EAGHs3B,UAAAA,OAAO,EAAEyqC,SAAS,CAAC/xF,KAAV,GAAkBuxB,KAAlB,CAAwBq5D,IAAxB,EAA8B/zE,CAA9B,GAAkC;EAHxC,SANE;EAWT9I,QAAAA,GAAG,EAAE;EACDihD,UAAAA,GAAG,EAAE,IAAI/tC,OAAJ,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB,CAAnB,CADJ;EAC+B;EAChCkN,UAAAA,MAAM,EAAE,IAAIV,IAAJ,GAAWyC,aAAX,CAAyB,CAACqhE,GAAD,EAAMI,GAAN,EAAWF,GAAX,EAAgBI,GAAhB,CAAzB,EAA+C7hE,SAA/C,EAFP;EAGDs3B,UAAAA,OAAO,EAAEyqC,SAAS,CAAC/xF,KAAV,GAAkBuxB,KAAlB,CAAwBq5D,IAAxB,EAA8Bh0E,CAA9B,GAAkC;EAH1C,SAXI;EAgBTqW,QAAAA,MAAM,EAAE;EACJ+hC,UAAAA,GAAG,EAAE,IAAI/tC,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CADD;EAC2B;EAC/BkN,UAAAA,MAAM,EAAE,IAAIV,IAAJ,GAAWyC,aAAX,CAAyB,CAACohE,GAAD,EAAMI,GAAN,EAAWF,GAAX,EAAgBI,GAAhB,CAAzB,EAA+C5hE,SAA/C,EAFJ;EAGJs3B,UAAAA,OAAO,EAAEyqC,SAAS,CAAC/xF,KAAV,GAAkBuxB,KAAlB,CAAwBq5D,IAAxB,EAA8Bh0E,CAA9B,IAAmC;EAHxC,SAhBC;EAqBT0vE,QAAAA,KAAK,EAAE;EACHt3B,UAAAA,GAAG,EAAE,IAAI/tC,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CADF;EAEHkN,UAAAA,MAAM,EAAE,IAAIV,IAAJ,GAAWyC,aAAX,CAAyB,CAACohE,GAAD,EAAMI,GAAN,EAAWC,GAAX,EAAgBJ,GAAhB,CAAzB,EAA+CvhE,SAA/C,EAFL;EAGHs3B,UAAAA,OAAO,EAAEyqC,SAAS,CAACvuE,GAAV,CAAconE,IAAd,IAAsB;EAH5B,SArBE;EA0BTrE,QAAAA,IAAI,EAAE;EACFv3B,UAAAA,GAAG,EAAE,IAAI/tC,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CADH;EAEFkN,UAAAA,MAAM,EAAE,IAAIV,IAAJ,GAAWyC,aAAX,CAAyB,CAACshE,GAAD,EAAMI,GAAN,EAAWC,GAAX,EAAgBJ,GAAhB,CAAzB,EAA+CzhE,SAA/C,EAFN;EAGFs3B,UAAAA,OAAO,EAAEyqC,SAAS,CAACvuE,GAAV,CAAconE,IAAd,KAAuB;EAH9B;EA1BG,OAAb;EAkCA,aAAOtsF,MAAP;EAEH;;;gCACS;EAEN,WAAK0yF,MAAL,CAAYj3F,OAAZ,CAAoB,UAAAi3F,MAAM,EAAI;EAC1BA,QAAAA,MAAM,CAAChwC,OAAP;EACH,OAFD;;EAGA,WAAK+vC,MAAL,CAAY/vC,OAAZ;;EACA,WAAKiwC,MAAL,CAAYjwC,OAAZ;;EACA,WAAKkwC,KAAL,CAAWlwC,OAAX;EACH;;;kCACW;EACR,WAAKgwC,MAAL,CAAYj3F,OAAZ,CAAoB,UAAAi3F,MAAM,EAAI;EAC1BA,QAAAA,MAAM,CAAChD,SAAP;EACH,OAFD;;EAGA,WAAK+C,MAAL,CAAY/C,SAAZ;;EACA,WAAKiD,MAAL,CAAYjD,SAAZ;;EACA,WAAKkD,KAAL,CAAWlD,SAAX;EACH;;;;IAnMuBhF;;MCLtBgJ;;;;;EACF,yBAAY9uF,GAAZ,EAAiBgB,OAAjB,EAA0B;EAAA;;EAAA;;EACtB,uFAAMhB,GAAN,EAAWgB,OAAX;EACA,UAAKiH,KAAL,GAAajI,GAAG,CAACiI,KAAJ,IAAa,IAA1B;EACA,UAAK8mF,OAAL,GAAe/uF,GAAG,CAAC+uF,OAAJ,IAAe,EAA9B;;EAEA,QAAI,kBAAkB/uF,GAAtB,EAA2B;EACvB,YAAKgvF,eAAL,CAAqBhvF,GAAG,CAACsE,YAAzB;EACH;;EACD,UAAK2qF,kBAAL,GAA0B,EAA1B;EARsB;EASzB;;;;qCAEcrvF,gBAAa;EAAA;;EACxB,wFAAqBA,cAArB;;EACA,UAAI,KAAKkC,UAAL,KAAoB,YAAxB,EAAsC;EAClC,aAAKlC,WAAL,GAAmB9J,CAAC,CAACkG,IAAF,CAAO,KAAK4D,WAAZ,CAAnB,CADkC;EAElC;;EACA,aAAKA,WAAL,CAAiB/I,OAAjB,CAAyB,UAAC2D,IAAD,EAAO7B,CAAP,EAAa;EAClC,cAAI6B,IAAI,KAAK,MAAI,CAACu0F,OAAlB,EAA2B;EACvB,YAAA,MAAI,CAACnvF,WAAL,CAAiBmD,MAAjB,CAAwBpK,CAAxB,EAA2B,CAA3B;EACH;EACJ,SAJD;EAKA,aAAK2I,gBAAL,GAAwB,CAAC,KAAK1B,WAAN,CAAxB;EACH;EACJ;;;6CACsB;EACnB,UAAI,KAAKqvF,kBAAL,CAAwBx2F,MAAxB,GAAiC,CAArC,EAAwC;EACpC,eAAO,KAAKw2F,kBAAZ;EACH;;EACD,UAAI,KAAKhuF,IAAL,CAAUrB,WAAd,EAA2B;EACvB,YAAI,KAAKkC,UAAL,KAAoB,YAAxB,EAAsC;EAElC;EACA,eAAKmtF,kBAAL,GAA0Bn5F,CAAC,CAACgF,OAAF,CAAU,KAAKkG,OAAf,CAA1B,CAHkC;;EAIlC,eAAKiuF,kBAAL,GAA0Bn5F,CAAC,CAACkG,IAAF,CAAO,KAAKizF,kBAAZ,CAA1B;EACH,SALD,MAKO;EACH,eAAKA,kBAAL,GAA0B,KAAKvE,cAAL,EAA1B;EACH;;EACD,aAAKuE,kBAAL,GAA0B,KAAKA,kBAA/B;EACH,OAVD,MAUO;EACH,aAAKA,kBAAL,GAA0B,KAAKvE,cAAL,EAA1B;EACH;;EACD,aAAO,KAAKuE,kBAAZ;EACH;;;qCAEcpoF,QAAQ;EAAA;;EACnB,UAAIzL,MAAM,GAAG,EAAb;;EACA,UAAIrE,GAAG,GAAG,KAAKkK,IAAL,CAAUgH,KAAV,CAAgBlR,GAAhB,CAAoB,UAAAyD,IAAI,EAAI;EAClC,eAAOA,IAAI,CAAC9D,QAAL,EAAP;EACH,OAFS,CAAV;;EAIA,UAAIw4F,SAAS,GAAGp5F,CAAC,CAAC6B,OAAF,CAAUkP,MAAV,IAAoBA,MAApB,GAA6B,CAACA,MAAD,CAA7C;;EACAqoF,MAAAA,SAAS,CAACr4F,OAAV,CAAkB,UAAAoR,KAAK,EAAI;EACvB,YAAIzO,QAAK,GAAG1D,CAAC,CAAC0B,OAAF,CAAUT,GAAV,EAAekR,KAAK,CAACvR,QAAN,EAAf,CAAZ;;EACA0E,QAAAA,MAAM,CAAC7E,IAAP,CAAY,MAAI,CAACyK,OAAL,CAAaxH,QAAb,CAAZ;EACH,OAHD;;EAIA,aAAO4B,MAAP;EAEH;;;sCACe8G,KAAK;EACjB,WAAKoC,YAAL,GAAoBpC,GAApB;EACH;;;;EAwDD;sCACgB;EAEZ,UAAI,KAAKd,UAAL,KAAoB,IAAxB,EAA8B;EAC1B,eAAO,KAAKA,UAAZ;EACH;;EAGD,UAAIqE,SAAS,GAAG,CAAhB;;EACA,UAAI,KAAK3D,UAAL,IAAmB,YAAvB,EAAqC;EACjC2D,QAAAA,SAAS,GAAG,KAAK6K,UAAjB;EACH,OAFD,MAEO;EACH;EACA;EACA;EACA;EACA,YAAI,KAAK1Q,WAAL,CAAiBnH,MAArB,EAA6B;EACzBgN,UAAAA,SAAS,GAAG,KAAK7F,WAAL,CAAiBnH,MAA7B;EACH;EACJ;EACD,WAAK2I,UAAL,GAAkBqE,SAAlB;EACA,aAAOA,SAAP;EACH;;;oCACavD,KAAK;EAEf,UAAI6D,MAAM,GAAG,CAAC,CAAd;;EACA,UAAI,KAAKjE,UAAL,IAAmB,YAAvB,EAAqC;EAEjC;EACA,YAAIuE,IAAI,GAAG,KAAKb,gBAAL,CAAsB;EAAEtD,UAAAA,GAAG,EAAEA;EAAP,SAAtB,EAAoCC,GAA/C;;EACA,YAAIkE,IAAI,IAAI9I,SAAZ,EAAuB;EACnB,iBAAO8I,IAAP;EACH;EAGD;;EACAN,QAAAA,MAAM,GAAG,KAAK9D,WAAL,CAAiBC,GAAjB,CAAT;EACH,OAXD,MAWO;EACH,YAAImE,IAAI,GAAGvQ,CAAC,CAAC0B,OAAF,CAAU,KAAKoI,WAAf,EAA4BsC,GAA5B,CAAX;;EACA,YAAImE,IAAI,IAAI,CAAC,CAAb,EAAgB;EACZN,UAAAA,MAAM,GAAGM,IAAT;EACH;EAEJ;;EAGD,aAAON,MAAP;EACH;;;uCArGuBopF,kBAAkB;AACtC,EACA,UAAIC,UAAU,GAAG,CAAjB;EACA,UAAIC,cAAc,GAAG/zF,QAArB,CAHsC;EAMtC;EAEA;;EACA,WAAK,IAAIrD,GAAT,IAAgBk3F,gBAAhB,EAAkC;EAC9B,YAAIG,QAAQ,GAAGH,gBAAgB,CAACl3F,GAAD,CAA/B;;EACA,YAAIs3F,YAAY,GAAGD,QAAQ,CAAC5E,cAAT,EAAnB;;EAGA,YAAI,CAAC50F,CAAC,CAACqE,OAAF,CAAUm1F,QAAQ,CAACruF,IAAT,CAAcrB,WAAxB,CAAL,EAA2C;EACvCyvF,UAAAA,cAAc,GAAGj3F,IAAI,CAACiD,GAAL,CAASg0F,cAAT,EAAyBE,YAAY,CAAC92F,MAAtC,CAAjB;EACH,SAFD,MAEO;EACH22F,UAAAA,UAAU,GAAGh3F,IAAI,CAACsC,GAAL,CAAS00F,UAAT,EAAqBG,YAAY,CAAC92F,MAAlC,CAAb;EACH;EAEJ;;EACD,UAAI6nE,OAAO,GAAG+uB,cAAc,KAAK/zF,QAAnB,GAA8B+zF,cAA9B,GAA+CD,UAA7D;;EACA,WAAK,IAAIn3F,IAAT,IAAgBk3F,gBAAhB,EAAkC;EAC9B,YAAIG,SAAQ,GAAGH,gBAAgB,CAACl3F,IAAD,CAA/B;;EACA,YAAIu3F,QAAQ,GAAGF,SAAQ,CAAC5E,cAAT,EAAf;;EACA,YAAI8E,QAAQ,CAAC/2F,MAAT,KAAoB6nE,OAAxB,EAAiC;EAC7B,cAAIzJ,IAAI,GAAG,CAAC24B,QAAQ,CAACA,QAAQ,CAAC/2F,MAAT,GAAkB,CAAnB,CAAR,GAAgC+2F,QAAQ,CAAC,CAAD,CAAzC,KAAiDlvB,OAAO,GAAG,CAA3D,CAAX;EACA,cAAImvB,UAAU,GAAG,EAAjB;;EAEA,eAAK,IAAI92F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2nE,OAApB,EAA6B3nE,CAAC,EAA9B,EAAkC;EAC9B,gBAAIA,CAAC,IAAI2nE,OAAO,GAAG,CAAnB,EAAsB;EAClBmvB,cAAAA,UAAU,CAACl5F,IAAX,CAAgBi5F,QAAQ,CAACA,QAAQ,CAAC/2F,MAAT,GAAkB,CAAnB,CAAxB;EACH,aAFD,MAEO;EACH;EACA,kBAAIyJ,GAAG,GAAGstF,QAAQ,CAAC,CAAD,CAAR,GAAc34B,IAAI,GAAGl+D,CAA/B;;EACA,kBAAIuJ,GAAG,CAACxL,QAAJ,GAAeqe,KAAf,CAAqB,GAArB,EAA0B,CAA1B,KAAgC7S,GAAG,CAACxL,QAAJ,GAAeqe,KAAf,CAAqB,GAArB,EAA0B,CAA1B,EAA6Btc,MAA7B,GAAsC,CAA1E,EAA6E;EACzEg3F,gBAAAA,UAAU,CAACl5F,IAAX,CAAgB,CAAC2L,GAAG,CAAC+D,OAAJ,CAAY,CAAZ,CAAjB;EACH,eAFD,MAEO;EACHwpF,gBAAAA,UAAU,CAACl5F,IAAX,CAAgB2L,GAAhB;EACH;EAEJ;EACJ;;EACDotF,UAAAA,SAAQ,CAACrrF,cAAT,CAAwBwrF,UAAxB;;EACAH,UAAAA,SAAQ,CAAC1tF,cAAT;EAEH;EAGJ;EAGJ;;;;IAnHuB8tF;;ECM5B;;;;;;;;;;;;;;;;EAeA,IAAMC,YAAY,GAAG,oBAArB;;MAEMC;;;;;EACF,uBAAY5M,IAAZ,EAAkB;EAAA;;EAAA;;EACd,qFAAMA,IAAN;EAEA,UAAKviF,IAAL,GAAY,aAAZ;EACA,UAAKqJ,MAAL,GAAc,IAAIiU,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAd;EAEA,UAAK8xE,QAAL,GAAgB,IAAhB;EAEA,UAAKrsD,KAAL,CAAW9pC,IAAX,GAAkB,mBAAlB;EARc;EAWjB;;;;qCACc+pF,MAAM;EACjB,UAAI5hF,EAAE,GAAG,IAAT;EACA,WAAKiuF,SAAL,GAAiB,EAAjB;EACAjuF,MAAAA,EAAE,CAACrB,KAAH,GAAW;EACP2jB,QAAAA,KAAK,EAAE;EACH;EACAriB,UAAAA,UAAU,EAAE,MAFT;EAEiB;EACpB;EACA;EACA0E,UAAAA,aAAa,EAAE;EALZ,SADA;EAQP4d,QAAAA,KAAK,EAAE,EARA;EAQI;EACXC,QAAAA,KAAK,EAAE;EACH7S,UAAAA,OAAO,EAAE,IADN;EAEHvJ,UAAAA,KAAK,EAAE,EAFJ;EAGHnG,UAAAA,UAAU,EAAE,MAHT;;EAAA;EATA,OAAX;EAiBA2hF,MAAAA,IAAI,GAAG3tF,CAAC,CAACgH,KAAF,CAAQ2mF,IAAR,CAAP,CApBiB;;EAuBjB,UAAIA,IAAI,CAACjjF,KAAL,CAAW4jB,KAAf,EAAsB;EAClB,YAAI2rE,MAAM,GAAG,EAAb;;EACAj6F,QAAAA,CAAC,CAACiD,IAAF,CAAOjD,CAAC,CAACgF,OAAF,CAAU,CAAC2oF,IAAI,CAACjjF,KAAL,CAAW4jB,KAAZ,CAAV,CAAP,EAAsC,UAAU4rE,IAAV,EAAgBx2F,QAAhB,EAAuB;EACzD;EACAw2F,UAAAA,IAAI,CAACC,KAAL,GAAa,KAAb,CAFyD;;EAIzD,cAAIn6F,CAAC,CAACqE,OAAF,CAAU61F,IAAI,CAACt2F,IAAf,CAAJ,EAA0B;EACtB,gBAAIF,QAAK,IAAI,CAAb,EAAgB;EACZw2F,cAAAA,IAAI,CAACt2F,IAAL,GAAYi2F,YAAZ;EACH,aAFD,MAEO;EACH;EACH;EACJ;;EACDI,UAAAA,MAAM,CAACx5F,IAAP,CAAYT,CAAC,CAACgH,KAAF,CAAQkzF,IAAR,CAAZ;EAGH,SAdD;;EAeAvM,QAAAA,IAAI,CAACjjF,KAAL,CAAW4jB,KAAX,GAAmB2rE,MAAnB;EACH,OAlBD,MAkBO;EACHtM,QAAAA,IAAI,CAACjjF,KAAL,CAAW4jB,KAAX,GAAmB,EAAnB;EACH;;EAID,UAAI8rE,YAAY,GAAG,SAAfA,YAAe,CAACx2F,IAAD,EAAU;EACzB,YAAIuH,IAAI,GAAG,IAAX;;EACA,YAAIwiF,IAAI,CAACjjF,KAAL,CAAW4jB,KAAf,EAAsB;EAClBtuB,UAAAA,CAAC,CAACiD,IAAF,CAAOjD,CAAC,CAACgF,OAAF,CAAU,CAAC2oF,IAAI,CAACjjF,KAAL,CAAW4jB,KAAZ,CAAV,CAAP,EAAsC,UAAU4rE,IAAV,EAAgB;EAClD,gBAAIA,IAAI,CAACt2F,IAAL,IAAaA,IAAjB,EAAuB;EACnBs2F,cAAAA,IAAI,CAACC,KAAL,GAAa,IAAb;EACAhvF,cAAAA,IAAI,GAAG+uF,IAAP;EACH;EACJ,WALD;EAMH;;EACD,eAAO/uF,IAAP;EACH,OAXD,CA/CiB;;;EA+DjB,UAAIwiF,IAAI,CAACoB,MAAT,EAAiB;EACb;EACA,aAAK,IAAIlsF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8qF,IAAI,CAACoB,MAAL,CAAYpsF,MAAhC,EAAwCE,CAAC,EAAzC,EAA6C;EAEzC,cAAIksF,MAAM,GAAGpB,IAAI,CAACoB,MAAL,CAAYlsF,CAAZ,CAAb;;EACA,eAAKm3F,SAAL,CAAev5F,IAAf,CAAoBsuF,MAAM,CAAC58E,KAAP,CAAavR,QAAb,EAApB;;EACA,cAAImuF,MAAM,CAACpkF,IAAP,IAAe,KAAnB,EAA0B;EACtB;EACAoB,YAAAA,EAAE,CAACrB,KAAH,CAAS2jB,KAAT,CAAeriB,UAAf,GAA4B,MAA5B;EACAD,YAAAA,EAAE,CAACrB,KAAH,CAAS6jB,KAAT,CAAeviB,UAAf,GAA4B,MAA5B;EACH;;EACD,cAAI+iF,MAAM,CAAC58E,KAAX,EAAkB;EACd;EACA;EACA,gBAAIkoF,SAAS,GAAGtL,MAAM,CAACuL,SAAvB;;EACA,gBAAI,CAACvL,MAAM,CAACuL,SAAZ,EAAuB;EACnB;EACAD,cAAAA,SAAS,GAAGR,YAAZ;EACH,aAPa;;;EASd,gBAAIU,MAAM,GAAGH,YAAY,CAACC,SAAD,CAAzB;;EACA,gBAAI,CAACE,MAAL,EAAa;EACT,kBAAIC,SAAS,GAAG;EACZroF,gBAAAA,KAAK,EAAE,EADK;EAEZvO,gBAAAA,IAAI,EAAEy2F,SAFM;EAGZF,gBAAAA,KAAK,EAAE;EAHK,eAAhB;;EAKA,kBAAIn6F,CAAC,CAAC6B,OAAF,CAAUktF,MAAM,CAAC58E,KAAjB,CAAJ,EAA6B;EACzBqoF,gBAAAA,SAAS,CAACroF,KAAV,GAAkBqoF,SAAS,CAACroF,KAAV,CAAgBxR,MAAhB,CAAuBouF,MAAM,CAAC58E,KAA9B,CAAlB;EACH,eAFD,MAEO;EACHqoF,gBAAAA,SAAS,CAACroF,KAAV,CAAgB1R,IAAhB,CAAqBsuF,MAAM,CAAC58E,KAA5B;EACH;;EACDw7E,cAAAA,IAAI,CAACjjF,KAAL,CAAW4jB,KAAX,CAAiB7tB,IAAjB,CAAsB+5F,SAAtB;EACH,aAZD,MAYO;EAEH,kBAAIx6F,CAAC,CAACqE,OAAF,CAAUk2F,MAAM,CAACpoF,KAAjB,CAAJ,EAA6B;EACzBooF,gBAAAA,MAAM,CAACpoF,KAAP,GAAe,EAAf;EACH;;EACD,kBAAInS,CAAC,CAAC6B,OAAF,CAAU04F,MAAM,CAACpoF,KAAjB,CAAJ,EAA6B;EACzB,oBAAInS,CAAC,CAAC6B,OAAF,CAAUktF,MAAM,CAAC58E,KAAjB,CAAJ,EAA6B;EACzBooF,kBAAAA,MAAM,CAACpoF,KAAP,GAAeooF,MAAM,CAACpoF,KAAP,CAAaxR,MAAb,CAAoBouF,MAAM,CAAC58E,KAA3B,CAAf;EACH,iBAFD,MAEO;EACHooF,kBAAAA,MAAM,CAACpoF,KAAP,CAAa1R,IAAb,CAAkBsuF,MAAM,CAAC58E,KAAzB;EACH;EACJ,eAND,MAMO;EACH,oBAAInS,CAAC,CAAC6B,OAAF,CAAUktF,MAAM,CAAC58E,KAAjB,CAAJ,EAA6B;EACzBooF,kBAAAA,MAAM,CAACpoF,KAAP,GAAe,CAACooF,MAAM,CAACpoF,KAAR,EAAexR,MAAf,CAAsBouF,MAAM,CAAC58E,KAA7B,CAAf;EACH,iBAFD,MAEO;EACHooF,kBAAAA,MAAM,CAACpoF,KAAP,GAAe,CAACooF,MAAM,CAACpoF,KAAR,EAAe1R,IAAf,CAAoBsuF,MAAM,CAAC58E,KAA3B,CAAf;EACH;EACJ;EACJ;EAEJ,WA1CD,MA0CO;EACH;EACAw7E,YAAAA,IAAI,CAACoB,MAAL,CAAY9hF,MAAZ,CAAmBpK,CAAC,EAApB,EAAwB,CAAxB;EACH;EACJ;EAGJ;;EAED,WAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8qF,IAAI,CAACjjF,KAAL,CAAW4jB,KAAX,CAAiB3rB,MAArC,EAA6CE,CAAC,EAA9C,EAAkD;EAC9C,YAAI,CAAC8qF,IAAI,CAACjjF,KAAL,CAAW4jB,KAAX,CAAiBzrB,CAAjB,EAAoBmJ,UAAzB,EAAqC;EACjC2hF,UAAAA,IAAI,CAACjjF,KAAL,CAAW4jB,KAAX,CAAiBzrB,CAAjB,EAAoBmJ,UAApB,GAAiC,YAAjC,CADiC;EAEpC,SAH6C;;;EAK9C,YAAIhM,CAAC,CAACqE,OAAF,CAAUspF,IAAI,CAACjjF,KAAL,CAAW4jB,KAAX,CAAiBzrB,CAAjB,EAAoBsP,KAA9B,KAAwCw7E,IAAI,CAACjjF,KAAL,CAAW4jB,KAAX,CAAiBzrB,CAAjB,EAAoBs3F,KAApB,IAA6B,KAAzE,EAAgF;EAC5ExM,UAAAA,IAAI,CAACjjF,KAAL,CAAW4jB,KAAX,CAAiBrhB,MAAjB,CAAwBpK,CAAC,EAAzB,EAA6B,CAA7B;EACH;;EACD,YAAI8qF,IAAI,CAACjjF,KAAL,CAAW4jB,KAAX,CAAiBzrB,CAAjB,CAAJ,EAAyB;EACrB,iBAAO8qF,IAAI,CAACjjF,KAAL,CAAW4jB,KAAX,CAAiBzrB,CAAjB,EAAoBs3F,KAA3B;EACH;EAEJ;EACD,aAAOxM,IAAP;EACH;;;6BAEM;EAAA;;EAEH;EACA,WAAK4B,WAAL;;EAHG,kCAIsC,KAAKnC,QAAL,CAAcn2D,OAAd,EAJtC;EAAA,UAIMwjE,MAJN,yBAIG78E,CAJH;EAAA,UAIiBzH,MAJjB,yBAIc0H,CAJd;EAAA,UAI4B6jB,KAJ5B,yBAIyB1a,CAJzB;;EAMH,UAAI9c,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQ,KAAK0D,KAAb,CAAV;;EACA,WAAK+qF,cAAL,GAAsB,IAAIuD,aAAJ,CAAkB9uF,GAAG,CAACmkB,KAAtB,EAA6B,KAAKqsE,gBAAL,CAAsBxwF,GAAG,CAACmkB,KAAJ,CAAUlc,KAAhC,CAA7B,CAAtB,CAPG;;EAQH,WAAKsjF,cAAL,CAAoBtnF,cAApB;EACA,WAAKsnF,cAAL,CAAoBkF,aAApB,CAAkCF,MAAlC,EATG;;EAYH,WAAKnH,cAAL,GAAsBhzF,MAAM,CAAC2W,MAAP,CAAc,IAAd,CAAtB;EACA,UAAI2jF,SAAS,GAAG,CAAhB;EACA1wF,MAAAA,GAAG,CAACokB,KAAJ,CAAUvtB,OAAV,CAAkB,UAACm5F,IAAD,EAAU;EACxB,YAAIW,UAAU,GAAG,MAAI,CAACvH,cAAL,CAAoB4G,IAAI,CAACt2F,IAAzB,CAAjB;;EACA,YAAI,CAACi3F,UAAL,EAAiB;EACbA,UAAAA,UAAU,GAAG,IAAI7B,aAAJ,CAAkBkB,IAAlB,EAAwB,MAAI,CAACQ,gBAAL,CAAsBR,IAAI,CAAC/nF,KAA3B,CAAxB,CAAb,CADa;;EAEb,UAAA,MAAI,CAACmhF,cAAL,CAAoB4G,IAAI,CAACt2F,IAAzB,IAAiCi3F,UAAjC;;EACAA,UAAAA,UAAU,CAAC1sF,cAAX;;EACA0sF,UAAAA,UAAU,CAACF,aAAX,CAAyBxkF,MAAzB;;EACAykF,UAAAA,SAAS;EACZ,SAND,MAMO;EACHxyE,UAAAA,OAAO,CAAC8E,KAAR,CAAc,SAAd;EACH;EACJ,OAXD,EAdG;;EA4BH,UAAI0tE,SAAS,GAAG,CAAhB,EAAmB;EACf5B,QAAAA,aAAa,CAAC8B,gBAAd,CAA+B,KAAKxH,cAApC;EACH,OA9BE;EAoCH;;;EACA,UAAI,CAAC,KAAK1E,iBAAL,EAAL,EAA+B;EAC3B,YAAImM,SAAS,GAAG,EAAhB;;EACA,aAAK5N,KAAL,CAAWjjF,GAAX,CAAe6kF,MAAf,CAAsBhuF,OAAtB,CAA8B,UAACi6F,IAAD,EAAU;EACpCD,UAAAA,SAAS,CAACt6F,IAAV,CAAeu6F,IAAI,CAAC7oF,KAAL,CAAWvR,QAAX,EAAf;EACH,SAFD;;EAIA,aAAKk1F,cAAL,GAAsB,IAAIkD,aAAJ,CAAkB9uF,GAAG,CAACqkB,KAAtB,EAA6B,CAAC,CAACwsE,SAAD,CAAD,CAA7B,CAAtB,CAN2B;EAQ3B;EAGH,OAXD,MAWO;EACH,aAAKjF,cAAL,GAAsB,IAAIkD,aAAJ,CAAkB9uF,GAAG,CAACqkB,KAAtB,EAA6B,KAAKmsE,gBAAL,CAAsBxwF,GAAG,CAACqkB,KAAJ,CAAUpc,KAAhC,CAA7B,CAAtB;EACH;;EACD,WAAK2jF,cAAL,CAAoB3nF,cAApB;EACA,WAAK2nF,cAAL,CAAoB6E,aAApB,CAAkCj5D,KAAlC;EAEA,WAAKmtD,SAAL,GAAiB,KAAKoM,aAAL,EAAjB;EAEA,WAAKC,SAAL;EACA,WAAKC,SAAL;EACH;;;sCAEe;EAAA;EAEZ,UAAIC,QAAQ,GAAG,CAAf;;EACA,UAAIlxF,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQ,KAAK0D,KAAb,CAAV;;EACA,UAAI2wF,QAAQ,GAAG,KAAKlO,KAAL,CAAWkO,QAAX,CAAoBp5F,IAApB,CAAyB,KAAKkrF,KAA9B,CAAf;;EACA,UAAImO,OAAI,GAAG,SAAPA,OAAO,CAACvqF,MAAD,EAAY;EAEnB,YAAIwqF,OAAO,GAAG,MAAI,CAAC3M,iBAAL,EAAd;;EAGA,YAAI,CAAC79E,MAAL,EAAa;EACT,cAAIud,KAAK,GAAGpkB,GAAG,CAACokB,KAAhB;;EACA,cAAI,CAACtuB,CAAC,CAAC6B,OAAF,CAAUysB,KAAV,CAAL,EAAuB;EACnBA,YAAAA,KAAK,GAAG,CAACA,KAAD,CAAR;EACH;EACDvd,UAAAA,MAAM,GAAG,EAAT;;EACA/Q,UAAAA,CAAC,CAACiD,IAAF,CAAOqrB,KAAP,EAAc,UAAU5pB,IAAV,EAAgB7B,CAAhB,EAAmB;EAC7B,gBAAI6B,IAAI,CAACyN,KAAT,EAAgB;EACZpB,cAAAA,MAAM,GAAGA,MAAM,CAACpQ,MAAP,CAAc+D,IAAI,CAACyN,KAAnB,CAAT;EACH;EACJ,WAJD;EAKH;;EAED,YAAInS,CAAC,CAACsE,QAAF,CAAWyM,MAAX,CAAJ,EAAwB;EACpBA,UAAAA,MAAM,GAAG,CAACA,MAAD,CAAT;EACH;;EAED,YAAIyqF,YAAY,GAAGx7F,CAAC,CAACgH,KAAF,CAAQ+J,MAAR,CAAnB;;EACA,aAAK,IAAIlO,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGkC,MAAM,CAACpO,MAA3B,EAAmCE,CAAC,GAAGgM,CAAvC,EAA0ChM,CAAC,EAA3C,EAA+C;EAC3C,cAAI04F,OAAJ,EAAa;EAAA;EACT;EACA,kBAAIE,YAAY,GAAG,MAAI,CAAC3F,cAAL,CAAoBlB,cAApB,EAAnB;;EACA,kBAAIhnF,GAAG,GAAG6tF,YAAY,CAAC94F,MAAvB;EACA84F,cAAAA,YAAY,CAAC16F,OAAb,CAAqB,UAAC26F,EAAD,EAAKC,IAAL,EAAc;EAC/B,oBAAI37F,CAAC,CAACsE,QAAF,CAAWyM,MAAM,CAAClO,CAAD,CAAjB,CAAJ,EAA2B;EACvB24F,kBAAAA,YAAY,CAAC34F,CAAC,GAAG+K,GAAJ,GAAU+tF,IAAX,CAAZ;EACIxpF,oBAAAA,KAAK,EAAEpB,MAAM,CAAClO,CAAD,CADjB;EAEI6Y,oBAAAA,OAAO,EAAE,IAFb;EAGI;EACA2Q,oBAAAA,KAAK,EAAEgvE,QAAQ,CAACD,QAAD,CAJnB;EAKI/uF,oBAAAA,GAAG,EAAE+uF,QAAQ,EALjB;EAMIO,oBAAAA,IAAI,EAAEA;EANV,qBAOKJ,OAPL,EAOeG,EAPf;EAUH,iBAXD,MAWO;EACHF,kBAAAA,YAAY,CAAC34F,CAAD,CAAZ,GAAkBy4F,OAAI,CAACvqF,MAAM,CAAClO,CAAD,CAAP,EAAYu4F,QAAZ,CAAtB;EACH;EACJ,eAfD;EAJS;EAoBZ,WApBD,MAoBO;EACH;EACA,gBAAIp7F,CAAC,CAACsE,QAAF,CAAWyM,MAAM,CAAClO,CAAD,CAAjB,CAAJ,EAA2B;EAEvB24F,cAAAA,YAAY,CAAC34F,CAAD,CAAZ,GAAkB;EACdsP,gBAAAA,KAAK,EAAEpB,MAAM,CAAClO,CAAD,CADC;EAEd6Y,gBAAAA,OAAO,EAAE,IAFK;EAGd;EACA2Q,gBAAAA,KAAK,EAAEgvE,QAAQ,CAACD,QAAD,CAJD;EAKd/uF,gBAAAA,GAAG,EAAE+uF,QAAQ,EALC;EAMdO,gBAAAA,IAAI,EAAE;EANQ,eAAlB;EASH;;EACD,gBAAI37F,CAAC,CAAC6B,OAAF,CAAUkP,MAAM,CAAClO,CAAD,CAAhB,CAAJ,EAA0B;EACtB24F,cAAAA,YAAY,CAAC34F,CAAD,CAAZ,GAAkBy4F,OAAI,CAACvqF,MAAM,CAAClO,CAAD,CAAP,EAAYu4F,QAAZ,CAAtB;EACH;EACJ;EAEJ;EAED,eAAOI,YAAP;EACH,OAlED;;EAoEA,aAAOF,OAAI,EAAX;EACH;;;0CAImB;EAChB,UAAI,KAAK5wF,KAAL,CAAW6jB,KAAX,IAAoB,CAACvuB,CAAC,CAACqE,OAAF,CAAU,KAAKqG,KAAL,CAAW6jB,KAAX,CAAiBpc,KAA3B,CAArB,IACG,KAAKzH,KAAL,CAAW6jB,KAAX,CAAiBviB,UAAjB,KAAgC,YADvC,EACqD;EACjD,eAAO,KAAKtB,KAAL,CAAW6jB,KAAX,CAAiBpc,KAAxB;EACH;;EACD,aAAO,KAAP;EACH;;;iCAE6B;EAAA,UAArBvO,IAAqB,uEAAdi2F,YAAc;EAC1B,UAAI+B,SAAS,GAAG,KAAKtI,cAAL,CAAoB1vF,IAApB,CAAhB,CAD0B;;EAG1B,UAAI,CAACg4F,SAAL,EAAgB;EACZh4F,QAAAA,IAAI,GAAG,KAAK8G,KAAL,CAAW4jB,KAAX,CAAiB,CAAjB,EAAoB1qB,IAA3B;EACAg4F,QAAAA,SAAS,GAAG,KAAKtI,cAAL,CAAoB1vF,IAApB,CAAZ;EACH;;EAED,UAAIi4F,KAAK,GAAG77F,CAAC,CAACgH,KAAF,CAAQ40F,SAAS,CAACzwF,IAAlB,CAAZ;;EACA,aAAO;EACH2rF,QAAAA,IAAI,EAAE8E,SADH;EAEHjO,QAAAA,IAAI,EAAEkO;EAFH,OAAP;EAIH;;;oCAEa;EACV;EAEA,UAAIxO,YAAY,+EAAhB;;EACA,UAAIr5E,MAAM,GAAG,KAAKA,MAAL,CAAYhN,KAAZ,EAAb;EACA,WAAKqmF,YAAL,GAAoBA,YAApB;EACA,WAAKD,QAAL,CAAc7nF,GAAd,CAAkBuR,GAAlB,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B;EACA,WAAKs2E,QAAL,CAAcxoF,GAAd,CAAkBkS,GAAlB,CAAsBu2E,YAAY,CAACzoF,GAAb,CAAiBgZ,CAAjB,GAAqByvE,YAAY,CAAC9nF,GAAb,CAAiBqY,CAAtC,GAA0C5J,MAAM,CAAC4J,CAAvE,EACIyvE,YAAY,CAACzoF,GAAb,CAAiBiZ,CAAjB,GAAqBwvE,YAAY,CAAC9nF,GAAb,CAAiBsY,CAAtC,GAA0C7J,MAAM,CAAC6J,CADrD,EAEIwvE,YAAY,CAACzoF,GAAb,CAAiBoiB,CAAjB,GAAqBqmE,YAAY,CAAC9nF,GAAb,CAAiByhB,CAAtC,GAA0ChT,MAAM,CAACgT,CAFrD,EAPU;;EAaV,UAAI,KAAKmmE,KAAL,CAAWjjF,GAAX,CAAeQ,KAAf,CAAqB6jB,KAArB,IAA8B,KAAK4+D,KAAL,CAAWjjF,GAAX,CAAeQ,KAAf,CAAqB6jB,KAArB,CAA2BmT,KAA7D,EAAoE;EAChE,aAAK0rD,QAAL,CAAcxoF,GAAd,CAAkBoiB,CAAlB,GAAsB,KAAKmmE,KAAL,CAAWjjF,GAAX,CAAeQ,KAAf,CAAqB6jB,KAArB,CAA2BmT,KAAjD;EACH;;EAED,WAAKvM,MAAL,GAAc,KAAKi4D,QAAL,CAAcp2D,SAAd,EAAd;EACA,WAAK7B,MAAL,CAAYgX,IAAZ,CAAiB,CAAC,KAAKhX,MAAL,CAAYnO,CAA9B;EACA,aAAO,KAAKomE,QAAZ;EAEH;;;;mDAE4Bt9E,SAAS;EAClC,UAAIu9E,YAAY,+EAAhB;;EACA,UAAIv9E,OAAO,KAAKrI,SAAhB,EAA2B;EACvBqI,QAAAA,OAAO,GAAGu9E,YAAY,CAAC9nF,GAAb,CAAiByB,KAAjB,EAAV;;EACA8I,QAAAA,OAAO,CAACq8B,IAAR,CAAakhD,YAAY,CAACzoF,GAAb,CAAiBoiB,CAA9B;EACH;;EACD,UAAIugE,KAAK,GAAG,KAAK4F,KAAL,CAAWe,UAAX,CAAsBmB,cAAtB,CAAqCv/E,OAArC,EAA8Cy3E,KAA1D;;EACA,aAAOA,KAAP;EACH;;;;mCAIYvzE,QAAQ;EAEjB,WAAKA,MAAL,GAAcA,MAAM,CAAChN,KAAP,EAAd;EAEA,WAAKomF,QAAL,GAAgB,KAAKmC,WAAL,EAAhB;EAEA,WAAKuM,cAAL;EAEA,WAAKC,cAAL;EAEH;EAID;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAGA;EACA;EAEA;;;;kCAEY;EACR;EAEA,UAAInO,YAAY,GAAG,IAAI/T,YAAJ,CAAiB,QAAjB,EAA2B,GAA3B,CAAnB,CAHQ;;EAKR,WAAKsT,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyB6jE,YAAzB;;EAEA,UAAIz4D,MAAM,GAAG,KAAKA,MAAL,CAAYnuB,KAAZ,EAAb;EACAmuB,MAAAA,MAAM,GAAG,KAAK24D,YAAL,CAAkB34D,MAAlB,CAAT,CARQ;EAYR,UAAIqyB,SAAS,GAAG,GAAhB;EACA,UAAIumC,UAAU,GAAG,QAAjB;EACA,UAAI93E,QAAQ,GAAG,IAAIgS,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAC,CAAjB,EAAoB,CAApB,CAAf;EAEA,UAAI+lE,UAAU,GAAG,EAAjB;EAEAA,MAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,IAAIrU,UAAJ,CAAeoU,UAAf,EAA2BvmC,SAA3B,CAAhB;EACAvxC,MAAAA,QAAQ,GAAG,IAAIgS,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAX;EACAhS,MAAAA,QAAQ,CAACsR,cAAT,CAAwB,KAAxB;EACAymE,MAAAA,UAAU,CAAC,CAAD,CAAV,CAAc/3E,QAAd,CAAuB1O,IAAvB,CAA4B0O,QAA5B;;EACA,WAAKk3E,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyBikE,UAAU,CAAC,CAAD,CAAnC;;EAGAA,MAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,IAAIrU,UAAJ,CAAeoU,UAAf,EAA2BvmC,SAA3B,CAAhB;EACAvxC,MAAAA,QAAQ,GAAG,IAAIgS,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAX;EACAhS,MAAAA,QAAQ,CAACsR,cAAT,CAAwB,KAAxB;EACAymE,MAAAA,UAAU,CAAC,CAAD,CAAV,CAAc/3E,QAAd,CAAuB1O,IAAvB,CAA4B0O,QAA5B;;EACA,WAAKk3E,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyBikE,UAAU,CAAC,CAAD,CAAnC;;EAGAA,MAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,IAAIrU,UAAJ,CAAeoU,UAAf,EAA2BvmC,SAA3B,CAAhB;EACAvxC,MAAAA,QAAQ,GAAG,IAAIgS,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAC,CAApB,CAAX;EACAhS,MAAAA,QAAQ,CAACsR,cAAT,CAAwB,KAAxB;EACAymE,MAAAA,UAAU,CAAC,CAAD,CAAV,CAAc/3E,QAAd,CAAuB1O,IAAvB,CAA4B0O,QAA5B;;EACA,WAAKk3E,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyBikE,UAAU,CAAC,CAAD,CAAnC;;EAGAA,MAAAA,UAAU,CAAC,CAAD,CAAV,GAAgB,IAAIrU,UAAJ,CAAeoU,UAAf,EAA2BvmC,SAA3B,CAAhB;EACAvxC,MAAAA,QAAQ,GAAG,IAAIgS,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAX;EACAhS,MAAAA,QAAQ,CAACsR,cAAT,CAAwB,IAAxB;EACAymE,MAAAA,UAAU,CAAC,CAAD,CAAV,CAAc/3E,QAAd,CAAuB1O,IAAvB,CAA4B0O,QAA5B;;EACA,WAAKk3E,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyBikE,UAAU,CAAC,CAAD,CAAnC;EAKH;;;uCAEgB;EACb,UAAIX,YAAY,+EAAhB;;EACA,UAAIr5E,MAAM,GAAG,KAAKA,MAAL,CAAYhN,KAAZ,EAAb;EACA,UAAIwC,GAAG,GAAG6jF,YAAY,CAAC9nF,GAAb,CAAiByB,KAAjB,EAAV;EACAwC,MAAAA,GAAG,CAAC2iC,IAAJ,CAASkhD,YAAY,CAACzoF,GAAb,CAAiBoiB,CAA1B;EACAxd,MAAAA,GAAG,CAACugB,GAAJ,CAAQ/V,MAAR;EACA,WAAK05B,KAAL,CAAWz3B,QAAX,CAAoB1O,IAApB,CAAyBiC,GAAzB;EACH;;;kCACW;EACR,aAAO,KAAKyC,MAAL,CAAYjF,KAAZ,EAAP;EACH;;;oCAEa;EACV,WAAK+yF,QAAL,GAAgB,IAAIjC,aAAJ,CAAkB,IAAlB,CAAhB;EACA,WAAKpqD,KAAL,CAAW3jB,GAAX,CAAe,KAAKgwE,QAAL,CAAcrsD,KAA7B;EAEH;;;+BAEQ;EACL;;EACA,WAAKqsD,QAAL,CAAc9hF,IAAd;EAEH;;;uCAEgB7N,MAAM;EACnB,aAAO,KAAKqrF,cAAL,CAAoBtpF,WAApB,CAAgC/B,IAAhC,CAAP;EACH;;;uCACgBA,MAAMkpF,gBAAgB;EACnC,aAAOA,cAAc,CAACnnF,WAAf,CAA2B/B,IAA3B,CAAP;EACH;;;uCACgBA,MAAM;EACnB,aAAO,KAAK0rF,cAAL,CAAoB3pF,WAApB,CAAgC/B,IAAhC,CAAP;EACH;;;oCAEa;EAEV,UAAIb,IAAI,GAAG,IAAI0e,OAAJ,EAAX;EACA,UAAIsE,IAAI,GAAG,KAAK6gE,QAAL,CAAcn2D,OAAd,EAAX;EACA,UAAI+kE,QAAQ,GAAG,KAAKvG,cAAL,CAAoBb,cAApB,GAAqCjyF,MAApD;EACA,UAAIs5F,QAAQ,GAAG,KAAKpF,QAAL,GAAgBC,IAAhB,CAAqBlC,cAArB,GAAsCjyF,MAArD;EACA,UAAIu5F,QAAQ,GAAG,KAAKpG,cAAL,CAAoBlB,cAApB,GAAqCjyF,MAApD,CANU;EASV;EACA;;EACA,UAAI,KAAK+H,KAAL,CAAW2jB,KAAX,CAAiBriB,UAAjB,IAA+B,MAAnC,EAA2C;EACvCzC,QAAAA,IAAI,CAACyiC,IAAL,CAAUzf,IAAI,CAAC3O,CAAL,GAAUo+E,QAApB;EACH,OAFD,MAEO;EACHzyF,QAAAA,IAAI,CAACyiC,IAAL,CAAUzf,IAAI,CAAC3O,CAAL,IAAUo+E,QAAQ,GAAG,CAArB,CAAV;EACH;;EAEDzyF,MAAAA,IAAI,CAAC0iC,IAAL,CAAU1f,IAAI,CAAC1O,CAAL,IAAUo+E,QAAQ,GAAG,CAArB,CAAV;;EACA,UAAI,KAAKvxF,KAAL,CAAW6jB,KAAX,CAAiBviB,UAAjB,IAA+B,MAAnC,EAA2C;EACvCzC,QAAAA,IAAI,CAAC4iC,IAAL,CAAU5f,IAAI,CAACvF,CAAL,GAAUk1E,QAApB;EACH,OAFD,MAEO;EACH3yF,QAAAA,IAAI,CAAC4iC,IAAL,CAAU5f,IAAI,CAACvF,CAAL,IAAUk1E,QAAQ,GAAG,CAArB,CAAV;EACH;;EAGD,aAAO3yF,IAAP;EAEH;;;kCACW;EAAA;;EACR,UAAI4yF,WAAW,GAAG,KAAKhP,KAAL,CAAWgP,WAA7B;;EACA,UAAIA,WAAJ,EAAiB;EACbA,QAAAA,WAAW,CAACjkF,EAAZ,CAAe,MAAf,EAAuB,UAACxF,CAAD,EAAO;EAC1B,cAAImY,EAAE,GAAGnY,CAAC,CAACmB,KAAF,CAAQuoF,OAAjB;EACA,cAAItxE,EAAE,GAAGpY,CAAC,CAACmB,KAAF,CAAQwoF,OAAjB;;EACA,cAAI7yF,GAAG,GAAG,MAAI,CAACimF,aAAL,CAAmB5kE,EAAnB,EAAuBC,EAAvB,CAAV,CAH0B;;EAK7B,SALD;EAMH;EACJ;;;gCAIS;EAEN,WAAKivE,QAAL,CAAc/xC,OAAd;EACH;;;kCACW;EAAA;;EACR,UAAI99C,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQ,KAAK0D,KAAb,CAAV;;EACA,WAAK+qF,cAAL,CAAoB6G,YAApB,CAAiC,KAAK5B,gBAAL,CAAsBxwF,GAAG,CAACmkB,KAAJ,CAAUlc,KAAhC,CAAjC;EACA,WAAKsjF,cAAL,CAAoBtnF,cAApB;EACA,WAAKsnF,cAAL,CAAoB3pF,cAApB;EAEA5B,MAAAA,GAAG,CAACokB,KAAJ,CAAUvtB,OAAV,CAAkB,UAACm5F,IAAD,EAAU;EACxB,YAAIW,UAAU,GAAG,MAAI,CAACvH,cAAL,CAAoB4G,IAAI,CAACt2F,IAAzB,CAAjB;;EACA,YAAIi3F,UAAJ,EAAgB;EACZA,UAAAA,UAAU,CAACyB,YAAX,CAAwB,MAAI,CAAC5B,gBAAL,CAAsBR,IAAI,CAAC/nF,KAA3B,CAAxB;;EACA0oF,UAAAA,UAAU,CAAC1sF,cAAX;;EACA0sF,UAAAA,UAAU,CAAC/uF,cAAX;EACH;EACJ,OAPD;;EAUA,UAAI9L,CAAC,CAACqE,OAAF,CAAU6F,GAAG,CAACqkB,KAAJ,CAAUpc,KAApB,CAAJ,EAAgC;EAC5B,YAAI4oF,SAAS,GAAG,EAAhB;;EACA,aAAK5N,KAAL,CAAWjjF,GAAX,CAAe6kF,MAAf,CAAsBhuF,OAAtB,CAA8B,UAACi6F,IAAD,EAAU;EACpCD,UAAAA,SAAS,CAACt6F,IAAV,CAAeu6F,IAAI,CAAC7oF,KAAL,CAAWvR,QAAX,EAAf;EACH,SAFD;;EAIA,aAAKk1F,cAAL,CAAoBwG,YAApB,CAAiC,CAAC,CAACvB,SAAD,CAAD,CAAjC;EAEH,OARD,MAQO;EACH,aAAKjF,cAAL,CAAoBwG,YAApB,CAAiC,KAAK5B,gBAAL,CAAsBxwF,GAAG,CAACqkB,KAAJ,CAAUpc,KAAhC,CAAjC;EACH;;EAED,WAAK2jF,cAAL,CAAoB3nF,cAApB;EACA,WAAK2nF,cAAL,CAAoBhqF,cAApB,GA7BQ;;EAgCR,WAAKiuF,QAAL,CAAc/E,SAAd;EACH;;;;IA3iBqB/H;;ECtB1B;EACA;EACA;EACA;EACA;;EAEA,IAAMz6B,KAAG,GAAG,QAAZ;EACA,IAAM+pC,WAAW,GAAG;EAAE5xF,EAAAA,IAAI,EAAE;EAAR,CAApB;EACA,IAAM6xF,UAAU,GAAG;EAAE7xF,EAAAA,IAAI,EAAE;EAAR,CAAnB;EACA,IAAM8xF,QAAQ,GAAG;EAAE9xF,EAAAA,IAAI,EAAE;EAAR,CAAjB;EACA,IAAM+xF,KAAK,GAAG;EAAEzW,EAAAA,IAAI,EAAE,CAAR;EAAW0W,EAAAA,MAAM,EAAE,CAAnB;EAAsBvW,EAAAA,KAAK,EAAE;EAA7B,CAAd;EAEA,IAAMwW,KAAK,GAAG;EAAEC,EAAAA,IAAI,EAAE,CAAE,CAAV;EAAaC,EAAAA,MAAM,EAAE,CAArB;EAAwBC,EAAAA,KAAK,EAAE,CAA/B;EAAkCC,EAAAA,GAAG,EAAE,CAAvC;EAA0CC,EAAAA,YAAY,EAAE,CAAxD;EAA2DC,EAAAA,eAAe,EAAE;EAA5E,CAAd;;MAGMC;;;;;EACF,yBAAY9nE,MAAZ,EAAoBszB,UAApB,EAAgC;EAAA;;EAAA;;EAC5B;;EACA,QAAIxyB,KAAK,wDAAT;;EAEA,UAAKd,MAAL,GAAcA,MAAd;EAEA,UAAKszB,UAAL,GAAmBA,UAAU,KAAKlhD,SAAhB,GAA6BkhD,UAA7B,GAA0Cn1C,QAA5D,CAN4B;;EAS5B,UAAKkI,OAAL,GAAe,IAAf,CAT4B;;EAY5B,UAAKlV,MAAL,GAAc,IAAIyhB,OAAJ,EAAd,CAZ4B;;EAe5B,UAAKy0C,WAAL,GAAmB,CAAnB;EACA,UAAK2qB,WAAL,GAAmB7hF,QAAnB,CAhB4B;;EAmB5B,UAAK43F,OAAL,GAAe,CAAf;EACA,UAAKC,OAAL,GAAe73F,QAAf,CApB4B;EAuB5B;;EACA,UAAK83F,aAAL,GAAqB,CAArB,CAxB4B;;EAyB5B,UAAKC,aAAL,GAAqBj7F,IAAI,CAACwF,EAA1B,CAzB4B;EA2B5B;EACA;;EACA,UAAK01F,eAAL,GAAuB,CAAEh4F,QAAzB,CA7B4B;;EA8B5B,UAAKi4F,eAAL,GAAuBj4F,QAAvB,CA9B4B;EAgC5B;EACA;;EACA,UAAKk4F,aAAL,GAAqB,KAArB;EACA,UAAKC,aAAL,GAAqB,IAArB,CAnC4B;EAsC5B;;EACA,UAAKC,UAAL,GAAkB,IAAlB;EACA,UAAKC,SAAL,GAAiB,GAAjB,CAxC4B;;EA2C5B,UAAKC,YAAL,GAAoB,IAApB;EACA,UAAKC,WAAL,GAAmB,GAAnB,CA5C4B;;EA+C5B,UAAKC,SAAL,GAAiB,IAAjB;EACA,UAAKC,QAAL,GAAgB,GAAhB;EACA,UAAKC,kBAAL,GAA0B,KAA1B,CAjD4B;;EAkD5B,UAAKC,WAAL,GAAmB,GAAnB,CAlD4B;EAoD5B;EACA;;EACA,UAAKC,UAAL,GAAkB,KAAlB;EACA,UAAKC,eAAL,GAAuB,GAAvB,CAvD4B;EAyD5B;;EACA,UAAKC,UAAL,GAAkB,IAAlB,CA1D4B;;EA6D5B,UAAKv8F,IAAL,GAAY;EAAEkkF,MAAAA,IAAI,EAAE,EAAR;EAAYsY,MAAAA,EAAE,EAAE,EAAhB;EAAoBnY,MAAAA,KAAK,EAAE,EAA3B;EAA+BD,MAAAA,MAAM,EAAE;EAAvC,KAAZ,CA7D4B;;EAiE5B,UAAKqY,YAAL,GAAoB;EAAEC,MAAAA,KAAK,EAAE/B,KAAK,CAACzW,IAAf;EAAqByY,MAAAA,IAAI,EAAEhC,KAAK,CAACC,MAAjC;EAAyCK,MAAAA,GAAG,EAAEN,KAAK,CAACtW;EAApD,KAApB,CAjE4B;;EAoE5B,UAAKuY,OAAL,GAAe,MAAKn4F,MAAL,CAAYQ,KAAZ,EAAf;EACA,UAAK43F,SAAL,GAAiB,MAAKvpE,MAAL,CAAYpf,QAAZ,CAAqBjP,KAArB,EAAjB;EACA,UAAK63F,KAAL,GAAa,MAAKxpE,MAAL,CAAY3gB,IAAzB,CAtE4B;EAyE5B;EACA;;EAEA,UAAKovC,MAAL,GAAc84C,KAAK,CAACC,IAApB,CA5E4B;;EA8E5B,UAAKiC,UAAL,GAAkB,IAAI9jB,SAAJ,EAAlB;EACA,UAAK+jB,eAAL,GAAuB,IAAI/jB,SAAJ,EAAvB;EAEA,UAAKgkB,MAAL,GAAc,CAAd;EACA,UAAKC,UAAL,GAAkB,IAAIh3E,OAAJ,EAAlB;EACA,UAAKi3E,YAAL,GAAoB,KAApB;EAEA,UAAKC,YAAL,GAAoB,IAAIzzD,OAAJ,EAApB;EACA,UAAK0zD,UAAL,GAAkB,IAAI1zD,OAAJ,EAAlB;EACA,UAAK2zD,YAAL,GAAoB,IAAI3zD,OAAJ,EAApB;EAEA,UAAK4zD,SAAL,GAAiB,IAAI5zD,OAAJ,EAAjB;EACA,UAAK6zD,OAAL,GAAe,IAAI7zD,OAAJ,EAAf;EACA,UAAK8zD,SAAL,GAAiB,IAAI9zD,OAAJ,EAAjB;EAEA,UAAK+zD,WAAL,GAAmB,IAAI/zD,OAAJ,EAAnB;EACA,UAAKg0D,SAAL,GAAiB,IAAIh0D,OAAJ,EAAjB;EACA,UAAKi0D,WAAL,GAAmB,IAAIj0D,OAAJ,EAAnB;EAIAvV,IAAAA,KAAK,CAACypE,kBAAN,GAA2BC,aAAa,CAAC59F,IAAd,CAAmBk0B,KAAnB,CAA3B;EACAA,IAAAA,KAAK,CAAC2pE,gBAAN,GAAyBC,WAAW,CAAC99F,IAAZ,CAAiBk0B,KAAjB,CAAzB;EACAA,IAAAA,KAAK,CAAC6pE,iBAAN,GAA0BC,YAAY,CAACh+F,IAAb,CAAkBk0B,KAAlB,CAA1B;EACAA,IAAAA,KAAK,CAAC+pE,iBAAN,GAA0BC,YAAY,CAACl+F,IAAb,CAAkBk0B,KAAlB,CAA1B;EACAA,IAAAA,KAAK,CAACiqE,eAAN,GAAwBC,UAAU,CAACp+F,IAAX,CAAgBk0B,KAAhB,CAAxB;EACAA,IAAAA,KAAK,CAACmqE,YAAN,GAAqBC,WAAW,CAACt+F,IAAZ,CAAiBk0B,KAAjB,CAArB;EACAA,IAAAA,KAAK,CAACqqE,cAAN,GAAuBC,SAAS,CAACx+F,IAAV,CAAek0B,KAAf,CAAvB;EAEAA,IAAAA,KAAK,CAACwyB,UAAN,CAAiBiC,gBAAjB,CAAkC,aAAlC,EAAiD,MAAKg1C,kBAAtD,EAA0E,KAA1E;EAEAzpE,IAAAA,KAAK,CAACwyB,UAAN,CAAiBiC,gBAAjB,CAAkC,WAAlC,EAA+C,MAAKk1C,gBAApD,EAAsE,KAAtE;EACA3pE,IAAAA,KAAK,CAACwyB,UAAN,CAAiBiC,gBAAjB,CAAkC,OAAlC,EAA2C,MAAKo1C,iBAAhD,EAAmE,KAAnE;EAEA7pE,IAAAA,KAAK,CAACwyB,UAAN,CAAiBiC,gBAAjB,CAAkC,YAAlC,EAAgD,MAAKs1C,iBAArD,EAAwE,KAAxE;EACA/pE,IAAAA,KAAK,CAACwyB,UAAN,CAAiBiC,gBAAjB,CAAkC,UAAlC,EAA8C,MAAKw1C,eAAnD,EAAoE,KAApE;EACAjqE,IAAAA,KAAK,CAACwyB,UAAN,CAAiBiC,gBAAjB,CAAkC,WAAlC,EAA+C,MAAK01C,YAApD,EAAkE,KAAlE;EAEAv7F,IAAAA,MAAM,CAAC6lD,gBAAP,CAAwB,SAAxB,EAAmC,MAAK41C,cAAxC,EAAwD,KAAxD;;EAGA,UAAKhvD,MAAL,GAAe,YAAY;EAEvB,UAAIx9B,MAAM,GAAG,IAAIiU,OAAJ,EAAb,CAFuB;;EAKvB,UAAIy4E,IAAI,GAAG,IAAIjuC,UAAJ,GAAiBkuC,kBAAjB,CAAoCtrE,MAAM,CAAC1E,EAA3C,EAA+C,IAAI1I,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAA/C,CAAX;EACA,UAAI24E,WAAW,GAAGF,IAAI,CAAC15F,KAAL,GAAa65F,OAAb,EAAlB;EAEA,UAAIC,YAAY,GAAG,IAAI74E,OAAJ,EAAnB;EACA,UAAI84E,cAAc,GAAG,IAAItuC,UAAJ,EAArB;EAEA,aAAO,SAASjhB,MAAT,GAAkB;EAErB,YAAIv7B,QAAQ,GAAGkgB,KAAK,CAACd,MAAN,CAAapf,QAA5B;EAEAjC,QAAAA,MAAM,CAACzM,IAAP,CAAY0O,QAAZ,EAAsBuf,GAAtB,CAA0BW,KAAK,CAAC3vB,MAAhC,EAJqB;;EAOrBwN,QAAAA,MAAM,CAACmkD,eAAP,CAAuBuoC,IAAvB,EAPqB;;EAUrBvqE,QAAAA,KAAK,CAAC2oE,UAAN,CAAiBkC,cAAjB,CAAgChtF,MAAhC;;EAEA,YAAImiB,KAAK,CAACioE,UAAN,IAAoB,KAAKt6C,MAAL,KAAgB84C,KAAK,CAACC,IAA9C,EAAoD;EAEhDoE,UAAAA,UAAU,CAACj+F,IAAX,CAAgBmzB,KAAhB,EAAuB+qE,oBAAoB,CAACl+F,IAArB,CAA0BmzB,KAA1B,CAAvB;EAEH;;EAEDA,QAAAA,KAAK,CAAC2oE,UAAN,CAAiBp0E,KAAjB,IAA0ByL,KAAK,CAAC4oE,eAAN,CAAsBr0E,KAAhD;EACAyL,QAAAA,KAAK,CAAC2oE,UAAN,CAAiB7zE,GAAjB,IAAwBkL,KAAK,CAAC4oE,eAAN,CAAsB9zE,GAA9C,CAnBqB;;EAsBrBkL,QAAAA,KAAK,CAAC2oE,UAAN,CAAiBp0E,KAAjB,GAAyBpoB,IAAI,CAACsC,GAAL,CAASuxB,KAAK,CAACqnE,eAAf,EAAgCl7F,IAAI,CAACiD,GAAL,CAAS4wB,KAAK,CAACsnE,eAAf,EAAgCtnE,KAAK,CAAC2oE,UAAN,CAAiBp0E,KAAjD,CAAhC,CAAzB,CAtBqB;;EAyBrByL,QAAAA,KAAK,CAAC2oE,UAAN,CAAiB7zE,GAAjB,GAAuB3oB,IAAI,CAACsC,GAAL,CAASuxB,KAAK,CAACmnE,aAAf,EAA8Bh7F,IAAI,CAACiD,GAAL,CAAS4wB,KAAK,CAAConE,aAAf,EAA8BpnE,KAAK,CAAC2oE,UAAN,CAAiB7zE,GAA/C,CAA9B,CAAvB;;EAEAkL,QAAAA,KAAK,CAAC2oE,UAAN,CAAiBqC,QAAjB;;EAGAhrE,QAAAA,KAAK,CAAC2oE,UAAN,CAAiBliF,MAAjB,IAA2BuZ,KAAK,CAAC6oE,MAAjC,CA9BqB;;EAiCrB7oE,QAAAA,KAAK,CAAC2oE,UAAN,CAAiBliF,MAAjB,GAA0Bta,IAAI,CAACsC,GAAL,CAASuxB,KAAK,CAACumC,WAAf,EAA4Bp6D,IAAI,CAACiD,GAAL,CAAS4wB,KAAK,CAACkxD,WAAf,EAA4BlxD,KAAK,CAAC2oE,UAAN,CAAiBliF,MAA7C,CAA5B,CAA1B,CAjCqB;;EAoCrBuZ,QAAAA,KAAK,CAAC3vB,MAAN,CAAaujB,GAAb,CAAiBoM,KAAK,CAAC8oE,UAAvB;EAEAjrF,QAAAA,MAAM,CAACotF,gBAAP,CAAwBjrE,KAAK,CAAC2oE,UAA9B,EAtCqB;;EAyCrB9qF,QAAAA,MAAM,CAACmkD,eAAP,CAAuByoC,WAAvB;EAEA3qF,QAAAA,QAAQ,CAAC1O,IAAT,CAAc4uB,KAAK,CAAC3vB,MAApB,EAA4BujB,GAA5B,CAAgC/V,MAAhC;EAEAmiB,QAAAA,KAAK,CAACd,MAAN,CAAaqiC,MAAb,CAAoBvhC,KAAK,CAAC3vB,MAA1B;;EAEA,YAAI2vB,KAAK,CAACunE,aAAN,KAAwB,IAA5B,EAAkC;EAE9BvnE,UAAAA,KAAK,CAAC4oE,eAAN,CAAsBr0E,KAAtB,IAAgC,IAAIyL,KAAK,CAACwnE,aAA1C;EACAxnE,UAAAA,KAAK,CAAC4oE,eAAN,CAAsB9zE,GAAtB,IAA8B,IAAIkL,KAAK,CAACwnE,aAAxC;;EAEAxnE,UAAAA,KAAK,CAAC8oE,UAAN,CAAiB13E,cAAjB,CAAgC,IAAI4O,KAAK,CAACwnE,aAA1C;EAEH,SAPD,MAOO;EAEHxnE,UAAAA,KAAK,CAAC4oE,eAAN,CAAsBjoF,GAAtB,CAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC;;EAEAqf,UAAAA,KAAK,CAAC8oE,UAAN,CAAiBnoF,GAAjB,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B;EAEH;;EAEDqf,QAAAA,KAAK,CAAC6oE,MAAN,GAAe,CAAf,CA9DqB;EAiErB;EACA;;EAEA,YAAI,KAAKE,YAAL,IACA4B,YAAY,CAACl2E,iBAAb,CAA+BuL,KAAK,CAACd,MAAN,CAAapf,QAA5C,IAAwDu8C,KADxD,IAEA,KAAK,IAAIuuC,cAAc,CAACv2E,GAAf,CAAmB2L,KAAK,CAACd,MAAN,CAAazB,UAAhC,CAAT,IAAwD4+B,KAF5D,EAEiE;EAE7Dr8B,UAAAA,KAAK,CAACsa,IAAN,CAAW8rD,WAAX;EAEAuE,UAAAA,YAAY,CAACv5F,IAAb,CAAkB4uB,KAAK,CAACd,MAAN,CAAapf,QAA/B;EACA8qF,UAAAA,cAAc,CAACx5F,IAAf,CAAoB4uB,KAAK,CAACd,MAAN,CAAazB,UAAjC;EACA,eAAKsrE,YAAL,GAAoB,KAApB;EAEA,iBAAO,IAAP;EAEH;;EAED,eAAO,KAAP;EAEH,OApFD;EAsFH,KAjGa,EAAd,CAvH4B;;;EA2N5B,UAAK1tD,MAAL;;EA3N4B;EA6N/B;EAID;EACA;;;;;sCAEgB;EAEZ,aAAOstD,UAAU,CAAC7zE,GAAlB;EAEH;;;0CAEmB;EAEhB,aAAO6zE,UAAU,CAACp0E,KAAlB;EAEH;;;kCAEW;EACR,UAAIyL,KAAK,GAAG,IAAZ;EACAA,MAAAA,KAAK,CAACwoE,OAAN,CAAcp3F,IAAd,CAAmB4uB,KAAK,CAAC3vB,MAAzB;EACA2vB,MAAAA,KAAK,CAACyoE,SAAN,CAAgBr3F,IAAhB,CAAqB4uB,KAAK,CAACd,MAAN,CAAapf,QAAlC;EACAkgB,MAAAA,KAAK,CAAC0oE,KAAN,GAAc1oE,KAAK,CAACd,MAAN,CAAa3gB,IAA3B;EAEH;;;8BAEO;EACJ,UAAIyhB,KAAK,GAAG,IAAZ;EACAA,MAAAA,KAAK,CAAC3vB,MAAN,CAAae,IAAb,CAAkB4uB,KAAK,CAACwoE,OAAxB;EACAxoE,MAAAA,KAAK,CAACd,MAAN,CAAapf,QAAb,CAAsB1O,IAAtB,CAA2B4uB,KAAK,CAACyoE,SAAjC;EACAzoE,MAAAA,KAAK,CAACd,MAAN,CAAa3gB,IAAb,GAAoByhB,KAAK,CAAC0oE,KAA1B;EAEA1oE,MAAAA,KAAK,CAACd,MAAN,CAAa6kD,sBAAb;EACA/jD,MAAAA,KAAK,CAACsa,IAAN,CAAW8rD,WAAX;EAEApmE,MAAAA,KAAK,CAACqb,MAAN;EAEArb,MAAAA,KAAK,CAAC2tB,MAAN,GAAe84C,KAAK,CAACC,IAArB;EAEH;EAGD;EACA;EACA;;;;gCAEU;EACN,UAAI1mE,KAAK,GAAG,IAAZ;EACAA,MAAAA,KAAK,CAACwyB,UAAN,CAAiBwF,mBAAjB,CAAqC,aAArC,EAAoDh4B,KAAK,CAACypE,kBAA1D,EAA8E,KAA9E;EACAzpE,MAAAA,KAAK,CAACwyB,UAAN,CAAiBwF,mBAAjB,CAAqC,WAArC,EAAkDh4B,KAAK,CAAC2pE,gBAAxD,EAA0E,KAA1E;EACA3pE,MAAAA,KAAK,CAACwyB,UAAN,CAAiBwF,mBAAjB,CAAqC,OAArC,EAA8Ch4B,KAAK,CAAC6pE,iBAApD,EAAuE,KAAvE;EAEA7pE,MAAAA,KAAK,CAACwyB,UAAN,CAAiBwF,mBAAjB,CAAqC,YAArC,EAAmDh4B,KAAK,CAACgqE,YAAzD,EAAuE,KAAvE;EACAhqE,MAAAA,KAAK,CAACwyB,UAAN,CAAiBwF,mBAAjB,CAAqC,UAArC,EAAiDh4B,KAAK,CAACiqE,eAAvD,EAAwE,KAAxE;EACAjqE,MAAAA,KAAK,CAACwyB,UAAN,CAAiBwF,mBAAjB,CAAqC,WAArC,EAAkDh4B,KAAK,CAACmqE,YAAxD,EAAsE,KAAtE;EAEA9sF,MAAAA,QAAQ,CAAC26C,mBAAT,CAA6B,WAA7B,EAA0Ch4B,KAAK,CAACkrE,gBAAhD,EAAkE,KAAlE;EACA7tF,MAAAA,QAAQ,CAAC26C,mBAAT,CAA6B,SAA7B,EAAwCh4B,KAAK,CAACmrE,cAA9C,EAA8D,KAA9D;EAEAv8F,MAAAA,MAAM,CAACopD,mBAAP,CAA2B,SAA3B,EAAsCh4B,KAAK,CAACqqE,cAA5C,EAA4D,KAA5D;EAEArqE,MAAAA,KAAK,CAACypE,kBAAN,GAA2B,IAA3B;EACAzpE,MAAAA,KAAK,CAAC2pE,gBAAN,GAAyB,IAAzB;EACA3pE,MAAAA,KAAK,CAAC6pE,iBAAN,GAA0B,IAA1B;EACA7pE,MAAAA,KAAK,CAACgqE,YAAN,GAAqB,IAArB;EACAhqE,MAAAA,KAAK,CAACiqE,eAAN,GAAwB,IAAxB;EACAjqE,MAAAA,KAAK,CAACmqE,YAAN,GAAqB,IAArB;EACAnqE,MAAAA,KAAK,CAACkrE,gBAAN,GAAyB,IAAzB;EACAlrE,MAAAA,KAAK,CAACmrE,cAAN,GAAuB,IAAvB;EACAnrE,MAAAA,KAAK,CAACqqE,cAAN,GAAuB,IAAvB,CAvBM;EA2BT;;;;IAxSuBp+E;;EAiT5B,SAAS8+E,oBAAT,GAAgC;EAE5B,SAAO,IAAI5+F,IAAI,CAACwF,EAAT,GAAc,EAAd,GAAmB,EAAnB,GAAwB,KAAKu2F,eAApC;EAEH;;EAED,SAASkD,YAAT,GAAwB;EAEpB,SAAOj/F,IAAI,CAACC,GAAL,CAAS,IAAT,EAAe,KAAKs7F,SAApB,CAAP;EAEH;;EAED,SAASoD,UAAT,CAAoBlmF,KAApB,EAA2B;EAEvB,OAAKgkF,eAAL,CAAqBr0E,KAArB,IAA8B3P,KAA9B;EAEH;;EAED,SAASymF,QAAT,CAAkBzmF,KAAlB,EAAyB;EAErB,OAAKgkF,eAAL,CAAqB9zE,GAArB,IAA4BlQ,KAA5B;EAEH;;EAED,IAAI0mF,OAAO,GAAG,YAAY;EAEtB,MAAIr6E,CAAC,GAAG,IAAIa,OAAJ,EAAR;EAEA,SAAO,SAASw5E,OAAT,CAAiBpmE,QAAjB,EAA2BqmE,YAA3B,EAAyC;EAE5Ct6E,IAAAA,CAAC,CAAC+D,mBAAF,CAAsBu2E,YAAtB,EAAoC,CAApC,EAF4C;;EAG5Ct6E,IAAAA,CAAC,CAACG,cAAF,CAAiB,CAAE8T,QAAnB;;EAEA,SAAK4jE,UAAL,CAAgBl1E,GAAhB,CAAoB3C,CAApB;EAEH,GAPD;EASH,CAba,EAAd;;EAeA,IAAIu6E,KAAK,GAAG,YAAY;EACpB,MAAIv6E,CAAC,GAAG,IAAIa,OAAJ,EAAR;EAEA,SAAO,SAAS05E,KAAT,CAAetmE,QAAf,EAAyBqmE,YAAzB,EAAuC;EAE1C,QAAI,KAAKxD,kBAAL,KAA4B,IAAhC,EAAsC;EAElC92E,MAAAA,CAAC,CAAC+D,mBAAF,CAAsBu2E,YAAtB,EAAoC,CAApC;EAEH,KAJD,MAIO;EAEHt6E,MAAAA,CAAC,CAAC+D,mBAAF,CAAsBu2E,YAAtB,EAAoC,CAApC;EACAt6E,MAAAA,CAAC,CAAC4C,YAAF,CAAe,KAAKqL,MAAL,CAAY1E,EAA3B,EAA+BvJ,CAA/B;EAEH;;EAEDA,IAAAA,CAAC,CAACG,cAAF,CAAiB8T,QAAjB;;EAEA,SAAK4jE,UAAL,CAAgBl1E,GAAhB,CAAoB3C,CAApB;EAEH,GAjBD;EAmBH,CAtBW,EAAZ;;;EAyBA,IAAIw6E,GAAG,GAAG,YAAY;EAElB,MAAI5tF,MAAM,GAAG,IAAIiU,OAAJ,EAAb;EAEA,SAAO,SAAS25E,GAAT,CAAaC,MAAb,EAAqBC,MAArB,EAA6B;EAChC,QAAI3rE,KAAK,GAAG,IAAZ;EACA,QAAI4rE,OAAO,GAAG5rE,KAAK,CAACwyB,UAAN,KAAqBn1C,QAArB,GAAgC2iB,KAAK,CAACwyB,UAAN,CAAiBt0C,IAAjD,GAAwD8hB,KAAK,CAACwyB,UAA5E;;EAEA,QAAIxyB,KAAK,CAACd,MAAN,CAAa8kD,mBAAjB,EAAsC;EAElC;EACA,UAAIlkE,QAAQ,GAAGkgB,KAAK,CAACd,MAAN,CAAapf,QAA5B;EACAjC,MAAAA,MAAM,CAACzM,IAAP,CAAY0O,QAAZ,EAAsBuf,GAAtB,CAA0BW,KAAK,CAAC3vB,MAAhC;EACA,UAAIw7F,cAAc,GAAGhuF,MAAM,CAACrR,MAAP,EAArB,CALkC;;EAQlCq/F,MAAAA,cAAc,IAAI1/F,IAAI,CAAC6lE,GAAL,CAAUhyC,KAAK,CAACd,MAAN,CAAa6yC,GAAb,GAAmB,CAApB,GAAyB5lE,IAAI,CAACwF,EAA9B,GAAmC,KAA5C,CAAlB,CARkC;;EAWlC25F,MAAAA,OAAO,CAACz+F,IAAR,CAAamzB,KAAb,EAAoB,IAAI0rE,MAAJ,GAAaG,cAAb,GAA8BD,OAAO,CAACl6B,YAA1D,EAAwE1xC,KAAK,CAACd,MAAN,CAAajM,MAArF;EACAu4E,MAAAA,KAAK,CAAC3+F,IAAN,CAAWmzB,KAAX,EAAkB,IAAI2rE,MAAJ,GAAaE,cAAb,GAA8BD,OAAO,CAACl6B,YAAxD,EAAsE1xC,KAAK,CAACd,MAAN,CAAajM,MAAnF;EAEH,KAdD,MAcO,IAAI+M,KAAK,CAACd,MAAN,CAAayyC,oBAAjB,EAAuC;EAE1C;EACA25B,MAAAA,OAAO,CAACz+F,IAAR,CAAamzB,KAAb,EAAoB0rE,MAAM,IAAI1rE,KAAK,CAACd,MAAN,CAAazgB,KAAb,GAAqBuhB,KAAK,CAACd,MAAN,CAAaxgB,IAAtC,CAAN,GAAoDshB,KAAK,CAACd,MAAN,CAAa3gB,IAAjE,GAAwEqtF,OAAO,CAACjtF,WAApG,EAAiHqhB,KAAK,CAACd,MAAN,CAAajM,MAA9H;EACAu4E,MAAAA,KAAK,CAAC3+F,IAAN,CAAWmzB,KAAX,EAAkB2rE,MAAM,IAAI3rE,KAAK,CAACd,MAAN,CAAatgB,GAAb,GAAmBohB,KAAK,CAACd,MAAN,CAAapB,MAApC,CAAN,GAAoDkC,KAAK,CAACd,MAAN,CAAa3gB,IAAjE,GAAwEqtF,OAAO,CAACl6B,YAAlG,EAAgH1xC,KAAK,CAACd,MAAN,CAAajM,MAA7H;EAEH,KANM,MAMA;EAEH;EACAhB,MAAAA,OAAO,CAACC,IAAR,CAAa,8EAAb;EACA8N,MAAAA,KAAK,CAAC6nE,SAAN,GAAkB,KAAlB;EAEH;EAEJ,GAhCD;EAkCH,CAtCS,EAAV;;EAwCA,SAASiE,OAAT,CAAiBC,UAAjB,EAA6B;EACzB,MAAI/rE,KAAK,GAAG,IAAZ;;EACA,MAAIA,KAAK,CAACd,MAAN,CAAa8kD,mBAAjB,EAAsC;EAElChkD,IAAAA,KAAK,CAAC6oE,MAAN,IAAgBkD,UAAhB;EAEH,GAJD,MAIO,IAAI/rE,KAAK,CAACd,MAAN,CAAayyC,oBAAjB,EAAuC;EAE1C3xC,IAAAA,KAAK,CAACd,MAAN,CAAa3gB,IAAb,GAAoBpS,IAAI,CAACsC,GAAL,CAASuxB,KAAK,CAACinE,OAAf,EAAwB96F,IAAI,CAACiD,GAAL,CAAS4wB,KAAK,CAACknE,OAAf,EAAwBlnE,KAAK,CAACd,MAAN,CAAa3gB,IAAb,GAAoBwtF,UAA5C,CAAxB,CAApB;EACA/rE,IAAAA,KAAK,CAACd,MAAN,CAAa6kD,sBAAb;EACA/jD,IAAAA,KAAK,CAAC+oE,YAAN,GAAqB,IAArB;EAEH,GANM,MAMA;EAEH92E,IAAAA,OAAO,CAACC,IAAR,CAAa,qFAAb;EACA8N,IAAAA,KAAK,CAACynE,UAAN,GAAmB,KAAnB;EAEH;EAEJ;;EAED,SAASuE,QAAT,CAAkBD,UAAlB,EAA8B;EAC1B,MAAI/rE,KAAK,GAAG,IAAZ;;EACA,MAAIA,KAAK,CAACd,MAAN,CAAa8kD,mBAAjB,EAAsC;EAElChkD,IAAAA,KAAK,CAAC6oE,MAAN,IAAgBkD,UAAhB;EAEH,GAJD,MAIO,IAAI/rE,KAAK,CAACd,MAAN,CAAayyC,oBAAjB,EAAuC;EAE1C3xC,IAAAA,KAAK,CAACd,MAAN,CAAa3gB,IAAb,GAAoBpS,IAAI,CAACsC,GAAL,CAASuxB,KAAK,CAACinE,OAAf,EAAwB96F,IAAI,CAACiD,GAAL,CAAS4wB,KAAK,CAACknE,OAAf,EAAwBlnE,KAAK,CAACd,MAAN,CAAa3gB,IAAb,GAAoBwtF,UAA5C,CAAxB,CAApB;EACA/rE,IAAAA,KAAK,CAACd,MAAN,CAAa6kD,sBAAb;EACA/jD,IAAAA,KAAK,CAAC+oE,YAAN,GAAqB,IAArB;EAEH,GANM,MAMA;EAEH92E,IAAAA,OAAO,CAACC,IAAR,CAAa,qFAAb;EACA8N,IAAAA,KAAK,CAACynE,UAAN,GAAmB,KAAnB;EAEH;EAEJ;EAGD;EACA;;;EAEA,SAASwE,qBAAT,CAA+BvuF,KAA/B,EAAsC;EAElC;EAEA,OAAKsrF,YAAL,CAAkBroF,GAAlB,CAAsBjD,KAAK,CAAC0B,OAA5B,EAAqC1B,KAAK,CAAC4B,OAA3C;EAEH;;EAED,SAAS4sF,oBAAT,CAA8BxuF,KAA9B,EAAqC;EAEjC;EAEA,OAAK4rF,WAAL,CAAiB3oF,GAAjB,CAAqBjD,KAAK,CAAC0B,OAA3B,EAAoC1B,KAAK,CAAC4B,OAA1C;EAEH;;EAED,SAAS6sF,kBAAT,CAA4BzuF,KAA5B,EAAmC;EAE/B;EAEA,OAAKyrF,SAAL,CAAexoF,GAAf,CAAmBjD,KAAK,CAAC0B,OAAzB,EAAkC1B,KAAK,CAAC4B,OAAxC;EAEH;;EAED,SAAS8sF,qBAAT,CAA+B1uF,KAA/B,EAAsC;EAClC,MAAIsiB,KAAK,GAAG,IAAZ,CADkC;;EAIlCA,EAAAA,KAAK,CAACipE,UAAN,CAAiBtoF,GAAjB,CAAqBjD,KAAK,CAAC0B,OAA3B,EAAoC1B,KAAK,CAAC4B,OAA1C;;EAEA0gB,EAAAA,KAAK,CAACkpE,YAAN,CAAmB72E,UAAnB,CAA8B2N,KAAK,CAACipE,UAApC,EAAgDjpE,KAAK,CAACgpE,YAAtD,EAAoE53E,cAApE,CAAmF4O,KAAK,CAAC4nE,WAAzF;;EAEA,MAAIgE,OAAO,GAAG5rE,KAAK,CAACwyB,UAAN,KAAqBn1C,QAArB,GAAgC2iB,KAAK,CAACwyB,UAAN,CAAiBt0C,IAAjD,GAAwD8hB,KAAK,CAACwyB,UAA5E;EAEAs4C,EAAAA,UAAU,CAACj+F,IAAX,CAAgBmzB,KAAhB,EAAuB,IAAI7zB,IAAI,CAACwF,EAAT,GAAcquB,KAAK,CAACkpE,YAAN,CAAmBzhF,CAAjC,GAAqCmkF,OAAO,CAACl6B,YAApE,EAVkC;;EAYlC25B,EAAAA,QAAQ,CAACx+F,IAAT,CAAcmzB,KAAd,EAAqB,IAAI7zB,IAAI,CAACwF,EAAT,GAAcquB,KAAK,CAACkpE,YAAN,CAAmBxhF,CAAjC,GAAqCkkF,OAAO,CAACl6B,YAAlE;;EAEA1xC,EAAAA,KAAK,CAACgpE,YAAN,CAAmB53F,IAAnB,CAAwB4uB,KAAK,CAACipE,UAA9B;;EAEAjpE,EAAAA,KAAK,CAACqb,MAAN;EAEH;;EAED,SAASgxD,oBAAT,CAA8B3uF,KAA9B,EAAqC;EACjC,MAAIsiB,KAAK,GAAG,IAAZ,CADiC;;EAIjCA,EAAAA,KAAK,CAACupE,SAAN,CAAgB5oF,GAAhB,CAAoBjD,KAAK,CAAC0B,OAA1B,EAAmC1B,KAAK,CAAC4B,OAAzC;;EAEA0gB,EAAAA,KAAK,CAACwpE,WAAN,CAAkBn3E,UAAlB,CAA6B2N,KAAK,CAACupE,SAAnC,EAA8CvpE,KAAK,CAACspE,WAApD;;EAEA,MAAItpE,KAAK,CAACwpE,WAAN,CAAkB9hF,CAAlB,GAAsB,CAA1B,EAA6B;EAEzBokF,IAAAA,OAAO,CAACj/F,IAAR,CAAamzB,KAAb,EAAoBorE,YAAY,CAACv+F,IAAb,CAAkBmzB,KAAlB,CAApB;EAEH,GAJD,MAIO,IAAIA,KAAK,CAACwpE,WAAN,CAAkB9hF,CAAlB,GAAsB,CAA1B,EAA6B;EAEhCskF,IAAAA,QAAQ,CAACn/F,IAAT,CAAcmzB,KAAd,EAAqBorE,YAAY,CAACv+F,IAAb,CAAkBmzB,KAAlB,CAArB;EAEH;;EAEDA,EAAAA,KAAK,CAACspE,WAAN,CAAkBl4F,IAAlB,CAAuB4uB,KAAK,CAACupE,SAA7B;;EAEAvpE,EAAAA,KAAK,CAACqb,MAAN;EAEH;;EAED,SAASixD,kBAAT,CAA4B5uF,KAA5B,EAAmC;EAC/B,MAAIsiB,KAAK,GAAG,IAAZ,CAD+B;;EAI/BA,EAAAA,KAAK,CAACopE,OAAN,CAAczoF,GAAd,CAAkBjD,KAAK,CAAC0B,OAAxB,EAAiC1B,KAAK,CAAC4B,OAAvC;;EAEA0gB,EAAAA,KAAK,CAACqpE,SAAN,CAAgBh3E,UAAhB,CAA2B2N,KAAK,CAACopE,OAAjC,EAA0CppE,KAAK,CAACmpE,SAAhD,EAA2D/3E,cAA3D,CAA0E4O,KAAK,CAAC8nE,QAAhF;;EAEA2D,EAAAA,GAAG,CAAC5+F,IAAJ,CAASmzB,KAAT,EAAgBA,KAAK,CAACqpE,SAAN,CAAgB5hF,CAAhC,EAAmCuY,KAAK,CAACqpE,SAAN,CAAgB3hF,CAAnD;;EAEAsY,EAAAA,KAAK,CAACmpE,SAAN,CAAgB/3F,IAAhB,CAAqB4uB,KAAK,CAACopE,OAA3B;;EAEAppE,EAAAA,KAAK,CAACqb,MAAN;EAEH;;EAED,SAASkxD,aAAT,CAAuB7uF,KAAvB,EAA8B;EAI7B;;EAED,SAAS8uF,gBAAT,CAA0B9uF,KAA1B,EAAiC;EAC7B,MAAIsiB,KAAK,GAAG,IAAZ,CAD6B;;EAI7B,MAAItiB,KAAK,CAACiuF,MAAN,GAAe,CAAnB,EAAsB;EAElBK,IAAAA,QAAQ,CAACn/F,IAAT,CAAcmzB,KAAd,EAAqBorE,YAAY,CAACv+F,IAAb,CAAkBmzB,KAAlB,CAArB;EAEH,GAJD,MAIO,IAAItiB,KAAK,CAACiuF,MAAN,GAAe,CAAnB,EAAsB;EAEzBG,IAAAA,OAAO,CAACj/F,IAAR,CAAamzB,KAAb,EAAoBorE,YAAY,CAACv+F,IAAb,CAAkBmzB,KAAlB,CAApB;EAEH;;EAEDA,EAAAA,KAAK,CAACqb,MAAN;EAEH;;EAED,SAASoxD,aAAT,CAAuB/uF,KAAvB,EAA8B;EAC1B,MAAIsiB,KAAK,GAAG,IAAZ,CAD0B;;EAI1B,UAAQtiB,KAAK,CAACgvF,OAAd;EAEI,SAAK1sE,KAAK,CAACp0B,IAAN,CAAWw8F,EAAhB;EACIqD,MAAAA,GAAG,CAAC5+F,IAAJ,CAASmzB,KAAT,EAAgB,CAAhB,EAAmBA,KAAK,CAACgoE,WAAzB;EACAhoE,MAAAA,KAAK,CAACqb,MAAN;EACA;;EAEJ,SAAKrb,KAAK,CAACp0B,IAAN,CAAWokF,MAAhB;EACIyb,MAAAA,GAAG,CAAC5+F,IAAJ,CAASmzB,KAAT,EAAgB,CAAhB,EAAmB,CAAEA,KAAK,CAACgoE,WAA3B;EACAhoE,MAAAA,KAAK,CAACqb,MAAN;EACA;;EAEJ,SAAKrb,KAAK,CAACp0B,IAAN,CAAWkkF,IAAhB;EACI2b,MAAAA,GAAG,CAAC5+F,IAAJ,CAASmzB,KAAT,EAAgBA,KAAK,CAACgoE,WAAtB,EAAmC,CAAnC;EACAhoE,MAAAA,KAAK,CAACqb,MAAN;EACA;;EAEJ,SAAKrb,KAAK,CAACp0B,IAAN,CAAWqkF,KAAhB;EACIwb,MAAAA,GAAG,CAAC5+F,IAAJ,CAASmzB,KAAT,EAAgB,CAAEA,KAAK,CAACgoE,WAAxB,EAAqC,CAArC;EACAhoE,MAAAA,KAAK,CAACqb,MAAN;EACA;EApBR;EAwBH;;EAED,SAASsxD,sBAAT,CAAgCjvF,KAAhC,EAAuC;EAEnC;EAEA,OAAKsrF,YAAL,CAAkBroF,GAAlB,CAAsBjD,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBztF,KAAvC,EAA8CzB,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBvtF,KAA/D;EAEH;;EAED,SAASwtF,wBAAT,CAAkCnvF,KAAlC,EAAyC;EACrC,MAAIsiB,KAAK,GAAG,IAAZ,CADqC;;EAIrC,MAAIA,KAAK,CAACynE,UAAV,EAAsB;EAElB,QAAI/yE,EAAE,GAAGhX,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBztF,KAAjB,GAAyBzB,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBztF,KAAnD;EACA,QAAIwV,EAAE,GAAGjX,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBvtF,KAAjB,GAAyB3B,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBvtF,KAAnD;EAEA,QAAI6lB,QAAQ,GAAG/4B,IAAI,CAACklB,IAAL,CAAUqD,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAzB,CAAf;;EAEAqL,IAAAA,KAAK,CAACspE,WAAN,CAAkB3oF,GAAlB,CAAsB,CAAtB,EAAyBukB,QAAzB;EAEH;;EAED,MAAIlF,KAAK,CAAC6nE,SAAV,EAAqB;EAEjB,QAAIpgF,CAAC,GAAG,OAAO/J,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBztF,KAAjB,GAAyBzB,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBztF,KAAjD,CAAR;EACA,QAAIuI,CAAC,GAAG,OAAOhK,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBvtF,KAAjB,GAAyB3B,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBvtF,KAAjD,CAAR;;EAEA2gB,IAAAA,KAAK,CAACmpE,SAAN,CAAgBxoF,GAAhB,CAAoB8G,CAApB,EAAuBC,CAAvB;EAEH;EAEJ;;EAED,SAASolF,qBAAT,CAA+BpvF,KAA/B,EAAsC;EAClC,MAAIsiB,KAAK,GAAG,IAAZ,CADkC;;EAIlCA,EAAAA,KAAK,CAACipE,UAAN,CAAiBtoF,GAAjB,CAAqBjD,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBztF,KAAtC,EAA6CzB,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBvtF,KAA9D;;EAEA2gB,EAAAA,KAAK,CAACkpE,YAAN,CAAmB72E,UAAnB,CAA8B2N,KAAK,CAACipE,UAApC,EAAgDjpE,KAAK,CAACgpE,YAAtD,EAAoE53E,cAApE,CAAmF4O,KAAK,CAAC4nE,WAAzF;;EAEA,MAAIgE,OAAO,GAAG5rE,KAAK,CAACwyB,UAAN,KAAqBn1C,QAArB,GAAgC2iB,KAAK,CAACwyB,UAAN,CAAiBt0C,IAAjD,GAAwD8hB,KAAK,CAACwyB,UAA5E;EAEAs4C,EAAAA,UAAU,CAACj+F,IAAX,CAAgBmzB,KAAhB,EAAuB,IAAI7zB,IAAI,CAACwF,EAAT,GAAcquB,KAAK,CAACkpE,YAAN,CAAmBzhF,CAAjC,GAAqCmkF,OAAO,CAACl6B,YAApE,EAVkC;;EAYlC25B,EAAAA,QAAQ,CAACx+F,IAAT,CAAcmzB,KAAd,EAAqB,IAAI7zB,IAAI,CAACwF,EAAT,GAAcquB,KAAK,CAACkpE,YAAN,CAAmBxhF,CAAjC,GAAqCkkF,OAAO,CAACl6B,YAAlE;;EAEA1xC,EAAAA,KAAK,CAACgpE,YAAN,CAAmB53F,IAAnB,CAAwB4uB,KAAK,CAACipE,UAA9B;;EAEAjpE,EAAAA,KAAK,CAACqb,MAAN;EAEH;;EAED,SAAS0xD,uBAAT,CAAiCrvF,KAAjC,EAAwC;EACpC,MAAIsiB,KAAK,GAAG,IAAZ,CADoC;;EAIpC,MAAIA,KAAK,CAACynE,UAAV,EAAsB;EAElB,QAAI/yE,EAAE,GAAGhX,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBztF,KAAjB,GAAyBzB,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBztF,KAAnD;EACA,QAAIwV,EAAE,GAAGjX,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBvtF,KAAjB,GAAyB3B,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBvtF,KAAnD;EAEA,QAAI6lB,QAAQ,GAAG/4B,IAAI,CAACklB,IAAL,CAAUqD,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAzB,CAAf;;EAEAqL,IAAAA,KAAK,CAACupE,SAAN,CAAgB5oF,GAAhB,CAAoB,CAApB,EAAuBukB,QAAvB;;EAEAlF,IAAAA,KAAK,CAACwpE,WAAN,CAAkB7oF,GAAlB,CAAsB,CAAtB,EAAyBxU,IAAI,CAACC,GAAL,CAAS4zB,KAAK,CAACupE,SAAN,CAAgB7hF,CAAhB,GAAoBsY,KAAK,CAACspE,WAAN,CAAkB5hF,CAA/C,EAAkDsY,KAAK,CAAC0nE,SAAxD,CAAzB;;EAEAoE,IAAAA,OAAO,CAACj/F,IAAR,CAAamzB,KAAb,EAAoBA,KAAK,CAACwpE,WAAN,CAAkB9hF,CAAtC;;EAEAsY,IAAAA,KAAK,CAACspE,WAAN,CAAkBl4F,IAAlB,CAAuB4uB,KAAK,CAACupE,SAA7B;EAEH;;EAED,MAAIvpE,KAAK,CAAC6nE,SAAV,EAAqB;EAEjB,QAAIpgF,CAAC,GAAG,OAAO/J,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBztF,KAAjB,GAAyBzB,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBztF,KAAjD,CAAR;EACA,QAAIuI,CAAC,GAAG,OAAOhK,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBvtF,KAAjB,GAAyB3B,KAAK,CAACkvF,OAAN,CAAc,CAAd,EAAiBvtF,KAAjD,CAAR;;EAEA2gB,IAAAA,KAAK,CAACopE,OAAN,CAAczoF,GAAd,CAAkB8G,CAAlB,EAAqBC,CAArB;;EAEAsY,IAAAA,KAAK,CAACqpE,SAAN,CAAgBh3E,UAAhB,CAA2B2N,KAAK,CAACopE,OAAjC,EAA0CppE,KAAK,CAACmpE,SAAhD,EAA2D/3E,cAA3D,CAA0E4O,KAAK,CAAC8nE,QAAhF;;EAEA2D,IAAAA,GAAG,CAAC5+F,IAAJ,CAASmzB,KAAT,EAAgBA,KAAK,CAACqpE,SAAN,CAAgB5hF,CAAhC,EAAmCulF,QAAQ,CAACtlF,CAA5C;;EAEAsY,IAAAA,KAAK,CAACmpE,SAAN,CAAgB/3F,IAAhB,CAAqB4uB,KAAK,CAACopE,OAA3B;EAEH;;EAEDppE,EAAAA,KAAK,CAACqb,MAAN;EAEH;;EAED,SAAS4xD,cAAT,CAAwBvvF,KAAxB,EAA+B,EAA/B;EAMA;EACA;EACA;;;EAEA,SAASksF,WAAT,CAAqBlsF,KAArB,EAA4B;EACxB,MAAIsiB,KAAK,GAAG,IAAZ;EAEA,MAAIA,KAAK,CAACza,OAAN,KAAkB,KAAtB,EAA6B;EAE7B7H,EAAAA,KAAK,CAACy+C,cAAN;;EAEA,UAAQz+C,KAAK,CAACwvF,MAAd;EAEI,SAAKltE,KAAK,CAACqoE,YAAN,CAAmBC,KAAxB;EAEI,UAAItoE,KAAK,CAAC2nE,YAAN,KAAuB,KAA3B,EAAkC;EAElCsE,MAAAA,qBAAqB,CAACp/F,IAAtB,CAA2BmzB,KAA3B,EAAkCtiB,KAAlC;EAEAsiB,MAAAA,KAAK,CAAC2tB,MAAN,GAAe84C,KAAK,CAACE,MAArB;EAEA;;EAEJ,SAAK3mE,KAAK,CAACqoE,YAAN,CAAmBE,IAAxB;EAEI,UAAIvoE,KAAK,CAACynE,UAAN,KAAqB,KAAzB,EAAgC;EAEhCyE,MAAAA,oBAAoB,CAACr/F,IAArB,CAA0BmzB,KAA1B,EAAiCtiB,KAAjC;EAEAsiB,MAAAA,KAAK,CAAC2tB,MAAN,GAAe84C,KAAK,CAACG,KAArB;EAEA;;EAEJ,SAAK5mE,KAAK,CAACqoE,YAAN,CAAmBxB,GAAxB;EAEI,UAAI7mE,KAAK,CAAC6nE,SAAN,KAAoB,KAAxB,EAA+B;EAE/BsE,MAAAA,kBAAkB,CAACt/F,IAAnB,CAAwBmzB,KAAxB,EAA+BtiB,KAA/B;EAEAsiB,MAAAA,KAAK,CAAC2tB,MAAN,GAAe84C,KAAK,CAACI,GAArB;EAEA;EA9BR;;EAkCA,MAAI7mE,KAAK,CAAC2tB,MAAN,KAAiB84C,KAAK,CAACC,IAA3B,EAAiC;EAE7B1mE,IAAAA,KAAK,CAACkrE,gBAAN,GAAyBiC,WAAW,CAACrhG,IAAZ,CAAiBk0B,KAAjB,CAAzB;EACAA,IAAAA,KAAK,CAACmrE,cAAN,GAAuBiC,SAAS,CAACthG,IAAV,CAAek0B,KAAf,CAAvB;EACA3iB,IAAAA,QAAQ,CAACo3C,gBAAT,CAA0B,WAA1B,EAAuCz0B,KAAK,CAACkrE,gBAA7C,EAA+D,KAA/D;EACA7tF,IAAAA,QAAQ,CAACo3C,gBAAT,CAA0B,SAA1B,EAAqCz0B,KAAK,CAACmrE,cAA3C,EAA2D,KAA3D;EAEAnrE,IAAAA,KAAK,CAACsa,IAAN,CAAW+rD,UAAX;EAEH;EAEJ;;EAED,SAAS8G,WAAT,CAAqBzvF,KAArB,EAA4B;EAExB,MAAIsiB,KAAK,GAAG,IAAZ;EAEA,MAAIA,KAAK,CAACza,OAAN,KAAkB,KAAtB,EAA6B;EAE7B7H,EAAAA,KAAK,CAACy+C,cAAN;;EAEA,UAAQn8B,KAAK,CAAC2tB,MAAd;EAEI,SAAK84C,KAAK,CAACE,MAAX;EAEI,UAAI3mE,KAAK,CAAC2nE,YAAN,KAAuB,KAA3B,EAAkC;EAElCyE,MAAAA,qBAAqB,CAACv/F,IAAtB,CAA2BmzB,KAA3B,EAAkCtiB,KAAlC;EAEA;;EAEJ,SAAK+oF,KAAK,CAACG,KAAX;EAEI,UAAI5mE,KAAK,CAACynE,UAAN,KAAqB,KAAzB,EAAgC;EAEhC4E,MAAAA,oBAAoB,CAACx/F,IAArB,CAA0BmzB,KAA1B,EAAiCtiB,KAAjC;EAEA;;EAEJ,SAAK+oF,KAAK,CAACI,GAAX;EAEI,UAAI7mE,KAAK,CAAC6nE,SAAN,KAAoB,KAAxB,EAA+B;EAE/ByE,MAAAA,kBAAkB,CAACz/F,IAAnB,CAAwBmzB,KAAxB,EAA+BtiB,KAA/B;EAEA;EAxBR;EA4BH;;EAED,SAAS0vF,SAAT,CAAmB1vF,KAAnB,EAA0B;EAEtB,MAAIsiB,KAAK,GAAG,IAAZ;EAEA,MAAIA,KAAK,CAACza,OAAN,KAAkB,KAAtB,EAA6B;EAE7BgnF,EAAAA,aAAa,CAAC1/F,IAAd,CAAmBmzB,KAAnB,EAA0BtiB,KAA1B;EAEAL,EAAAA,QAAQ,CAAC26C,mBAAT,CAA6B,WAA7B,EAA0Cm1C,WAAW,CAACrhG,IAAZ,CAAiBk0B,KAAjB,CAA1C,EAAmE,KAAnE;EACA3iB,EAAAA,QAAQ,CAAC26C,mBAAT,CAA6B,SAA7B,EAAwCo1C,SAAS,CAACthG,IAAV,CAAek0B,KAAf,CAAxC,EAA+D,KAA/D;EAEAA,EAAAA,KAAK,CAACsa,IAAN,CAAWgsD,QAAX;EAEAtmE,EAAAA,KAAK,CAAC2tB,MAAN,GAAe84C,KAAK,CAACC,IAArB;EAEH;;EAED,SAASoD,YAAT,CAAsBpsF,KAAtB,EAA6B;EAEzB,MAAIsiB,KAAK,GAAG,IAAZ;EAEA,MAAIA,KAAK,CAACza,OAAN,KAAkB,KAAlB,IAA2Bya,KAAK,CAACynE,UAAN,KAAqB,KAAhD,IAA0DznE,KAAK,CAAC2tB,MAAN,KAAiB84C,KAAK,CAACC,IAAvB,IAA+B1mE,KAAK,CAAC2tB,MAAN,KAAiB84C,KAAK,CAACE,MAApH,EAA6H;EAE7HjpF,EAAAA,KAAK,CAACy+C,cAAN;EACAz+C,EAAAA,KAAK,CAACiL,eAAN;EAEAqX,EAAAA,KAAK,CAACsa,IAAN,CAAW+rD,UAAX;EAEAmG,EAAAA,gBAAgB,CAAC3/F,IAAjB,CAAsBmzB,KAAtB,EAA6BtiB,KAA7B;EAEAsiB,EAAAA,KAAK,CAACsa,IAAN,CAAWgsD,QAAX;EAEH;;EAED,SAASgE,SAAT,CAAmB5sF,KAAnB,EAA0B;EACtB,MAAIsiB,KAAK,GAAG,IAAZ;EAEA,MAAIA,KAAK,CAACza,OAAN,KAAkB,KAAlB,IAA2Bya,KAAK,CAACmoE,UAAN,KAAqB,KAAhD,IAAyDnoE,KAAK,CAAC6nE,SAAN,KAAoB,KAAjF,EAAwF;EAExF4E,EAAAA,aAAa,CAAC5/F,IAAd,CAAmBmzB,KAAnB,EAA0BtiB,KAA1B;EAEH;;EAED,SAASssF,YAAT,CAAsBtsF,KAAtB,EAA6B;EAEzB,MAAIsiB,KAAK,GAAG,IAAZ;EACA,MAAIA,KAAK,CAACza,OAAN,KAAkB,KAAtB,EAA6B;EAE7B7H,EAAAA,KAAK,CAACy+C,cAAN;;EAEA,UAAQz+C,KAAK,CAACkvF,OAAN,CAAcpgG,MAAtB;EAEI,SAAK,CAAL;EAAQ;EAEJ,UAAIwzB,KAAK,CAAC2nE,YAAN,KAAuB,KAA3B,EAAkC;EAElCgF,MAAAA,sBAAsB,CAAC9/F,IAAvB,CAA4BmzB,KAA5B,EAAmCtiB,KAAnC;EAEAsiB,MAAAA,KAAK,CAAC2tB,MAAN,GAAe84C,KAAK,CAACK,YAArB;EAEA;;EAEJ,SAAK,CAAL;EAAQ;EAEJ,UAAI9mE,KAAK,CAACynE,UAAN,KAAqB,KAArB,IAA8BznE,KAAK,CAAC6nE,SAAN,KAAoB,KAAtD,EAA6D;EAE7DgF,MAAAA,wBAAwB,CAAChgG,IAAzB,CAA8BmzB,KAA9B,EAAqCtiB,KAArC;EAEAsiB,MAAAA,KAAK,CAAC2tB,MAAN,GAAe84C,KAAK,CAACM,eAArB;EAEA;;EAEJ;EAEI/mE,MAAAA,KAAK,CAAC2tB,MAAN,GAAe84C,KAAK,CAACC,IAArB;EAxBR;;EA4BA,MAAI1mE,KAAK,CAAC2tB,MAAN,KAAiB84C,KAAK,CAACC,IAA3B,EAAiC;EAE7B1mE,IAAAA,KAAK,CAACsa,IAAN,CAAW+rD,UAAX;EAEH;EAEJ;;EAED,SAAS+D,WAAT,CAAqB1sF,KAArB,EAA4B;EAExB,MAAIsiB,KAAK,GAAG,IAAZ;EAEA,MAAIA,KAAK,CAACza,OAAN,KAAkB,KAAtB,EAA6B;EAE7B7H,EAAAA,KAAK,CAACy+C,cAAN;EACAz+C,EAAAA,KAAK,CAACiL,eAAN;;EAEA,UAAQjL,KAAK,CAACkvF,OAAN,CAAcpgG,MAAtB;EAEI,SAAK,CAAL;EAAQ;EAEJ,UAAIwzB,KAAK,CAAC2nE,YAAN,KAAuB,KAA3B,EAAkC;EAClC,UAAI3nE,KAAK,CAAC2tB,MAAN,KAAiB84C,KAAK,CAACK,YAA3B,EAAyC,OAH7C;;EAKIgG,MAAAA,qBAAqB,CAACjgG,IAAtB,CAA2BmzB,KAA3B,EAAkCtiB,KAAlC;EAEA;;EAEJ,SAAK,CAAL;EAAQ;EAEJ,UAAIsiB,KAAK,CAACynE,UAAN,KAAqB,KAArB,IAA8BznE,KAAK,CAAC6nE,SAAN,KAAoB,KAAtD,EAA6D;EAC7D,UAAI7nE,KAAK,CAAC2tB,MAAN,KAAiB84C,KAAK,CAACM,eAA3B,EAA4C,OAHhD;;EAKIgG,MAAAA,uBAAuB,CAAClgG,IAAxB,CAA6BmzB,KAA7B,EAAoCtiB,KAApC;EAEA;;EAEJ;EAEIsiB,MAAAA,KAAK,CAAC2tB,MAAN,GAAe84C,KAAK,CAACC,IAArB;EAtBR;EA0BH;;EAED,SAASwD,UAAT,CAAoBxsF,KAApB,EAA2B;EACvB,MAAIsiB,KAAK,GAAG,IAAZ;EACA,MAAIA,KAAK,CAACza,OAAN,KAAkB,KAAtB,EAA6B;EAE7B0nF,EAAAA,cAAc,CAACpgG,IAAf,CAAoBmzB,KAApB,EAA2BtiB,KAA3B;EAEAsiB,EAAAA,KAAK,CAACsa,IAAN,CAAWgsD,QAAX;EAEAtmE,EAAAA,KAAK,CAAC2tB,MAAN,GAAe84C,KAAK,CAACC,IAArB;EAEH;;EAED,SAASgD,aAAT,CAAuBhsF,KAAvB,EAA8B;EAC1B,MAAIsiB,KAAK,GAAG,IAAZ;EACA,MAAIA,KAAK,CAACza,OAAN,KAAkB,KAAtB,EAA6B;EAE7B7H,EAAAA,KAAK,CAACy+C,cAAN;EAEH;;MCl7BKkxC;;;;;EACF,uBAAY76C,UAAZ,EAAwB;EAAA;;EAAA;;EACpB;;EACA,QAAIxyB,KAAK,wDAAT;;EAEA,UAAKstE,YAAL,GAAoB,IAAI/3D,OAAJ,EAApB;EACA,UAAKg4D,KAAL,GAAa,EAAb;EAEA,UAAK/6C,UAAL,GAAmBA,UAAU,KAAKlhD,SAAhB,GAA6BkhD,UAA7B,GAA0Cn1C,QAA5D;EAEA,UAAK6tF,gBAAL,GAAwBlrE,KAAK,CAACmtE,WAAN,CAAkBrhG,IAAlB,CAAuBk0B,KAAvB,CAAxB;EACA,UAAKwtE,gBAAL,GAAwBxtE,KAAK,CAACytE,WAAN,CAAkB3hG,IAAlB,CAAuBk0B,KAAvB,CAAxB;EACA,UAAK0tE,cAAL,GAAsB1tE,KAAK,CAAC2tE,SAAN,CAAgB7hG,IAAhB,CAAqBk0B,KAArB,CAAtB;;EAEA,UAAKwyB,UAAL,CAAgBiC,gBAAhB,CAAiC,WAAjC,EAA8C,MAAKy2C,gBAAnD,EAAqE,KAArE;;EACA,UAAK14C,UAAL,CAAgBiC,gBAAhB,CAAiC,WAAjC,EAA8C,MAAK+4C,gBAAnD,EAAqE,KAArE;;EACA,UAAKh7C,UAAL,CAAgBiC,gBAAhB,CAAiC,SAAjC,EAA4C,MAAKi5C,cAAjD,EAAiE,KAAjE;;EAGA,UAAKp6F,OAAL,GAAe,IAAf,CAlBoB;;EAoBpB,UAAKs6F,QAAL,GAAgB,KAAhB;EACA,UAAKC,WAAL,GAAmB,KAAnB;EACA,UAAKC,UAAL,GAAkB,KAAlB;EACA,UAAKC,OAAL,GAAe,KAAf;EACA,UAAKC,KAAL,GAAa,IAAb;EAxBoB;EA0BvB;;;;8BACO7tF,MAAM;EACVA,MAAAA,IAAI,CAAC9P,MAAL,GAAc,IAAd;EACA,WAAKk9F,KAAL,CAAWjjG,IAAX,CAAgB6V,IAAhB;EACH;;;+BACQ;EAAA;;EAEL,WAAKotF,KAAL,CAAW3iG,OAAX,CAAmB,UAAAuV,IAAI,EAAI;EACvB,YAAI,MAAI,CAACytF,QAAT,EAAmB;EACfztF,UAAAA,IAAI,CAACytF,QAAL,GAAgB,IAAhB;EACH;EACJ,OAJD;EAKA,UAAI,KAAKA,QAAT,EAAmB,KAAKA,QAAL,GAAgB,KAAhB;EAEnB,WAAKL,KAAL,CAAW3iG,OAAX,CAAmB,UAACuV,IAAD,EAAOzT,CAAP,EAAa;EAE5B,YAAIggD,KAAK,GAAGvsC,IAAI,CAAC8tF,QAAL,EAAZ;EAEA,YAAI,CAAC9tF,IAAI,CAACytF,QAAV,EAAoB;EACpBztF,QAAAA,IAAI,CAACytF,QAAL,GAAgB,KAAhB;EAEA,YAAI1lC,SAAS,GAAG/nD,IAAI,CAAC+tF,YAAL,CAAkB,MAAI,CAACZ,YAAvB,CAAhB,CAP4B;;EAS5B,YAAInlC,UAAU,GAAGD,SAAS,CAACimC,gBAAV,CAA2BzhD,KAAK,CAACjiC,QAAjC,EAA2C,IAA3C,CAAjB,CAT4B;EAa5B;;EACA,YAAI09C,UAAU,CAAC37D,MAAX,GAAoB,CAAxB,EAA2B;EAEvB,eAAK,IAAIE,EAAC,GAAG,CAAR,EAAWgM,CAAC,GAAGyvD,UAAU,CAAC37D,MAA/B,EAAuCE,EAAC,GAAGgM,CAA3C,EAA8ChM,EAAC,EAA/C,EAAmD;EAC/C,gBAAI7C,CAAC,CAACqE,OAAF,CAAUi6D,UAAU,CAACz7D,EAAD,CAAV,CAAcwyB,MAAd,CAAqBhT,UAA/B,CAAJ,EAAgD;EAC5Ci8C,cAAAA,UAAU,CAACrxD,MAAX,CAAkBpK,EAAlB,EAAqB,CAArB;EACAgM,cAAAA,CAAC;EACDhM,cAAAA,EAAC;EACJ;EACJ;EAEJ;;EAGD,YAAIy7D,UAAU,CAAC37D,MAAX,GAAoB,CAAxB,EAA2B;EACvB,cAAI27D,UAAU,CAAC,CAAD,CAAV,CAAcjpC,MAAd,IAAwB/e,IAAI,CAAC9P,MAAjC,EAAyC;EACrC,gBAAI8P,IAAI,CAAC9P,MAAT,EAAiB;EACb8P,cAAAA,IAAI,CAAC9P,MAAL,CAAYiqC,IAAZ,CAAiB;EAAE9lC,gBAAAA,IAAI,EAAE,WAAR;EAAqBkJ,gBAAAA,KAAK,EAAE,MAAI,CAACswF,KAAjC;EAAwC7lC,gBAAAA,UAAU,EAAVA;EAAxC,eAAjB;EACH;;EAED,gBAAI,CAAC,MAAI,CAAC0lC,WAAV,EAAuB;EACnB1tF,cAAAA,IAAI,CAAC9P,MAAL,CAAYiqC,IAAZ,CAAiB;EAAE9lC,gBAAAA,IAAI,EAAE,WAAR;EAAqBkJ,gBAAAA,KAAK,EAAE,MAAI,CAACswF,KAAjC;EAAwC7lC,gBAAAA,UAAU,EAAVA;EAAxC,eAAjB;EACA,cAAA,MAAI,CAAC0lC,WAAL,GAAmB,IAAnB;EACA,cAAA,MAAI,CAACC,UAAL,GAAkB,KAAlB;EACH;;EACD,gBAAI,MAAI,CAACC,OAAT,EAAkB;EACd5tF,cAAAA,IAAI,CAAC9P,MAAL,CAAYiqC,IAAZ,CAAiB;EAAE9lC,gBAAAA,IAAI,EAAE,OAAR;EAAiBkJ,gBAAAA,KAAK,EAAE,MAAI,CAACswF,KAA7B;EAAoC7lC,gBAAAA,UAAU,EAAVA;EAApC,eAAjB;EACA,cAAA,MAAI,CAAC4lC,OAAL,GAAe,KAAf;EACH;EAEJ,WAfD,MAeO;EACH,gBAAI5tF,IAAI,CAAC9P,MAAL,KAAgB,IAAhB,IAAwB,CAAC,MAAI,CAACy9F,UAAlC,EAA8C;EAC1C3tF,cAAAA,IAAI,CAAC9P,MAAL,CAAYiqC,IAAZ,CAAiB;EAAE9lC,gBAAAA,IAAI,EAAE,UAAR;EAAoBkJ,gBAAAA,KAAK,EAAE,MAAI,CAACswF,KAAhC;EAAuC7lC,gBAAAA,UAAU,EAAVA;EAAvC,eAAjB;EACA,cAAA,MAAI,CAAC2lC,UAAL,GAAkB,IAAlB;EACA,cAAA,MAAI,CAACD,WAAL,GAAmB,KAAnB,CAH0C;EAK7C;;EACD1tF,YAAAA,IAAI,CAAC9P,MAAL,GAAc83D,UAAU,CAAC,CAAD,CAAV,CAAcjpC,MAA5B;EACH;EAEJ,SA1BD,MA0BO;EACH,cAAI/e,IAAI,CAAC9P,MAAL,KAAgB,IAAhB,IAAwB,CAAC,MAAI,CAACy9F,UAAlC,EAA8C;EAC1C3tF,YAAAA,IAAI,CAAC9P,MAAL,CAAYiqC,IAAZ,CAAiB;EAAE9lC,cAAAA,IAAI,EAAE,UAAR;EAAoBkJ,cAAAA,KAAK,EAAE,MAAI,CAACswF,KAAhC;EAAuC7lC,cAAAA,UAAU,EAAVA;EAAvC,aAAjB;EACAhoD,YAAAA,IAAI,CAAC9P,MAAL,GAAc,IAAd;EACA,YAAA,MAAI,CAACy9F,UAAL,GAAkB,IAAlB;EACA,YAAA,MAAI,CAACD,WAAL,GAAmB,KAAnB,CAJ0C;EAM7C;EACJ;EAIJ,OAjED;EAmEH;;;gCAES;EACN,UAAI7tE,KAAK,GAAG,IAAZ,CADM;;EAGNA,MAAAA,KAAK,CAACwyB,UAAN,CAAiBwF,mBAAjB,CAAqC,WAArC,EAAkDh4B,KAAK,CAACwtE,gBAAxD,EAA0E,KAA1E;EACAxtE,MAAAA,KAAK,CAACwyB,UAAN,CAAiBwF,mBAAjB,CAAqC,SAArC,EAAgDh4B,KAAK,CAAC0tE,cAAtD,EAAsE,KAAtE,EAJM;EAON;EACA;EACA;;EAEA1tE,MAAAA,KAAK,CAACwyB,UAAN,CAAiBwF,mBAAjB,CAAqC,WAArC,EAAkDh4B,KAAK,CAACkrE,gBAAxD,EAA0E,KAA1E,EAXM;EAaN;;EAEAlrE,MAAAA,KAAK,CAACwtE,gBAAN,GAAyB,IAAzB;EACAxtE,MAAAA,KAAK,CAAC0tE,cAAN,GAAuB,IAAvB;EACA1tE,MAAAA,KAAK,CAACkrE,gBAAN,GAAyB,IAAzB;EAEA,WAAKoC,YAAL,GAAoB,IAApB;EACA,WAAKC,KAAL,GAAa,EAAb;EAEA,WAAK/6C,UAAL,GAAkB,IAAlB;EAGA,WAAKl/C,OAAL,GAAe,IAAf;EAEA,WAAKs6F,QAAL,GAAgB,KAAhB;EACA,WAAKC,WAAL,GAAmB,KAAnB;EACA,WAAKC,UAAL,GAAkB,KAAlB;EACA,WAAKC,OAAL,GAAe,KAAf;EACA,WAAKC,KAAL,GAAa,IAAb;EACH;;;kCACWzxF,GAAG;EACX;EACA,WAAKyxF,KAAL,GAAatwF,KAAb;EAFW,UAGL+J,CAHK,GAGIlL,CAHJ,CAGLkL,CAHK;EAAA,UAGFC,CAHE,GAGInL,CAHJ,CAGFmL,CAHE;EAIX,WAAKpU,OAAL,GAAe;EAAEmU,QAAAA,CAAC,EAADA,CAAF;EAAKC,QAAAA,CAAC,EAADA;EAAL,OAAf,CAJW;EAMd;;;gCACSnL,GAAG;EAAA;;EAET,WAAKqxF,QAAL,GAAgB,IAAhB;EAFS,UAGHnmF,CAHG,GAGMlL,CAHN,CAGHkL,CAHG;EAAA,UAGAC,CAHA,GAGMnL,CAHN,CAGAmL,CAHA;;EAKT,UAAID,CAAC,IAAI,KAAKnU,OAAL,CAAamU,CAAlB,IAAuBC,CAAC,IAAI,KAAKpU,OAAL,CAAaoU,CAA7C,EAAgD;EAC5C,aAAKqmF,OAAL,GAAe,IAAf;EACA,aAAKzzD,IAAL,CAAU;EAAE9lC,UAAAA,IAAI,EAAE,OAAR;EAAiBkJ,UAAAA,KAAK,EAAEA;EAAxB,SAAV,EAF4C;;EAI5C,aAAKpK,OAAL,GAAe;EAAEmU,UAAAA,CAAC,EAAE,CAAC,CAAN;EAASC,UAAAA,CAAC,EAAE,CAAC;EAAb,SAAf;EACH;;EACD0qD,MAAAA,UAAU,CAAC,YAAM;EACb,QAAA,MAAI,CAAC93B,IAAL,CAAU;EAAE9lC,UAAAA,IAAI,EAAE;EAAR,SAAV;EACH,OAFS,EAEP,EAFO,CAAV;EAIA,WAAKw5F,KAAL,GAAatwF,KAAb,CAfS;EAkBZ;;;kCAEWA,OAAO;EACfA,MAAAA,KAAK,CAACy+C,cAAN;EACA,WAAKmxC,YAAL,CAAkB7lF,CAAlB,GAAuB/J,KAAK,CAACuoF,OAAN,GAAgB,KAAKzzC,UAAL,CAAgB7zC,WAAjC,GAAgD,CAAhD,GAAoD,CAA1E;EACA,WAAK2uF,YAAL,CAAkB5lF,CAAlB,GAAsB,EAAEhK,KAAK,CAACwoF,OAAN,GAAgB,KAAK1zC,UAAL,CAAgBkf,YAAlC,IAAkD,CAAlD,GAAsD,CAA5E;EACA,WAAKp3B,IAAL,CAAU;EAAE9lC,QAAAA,IAAI,EAAE,MAAR;EAAgBkJ,QAAAA,KAAK,EAAEA;EAAvB,OAAV;EACA,WAAK48B,IAAL,CAAU;EAAE9lC,QAAAA,IAAI,EAAE;EAAR,OAAV;EACA,WAAKw5F,KAAL,GAAatwF,KAAb;EACA,WAAKkwF,QAAL,GAAgB,IAAhB;EACH;;;;IAlLqB3hF;;ECU1B,IAAImiF,cAAc,GAAG,IAArB;EAAA,IAA2BC,cAAc,GAAG,IAA5C;EAAA,IAAkDC,cAAc,GAAG,IAAnE;EAAA,IAAyEC,QAAQ,GAAG,IAApF;EAEA,IAAIC,IAAI,GAAG,CAAX;;MACMC;;;;;EACF,mBAAYrpF,IAAZ,EAAkBnR,IAAlB,EAAwBF,GAAxB,EAA6B2N,gBAA7B,EAA+C;EAAA;;EAAA;;EAC3C;EAEA,UAAKgtF,WAAL,GAAmBtpF,IAAnB;EACA,UAAKrR,GAAL,GAAWA,GAAX;EACA,UAAKE,IAAL,GAAYA,IAAZ;EAEA,UAAKyN,gBAAL,GAAwBA,gBAAxB;EAGA,UAAKnE,EAAL,GAAU,IAAV;EACA,UAAK4C,IAAL,GAAY,IAAZ;EACA,UAAKI,OAAL,GAAe,IAAf;EACA,UAAKD,SAAL,GAAiB,IAAjB;EACA,UAAKquF,SAAL,GAAiB,IAAjB,CAd2C;;EAiB3C,UAAK5uF,KAAL,GAAa,CAAb,CAjB2C;;EAkB3C,UAAKC,MAAL,GAAc,CAAd,CAlB2C;;EAoB3C,UAAKuhC,QAAL,GAAgB,IAAhB;EACA,UAAKw2C,UAAL,GAAkB,IAAlB;EACA,UAAKT,GAAL,GAAW,IAAX;EACA,UAAKsX,SAAL,GAAiB,IAAjB,CAvB2C;;EA2B3C,UAAKC,mBAAL,CAAyBzpF,IAAzB,EA3B2C;EA8B3C;EACA;EACA;EACA;EACA;EACA;EAEA;;;EACA,UAAKkyE,GAAL,GAAW,IAAInB,WAAJ,CAAgB,MAAKp2E,KAArB,EAA4B,MAAKC,MAAjC,CAAX,CAtC2C;;EA0C3C,UAAKuhC,QAAL,GAAgB,MAAK+1C,GAAL,CAAShB,UAAT,CAAoB/0C,QAApC,CA1C2C;;EA8C3C,UAAKv+B,UAAL,GAAkB,EAAlB;EAEA,UAAK8rF,MAAL,GAAc,KAAd;EACA,UAAK7zF,SAAL,GAAiB,MAAKoiF,SAAL,CAAe,MAAKppF,IAApB,EAA0B,EAA1B,CAAjB,CAjD2C;;EAmD3C,UAAK86F,aAAL;;EAnD2C;EAqD9C;;;;2BACIC,iBAAiB;EAClB,UAAIp5F,EAAE,GAAG,IAAT;;EACA,UAAIq5F,YAAY,GAAGplG,CAAC,CAACoH,MAAF,CAAS,EAAT,EAAa+9F,eAAb,CAAnB;;EACA,WAAKj7F,GAAL,CAASQ,KAAT,CAAeo8E,QAAf,GAA0B,KAAK58E,GAAL,CAASQ,KAAT,CAAeo8E,QAAf,IAA2B,EAArD;;EACA,UAAIue,WAAW,GAAG,KAAKn7F,GAAL,CAASQ,KAAT,CAAeo8E,QAAf,GAA0B9mF,CAAC,CAACoH,MAAF,CAASg+F,YAAT,EAAuB,KAAKl7F,GAAL,CAASQ,KAAT,CAAeo8E,QAAtC,CAA5C;;EAEA,WAAKwe,aAAL,CAAmBF,YAAnB;;EACAh9E,MAAAA,OAAO,CAAC/e,GAAR,CAAY,aAAZ,EAA2B/G,IAAI,CAACoE,MAAL,EAA3B;EACA,UAAIogF,QAAQ,GAAG,KAAKuH,aAAL,GAAqB,IAAI8O,aAAJ,CAAkB,KAAKjP,UAAL,CAAgB3I,OAAlC,EAA2C,KAAKjvE,IAAhD,CAApC;EAIA,UAAI6lF,WAAW,GAAG,KAAKA,WAAL,GAAmB,IAAIqH,WAAJ,CAAgB,KAAKltF,IAArB,CAArC;EAEA6lF,MAAAA,WAAW,CAACvP,OAAZ,CAAoB,KAAK2Y,SAAzB;EACApJ,MAAAA,WAAW,CAACvP,OAAZ,CAAoB,KAAKsB,UAAzB,EAfkB;EAmBlB;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEAluF,MAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,EAAe0/E,QAAf,EAAyBue,WAAzB,EA7BkB;;;EAgClB,UAAIve,QAAQ,CAACsX,UAAb,EAAyB;EACrB;EACAr5F,QAAAA,MAAM,CAACwjE,UAAP,CAAkB,YAAM;EACpBue,UAAAA,QAAQ,CAACsX,UAAT,GAAsB,KAAtB;EACH,SAFD,EAEG,KAFH;EAGH,OArCiB;;;EAyClBtX,MAAAA,QAAQ,CAAC5uE,EAAT,CAAY,OAAZ,EAAqBstF,OAArB,EAzCkB;;EA2ClB,WAAK/R,aAAL,GAAqBv8B,QAAQ,CAACj1D,IAAT,CAAc8J,EAAd,CAArB;EACA+6E,MAAAA,QAAQ,CAAC5uE,EAAT,CAAY,QAAZ,EAAsB,KAAKu7E,aAA3B;EAEA,WAAKgS,mBAAL,GAA2BC,cAAc,CAACzjG,IAAf,CAAoB6kF,QAApB,CAA3B;;EACA,WAAK2G,GAAL,CAAShB,UAAT,CAAoBv0E,EAApB,CAAuB,cAAvB,EAAuC,KAAKutF,mBAA5C;;EAEA,WAAKE,kBAAL,GAA0BC,aAAa,CAAC3jG,IAAd,CAAmBk6F,WAAnB,CAA1B;;EACA,WAAK1O,GAAL,CAAShB,UAAT,CAAoBv0E,EAApB,CAAuB,aAAvB,EAAsC,KAAKytF,kBAA3C;;EAEAxJ,MAAAA,WAAW,CAACjkF,EAAZ,CAAe,SAAf,EAA0B,KAAKu7E,aAA/B,EApDkB;EAwDlB;EACA;EACA;EACA;EAEA;;EACA,WAAKhG,GAAL,CAASoY,MAAT;EACA,WAAKC,mBAAL,GAA2B/5F,EAAE,CAACyM,MAAH,CAAUvW,IAAV,CAAe8J,EAAf,CAA3B;EACAhH,MAAAA,MAAM,CAAC6lD,gBAAP,CAAwB,QAAxB,EAAkC,KAAKk7C,mBAAvC,EAA4D,KAA5D,EAhEkB;;EAmElB,WAAK3K,SAAL;EACH;;;+BACQ4K,QAAQ;EAEb;EACA,UAAIA,MAAM,KAAK9Y,cAAX,IAA6B8Y,MAAM,CAAC3lG,SAAP,YAA4B6sF,cAA7D,EAA6E;EACzE,aAAK8X,SAAL,GAAiB,IAAIgB,MAAJ,CAAW,IAAX,CAAjB,CADyE;;EAIzE,aAAKlY,SAAL,CAAe9jE,GAAf,CAAmB,KAAKg7E,SAAL,CAAer3D,KAAlC;EACH;EAGJ;;;sCAEe;EACZ,UAAIigD,IAAI,GAAG,KAAKzjF,GAAhB;EACA,WAAKiP,UAAL,GAAkB,EAAlB,CAFY;;EAKZ,UAAI,WAAWw0E,IAAf,EAAqB;EACjB,YAAIqY,KAAK,GAAG,KAAKnuF,gBAAL,CAAsBd,GAAtB,CAA0B,OAA1B,CAAZ;;EACA,YAAIivF,KAAJ,EAAW;EACP,eAAKC,YAAL,CAAkBD,KAAlB,EAAyBrY,IAAI,CAACqY,KAA9B;EACH;EACJ,OAVW;;;EAaZ,UAAIt7F,KAAK,GAAG,KAAKmN,gBAAL,CAAsBd,GAAtB,CAA0B,OAA1B,EAAmC42E,IAAI,CAACjjF,KAAL,CAAWC,IAA9C,CAAZ;;EACA,UAAI,CAACD,KAAL,EAAY;EACRA,QAAAA,KAAK,GAAGuiF,cAAR;EACH;;EACD,WAAKiZ,QAAL,CAAcx7F,KAAd,EAjBY;;EAmBZ,WAAK,IAAI8U,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmuE,IAAI,CAACoB,MAAL,CAAYpsF,MAAhC,EAAwC6c,CAAC,EAAzC,EAA6C;EACzC,YAAIrd,GAAG,GAAGwrF,IAAI,CAACoB,MAAL,CAAYvvE,CAAZ,EAAe7U,IAAzB;EACA,YAAIw7F,IAAI,GAAG,KAAKtuF,gBAAL,CAAsBd,GAAtB,CAA0B,QAA1B,EAAoC5U,GAApC,CAAX;;EACA,YAAIgkG,IAAJ,EAAU;EACN,eAAKF,YAAL,CAAkBE,IAAlB,EAAwBxY,IAAI,CAACoB,MAAL,CAAYvvE,CAAZ,CAAxB;EACH;EAEJ,OA1BW;;;EA4BZ,WAAK,IAAI1U,CAAT,IAAc6iF,IAAd,EAAoB;EAChB,YAAI7iF,CAAC,KAAK,OAAV,EAAmB;EACnB,YAAIA,CAAC,KAAK,QAAV,EAAoB;;EACpB,YAAI9K,CAAC,CAAC6B,OAAF,CAAU8rF,IAAI,CAAC7iF,CAAD,CAAd,CAAJ,EAAwB;EACpB,eAAK,IAAI0U,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGmuE,IAAI,CAAC7iF,CAAD,CAAJ,CAAQnI,MAA5B,EAAoC6c,EAAC,EAArC,EAAyC;EACrC,gBAAIrd,IAAG,GAAGwrF,IAAI,CAAC7iF,CAAD,CAAJ,CAAQ0U,EAAR,EAAW7U,IAArB;;EACA,gBAAIw7F,KAAI,GAAG,KAAKtuF,gBAAL,CAAsBd,GAAtB,CAA0BjM,CAA1B,EAA6B3I,IAA7B,CAAX;;EACA,iBAAK8jG,YAAL,CAAkBE,KAAlB,EAAwBxY,IAAI,CAAC7iF,CAAD,CAAJ,CAAQ0U,EAAR,CAAxB;EACH;EACJ,SAND,MAMO;EACH,cAAI2mF,MAAI,GAAG,KAAKtuF,gBAAL,CAAsBd,GAAtB,CAA0BjM,CAA1B,CAAX;;EACA,cAAIq7F,MAAJ,EAAU;EACN,iBAAKF,YAAL,CAAkBE,MAAlB,EAAwBxY,IAAI,CAAC7iF,CAAD,CAA5B;EACH;EACJ;EACJ;EAEJ;;;;mCAEYs7F,KAAKzY,MAAM;EACpB;EACA,UAAIyY,GAAG,CAAChmG,SAAJ,YAAyB4vF,SAA7B,EAAwC;EAEpC,YAAIqW,QAAQ,GAAG,IAAID,GAAJ,CAAQ,IAAR,EAAczY,IAAd,CAAf;EACA,aAAKx0E,UAAL,CAAgB1Y,IAAhB,CAAqB4lG,QAArB;EACH;EAEJ;;;sCAEe;EAAA;;EACZ;EACA,WAAKtB,SAAL,CAAeuB,MAAf;EACA,WAAKntF,UAAL,CAAgBpY,OAAhB,CAAwB,UAAAqlG,GAAG,EAAI;EAC3B,QAAA,MAAI,CAACrB,SAAL,CAAer3D,KAAf,CAAqB3jB,GAArB,CAAyBq8E,GAAG,CAAC14D,KAA7B;;EACA04D,QAAAA,GAAG,CAACnuF,IAAJ;EACH,OAHD;EAIH;;;6BAEM;EACH,WAAK8sF,SAAL,CAAewB,WAAf;EACA,WAAKC,aAAL;EACA,WAAK/Y,GAAL,CAAST,WAAT;EAEH;;;mCAGYl5E,OAAO;EAChB,UAAIsyF,GAAG,GAAG,KAAKK,aAAL,CAAmB3yF,KAAnB,EAA0B,CAA1B,CAAV;EACA,aAAO,CAACsyF,GAAD,GAAO,IAAP,GAAcA,GAArB;EACH;;;oCACatyF,OAAO;EACjB,UAAIjL,GAAG,GAAG,EAAV;EACA,UAAIvD,MAAM,GAAG,IAAb;EACA,WAAK6T,UAAL,CAAgBpY,OAAhB,CAAwB,UAAAqlG,GAAG,EAAI;EAC3B9gG,QAAAA,MAAM,GAAG,IAAT;;EACA,aAAK,IAAInD,GAAT,IAAgB2R,KAAhB,EAAuB;EACnB,cAAI9T,CAAC,CAACsE,QAAF,CAAW8hG,GAAG,CAACjkG,GAAD,CAAd,KAAwBnC,CAAC,CAACsE,QAAF,CAAWwP,KAAK,CAAC3R,GAAD,CAAhB,CAA5B,EAAoD;EAChDmD,YAAAA,MAAM,GAAGA,MAAM,IAAI8gG,GAAG,CAACjkG,GAAD,CAAH,CAASqX,WAAT,MAA0B1F,KAAK,CAAC3R,GAAD,CAAL,CAAWqX,WAAX,EAA7C;EACH,WAFD,MAEO;EACHlU,YAAAA,MAAM,GAAGA,MAAM,IAAI8gG,GAAG,CAACjkG,GAAD,CAAH,IAAY2R,KAAK,CAAC3R,GAAD,CAApC;EACH;EACJ;;EACD,YAAImD,MAAJ,EAAY;EACRuD,UAAAA,GAAG,CAACpI,IAAJ,CAAS2lG,GAAT;EACH;EACJ,OAZD;EAcA,aAAOv9F,GAAP;EAEH;;;kCAEW;EAAA;;EACR67F,MAAAA,QAAQ,GAAG,kBAAChyF,CAAD,EAAO;EACd,YAAI,MAAI,CAACqyF,SAAT,EAAoB;EAChB,UAAA,MAAI,CAACA,SAAL,CAAet0D,IAAf,CAAoB;EAAE9lC,YAAAA,IAAI,EAAE,cAAR;EAAwBP,YAAAA,IAAI,EAAEsI,CAAC,CAACtI;EAAhC,WAApB;EACH;;EACD,QAAA,MAAI,CAAC6N,IAAL;EACH,OALD;;EAMA,WAAKC,EAAL,CAAQ,cAAR,EAAwBwsF,QAAxB;EAEA,UAAMgC,OAAO,GAAG,MAAhB;;EAEAnC,MAAAA,cAAc,GAAG,wBAAC7xF,CAAD,EAAO;EAEpB,YAAIi0F,IAAI,GAAG,MAAI,CAACC,YAAL,CAAkB;EAAEhjG,UAAAA,IAAI,EAAE8iG;EAAR,SAAlB,CAAX;;EAFoB,uBAGah0F,CAAC,CAACmB,KAHf;EAAA,YAGL+J,CAHK,YAGdw+E,OAHc;EAAA,YAGOv+E,CAHP,YAGFw+E,OAHE;;EAIpB,YAAIsK,IAAI,KAAK,IAAb,EAAmB;EACf,cAAI1T,MAAM,GAAGvgF,CAAC,CAACtI,IAAF,CAAOy8F,MAAP,GAAgBn0F,CAAC,CAACtI,IAAF,CAAOyS,OAAP,CAAenK,CAAC,CAACtI,IAAF,CAAOy8F,MAAtB,CAAhB,GAAgD,EAA7D;;EACAF,UAAAA,IAAI,CAACG,IAAL,CAAU;EACNC,YAAAA,SAAS,EAAE/mG,CAAC,CAACoH,MAAF,CAAS;EAChB0rF,cAAAA,KAAK,EAAEG;EADS,aAAT,EAERvgF,CAAC,CAACtI,IAFM,CADL;EAINZ,YAAAA,GAAG,EAAE;EACDoU,cAAAA,CAAC,EAADA,CADC;EAEDC,cAAAA,CAAC,EAADA;EAFC;EAJC,WAAV;EASH;EACJ,OAhBD;;EAkBA2mF,MAAAA,cAAc,GAAG,wBAAC9xF,CAAD,EAAO;EAEpB,YAAIi0F,IAAI,GAAG,MAAI,CAACC,YAAL,CAAkB;EAAEhjG,UAAAA,IAAI,EAAE8iG;EAAR,SAAlB,CAAX;;EACA,YAAIC,IAAI,KAAK,IAAb,EAAmB;EACfA,UAAAA,IAAI,CAACK,IAAL;EACH;EACJ,OAND;;EAOAvC,MAAAA,cAAc,GAAG,wBAAC/xF,CAAD,EAAO;EAEpB,YAAIi0F,IAAI,GAAG,MAAI,CAACC,YAAL,CAAkB;EAAEhjG,UAAAA,IAAI,EAAE8iG;EAAR,SAAlB,CAAX;;EAFoB,wBAGah0F,CAAC,CAACmB,KAHf;EAAA,YAGL+J,CAHK,aAGdw+E,OAHc;EAAA,YAGOv+E,CAHP,aAGFw+E,OAHE;;EAIpB,YAAIpJ,MAAM,GAAGvgF,CAAC,CAACtI,IAAF,CAAOy8F,MAAP,GAAgBn0F,CAAC,CAACtI,IAAF,CAAOyS,OAAP,CAAenK,CAAC,CAACtI,IAAF,CAAOy8F,MAAtB,CAAhB,GAAgD,EAA7D;;EACA,YAAIF,IAAI,KAAK,IAAb,EAAmB;EACfA,UAAAA,IAAI,CAACG,IAAL,CAAU;EACNC,YAAAA,SAAS,EAAE/mG,CAAC,CAACoH,MAAF,CAAS;EAChB0rF,cAAAA,KAAK,EAAEG;EADS,aAAT,EAERvgF,CAAC,CAACtI,IAFM,CADL;EAINZ,YAAAA,GAAG,EAAE;EACDoU,cAAAA,CAAC,EAADA,CADC;EAEDC,cAAAA,CAAC,EAADA;EAFC;EAJC,WAAV;EASH;EACJ,OAhBD;;EAiBA,WAAK3F,EAAL,CAAQ,SAAR,EAAmBqsF,cAAnB;EACA,WAAKrsF,EAAL,CAAQ,SAAR,EAAmBssF,cAAnB;EACA,WAAKtsF,EAAL,CAAQ,SAAR,EAAmBusF,cAAnB;EAEH;;;0CAEmBwC,cAAc;EAE9B,UAAIC,OAAO,GAAG,IAAd;EAEA,WAAKvC,IAAL,GAAY,cAAcA,IAAI,EAA9B;EAEA,WAAKjxF,EAAL,GAAUyzF,CAAC,CAACrzF,KAAF,CAAQmzF,YAAR,CAAV;EAEA,WAAK/wF,KAAL,GAAa,KAAKxC,EAAL,CAAQ0zF,WAArB;EACA,WAAKjxF,MAAL,GAAc,KAAKzC,EAAL,CAAQ2zF,YAAtB;EAEAH,MAAAA,OAAO,GAAGC,CAAC,CAAC9wF,UAAF,CAAa,KAAKH,KAAlB,EAAyB,KAAKC,MAA9B,EAAsC,KAAKwuF,IAA3C,CAAV;EAEA,WAAKruF,IAAL,GAAY4wF,OAAO,CAAC5wF,IAApB;EACA,WAAKG,SAAL,GAAiBywF,OAAO,CAACzwF,SAAzB;EACA,WAAKC,OAAL,GAAewwF,OAAO,CAACxwF,OAAvB;EAEA,WAAKhD,EAAL,CAAQ2xE,SAAR,GAAoB,EAApB;EACA,WAAK3xE,EAAL,CAAQiD,WAAR,CAAoB,KAAKL,IAAzB;EAGA,WAAKT,EAAL,GAAU,YAAY,KAAK8uF,IAA3B;EACA,WAAKjxF,EAAL,CAAQ0C,YAAR,CAAqB,UAArB,EAAiC,KAAKP,EAAtC;EACA,WAAKnC,EAAL,CAAQ0C,YAAR,CAAqB,kBAArB,EAAyC,KAAzC;EACH;;;gCAEShM,MAAMF,KAAK;EAEjB,aAAOkH,SAAS,CAACpO,IAAV,CAAe,IAAf,EAAqBoH,IAArB,EAA2BF,GAA3B,CAAP;EACH;;;oCAEak7F,cAAc;EACxB,UAAI3X,GAAG,GAAG,KAAKA,GAAf,CADwB;;EAIxB,UAAIS,UAAU,GAAG,KAAKA,UAAL,GAAkBT,GAAG,CAACp3E,UAAJ,CAAeyvE,QAAf,CAAnC,CAJwB;;EAMxB,UAAIyf,SAAS,GAAG,KAAKA,SAAL,GAAiB9X,GAAG,CAACp3E,UAAJ,CAAe0vE,SAAf,CAAjC,CANwB;EASxB;;EAGA,WAAK8H,SAAL,GAAiBJ,GAAG,CAACv9C,QAAJ,CAAa;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAb,CAAjB;EACAsqF,MAAAA,UAAU,CAACoZ,SAAX,CAAqB,KAAKzZ,SAA1B;EACAK,MAAAA,UAAU,CAAC9iC,OAAX,CAAmB,KAAKl1C,KAAxB,EAA+B,KAAKC,MAApC;EACA+3E,MAAAA,UAAU,CAACqZ,aAAX,CAAyB,QAAzB,EAfwB;;EAkBxBrZ,MAAAA,UAAU,CAACsZ,WAAX,CAAuBpC,YAAvB;EACAlX,MAAAA,UAAU,CAAC0B,OAAX,CAAmB,aAAnB,EAnBwB;EAqBxB;;EACA,WAAK8E,UAAL,GAAkBjH,GAAG,CAACv9C,QAAJ,CAAa;EAAEtsC,QAAAA,IAAI,EAAE,aAAR;EAAuByzC,QAAAA,KAAK,EAAE;EAA9B,OAAb,CAAlB;EAEAkuD,MAAAA,SAAS,CAAC+B,SAAV,CAAoB,KAAK5S,UAAzB;EACA6Q,MAAAA,SAAS,CAACn6C,OAAV,CAAkB,KAAKl1C,KAAvB,EAA8B,KAAKC,MAAnC,EAzBwB;;EA2BxBovF,MAAAA,SAAS,CAACiC,WAAV,CAAsBpC,YAAtB,EA3BwB;;EA6BxBG,MAAAA,SAAS,CAACkC,mBAAV;;EAGA,UAAI,KAAK3C,SAAT,EAAoB;EAChB,aAAKruF,SAAL,CAAeixF,WAAf,CAA2B,KAAK5C,SAAhC;EACA,aAAKA,SAAL,GAAiB,IAAjB;EACH;;EAED,WAAKruF,SAAL,CAAeE,WAAf,CAA2B,KAAK+gC,QAAL,CAAciR,UAAzC;EAGA,WAAKm8C,SAAL,GAAiB,KAAKptD,QAAL,CAAciR,UAA/B;EAEH;;;+BACQ;EACL,WAAKzyC,KAAL,GAAa,KAAKxC,EAAL,CAAQ0zF,WAArB;EACA,WAAKjxF,MAAL,GAAc,KAAKzC,EAAL,CAAQ2zF,YAAtB;EACA,WAAK5Z,GAAL,CAASj1E,MAAT,CAAgB,KAAKtC,KAArB,EAA4B,KAAKC,MAAjC,EAAyC,KAAKjM,GAAL,CAASQ,KAAT,CAAeo8E,QAAf,CAAwBM,SAAjE;EACH;;;;+BAGQ/6E,KAAK;EACV,UAAIwK,MAAM,GAAG8wF,MAAM,CAACtvF,cAAP,EAAb;;EACA,UAAIuvF,MAAM,GAAG,KAAKhB,YAAL,CAAkB;EAAEhjG,QAAAA,IAAI,EAAE;EAAR,OAAlB,CAAb;;EACA,UAAIgkG,MAAJ,EAAY;EACR/wF,QAAAA,MAAM,GAAG+wF,MAAM,CAAC7wF,GAAP,EAAT;EACH;;EACD,UAAI1K,GAAG,IAAI5E,SAAX,EAAsB;EAClB,eAAOoP,MAAM,CAACxK,GAAG,GAAGwK,MAAM,CAAClU,MAAd,CAAN,IAA+B,MAAtC;EACH;EACD,aAAOkU,MAAP;EACH;;;;4BAGK3M,KAAKE,MAAM;EAEb,OAACF,GAAD,KAASA,GAAG,GAAG,EAAf,EAFa;;EAKblK,MAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,EAAe,KAAK8C,GAApB,EAAyBA,GAAzB,EALa;;;EAOb,UAAIE,IAAJ,EAAU;EACN,aAAKA,IAAL,GAAYA,IAAZ,CADM;;EAGN,aAAKgH,SAAL,GAAiB,KAAKoiF,SAAL,CAAe,KAAKppF,IAApB,EAA0B,EAA1B,CAAjB;EACH;EAGD,WAAK49C,OAAL,GAda;;EAiBb,WAAKylC,GAAL,GAAW,IAAInB,WAAJ,CAAgB,KAAKp2E,KAArB,EAA4B,KAAKC,MAAjC,CAAX,CAjBa;;EAmBb,WAAKuhC,QAAL,GAAgB,KAAK+1C,GAAL,CAAShB,UAAT,CAAoB/0C,QAApC;EAEA,WAAKuU,IAAL,GArBa;;EAwBb,UAAIvhD,KAAK,GAAG,IAAZ;;EACA,UAAI,KAAKR,GAAL,CAASQ,KAAT,CAAeC,IAAf,IAAuB,KAA3B,EAAkC;EAC9BD,QAAAA,KAAK,GAAG,IAAIovF,WAAJ,CAAgB,IAAhB,CAAR;EACH;;EACD,WAAKoM,QAAL,CAAcx7F,KAAd,EA5Ba;;EA+Bb,WAAKyO,UAAL,GAAkB,EAAlB;EAEA,WAAK+rF,aAAL;EAEA,WAAKjtF,IAAL;EAEH;EACD;;;;;;;;;gCAMU7N,MAAMy9F,aAAa;EAEzB;EACA;EACA;EACA;EACA;EAEA,UAAIz9F,IAAJ,EAAU;EACN,aAAKA,IAAL,GAAYA,IAAZ,CADM;;EAGN,aAAKgH,SAAL,GAAiB,KAAKoiF,SAAL,CAAe,KAAKppF,IAApB,EAA0B,KAAKF,GAA/B,CAAjB;EACH;EACD,WAAK66F,SAAL,CAAe/P,SAAf;EACA,WAAK77E,UAAL,CAAgBpY,OAAhB,CAAwB,UAAAqlG,GAAG,EAAI;EAC3BA,QAAAA,GAAG,CAACpR,SAAJ;EACH,OAFD;EAGA,WAAKvkD,IAAL,CAAU;EAAE9lC,QAAAA,IAAI,EAAE;EAAR,OAAV;EAEA,WAAK8iF,GAAL,CAAST,WAAT;EACH;;;gCACS;EACN;EACA,WAAKhlC,OAAL;EACA,WAAKvX,IAAL,CAAU;EAAE9lC,QAAAA,IAAI,EAAE;EAAR,OAAV;EACH;;;gCAES;EAEN;EACA,WAAKgN,GAAL,CAAS,SAAT,EAAoB4sF,cAApB;EACA,WAAK5sF,GAAL,CAAS,SAAT,EAAoB6sF,cAApB;EACA,WAAK7sF,GAAL,CAAS,SAAT,EAAoB8sF,cAApB,EALM;;EAQN,WAAKM,SAAL,CAAe/8C,OAAf,GARM;;EAUN,WAAK7uC,UAAL,CAAgBpY,OAAhB,CAAwB,UAAAqlG,GAAG,EAAI;EAC3BA,QAAAA,GAAG,CAACp+C,OAAJ;EACH,OAFD;EAGA,WAAK7uC,UAAL,GAAkB,EAAlB,CAbM;;EAeN,WAAKs0E,GAAL,CAASf,UAAT,GAfM;;EAkBN,WAAKh1C,QAAL,CAAcsQ,OAAd,GAlBM;;EAsBN,WAAKqmC,aAAL,CAAmB12E,GAAnB,CAAuB,OAAvB,EAAgC6tF,OAAhC;EACA,WAAKnX,aAAL,CAAmB12E,GAAnB,CAAuB,QAAvB,EAAiC,KAAK87E,aAAtC;;EAEA,WAAKhG,GAAL,CAAShB,UAAT,CAAoB90E,GAApB,CAAwB,cAAxB,EAAwC,KAAK8tF,mBAA7C;;EACA,WAAKA,mBAAL,GAA2B,IAA3B;;EAEA,WAAKhY,GAAL,CAAShB,UAAT,CAAoB90E,GAApB,CAAwB,aAAxB,EAAuC,KAAKguF,kBAA5C;;EACA,WAAKA,kBAAL,GAA0B,IAA1B;EAEA,WAAKxJ,WAAL,CAAiBxkF,GAAjB,CAAqB,SAArB,EAAgC,KAAK87E,aAArC;EAEA,WAAKA,aAAL,GAAqB,IAArB;EAIA1uF,MAAAA,MAAM,CAACopD,mBAAP,CAA2B,QAA3B,EAAqC,KAAK23C,mBAA1C,EAA+D,KAA/D;EACA,WAAKA,mBAAL,GAA2B,IAA3B;EAEA,WAAK3J,WAAL,CAAiBn0C,OAAjB;EAEA,WAAKqmC,aAAL,CAAmBrmC,OAAnB;EAEA,WAAKylC,GAAL,CAASzlC,OAAT;EAEA,WAAKylC,GAAL,GAAW,IAAX;EACA,WAAK/1C,QAAL,GAAgB,IAAhB;EACA,WAAKqtD,SAAL,GAAiB,IAAjB,CAhDM;EAuDT;;;;IAngBiB3iF;;EAugBtB,SAASojF,OAAT,GAAmB;EACf,OAAKpH,UAAL,GAAkB,KAAlB;EACH;;EAED,SAASlnC,QAAT,CAAkBxkD,CAAlB,EAAqB;EACjB,OAAK+6E,GAAL,CAAST,WAAT;EACH;;EAED,SAAS0Y,cAAT,GAA0B;EACtB,MAAI,KAAK9G,SAAL,CAAe3oE,MAAf,CAAsB,KAAKZ,MAAL,CAAYpf,QAAlC,KAA+C,KAAK4oF,KAAL,KAAe,KAAKxpE,MAAL,CAAY3gB,IAA9E,EAAoF;EAChF;EACH;;EACD,OAAKozF,SAAL;EACA,OAAKt2D,MAAL;EACH;;EAED,SAASo0D,aAAT,GAAyB;EACrB,OAAKp0D,MAAL;EACH;;MCniBKu2D;;;;;EACF,eAAY7a,IAAZ,EAAkB;EAAA;;EAAA;;EACd,6EAAMA,IAAN;EAEA,UAAKiY,eAAL,GAAuB;EACnB/G,MAAAA,UAAU,EAAE,KADO;EACM;EACzBjX,MAAAA,QAAQ,EAAE,IAFS;EAEK;EACxBC,MAAAA,SAAS,EAAE,IAHQ;EAGK;EACxB8H,MAAAA,QAAQ,EAAE,GAJS;EAII;EAEvB7zD,MAAAA,QAAQ,EAAE,IANS;EAMI;EACvBgsD,MAAAA,WAAW,EAAE,IAPM;EAOI;EACvB3qB,MAAAA,WAAW,EAAE,GARM;EAQI;EACvB0gC,MAAAA,OAAO,EAAE,GATU;EASK;EACxBC,MAAAA,OAAO,EAAE,GAVU;EAUK;EAGxBK,MAAAA,aAAa,EAAE,IAbI;EAcnBM,MAAAA,SAAS,EAAE,KAdQ;EAenBM,MAAAA,UAAU,EAAE,KAfO;EAgBnBD,MAAAA,eAAe,EAAE,GAhBE;EAmBnBz0E,MAAAA,KAAK,EAAE,EAnBY;EAmBL;EACdukE,MAAAA,IAAI,EAAE,EApBa;EAoBJ;EACf6Z,MAAAA,KAAK,EAAE,CArBY;;EAAA,KAAvB;EAuBA9a,IAAAA,IAAI,CAACjhC,IAAL,CAAU,MAAKk5C,eAAf;;EACA;;EA3Bc;EA6BjB;;;IA9BarL;;MCHZmO;;;;;EACF,0BAAY/9F,GAAZ,EAAiBkH,YAAjB,EAA4B;EAAA;;EAAA;;EACxB,wFAAMlH,GAAN,EAAWkH,YAAX;EACA,UAAKe,KAAL,GAAajI,GAAG,CAACiI,KAAJ,IAAa,IAA1B;EACA,UAAKgE,MAAL,GAAc,CAAd;EAHwB;EAI3B;;;;uCAEgB;EAAA;;EAEb,UAAI+xF,QAAQ,GAAG,CAAf;EAAA,UAAkBC,SAAS,GAAG,CAA9B;EACA,UAAIj+F,GAAG,GAAG,KAAKiB,IAAf;;EACA,UAAI,KAAK4R,QAAL,CAAc,KAAK5R,IAAL,CAAUoQ,IAAV,CAAepF,MAA7B,EAAqC,KAAKiyF,aAAL,GAAqB,CAArB,CAArC,CAAJ,EAAmE;EAC/D,aAAKA,aAAL,GAAqBrnG,OAArB,CAA6B,UAAA2D,IAAI,EAAI;EACjC,cAAI0H,GAAG,GAAG1H,IAAI,CAACmY,OAAL,CAAa,MAAI,CAAC1R,IAAL,CAAUoQ,IAAV,CAAepF,MAA5B,CAAV;EACA+xF,UAAAA,QAAQ,GAAG5lG,IAAI,CAACsC,GAAL,CAASsjG,QAAT,EAAmB97F,GAAnB,CAAX;EACA+7F,UAAAA,SAAS,GAAG7lG,IAAI,CAACiD,GAAL,CAAS4iG,SAAT,EAAoB/7F,GAApB,CAAZ;EACA1H,UAAAA,IAAI,CAAC2jG,WAAL,GAAmB,MAAI,CAACl9F,IAAL,CAAUoQ,IAAV,CAAepF,MAAlC;EACAzR,UAAAA,IAAI,CAAC4jG,WAAL,GAAmBl8F,GAAnB;EACH,SAND;EAQH;;EACD,WAAKg8F,aAAL,GAAqBrnG,OAArB,CAA6B,UAAC2D,IAAD,EAAO7B,CAAP,EAAa;EACtC,YAAI,CAAC,CAAC6B,IAAI,CAAC2jG,WAAX,EAAwB;EACpB3jG,UAAAA,IAAI,CAACyR,MAAL,GAAc5J,QAAQ,CAACrC,GAAG,CAACu+E,SAAJ,IAAiB,CAAC/jF,IAAI,CAAC4jG,WAAL,GAAmBH,SAApB,KAAkCD,QAAQ,GAAGC,SAA7C,CAAjB,IAA4EA,SAA7E,CAAtB;EACH,SAFD,MAEO;EACHzjG,UAAAA,IAAI,CAACyR,MAAL,GAAcjM,GAAG,CAACqR,IAAJ,CAASpF,MAAvB;EACH;;EAEDzR,QAAAA,IAAI,CAAC2nB,KAAL,GAAa,MAAI,CAACgvE,QAAL,CAAcx4F,CAAd,CAAb;EACH,OARD;;EASA,UAAIqH,GAAG,CAACq+F,UAAR,EAAoB;EAChB,aAAKH,aAAL,GAAqBh6F,IAArB,CAA0B,UAAC6D,CAAD,EAAIG,CAAJ,EAAU;EAChC,cAAIlI,GAAG,CAACq+F,UAAJ,IAAkB,KAAtB,EAA6B;EACzB,mBAAOt2F,CAAC,CAACkE,MAAF,GAAW/D,CAAC,CAAC+D,MAApB;EACH,WAFD,MAEO;EACH,mBAAO/D,CAAC,CAAC+D,MAAF,GAAWlE,CAAC,CAACkE,MAApB;EACH;EACJ,SAND,EADgB;;EAShB,aAAKiyF,aAAL,GAAqBrnG,OAArB,CAA6B,UAAC2M,CAAD,EAAI7K,CAAJ,EAAU;EACnC6K,UAAAA,CAAC,CAACoP,KAAF,GAAUja,CAAV;EACH,SAFD;EAGH;;EACD;EACH;;;kCACW8Q,IAAI;EACZ,WAAK0nF,QAAL,GAAgB1nF,EAAE,IAAI,YAAY,EAAlC;EACH;;;;IA/CwB4G;;ECI7B;;;;;;;MAQMiuF;;;;;EACF,uBAAYtb,IAAZ,EAAkB;EAAA;;EAAA;;EACd,qFAAMA,IAAN,GADc;EAId;;EACA,UAAK/vE,CAAL,GAAS,CAAT;EAEA,UAAK48E,QAAL,GAAgB,IAAhB;EAEA,UAAKrsD,KAAL,CAAW9pC,IAAX,GAAkB,wBAAlB;EATc;EAUjB;;;;qCAEcsG,KAAK;EAChB,UAAIQ,KAAK,GAAG;EACR+9F,QAAAA,KAAK,EAAE;EACHt2F,UAAAA,KAAK,EAAE;EADJ;EADC,OAAZ,CADgB;;EAQhB,UAAI,CAACnS,CAAC,CAAC6B,OAAF,CAAU6I,KAAK,CAAC+9F,KAAN,CAAYt2F,KAAtB,CAAL,EAAmC;EAC/BzH,QAAAA,KAAK,CAAC+9F,KAAN,CAAYt2F,KAAZ,GAAoB,CAACzH,KAAK,CAAC+9F,KAAN,CAAYt2F,KAAb,CAApB;EACH;;EACD,UAAIjI,GAAG,CAAC6kF,MAAR,EAAgB;EACZ;EACA,YAAI2Z,IAAI,GAAG,EAAX;;EACA1oG,QAAAA,CAAC,CAACiD,IAAF,CAAOiH,GAAG,CAAC6kF,MAAX,EAAmB,UAAUA,MAAV,EAAkB;EACjC,cAAIA,MAAM,CAAC58E,KAAX,EAAkB;EACd;EACA,gBAAIw2F,GAAG,GAAG5Z,MAAM,CAAC58E,KAAjB;;EACA,gBAAI,CAACnS,CAAC,CAAC6B,OAAF,CAAU8mG,GAAV,CAAL,EAAqB;EACjBA,cAAAA,GAAG,GAAG,CAACA,GAAD,CAAN;EACH;EACDD,YAAAA,IAAI,GAAGA,IAAI,CAAC/nG,MAAL,CAAYgoG,GAAZ,CAAP;EACH;EACJ,SATD;EAUH;EACDj+F,MAAAA,KAAK,CAAC+9F,KAAN,CAAYt2F,KAAZ,GAAoBzH,KAAK,CAAC+9F,KAAN,CAAYt2F,KAAZ,CAAkBxR,MAAlB,CAAyB+nG,IAAzB,CAApB;EAEAx+F,MAAAA,GAAG,CAACQ,KAAJ,GAAY1K,CAAC,CAACoH,MAAF,CAAS,IAAT,EAAesD,KAAf,EAAsBR,GAAG,CAACQ,KAA1B,CAAZ;EAEA,aAAOR,GAAP;EACH;;;6BAEM;EACH,WAAKqlF,WAAL,GADG;;EAGH,WAAKqZ,aAAL,GAAqB,IAAIX,cAAJ,CAAmB,EAAnB,EAAuB,KAAK9a,KAAL,CAAW/7E,SAAlC,CAArB;EACA,WAAKw3F,aAAL,CAAmBC,WAAnB,CAA+B,KAAK1b,KAAL,CAAWkO,QAAX,CAAoBp5F,IAApB,CAAyB,KAAKkrF,KAA9B,CAA/B;EAEA,WAAK+N,SAAL;EACA,WAAKa,cAAL;EACH;;;sCACe;EACZ,UAAI+M,UAAU,GAAG;EAAA,OAAjB;EAIA,WAAKF,aAAL,CAAmBp5F,UAAnB,CAA8BzO,OAA9B,CAAsC,UAAC2D,IAAD,EAAO7B,CAAP,EAAa;EAC/C6B,QAAAA,IAAI,CAAC2H,GAAL,GAAWxJ,CAAX;EACAimG,QAAAA,UAAU,CAACroG,IAAX,CAAgBiE,IAAhB;EACH,OAHD,EALY;EAUZ;EAEA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;;EACA,aAAOokG,UAAP;EACH;;;oCACa;EAEV,WAAK1b,QAAL;EACA,aAAO,KAAKA,QAAZ;EACH;EAGD;EAEA;EAEA;EAEA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EACA;EAKA;EAEA;EACA;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAGA;EACA;EAGA;;;;uCAEiBp3B,KAAK;EAClB,UAAIi4B,WAAW,GAAG,KAAKd,KAAL,CAAWe,UAA7B;EACA,UAAI3I,OAAO,GAAG0I,WAAW,CAAC1I,OAA1B;EACA,UAAIwjB,SAAS,GAAG,IAAI9gF,OAAJ,EAAhB;;EACAs9D,MAAAA,OAAO,CAAChtB,iBAAR,CAA0BwwC,SAA1B;;EACA,UAAIxwE,KAAK,GAAG,IAAItQ,OAAJ,EAAZ;EACAsQ,MAAAA,KAAK,CAACvO,YAAN,CAAmB++E,SAAnB,EAA8B/yC,GAA9B;EACA,aAAOz9B,KAAP;EACAnQ,MAAAA,OAAO,CAAC/e,GAAR,CAAY,aAAZ,EAA2B0/F,SAA3B,EAAsC/yC,GAAtC,EAA2Cz9B,KAA3C;EACH;;;kCAEW;EACR,WAAKqwE,aAAL,CAAmB5T,SAAnB;EAEA,WAAK4T,aAAL,CAAmBC,WAAnB,CAA+B,KAAK1b,KAAL,CAAWkO,QAAX,CAAoBp5F,IAApB,CAAyB,KAAKkrF,KAA9B,CAA/B;EACA,WAAKyb,aAAL,CAAmBI,YAAnB,CAAgC,KAAK7b,KAAL,CAAW/7E,SAA3C,EAJQ;EAOX;;;;IApNqB67E;;MCTpBgc;;;;;EACF,mBAAY/b,IAAZ,EAAkB;EAAA;;EAAA;;EACd,iFAAMA,IAAN;EAGA,UAAKiY,eAAL,GAAuB;EACnB/G,MAAAA,UAAU,EAAE,KADO;EACM;EACzBjX,MAAAA,QAAQ,EAAE,IAFS;EAEK;EACxBC,MAAAA,SAAS,EAAE,IAHQ;EAGK;EACxB8H,MAAAA,QAAQ,EAAE,GAJS;EAII;EAEvB7zD,MAAAA,QAAQ,EAAE,IANS;EAMI;EACvBgsD,MAAAA,WAAW,EAAE,IAPM;EAOI;EACvB3qB,MAAAA,WAAW,EAAE,GARM;EAQI;EACvB0gC,MAAAA,OAAO,EAAE,GATU;EASK;EACxBC,MAAAA,OAAO,EAAE,GAVU;EAUK;EAExBzzE,MAAAA,KAAK,EAAE,EAZY;EAYL;EACdukE,MAAAA,IAAI,EAAE,CAba;EAaL;EACd6Z,MAAAA,KAAK,EAAE,CAdY;;EAAA,KAAvB;EAgBA9a,IAAAA,IAAI,CAACjhC,IAAL,CAAU,MAAKk5C,eAAf;;EACA;;EArBc;EAuBjB;;;IAxBiBqD;;MCAhB5O;;;;;EACF,gBAAYsP,OAAZ,EAAqBh/F,GAArB,EAA0B;EAAA;;EAAA;;EACtB,8EAAMg/F,OAAO,CAACjZ,YAAd;EAEA,UAAKrsF,IAAL,GAAY,MAAZ;EAEA,UAAKslG,OAAL,GAAeA,OAAf;EAEA,UAAKxtF,OAAL,GAAe,IAAf;EAEA,UAAKw3E,QAAL,GAAgB;EACZx3E,MAAAA,OAAO,EAAE,CADG;EAEZiuB,MAAAA,SAAS,EAAE,CAFC;EAEE;EACdgnD,MAAAA,UAAU,EAAE,CAHA;EAGG;EACf/rB,MAAAA,WAAW,EAAE,MAJD;EAKZ5wD,MAAAA,MAAM,EAAE,CALI;;EAAA,KAAhB;EAQA,UAAK2I,KAAL,GAAa;EACTjB,MAAAA,OAAO,EAAE,CADA;EAETy1E,MAAAA,SAAS,EAAE,MAFF;EAGT5sB,MAAAA,QAAQ,EAAE,EAHD;EAIT1sC,MAAAA,QAAQ,EAAE,CAJD;EAKTtlB,MAAAA,MAAM,EAAE,IALC;EAMTyB,MAAAA,MAAM,EAAE,CANC;EAOTm1F,MAAAA,SAAS,EAAE,CAPF;EAQT/kC,MAAAA,SAAS,EAAE,QARF;EAQkB;EAC3BgtB,MAAAA,aAAa,EAAE,QATN;EASiB;EAC1BvJ,MAAAA,UAAU,EAAE;EAVH,KAAb,CAjBsB;;EA8BtB,UAAKzmF,MAAL,GAAc,IAAd,CA9BsB;EAgCtB;;EACA,UAAK0O,OAAL,GAAe,IAAf,CAjCsB;;EAoCtB,UAAK6jF,QAAL,GAAgB,IAAhB,CApCsB;;EAuCtB,UAAKE,YAAL,GAAoB,IAApB;;EAEA7zF,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB;;EAEA,UAAKmpF,aAAL,GAAqB,MAAKpD,YAAL,CAAkBmZ,gBAAlB,CAAmCl/F,GAAG,CAACiI,KAAvC,CAArB,CA3CsB;;EA8CtB,UAAKu7B,KAAL,CAAW4gB,OAAX,GAAqB,KAArB;;EAEA,UAAKrC,IAAL;;EAhDsB;EAkDzB;;;;iCACU7/C,KAAK;EACZ,WAAKshC,KAAL,CAAW4gB,OAAX,GAAqB,CAAC,CAACliD,GAAvB;EACH;;;gCACS5C,KAAK;EACX,WAAKsG,OAAL,GAAetG,GAAf;EACH;;;iCACUwsD,KAAK;EACZ,WAAK29B,QAAL,GAAgB39B,GAAhB;EACH;;;qCAEcA,KAAK;EAChB,WAAK69B,YAAL,GAAoB79B,GAApB;EACH;;;6BAGM;EAEH,WAAKw9B,SAAL;EACH;;;kCACW;EAAA;;EAER,WAAKrhF,KAAL,GAAa,KAAKkhF,aAAL,CAAmBlhF,KAAhC;EACA,WAAKrI,WAAL,GAAmB,KAAKupF,aAAL,CAAmBvpF,WAAtC;EAEA,WAAK2qF,kBAAL,GAA0B,EAA1B;EACA,WAAKI,aAAL,GAAqB,EAArB;EACA,WAAK/qF,WAAL,CAAiB/I,OAAjB,CAAyB,UAACqL,GAAD,EAAMvJ,CAAN,EAAY;EACjC,QAAA,MAAI,CAAC4xF,kBAAL,CAAwB5xF,CAAxB,IAA6B,MAAI,CAACiyF,cAAL,CAAoB1oF,GAApB,EAAyBvJ,CAAzB,CAA7B;EACH,OAFD;EAIH;;;qCACcuJ,KAAKvJ,GAAG;EACnB,UAAIkyF,GAAJ;;EACA,UAAI/0F,CAAC,CAAC8D,UAAF,CAAa,KAAK6Y,KAAL,CAAWpK,MAAxB,CAAJ,EAAqC;EACjCwiF,QAAAA,GAAG,GAAG,KAAKp4E,KAAL,CAAWpK,MAAX,CAAkBnN,KAAlB,CAAwB,IAAxB,EAA8BW,SAA9B,CAAN;EAEH,OAHD,MAGO;EACH,YAAI,KAAK4W,KAAL,CAAWwsF,SAAX,GAAuB,CAA3B,EAA8B;EAC1B,cAAI/8F,GAAG,CAACzJ,MAAJ,GAAa,KAAKga,KAAL,CAAWwsF,SAA5B,EAAuC;EACnCpU,YAAAA,GAAG,GAAG,EAAN;EACA,gBAAIlyF,EAAC,GAAG,CAAR;EACA,gBAAIgM,CAAC,GAAGzC,GAAG,CAACzJ,MAAZ;;EACA,mBAAOkM,CAAC,EAAR,EAAY;EACR,kBAAIhM,EAAC,GAAG,KAAK8Z,KAAL,CAAWwsF,SAAnB,EAA8B;EAC1BpU,gBAAAA,GAAG,IAAI,CAAC3oF,GAAG,GAAG,EAAP,EAAWogB,MAAX,CAAkBpgB,GAAG,CAACzJ,MAAJ,GAAakM,CAA/B,CAAP;EACAhM,gBAAAA,EAAC;EACJ,eAHD,MAGO;EACHkyF,gBAAAA,GAAG,IAAI,IAAP;EACAA,gBAAAA,GAAG,IAAI,CAAC3oF,GAAG,GAAG,EAAP,EAAWogB,MAAX,CAAkBpgB,GAAG,CAACzJ,MAAJ,GAAakM,CAA/B,CAAP;EACAhM,gBAAAA,EAAC,GAAG,CAAJ;EACH;EAGJ;EAEJ;EACJ;EAEJ;;EACD,UAAI,CAACkyF,GAAL,EAAU;EACNA,QAAAA,GAAG,GAAG3oF,GAAN;EACH;;EAED,aAAO2oF,GAAP;EACH;;;oCACa;EAEV,UAAI9E,YAAY,GAAG,KAAKA,YAAxB;EACA,WAAKW,SAAL,GAAiB,IAAIF,SAAJ,CAAcT,YAAd,EAA4B,KAAKiD,QAAjC,CAAjB;;EACA,WAAKtC,SAAL,CAAeuD,MAAf,CAAsB,KAAKN,YAA3B;;EACA,WAAKjD,SAAL,CAAeK,QAAf,CAAwB;EAAEj7B,QAAAA,GAAG,EAAE,KAAK29B,QAAZ;EAAsB1nF,QAAAA,MAAM,EAAE,KAAK6D;EAAnC,OAAxB,EAAsE,KAAKujF,aAA3E;;EAEA,WAAKzC,SAAL,CAAerjC,SAAf;;EACA,WAAK7f,KAAL,CAAW3jB,GAAX,CAAe,KAAK6mE,SAAL,CAAeljD,KAA9B,EARU;;EAYV,UAAIxjC,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQ,KAAK2V,KAAb,CAAV;;EACAzS,MAAAA,GAAG,CAAC8J,MAAJ,GAAa,KAAK6/E,YAAL,CAAkB7sF,KAAlB,GAA0BugB,cAA1B,CAAyCrd,GAAG,CAAC8J,MAA7C,CAAb;EAEA,WAAKqgF,SAAL,GAAiB,IAAInD,SAAJ,CAAcjB,YAAd,EAA4B/lF,GAA5B,CAAjB;;EACA,WAAKmqF,SAAL,CAAergF,MAAf,CAAsB+V,GAAtB,CAA0B,KAAK8pE,YAAL,CAAkB7sF,KAAlB,GAA0BugB,cAA1B,CAAyC,KAAK2rE,QAAL,CAAcvpD,SAAd,GAA0B,KAAKupD,QAAL,CAAcvC,UAAxC,GAAqD,KAAKuC,QAAL,CAAcl/E,MAA5G,CAA1B;;EAEA,WAAKqgF,SAAL,CAAeF,MAAf,CAAsB,KAAKN,YAA3B;;EACA,WAAKQ,SAAL,CAAepD,QAAf,CAAwB;EAAEj7B,QAAAA,GAAG,EAAE,KAAK29B,QAAZ;EAAsB1nF,QAAAA,MAAM,EAAE,KAAK6D;EAAnC,OAAxB,EAAsE,KAAKujF,aAA3E;;EACA,WAAKgB,SAAL,CAAe/C,iBAAf,GAAmC,IAAnC;;EACA,WAAK+C,SAAL,CAAe9mC,SAAf,CAAyB,KAAKknC,kBAA9B;;EACA,WAAK/mD,KAAL,CAAW3jB,GAAX,CAAe,KAAKsqE,SAAL,CAAe3mD,KAA9B;EAGH;;;6BACM;EACH,WAAKkjD,SAAL,CAAe34E,IAAf;;EACA,WAAKo8E,SAAL,CAAep8E,IAAf;EACH;;;gCACS;EACN,WAAK24E,SAAL,CAAe5oC,OAAf;;EACA,WAAKqsC,SAAL,CAAersC,OAAf;;EACA,WAAKqrC,aAAL,GAAqB,IAArB;EACH;;;kCACW;EACR,WAAKG,SAAL;;EACA,WAAKH,aAAL,GAAqB,KAAKpD,YAAL,CAAkBmZ,gBAAlB,CAAmC,KAAKj3F,KAAxC,CAArB;;EACA,WAAKy+E,SAAL,CAAeoE,SAAf,CAAyB;EAAEh/B,QAAAA,GAAG,EAAE,KAAK29B,QAAZ;EAAsB1nF,QAAAA,MAAM,EAAE,KAAK6D;EAAnC,OAAzB,EAAuE,KAAKujF,aAA5E;;EACA,WAAKgB,SAAL,CAAeW,SAAf,CAAyB;EAAEh/B,QAAAA,GAAG,EAAE,KAAK29B,QAAZ;EAAsB1nF,QAAAA,MAAM,EAAE,KAAK6D;EAAnC,OAAzB,EAAuE,KAAKujF,aAA5E,EAA2F,KAAKoB,kBAAhG;;EACA,WAAKJ,SAAL,CAAe/C,iBAAf,GAAmC,IAAnC;EACH;;;;IA9JctB;;MCCbqZ;;;;;EACF,kBAAYpZ,YAAZ,EAA0B;EAAA;;EAAA;;EACtB,gFAAMA,YAAN;EAEA,UAAKrsF,IAAL,GAAY,QAAZ;EACA,UAAK0lG,UAAL,GAAkB,EAAlB;;EACA,SAAK,IAAInnG,GAAT,IAAgBukF,SAAhB,EAA2B;EACvB,YAAK4iB,UAAL,CAAgB5iB,SAAS,CAACvkF,GAAD,CAAzB,IAAkC,EAAlC;EACH;;EACD,UAAK8pD,IAAL;;EARsB;EASzB;;;;6BACM;EACH,WAAKynC,YAAL;EAEH;;;qCACc;EACX,UAAIzD,YAAY,GAAG,KAAKA,YAAxB;EACA,UAAI/lF,GAAG,GAAG,IAAV;EACA,UAAIq/F,MAAM,GAAG,KAAKD,UAAlB,CAHW;;EAKX;EACI,YAAIr9F,MAAM,GAAGgkF,YAAY,CAACuZ,iBAAb,CAA+B9iB,SAAS,CAACj9C,KAAzC,CAAb,CADJ;;;EAGIv/B,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB2jB,KAA3B,CAAN;EACA,YAAIA,KAAK,GAAG,IAAIurE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;EACAmkB,QAAAA,KAAK,CAAC6lE,SAAN,CAAgBjoF,MAAM,CAACjF,KAAP,EAAhB;EACAqnB,QAAAA,KAAK,CAACo7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB;EACAoG,QAAAA,KAAK,CAACq7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB,CAAnB,CAArB;EACAoG,QAAAA,KAAK,CAACs7E,WAAN;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAesE,KAAK,CAACqf,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACj9C,KAAX,CAAN,CAAwBhpC,IAAxB,CAA6B4tB,KAA7B,EAVJ;;EAYInkB,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB4jB,KAA3B,CAAN;EACA,YAAIA,KAAK,GAAG,IAAIsrE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;EACAokB,QAAAA,KAAK,CAAC4lE,SAAN,CAAgBjoF,MAAM,CAACjF,KAAP,EAAhB;EACAsnB,QAAAA,KAAK,CAACm7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB;EACAqG,QAAAA,KAAK,CAACo7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAArB;EACAqG,QAAAA,KAAK,CAACq7E,WAAN;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAeuE,KAAK,CAACof,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACj9C,KAAX,CAAN,CAAwBhpC,IAAxB,CAA6B6tB,KAA7B;EACH,OAzBU;;EA4BX;EACI,YAAIriB,OAAM,GAAGgkF,YAAY,CAACuZ,iBAAb,CAA+B9iB,SAAS,CAACl9C,IAAzC,CAAb,CADJ;;;EAGIt/B,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB2jB,KAA3B,CAAN;;EACA,YAAIA,MAAK,GAAG,IAAIurE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;;EACAmkB,QAAAA,MAAK,CAAC6lE,SAAN,CAAgBjoF,OAAM,CAACjF,KAAP,EAAhB;;EACAqnB,QAAAA,MAAK,CAACo7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAjB;;EACAoG,QAAAA,MAAK,CAACq7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB,CAAnB,CAArB;;EACAoG,QAAAA,MAAK,CAACs7E,WAAN;;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAesE,MAAK,CAACqf,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACl9C,IAAX,CAAN,CAAuB/oC,IAAvB,CAA4B4tB,MAA5B,EAVJ;;EAYInkB,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB4jB,KAA3B,CAAN;;EACA,YAAIA,MAAK,GAAG,IAAIsrE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;;EACAokB,QAAAA,MAAK,CAAC4lE,SAAN,CAAgBjoF,OAAM,CAACjF,KAAP,EAAhB;;EACAsnB,QAAAA,MAAK,CAACm7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB;;EACAqG,QAAAA,MAAK,CAACo7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAArB;;EACAqG,QAAAA,MAAK,CAACq7E,WAAN;;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAeuE,MAAK,CAACof,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACl9C,IAAX,CAAN,CAAuB/oC,IAAvB,CAA4B6tB,MAA5B;EACH,OAhDU;;EAqDX;EACI,YAAIriB,QAAM,GAAGgkF,YAAY,CAACuZ,iBAAb,CAA+B9iB,SAAS,CAACT,IAAzC,CAAb,CADJ;;;EAGI/7E,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB6jB,KAA3B,CAAN;;EAEA,YAAIF,OAAK,GAAG,IAAIurE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;;EACAmkB,QAAAA,OAAK,CAAC6lE,SAAN,CAAgBjoF,QAAM,CAACjF,KAAP,EAAhB;;EACAqnB,QAAAA,OAAK,CAACo7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB;;EACAoG,QAAAA,OAAK,CAACq7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB,CAAnB,CAArB;;EACAoG,QAAAA,OAAK,CAACs7E,WAAN;;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAesE,OAAK,CAACqf,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACT,IAAX,CAAN,CAAuBxlF,IAAvB,CAA4B4tB,OAA5B,EAXJ;;EAcInkB,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB4jB,KAA3B,CAAN;EACApkB,QAAAA,GAAG,CAACyS,KAAJ,CAAUynD,SAAV,GAAsB,OAAtB;;EACA,YAAI91C,OAAK,GAAG,IAAIsrE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;;EACAokB,QAAAA,OAAK,CAAC4lE,SAAN,CAAgBjoF,QAAM,CAACjF,KAAP,EAAhB;;EACAsnB,QAAAA,OAAK,CAACm7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB;;EACAqG,QAAAA,OAAK,CAACo7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAArB;;EACAqG,QAAAA,OAAK,CAACq7E,WAAN;;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAeuE,OAAK,CAACof,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACT,IAAX,CAAN,CAAuBxlF,IAAvB,CAA4B6tB,OAA5B;EACH,OA5EU;;EA8EX;EACI,YAAIriB,QAAM,GAAGgkF,YAAY,CAACuZ,iBAAb,CAA+B9iB,SAAS,CAACN,KAAzC,CAAb,CADJ;;;EAGIl8E,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB6jB,KAA3B,CAAN;;EAEA,YAAIF,OAAK,GAAG,IAAIurE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;;EACAmkB,QAAAA,OAAK,CAAC6lE,SAAN,CAAgBjoF,QAAM,CAACjF,KAAP,EAAhB;;EACAqnB,QAAAA,OAAK,CAACo7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAjB;;EACAoG,QAAAA,OAAK,CAACq7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB,CAAnB,CAArB;;EACAoG,QAAAA,OAAK,CAACs7E,WAAN;;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAesE,OAAK,CAACqf,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACN,KAAX,CAAN,CAAwB3lF,IAAxB,CAA6B4tB,OAA7B,EAXJ;;EAcInkB,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB4jB,KAA3B,CAAN;;EACA,YAAIA,OAAK,GAAG,IAAIsrE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;;EACAokB,QAAAA,OAAK,CAAC4lE,SAAN,CAAgBjoF,QAAM,CAACjF,KAAP,EAAhB;;EACAsnB,QAAAA,OAAK,CAACm7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB;;EACAqG,QAAAA,OAAK,CAACo7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAArB;;EACAqG,QAAAA,OAAK,CAACq7E,WAAN;;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAeuE,OAAK,CAACof,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACN,KAAX,CAAN,CAAwB3lF,IAAxB,CAA6B6tB,OAA7B;EACH,OApGU;;EAuGX;EACI,YAAIriB,QAAM,GAAGgkF,YAAY,CAACuZ,iBAAb,CAA+B9iB,SAAS,CAACR,GAAzC,CAAb,CADJ;;;EAGIh8E,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB2jB,KAA3B,CAAN;;EACA,YAAIA,OAAK,GAAG,IAAIurE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;;EACAmkB,QAAAA,OAAK,CAAC6lE,SAAN,CAAgBjoF,QAAM,CAACjF,KAAP,EAAhB;;EACAqnB,QAAAA,OAAK,CAACo7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB;;EACAoG,QAAAA,OAAK,CAACq7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAArB;;EACAoG,QAAAA,OAAK,CAACs7E,WAAN;;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAesE,OAAK,CAACqf,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACR,GAAX,CAAN,CAAsBzlF,IAAtB,CAA2B4tB,OAA3B,EAVJ;;EAaInkB,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB6jB,KAA3B,CAAN;EACArkB,QAAAA,GAAG,CAACyS,KAAJ,CAAUynD,SAAV,GAAsB,OAAtB;;EACA,YAAI91C,OAAK,GAAG,IAAIsrE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;;EACAokB,QAAAA,OAAK,CAAC4lE,SAAN,CAAgBjoF,QAAM,CAACjF,KAAP,EAAhB;;EACAsnB,QAAAA,OAAK,CAACm7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAjB;;EACAqG,QAAAA,OAAK,CAACo7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAArB;;EACAqG,QAAAA,OAAK,CAACq7E,WAAN;;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAeuE,OAAK,CAACof,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACR,GAAX,CAAN,CAAsBzlF,IAAtB,CAA2B6tB,OAA3B;EACH,OA7HU;;EAgIX;EACI,YAAIriB,QAAM,GAAGgkF,YAAY,CAACuZ,iBAAb,CAA+B9iB,SAAS,CAACP,MAAzC,CAAb,CADJ;;;EAGIj8E,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB2jB,KAA3B,CAAN;;EACA,YAAIA,OAAK,GAAG,IAAIurE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;;EACAmkB,QAAAA,OAAK,CAAC6lE,SAAN,CAAgBjoF,QAAM,CAACjF,KAAP,EAAhB;;EACAqnB,QAAAA,OAAK,CAACo7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB;;EACAoG,QAAAA,OAAK,CAACq7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAArB;;EACAoG,QAAAA,OAAK,CAACs7E,WAAN;;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAesE,OAAK,CAACqf,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACP,MAAX,CAAN,CAAyB1lF,IAAzB,CAA8B4tB,OAA9B,EAVJ;;EAaInkB,QAAAA,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQipF,YAAY,CAACvlF,KAAb,CAAmB6jB,KAA3B,CAAN;EACArkB,QAAAA,GAAG,CAACyS,KAAJ,CAAUynD,SAAV,GAAsB,OAAtB;;EACA,YAAI91C,OAAK,GAAG,IAAIsrE,IAAJ,CAAS,IAAT,EAAe1vF,GAAf,CAAZ;;EACAokB,QAAAA,OAAK,CAAC4lE,SAAN,CAAgBjoF,QAAM,CAACjF,KAAP,EAAhB;;EACAsnB,QAAAA,OAAK,CAACm7E,UAAN,CAAiB,IAAIxhF,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB;;EACAqG,QAAAA,OAAK,CAACo7E,cAAN,CAAqB,IAAIzhF,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAArB;;EACAqG,QAAAA,OAAK,CAACq7E,WAAN;;EACA,aAAKj8D,KAAL,CAAW3jB,GAAX,CAAeuE,OAAK,CAACof,KAArB;EACA67D,QAAAA,MAAM,CAAC7iB,SAAS,CAACP,MAAX,CAAN,CAAyB1lF,IAAzB,CAA8B6tB,OAA9B;EACH;EAGD;EAAA,oCAIkB,KAAK2hE,YAAL,CAAkB2Z,gBAAlB,EAJlB;EAAA,YAEQ1zF,KAFR,yBAEQA,KAFR;EAAA,YAGQC,MAHR,yBAGQA,MAHR;EAAA,YAIQurB,KAJR,yBAIQA,KAJR;;EAMI,YAAI+nD,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;EACzB,iBAAO,IAAIhoC,iBAAJ,CAAsB;EACzB5Y,YAAAA,aAAa,EAAE,IADU;EAEzBC,YAAAA,mBAAmB,EAAE,CAFI;EAGzBC,YAAAA,kBAAkB,EAAE,GAHK;EAIzB1c,YAAAA,KAAK,EAAE;EAJkB,WAAtB,CAAP;EAMH,SAPD;;EAQA,YAAIiK,QAAQ,GAAG,IAAI+0C,WAAJ,CAAgBn1D,KAAhB,EAAuBC,MAAvB,EAA+BurB,KAA/B,CAAf;EACA,aAAKztB,GAAL,GAAW,IAAImqD,IAAJ,CAAS9nC,QAAT,EAAmBmzD,gBAAgB,EAAnC,CAAX;EAEH;EAEJ;;;iCACU;EACP,WAAK,IAAItnF,GAAT,IAAgBukF,SAAhB,EAA2B;EACvB,YAAI9iF,IAAI,GAAG8iF,SAAS,CAACvkF,GAAD,CAApB;EACA,aAAKmnG,UAAL,CAAgB1lG,IAAhB,EAAsB7C,OAAtB,CAA8B,UAAAkK,IAAI,EAAI;EAClCA,UAAAA,IAAI,CAAC4+F,UAAL,CAAgB,KAAhB;EACH,SAFD;EAGH;EACJ;;;iCACU;EAAA;;EACP,UAAI7zC,GAAG,GAAG,KAAKi6B,YAAL,CAAkB4B,YAAlB,EAAV;;EADO,iCAEE1vF,GAFF;EAGH,YAAIyB,IAAI,GAAG8iF,SAAS,CAACvkF,GAAD,CAApB;;EACA,QAAA,MAAI,CAACmnG,UAAL,CAAgB1lG,IAAhB,EAAsB7C,OAAtB,CAA8B,UAAAkK,IAAI,EAAI;EAClCA,UAAAA,IAAI,CAAC4+F,UAAL,CAAgB,KAAhB;;EACA,cAAIjmG,IAAI,IAAIoyD,GAAZ,EAAiB;EACb/qD,YAAAA,IAAI,CAAC4+F,UAAL,CAAgB,IAAhB;AAAuBC,EAC1B;EACJ,SALD;EAJG;;EAEP,WAAK,IAAI3nG,GAAT,IAAgBukF,SAAhB,EAA2B;EAAA,cAAlBvkF,GAAkB;EAQ1B;EACJ;;;6BACM;EAAA;;EACH;EACA;EACA;EACA;EACA,WAAKurC,KAAL,CAAW3jB,GAAX,CAAe,KAAK9V,GAApB;;EACA,UAAI+hD,GAAG,GAAG,KAAKi6B,YAAL,CAAkB4B,YAAlB,EAAV;;EANG,mCAOM1vF,GAPN;EAQC,YAAIyB,IAAI,GAAG8iF,SAAS,CAACvkF,GAAD,CAApB;;EACA,QAAA,MAAI,CAACmnG,UAAL,CAAgB1lG,IAAhB,EAAsB7C,OAAtB,CAA8B,UAAAkK,IAAI,EAAI;EAClCA,UAAAA,IAAI,CAAC4+F,UAAL,CAAgB,KAAhB;;EACA,cAAIjmG,IAAI,IAAIoyD,GAAZ,EAAiB;EACb/qD,YAAAA,IAAI,CAAC4+F,UAAL,CAAgB,IAAhB;EACA5+F,YAAAA,IAAI,CAACgN,IAAL;EACH;EACJ,SAND;EATD;;EAOH,WAAK,IAAI9V,GAAT,IAAgBukF,SAAhB,EAA2B;EAAA,eAAlBvkF,GAAkB;EAS1B;EAGJ;;;gCACS;EAEN,WAAK,IAAIA,GAAT,IAAgBukF,SAAhB,EAA2B;EACvB,YAAI9iF,IAAI,GAAG8iF,SAAS,CAACvkF,GAAD,CAApB;EACA,aAAKmnG,UAAL,CAAgB1lG,IAAhB,EAAsB7C,OAAtB,CAA8B,UAAAkK,IAAI,EAAI;EAClCA,UAAAA,IAAI,CAAC+8C,OAAL;EACH,SAFD;EAGH;;EACD,WAAKshD,UAAL,GAAkB,IAAlB;;EACA,0EAAc,KAAKr1F,GAAnB;EACH;;;kCACW;EAER,WAAK,IAAI9R,GAAT,IAAgBukF,SAAhB,EAA2B;EACvB,YAAI9iF,IAAI,GAAG8iF,SAAS,CAACvkF,GAAD,CAApB;EACA,aAAKmnG,UAAL,CAAgB1lG,IAAhB,EAAsB7C,OAAtB,CAA8B,UAAAkK,IAAI,EAAI;EAClCA,UAAAA,IAAI,CAAC+pF,SAAL;EACH,SAFD;EAGH;EAEJ;;;;IAxPgBhF;;MCCf+Z;;;;;EACF,gBAAY7c,IAAZ,EAAkB;EAAA;;EAAA;;EACd,8EAAMA,IAAN,GADc;EAGd;;EAEA,UAAK8c,cAAL,GAAsB;EAClBC,MAAAA,UAAU,EAAE,GADM;EAElBC,MAAAA,WAAW,EAAE;EAFK,KAAtB;EAKA,UAAK/E,eAAL,GAAuB;EACnB/G,MAAAA,UAAU,EAAE,KADO;EACM;EACzBjX,MAAAA,QAAQ,EAAE,MAAKjxE,KAFI;EAEW;EAC9BkxE,MAAAA,SAAS,EAAE,MAAKjxE,MAHG;EAGY;EAC/B+4E,MAAAA,QAAQ,EAAE,MAAK/4E,MAJI;EAIY;EAE/BklB,MAAAA,QAAQ,EAAE,IANS;EAMI;EACvBgsD,MAAAA,WAAW,EAAE,IAPM;EAOI;EACvB3qB,MAAAA,WAAW,EAAE,GARM;EAQI;EACvB0gC,MAAAA,OAAO,EAAE,GATU;EASK;EACxBC,MAAAA,OAAO,EAAE,GAVU;EAUK;EAGxBK,MAAAA,aAAa,EAAE,IAbI;EAcnBM,MAAAA,SAAS,EAAE,KAdQ;EAenBM,MAAAA,UAAU,EAAE,KAfO;EAgBnBD,MAAAA,eAAe,EAAE,GAhBE;EAmBnBz0E,MAAAA,KAAK,EAAE,CAnBY;EAmBN;EACbukE,MAAAA,IAAI,EAAE,CApBa;EAoBL;EACd6Z,MAAAA,KAAK,EAAE,CArBY;EAuBvB;EACA;;EAxBuB,KAAvB;EAyBA,UAAKh0F,MAAL,GAAc,IAAIiU,OAAJ,CAAY3lB,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAc,MAAK2Q,KAAL,GAAa,GAA3B,CAAZ,EAA6C5T,IAAI,CAACiD,GAAL,CAAS,GAAT,EAAc,MAAK4Q,MAAL,GAAc,GAA5B,CAA7C,EAA+E,CAA/E,CAAd,CAnCc;EAqCd;;EACA,UAAK06B,WAAL,GAAmB,EAAnB;;EAEA,QAAI,MAAKnmC,KAAL,CAAWsJ,MAAf,EAAuB;EACnB,YAAKA,MAAL,CAAYzM,IAAZ,CAAiB,MAAKmD,KAAL,CAAWsJ,MAA5B;EACH;;EACDk5E,IAAAA,IAAI,CAACjhC,IAAL,CAAU,MAAKk5C,eAAf;EACAjY,IAAAA,IAAI,CAACgB,UAAL,CAAgB0B,OAAhB,CAAwB,OAAxB;;EACA,UAAK3jC,IAAL;;EA7Cc;EAgDjB;;;;;qCAEc0hC,MAAM;EAEjB,UAAIwc,YAAY,GAAG;EACf97E,QAAAA,KAAK,EAAE;EACHriB,UAAAA,UAAU,EAAE,MADT;EACiB;EACpB2Q,UAAAA,KAAK,EAAE;EACHynD,YAAAA,SAAS,EAAE,QADR;EACwB;EAC3BpwD,YAAAA,MAAM,EAAE;EAFL;EAFJ,SADQ;EAQfsa,QAAAA,KAAK,EAAE;EACHtiB,UAAAA,UAAU,EAAE,MADT;EACiB;EACpB2Q,UAAAA,KAAK,EAAE;EACHynD,YAAAA,SAAS,EAAE,OADR;EAEHpwD,YAAAA,MAAM,EAAE;EAFL;EAFJ,SARQ;EAefua,QAAAA,KAAK,EAAE;EACHviB,UAAAA,UAAU,EAAE,MADT;EAEH2Q,UAAAA,KAAK,EAAE;EACHynD,YAAAA,SAAS,EAAE,QADR;EAEHpwD,YAAAA,MAAM,EAAE;EAFL;EAFJ;EAfQ,OAAnB;EAwBA25E,MAAAA,IAAI,CAACjjF,KAAL,GAAa1K,CAAC,CAACoH,MAAF,CAAS,IAAT,EAAe+iG,YAAf,EAA6Bxc,IAAI,CAACjjF,KAAlC,CAAb;EAEA,aAAOijF,IAAP;EACH;;;6BACM;EAEH,UAAIzjF,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQ,KAAK0D,KAAb,CAAV;;EACA,UAAI6hB,IAAI,GAAG,KAAKq9E,gBAAL,EAAX;EACA,WAAKnU,cAAL,GAAsB,IAAIuD,aAAJ,CAAkB9uF,GAAG,CAACmkB,KAAtB,EAA6B,KAAKqsE,gBAAL,CAAsBxwF,GAAG,CAACmkB,KAAJ,CAAUlc,KAAhC,CAA7B,CAAtB;EACA,WAAKsjF,cAAL,CAAoBtnF,cAApB;EACA,WAAKsnF,cAAL,CAAoBkF,aAApB,CAAkCpuE,IAAI,CAACrW,KAAvC;;EAEA,WAAK26B,WAAL,CAAiBpwC,IAAjB,CAAsB,KAAKg1F,cAA3B;;EAEA,WAAKnC,cAAL,GAAsB,IAAI0F,aAAJ,CAAkB9uF,GAAG,CAACokB,KAAtB,EAA6B,KAAKosE,gBAAL,CAAsBxwF,GAAG,CAACokB,KAAJ,CAAUnc,KAAhC,CAA7B,CAAtB;EACA,WAAKmhF,cAAL,CAAoBnlF,cAApB;EACA,WAAKmlF,cAAL,CAAoBqH,aAApB,CAAkCpuE,IAAI,CAACpW,MAAvC;;EAEA,WAAK06B,WAAL,CAAiBpwC,IAAjB,CAAsB,KAAK6yF,cAA3B;;EAEA,WAAKwC,cAAL,GAAsB,IAAIkD,aAAJ,CAAkB9uF,GAAG,CAACqkB,KAAtB,EAA6B,KAAKmsE,gBAAL,CAAsBxwF,GAAG,CAACqkB,KAAJ,CAAUpc,KAAhC,CAA7B,CAAtB;EACA,WAAK2jF,cAAL,CAAoB3nF,cAApB;EACA,WAAK2nF,cAAL,CAAoB6E,aAApB,CAAkCpuE,IAAI,CAACmV,KAAvC;;EAEA,WAAKmP,WAAL,CAAiBpwC,IAAjB,CAAsB,KAAKq1F,cAA3B;;EAGA,WAAKoF,SAAL;EAEA,WAAKa,cAAL;EAEA,WAAKruD,KAAL,CAAWz3B,QAAX,CAAoB1O,IAApB,CAAyB,KAAKyM,MAAL,CAAYhN,KAAZ,GAAoBugB,cAApB,CAAmC,GAAnC,CAAzB;EAEA,WAAK4zE,SAAL;EACH;;;kCACW;EAAA;;EACR,UAAIiP,MAAM,GAAG,GAAb;EACA,UAAIC,QAAQ,GAAG,OAAOD,MAAtB,CAFQ;;EAGR,UAAIE,YAAY,GAAG,KAAKA,YAAL,EAAnB;EAEA,WAAKpyF,EAAL,CAAQ,SAAR,EAAmB,UAACxF,CAAD,EAAO;EACtB43F,QAAAA,YAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAUD,QAAV,CAAZ;EACH,OAFD;EAGA,WAAKnyF,EAAL,CAAQ,SAAR,EAAmB,UAACxF,CAAD,EAAO;EACtB43F,QAAAA,YAAY,CAAC,CAAD,EAAI,EAAJ,EAAQ,CAAR,EAAWD,QAAX,CAAZ;EACH,OAFD;EAGA,WAAKnyF,EAAL,CAAQ,OAAR,EAAiB,UAACxF,CAAD,EAAO;EACpB43F,QAAAA,YAAY,CAAC,EAAD,EAAK,CAAL,EAAQ,CAAR,EAAWD,QAAX,CAAZ;EACH,OAFD;EAIA,WAAKnyF,EAAL,CAAQ,YAAR,EAAsB,UAACxF,CAAD,EAAO;EACzB,YAAIsjD,GAAG,GAAG,MAAI,CAAC67B,YAAL,EAAV;;EACA,aAAK,IAAIhkD,IAAT,IAAiB64C,SAAjB,EAA4B;EACxB,cAAIA,SAAS,CAAC74C,IAAD,CAAT,KAAoBmoB,GAAxB,EAA6B;EACzB,gBAAIowC,GAAG,GAAG,MAAI,CAACjZ,KAAL,CAAWyZ,YAAX,CAAwB;EAAEhjG,cAAAA,IAAI,EAAE,aAAa8iF,SAAS,CAAC74C,IAAD;EAA9B,aAAxB,CAAV;;EACA,gBAAIu4D,GAAJ,EAAS;EACLA,cAAAA,GAAG,CAACmE,YAAJ;EACH;EACJ;EACJ;EACJ,OAVD;EAYA,WAAKryF,EAAL,CAAQ,cAAR,EAAwB,UAACxF,CAAD,EAAO;EAC3B,YAAIm7B,IAAI,GAAGn7B,CAAC,CAACtI,IAAF,IAAUsI,CAAC,CAACtI,IAAF,CAAOyjC,IAA5B;EACA,YAAI28D,QAAQ,GAAG;EACXz1F,UAAAA,GAAG,EAAE,OADM;EAEXu4E,UAAAA,KAAK,EAAE,SAFI;EAGX14E,UAAAA,KAAK,EAAE;EAHI,SAAf;EAKA,YAAI,CAACi5B,IAAL,EAAW;;EAEX,QAAA,MAAI,CAAC4C,IAAL,CAAU;EAAE9lC,UAAAA,IAAI,EAAE6/F,QAAQ,CAAC38D,IAAD;EAAhB,SAAV;EAEH,OAXD;EAeH;;;qCACc;EAAA;;EAEX,UAAI48D,UAAU,GAAG,KAAKtd,KAAL,CAAWjjF,GAAX,CAAeQ,KAAf,CAAqBo8E,QAAtC;EAFW,UAIPl9D,KAJO,GAOP6gF,UAPO,CAIP7gF,KAJO;EAAA,UAKPukE,IALO,GAOPsc,UAPO,CAKPtc,IALO;EAAA,UAMP6Z,KANO,GAOPyC,UAPO,CAMPzC,KANO;EAUX,aAAO,UAAC0C,QAAD,EAAWC,OAAX,EAAoBC,QAApB,EAA8BP,QAA9B,EAA2C;EAC9C,QAAA,MAAI,CAACtQ,QAAL,CAAc8Q,QAAd;;EAEA,YAAIC,UAAU,GAAGlhF,KAAjB;EACA,YAAImhF,SAAS,GAAGL,QAAQ,GAAGI,UAA3B,CAJ8C;;EAM9C,YAAIE,SAAS,GAAG7c,IAAhB;EACA,YAAI8c,QAAQ,GAAGN,OAAO,GAAGK,SAAzB,CAP8C;;EAS9C,YAAIE,UAAU,GAAGlD,KAAjB;EACA,YAAImD,SAAS,GAAGP,QAAQ,GAAGM,UAA3B,CAV8C;;EAc9C,YAAIE,QAAQ,GAAG,IAAI/iC,IAAJ,GAAW4c,OAAX,EAAf;;EAEA,YAAItxE,EAAE,GAAG,SAALA,EAAK,GAAM;EACX,cAAIg8D,IAAI,GAAG,IAAItH,IAAJ,GAAW4c,OAAX,KAAuBmmB,QAAlC;;EACA,cAAIz7B,IAAI,IAAI06B,QAAZ,EAAsB;EAClB,YAAA,MAAI,CAACld,KAAL,CAAWM,GAAX,CAAeT,WAAf;;EACApjE,YAAAA,KAAK,GAAGkhF,UAAU,GAAGC,SAAS,GAAGp7B,IAAZ,GAAmB06B,QAAxC;EACAlc,YAAAA,IAAI,GAAG6c,SAAS,GAAGC,QAAQ,GAAGt7B,IAAX,GAAkB06B,QAArC;EACArC,YAAAA,KAAK,GAAGkD,UAAU,GAAGC,SAAS,GAAGx7B,IAAZ,GAAmB06B,QAAxC;EAEA,YAAA,MAAI,CAAC38D,KAAL,CAAW7V,QAAX,CAAoBja,CAApB,GAAwB6J,KAAK,CAACzf,QAAN,CAAe4hB,KAAf,CAAxB;EACA,YAAA,MAAI,CAAC8jB,KAAL,CAAW7V,QAAX,CAAoBha,CAApB,GAAwB4J,KAAK,CAACzf,QAAN,CAAe,CAACmmF,IAAhB,CAAxB;EACA,YAAA,MAAI,CAACzgD,KAAL,CAAW7V,QAAX,CAAoB7Q,CAApB,GAAwBS,KAAK,CAACzf,QAAN,CAAeggG,KAAf,CAAxB;EAEH,WAVD,MAUO;EACHp+E,YAAAA,KAAK,GAAG8gF,QAAR;EACAvc,YAAAA,IAAI,GAAGwc,OAAP;EACA3C,YAAAA,KAAK,GAAG4C,QAAR;EAEA,YAAA,MAAI,CAACl9D,KAAL,CAAW7V,QAAX,CAAoBja,CAApB,GAAwB6J,KAAK,CAACzf,QAAN,CAAe4hB,KAAf,CAAxB;EACA,YAAA,MAAI,CAAC8jB,KAAL,CAAW7V,QAAX,CAAoBha,CAApB,GAAwB4J,KAAK,CAACzf,QAAN,CAAe,CAACmmF,IAAhB,CAAxB;EACA,YAAA,MAAI,CAACzgD,KAAL,CAAW7V,QAAX,CAAoB7Q,CAApB,GAAwBS,KAAK,CAACzf,QAAN,CAAeggG,KAAf,CAAxB;;EAEA,YAAA,MAAI,CAACjO,QAAL,CAAcsR,QAAd;;EACA,YAAA,MAAI,CAACle,KAAL,CAAWM,GAAX,CAAehB,UAAf,CAA0B90E,GAA1B,CAA8B,cAA9B,EAA8ChE,EAA9C;EACH;EACJ,SAxBD;;EA0BA,QAAA,MAAI,CAACw5E,KAAL,CAAWM,GAAX,CAAehB,UAAf,CAA0Bv0E,EAA1B,CAA6B,cAA7B,EAA6CvE,EAA7C;EAEH,OA5CD;EA8CH;;;kCACW;EACR;EAEA,UAAIi6E,YAAY,GAAG,IAAI/T,YAAJ,CAAiB,QAAjB,EAA2B,CAA3B,CAAnB,CAHQ;;EAKR,WAAKsT,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyB6jE,YAAzB;;EAEA,UAAIz4D,MAAM,GAAG,KAAKA,MAAL,CAAYnuB,KAAZ,EAAb;EACAmuB,MAAAA,MAAM,GAAG,KAAK24D,YAAL,CAAkB34D,MAAlB,CAAT,CARQ;;EAWR,UAAIm2E,SAAS,GAAG,EAAhB;EACA,UAAI9jD,SAAS,GAAG,GAAhB;EACA,UAAIumC,UAAU,GAAG,QAAjB;EACA,UAAI93E,QAAQ,GAAG,IAAIgS,OAAJ,CAAY,GAAZ,EAAiB,GAAjB,EAAsB,CAAtB,CAAf;EAEAqjF,MAAAA,SAAS,CAAC,CAAD,CAAT,GAAe,IAAI1xB,gBAAJ,CAAqBmU,UAArB,EAAiCvmC,SAAjC,CAAf;EACAvxC,MAAAA,QAAQ,CAACsR,cAAT,CAAwB,KAAxB;EACA+jF,MAAAA,SAAS,CAAC,CAAD,CAAT,CAAar1F,QAAb,CAAsB1O,IAAtB,CAA2B0O,QAA3B;EACAq1F,MAAAA,SAAS,CAAC,CAAD,CAAT,CAAa9kG,MAAb,CAAoByP,QAApB,CAA6B1O,IAA7B,CAAkC4tB,MAAlC;;EACA,WAAKg4D,KAAL,CAAWU,SAAX,CAAqB9jE,GAArB,CAAyBuhF,SAAS,CAAC,CAAD,CAAlC;EAGH;;;oCAEa;EACV,UAAI,KAAKvR,QAAT,EAAmB;EACf,aAAKA,QAAL,CAAc/xC,OAAd;EACH;;EACD,WAAK+xC,QAAL,GAAgB,IAAIsP,MAAJ,CAAW,IAAX,CAAhB;EACA,WAAK37D,KAAL,CAAW3jB,GAAX,CAAe,KAAKgwE,QAAL,CAAcrsD,KAA7B;EAEH;;;yCACkB;EAAA,8BAKX,KAAKzW,OAAL,GAAezB,GAAf,CAAmB,KAAKxhB,MAAxB,CALW;EAAA,UAERkC,KAFQ,qBAEX0H,CAFW;EAAA,UAGRzH,MAHQ,qBAGX0H,CAHW;EAAA,UAIR6jB,KAJQ,qBAIX1a,CAJW;;;EAQf,aAAO;EACH9Q,QAAAA,KAAK,EAAEA,KAAK,GAAG,KAAK8zF,cAAL,CAAoBC,UADhC;EAEH9zF,QAAAA,MAAM,EAAEA,MAAM,GAAG,KAAK6zF,cAAL,CAAoBE,WAFlC;EAGHxoE,QAAAA,KAAK,EAAEp/B,IAAI,CAACiD,GAAL,CAAS2Q,KAAT,EAAgBC,MAAhB,IAA0B,KAAK6zF,cAAL,CAAoBE;EAHlD,OAAP;EAKH;;;wCACiBl0C,KAAK;EAAA,kCAEY,KAAK4zC,gBAAL,EAFZ;EAAA,UAEb1zF,KAFa,yBAEbA,KAFa;EAAA,UAENC,MAFM,yBAENA,MAFM;EAAA,UAEEurB,KAFF,yBAEEA,KAFF;;EAGnB,UAAIz1B,MAAM,GAAG,IAAIgc,OAAJ,EAAb;EACA+tC,MAAAA,GAAG,GAAGA,GAAG,IAAI,KAAK67B,YAAL,EAAb,CAJmB;;EAMnB,UAAI77B,GAAG,KAAK0wB,SAAS,CAACj9C,KAAtB,EAA6B;EACzBx9B,QAAAA,MAAM,CAAC6K,GAAP,CAAW,CAACZ,KAAD,GAAS,GAApB,EAAyB,CAACC,MAAD,GAAU,GAAnC,EAAwCurB,KAAK,GAAG,GAAhD;EACH,OARkB;;;EAUnB,UAAIs0B,GAAG,KAAK0wB,SAAS,CAACN,KAAtB,EAA6B;EACzBn6E,QAAAA,MAAM,CAAC6K,GAAP,CAAWZ,KAAK,GAAG,GAAnB,EAAwB,CAACC,MAAD,GAAU,GAAlC,EAAuCurB,KAAK,GAAG,GAA/C;EACH,OAZkB;;;EAcnB,UAAIs0B,GAAG,KAAK0wB,SAAS,CAACR,GAAtB,EAA2B;EACvBj6E,QAAAA,MAAM,CAAC6K,GAAP,CAAW,CAACZ,KAAD,GAAS,GAApB,EAAyBC,MAAM,GAAG,GAAlC,EAAuCurB,KAAK,GAAG,GAA/C;EACH,OAhBkB;;;EAkBnB,UAAIs0B,GAAG,KAAK0wB,SAAS,CAACl9C,IAAtB,EAA4B;EACxBv9B,QAAAA,MAAM,CAAC6K,GAAP,CAAWZ,KAAK,GAAG,GAAnB,EAAwB,CAACC,MAAD,GAAU,GAAlC,EAAuC,CAACurB,KAAD,GAAS,GAAhD;EACH,OApBkB;;;EAsBnB,UAAIs0B,GAAG,KAAK0wB,SAAS,CAACT,IAAtB,EAA4B;EACxBh6E,QAAAA,MAAM,CAAC6K,GAAP,CAAW,CAACZ,KAAD,GAAS,GAApB,EAAyB,CAACC,MAAD,GAAU,GAAnC,EAAwC,CAACurB,KAAD,GAAS,GAAjD;EACH,OAxBkB;;;EA0BnB,UAAIs0B,GAAG,KAAK0wB,SAAS,CAACP,MAAtB,EAA8B;EAC1Bl6E,QAAAA,MAAM,CAAC6K,GAAP,CAAW,CAACZ,KAAD,GAAS,GAApB,EAAyB,CAACC,MAAD,GAAU,GAAnC,EAAwC,CAACurB,KAAD,GAAS,GAAjD;EACH;;EAED,aAAOz1B,MAAP;EAEH;;;qCACc;EACX,UAAI+pD,GAAG,GAAG,IAAI/tC,OAAJ,EAAV;EACA,WAAKylB,KAAL,CAAW6qB,iBAAX,CAA6BvC,GAA7B,EAFW;EAIX;;EACA,UAAIA,GAAG,CAACxrC,GAAJ,CAAQ,IAAIvC,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAR,IAAgC,GAApC,EAAyC;EACrC,eAAOy+D,SAAS,CAACj9C,KAAjB;EACH,OAFD,MAEO,IAAIusB,GAAG,CAACxrC,GAAJ,CAAQ,IAAIvC,OAAJ,CAAY,CAAC,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAR,IAAiC,GAArC,EAA0C;EAC7C,eAAOy+D,SAAS,CAACN,KAAjB;EACH,OAFM,MAEA,IAAIpwB,GAAG,CAACxrC,GAAJ,CAAQ,IAAIvC,OAAJ,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB,CAAnB,CAAR,IAAiC,GAArC,EAA0C;EAC7C,eAAOy+D,SAAS,CAACR,GAAjB;EACH,OAFM,MAEA,IAAIlwB,GAAG,CAACxrC,GAAJ,CAAQ,IAAIvC,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAR,IAAgC,GAApC,EAAyC;EAC5C,eAAOy+D,SAAS,CAACT,IAAjB;EACH,OAFM,MAEA,IAAIjwB,GAAG,CAACxrC,GAAJ,CAAQ,IAAIvC,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAR,IAAgC,GAApC,EAAyC;EAC5C,eAAOy+D,SAAS,CAACP,MAAjB;EACH,OAFM,MAEA,IAAInwB,GAAG,CAACxrC,GAAJ,CAAQ,IAAIvC,OAAJ,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAC,CAAnB,CAAR,IAAiC,GAArC,EAA0C;EAC7C,eAAOy+D,SAAS,CAACl9C,IAAjB;EACH;;EACD,aAAO,IAAP;EACH;;;uCAEgB;EACb;EACA,UAAIihE,UAAU,GAAG,KAAKtd,KAAL,CAAWjjF,GAAX,CAAeQ,KAAf,CAAqBo8E,QAAtC;;EACA,UAAI77D,GAAG,GAAGxD,KAAK,CAACzf,QAAN,CAAeyiG,UAAU,CAAC7gF,KAA1B,CAAV,CAHa;;;EAIb,UAAIc,KAAK,GAAGjD,KAAK,CAACzf,QAAN,CAAe,CAACyiG,UAAU,CAACtc,IAA3B,CAAZ;;EACA,UAAI6Z,KAAK,GAAGvgF,KAAK,CAACzf,QAAN,CAAeyiG,UAAU,CAACzC,KAA1B,CAAZ;;EAEA,WAAKt6D,KAAL,CAAWg9C,OAAX,CAAmBz/D,GAAnB;EACA,WAAKyiB,KAAL,CAAW+8C,OAAX,CAAmB//D,KAAnB;EACA,WAAKgjB,KAAL,CAAW69D,OAAX,CAAmBvD,KAAnB,EATa;;EAYb,UAAIp6F,GAAG,GAAG,IAAIqa,OAAJ,CAAYwiF,UAAU,CAACtjB,QAAvB,EAAiCsjB,UAAU,CAACrjB,SAA5C,EAAuDqjB,UAAU,CAACvb,QAAlE,EAA4EvsF,MAA5E,EAAV;;EACA,WAAKwqF,KAAL,CAAWe,UAAX,CAAsB3I,OAAtB,CAA8BtvE,QAA9B,CAAuCk2B,IAAvC,CAA4Cv+B,GAA5C;EAEH;;;+BACQ;EACL,WAAKmsF,QAAL,CAAc9hF,IAAd;;EACA,WAAKk1E,KAAL,CAAWM,GAAX,CAAehB,UAAf,CAA0Bv0E,EAA1B,CAA6B,cAA7B,EAA6C,YAAM;EAElD,OAFD;EAGH;;;uCACgB/F,OAAO;EACpB,UAAIoZ,SAAS,GAAG,IAAhB;;EACA,WAAKslB,WAAL,CAAiB9vC,OAAjB,CAAyB,UAAA+1F,IAAI,EAAI;EAC7B,YAAI92F,CAAC,CAAC6B,OAAF,CAAUsQ,KAAV,CAAJ,EAAsB;EAClB,cAAI9H,IAAI,CAACE,SAAL,CAAe4H,KAAf,KAAyB9H,IAAI,CAACE,SAAL,CAAeusF,IAAI,CAAC3kF,KAApB,CAA7B,EAAyD;EACrDoZ,YAAAA,SAAS,GAAGigF,GAAZ;EACH;EACJ,SAJD,MAIO;EACH,cAAI1U,IAAI,CAAC3kF,KAAL,IAAcA,KAAlB,EAAyB;EACrBoZ,YAAAA,SAAS,GAAGurE,IAAZ;EACH;EACJ;EACJ,OAVD;;EAYA,aAAOvrE,SAAP;EACH;;;kCACW;EACR,UAAIrhB,GAAG,GAAGlK,CAAC,CAACgH,KAAF,CAAQ,KAAK0D,KAAb,CAAV;;EACA,WAAK+qF,cAAL,CAAoB6G,YAApB,CAAiC,KAAK5B,gBAAL,CAAsBxwF,GAAG,CAACmkB,KAAJ,CAAUlc,KAAhC,CAAjC;EACA,WAAKsjF,cAAL,CAAoBtnF,cAApB;EACA,WAAKsnF,cAAL,CAAoB3pF,cAApB;EAEA,WAAKwnF,cAAL,CAAoBgJ,YAApB,CAAiC,KAAK5B,gBAAL,CAAsBxwF,GAAG,CAACokB,KAAJ,CAAUnc,KAAhC,CAAjC;EACA,WAAKmhF,cAAL,CAAoBnlF,cAApB;EACA,WAAKmlF,cAAL,CAAoBxnF,cAApB;EAGA,WAAKgqF,cAAL,CAAoBwG,YAApB,CAAiC,KAAK5B,gBAAL,CAAsBxwF,GAAG,CAACqkB,KAAJ,CAAUpc,KAAhC,CAAjC;EACA,WAAK2jF,cAAL,CAAoB3nF,cAApB;EACA,WAAK2nF,cAAL,CAAoBhqF,cAApB,GAbQ;;EAkBR,WAAKiuF,QAAL,CAAc/E,SAAd;EACH;;;;IAlXc/H;;MCJbwe;;;;;EACF,uBAAYC,OAAZ,EAAqB;EAAA;;EAAA;;EACjB,qFAAMA,OAAO,CAAC3G,SAAd,GADiB;;EAGjB,UAAK4G,YAAL,GAAoB,EAApB;EACA,UAAKC,QAAL,GAAgB,EAAhB;EAJiB;EAKpB;;;;wCACiB;EACd,UAAI/Y,MAAM,GAAG,KAAK5C,YAAlB;;EACA,UAAI4b,OAAO,GAAGhZ,MAAM,CAACjE,iBAAP,EAAd;;EACA,UAAI,CAACid,OAAL,EAAc;EACV,aAAKF,YAAL,GAAoB,KAAK1b,YAAL,CAAkB6b,gBAAlB,CAAmC,KAAK35F,KAAxC,CAApB;EACH,OAFD,MAEO;EACH,YAAIolF,QAAQ,GAAG1E,MAAM,CAACiD,cAAP,CAAsBlB,cAAtB,EAAf;;EACA,aAAK+W,YAAL,GAAoB,KAAK1b,YAAL,CAAkB6b,gBAAlB,CAAmCvU,QAAnC,CAApB;EACH;EACJ;;;oCAEa;EACV;EACA,UAAI,KAAKtH,YAAL,CAAkBtlF,IAAlB,IAA0B,aAA9B,EAA6C;EACzC,aAAKohG,mBAAL;EACH;EACJ;;;4CAEqB;EAClB,UAAIhgG,EAAE,GAAG,IAAT;EACA,UAAI8mF,MAAM,GAAG,KAAK5C,YAAlB;EACA,UAAI8H,MAAM,GAAGlF,MAAM,CAAC4C,cAApB;EACA,UAAIwC,MAAM,GAAGpF,MAAM,CAACiD,cAApB;;EACA,UAAIkW,SAAS,GAAGnZ,MAAM,CAACgE,QAAP,CAAgB,KAAKyD,SAArB,CAAhB;;EACA,UAAItC,MAAM,GAAGgU,SAAS,CAAClV,IAAvB;EAEA,UAAImV,KAAJ,EAAWC,cAAX,CARkB;;EAYlB,WAAKC,eAAL;EACA,WAAKP,QAAL,GAAgB,EAAhB;EAEA,UAAIQ,IAAI,GAAG,KAAKT,YAAL,CAAkBhpG,MAA7B,CAfkB;EAiBlB;;EACA,UAAIkpG,OAAO,GAAGhZ,MAAM,CAACjE,iBAAP,EAAd;;EACAsd,MAAAA,cAAc,GAAGjU,MAAM,CAACoU,oBAAP,EAAjB;;EACA,UAAIpU,MAAM,CAACjsF,UAAP,KAAsB,YAA1B,EAAwC;EACpCigG,QAAAA,KAAK,GAAGjsG,CAAC,CAACgF,OAAF,CAAUizF,MAAM,CAAC/sF,OAAjB,CAAR;EACH,OAFD,MAEO;EACH+gG,QAAAA,KAAK,GAAGhU,MAAM,CAACrD,cAAP,EAAR;EAEH,OAzBiB;;;EA8BlB,eAAS0X,QAAT,CAAkBC,IAAlB,EAAwB5Q,IAAxB,EAA8B;EAC1B;EACA,YAAIzwF,OAAO,GAAG,EAAd;EACA,YAAIshG,SAAJ;;EACA,YAAI,CAACX,OAAL,EAAc;EACV3gG,UAAAA,OAAO,GAAGa,EAAE,CAACohF,KAAH,CAAS/7E,SAAT,CAAmBO,UAAnB,CAA8B5F,EAAE,CAAC4/F,YAAjC,CAAV;EACH,SAFD,MAEO;EACH,cAAIc,MAAM,GAAGP,cAAc,CAACvQ,IAAD,CAA3B;;EACA,cAAI+Q,EAAE,uBACDb,OADC,EACSY,MADT,CAAN;;EAIAD,UAAAA,SAAS,GAAGzgG,EAAE,CAACohF,KAAH,CAAS/7E,SAAT,CAAmBG,YAAnB,CAAgCm7F,EAAhC,CAAZ;EACA,cAAI7jG,GAAG,GAAG,EAAV;EACAA,UAAAA,GAAG,GAAG2jG,SAAS,CAACvrG,GAAV,CAAc,UAAAyD,IAAI,EAAI;EACxB,mBAAOA,IAAI,CAACszF,MAAM,CAAC7lF,KAAR,CAAX;EACH,WAFK,CAAN;EAGAjH,UAAAA,OAAO,CAACzK,IAAR,CAAa,CAACoI,GAAD,CAAb;EACH;;EAED7I,QAAAA,CAAC,CAACiD,IAAF,CAAOiI,OAAP,EAAgB,UAAUyhG,KAAV,EAAiBv6F,CAAjB,EAAoB;EAChC;EACA;EACA,cAAIw6F,WAAW,GAAG,EAAlB;EACA,cAAIC,OAAO,GAAG,CAAd;;EACA7sG,UAAAA,CAAC,CAACiD,IAAF,CAAO0pG,KAAP,EAAc,UAAUG,YAAV,EAAwB1lF,CAAxB,EAA2B;EACrCwlF,YAAAA,WAAW,CAACxlF,CAAD,CAAX,GAAiB,EAAjB,CADqC;;EAIrC,gBAAI2lF,QAAQ,GAAGD,YAAY,CAACnqG,MAA5B,CAJqC;;EAOrC3C,YAAAA,CAAC,CAACiD,IAAF,CAAO6pG,YAAP,EAAqB,UAAU1gG,GAAV,EAAevJ,CAAf,EAAkB;EAEnCgqG,cAAAA,OAAO,GAAG,CAAV;;EACA,kBAAIzlF,CAAC,GAAG,CAAR,EAAW;EACP,qBAAK,IAAI5H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4H,CAApB,EAAuB5H,CAAC,EAAxB,EAA4B;EACxBqtF,kBAAAA,OAAO,IAAIF,KAAK,CAACntF,CAAD,CAAL,CAAS3c,CAAT,CAAX;EACH;EACJ;;EAED,kBAAImqG,MAAM,GAAG5gG,GAAb;;EACA,kBAAIL,EAAE,CAACkhG,UAAP,EAAmB;EACf;EACAD,gBAAAA,MAAM,GAAG,CAAT;;EACAhtG,gBAAAA,CAAC,CAACiD,IAAF,CAAO0pG,KAAP,EAAc,UAAUO,IAAV,EAAgBC,EAAhB,EAAoB;EAC9BH,kBAAAA,MAAM,IAAIE,IAAI,CAACrqG,CAAD,CAAd;EACH,iBAFD;EAGH;EAID,kBAAImkB,CAAC,GAAG,CAAR;EAEAA,cAAAA,CAAC,GAAG,CAAEixE,MAAM,CAAC9rF,WAAP,CAAmBogG,IAAnB,CAAN;EACA5Q,cAAAA,IAAI,GAAG1D,MAAM,CAAC3rF,aAAP,CAAqBigG,IAArB,CAAP;EAEA,kBAAIa,MAAM,GAAG,IAAb;;EACA,kBAAIvB,OAAJ,EAAa;EACTuB,gBAAAA,MAAM,GAAGrhG,EAAE,CAACoG,KAAH,CAASvR,QAAT,EAAT;EACH,eAFD,MAEO;EACHwsG,gBAAAA,MAAM,GAAGrhG,EAAE,CAACshG,eAAH,CAAmBj7F,CAAnB,EAAsBgV,CAAtB,EAAyBvkB,CAAzB,EAA4BkJ,EAAE,CAAC4/F,YAA/B,CAAT;EACH;;EAED,kBAAI9uF,OAAO,GAAG,CAAd;;EACA,kBAAIgvF,OAAJ,EAAa;EACThvF,gBAAAA,OAAO,GAAG2vF,SAAS,CAAC3pG,CAAD,CAAnB;EACH,eAFD,MAEO;EACHga,gBAAAA,OAAO,GAAG9Q,EAAE,CAACohF,KAAH,CAAS/7E,SAAT,CAAmBC,YAAnB,CAAgCxO,CAAhC,CAAV;EACH;;EAED,kBAAIyqG,IAAI,GAAGzwF,OAAO,CAACk7E,MAAM,CAAC5lF,KAAR,CAAlB;;EACA,kBAAIyL,CAAC,GAAGm6E,MAAM,CAAC5rF,WAAP,CAAmBmhG,IAAnB,CAAR;;EAEA,kBAAIzvF,CAAC,GAAG,CAAR;EAAA,kBAAW0vF,MAAM,GAAG,CAApB;;EACA,kBAAIxhG,EAAE,CAACkhG,UAAP,EAAmB;EACfpvF,gBAAAA,CAAC,GAAGzR,GAAG,GAAG4gG,MAAN,GAAehV,MAAM,CAACx9E,UAA1B;EACH,eAFD,MAEO;EACHqD,gBAAAA,CAAC,GAAGm6E,MAAM,CAAC7rF,WAAP,CAAmBC,GAAnB,CAAJ;EACAmhG,gBAAAA,MAAM,GAAGvV,MAAM,CAAC7rF,WAAP,CAAmB0gG,OAAnB,CAAT;EACH;EAGD,kBAAIW,QAAQ,GAAG,IAAIC,QAAJ,CAAa;EACxB9iG,gBAAAA,IAAI,EAAEoB,EAAE,CAACpB,IADe;EAExBlH,gBAAAA,KAAK,EAAE2I,GAFiB;EAGxBshG,gBAAAA,IAAI,EAAEtmF,CAHkB;EAGP;EACjB4lF,gBAAAA,MAAM,EAAEA,MAJgB;EAKxBW,gBAAAA,UAAU,EAACv7F,CALa;EAOxBD,gBAAAA,KAAK,EAAEi7F,MAPiB;EAQxBvG,gBAAAA,MAAM,EAAE9O,MAAM,CAAC5lF,KARS;EASxBw8E,gBAAAA,MAAM,EAAEsJ,MAAM,CAAC9lF,KATS;EAUxBy7F,gBAAAA,OAAO,EAAEb,QAVe;EAYxBxgF,gBAAAA,IAAI,EAAE,IAAItE,OAAJ,CAAYqlF,IAAZ,EAAkBlhG,GAAlB,EAAuBmgG,IAAvB,CAZkB;EAaxB/iG,gBAAAA,GAAG,EAAE,IAAIye,OAAJ,CAAYrK,CAAZ,EAAeC,CAAf,EAAkBmJ,CAAlB,CAbmB;EAcxB6mF,gBAAAA,OAAO,EAAE,IAAI5lF,OAAJ,CAAYrK,CAAZ,EAAe2vF,MAAf,EAAuBvmF,CAAvB,CAde;EAexB8mF,gBAAAA,MAAM,EAAEjB,OAfgB;EAgBxBT,gBAAAA,IAAI,EAACA,IAhBmB;EAiBxBtvF,gBAAAA,KAAK,EAAEja,CAjBiB;EAkBxBkrG,gBAAAA,KAAK,EAAEpS,IAlBiB;EAmBxB9+E,gBAAAA,OAAO,EAAEA,OAnBe;EAoBxBwP,gBAAAA,KAAK,EAAEw/E,OAAO,GAAGhZ,MAAM,CAACmb,QAAP,CAAgBzB,IAAhB,CAAH,GAA2B1Z,MAAM,CAACmb,QAAP,CAAgBZ,MAAhB;EApBjB,eAAb,CAAf;EAwBA,kBAAIjrG,GAAG,GAAGqrG,QAAQ,CAACr7F,KAAnB;;EACA,kBAAI05F,OAAJ,EAAa;EACT1pG,gBAAAA,GAAG,GAAGoqG,IAAN;EACH;;EACD,kBAAI,CAACxgG,EAAE,CAAC6/F,QAAH,CAAYzpG,GAAZ,CAAL,EAAuB;EACnB4J,gBAAAA,EAAE,CAAC6/F,QAAH,CAAYzpG,GAAZ,IAAmByqG,WAAW,CAACxlF,CAAD,CAA9B;EACH;EAEDwlF,cAAAA,WAAW,CAACxlF,CAAD,CAAX,CAAe3mB,IAAf,CAAoB+sG,QAApB;EAEH,aArFD;EAsFH,WA7FD;EA+FH,SApGD;EAqGH;;EAGD,UAAIS,SAAS,GAAG,KAAKtC,YAAL,CAAkB/qG,QAAlB,EAAhB;;EACA,UAAI,CAACirG,OAAL,EAAc;EACV,YAAIlQ,IAAI,GAAG37F,CAAC,CAAC0B,OAAF,CAAUwqG,cAAV,EAA0B+B,SAA1B,CAAX;;EACA3B,QAAAA,QAAQ,CAACL,KAAK,CAACtQ,IAAD,CAAN,CAAR;EACH,OAHD,MAGO;EACHsQ,QAAAA,KAAK,CAAClrG,OAAN,CAAc,UAACmtG,EAAD,EAAKvS,IAAL,EAAc;EACxB2Q,UAAAA,QAAQ,CAAC4B,EAAD,EAAKvS,IAAL,CAAR;EACH,SAFD;EAGH;;EACD,aAAO5vF,EAAE,CAAC6/F,QAAV;EACH;;;sCACex5F,GAAGgV,GAAGvkB,GAAGsP,OAAO;EAC5B,UAAInS,CAAC,CAACsE,QAAF,CAAW6N,KAAX,CAAJ,EAAuB;EACnB,eAAOA,KAAP;EACH,OAFD,MAEO,IAAInS,CAAC,CAAC6B,OAAF,CAAUsQ,KAAV,CAAJ,EAAsB;EACzB,YAAI4iF,GAAG,GAAG5iF,KAAK,CAACC,CAAD,CAAf;;EACA,YAAIpS,CAAC,CAACsE,QAAF,CAAWywF,GAAX,CAAJ,EAAqB;EACjB,iBAAOA,GAAP;EACH,SAFD,MAEO,IAAI/0F,CAAC,CAAC6B,OAAF,CAAUkzF,GAAV,CAAJ,EAAoB;EACvB,iBAAOA,GAAG,CAAC3tE,CAAD,CAAV;EACH;EACJ;EACJ;;;;IAzMqB4oE;;MA8MpByd;;;EACF,sBAoB4B;EAAA,mFAAJ,EAAI;EAAA,yBApBd9iG,IAoBc;EAAA,QApBdA,IAoBc,0BApBP,IAoBO;EAAA,0BAnBxBlH,KAmBwB;EAAA,QAnBxBA,KAmBwB,2BAnBhB,IAmBgB;EAAA,yBAlBxBiqG,IAkBwB;EAAA,QAlBxBA,IAkBwB,0BAlBjB,IAkBiB;EAAA,2BAjBxBV,MAiBwB;EAAA,QAjBxBA,MAiBwB,4BAjBf,IAiBe;EAAA,0BAfxB76F,KAewB;EAAA,QAfxBA,KAewB,2BAfhB,IAegB;EAAA,2BAdxB00F,MAcwB;EAAA,QAdxBA,MAcwB,4BAdf,IAce;EAAA,2BAbxBlY,MAawB;EAAA,QAbxBA,MAawB,4BAbf,IAae;EAAA,4BAZxBif,OAYwB;EAAA,QAZxBA,OAYwB,6BAZd,CAYc;EAAA,QAVxBrhF,IAUwB,QAVxBA,IAUwB;EAAA,QATxBshF,OASwB,QATxBA,OASwB;EAAA,0BAPxB/wF,KAOwB;EAAA,QAPxBA,KAOwB,2BAPhB,IAOgB;EAAA,0BANxBixF,KAMwB;EAAA,QANxBA,KAMwB,2BANhB,IAMgB;EAAA,4BALxBlxF,OAKwB;EAAA,QALxBA,OAKwB,6BALd,IAKc;EAAA,0BAJxBwP,KAIwB;EAAA,QAJxBA,KAIwB,2BAJhB,IAIgB;EAAA,2BAHxByhF,MAGwB;EAAA,QAHxBA,MAGwB,4BAHf,IAGe;EAAA,wBAFxBtkG,GAEwB;EAAA,QAFxBA,GAEwB,yBAFlB,IAEkB;EAAA,yBADxB4iG,IACwB;EAAA,QADxBA,IACwB,0BADnB,IACmB;EAAA,+BAAxBuB,UAAwB;EAAA,QAAxBA,UAAwB,gCAAb,IAAa;;EAAA;;EACxB,SAAK1hD,IAAL,CAAUthD,IAAV,EAAgBlH,KAAhB,EAAuBiqG,IAAvB,EAA6BV,MAA7B,EAAqC76F,KAArC,EAA4C00F,MAA5C,EAAoDlY,MAApD,EAA4Dif,OAA5D,EAAqErhF,IAArE,EAA2EshF,OAA3E,EAAoF/wF,KAApF,EAA2FixF,KAA3F,EAAkGlxF,OAAlG,EAA2GwP,KAA3G,EAAkHyhF,MAAlH,EAA0HtkG,GAA1H,EAA8H4iG,IAA9H,EAAmIuB,UAAnI;EACH;;;;2BACIhjG,MAAMlH,OAAOiqG,MAAMV,QAAQ76F,OAAO00F,QAAQlY,QAAQif,SAASrhF,MAAMshF,SAAS/wF,OAAOixF,OAAOlxF,SAASwP,OAAOyhF,QAAQtkG,KAAI4iG,MAAKuB,YAAY;EACtI,WAAKhjG,IAAL,GAAYA,IAAZ,CADsI;;EAEtI,WAAKlH,KAAL,GAAaA,KAAb,CAFsI;;EAGtI,WAAKiqG,IAAL,GAAYA,IAAZ,CAHsI;;EAItI,WAAKI,MAAL,GAAcA,MAAd,CAJsI;;EAMtI,WAAKd,MAAL,GAAcA,MAAd,CANsI;;EAQtI,WAAK76F,KAAL,GAAaA,KAAb,CARsI;;EAStI,WAAK00F,MAAL,GAAcA,MAAd,CATsI;;EAUtI,WAAKlY,MAAL,GAAcA,MAAd,CAVsI;;EAWtI,WAAKif,OAAL,GAAeA,OAAf,CAXsI;;EAYtI,WAAKxB,IAAL,GAAYA,IAAZ,CAZsI;;EAatI,WAAKuB,UAAL,GAAkBA,UAAlB,CAbsI;;EAetI,WAAKphF,IAAL,GAAYA,IAAI,IAAI,IAAItE,OAAJ,EAApB,CAfsI;;EAgBtI,WAAKze,GAAL,GAAWA,GAAX,CAhBsI;;EAiBtI,WAAKqkG,OAAL,GAAeA,OAAO,IAAI,IAAI5lF,OAAJ,EAA1B,CAjBsI;;EAoBtI,WAAKnL,KAAL,GAAaA,KAAb,CApBsI;;EAqBtI,WAAKixF,KAAL,GAAaA,KAAb,CArBsI;;EAsBtI,WAAKlxF,OAAL,GAAeA,OAAf,CAtBsI;;EAuBtI,WAAKwP,KAAL,GAAaA,KAAb,CAvBsI;EAwBzI;;;;;;MC5PC8hF;;;;;EACF,eAAYzC,OAAZ,EAAqBxhG,GAArB,EAA0B;EAAA;;EAAA;;EACtB,6EAAMwhG,OAAN;EAEA,UAAK9nG,IAAL,GAAU,KAAV;EACA,UAAK+G,IAAL,GAAY,KAAZ;EACA,UAAKiV,KAAL,GAAa,OAAb;EAEA,UAAKrE,IAAL,GAAY;EACRy3E,MAAAA,SAAS,EAAE,MADH;EACY;EACpBob,MAAAA,YAAY,EAAE,OAFN;EAEe;EACvB;EACA;EACA;EACA;EACA;EAEA;EACAzpC,MAAAA,SAAS,EAAE,IAVH;EAYR;EACA;EACA;;EAdQ,KAAZ;EAiBA,UAAKhoD,KAAL,GAAa;EACTjB,MAAAA,OAAO,EAAE,KADA;EAET45E,MAAAA,SAAS,EAAE,IAFF;EAGTnE,MAAAA,SAAS,EAAE,IAHF;EAGQ;EACjB5sB,MAAAA,QAAQ,EAAE,EAJD;EAKThyD,MAAAA,MAAM,EAAE,IALC;EAMTo3B,MAAAA,SAAS,EAAE,CANF;EAOTi7B,MAAAA,WAAW,EAAE,IAPJ;EAST/sC,MAAAA,QAAQ,EAAE,CATD;EAUT45D,MAAAA,KAAK,EAAE,QAVE;EAUS;EAClBL,MAAAA,aAAa,EAAE,QAXN;EAWgB;EACzBn7E,MAAAA,QAAQ,EAAE,KAZD;EAYQ;EACjBmmF,MAAAA,OAAO,EAAE,CAbA;EAcTC,MAAAA,OAAO,EAAE;EAdA,KAAb,CAxBsB;EA2CtB;EAEA;;EAEA,UAAK4Q,UAAL,GAAkB,KAAlB,CA/CsB;;EAiDtB,UAAKoB,WAAL,GAAmB,CAAnB;;EACAruG,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB,EAlDsB;;;EAoDtB,UAAK+hD,IAAL;;EApDsB;EAsDzB;;;;6BACM;EACH,WAAKqiD,SAAL,GAAiB,KAAKnhB,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAxB,CAAjB;EAEH;;;oCACa;EACV;;EACA,UAAI2F,IAAI,GAAG,KAAK0mF,YAAL,CAAkBse,WAAlB,EAAX;;EACA,UAAIrf,QAAQ,GAAG3lF,IAAI,CAACyd,CAAL,GAAS,GAAxB;;EACA,WAAK,IAAI7U,KAAT,IAAkB,KAAKy5F,QAAvB,EAAiC;EAC7B,YAAI4C,QAAQ,GAAG,KAAK5C,QAAL,CAAcz5F,KAAd,CAAf;EACAq8F,QAAAA,QAAQ,CAACztG,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrBA,UAAAA,IAAI,CAAC6E,IAAL,GAAYA,IAAZ;EACA7E,UAAAA,IAAI,CAACyiF,QAAL,GAAgB59E,IAAI,CAACqU,CAAL,GAASlZ,IAAI,CAAC0nG,IAAd,GAAqB,GAArC;EACA1nG,UAAAA,IAAI,CAAC0iF,SAAL,GAAiB1iF,IAAI,CAAC8E,GAAL,CAASqU,CAA1B;EACAnZ,UAAAA,IAAI,CAACwqF,QAAL,GAAgBA,QAAQ,GAAGxqF,IAAI,CAACyiF,QAAhB,GAA2BziF,IAAI,CAACyiF,QAAhC,GAA2C+H,QAA3D;EACH,SALD;EAMH;EACJ;;;kCACWhkF,SAAS;EACjB,UAAIujG,UAAU,GAAG,IAAjB;;EACA,cAAQ,KAAKlzF,IAAL,CAAU6yF,YAAlB;EACI,aAAK,OAAL;EACIK,UAAAA,UAAU,GAAGhtD,iBAAb;EACA;;EACJ,aAAK,SAAL;EACIgtD,UAAAA,UAAU,GAAGjtD,mBAAb;EACA;;EACJ,aAAK,MAAL;EACIitD,UAAAA,UAAU,GAAGrtD,oBAAb;EACA;;EACJ;EACIqtD,UAAAA,UAAU,GAAGhtD,iBAAb;EAXR;;EAcA,UAAI/0B,MAAM,GAAG,KAAKgiF,SAAL,CAAe,KAAKnzF,IAAL,CAAUopD,SAAzB,EAAoCz5D,OAApC,CAAb;;EACA,UAAI+8B,QAAQ,GAAG,IAAf,CAjBiB;EAmBjB;;EACAA,MAAAA,QAAQ,GAAG,IAAIwmE,UAAJ,CAAe;EACtBpiF,QAAAA,KAAK,EAAEK,MADe;EAEtB6b,QAAAA,WAAW,EAAE,IAFS;EAGtByJ,QAAAA,OAAO,EAAE,CAHa;EAItB3Q,QAAAA,SAAS,EAAE,IAJW;EAKtBqH,QAAAA,UAAU,EAAE,IALU;EAMtBL,QAAAA,IAAI,EAAExkB,UANgB;EAQtB;EACA;;EATsB,OAAf,CAAX,CApBiB;EAgCjB;EACA;EACA;;EAGA,aAAOokB,QAAP;EAEH;;;6BACM;EAAA;;EACH,UAAIl8B,EAAE,GAAG,IAAT;EACA,UAAI0hF,GAAG,GAAG,KAAKN,KAAL,CAAWM,GAArB;EACA,WAAKkhB,WAAL;EACA,UAAI3lG,KAAK,GAAG,GAAZ,CAJG;;EAKH,WAAK,IAAImJ,KAAT,IAAkB,KAAKy5F,QAAvB,EAAiC;EAC7B,YAAI4C,QAAQ,GAAG,KAAK5C,QAAL,CAAcz5F,KAAd,CAAf;EACAq8F,QAAAA,QAAQ,CAACztG,OAAT,CAAiB,UAAA2D,IAAI,EAAI;EACrB,cAAIkqG,IAAI,GAAGlqG,IAAI,CAAC6E,IAAL,CAAUqU,CAAV,IAAelZ,IAAI,CAAC0nG,IAAL,GAAY,CAA3B,IAAgCpjG,KAA3C;EACA,cAAI+3D,IAAI,GAAGr8D,IAAI,CAACipG,UAAL,GAAkB,CAAlB,GAAsB,CAAjC;EAEAjpG,UAAAA,IAAI,CAACmpG,OAAL,CAAa7hE,IAAb,CAAkBtnC,IAAI,CAACmpG,OAAL,CAAajwF,CAAb,IAAkBgxF,IAAI,GAAG7tC,IAAP,GAAcr8D,IAAI,CAAC6E,IAAL,CAAUqU,CAAV,GAAc,GAAd,GAAoB5U,KAApD,IAA6DtE,IAAI,CAACyiF,QAAL,GAAgB,GAA/F;;EACA,cAAI,MAAI,CAAC5rE,IAAL,CAAUy3E,SAAV,IAAuB,UAAvB,IAAqC,UAAU,MAAI,CAACz3E,IAAL,CAAUy3E,SAA7D,EAAwE;EAEpEtuF,YAAAA,IAAI,CAACmpG,OAAL,CAAa1hE,IAAb,CAAkBznC,IAAI,CAAC8E,GAAL,CAASwd,CAAT,GAAatiB,IAAI,CAACyiF,QAAL,GAAgB,GAA/C;EACH,WAHD,MAGO;EACHziF,YAAAA,IAAI,CAACmpG,OAAL,CAAa1hE,IAAb,CAAkBznC,IAAI,CAAC8E,GAAL,CAASwd,CAAT,GAAatiB,IAAI,CAACwqF,QAAL,GAAgB,GAA/C;EACH;;EACD,cAAI9H,SAAS,GAAG9kF,IAAI,CAACsC,GAAL,CAAUF,IAAI,CAAC0iF,SAAf,EAA2B,IAA3B,CAAhB;EAEA,cAAIn/C,QAAQ,GAAGl8B,EAAE,CAAC8iG,WAAH,CAAenqG,IAAf,CAAf;EACA,cAAItC,GAAG,GAAG,IAAV;EACA,cAAIgrF,QAAQ,GAAG,IAAI34D,IAAJ,EAAf;EACA,cAAIo5E,OAAO,GAAGnpG,IAAI,CAACmpG,OAAL,CAAa7mG,KAAb,EAAd;;EACA,cAAI,MAAI,CAACuU,IAAL,CAAUy3E,SAAV,IAAuB,MAA3B,EAAmC;EAC/B5wF,YAAAA,GAAG,GAAGqrF,GAAG,CAACtD,UAAJ,CAAezlF,IAAI,CAACyiF,QAApB,EAA8BC,SAA9B,EAAyC1iF,IAAI,CAACwqF,QAA9C,EAAwDjnD,QAAxD,CAAN;EACAmlD,YAAAA,QAAQ,CAACh8C,aAAT,CAAuBhvC,GAAvB;EACAyrG,YAAAA,OAAO,CAACjwF,CAAR,IAAawvE,QAAQ,CAACp2D,SAAT,GAAqBpZ,CAAlC;EACH,WAJD,MAIO,IAAI,MAAI,CAACrC,IAAL,CAAUy3E,SAAV,IAAuB,UAA3B,EAAuC;EAC1C5wF,YAAAA,GAAG,GAAGqrF,GAAG,CAACxD,cAAJ,CAAmBvlF,IAAI,CAACyiF,QAAxB,EAAkCC,SAAlC,EAA6C1iF,IAAI,CAACwqF,QAAlD,EAA4DjnD,QAA5D,CAAN;EACAmlD,YAAAA,QAAQ,CAACh8C,aAAT,CAAuBhvC,GAAvB;EACAyrG,YAAAA,OAAO,CAACjwF,CAAR,IAAawvE,QAAQ,CAACp2D,SAAT,GAAqBpZ,CAAlC;EACH,WAJM,MAIA;EACHxb,YAAAA,GAAG,GAAGqrF,GAAG,CAAC9D,SAAJ,CAAcjlF,IAAI,CAACyiF,QAAnB,EAA6BC,SAA7B,EAAwC1iF,IAAI,CAACwqF,QAA7C,EAAuDjnD,QAAvD,CAAN;EACH;;EACD7lC,UAAAA,GAAG,CAACwB,IAAJ,GAAWuqG,GAAG,CAACW,WAAJ,GAAkB,MAAI,CAACvzF,IAAL,CAAUy3E,SAA5B,GAAwC,GAAxC,GAA8CtuF,IAAI,CAACgpG,IAAnD,GAA0D,GAA1D,GAAgEhpG,IAAI,CAACoY,KAAhF;EACA1a,UAAAA,GAAG,CAACq1D,QAAJ,CAAa9mB,IAAb,GAAoBjsC,IAApB;EACAtC,UAAAA,GAAG,CAAC6T,QAAJ,CAAa1O,IAAb,CAAkBsmG,OAAlB;;EACA,UAAA,MAAI,CAACngE,KAAL,CAAW3jB,GAAX,CAAe3nB,GAAf;EAEH,SAjCD;EAmCH;EAED,WAAK+4F,SAAL;EAEH;;;kCAEW;EAAA;;EACR,UAAIpvF,EAAE,GAAG,IAAT;;EACA,WAAKmkF,WAAL,GAAmB,UAAUx9E,CAAV,EAAa;EAC5B;EACA,aAAK+kD,QAAL,CAAcprC,KAAd,GAAsB,KAAK4b,QAAL,CAAc5b,KAAd,CAAoBrlB,KAApB,EAAtB,CAF4B;;EAI5B,YAAI+nG,SAAS,GAAG,EAAhB;EACA,aAAK9mE,QAAL,CAAc5b,KAAd,CAAoB2iF,MAApB,CAA2BD,SAA3B;EACA,aAAK9mE,QAAL,CAAck2B,SAAd,CAAwB;EAAE9xC,UAAAA,KAAK,EAAE,IAAIR,OAAJ,GAAYS,MAAZ,CAAmByiF,SAAS,CAAC/+F,CAA7B,EAAgC++F,SAAS,CAACxmF,CAA1C,EAA6CwmF,SAAS,CAAClgG,CAAV,GAAc,GAA3D;EAAT,SAAxB;;EAEA9C,QAAAA,EAAE,CAACohF,KAAH,CAAS18C,IAAT,CAAc;EACV9lC,UAAAA,IAAI,EAAE,SADI;EAEVkJ,UAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFC;EAGVzJ,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAHV,SAAd;;EAMA5kC,QAAAA,EAAE,CAAC0kC,IAAH,CAAQ;EAAE9lC,UAAAA,IAAI,EAAE,SAAR;EAAmBP,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAAvC,SAAR;EACH,OAfD;;EAgBA,WAAKw/C,UAAL,GAAkB,UAAUz9E,CAAV,EAAa;EAC3B,aAAKu1B,QAAL,CAAck2B,SAAd,CAAwB;EAAE9xC,UAAAA,KAAK,EAAE,KAAKorC,QAAL,CAAcprC;EAAvB,SAAxB;;EACAtgB,QAAAA,EAAE,CAACohF,KAAH,CAAS18C,IAAT,CAAc;EACV9lC,UAAAA,IAAI,EAAE,SADI;EAEVkJ,UAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFC;EAGVzJ,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAHV,SAAd;;EAKA5kC,QAAAA,EAAE,CAAC0kC,IAAH,CAAQ;EAAE9lC,UAAAA,IAAI,EAAE,QAAR;EAAkBP,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAAtC,SAAR;EACH,OARD;;EAUA,WAAKy/C,WAAL,GAAmB,UAAU19E,CAAV,EAAa;EAC5B3G,QAAAA,EAAE,CAACohF,KAAH,CAAS18C,IAAT,CAAc;EACV9lC,UAAAA,IAAI,EAAE,SADI;EAEVkJ,UAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFC;EAGVzJ,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAHV,SAAd;;EAKA5kC,QAAAA,EAAE,CAAC0kC,IAAH,CAAQ;EAAE9lC,UAAAA,IAAI,EAAE,SAAR;EAAmBP,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAAvC,SAAR;EACH,OAPD;;EASA,WAAK0/C,OAAL,GAAe,UAAU39E,CAAV,EAAa;EACxB3G,QAAAA,EAAE,CAAC0kC,IAAH,CAAQ;EAAE9lC,UAAAA,IAAI,EAAE,UAAR;EAAoBP,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAAxC,SAAR;EACH,OAFD;;EAIA,WAAKjD,KAAL,CAAWrX,QAAX,CAAoB,UAAAj0B,GAAG,EAAI;EACvB,YAAIA,GAAG,CAACwB,IAAJ,IAAYxB,GAAG,CAACwB,IAAJ,CAASqrG,QAAT,CAAkBd,GAAG,CAACW,WAAtB,CAAhB,EAAoD;EAChD1sG,UAAAA,GAAG,CAAC8V,EAAJ,CAAO,WAAP,EAAoB,MAAI,CAACg4E,WAAzB;EACA9tF,UAAAA,GAAG,CAAC8V,EAAJ,CAAO,UAAP,EAAmB,MAAI,CAACi4E,UAAxB;EAEA/tF,UAAAA,GAAG,CAAC8V,EAAJ,CAAO,WAAP,EAAoB,MAAI,CAACk4E,WAAzB;EACAhuF,UAAAA,GAAG,CAAC8V,EAAJ,CAAO,OAAP,EAAgB,MAAI,CAACm4E,OAArB;EACH;EACJ,OARD;EASH;;;gCAES53E,GAAGvN,SAAS;EAClB,UAAIiH,KAAK,GAAGjH,OAAO,CAACiH,KAAR,CAAc8M,KAAd,CAAoB,GAApB,CAAZ;;EACA,UAAIoN,KAAK,GAAG,KAAK4jE,YAAL,CAAkB+d,QAAlB,CAA2B77F,KAA3B,CAAZ,CAFkB;;;EAIlB,UAAInS,CAAC,CAACsE,QAAF,CAAWmU,CAAX,CAAJ,EAAmB;EACf4T,QAAAA,KAAK,GAAG5T,CAAR;EACH;;EACD,UAAIzY,CAAC,CAAC6B,OAAF,CAAU4W,CAAV,CAAJ,EAAkB;EACd4T,QAAAA,KAAK,GAAGrsB,CAAC,CAACgF,OAAF,CAAUyT,CAAV,EAAazY,CAAC,CAAC0B,OAAF,CAAUwtG,aAAV,EAAyB/8F,KAAzB,CAAb,CAAR;EACH;;EACD,UAAInS,CAAC,CAAC8D,UAAF,CAAa2U,CAAb,CAAJ,EAAqB;EACjB4T,QAAAA,KAAK,GAAG5T,CAAC,CAACrT,KAAF,CAAQ,IAAR,EAAc,CAAC+pG,QAAD,CAAd,CAAR;EACH;EAED,aAAO9iF,KAAP;EACH;;;gCACS;EAAA;;EAEN;EACA,WAAKqhB,KAAL,CAAWrX,QAAX,CAAoB,UAACj0B,GAAD,EAAS;EACzB,YAAIA,GAAG,CAACwB,IAAJ,IAAYxB,GAAG,CAACwB,IAAJ,CAASqrG,QAAT,CAAkBd,GAAG,CAACW,WAAtB,CAAhB,EAAoD;EAChD1sG,UAAAA,GAAG,CAACuV,GAAJ,CAAQ,OAAR,EAAiB,MAAI,CAAC04E,OAAtB;EACAjuF,UAAAA,GAAG,CAACuV,GAAJ,CAAQ,WAAR,EAAqB,MAAI,CAACu4E,WAA1B;EACA9tF,UAAAA,GAAG,CAACuV,GAAJ,CAAQ,UAAR,EAAoB,MAAI,CAACw4E,UAAzB;EACA/tF,UAAAA,GAAG,CAACuV,GAAJ,CAAQ,WAAR,EAAqB,MAAI,CAACy4E,WAA1B;EACH;EACJ,OAPD;;EAUA;EAEH;;;kCACW;EACR,WAAKpoC,OAAL;EACA,WAAK/vC,IAAL;EACH;;;;IAzPawzF;;EA4PlB0C,GAAG,CAACW,WAAJ,GAAkB,UAAlB;;EC5PA,IAAIM,cAAc,GAAG,IAArB;;MACM9uC;;;;;EACF,mBAAYorC,OAAZ,EAAqBxhG,GAArB,EAA0B;EAAA;;EAAA;;EACtB,iFAAMwhG,OAAN;EAEA,UAAK9nG,IAAL,GAAY,MAAZ;EACA,UAAK+G,IAAL,GAAY,MAAZ;EACA,UAAKiV,KAAL,GAAa,QAAb;EAEA,UAAK+Y,IAAL,GAAY;EAAE;EACVjd,MAAAA,OAAO,EAAE,CADD;EAERs3E,MAAAA,SAAS,EAAE,YAFH;EAEgB;EACxBpuB,MAAAA,WAAW,EAAE,IAHL;EAIRj7B,MAAAA,SAAS,EAAE,CAJH;EAKRkhD,MAAAA,QAAQ,EAAE,OALF;EAMRwkB,MAAAA,MAAM,EAAE;EANA,KAAZ;EASA,UAAKC,IAAL,GAAY;EAAE;EACV5zF,MAAAA,OAAO,EAAE,CADD;EACI;EACZs3E,MAAAA,SAAS,EAAE,QAFH;EAGRuc,MAAAA,MAAM,EAAE,KAHA;EAGO;EACf3yF,MAAAA,MAAM,EAAE,CAJA;EAIG;EACX+nD,MAAAA,SAAS,EAAE,SALH;EAMRC,MAAAA,WAAW,EAAE;EANL,KAAZ;EASA,UAAK4K,IAAL,GAAY;EAAE;EACV;EACA9zD,MAAAA,OAAO,EAAE,CAFD;EAGRipD,MAAAA,SAAS,EAAE,IAHH;EAIR/6C,MAAAA,KAAK,EAAE;EAJC,KAAZ;;EAQA5pB,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB;;EACA,UAAK+hD,IAAL;;EAlCsB;EAoCzB;;;;6BACM;EACH,WAAKujD,SAAL,GAAiB,KAAKriB,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAxB,CAAjB;EACA,WAAK6rG,SAAL,GAAiB,KAAKtiB,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAxB,CAAjB;EACA,WAAK8rG,SAAL,GAAiB,KAAKviB,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAxB,CAAjB;EACA,WAAK8pC,KAAL,CAAW3jB,GAAX,CAAe,KAAKylF,SAApB;EACA,WAAK9hE,KAAL,CAAW3jB,GAAX,CAAe,KAAK0lF,SAApB;EACA,WAAK/hE,KAAL,CAAW3jB,GAAX,CAAe,KAAK2lF,SAApB;EACH;;;gCACSj3F,GAAGvN,SAAS;EAElB,UAAImhB,KAAK,GAAG,KAAK4jE,YAAL,CAAkB+d,QAAlB,CAA2B9iG,OAAO,CAACiH,KAAnC,CAAZ,CAFkB;;;EAKlB,UAAInS,CAAC,CAACsE,QAAF,CAAWmU,CAAX,CAAJ,EAAmB;EACf4T,QAAAA,KAAK,GAAG5T,CAAR;EACH;;EACD,UAAIzY,CAAC,CAAC6B,OAAF,CAAU4W,CAAV,CAAJ,EAAkB;EACd4T,QAAAA,KAAK,GAAGrsB,CAAC,CAACgF,OAAF,CAAUyT,CAAV,EAAazY,CAAC,CAAC0B,OAAF,CAAUwtG,aAAV,EAAyB/8F,KAAzB,CAAb,CAAR;EACH;;EACD,UAAInS,CAAC,CAAC8D,UAAF,CAAa2U,CAAb,CAAJ,EAAqB;EACjB4T,QAAAA,KAAK,GAAG5T,CAAC,CAACrT,KAAF,CAAQ,IAAR,EAAc,CAAC+pG,QAAD,CAAd,CAAR;EACH;EAED,aAAO9iF,KAAP;EACH;;;oCACa;EACV;EACH;;;6BACM;EAAA;;EACH,UAAItgB,EAAE,GAAG,IAAT;EACA,UAAI0hF,GAAG,GAAG,KAAKN,KAAL,CAAWM,GAArB;EACA,WAAKkhB,WAAL;EAEA,UAAMgB,QAAQ,GAAG,GAAjB;;EALG,iCAMMx9F,MANN;EAOC,YAAIua,MAAM,GAAG,MAAI,CAACgiF,SAAL,CAAe,MAAI,CAAC/1E,IAAL,CAAUisC,WAAzB,EAAsC;EAAEzyD,UAAAA,KAAK,EAAEA;EAAT,SAAtC,KAA2D,KAAxE;;EACA,YAAIq8F,QAAQ,GAAG,MAAI,CAAC5C,QAAL,CAAcz5F,MAAd,CAAf;EACA,YAAIkL,MAAM,GAAG,IAAb;EAAA,YAAmBuyF,YAAY,GAAG,EAAlC;EAEA,YAAIC,KAAK,GAAGrB,QAAQ,CAACvtG,GAAT,CAAa,UAAAyD,IAAI,EAAI;EAC7B,cAAIA,IAAI,CAACgpG,IAAL,GAAY,CAAhB,EAAmB;EACfkC,YAAAA,YAAY,CAACnvG,IAAb,CAAkBiE,IAAI,CAACmpG,OAAvB;EACA,mBAAO,IAAI5lF,OAAJ,GAAc1gB,IAAd,CAAmB7C,IAAI,CAAC8E,GAAxB,EAA6ByiC,IAA7B,CAAkCvnC,IAAI,CAAC8E,GAAL,CAASqU,CAAT,GAAanZ,IAAI,CAACmpG,OAAL,CAAahwF,CAA5D,CAAP;EACH;;EACD,iBAAOnZ,IAAI,CAAC8E,GAAZ;EACH,SANW,CAAZ;;EASA,YAAIuC,EAAE,CAAC4sB,IAAH,CAAQ02E,MAAZ,EAAoB;EAChB,cAAI9uB,KAAK,GAAG,IAAIzB,gBAAJ,CAAqB+wB,KAArB,CAAZ;EACAxyF,UAAAA,MAAM,GAAGkjE,KAAK,CAAC1L,eAAN,CAAsB86B,QAAtB,CAAT;;EACA,cAAIC,YAAY,CAACjtG,MAAb,GAAsB,CAA1B,EAA6B;EACzB,gBAAImtG,MAAM,GAAG,IAAIhxB,gBAAJ,CAAqB8wB,YAArB,CAAb;EACAA,YAAAA,YAAY,GAAGE,MAAM,CAACj7B,eAAP,CAAuB86B,QAAvB,CAAf;EACH;EACJ,SAPD,MAOO;EACHtyF,UAAAA,MAAM,GAAGwyF,KAAT;EACH;;EAGD,YAAIl3E,IAAI,GAAG80D,GAAG,CAACrC,gBAAJ,CAAqB/tE,MAArB,EAA6B,MAAI,CAACsb,IAAL,CAAUgR,SAAvC,EAAkDjd,MAAlD,EAA0D,IAA1D,CAAX;EACAiM,QAAAA,IAAI,CAAC21B,OAAL,GAAe,CAAC,CAAC,MAAI,CAAC31B,IAAL,CAAUjd,OAA3B;;EACA,QAAA,MAAI,CAAC8zF,SAAL,CAAezlF,GAAf,CAAmB4O,IAAnB,EAlCD;;;EAsCC,YAAIo3E,QAAQ,GAAG,EAAf;EACA1yF,QAAAA,MAAM,CAACtc,OAAP,CAAe,UAAAyc,KAAK,EAAI;EACpBuyF,UAAAA,QAAQ,GAAGA,QAAQ,CAACpvG,MAAT,CAAgB6c,KAAK,CAACg+B,OAAN,EAAhB,CAAX;EACH,SAFD;;EAGA,YAAIo0D,YAAY,CAACjtG,MAAb,GAAsB,CAA1B,EAA6B;EACzB;EACA,eAAK,IAAIE,CAAC,GAAG+sG,YAAY,CAACjtG,MAAb,GAAsB,CAAnC,EAAsCE,CAAC,IAAI,CAA3C,EAA8CA,CAAC,EAA/C,EAAmD;EAC/CktG,YAAAA,QAAQ,GAAGA,QAAQ,CAACpvG,MAAT,CAAgBivG,YAAY,CAAC/sG,CAAD,CAAZ,CAAgB24C,OAAhB,EAAhB,CAAX;EACH;EACJ,SALD,MAKO;EACH;EACAu0D,UAAAA,QAAQ,CAAC5iG,OAAT,CAAiB4iG,QAAQ,CAAC,CAAD,CAAzB,EAA8B,CAA9B,EAAiCA,QAAQ,CAAC,CAAD,CAAzC;EACAA,UAAAA,QAAQ,CAACtvG,IAAT,CAAcsvG,QAAQ,CAAC,CAAC1yF,MAAM,CAAC1a,MAAP,GAAgB,CAAjB,IAAsB,CAAvB,CAAtB,EAAiD,CAAjD,EAAoDotG,QAAQ,CAAC,CAAC1yF,MAAM,CAAC1a,MAAP,GAAgB,CAAjB,IAAsB,CAAtB,GAA0B,CAA3B,CAA5D;EACH;;EAED,YAAIqtG,OAAO,GAAGviB,GAAG,CAAC3B,kBAAJ,CAAuBikB,QAAvB,EAAiC;EAAEprC,UAAAA,SAAS,EAAEj4C;EAAb,SAAjC,CAAd;EACAsjF,QAAAA,OAAO,CAACv4C,QAAR,GAAmB+2C,QAAnB;EACAwB,QAAAA,OAAO,CAAC1hD,OAAR,GAAkB,CAAC,CAAC,MAAI,CAACkhB,IAAL,CAAU9zD,OAA9B;;EACA,QAAA,MAAI,CAAC+zF,SAAL,CAAe1lF,GAAf,CAAmBimF,OAAnB,EAxDD;;;EA8DCH,QAAAA,KAAK,CAAC9uG,OAAN,CAAc,UAAAyc,KAAK,EAAI;EAEnB;EACA,cAAIjC,IAAI,GAAGkyE,GAAG,CAACpC,iBAAJ,CAAsB,EAAtB,EAA0B;EAAE1mB,YAAAA,SAAS,EAAEj4C;EAAb,WAA1B,CAAX;EACAnR,UAAAA,IAAI,CAACtF,QAAL,CAAc1O,IAAd,CAAmBiW,KAAnB;EACAjC,UAAAA,IAAI,CAAC+yC,OAAL,GAAe,CAAC,CAAC,MAAI,CAACghD,IAAL,CAAU5zF,OAA3B;;EACA,UAAA,MAAI,CAACg0F,SAAL,CAAe3lF,GAAf,CAAmBxO,IAAnB;EACH,SAPD;EA9DD;;EAMH,WAAK,IAAIpJ,MAAT,IAAkB,KAAKy5F,QAAvB,EAAiC;EAAA,cAAxBz5F,MAAwB;EAiEhC;;EACD,WAAKgpF,SAAL;EACH;;;kCACW;EAAA;;EACR,WAAK/K,WAAL,GAAmB,UAAC19E,CAAD,EAAO;EACtB,YAAIu9F,OAAO,GAAGv9F,CAAC,CAAC4rD,UAAF,CAAa,CAAb,CAAd;EACA,YAAI93D,MAAM,GAAGkM,CAAC,CAAClM,MAAf;;EACA,YAAIypG,OAAJ,EAAa;EACT,cAAIzmG,GAAG,GAAGymG,OAAO,CAACzyF,KAAR,CAAcxW,KAAd,EAAV;;EACA,cAAIkpG,MAAM,GAAG,MAAI,CAACjgB,YAAL,CAAkBviD,KAAlB,CAAwByiE,YAAxB,CAAqC3mG,GAArC,CAAb;;EACA,cAAIqlC,SAAS,GAAGroC,MAAM,CAACixD,QAAP,CAAgBx2D,GAAhB,CAAoB,UAAAmB,GAAG,EAAI;EACvC,gBAAIA,GAAG,CAACsrG,IAAJ,GAAW,CAAf,EAAkB;EACd,qBAAO,IAAIzlF,OAAJ,GAAc1gB,IAAd,CAAmBnF,GAAG,CAACoH,GAAvB,EAA4ByiC,IAA5B,CAAiC7pC,GAAG,CAACoH,GAAJ,CAAQqU,CAAR,GAAYzb,GAAG,CAACyrG,OAAJ,CAAYhwF,CAAzD,CAAP;EACH;;EACD,mBAAOzb,GAAG,CAACoH,GAAX;EACH,WALe,CAAhB;EAOA,cAAI4mG,SAAS,GAAG3d,cAAc,CAAC5jD,SAAD,EAAYqhE,MAAZ,CAA9B;;EACA,cAAIG,QAAQ,GAAGrwG,CAAC,CAAC0F,IAAF,CAAOc,MAAM,CAACixD,QAAd,EAAwB,UAAA/yD,IAAI,EAAI;EAC3C,gBAAI+K,IAAI,GAAG/K,IAAI,CAAC8E,GAAL,CAASxC,KAAT,EAAX;;EACA,gBAAItC,IAAI,CAACgpG,IAAL,GAAY,CAAhB,EAAmB;EACfj+F,cAAAA,IAAI,GAAG,IAAIwY,OAAJ,GAAc1gB,IAAd,CAAmB7C,IAAI,CAAC8E,GAAxB,EAA6ByiC,IAA7B,CAAkCvnC,IAAI,CAAC8E,GAAL,CAASqU,CAAT,GAAanZ,IAAI,CAACmpG,OAAL,CAAahwF,CAA5D,CAAP;EACH;;EACD,mBAAOpO,IAAI,CAACwmB,MAAL,CAAYm6E,SAAZ,CAAP;EACH,WANc,CAAf;;EAQA,cAAI,CAAChB,cAAD,IAAmB,CAACgB,SAAS,CAACn6E,MAAV,CAAiBm5E,cAAjB,CAAxB,EAA0D;EACtD;EACA,YAAA,MAAI,CAACjiB,KAAL,CAAW18C,IAAX,CAAgB;EACZ9lC,cAAAA,IAAI,EAAE,SADM;EAEZkJ,cAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFG;EAGZzJ,cAAAA,IAAI,EAAEimG;EAHM,aAAhB;;EAKAjB,YAAAA,cAAc,GAAGgB,SAAjB;;EACA,YAAA,MAAI,CAAC3/D,IAAL,CAAU;EAAE9lC,cAAAA,IAAI,EAAE,WAAR;EAAqBP,cAAAA,IAAI,EAAEimG;EAA3B,aAAV;EACH;;EACD,UAAA,MAAI,CAAC5/D,IAAL,CAAU;EAAE9lC,YAAAA,IAAI,EAAE;EAAR,WAAV,EA7BS;;EA+BZ;EACJ,OAnCD;;EAoCD,WAAKwlF,UAAL,GAAkB,UAACz9E,CAAD,EAAO;EACpB,YAAI,MAAI,CAAC49F,aAAT,EAAwB;;EAUxB,QAAA,MAAI,CAACnjB,KAAL,CAAW18C,IAAX,CAAgB;EACZ9lC,UAAAA,IAAI,EAAE,SADM;EAEZkJ,UAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFG;EAGZzJ,UAAAA,IAAI,EAAE;EAHM,SAAhB;;EAKA,QAAA,MAAI,CAACqmC,IAAL,CAAU;EAAE9lC,UAAAA,IAAI,EAAE;EAAR,SAAV;EACH,OAjBF;;EAkBC,WAAK8kG,SAAL,CAAep5E,QAAf,CAAwB,UAAAj0B,GAAG,EAAI;EAC3BA,QAAAA,GAAG,CAAC8V,EAAJ,CAAO,WAAP,EAAoB,MAAI,CAACk4E,WAAzB;EACAhuF,QAAAA,GAAG,CAAC8V,EAAJ,CAAO,UAAP,EAAmB,MAAI,CAACi4E,UAAxB;EACH,OAHD;EAKA,WAAKj4E,EAAL,CAAQ,WAAR,EAAqB,UAACxF,CAAD,EAAO;EACxB,QAAA,MAAI,CAACg9F,SAAL,CAAer5E,QAAf,CAAwB,UAAAj0B,GAAG,EAAI;EAC3B,cAAIA,GAAG,CAACq1D,QAAJ,CAAa84C,OAAjB,EAA0B;EACtBnuG,YAAAA,GAAG,CAACq1D,QAAJ,CAAa84C,OAAb,GAAuB,KAAvB;EACAnuG,YAAAA,GAAG,CAAC4G,KAAJ,CAAUue,cAAV,CAAyB,GAAzB;EACH;;EACD,cAAI9X,IAAI,GAAGiD,CAAC,CAACtI,IAAF,CAAOZ,GAAP,CAAWxC,KAAX,EAAX;;EACA,cAAI0L,CAAC,CAACtI,IAAF,CAAOsjG,IAAP,GAAc,CAAlB,EAAqB;EACjBj+F,YAAAA,IAAI,GAAG,IAAIwY,OAAJ,GAAc1gB,IAAd,CAAmBmL,CAAC,CAACtI,IAAF,CAAOZ,GAA1B,EAA+ByiC,IAA/B,CAAoCv5B,CAAC,CAACtI,IAAF,CAAOZ,GAAP,CAAWqU,CAAX,GAAenL,CAAC,CAACtI,IAAF,CAAOyjG,OAAP,CAAehwF,CAAlE,CAAP;EACH;;EACD,cAAI,CAACzb,GAAG,CAACq1D,QAAJ,CAAa84C,OAAd,IAAyBnuG,GAAG,CAAC6T,QAAJ,CAAaggB,MAAb,CAAoBxmB,IAApB,CAA7B,EAAwD;EACpDrN,YAAAA,GAAG,CAACq1D,QAAJ,CAAa84C,OAAb,GAAuB,IAAvB;EACAnuG,YAAAA,GAAG,CAAC4G,KAAJ,CAAUue,cAAV,CAAyB,CAAzB;EACH;EACJ,SAbD;EAcH,OAfD;EAgBA,WAAKrP,EAAL,CAAQ,UAAR,EAAoB,UAACxF,CAAD,EAAO;EACvB,QAAA,MAAI,CAACg9F,SAAL,CAAer5E,QAAf,CAAwB,UAAAj0B,GAAG,EAAI;EAC3B,cAAIA,GAAG,CAACq1D,QAAJ,CAAa84C,OAAjB,EAA0B;EACtBnuG,YAAAA,GAAG,CAACq1D,QAAJ,CAAa84C,OAAb,GAAuB,KAAvB;EACAnuG,YAAAA,GAAG,CAAC4G,KAAJ,CAAUue,cAAV,CAAyB,GAAzB;EACH;EACJ,SALD;EAMH,OAPD;EAQH;;;gCACQ;EAAA;;EACL,WAAKkoF,SAAL,CAAep5E,QAAf,CAAwB,UAAAj0B,GAAG,EAAI;EAC3BA,QAAAA,GAAG,CAACuV,GAAJ,CAAQ,WAAR,EAAqB,MAAI,CAACy4E,WAA1B;EACAhuF,QAAAA,GAAG,CAACuV,GAAJ,CAAQ,UAAR,EAAoB,MAAI,CAACw4E,UAAzB;EACH,OAHD;;EAIA;EACH;;;kCACW;EACR,WAAKnoC,OAAL;EACA,WAAK/vC,IAAL;EACH;;;;IA3OcwzF;;ECDnB,IAAI2D,gBAAc,GAAG,IAArB;;MAEMoB;;;;;EACF,gBAAY9E,OAAZ,EAAqBxhG,GAArB,EAA0B;EAAA;;EAAA;;EACtB,8EAAMwhG,OAAN;EAEA,UAAK9nG,IAAL,GAAY,MAAZ;EACA,UAAK+G,IAAL,GAAY,MAAZ;EACA,UAAKiV,KAAL,GAAa,QAAb;EAEA,UAAK4vD,IAAL,GAAY;EAAE;EACV;EACA9zD,MAAAA,OAAO,EAAE,CAFD;EAGRipD,MAAAA,SAAS,EAAE,IAHH;EAIR/6C,MAAAA,KAAK,EAAE,GAJC;EAKR6mF,MAAAA,SAAS,EAAEjrG,QALH;EAMR6pG,MAAAA,MAAM,EAAE;EANA,KAAZ;;EAUArvG,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB;;EACA,UAAK+hD,IAAL;;EAlBsB;EAoBzB;;;;6BACM;EACH,WAAKykD,SAAL,GAAiB,KAAKvjB,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EACrCtsC,QAAAA,IAAI,EAAE;EAD+B,OAAxB,CAAjB;EAGA,WAAK0sG,aAAL,GAAqB,KAAKnjB,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EACzCtsC,QAAAA,IAAI,EAAE;EADmC,OAAxB,CAArB;EAIA,WAAK8pC,KAAL,CAAW3jB,GAAX,CAAe,KAAK2mF,SAApB;EACA,WAAKhjE,KAAL,CAAW3jB,GAAX,CAAe,KAAKumF,aAApB;EAEH;;;gCACS73F,GAAGvN,SAAS;EAClB,UAAImhB,KAAK,GAAG,KAAK4jE,YAAL,CAAkB+d,QAAlB,CAA2B9iG,OAAO,CAACiH,KAAnC,CAAZ,CADkB;;;EAIlB,UAAInS,CAAC,CAACsE,QAAF,CAAWmU,CAAX,CAAJ,EAAmB;EACf4T,QAAAA,KAAK,GAAG5T,CAAR;EACH;;EACD,UAAIzY,CAAC,CAAC6B,OAAF,CAAU4W,CAAV,CAAJ,EAAkB;EACd4T,QAAAA,KAAK,GAAGrsB,CAAC,CAACgF,OAAF,CAAUyT,CAAV,EAAazY,CAAC,CAAC0B,OAAF,CAAUwtG,aAAV,EAAyB/8F,KAAzB,CAAb,CAAR;EACH;;EACD,UAAInS,CAAC,CAAC8D,UAAF,CAAa2U,CAAb,CAAJ,EAAqB;EACjB4T,QAAAA,KAAK,GAAG5T,CAAC,CAACrT,KAAF,CAAQ,IAAR,EAAc,CAAC+pG,QAAD,CAAd,CAAR;EACH;EAED,aAAO9iF,KAAP;EACH;;;oCAEa;EACV;EAEH;;;6BACM;EACH,UAAItgB,EAAE,GAAG,IAAT;EACA,UAAI0hF,GAAG,GAAG,KAAKN,KAAL,CAAWM,GAArB;EACA,WAAKkhB,WAAL;;EACA,UAAIplG,IAAI,GAAG,KAAK0mF,YAAL,CAAkBse,WAAlB,EAAX;;EAEA,UAAIrf,QAAQ,GAAG3lF,IAAI,CAACyd,CAAL,GAAS,GAAxB;EAEA,UAAM2oF,QAAQ,GAAG,GAAjB;;EACA,WAAK,IAAIx9F,MAAT,IAAkB,KAAKy5F,QAAvB,EAAiC;EAC7B,YAAIl/E,MAAM,GAAG,KAAKgiF,SAAL,CAAe,IAAf,EAAqB;EAAEv8F,UAAAA,KAAK,EAAEA;EAAT,SAArB,KAA0C,KAAvD;;EACA,YAAIq8F,QAAQ,GAAG,KAAK5C,QAAL,CAAcz5F,MAAd,CAAf;EACA,YAAIkL,MAAM,GAAG,IAAb,CAH6B;EAK7B;;EAEA,YAAIwyF,KAAK,GAAGrB,QAAQ,CAACvtG,GAAT,CAAa,UAAAyD,IAAI,EAAI;EAC7B,iBAAOA,IAAI,CAAC8E,GAAZ;EACH,SAFW,CAAZ;;EAGA,YAAI,KAAKgmE,IAAL,CAAU6/B,MAAd,EAAsB;EAClB,cAAI9uB,KAAK,GAAG,IAAIzB,gBAAJ,CAAqB+wB,KAArB,CAAZ;EACAxyF,UAAAA,MAAM,GAAGkjE,KAAK,CAAC1L,eAAN,CAAsB86B,QAAtB,CAAT;EACH,SAHD,MAGO;EACHtyF,UAAAA,MAAM,GAAGwyF,KAAT;EACH;;EAGD,YAAIY,SAAS,GAAGnuG,IAAI,CAACsC,GAAL,CAAS,GAAT,EAActC,IAAI,CAACiD,GAAL,CAAS2pF,QAAT,EAAmB,KAAK1f,IAAL,CAAUihC,SAA7B,CAAd,CAAhB,CAlB6B;;EAqB7BpzF,QAAAA,MAAM,CAAClQ,OAAP,CAAekQ,MAAM,CAAC,CAAD,CAAN,CAAUrW,KAAV,GAAkBilC,IAAlB,CAAuB,CAAvB,CAAf;EACA5uB,QAAAA,MAAM,CAAC5c,IAAP,CAAY4c,MAAM,CAAEA,MAAM,CAAC1a,MAAP,GAAgB,CAAlB,CAAN,CAA4BqE,KAA5B,GAAoCilC,IAApC,CAAyC,CAAzC,CAAZ;EACA,YAAI+jE,OAAO,GAAGviB,GAAG,CAACzB,UAAJ,CAAe3uE,MAAf,EAAuBozF,SAAvB,EAAkC;EAAE9rC,UAAAA,SAAS,EAAEj4C;EAAb,SAAlC,CAAd;EAEAsjF,QAAAA,OAAO,CAACpsG,IAAR,GAAe4sG,IAAI,CAACG,YAAL,GAAoBx+F,MAAnC;EACA69F,QAAAA,OAAO,CAACv4C,QAAR,GAAmB+2C,QAAnB;EACA,YAAI9W,IAAI,GAAGr6E,MAAM,CAAC,CAAD,CAAN,CAAU2J,CAArB;EACA0wE,QAAAA,IAAI,GAAGA,IAAI,GAAG+Y,SAAS,GAAG,GAA1B;EACAT,QAAAA,OAAO,CAAC1hD,OAAR,GAAkB,CAAC,CAAC,KAAKkhB,IAAL,CAAU9zD,OAA9B;EACAs0F,QAAAA,OAAO,CAAC/5F,QAAR,CAAiBk2B,IAAjB,CAAsBurD,IAAtB;EACA,aAAKhqD,KAAL,CAAW3jB,GAAX,CAAeimF,OAAf;EAGH;;EACDjkG,MAAAA,EAAE,CAACovF,SAAH;EACH;;;kCACW;EAAA;;EAER,WAAK/K,WAAL,GAAmB,UAAC19E,CAAD,EAAO;EACtB,YAAIu9F,OAAO,GAAGv9F,CAAC,CAAC4rD,UAAF,CAAa,CAAb,CAAd;EACA,YAAI93D,MAAM,GAAGkM,CAAC,CAAClM,MAAf;;EACA,YAAIypG,OAAJ,EAAa;EACT,cAAIzmG,GAAG,GAAGymG,OAAO,CAACzyF,KAAR,CAAcxW,KAAd,EAAV;;EACA,cAAIkpG,MAAM,GAAG,MAAI,CAACjgB,YAAL,CAAkBviD,KAAlB,CAAwByiE,YAAxB,CAAqC3mG,GAArC,CAAb;;EACA,cAAIqlC,SAAS,GAAGroC,MAAM,CAACixD,QAAP,CAAgBx2D,GAAhB,CAAoB,UAAAmB,GAAG,EAAI;EACvC,mBAAOA,GAAG,CAACoH,GAAX;EACH,WAFe,CAAhB;EAIA,cAAI4mG,SAAS,GAAG3d,cAAc,CAAC5jD,SAAD,EAAYqhE,MAAZ,CAA9B;;EACA,cAAIG,QAAQ,GAAGrwG,CAAC,CAAC0F,IAAF,CAAOc,MAAM,CAACixD,QAAd,EAAwB,UAAA/yD,IAAI,EAAI;EAC3C,mBAAOA,IAAI,CAAC8E,GAAL,CAASysB,MAAT,CAAgBm6E,SAAhB,CAAP;EACH,WAFc,CAAf;;EAIA,cAAI,CAAChB,gBAAD,IAAmB,CAACgB,SAAS,CAACn6E,MAAV,CAAiBm5E,gBAAjB,CAAxB,EAA0D;EACtD,YAAA,MAAI,CAACwB,UAAL,CAAgBP,QAAhB;;EACA,YAAA,MAAI,CAACljB,KAAL,CAAW18C,IAAX,CAAgB;EACZ9lC,cAAAA,IAAI,EAAE,SADM;EAEZkJ,cAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFG;EAGZzJ,cAAAA,IAAI,EAAEimG;EAHM,aAAhB;;EAKAjB,YAAAA,gBAAc,GAAGgB,SAAjB;;EACA,YAAA,MAAI,CAAC3/D,IAAL,CAAU;EAAE9lC,cAAAA,IAAI,EAAE,WAAR;EAAqBP,cAAAA,IAAI,EAAEimG;EAA3B,aAAV;EACH;;EACD,UAAA,MAAI,CAAC5/D,IAAL,CAAU;EAAE9lC,YAAAA,IAAI,EAAE;EAAR,WAAV,EAtBS;;EAwBZ;EACJ,OA5BD;;EA8BA,WAAKwlF,UAAL,GAAkB,UAACz9E,CAAD,EAAO;EACrB,YAAI,MAAI,CAAC49F,aAAT,EAAwB;EAEpB,UAAA,MAAI,CAACA,aAAL,CAAmBj6E,QAAnB,CAA4B,UAAA3xB,IAAI,EAAI;EAChCA,YAAAA,IAAI,CAACwT,EAAL,CAAQ,SAAR,EAAmB,UAACxF,CAAD,EAAO;EACtB,cAAA,MAAI,CAAC+9B,IAAL,CAAU;EAAE9lC,gBAAAA,IAAI,EAAE,WAAR;EAAqBP,gBAAAA,IAAI,EAAEsI,CAAC,CAAClM,MAAF,CAASixD;EAApC,eAAV;EACH,aAFD;EAGH,WAJD;;EAKA,UAAA,MAAI,CAACzP,OAAL,CAAa,MAAI,CAACsoD,aAAlB;EACH;;EAED,QAAA,MAAI,CAACnjB,KAAL,CAAW18C,IAAX,CAAgB;EACZ9lC,UAAAA,IAAI,EAAE,SADM;EAEZkJ,UAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFG;EAGZzJ,UAAAA,IAAI,EAAE;EAHM,SAAhB;;EAKA,QAAA,MAAI,CAACqmC,IAAL,CAAU;EAAE9lC,UAAAA,IAAI,EAAE;EAAR,SAAV;EACH,OAjBD;;EAoBA,WAAK+iC,KAAL,CAAWrX,QAAX,CAAoB,UAAAj0B,GAAG,EAAI;EACvB,YAAIA,GAAG,CAACwB,IAAJ,IAAYxB,GAAG,CAACwB,IAAJ,CAASqrG,QAAT,CAAkBuB,IAAI,CAACG,YAAvB,CAAhB,EAAsD;EAClDvuG,UAAAA,GAAG,CAAC8V,EAAJ,CAAO,WAAP,EAAoB,MAAI,CAACk4E,WAAzB;EACAhuF,UAAAA,GAAG,CAAC8V,EAAJ,CAAO,UAAP,EAAmB,MAAI,CAACi4E,UAAxB;EACH;EACJ,OALD;EAMH;;;iCACU0gB,WAAW;EAClB,UAAIpjB,GAAG,GAAG,KAAKN,KAAL,CAAWM,GAArB;EACA,UAAIrhF,GAAG,GAAGykG,SAAS,CAACptG,KAApB;EACA,UAAIwS,QAAQ,GAAG46F,SAAS,CAACrnG,GAAzB;EAEA,UAAIk7D,SAAS,GAAG;EAAEH,QAAAA,QAAQ,EAAE,EAAZ;EAAgBI,QAAAA,SAAS,EAAEksC,SAAS,CAACxkF,KAArC;EAA4Cu4C,QAAAA,WAAW,EAAE,MAAzD;EAAiEj7B,QAAAA,SAAS,EAAE,CAA5E;EAA+Ei+C,QAAAA,MAAM,EAAE;EAAvF,OAAhB;EACA,UAAI5zE,MAAM,GAAG,EAAb,CANkB;;EASlB,WAAKg0C,OAAL,CAAa,KAAKsoD,aAAlB;EAEA,UAAIQ,OAAO,GAAGrjB,GAAG,CAAClC,eAAJ,CAAoBn/E,GAApB,EAAyBs4D,SAAzB,CAAd;EACAosC,MAAAA,OAAO,CAAC,CAAD,CAAP,CAAW76F,QAAX,CAAoB1O,IAApB,CAAyB0O,QAAzB;EACA66F,MAAAA,OAAO,CAAC,CAAD,CAAP,CAAW76F,QAAX,CAAoBg2B,IAApB,CAAyBj4B,MAAM,GAAG88F,OAAO,CAAC,CAAD,CAAP,CAAW76F,QAAX,CAAoB4H,CAAtD;EACA,WAAKyyF,aAAL,CAAmBvmF,GAAnB,CAAuB+mF,OAAO,CAAC,CAAD,CAA9B;EAEH;;;kCAEW;EACR,WAAK9oD,OAAL;EACA,WAAK/vC,IAAL;EACH;;;8BACOy1B,OAAO;EAAA;;EAEX;EACAA,MAAAA,KAAK,GAAGA,KAAK,IAAI,KAAKA,KAAtB;EACAA,MAAAA,KAAK,CAACrX,QAAN,CAAe,UAAAj0B,GAAG,EAAI;EAClB,YAAIA,GAAG,CAACwB,IAAJ,IAAYxB,GAAG,CAACwB,IAAJ,CAASqrG,QAAT,CAAkBuB,IAAI,CAACG,YAAvB,CAAhB,EAAsD;EAClDvuG,UAAAA,GAAG,CAACuV,GAAJ,CAAQ,WAAR,EAAqB,MAAI,CAACy4E,WAA1B;EACAhuF,UAAAA,GAAG,CAACuV,GAAJ,CAAQ,UAAR,EAAoB,MAAI,CAACw4E,UAAzB;EACH;EACJ,OALD;;EAOA,wEAAcziD,KAAd;EACH;;;;IAlMc+9D;;EAqMnB+E,IAAI,CAACG,YAAL,GAAoB,eAApB;;MCxMMI;;;;;EACF,eAAYrF,OAAZ,EAAqBxhG,GAArB,EAA0B;EAAA;;EAAA;;EACtB,6EAAMwhG,OAAO,CAAC3G,SAAd;EAEA,UAAKnhG,IAAL,GAAY,KAAZ;EACA,UAAK+G,IAAL,GAAY,OAAZ;EAEA,UAAKiV,KAAL,GAAa,KAAb;EAEA,UAAKzN,KAAL,GAAa,IAAb;EACA,UAAK/D,IAAL,GAAY,IAAZ,CATsB;EAWtB;EACA;;EACA,UAAKsO,UAAL,GAAkB,IAAlB;EACA,UAAK+rE,SAAL,GAAiB,CAAjB;EACA,UAAK8f,UAAL,GAAkB,IAAlB,CAfsB;;EAiBtB,UAAKyI,YAAL,GAAoB,CAApB;EAEA,UAAK/kG,MAAL,GAAc;EACV2R,MAAAA,CAAC,EAAE,CADO;EAEVC,MAAAA,CAAC,EAAE,CAFO;EAGVmJ,MAAAA,CAAC,EAAE;EAHO,KAAd;EAMA,UAAKzL,IAAL,GAAY;EACRy3E,MAAAA,SAAS,EAAE,QADH;EAGRp2E,MAAAA,MAAM,EAAE,IAHA;EAGM;EACdpB,MAAAA,WAAW,EAAE,CAJL;EAIQ;EAChBF,MAAAA,SAAS,EAAE,IALH;EAKQ;EAChBV,MAAAA,SAAS,EAAE,EANH;EAMM;EACda,MAAAA,OAAO,EAAE,EAPD;EAOK;EACbtF,MAAAA,MAAM,EAAE,EARA;EASRwuD,MAAAA,SAAS,EAAE,IATH;EASS;EACjBsV,MAAAA,KAAK,EAAE;EACHv+D,QAAAA,OAAO,EAAE;EADN,OAVC;EAaRnY,MAAAA,MAAM,EAAE;EACJmY,QAAAA,OAAO,EAAE,KADL;EAEJkB,QAAAA,MAAM,EAAE,CAFJ;EAGJgN,QAAAA,KAAK,EAAE;EAHH;EAbA,KAAZ;EAoBA,UAAKjN,KAAL,GAAa;EACTxK,MAAAA,KAAK,EAAE,IADE;EACI;EACbuJ,MAAAA,OAAO,EAAE,KAFA;EAGTnJ,MAAAA,MAAM,EAAE,IAHC;EAITyB,MAAAA,MAAM,EAAE;EAJC,KAAb;EAOA,UAAKyG,UAAL,GAAkB,CAAC,EAAnB;EACA,UAAKC,SAAL,GAAiB,GAAjB;EACA,UAAKu2F,MAAL,GAAc,IAAd;;EACA,UAAKhlD,IAAL,CAAU/hD,GAAV;;EAvDsB;EAyDzB;;;;2BACIA,KAAK;EAENlK,MAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,EAAe,IAAf,EAAqB8C,GAArB,EAFM;;;EAKN,UAAI4sF,IAAI,GAAG,KAAK7G,YAAL,CAAkB2Y,aAA7B,CALM;;EAON,WAAKsI,cAAL;;EACApa,MAAAA,IAAI,CAACqa,SAAL,CAAe7wG,MAAM,CAACkc,MAAP,CAAc,EAAd,EAAkB,IAAlB,CAAf,EARM;;EAUNs6E,MAAAA,IAAI,CAACkS,YAAL;EACA,WAAK0H,SAAL,GAAiB,KAAKvjB,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EAAEtsC,QAAAA,IAAI,EAAE;EAAR,OAAxB,CAAjB;;EACA,WAAKupF,KAAL,CAAWuH,UAAX,CAAsB3qE,GAAtB,CAA0B,KAAK2mF,SAA/B;EACH;;;uCACgB;EAAA,kCAEK,KAAKzgB,YAAL,CAAkBh5D,OAAlB,EAFL;EAAA,UAEPrZ,CAFO,yBAEPA,CAFO;EAAA,UAEJC,CAFI,yBAEJA,CAFI;EAAA,UAEDmJ,CAFC,yBAEDA,CAFC;;;EAIb,UAAI,CAAC,KAAKzL,IAAL,CAAUD,SAAf,EAA0B;EACtB,YAAIA,SAAS,GAAGhZ,IAAI,CAACiD,GAAL,CAASqY,CAAT,EAAYoJ,CAAZ,IAAiB,CAAjC;;EACA,YAAI,KAAKrK,KAAL,CAAWjB,OAAf,EAAwB;EACpB;EACAJ,UAAAA,SAAS,IAAI,KAAKC,IAAL,CAAUE,OAAvB;EACH;EACD,aAAKF,IAAL,CAAUD,SAAV,GAAsBA,SAAtB;EACH;;EACD,UAAI,KAAKC,IAAL,CAAUqB,MAAV,KAAqB,IAArB,IAA6B5c,CAAC,CAACkE,QAAF,CAAW,KAAKqX,IAAL,CAAUqB,MAArB,CAAjC,EAA+D;EAC3D;EACA,aAAKrB,IAAL,CAAUqB,MAAV,GAAmBta,IAAI,CAACsC,GAAL,CAAS,KAAK2W,IAAL,CAAUqB,MAAnB,EAA2B,KAAKrB,IAAL,CAAUX,SAArC,CAAnB,CAF2D;;EAI3D,aAAKW,IAAL,CAAUC,WAAV,GAAwB,KAAKD,IAAL,CAAUD,SAAV,GAAsB,KAAKC,IAAL,CAAUqB,MAAxD;EACH;;EAGD,UAAI,KAAKrB,IAAL,CAAUD,SAAV,GAAsB,KAAKC,IAAL,CAAUC,WAAhC,GAA8C,KAAKD,IAAL,CAAUX,SAA5D,EAAuE;EACnE,aAAKW,IAAL,CAAUC,WAAV,GAAwB,KAAKD,IAAL,CAAUD,SAAV,GAAsB,KAAKC,IAAL,CAAUX,SAAxD;EACH;;EACD,UAAI,KAAKW,IAAL,CAAUC,WAAV,GAAwB,CAA5B,EAA+B;EAC3B,aAAKD,IAAL,CAAUC,WAAV,GAAwB,CAAxB;EACH;;EAGD,UAAI,CAAC,KAAKitE,SAAV,EAAqB;EACjB,aAAKA,SAAL,GAAiB5qE,CAAC,GAAG,GAArB;EACH;EAGJ;;;6BACM;EAAA;EAEH,UAAI4vE,GAAG,GAAG,KAAKN,KAAL,CAAWM,GAArB;EACA,UAAIqJ,IAAI,GAAG,KAAK7G,YAAL,CAAkB2Y,aAA7B;EACA,UAAIwI,OAAO,GAAG,EAAd;EAGAta,MAAAA,IAAI,CAAChrF,cAAL;EACA,WAAK1B,IAAL,GAAY0sF,IAAI,CAACsR,aAAL,EAAZ;EAEA,WAAKpgD,OAAL;EACA,WAAKA,OAAL,CAAa,KAAK0oD,SAAlB;EAEA,WAAKtmG,IAAL,CAAUrJ,OAAV,CAAkB,UAAC2D,IAAD,EAAO7B,CAAP,EAAa;EAC3B,YAAI,CAAC6B,IAAI,CAACgX,OAAV,EAAmB,OADQ;;EAG3BhX,QAAAA,IAAI,CAAC2sG,SAAL,GAAiB,MAAI,CAACC,aAAL,CAAmB5sG,IAAnB,CAAjB;EAEA,YAAIujC,QAAQ,GAAG,IAAIwZ,iBAAJ,CAAsB;EACjCp1B,UAAAA,KAAK,EAAE3nB,IAAI,CAAC2nB,KADqB;EAEjCkc,UAAAA,WAAW,EAAE,IAFoB;EAGjCyJ,UAAAA,OAAO,EAAE,GAHwB;EAIjC3Q,UAAAA,SAAS,EAAE,IAJsB;EAKjCqH,UAAAA,UAAU,EAAE,IALqB;EAMjCL,UAAAA,IAAI,EAAExkB,UAN2B;EAOjCglB,UAAAA,aAAa,EAAE,IAPkB;EAQjCC,UAAAA,mBAAmB,EAAExmC,IAAI,CAACgY,GAAL,CAASmN,KAAK,CAACzf,QAAN,CAAetD,IAAI,CAACyW,QAApB,CAAT,CARY;EASjC4tB,UAAAA,kBAAkB,EAAE;EATa,SAAtB,CAAf;EAWAqoE,QAAAA,OAAO,CAAC3wG,IAAR,CAAaiE,IAAI,CAACyR,MAAlB;EAGA,YAAIo7F,MAAM,GAAG9jB,GAAG,CAACvB,WAAJ,CAAgBxnF,IAAI,CAACyR,MAArB,EAA6BzR,IAAI,CAAC4W,SAAlC,EAA6C5W,IAAI,CAAC8W,WAAlD,EAA+D9W,IAAI,CAAC+V,UAApE,EAAgF/V,IAAI,CAACsW,QAArF,EAA+FitB,QAA/F,CAAb;EAEAspE,QAAAA,MAAM,CAAC95C,QAAP,CAAgBt8C,QAAhB,GAA2BzW,IAAI,CAACyW,QAAhC,CArB2B;;EAuB3Bo2F,QAAAA,MAAM,CAAC3tG,IAAP,GAAcmtG,GAAG,CAACS,WAAJ,GAAkB9sG,IAAI,CAACoY,KAArC;EACAy0F,QAAAA,MAAM,CAAC95C,QAAP,CAAgB9mB,IAAhB,GAAuBjsC,IAAvB,CAxB2B;;EA2B3B,YAAIA,IAAI,CAAC2jG,WAAL,IAAoB3jG,IAAI,CAAC8W,WAAL,IAAoB,CAA5C,EAA+C;EAC3C,cAAIxH,MAAM,GAAG,MAAI,CAAC5J,IAAL,CAAUzH,MAAV,GAAmB,MAAI,CAACquG,YAAxB,IAAwC,IAAI1uG,IAAI,CAACwF,EAAjD,CAAb;EACA,cAAI8V,CAAC,GAAG5J,MAAM,GAAG1R,IAAI,CAAC8X,GAAL,CAASqN,KAAK,CAACzf,QAAN,CAAetD,IAAI,CAACyW,QAApB,CAAT,CAAjB;EACA,cAAI6L,CAAC,GAAGhT,MAAM,GAAG1R,IAAI,CAACgY,GAAL,CAASmN,KAAK,CAACzf,QAAN,CAAetD,IAAI,CAACyW,QAApB,CAAT,CAAjB;EACAo2F,UAAAA,MAAM,CAACt7F,QAAP,CAAgBa,GAAhB,CAAoB8G,CAApB,EAAuB,CAAvB,EAA0BoJ,CAA1B;EACH;;EAED,QAAA,MAAI,CAAC0mB,KAAL,CAAW3jB,GAAX,CAAewnF,MAAf;EAEH,OApCD;EAqCA,WAAKE,cAAL,CAAoBL,OAApB;;EACA,UAAI,KAAKz0F,KAAL,CAAWjB,OAAf,EAAwB;EACpB,aAAKg2F,iBAAL;EACH;EACD,WAAKvW,SAAL;EACH;;;kCAEW;EAAA;;EACR,UAAIpvF,EAAE,GAAG,IAAT;;EAEA,WAAKmkF,WAAL,GAAmB,UAAUx9E,CAAV,EAAa;EAC5B;EACA,aAAK+kD,QAAL,CAAcprC,KAAd,GAAsB,KAAK4b,QAAL,CAAc5b,KAAd,CAAoBrlB,KAApB,EAAtB,CAF4B;;EAI5B,YAAI+nG,SAAS,GAAG,EAAhB;EACA,aAAK9mE,QAAL,CAAc5b,KAAd,CAAoB2iF,MAApB,CAA2BD,SAA3B;EACA,aAAK9mE,QAAL,CAAck2B,SAAd,CAAwB;EAAE9xC,UAAAA,KAAK,EAAE,IAAIR,OAAJ,GAAYS,MAAZ,CAAmByiF,SAAS,CAAC/+F,CAA7B,EAAgC++F,SAAS,CAACxmF,CAA1C,EAA6CwmF,SAAS,CAAClgG,CAAV,GAAc,IAA3D;EAAT,SAAxB;EAEA,YAAIqI,KAAK,GAAG,KAAKugD,QAAL,CAAc9mB,IAA1B;;EACA5kC,QAAAA,EAAE,CAACohF,KAAH,CAAS18C,IAAT,CAAc;EACV9lC,UAAAA,IAAI,EAAE,SADI;EAEVkJ,UAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFC;EAGVzJ,UAAAA,IAAI,EAAE;EAAEunG,YAAAA,KAAK,EAAE,CAACz6F,KAAD;EAAT;EAHI,SAAd;;EAMAnL,QAAAA,EAAE,CAAC0kC,IAAH,CAAQ;EAAE9lC,UAAAA,IAAI,EAAE,YAAR;EAAsBP,UAAAA,IAAI,EAAE8M;EAA5B,SAAR;EACH,OAhBD;;EAkBA,WAAKi5E,UAAL,GAAkB,UAAUz9E,CAAV,EAAa;EAC3B,aAAKu1B,QAAL,CAAck2B,SAAd,CAAwB;EAAE9xC,UAAAA,KAAK,EAAE,KAAKorC,QAAL,CAAcprC;EAAvB,SAAxB;EACA,YAAInV,KAAK,GAAG,KAAKugD,QAAL,CAAc9mB,IAA1B;;EACA5kC,QAAAA,EAAE,CAACohF,KAAH,CAAS18C,IAAT,CAAc;EACV9lC,UAAAA,IAAI,EAAE,SADI;EAEVkJ,UAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFC;EAGVzJ,UAAAA,IAAI,EAAE;EAAEunG,YAAAA,KAAK,EAAE,CAACz6F,KAAD;EAAT;EAHI,SAAd;;EAKAnL,QAAAA,EAAE,CAAC0kC,IAAH,CAAQ;EAAE9lC,UAAAA,IAAI,EAAE,WAAR;EAAqBP,UAAAA,IAAI,EAAE8M;EAA3B,SAAR;EACH,OATD;;EAWA,WAAKk5E,WAAL,GAAmB,UAAU19E,CAAV,EAAa;EAC5B,YAAIwE,KAAK,GAAG,KAAKugD,QAAL,CAAc9mB,IAA1B;;EACA5kC,QAAAA,EAAE,CAACohF,KAAH,CAAS18C,IAAT,CAAc;EACV9lC,UAAAA,IAAI,EAAE,SADI;EAEVkJ,UAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFC;EAGVzJ,UAAAA,IAAI,EAAE;EAAEunG,YAAAA,KAAK,EAAE,CAACz6F,KAAD;EAAT;EAHI,SAAd;;EAKAnL,QAAAA,EAAE,CAAC0kC,IAAH,CAAQ;EAAE9lC,UAAAA,IAAI,EAAE,YAAR;EAAsBP,UAAAA,IAAI,EAAE8M;EAA5B,SAAR;EACH,OARD;;EAUA,WAAKm5E,OAAL,GAAe,UAAU39E,CAAV,EAAa;EACxB,YAAIwE,KAAK,GAAG,KAAKugD,QAAL,CAAc9mB,IAA1B;;EAEA,YAAI,CAAC,KAAK8mB,QAAL,CAAcm6C,SAAnB,EAA8B;EAC1B,eAAKn6C,QAAL,CAAcm6C,SAAd,GAA0B,IAA1B,CAD0B;;EAG1B,cAAIn2F,OAAO,GAAGvE,KAAK,CAACuE,OAApB;EACA,cAAIjS,GAAG,GAAG,KAAKyM,QAAL,CAAcjP,KAAd,EAAV;EACA,eAAKywD,QAAL,CAAco6C,WAAd,GAA4BroG,GAA5B;EACA,cAAIoU,CAAC,GAAGnC,OAAO,GAAGnZ,IAAI,CAAC8X,GAAL,CAASqN,KAAK,CAACzf,QAAN,CAAe,KAAKyvD,QAAL,CAAct8C,QAA7B,CAAT,CAAlB;EACA,cAAI6L,CAAC,GAAGvL,OAAO,GAAGnZ,IAAI,CAACgY,GAAL,CAASmN,KAAK,CAACzf,QAAN,CAAe,KAAKyvD,QAAL,CAAct8C,QAA7B,CAAT,CAAlB;EACA,eAAKlF,QAAL,CAAca,GAAd,CAAkB8G,CAAlB,EAAqBpU,GAAG,CAACqU,CAAzB,EAA4BmJ,CAA5B;EACH,SATD,MASO;EACH,eAAKywC,QAAL,CAAcm6C,SAAd,GAA0B,KAA1B;;EACA,cAAI,KAAKn6C,QAAL,CAAco6C,WAAlB,EAA+B;EAC3B,iBAAK57F,QAAL,CAAc1O,IAAd,CAAmB,KAAKkwD,QAAL,CAAco6C,WAAjC;EACH;EACJ;;EAED9lG,QAAAA,EAAE,CAAC0kC,IAAH,CAAQ;EAAE9lC,UAAAA,IAAI,EAAE,aAAR;EAAuBP,UAAAA,IAAI,EAAE8M;EAA7B,SAAR;EACH,OApBD;;EAsBA,WAAKw2B,KAAL,CAAWrX,QAAX,CAAoB,UAAAk7E,MAAM,EAAI;EAC1B,YAAIA,MAAM,CAAC3tG,IAAP,IAAe2tG,MAAM,CAAC3tG,IAAP,CAAYqrG,QAAZ,CAAqB8B,GAAG,CAACS,WAAzB,CAAnB,EAA0D;EACtDD,UAAAA,MAAM,CAACr5F,EAAP,CAAU,WAAV,EAAuB,MAAI,CAACg4E,WAA5B;EACAqhB,UAAAA,MAAM,CAACr5F,EAAP,CAAU,UAAV,EAAsB,MAAI,CAACi4E,UAA3B;EAEAohB,UAAAA,MAAM,CAACr5F,EAAP,CAAU,WAAV,EAAuB,MAAI,CAACk4E,WAA5B;EACAmhB,UAAAA,MAAM,CAACr5F,EAAP,CAAU,OAAV,EAAmB,MAAI,CAACm4E,OAAxB;EACH;EACJ,OARD;EASH;;;oCAGayhB,UAAU;EACpB,UAAIC,GAAJ;;EACA,UAAI,KAAKp1F,KAAL,CAAWjB,OAAf,EAAwB;EACpB,YAAI,KAAKiB,KAAL,CAAWpK,MAAf,EAAuB;EACnB,cAAIvS,CAAC,CAAC8D,UAAF,CAAa,KAAK6Y,KAAL,CAAWpK,MAAxB,CAAJ,EAAqC;EACjCw/F,YAAAA,GAAG,GAAG,KAAKp1F,KAAL,CAAWpK,MAAX,CAAkBu/F,QAAQ,CAACn1F,KAA3B,EAAkCm1F,QAAlC,CAAN;EACH;EACJ,SAJD,MAIO;EACH,cAAI1E,MAAM,GAAG,KAAKzwF,KAAL,CAAWxK,KAAX,IAAoB,KAAKuK,UAAtC;;EACA,cAAI0wF,MAAJ,EAAY;EACR2E,YAAAA,GAAG,GAAGD,QAAQ,CAACj1F,OAAT,CAAiBuwF,MAAjB,IAA2B,GAA3B,GAAiC0E,QAAQ,CAACj3F,UAA1C,GAAuD,GAA7D;EACH,WAFD,MAEO;EACHk3F,YAAAA,GAAG,GAAGD,QAAQ,CAACj3F,UAAT,GAAsB,GAA5B;EACH;EACJ;EACJ;;EACD,aAAOk3F,GAAP;EACH;;;0CAImB;EAChB,UAAIhmG,EAAE,GAAG,IAAT;EACA,UAAI+qF,IAAI,GAAG,KAAK7G,YAAL,CAAkB2Y,aAA7B;EACA,UAAIx+F,IAAI,GAAG0sF,IAAI,CAACsR,aAAL,EAAX;EACA,UAAI4J,cAAc,GAAG,CAArB;EAAA,UACIC,cAAc,GAAG,CADrB;EAAA,UAEIC,KAAK,GAAG,CAFZ;EAAA,UAGIC,KAAK,GAAG,CAHZ;EAIA,UAAIC,cAAc,GAAG,EAArB;EAEA,UAAIC,YAAY,GAAG,CACf;EACIC,QAAAA,MAAM,EAAE,EADZ;EAEI1/E,QAAAA,KAAK,EAAE;EAFX,OADe,EAIZ;EACC0/E,QAAAA,MAAM,EAAE,EADT;EAEC1/E,QAAAA,KAAK,EAAE;EAFR,OAJY,EAOZ;EACC0/E,QAAAA,MAAM,EAAE,EADT;EAEC1/E,QAAAA,KAAK,EAAE;EAFR,OAPY,EAUZ;EACC0/E,QAAAA,MAAM,EAAE,EADT;EAEC1/E,QAAAA,KAAK,EAAE;EAFR,OAVY,CAAnB,CAVgB;;EA2BhB,UAAI2/E,UAAU,GAAG;EACb39F,QAAAA,KAAK,EAAE;EACH49F,UAAAA,aAAa,EAAE,CADZ;EAEHC,UAAAA,WAAW,EAAE,CAFV;EAGHxjC,UAAAA,SAAS,EAAE,IAHR;EAIHqjC,UAAAA,MAAM,EAAE;EAJL,SADM;EAObz9F,QAAAA,IAAI,EAAE;EACF29F,UAAAA,aAAa,EAAE,CADb;EAEFC,UAAAA,WAAW,EAAE,CAFX;EAGFxjC,UAAAA,SAAS,EAAE,KAHT;EAIFqjC,UAAAA,MAAM,EAAE;EAJN;EAPO,OAAjB;;EAeA,WAAK,IAAIzvG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuH,IAAI,CAACzH,MAAzB,EAAiCE,CAAC,EAAlC,EAAsC;EAClC,YAAI6vG,GAAG,GAAGtoG,IAAI,CAACvH,CAAD,CAAJ,CAAQuY,QAAlB;EACAi3F,QAAAA,YAAY,CAACK,GAAG,GAAG,CAAP,CAAZ,CAAsBJ,MAAtB,CAA6B7xG,IAA7B,CAAkCoC,CAAlC;EACAwvG,QAAAA,YAAY,CAACK,GAAG,GAAG,CAAP,CAAZ,CAAsB9/E,KAAtB;EACH,OA9Ce;;;EAiDhB,UAAIy/E,YAAY,CAAC,CAAD,CAAZ,CAAgBz/E,KAAhB,GAAwB,CAA5B,EAA+By/E,YAAY,CAAC,CAAD,CAAZ,CAAgBC,MAAhB,CAAuBhkG,OAAvB;EAC/B,UAAI+jG,YAAY,CAAC,CAAD,CAAZ,CAAgBz/E,KAAhB,GAAwB,CAA5B,EAA+By/E,YAAY,CAAC,CAAD,CAAZ,CAAgBC,MAAhB,CAAuBhkG,OAAvB;;EAE/B,UAAI+jG,YAAY,CAAC,CAAD,CAAZ,CAAgBz/E,KAAhB,GAAwBy/E,YAAY,CAAC,CAAD,CAAZ,CAAgBz/E,KAA5C,EAAmD;EAC/C2/E,QAAAA,UAAU,CAAC39F,KAAX,CAAiB49F,aAAjB,GAAiC,CAAjC;EACAD,QAAAA,UAAU,CAAC39F,KAAX,CAAiB69F,WAAjB,GAA+B,CAA/B;EACAF,QAAAA,UAAU,CAAC39F,KAAX,CAAiBq6D,SAAjB,GAA6B,KAA7B;EACH;;EAED,UAAIojC,YAAY,CAAC,CAAD,CAAZ,CAAgBz/E,KAAhB,GAAwBy/E,YAAY,CAAC,CAAD,CAAZ,CAAgBz/E,KAA5C,EAAmD;EAC/C2/E,QAAAA,UAAU,CAAC19F,IAAX,CAAgB29F,aAAhB,GAAgC,CAAhC;EACAD,QAAAA,UAAU,CAAC19F,IAAX,CAAgB49F,WAAhB,GAA8B,CAA9B;EACAF,QAAAA,UAAU,CAAC19F,IAAX,CAAgBo6D,SAAhB,GAA4B,IAA5B;EACH;;EAEDsjC,MAAAA,UAAU,CAAC39F,KAAX,CAAiB09F,MAAjB,GAA0BD,YAAY,CAACE,UAAU,CAAC39F,KAAX,CAAiB49F,aAAjB,GAAiC,CAAlC,CAAZ,CAAiDF,MAAjD,CAAwD3xG,MAAxD,CAA+D0xG,YAAY,CAACE,UAAU,CAAC39F,KAAX,CAAiB69F,WAAjB,GAA+B,CAAhC,CAAZ,CAA+CH,MAA9G,CAA1B;EACAC,MAAAA,UAAU,CAAC19F,IAAX,CAAgBy9F,MAAhB,GAAyBD,YAAY,CAACE,UAAU,CAAC19F,IAAX,CAAgB29F,aAAhB,GAAgC,CAAjC,CAAZ,CAAgDF,MAAhD,CAAuD3xG,MAAvD,CAA8D0xG,YAAY,CAACE,UAAU,CAAC19F,IAAX,CAAgB49F,WAAhB,GAA8B,CAA/B,CAAZ,CAA8CH,MAA5G,CAAzB;EAEA,UAAIK,cAAJ,EAAoBC,YAApB;;EAEA,UAAIL,UAAU,CAAC39F,KAAX,CAAiB09F,MAAjB,CAAwB3vG,MAAxB,GAAiCoJ,EAAE,CAAC8mG,YAAxC,EAAsD;EAClDD,QAAAA,YAAY,GAAGL,UAAU,CAAC39F,KAAX,CAAiB09F,MAAjB,CAAwB5xG,KAAxB,CAA8B,CAA9B,CAAf;EACAkyG,QAAAA,YAAY,CAACxkG,IAAb,CAAkB,UAAU6D,CAAV,EAAaG,CAAb,EAAgB;EAC9B,iBAAOhI,IAAI,CAACgI,CAAD,CAAJ,CAAQyL,CAAR,GAAYzT,IAAI,CAAC6H,CAAD,CAAJ,CAAQ4L,CAA3B;EACH,SAFD;EAGA80F,QAAAA,cAAc,GAAGC,YAAY,CAAClyG,KAAb,CAAmBqL,EAAE,CAAC8mG,YAAtB,CAAjB;EACAb,QAAAA,cAAc,GAAG5nG,IAAI,CAACuoG,cAAc,CAAC,CAAD,CAAf,CAAJ,CAAwB93F,UAAzC;EACAq3F,QAAAA,KAAK,GAAG9nG,IAAI,CAACuoG,cAAc,CAAC,CAAD,CAAf,CAAJ,CAAwB90F,CAAhC;EACH;;EACD,UAAI00F,UAAU,CAAC19F,IAAX,CAAgBy9F,MAAhB,CAAuB3vG,MAAvB,GAAgCoJ,EAAE,CAAC8mG,YAAvC,EAAqD;EACjDD,QAAAA,YAAY,GAAGL,UAAU,CAAC19F,IAAX,CAAgBy9F,MAAhB,CAAuB5xG,KAAvB,CAA6B,CAA7B,CAAf;EACAkyG,QAAAA,YAAY,CAACxkG,IAAb,CAAkB,UAAU6D,CAAV,EAAaG,CAAb,EAAgB;EAC9B,iBAAOhI,IAAI,CAACgI,CAAD,CAAJ,CAAQyL,CAAR,GAAYzT,IAAI,CAAC6H,CAAD,CAAJ,CAAQ4L,CAA3B;EACH,SAFD;EAGA80F,QAAAA,cAAc,GAAGC,YAAY,CAAClyG,KAAb,CAAmBqL,EAAE,CAAC8mG,YAAtB,CAAjB;EACAZ,QAAAA,cAAc,GAAG7nG,IAAI,CAACuoG,cAAc,CAAC,CAAD,CAAf,CAAJ,CAAwB93F,UAAzC;EACAs3F,QAAAA,KAAK,GAAG/nG,IAAI,CAACuoG,cAAc,CAAC,CAAD,CAAf,CAAJ,CAAwB90F,CAAhC;EACH;;EAEDu0F,MAAAA,cAAc,CAAC3xG,IAAf,CAAoB8xG,UAAU,CAAC39F,KAAX,CAAiB49F,aAArC;EACAJ,MAAAA,cAAc,CAAC3xG,IAAf,CAAoB8xG,UAAU,CAAC39F,KAAX,CAAiB69F,WAArC;EACAL,MAAAA,cAAc,CAAC3xG,IAAf,CAAoB8xG,UAAU,CAAC19F,IAAX,CAAgB29F,aAApC;EACAJ,MAAAA,cAAc,CAAC3xG,IAAf,CAAoB8xG,UAAU,CAAC19F,IAAX,CAAgB49F,WAApC;EAEA,UAAIK,UAAU,GAAG,EAAjB;;EAEA,WAAK,IAAIjwG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuvG,cAAc,CAACzvG,MAAnC,EAA2CE,CAAC,EAA5C,EAAgD;EAC5C,YAAIkwG,KAAK,GAAGlwG,CAAC,IAAI,CAAL,IAAUA,CAAC,IAAI,CAA3B;;EACAkJ,QAAAA,EAAE,CAACinG,YAAH,CAAgBZ,cAAc,CAACvvG,CAAD,CAA9B,EAAmCwvG,YAAY,CAACD,cAAc,CAACvvG,CAAD,CAAd,GAAoB,CAArB,CAAZ,CAAoCyvG,MAAvE,EAA+EH,KAA/E,EAAsFD,KAAtF,EAA6Fa,KAA7F,EAAoGD,UAApG;EACH;EACJ;;;mCAEY13F,UAAUk3F,QAAQW,MAAMC,MAAMH,OAAOD,YAAY;EAAA;;EAC1D,UAAI/mG,EAAE,GAAG,IAAT;EACA,UAAI6mB,KAAK,GAAG,CAAZ;EACA,UAAIkkE,IAAI,GAAG,KAAK7G,YAAL,CAAkB2Y,aAA7B;EACA,UAAIx+F,IAAI,GAAG0sF,IAAI,CAACsR,aAAL,EAAX;EACA,UAAI5c,MAAM,GAAG,EAAb;EACA,UAAI2nB,SAAS,GAAG,EAAhB;EACA,UAAIC,WAAW,GAAG,CAAlB;EACA,UAAI3lB,GAAG,GAAG,KAAKN,KAAL,CAAWM,GAArB;EAEA,UAAI4lB,YAAJ;EACA,UAAIC,IAAJ,EAAUC,QAAV,EAAoBC,OAApB,EAA6BC,MAA7B;EACA,UAAIC,MAAJ,EAAYC,YAAZ,EAA0BC,UAA1B;AAEA,EACA,UAAIC,MAAM,GAAGz4F,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAA1C;EACA,UAAI04F,IAAI,GAAG14F,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,CAAxC;EACA,UAAIwZ,IAAI,GAAGi/E,MAAM,GAAGZ,IAAH,GAAUC,IAA3B,CAjB0D;;EAoB1D,UAAIZ,MAAM,CAAC3vG,MAAP,GAAgB,CAApB,EAAuB;EACnB2vG,QAAAA,MAAM,CAAClkG,IAAP,CAAY,UAAU6D,CAAV,EAAaG,CAAb,EAAgB;EACxB,iBAAO0hG,IAAI,GAAG1pG,IAAI,CAAC6H,CAAD,CAAJ,CAAQoK,KAAR,GAAgBjS,IAAI,CAACgI,CAAD,CAAJ,CAAQiK,KAA3B,GAAmCjS,IAAI,CAACgI,CAAD,CAAJ,CAAQiK,KAAR,GAAgBjS,IAAI,CAAC6H,CAAD,CAAJ,CAAQoK,KAAtE;EACH,SAFD;EAGH;;EAED,WAAK,IAAIxZ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyvG,MAAM,CAAC3vG,MAA3B,EAAmCE,CAAC,EAApC,EAAwC;EACpCwwG,QAAAA,YAAY,GAAGf,MAAM,CAACzvG,CAAD,CAArB;EACA,YAAIivG,QAAQ,GAAG1nG,IAAI,CAACipG,YAAD,CAAnB;EAEA,YAAIU,eAAe,GAAGjC,QAAQ,CAACx2F,SAAT,GAAqBw2F,QAAQ,CAACr2F,OAApD,CAJoC;;EAOpC,YAAI,CAACq2F,QAAQ,CAACp2F,OAAV,IAAqBo2F,QAAQ,CAACj0F,CAAT,GAAa+W,IAAlC,IAA0ChC,KAAK,IAAI7mB,EAAE,CAAC8mG,YAA1D,EAAwE;EACxEjgF,QAAAA,KAAK;EACL2gF,QAAAA,QAAQ,GAAGzB,QAAQ,CAACz1F,KAApB;EACAm3F,QAAAA,OAAO,GAAGlxG,IAAI,CAACuK,GAAL,CAASilG,QAAQ,CAAC11F,KAAlB,CAAV;EACAq3F,QAAAA,MAAM,GAAGF,QAAQ,GAAGD,IAApB;;EAEA,YAAIzwG,CAAC,IAAI,CAAL,KAAYP,IAAI,CAACuK,GAAL,CAAS4mG,MAAT,IAAmBN,SAApB,IAAmCW,IAAI,IAAIL,MAAM,GAAG,CAApD,IAA2D,CAACK,IAAD,IAASL,MAAM,GAAG,CAAxF,CAAJ,EAAiG;EAC7FF,UAAAA,QAAQ,GAAGO,IAAI,GAAGR,IAAI,GAAGH,SAAV,GAAsBG,IAAI,GAAGH,SAA5C;;EACA,cAAIY,eAAe,GAAGzxG,IAAI,CAACuK,GAAL,CAAS0mG,QAAT,CAAlB,GAAuC,CAA3C,EAA8C;EAC1CC,YAAAA,OAAO,GAAGlxG,IAAI,CAACklB,IAAL,CAAUllB,IAAI,CAACC,GAAL,CAASwxG,eAAT,EAA0B,CAA1B,IAA+BzxG,IAAI,CAACC,GAAL,CAASgxG,QAAT,EAAmB,CAAnB,CAAzC,CAAV;EACH;;EAED,cAAKM,MAAM,IAAK,CAACL,OAAD,GAAW1B,QAAQ,CAAC11F,KAAhC,IAA4C,CAACy3F,MAAD,IAAYL,OAAO,GAAG1B,QAAQ,CAAC11F,KAA/E,EAAwF;EACpFo3F,YAAAA,OAAO,GAAGlxG,IAAI,CAACuK,GAAL,CAASilG,QAAQ,CAAC11F,KAAlB,CAAV;EACH;EACJ;;EAED,YAAI22F,KAAJ,EAAW;EACPW,UAAAA,MAAM,GAAGG,MAAM,GAAGf,UAAU,CAACj+F,IAAd,GAAqBi+F,UAAU,CAACl+F,KAA/C;EACA++F,UAAAA,YAAY,GAAGrB,MAAM,CAAC3vG,MAAP,GAAgBE,CAA/B;EACA+wG,UAAAA,UAAU,GAAGE,IAAI,GAAGJ,MAAM,GAAGC,YAAY,GAAGR,SAA3B,GAAuCO,MAAM,GAAGC,YAAY,GAAGR,SAAhF;;EACA,cAAKW,IAAI,IAAIP,QAAQ,GAAGK,UAApB,IAAmC,CAACE,IAAD,IAASP,QAAQ,GAAGK,UAA3D,EAAuE;EACnEL,YAAAA,QAAQ,GAAGK,UAAX;EACH;EACJ;;EAEDN,QAAAA,IAAI,GAAGC,QAAP;;EACA,YAAI,CAACR,KAAL,EAAY;EACR,cAAIc,MAAJ,EAAY;EACRf,YAAAA,UAAU,CAACj+F,IAAX,GAAkBy+F,IAAlB;EACH,WAFD,MAEO;EACHR,YAAAA,UAAU,CAACl+F,KAAX,GAAmB0+F,IAAnB;EACH;EACJ;EAED,YAAIU,QAAQ,GAAIH,MAAM,GAAG,CAACL,OAAD,GAAWJ,WAAd,GAA4BI,OAAO,GAAGJ,WAA5D;EACA,YAAIa,OAAO,GAAGD,QAAQ,GAAGjoG,EAAE,CAACE,MAAH,CAAU2R,CAAnC;EACA,YAAIs2F,OAAO,GAAGX,QAAQ,GAAGxnG,EAAE,CAACE,MAAH,CAAU4R,CAAnC,CA5CoC;EA+CpC;EACA;EACA;EACA;;EAEA,YAAI8xF,QAAQ,GAAG,EAAf;EACA,YAAIwE,UAAU,GAAG,CACb,IAAIlsF,OAAJ,CAAY6pF,QAAQ,CAAC91F,OAArB,EAA8B,CAA9B,EAAiC81F,QAAQ,CAAC71F,OAA1C,CADa,EAEb,IAAIgM,OAAJ,CAAY6pF,QAAQ,CAAC51F,IAArB,EAA2B,CAA3B,EAA8B41F,QAAQ,CAAC31F,IAAvC,CAFa,EAGb,IAAI8L,OAAJ,CAAY+rF,QAAZ,EAAsB,CAAtB,EAAyBT,QAAzB,CAHa,CAAjB;EAOA,YAAIhzB,KAAK,GAAG,IAAIzB,gBAAJ,CAAqBq1B,UAArB,CAAZ;EACA,YAAI92F,MAAM,GAAGkjE,KAAK,CAAC1L,eAAN,CAAsB86B,QAAtB,CAAb;EAGA,YAAIh3E,IAAI,GAAG80D,GAAG,CAACrC,gBAAJ,CAAqB/tE,MAArB,EAA6B,CAA7B,EAAgCy0F,QAAQ,CAACzlF,KAAzC,EAAgD,IAAhD,CAAX;EAEA,aAAKqhB,KAAL,CAAW3jB,GAAX,CAAe4O,IAAf;EAGA,YAAIhc,KAAK,GAAG8wE,GAAG,CAAClC,eAAJ,CAAoBumB,QAAQ,CAACT,SAA7B,EAAwC;EAAE9sC,UAAAA,QAAQ,EAAE,EAAZ;EAAgBI,UAAAA,SAAS,EAAEmtC,QAAQ,CAACzlF;EAApC,SAAxC,CAAZ;EACA1P,QAAAA,KAAK,CAAC,CAAD,CAAL,CAAS86C,QAAT,CAAkBxhD,QAAlB,GAA6B,IAAIgS,OAAJ,CAAY+rF,QAAZ,EAAsB,CAAtB,EAAyBT,QAAzB,CAA7B;EACA52F,QAAAA,KAAK,CAAC,CAAD,CAAL,CAAS86C,QAAT,CAAkBzB,GAAlB,GAAwB,IAAI/tC,OAAJ,CAAY6pF,QAAQ,CAAC51F,IAArB,EAA2B,CAA3B,EAA8B41F,QAAQ,CAAC31F,IAAvC,EAA6CqZ,GAA7C,CAAiD,IAAIvN,OAAJ,CAAY6pF,QAAQ,CAAC91F,OAArB,EAA8B,CAA9B,EAAiC81F,QAAQ,CAAC71F,OAA1C,CAAjD,CAAxB;EACAU,QAAAA,KAAK,CAAC,CAAD,CAAL,CAAS86C,QAAT,CAAkBzB,GAAlB,CAAsBtsC,SAAtB;EACA8hE,QAAAA,MAAM,CAAC/qF,IAAP,CAAYkc,KAAK,CAAC,CAAD,CAAjB;EACH;;EAED6uE,MAAAA,MAAM,CAACzqF,OAAP,CAAe,UAAC4b,KAAD,EAAQjZ,KAAR,EAAkB;EAC7BiZ,QAAAA,KAAK,CAAC86C,QAAN,CAAexhD,QAAf,GAA0B0G,KAAK,CAAC86C,QAAN,CAAexhD,QAAzC;EACA0G,QAAAA,KAAK,CAAC26C,sBAAN,GAA+B,KAA/B;;EACA36C,QAAAA,KAAK,CAACkyC,cAAN,GAAuB,UAAUzZ,MAAV,EAAkByN,KAAlB,EAAyB15B,MAAzB,EAAiC;EACpD;EACA,cAAIoP,KAAK,GAAGxsB,EAAE,CAACkkF,YAAH,CAAgBmkB,gBAAhB,CAAiC,KAAK38C,QAAL,CAAczB,GAAd,CAAkBhvD,KAAlB,EAAjC,CAAZ;;EACA,cAAIwC,GAAG,GAAGuC,EAAE,CAACkkF,YAAH,CAAgBT,gBAAhB,CAAiC,KAAK/3B,QAAL,CAAcxhD,QAAd,CAAuBjP,KAAvB,EAAjC,CAAV,CAHoD;;;EAKpD,cAAI+qF,QAAQ,GAAG,KAAKt6B,QAAL,CAAclrC,IAA7B;EACA,cAAIylE,SAAS,GAAGD,QAAQ,CAAC,CAAD,CAAR,GAAc,GAA9B;EACA,cAAI/kB,UAAU,GAAG+kB,QAAQ,CAAC,CAAD,CAAR,GAAc,GAA/B,CAPoD;EAUpD;EACA;EACA;;EACA,cAAIx5D,KAAK,CAAC1a,CAAN,GAAU,CAAd,EAAiB;EACb;EACArU,YAAAA,GAAG,CAACwiC,IAAJ,CAASxiC,GAAG,CAACoU,CAAJ,GAAQo0E,SAAR,GAAoBjmF,EAAE,CAAC4Q,KAAH,CAAS3I,MAAtC,EAFa;EAIhB,WAjBmD;;;EAmBpD,cAAIukB,KAAK,CAAC1a,CAAN,GAAU,CAAd,EAAiB;EACb;EACArU,YAAAA,GAAG,CAACwiC,IAAJ,CAASxiC,GAAG,CAACoU,CAAJ,GAAQo0E,SAAR,GAAoBjmF,EAAE,CAAC4Q,KAAH,CAAS3I,MAAtC,EAFa;EAIhB,WAvBmD;EAyBpD;EACA;EACA;EACA;EACA;EACA;EACA;;;EAEA,eAAKiC,QAAL,CAAc1O,IAAd,CAAmBiC,GAAnB;EACA,eAAK4sB,iBAAL,CAAuB,IAAvB;EACH,SAnCD;;EAoCA,QAAA,MAAI,CAACs6E,SAAL,CAAe3mF,GAAf,CAAmBpN,KAAnB;EACH,OAxCD;EA2CH;;;qCAEcy0F,SAAS;EAEpB;EACA,UAAIiD,QAAQ,GAAGr0G,CAAC,CAACkG,IAAF,CAAOkrG,OAAP,EAAgBzuG,MAAhB,GAAyB,CAAxC;EACA,UAAI,CAAC0xG,QAAL,EAAe;;EACf,UAAI5rB,SAAS,GAAGzoF,CAAC,CAAC4E,GAAF,CAAMwsG,OAAN,CAAhB;;EACA,WAAK1jE,KAAL,CAAWrX,QAAX,CAAoB,UAAAj0B,GAAG,EAAI;EACvB,YAAIA,GAAG,CAAC8sC,MAAJ,IAAc9sC,GAAG,CAACk0B,QAAlB,KAA+Bl0B,GAAG,CAACk0B,QAAJ,CAAa3rB,IAAb,KAAsB,wBAAtB,IAAkDvI,GAAG,CAACk0B,QAAJ,CAAa3rB,IAAb,KAAsB,kBAAvG,CAAJ,EAAgI;EAC5H,cAAIqJ,MAAM,GAAG,CAACy0E,SAAS,GAAGrmF,GAAG,CAACk0B,QAAJ,CAAagG,UAAb,CAAwBnmB,MAArC,IAA+C,GAA5D;EACA/T,UAAAA,GAAG,CAAC6T,QAAJ,CAAag2B,IAAb,CAAkB,CAAEj4B,MAApB;EAEH;EACJ,OAND;EAOH;;;8BACO05B,OAAO;EAAA;;EACXA,MAAAA,KAAK,GAAGA,KAAK,IAAI,KAAKA,KAAtB;EACAA,MAAAA,KAAK,CAACrX,QAAN,CAAe,UAACk7E,MAAD,EAAY;EACvB,YAAIA,MAAM,CAAC3tG,IAAP,IAAe2tG,MAAM,CAAC3tG,IAAP,CAAYqrG,QAAZ,CAAqB8B,GAAG,CAACS,WAAzB,CAAnB,EAA0D;EACtDD,UAAAA,MAAM,CAAC55F,GAAP,CAAW,WAAX,EAAwB,MAAI,CAACu4E,WAA7B;EACAqhB,UAAAA,MAAM,CAAC55F,GAAP,CAAW,UAAX,EAAuB,MAAI,CAACw4E,UAA5B;EAEAohB,UAAAA,MAAM,CAAC55F,GAAP,CAAW,WAAX,EAAwB,MAAI,CAACy4E,WAA7B;EACAmhB,UAAAA,MAAM,CAAC55F,GAAP,CAAW,OAAX,EAAoB,MAAI,CAAC04E,OAAzB;EACH;EACJ,OARD;;EAWA,uEAAc3iD,KAAd;EAEH;;;kCACW;EACR,WAAKsa,OAAL;EACA,UAAI8uC,IAAI,GAAG,KAAK7G,YAAL,CAAkB2Y,aAA7B,CAFQ;;EAIR,WAAKsI,cAAL;;EACApa,MAAAA,IAAI,CAACqa,SAAL,CAAe7wG,MAAM,CAACkc,MAAP,CAAc,EAAd,EAAkB,IAAlB,CAAf,EALQ;;EAORs6E,MAAAA,IAAI,CAACkS,YAAL;EACA,WAAK/wF,IAAL;EACH;;;;IApiBa+3E;;EAyiBlB+gB,GAAG,CAACS,WAAJ,GAAkB,UAAlB;;MCviBM8C;;;;;EACF,mBAAY5I,OAAZ,EAAqBxhG,GAArB,EAA0B;EAAA;;EAAA;;EACtB,iFAAMwhG,OAAN;EAGA,UAAK/gG,IAAL,GAAY,SAAZ;EACA,UAAKiV,KAAL,GAAa,WAAb;EAEA,UAAKiuB,IAAL,GAAY,OAAZ,CAPsB;;EAStB,UAAK2hC,IAAL,GAAY;EAAE;EACVwjB,MAAAA,SAAS,EAAE,MADH;EAERt3E,MAAAA,OAAO,EAAE,CAFD;EAGRipD,MAAAA,SAAS,EAAE,IAHH;EAIR/6C,MAAAA,KAAK,EAAE,GAJC;EAKR2qF,MAAAA,SAAS,EAAE;EALH,KAAZ;EAOA,UAAK53F,KAAL,GAAa;EACTjB,MAAAA,OAAO,EAAE,CADA;EAETipD,MAAAA,SAAS,EAAE,MAFF;EAGTJ,MAAAA,QAAQ,EAAE;EAHD,KAAb;EAMA,UAAKiwC,GAAL,GAAW,CAAX;;EAEAx0G,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB;;EAEA,UAAKtG,IAAL,GAAY,aAAa,MAAKiqC,IAA9B;;EACA,UAAKoe,IAAL;;EACA,UAAKuoC,YAAL,CAAkB,kBAAkB,MAAK3mD,IAAzC;;EA5BsB;EA8BzB;;;;6BACM;EACH,WAAK4mE,UAAL,GAAkB,KAAKtnB,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EACtCtsC,QAAAA,IAAI,EAAE;EADgC,OAAxB,CAAlB;EAGA,WAAK8sG,SAAL,GAAiB,KAAKvjB,KAAL,CAAWM,GAAX,CAAev9C,QAAf,CAAwB;EACrCtsC,QAAAA,IAAI,EAAE;EAD+B,OAAxB,CAAjB;EAGA,WAAK8pC,KAAL,CAAW3jB,GAAX,CAAe,KAAK0qF,UAApB;EACA,WAAK/mE,KAAL,CAAW3jB,GAAX,CAAe,KAAK2mF,SAApB;;EARG,kCAaW,KAAKzgB,YAAL,CAAkB2Z,gBAAlB,EAbX;EAAA,UAWC1zF,KAXD,yBAWCA,KAXD;EAAA,UAYCC,MAZD,yBAYCA,MAZD;EAAA,UAaCurB,KAbD,yBAaCA,KAbD;;EAeH,UAAI,KAAKmM,IAAL,KAAc64C,SAAS,CAACl9C,IAA5B,EAAkC;EAC9B,aAAKkE,KAAL,CAAW+8C,OAAX,CAAmBhjE,KAAK,CAACzf,QAAN,CAAe,GAAf,CAAnB;EACA,aAAK0lC,KAAL,CAAWgnE,UAAX,CAAsBhzE,KAAtB;EACA,aAAKgM,KAAL,CAAWinE,UAAX,CAAsB,CAACz+F,KAAvB;EACH;;EAED,UAAI,KAAK23B,IAAL,KAAc64C,SAAS,CAACR,GAA5B,EAAiC;EAC7B,aAAKx4C,KAAL,CAAWg9C,OAAX,CAAmBjjE,KAAK,CAACzf,QAAN,CAAe,CAAC,EAAhB,CAAnB;EACA,aAAK0lC,KAAL,CAAWknE,UAAX,CAAsB,CAACz+F,MAAD,GAAU,GAAV,GAAgBurB,KAAK,GAAG,GAA9C;EACA,aAAKgM,KAAL,CAAWgnE,UAAX,CAAsBv+F,MAAM,GAAG,GAAT,GAAeurB,KAAK,GAAG,GAA7C;EACH;;EAED,UAAI,KAAKmM,IAAL,KAAc64C,SAAS,CAACP,MAA5B,EAAoC;EAChC,aAAKz4C,KAAL,CAAWg9C,OAAX,CAAmBjjE,KAAK,CAACzf,QAAN,CAAe,EAAf,CAAnB;EACA,aAAK0lC,KAAL,CAAWgnE,UAAX,CAAsBhzE,KAAtB;EACH;;EAED,UAAI,KAAKmM,IAAL,KAAc64C,SAAS,CAACN,KAA5B,EAAmC;EAC/B,aAAK14C,KAAL,CAAW+8C,OAAX,CAAmBhjE,KAAK,CAACzf,QAAN,CAAe,EAAf,CAAnB;EAEA,aAAK0lC,KAAL,CAAWinE,UAAX,CAAsB,CAACz+F,KAAD,GAAS,GAAT,GAAewrB,KAAK,GAAG,GAA7C;EACA,aAAKgM,KAAL,CAAWgnE,UAAX,CAAsBx+F,KAAK,GAAG,GAAR,GAAcwrB,KAAK,GAAG,GAA5C;EAEH;;EACD,UAAI,KAAKmM,IAAL,KAAc64C,SAAS,CAACT,IAA5B,EAAkC;EAC9B,aAAKv4C,KAAL,CAAW+8C,OAAX,CAAmBhjE,KAAK,CAACzf,QAAN,CAAe,CAAC,EAAhB,CAAnB;EAEA,aAAK0lC,KAAL,CAAWinE,UAAX,CAAsBz+F,KAAK,GAAG,GAAR,GAAcC,MAAM,GAAG,GAA7C;EACA,aAAKu3B,KAAL,CAAWgnE,UAAX,CAAsBhzE,KAAK,GAAG,GAAR,GAAcxrB,KAAK,GAAG,GAA5C;EAEH;;EAED,WAAKs9E,SAAL;EAEH;;;kCACW;EAAA;;EACR,WAAKqhB,KAAL,GAAa,KAAK5kB,YAAL,CAAkBwF,cAA/B;EACA,WAAKqf,KAAL,GAAa,KAAK7kB,YAAL,CAAkBqD,cAA/B;EACA,WAAKyhB,KAAL,GAAa,KAAK9kB,YAAL,CAAkB6F,cAA/B;EACA,UAAIkf,KAAK,GAAG,KAAKH,KAAL,CAAW9jB,iBAAvB;EACA,UAAIkkB,KAAK,GAAG,KAAKH,KAAL,CAAW/jB,iBAAvB;EACA,UAAIkb,KAAK,GAAG,KAAK8I,KAAL,CAAWhkB,iBAAvB;EACA,UAAImkB,KAAK,GAAG,EAAZ;EAAA,UAAgBC,KAAK,GAAG,EAAxB;EACA,UAAI/jG,SAAS,GAAG,KAAK+7E,KAAL,CAAW/7E,SAA3B;EACA,WAAKw6F,QAAL,GAAgB,EAAhB;;EACA,UAAI3/F,MAAM,GAAG,KAAKgkF,YAAL,CAAkBuZ,iBAAlB,CAAoC,KAAK37D,IAAL,CAAUr0B,WAAV,EAApC,CAAb;;EAGA,UAAI,KAAKq0B,IAAL,KAAc64C,SAAS,CAACj9C,KAA5B,EAAmC;EAC/ByrE,QAAAA,KAAK,GAAGF,KAAK,CAACr0G,MAAN,CAAa,EAAb,CAAR;EACAu0G,QAAAA,KAAK,CAACpe,IAAN,GAAa,KAAK+d,KAAlB;EACAM,QAAAA,KAAK,GAAGF,KAAK,CAACt0G,MAAN,CAAa,EAAb,CAAR;EACAw0G,QAAAA,KAAK,CAACre,IAAN,GAAa,KAAKge,KAAlB;EAEH;;EACD,UAAI,KAAKjnE,IAAL,KAAc64C,SAAS,CAACl9C,IAA5B,EAAkC;EAC9B0rE,QAAAA,KAAK,GAAGF,KAAK,CAACr0G,MAAN,CAAa,EAAb,CAAR;EACAu0G,QAAAA,KAAK,CAACpe,IAAN,GAAa,KAAK+d,KAAlB;EACAM,QAAAA,KAAK,GAAGF,KAAK,CAACt0G,MAAN,CAAa,EAAb,CAAR;EACAw0G,QAAAA,KAAK,CAACre,IAAN,GAAa,KAAKge,KAAlB;EACH;;EAED,UAAI,KAAKjnE,IAAL,KAAc64C,SAAS,CAACR,GAA5B,EAAiC;EAC7BgvB,QAAAA,KAAK,GAAGF,KAAK,CAACr0G,MAAN,CAAa,EAAb,CAAR;EACAu0G,QAAAA,KAAK,CAACpe,IAAN,GAAa,KAAK+d,KAAlB;EACAM,QAAAA,KAAK,GAAGlJ,KAAK,CAACtrG,MAAN,CAAa,EAAb,CAAR;EACAw0G,QAAAA,KAAK,CAACre,IAAN,GAAa,KAAKie,KAAlB;EACH;;EAED,UAAI,KAAKlnE,IAAL,KAAc64C,SAAS,CAACP,MAA5B,EAAoC;EAChC+uB,QAAAA,KAAK,GAAGF,KAAK,CAACr0G,MAAN,CAAa,EAAb,CAAR;EACAu0G,QAAAA,KAAK,CAACpe,IAAN,GAAa,KAAK+d,KAAlB;EACAM,QAAAA,KAAK,GAAGlJ,KAAK,CAACtrG,MAAN,CAAa,EAAb,CAAR;EACAw0G,QAAAA,KAAK,CAACre,IAAN,GAAa,KAAKie,KAAlB;EACH;;EAED,UAAI,KAAKlnE,IAAL,KAAc64C,SAAS,CAACN,KAA5B,EAAmC;EAC/B8uB,QAAAA,KAAK,GAAGjJ,KAAK,CAACtrG,MAAN,CAAa,EAAb,CAAR;EACAu0G,QAAAA,KAAK,CAACpe,IAAN,GAAa,KAAKie,KAAlB;EACAI,QAAAA,KAAK,GAAGF,KAAK,CAACt0G,MAAN,CAAa,EAAb,CAAR;EACAw0G,QAAAA,KAAK,CAACre,IAAN,GAAa,KAAKge,KAAlB;EAEH;;EACD,UAAI,KAAKjnE,IAAL,KAAc64C,SAAS,CAACT,IAA5B,EAAkC;EAC9BivB,QAAAA,KAAK,GAAGjJ,KAAK,CAACtrG,MAAN,CAAa,EAAb,CAAR;EACAu0G,QAAAA,KAAK,CAACpe,IAAN,GAAa,KAAKie,KAAlB;EACAI,QAAAA,KAAK,GAAGF,KAAK,CAACt0G,MAAN,CAAa,EAAb,CAAR;EACAw0G,QAAAA,KAAK,CAACre,IAAN,GAAa,KAAKge,KAAlB;EAEH;;EAGDI,MAAAA,KAAK,CAACn0G,OAAN,CAAc,UAACq0G,EAAD,EAAKC,EAAL,EAAY;EACtBF,QAAAA,KAAK,CAACp0G,OAAN,CAAc,UAACu0G,EAAD,EAAKC,EAAL,EAAY;EAAA;;EACtB,cAAIC,QAAQ,GAAGpkG,SAAS,CAACG,YAAV,qEACV2jG,KAAK,CAACpe,IAAN,CAAW3kF,KADD,EACSijG,EAAE,CAAChpG,GADZ,0CAEV+oG,KAAK,CAACre,IAAN,CAAW3kF,KAFD,EAESmjG,EAAE,CAAClpG,GAFZ,0BAAf;EAIA,cAAI,CAACopG,QAAQ,CAAC7yG,MAAd,EAAsB;EACtB,cAAI8yG,KAAK,GAAGD,QAAQ,CAAC,CAAD,CAAR,CAAY,MAAI,CAACrjG,KAAjB,KAA2B,CAAvC;;EAEA,UAAA,MAAI,CAACy5F,QAAL,CAAcnrG,IAAd,CAAmB;EACfgD,YAAAA,KAAK,EAAEgyG,KADQ;EAEfppF,YAAAA,KAAK,EAAEqmE,SAAS,CAAC,MAAI,CAACgjB,WAAN,EAAmBD,KAAK,GAAG,GAA3B,CAFD;EAGf54F,YAAAA,OAAO,EAAE24F,QAAQ,CAAC,CAAD,CAHF;EAIfrjG,YAAAA,KAAK,EAAE,MAAI,CAACA,KAJG;EAKf2K,YAAAA,KAAK,EAAEu4F,EAAE,GAAGE,EALG;EAMf1nE,YAAAA,IAAI,EAAE,MAAI,CAACA,IANI;EAOfzjC,YAAAA,IAAI,EAAEorG,QAAQ,CAAC,CAAD,CAPC;EAQfhsG,YAAAA,GAAG,EAAE,IAAIye,OAAJ,CAAYmtF,EAAE,CAAC5rG,GAAf,EAAoB8rG,EAAE,CAAC9rG,GAAvB,EAA4B,CAA5B,EAA+BugB,GAA/B,CAAmC9d,MAAnC,CARU;EASfiK,YAAAA,KAAK,EAAEg/F,KAAK,CAACpe,IAAN,CAAW5mF,aAAX,KAA6B,MAAI,CAACskG,GAAL,GAAW,CAThC;EAUfr+F,YAAAA,MAAM,EAAEg/F,KAAK,CAACre,IAAN,CAAW5mF,aAAX,KAA6B,MAAI,CAACskG,GAAL,GAAW;EAVjC,WAAnB;EAYH,SApBD;EAqBH,OAtBD;EAuBH;;;6BAGM;EAAA;;EACH,WAAKxsD,OAAL;EACA,WAAK4jD,QAAL,CAAc7qG,OAAd,CAAsB,UAAC2D,IAAD,EAAO7B,CAAP,EAAa;EAE/B,YAAI4yG,KAAK,GAAG/wG,IAAI,CAAC0F,IAAL,CAAU,MAAI,CAAC+H,KAAf,KAAyB,GAArC;;EACA,YAAIy3E,SAAS,GAAG,MAAI,CAACilB,WAAL,CAAiB,MAAI,CAAC6G,WAAtB,EAAmCD,KAAnC,CAAhB;;EAEA,YAAIlrB,cAAc,GAAG,IAAI9f,aAAJ,CAAkB/lE,IAAI,CAACwR,KAAvB,EAA8BxR,IAAI,CAACyR,MAAnC,CAArB;EACA,YAAIyf,KAAK,GAAG,IAAIwoC,IAAJ,CAASmsB,cAAT,EAAyBX,SAAzB,CAAZ;EACAh0D,QAAAA,KAAK,CAAC6hC,QAAN,CAAe9mB,IAAf,GAAsBjsC,IAAtB;EACAkxB,QAAAA,KAAK,CAAChyB,IAAN,GAAa0wG,OAAO,CAACqB,qBAAR,GAAgC,MAAI,CAAC9nE,IAArC,GAA4C,GAA5C,GAAkDhrC,CAA/D;EACA+yB,QAAAA,KAAK,CAAC3f,QAAN,CAAe1O,IAAf,CAAoB7C,IAAI,CAAC8E,GAAzB;;EAEA,QAAA,MAAI,CAACirG,UAAL,CAAgB1qF,GAAhB,CAAoB6L,KAApB,EAX+B;;;EAa/B,YAAIlxB,IAAI,CAAC0F,IAAL,CAAU,MAAI,CAAC+H,KAAf,CAAJ,EAA2B;EACvB,cAAIq5E,MAAM,GAAG,MAAI,CAACoqB,UAAL,CAAgBlxG,IAAI,CAAC0F,IAAL,CAAU,MAAI,CAAC+H,KAAf,CAAhB,EAAuC;EAAEoyD,YAAAA,QAAQ,EAAE,MAAI,CAAC5nD,KAAL,CAAW4nD,QAAvB;EAAiCI,YAAAA,SAAS,EAAE,MAAI,CAAChoD,KAAL,CAAWgoD;EAAvD,WAAvC,CAAb;;EACA,cAAIn7D,GAAG,GAAG9E,IAAI,CAAC8E,GAAL,CAASxC,KAAT,EAAV;EAEAwkF,UAAAA,MAAM,CAAC,CAAD,CAAN,CAAUv1E,QAAV,CAAmB1O,IAAnB,CAAwBiC,GAAxB;;EACA,UAAA,MAAI,CAACknG,SAAL,CAAe3mF,GAAf,CAAmByhE,MAAM,CAAC,CAAD,CAAzB;EACH;EAGJ,OAtBD;EAwBA,WAAK2P,SAAL;EACH;;;kCACW;EAAA;;EACR,UAAIpvF,EAAE,GAAG,IAAT;;EACA,UAAI8pG,SAAS,GAAG,SAAZA,SAAY,GAAY;EACxB,eAAO9pG,EAAE,CAACkkF,YAAH,CAAgB4B,YAAhB,OAAmC9lF,EAAE,CAAC8hC,IAAH,CAAQr0B,WAAR,EAA1C;EACH,OAFD;;EAGA,WAAK02E,WAAL,GAAmB,UAAUx9E,CAAV,EAAa;EAC5B,YAAI,CAACmjG,SAAS,EAAd,EAAkB,OADU;;EAG5B,aAAK5tE,QAAL,GAAgBl8B,EAAE,CAAC8iG,WAAH,CAAe9iG,EAAE,CAAC2pG,WAAlB,EAA+B,EAA/B,EAAmC3pG,EAAE,CAACyjE,IAAH,CAAQ+kC,SAA3C,CAAhB;EACA,aAAKtsE,QAAL,CAAcqI,WAAd,GAA4B,IAA5B;;EACAvkC,QAAAA,EAAE,CAACohF,KAAH,CAAS18C,IAAT,CAAc;EACV9lC,UAAAA,IAAI,EAAE,SADI;EAEVkJ,UAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFC;EAGVzJ,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAHV,SAAd;;EAMA5kC,QAAAA,EAAE,CAAC0kC,IAAH,CAAQ;EAAE9lC,UAAAA,IAAI,EAAE,WAAR;EAAqBP,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAAzC,SAAR;EACH,OAZD;;EAaA,WAAKw/C,UAAL,GAAkB,UAAUz9E,CAAV,EAAa;EAC3B,YAAI,CAACmjG,SAAS,EAAd,EAAkB;EAClB,YAAIJ,KAAK,GAAG,KAAKh+C,QAAL,CAAc9mB,IAAd,CAAmBvmC,IAAnB,CAAwB2B,EAAE,CAACoG,KAA3B,KAAqC,CAAjD;;EACA,YAAI,CAAC,KAAKslD,QAAL,CAAcl0D,MAAnB,EAA2B;EACvB,eAAK0kC,QAAL,GAAgBl8B,EAAE,CAAC8iG,WAAH,CAAe9iG,EAAE,CAAC2pG,WAAlB,EAA+BD,KAA/B,CAAhB;EACA,eAAKxtE,QAAL,CAAcqI,WAAd,GAA4B,IAA5B;EACH;;EAGDvkC,QAAAA,EAAE,CAACohF,KAAH,CAAS18C,IAAT,CAAc;EACV9lC,UAAAA,IAAI,EAAE,SADI;EAEVkJ,UAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFC;EAGVzJ,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAHV,SAAd;;EAKA5kC,QAAAA,EAAE,CAAC0kC,IAAH,CAAQ;EAAE9lC,UAAAA,IAAI,EAAE,UAAR;EAAoBP,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAAxC,SAAR;EACH,OAfD;;EAiBA,WAAKy/C,WAAL,GAAmB,UAAU19E,CAAV,EAAa;EAC5B,YAAI,CAACmjG,SAAS,EAAd,EAAkB;;EAClB9pG,QAAAA,EAAE,CAACohF,KAAH,CAAS18C,IAAT,CAAc;EACV9lC,UAAAA,IAAI,EAAE,SADI;EAEVkJ,UAAAA,KAAK,EAAEnB,CAAC,CAACmB,KAFC;EAGVzJ,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAHV,SAAd;;EAKA5kC,QAAAA,EAAE,CAAC0kC,IAAH,CAAQ;EAAE9lC,UAAAA,IAAI,EAAE,WAAR;EAAqBP,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAAzC,SAAR;EACH,OARD;;EAUA,WAAK0/C,OAAL,GAAe,UAAU39E,CAAV,EAAa;EACxB,YAAI,CAACmjG,SAAS,EAAd,EAAkB;EAElB9pG,QAAAA,EAAE,CAACw+F,YAAH;;EACA,YAAI,CAAC73F,CAAC,CAAClM,MAAF,CAASixD,QAAT,CAAkBl0D,MAAvB,EAA+B;EAC3B,eAAK0kC,QAAL,GAAgBl8B,EAAE,CAAC8iG,WAAH,CAAe9iG,EAAE,CAAC2pG,WAAlB,EAA+B,EAA/B,EAAmC3pG,EAAE,CAACyjE,IAAH,CAAQ+kC,SAA3C,CAAhB;EACA,eAAKtsE,QAAL,CAAcqI,WAAd,GAA4B,IAA5B;EACA59B,UAAAA,CAAC,CAAClM,MAAF,CAASixD,QAAT,CAAkBl0D,MAAlB,GAA2B,IAA3B;EACH;;EACDwI,QAAAA,EAAE,CAACkkF,YAAH,CAAgBx/C,IAAhB,CAAqB;EAAE9lC,UAAAA,IAAI,EAAE,YAAR;EAAsBP,UAAAA,IAAI,EAAE,KAAKqtD,QAAL,CAAc9mB;EAA1C,SAArB;EACH,OAVD;;EAYA,WAAKjD,KAAL,CAAWrX,QAAX,CAAoB,UAAAj0B,GAAG,EAAI;EACvB,YAAIA,GAAG,CAACwB,IAAJ,IAAYxB,GAAG,CAACwB,IAAJ,CAASqrG,QAAT,CAAkBqF,OAAO,CAACqB,qBAAR,GAAgC,MAAI,CAAC9nE,IAAvD,CAAhB,EAA8E;EAC1EzrC,UAAAA,GAAG,CAAC8V,EAAJ,CAAO,WAAP,EAAoB,MAAI,CAACg4E,WAAzB;EACA9tF,UAAAA,GAAG,CAAC8V,EAAJ,CAAO,UAAP,EAAmB,MAAI,CAACi4E,UAAxB;EAEA/tF,UAAAA,GAAG,CAAC8V,EAAJ,CAAO,WAAP,EAAoB,MAAI,CAACk4E,WAAzB;EACAhuF,UAAAA,GAAG,CAAC8V,EAAJ,CAAO,OAAP,EAAgB,MAAI,CAACm4E,OAArB;EACH;EACJ,OARD;EASH;;;kCACWqlB,aAAaD,OAAOlB,WAAW;EACvC,WAAKuB,WAAL,GAAmB,KAAKA,WAAL,IAAoB,EAAvC;EACA,UAAI3zG,GAAG,GAAGoyG,SAAS,GAAGA,SAAH,GAAemB,WAAW,GAAGD,KAAhD;;EACA,UAAI,KAAKK,WAAL,CAAiB3zG,GAAjB,CAAJ,EAA2B;EACvB,eAAO,KAAK2zG,WAAL,CAAiB3zG,GAAjB,CAAP;EACH;;EACD,WAAK2zG,WAAL,CAAiB3zG,GAAjB,IAAwB,IAAIs/C,iBAAJ,CAAsB;EAC1Cp1B,QAAAA,KAAK,EAAGkoF,SAAS,GAAGA,SAAH,GAAemB,WAAW,IAAI,QADL;EAE1CrtE,QAAAA,IAAI,EAAE1kB,SAFoC;EAG1C4kB,QAAAA,WAAW,EAAE,IAH6B;EAI1CyJ,QAAAA,OAAO,EAAEyjE,KAAK,GAAG,GAJyB;EAK1Cp0E,QAAAA,SAAS,EAAE,IAL+B;EAM1CqH,QAAAA,UAAU,EAAE;EAN8B,OAAtB,CAAxB;EASA,aAAO,KAAKotE,WAAL,CAAiB3zG,GAAjB,CAAP;EACH;;;iCACUqmF,OAAO9jB,WAAW;EACzB,UAAI8mB,MAAM,GAAG,EAAb;EAEA,UAAIC,UAAU,GAAG,IAAI9D,UAAJ,CAAejjB,SAAf,CAAjB;;EAEA,UAAI,CAAC1kE,CAAC,CAAC6B,OAAF,CAAU2mF,KAAV,CAAL,EAAuB;EACnBA,QAAAA,KAAK,GAAG,CAACA,KAAD,CAAR;EACH;;EAED,UAAIkD,UAAU,GAAGD,UAAU,CAACE,SAAX,CAAqBnD,KAArB,CAAjB;EAEA,UAAIvyE,QAAQ,GAAG,IAAIk1B,YAAJ,CAAiB,CAC5B,CAAE,GAD0B,EACrB,CAAE,GADmB,EACd,CADc,EAE5B,GAF4B,EAEvB,CAAE,GAFqB,EAEhB,CAFgB,EAG5B,GAH4B,EAGvB,GAHuB,EAGlB,CAHkB,EAI5B,CAAE,GAJ0B,EAIrB,GAJqB,EAIhB,CAJgB,CAAjB,CAAf;EAOA,UAAI1F,OAAO,GAAG,IAAI4Q,OAAJ,EAAd;EACA5Q,MAAAA,OAAO,CAAC6Q,KAAR,GAAgBm1C,UAAU,CAAC31E,MAA3B;EAEA2vB,MAAAA,OAAO,CAAC+Q,KAAR,GAAgBtxB,cAAhB;EACAugB,MAAAA,OAAO,CAACgR,KAAR,GAAgBvxB,cAAhB;EACAugB,MAAAA,OAAO,CAACkR,SAAR,GAAoBnxB,YAApB;EACAigB,MAAAA,OAAO,CAACiR,SAAR,GAAoBlxB,YAApB;EACAigB,MAAAA,OAAO,CAACmR,UAAR,GAAqB,CAArB;EACAnR,MAAAA,OAAO,CAAC6K,WAAR,GAAsB,IAAtB;EAEA,UAAIylE,WAAW,GAAG,IAAIt0D,iBAAJ,CAAsB;EACpCp1B,QAAAA,KAAK,EAAEq4C,SAAS,CAACC,SADmB;EAEpC1jE,QAAAA,GAAG,EAAEwkC,OAF+B;EAGpC8C,QAAAA,WAAW,EAAE,IAHuB;EAIpC;EACA;EACA;EACAG,QAAAA,UAAU,EAAE;EAPwB,OAAtB,CAAlB;EAUA,UAAIpS,QAAQ,GAAG,IAAIgY,cAAJ,EAAf;EACAhY,MAAAA,QAAQ,CAACoY,QAAT,CAAkB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAAlB;EACApY,MAAAA,QAAQ,CAACmY,YAAT,CAAsB,UAAtB,EAAkC,IAAI5B,sBAAJ,CAA2B52B,QAA3B,EAAqC,CAArC,EAAwC,KAAxC,CAAlC;EAGAuyE,MAAAA,KAAK,CAACznF,OAAN,CAAc,UAACojE,IAAD,EAAOzgE,KAAP,EAAiB;EAC3B4yB,QAAAA,QAAQ,CAACmY,YAAT,CAAsB,IAAtB,EAA4B,IAAI5B,sBAAJ,CAA2B6+C,UAAU,CAACvC,GAAX,CAAehlB,IAAf,CAA3B,EAAiD,CAAjD,EAAoD,KAApD,CAA5B;EACA,YAAI0nB,QAAQ,GAAGH,UAAU,CAAC9C,KAAX,CAAiBzkB,IAAjB,CAAf,CAF2B;;EAI3B,YAAIn7D,KAAK,GAAG,IAAIif,OAAJ,CAAY4jE,QAAQ,CAAC,CAAD,CAAR,GAAcA,QAAQ,CAAC,CAAD,CAAlC,EAAuC,CAAvC,EAA0C,CAA1C,CAAZ;EACA7iF,QAAAA,KAAK,CAACue,cAAN,CAAqBskE,QAAQ,CAAC,CAAD,CAA7B;EACA,YAAImqB,MAAM,GAAG,IAAI53C,IAAJ,CAAS9nC,QAAT,EAAmBy/E,WAAnB,CAAb;EACAC,QAAAA,MAAM,CAACpyG,IAAP,GAAc,eAAeugE,IAAf,GAAsB,GAAtB,GAA4BzgE,KAA1C;EACAsyG,QAAAA,MAAM,CAAChtG,KAAP,CAAazB,IAAb,CAAkByB,KAAlB;EACAgtG,QAAAA,MAAM,CAACv+C,QAAP,GAAkB;EACd0M,UAAAA,IAAI,EAAEA,IADQ;EAEd53C,UAAAA,IAAI,EAAEs/D,QAFQ;EAGdvD,UAAAA,QAAQ,EAAEoD,UAAU,CAACpD,QAHP;EAIdG,UAAAA,SAAS,EAAEiD,UAAU,CAACjD,SAJR;;EAAA,SAAlB;EAQAutB,QAAAA,MAAM,CAACvnD,aAAP,GAAuB,KAAvB;EACA+8B,QAAAA,MAAM,CAAC/qF,IAAP,CAAYu1G,MAAZ;EAEH,OApBD;EAuBA,aAAOxqB,MAAP;EACH;;;qCACc;EAAA;;EACX,WAAK99C,KAAL,CAAWrX,QAAX,CAAoB,UAAAj0B,GAAG,EAAI;EACvB,YAAIA,GAAG,CAACwB,IAAJ,IAAYxB,GAAG,CAACwB,IAAJ,CAASqrG,QAAT,CAAkBqF,OAAO,CAACqB,qBAAR,GAAgC,MAAI,CAAC9nE,IAAvD,CAAhB,EAA8E;EAC1E,cAAI4nE,KAAK,GAAGrzG,GAAG,CAACq1D,QAAJ,CAAa9mB,IAAb,CAAkBvmC,IAAlB,CAAuB,MAAI,CAAC+H,KAA5B,KAAsC,CAAlD;;EACA,cAAI/P,GAAG,CAACq1D,QAAJ,CAAal0D,MAAb,KAAwB,KAA5B,EAAmC;EAC/BnB,YAAAA,GAAG,CAACq1D,QAAJ,CAAal0D,MAAb,GAAsB,KAAtB;EACAnB,YAAAA,GAAG,CAAC6lC,QAAJ,GAAe,MAAI,CAAC4mE,WAAL,CAAiB,MAAI,CAAC6G,WAAtB,EAAmCD,KAAnC,CAAf;EACArzG,YAAAA,GAAG,CAAC6lC,QAAJ,CAAaqI,WAAb,GAA2B,IAA3B;EACH;EACJ;EACJ,OATD;EAUH;;;8BACO5C,OAAO;EAAA;;EACX;EAEAA,MAAAA,KAAK,GAAGA,KAAK,IAAI,KAAKA,KAAtB;EACAA,MAAAA,KAAK,CAACrX,QAAN,CAAe,UAAAj0B,GAAG,EAAI;EAElB,YAAIA,GAAG,CAACwB,IAAJ,IAAYxB,GAAG,CAACwB,IAAJ,CAASqrG,QAAT,CAAkBqF,OAAO,CAACqB,qBAAR,GAAgC,MAAI,CAAC9nE,IAAvD,CAAhB,EAA8E;EAC1EzrC,UAAAA,GAAG,CAACuV,GAAJ,CAAQ,WAAR,EAAqB,MAAI,CAACu4E,WAA1B;EACA9tF,UAAAA,GAAG,CAACuV,GAAJ,CAAQ,UAAR,EAAoB,MAAI,CAACw4E,UAAzB;EAEA/tF,UAAAA,GAAG,CAACuV,GAAJ,CAAQ,WAAR,EAAqB,MAAI,CAACy4E,WAA1B;EACAhuF,UAAAA,GAAG,CAACuV,GAAJ,CAAQ,OAAR,EAAiB,MAAI,CAAC04E,OAAtB;EACH;EACJ,OATD;EAUA,UAAI4lB,YAAY,GAAG,KAAKpH,WAAL,CAAiB,KAAK6G,WAAtB,EAAmC,EAAnC,EAAuC,KAAKlmC,IAAL,CAAU+kC,SAAjD,CAAnB;EACA0B,MAAAA,YAAY,CAACjuD,OAAb,GAfW;;EAiBX,2EAActa,KAAd;EACH;;;kCAEW;EACR,WAAK8lD,SAAL;;EACA,WAAKsiB,WAAL,GAAmB,EAAnB;EACA,WAAK9tD,OAAL;EACA,WAAK/vC,IAAL;EACH;;;6BACkC;EAC/B,aAAO,oBAAP;EACH;;;;IAjYiBwzF;;MCJhByK;;;;;EACF,gBAAYxK,OAAZ,EAAqBxhG,GAArB,EAA0B;EAAA;;EAAA;;EAEtB,8EAAMwhG,OAAO,CAAC3G,SAAd;EAEA,UAAKnhG,IAAL,GAAY,MAAZ;EACA,UAAK+G,IAAL,GAAY,QAAZ;EACA,UAAKwrG,eAAL,GAAuBzK,OAAO,CAACh1F,OAA/B;EACA,UAAK0/F,EAAL,GAAU1K,OAAO,CAACx1F,KAAlB,CAPsB;;EAQtB,UAAKmgG,EAAL,GAAU3K,OAAO,CAACv1F,MAAlB,CARsB;;EAUtB,UAAKmgG,EAAL,GAAU,CAAV,CAVsB;;EAWtB,UAAKC,EAAL,GAAU,CAAV,CAXsB;;EAatB,UAAKC,YAAL,GAAoB,KAApB,CAbsB;;EAetB,UAAKt7E,MAAL,GAAc,IAAd;EACA,UAAK63D,OAAL,GAAe,IAAf,CAhBsB;;EAkBtB,UAAKpuB,SAAL,GAAiB,wBAAjB,CAlBsB;;EAmBtB,UAAKwsB,SAAL,GAAiB,MAAjB;EACA,UAAKvsB,WAAL,GAAmB,MAAnB;EAEA,UAAK3uD,QAAL,GAAgB,OAAhB,CAtBsB;;EAwBtB,UAAKwgG,OAAL,GAAe,IAAf;EAEA,UAAKra,OAAL,GAAe,EAAf,CA1BsB;;EA2BtB,UAAKC,OAAL,GAAe,EAAf,CA3BsB;EA6BtB;EACA;;EACA,UAAK0K,SAAL,GAAiB,IAAjB;EAEA,UAAK2P,eAAL,GAAuB,IAAvB,CAjCsB;;EAkCtB,UAAKh7F,OAAL,GAAe,IAAf,CAlCsB;;EAoCtB,UAAKi7F,OAAL,GAAe,MAAf,CApCsB;;EAqCtB,UAAKC,WAAL,GAAmB,IAAnB;EACA,UAAKC,YAAL,GAAoB,IAApB;;EAEA72G,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB,EAxCsB;EA4CtB;EACA;EACA;;;EACA,UAAKwjC,KAAL,CAAWx1B,EAAX,CAAc,SAAd,EAAyB,YAAM;EAC3B,YAAK4+F,cAAL;;EACA,YAAKL,OAAL,GAAe,IAAf;EACH,KAHD;;EAIAruF,IAAAA,OAAO,CAAC/e,GAAR,CAAY,wBAAZ;EAnDsB;EAoDzB;EAGD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;;;;2BAEKqJ,GAAG;EAEJ,UAAI,CAAC,KAAKgJ,OAAV,EAAmB;;EAEnB,UAAIhJ,CAAC,CAACq0F,SAAN,EAAiB;EACb,aAAKA,SAAL,GAAiBr0F,CAAC,CAACq0F,SAAnB,CADa;EAIb;EACA;;EAEA,YAAIhU,OAAO,GAAG,KAAKgkB,WAAL,CAAiBrkG,CAAjB,CAAd;;EACA,YAAIqgF,OAAJ,EAAa;EACT,eAAKikB,YAAL,CAAkBtkG,CAAlB,EADS;EAIT;EACA;EACA;;EACH,SAPD,MAOO;EACH,eAAKs0F,IAAL;EACH;EAEJ;EAGJ;;;2BAEIt0F,GAAG;EACJ,UAAI,CAAC,KAAKgJ,OAAV,EAAmB;;EAEnB,UAAIhJ,CAAC,CAACq0F,SAAN,EAAiB;EACb,aAAKA,SAAL,GAAiBr0F,CAAC,CAACq0F,SAAnB;;EACA,YAAIhU,OAAO,GAAG,KAAKgkB,WAAL,CAAiBrkG,CAAjB,CAAd;;EACA,YAAIqgF,OAAJ,EAAa;EACT,eAAKikB,YAAL,CAAkBtkG,CAAlB,EADS;EAIT;EACA;;EACH,SAND,MAMO;EACH;EACA;EACA,eAAKukG,eAAL;EACH;EACJ;;EACD,WAAKC,gBAAL,CAAsBxkG,CAAtB;EACH;;;6BAEM;EACH,UAAI,CAAC,KAAKgJ,OAAV,EAAmB;;EACnB,WAAKu7F,eAAL,GAFG;;EAIN;;;wCAEiB;EACd,UAAI,KAAKlQ,SAAT,EAAoB;EAChB,aAAKA,SAAL,GAAiB,IAAjB,CADgB;;EAGhB,aAAK+P,cAAL;EACH;EACJ;EAED;;;;;;mCAGapkG,GAAG;EACZ,UAAI,CAAC,KAAKgJ,OAAV,EAAmB;EACnB,UAAI,CAAC,KAAK+6F,OAAV,EAAmB;EACnB,UAAIjtG,GAAG,GAAGkJ,CAAC,CAAClJ,GAAZ,CAHY;;EAIZ,UAAIoU,CAAC,GAAG,KAAKu5F,OAAL,CAAa3tG,GAAG,CAACoU,CAAJ,GAAQ,KAAKw+E,OAA1B,CAAR;;EACA,UAAIv+E,CAAC,GAAG,KAAKu5F,OAAL,CAAa5tG,GAAG,CAACqU,CAAJ,GAAQ,KAAKw+E,OAA1B,CAAR;;EAEA,WAAKoa,OAAL,CAAazgG,KAAb,CAAmBQ,OAAnB,IAA8B,8BAA8BoH,CAA9B,GAAkC,SAAlC,GAA8CC,CAA9C,GAAkD,wJAAhF;;EAEA,UAAI,KAAK5H,QAAL,IAAiB,MAArB,EAA6B;EACzB,aAAKwgG,OAAL,CAAazgG,KAAb,CAAmBnB,IAAnB,GAA0B,KAAKsiG,OAAL,CAAa3tG,GAAG,CAACoU,CAAJ,GAAQ,KAAKw+E,OAAb,GAAuB,KAAKqa,OAAL,CAAarP,WAAjD,IAAgE,IAA1F;EACH;EACJ;EAED;;;;;;mCAGa10F,GAAG;EACZ,UAAI3G,EAAE,GAAG,IAAT;EACAA,MAAAA,EAAE,CAAC0qG,OAAH,GAAajjG,QAAQ,CAACuC,aAAT,CAAuB,KAAvB,CAAb;EACAhK,MAAAA,EAAE,CAAC0qG,OAAH,CAAWlgG,SAAX,GAAuB,YAAvB;EACAxK,MAAAA,EAAE,CAAC0qG,OAAH,CAAWzgG,KAAX,CAAiBQ,OAAjB,IAA4B,yBAAyBzK,EAAE,CAACyqG,YAA5B,GAA2C,0BAA3C,GAAwEzqG,EAAE,CAACyqG,YAA3E,GAA0F,kBAA1F,GAA+GzqG,EAAE,CAACyqG,YAAlH,GAAiI,cAAjI,GAAkJzqG,EAAE,CAAC44D,SAArJ,GAAiK,oBAAjK,GAAwL54D,EAAE,CAAC64D,WAA3L,GAAyM,sGAAzM,GAAkT74D,EAAE,CAAColF,SAArT,GAAiU,kBAA7V;EACAplF,MAAAA,EAAE,CAAC0qG,OAAH,CAAWzgG,KAAX,CAAiBQ,OAAjB,IAA4B,mCAAmCzK,EAAE,CAAC64D,WAAtC,GAAoD,mCAApD,GAA0F74D,EAAE,CAAC64D,WAA7F,GAA2G,2BAA3G,GAAyI74D,EAAE,CAAC64D,WAA5I,GAA0J,GAAtL;EACA74D,MAAAA,EAAE,CAAC0qG,OAAH,CAAWzgG,KAAX,CAAiBQ,OAAjB,IAA4B,oDAA5B;EACAzK,MAAAA,EAAE,CAAC0qG,OAAH,CAAWzgG,KAAX,CAAiBQ,OAAjB,IAA4B,oBAA5B;EAEAzK,MAAAA,EAAE,CAACoqG,eAAH,CAAmBx/F,WAAnB,CAA+B,KAAK8/F,OAApC;EACH;;;uCAEgB;EACb,UAAI,CAAC,KAAKA,OAAV,EAAmB;EACnB,WAAKN,eAAL,CAAqBzO,WAArB,CAAiC,KAAK+O,OAAtC;EACA,WAAKA,OAAL,GAAe,IAAf;EACH;;;kCAEW/jG,GAAG;EACX,UAAI2kG,WAAW,GAAG,KAAKC,WAAL,CAAiB5kG,CAAjB,CAAlB;;EACA,UAAI,CAAC2kG,WAAD,IAAgBA,WAAW,KAAK,CAApC,EAAuC;EACnC;EACH;;EAED,UAAI,CAAC,KAAKZ,OAAV,EAAmB;EACf,aAAKc,YAAL,CAAkB7kG,CAAlB;EACH;EAED,WAAK+jG,OAAL,CAAapxB,SAAb,GAAyBgyB,WAAzB;EACA,WAAKf,EAAL,GAAU,KAAKG,OAAL,CAAarP,WAAvB;EACA,WAAKmP,EAAL,GAAU,KAAKE,OAAL,CAAapP,YAAvB;EAEA,aAAOgQ,WAAP;EACH;;;kCAEW3kG,GAAG;EAEX,UAAI8kG,WAAJ;;EAEA,UAAI,KAAKzkB,OAAT,EAAkB;EACdykB,QAAAA,WAAW,GAAGx3G,CAAC,CAAC8D,UAAF,CAAa,KAAKivF,OAAlB,IAA6B,KAAKA,OAAL,CAAargF,CAAC,CAACq0F,SAAf,CAA7B,GAAyD,KAAKhU,OAA5E;EACH,OAFD,MAEO;EACHykB,QAAAA,WAAW,GAAG,KAAKC,kBAAL,CAAwB/kG,CAAC,CAACq0F,SAA1B,CAAd;EACH;EAED,aAAOyQ,WAAP;EACH;;;yCAEkB7mE,MAAM;EACrB,UAAIohE,GAAG,GAAG,EAAV;;EACA,UAAIphE,IAAI,CAACmiD,KAAL,KAAerrF,SAAf,IAA4BkpC,IAAI,CAACmiD,KAAL,KAAe,IAA3C,IAAmDniD,IAAI,CAACmiD,KAAL,KAAe,EAAtE,EAA0E;EACtEif,QAAAA,GAAG,IAAI,gGAAgGphE,IAAI,CAACmiD,KAArG,GAA6G,QAApH;EACH;EACD,UAAI98E,KAAK,GAAG26B,IAAI,CAACtkB,KAAL,IAAcskB,IAAI,CAACg0B,SAAnB,IAAgCh0B,IAAI,CAACi0B,WAAjD,CALqB;;EAQrBmtC,MAAAA,GAAG,IAAI,6DAAP;;EACA,UAAI/7F,KAAJ,EAAW;EACP+7F,QAAAA,GAAG,IAAI,4BAA4B/7F,KAA5B,GAAoC,8GAA3C;EACH;;EACDhW,MAAAA,CAAC,CAACiD,IAAF,CAAO0tC,IAAI,CAAC9zB,OAAZ,EAAqB,UAACpZ,KAAD,EAAQtB,GAAR,EAAgB;EACjC,YAAIA,GAAG,KAAKwuC,IAAI,CAACx+B,KAAjB,EAAwB;EACxB4/F,QAAAA,GAAG,IAAI,2CAA2C5vG,GAA3C,GAAiD,gBAAjD,GAAoEsB,KAApE,GAA4E,eAAnF;EACH,OAHD;;EAKAsuG,MAAAA,GAAG,IAAI,QAAP;;EAEA/xG,MAAAA,CAAC,CAACiD,IAAF,CAAO0tC,IAAI,CAACghE,KAAZ,EAAmB,UAAUp2F,IAAV,EAAgB1Y,CAAhB,EAAmB;EAClC;EACA,YAAI,CAAC0Y,IAAI,CAAC9X,KAAN,IAAe8X,IAAI,CAAC9X,KAAL,KAAe,CAAlC,EAAqC;EACjC;EACH;;EAGD,YAAIuS,KAAJ,EAAW;EACP+7F,UAAAA,GAAG,IAAI,6BAA6B/7F,KAA7B,GAAqC,0HAA5C;EACH;EACD+7F,QAAAA,GAAG,IAAIx2F,IAAI,CAAC9X,KAAL,GAAa,QAApB;EACH,OAXD;;EAYA,aAAOsuG,GAAP;EACH;EAGD;;;;;;;8BAIQn0F,GAAG;EACP,UAAI,KAAK84F,eAAT,EAA0B;EACtB,YAAIzvF,CAAC,GAAG,KAAKqvF,EAAL,GAAU,CAAlB,CADsB;;EAEtB,YAAI14F,CAAC,GAAG,CAAR,EAAW;EACPA,UAAAA,CAAC,GAAG,CAAJ;EACH;;EACD,YAAIA,CAAC,GAAGqJ,CAAJ,GAAQ,KAAKmvF,EAAjB,EAAqB;EACjBx4F,UAAAA,CAAC,GAAG,KAAKw4F,EAAL,GAAUnvF,CAAd;EACH;EACJ;;EACD,aAAOrJ,CAAP;EACH;EAED;;;;;;;8BAIQC,GAAG;EACP,UAAI,KAAK64F,eAAT,EAA0B;EACtB,YAAI1mG,CAAC,GAAG,KAAKumG,EAAL,GAAU,CAAlB,CADsB;;EAEtB,YAAI14F,CAAC,GAAG,CAAR,EAAW;EACPA,UAAAA,CAAC,GAAG,CAAJ;EACH;;EACD,YAAIA,CAAC,GAAG7N,CAAJ,GAAQ,KAAKqmG,EAAjB,EAAqB;EACjBx4F,UAAAA,CAAC,GAAG,KAAKw4F,EAAL,GAAUrmG,CAAd;EACH;EACJ;;EACD,aAAO6N,CAAP;EACH;;;uCAGgBnL,GAAG;;;yCAID;EACf,UAAImgF,MAAM,GAAG,KAAK3F,IAAL,CAAU2F,MAAvB,CADe;;EAGf,UAAI,CAACA,MAAD,IAAWA,MAAM,CAACloF,IAAP,IAAe,MAA9B,EAAsC;EAEtC,UAAI,CAAC,KAAKgsG,OAAN,IAAiB,CAAC,KAAKE,YAA3B,EAAyC,OAL1B;;EAOf,WAAKA,YAAL,CAAkBn/F,OAAlB;;EACA,WAAKm/F,YAAL,GAAoB,IAApB;EACH;;;uCAEgBnkG,GAAG;;;;IA1RLs9E;;MCGb0nB;;;;;EACF,qBAAYhM,OAAZ,EAAqBxhG,GAArB,EAA0B;EAAA;;EAAA;;EACtB,mFAAMwhG,OAAO,CAAC3G,SAAd;EAEA,UAAK76F,GAAL,GAAWA,GAAX;EAEA,UAAKtG,IAAL,GAAY,WAAZ;EACA,UAAK+G,IAAL,GAAY,UAAZ;EACA,UAAKgtG,MAAL,GAAc,IAAd;EACA,UAAKC,MAAL,GAAc,KAAd,CARsB;;EAStB,UAAK3hG,QAAL,GAAgB,IAAhB,CATsB;;EAUtB,UAAK7L,IAAL,GAAY,IAAZ;EAEA,UAAKuS,KAAL,GAAa;EACT4nD,MAAAA,QAAQ,EAAE,EADD;EAETI,MAAAA,SAAS,EAAE,KAFF;EAGTC,MAAAA,WAAW,EAAE,MAHJ;EAITj7B,MAAAA,SAAS,EAAE,CAJF;EAKTi+C,MAAAA,MAAM,EAAE,IALC;EAMT5zE,MAAAA,MAAM,EAAE;EANC,KAAb;EAUA,UAAKs7F,IAAL,GAAY,EAAZ;;EAGAtvG,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB8C,GAArB;;EACA,UAAK+hD,IAAL;;EA1BsB;EA4BzB;;;;6BAEM;EAAA;;EAEH,UAAI,KAAK0rD,MAAT,EAAiB;EACb,YAAIhpB,MAAM,GAAG,KAAKsB,YAAL,CAAkBrB,iBAAlB,EAAb;;EACA,YAAI2I,QAAQ,GAAG,KAAKtH,YAAL,CAAkB6F,cAAlB,CAAiCuW,oBAAjC,EAAf;;EACA,YAAIwL,WAAW,GAAG,KAAK5nB,YAAL,CAAkB6F,cAAlB,CAAiClB,cAAjC,EAAlB;;EAEA,YAAIjG,MAAJ,EAAY;EACR,eAAKvkF,IAAL,GAAY,EAAZ;EACAmtF,UAAAA,QAAQ,CAACx2F,OAAT,CAAiB,UAACqL,GAAD,EAAMvJ,CAAN,EAAY;EACzB,gBAAIsiF,OAAO,GAAG,MAAI,CAACgI,KAAL,CAAW/7E,SAAX,CAAqBG,YAArB,qBAAqCo9E,MAArC,EAA8CviF,GAA9C,EAAd;;EACA,gBAAIvD,GAAG,GAAG,EAAV;;EACAs8E,YAAAA,OAAO,CAACpkF,OAAR,CAAgB,UAAA2D,IAAI,EAAI;EACpBmE,cAAAA,GAAG,CAACpI,IAAJ,CAASiE,IAAI,CAAC,MAAI,CAACizG,MAAN,CAAb;EACH,aAFD;;EAGA9uG,YAAAA,GAAG,CAAC8lF,MAAJ,GAAaviF,GAAb;;EACA,gBAAIyrG,WAAW,CAACh1G,CAAD,CAAf,EAAoB;EAChBgG,cAAAA,GAAG,CAACgvG,WAAJ,GAAkBA,WAAW,CAACh1G,CAAD,CAA7B;EACH;;EACD,YAAA,MAAI,CAACuH,IAAL,CAAU3J,IAAV,CAAeoI,GAAf;EACH,WAXD;EAaH,SAfD,MAeO;EACH,eAAKuB,IAAL,GAAY,KAAK6lF,YAAL,CAAkByK,gBAAlB,CAAmC,KAAKid,MAAxC,CAAZ;EACH;EACJ;;EACD,WAAK1nB,YAAL,CAAkBviD,KAAlB,CAAwB3jB,GAAxB,CAA4B,KAAK2jB,KAAjC;EACH;;;6BAEM;EAAA;;EACH,UAAI+/C,GAAG,GAAG,KAAKN,KAAL,CAAWM,GAArB;EACA,UAAIqqB,KAAK,GAAG,EAAZ,CAFG;EAIH;EACA;;EACA,UAAIC,UAAU,GAAG,EAAjB;;EAEA,UAAI,KAAK9hG,QAAT,EAAmB;EACf,YAAIjW,CAAC,CAAC8D,UAAF,CAAa,KAAKmS,QAAlB,CAAJ,EAAiC;EAC7B8hG,UAAAA,UAAU,GAAG,KAAK9hG,QAAL,CAAcjT,IAAd,CAAmB,IAAnB,EAAyB,KAAKoH,IAA9B,CAAb;EACH;;EACD,YAAIpK,CAAC,CAAC6B,OAAF,CAAU,KAAKoU,QAAf,CAAJ,EAA8B;EAC1B8hG,UAAAA,UAAU,GAAGA,UAAU,CAACp3G,MAAX,CAAkB,KAAKsV,QAAvB,CAAb;EACH;EACJ,OAPD,MAOO;EACH,YAAI,KAAK2hG,MAAL,KAAgB,KAApB,EAA2B;EACvBE,UAAAA,KAAK,GAAG,KAAKE,eAAL,EAAR;EAGH,SAJD,MAIO,IAAI,KAAKJ,MAAL,KAAgB,KAApB,EAA2B;EAC9BE,UAAAA,KAAK,GAAG,KAAKG,eAAL,EAAR;EAEH;EACJ;;EAGDH,MAAAA,KAAK,CAAC/2G,OAAN,CAAc,UAAA2D,IAAI,EAAI;EAClB,YAAIggE,SAAS,GAAG,MAAI,CAACwzC,aAAL,CAAmBxzG,IAAI,CAACyzG,MAAxB,CAAhB;;EAEA,YAAIrH,OAAO,GAAGrjB,GAAG,CAAClC,eAAJ,CAAoB7mF,IAAI,CAAC0H,GAAzB,EAA8Bs4D,SAA9B,CAAd;EACAosC,QAAAA,OAAO,CAAC,CAAD,CAAP,CAAW76F,QAAX,CAAoBqV,SAApB,CAA8B5mB,IAAI,CAAC8E,GAAnC;EACAsnG,QAAAA,OAAO,CAAC,CAAD,CAAP,CAAW76F,QAAX,CAAoBg2B,IAApB,CAAyBy4B,SAAS,CAAC1wD,MAAV,GAAmB88F,OAAO,CAAC,CAAD,CAAP,CAAW76F,QAAX,CAAoB4H,CAAhE;;EACA,QAAA,MAAI,CAAC6vB,KAAL,CAAW3jB,GAAX,CAAe+mF,OAAO,CAAC,CAAD,CAAtB;EACH,OAPD;EAUH;;;wCACiB;EAAA;;EACd,UAAItnG,GAAG,GAAG,EAAV;EAAA,UAAcX,GAAd;EAAA,UAAmBuD,GAAnB;;EAEA,UAAI,CAAC,KAAKhC,IAAV,EAAgB;EACZge,QAAAA,OAAO,CAAC8E,KAAR,CAAc,yBAAd;EACH,OAFD,MAEO;EACH,YAAIltB,CAAC,CAAC6B,OAAF,CAAU,KAAKuI,IAAL,CAAU,CAAV,CAAV,CAAJ,EAA6B;EACzB,eAAKA,IAAL,CAAUrJ,OAAV,CAAkB,UAAAq3G,EAAE,EAAI;EACpBvvG,YAAAA,GAAG,GAAG7I,CAAC,CAACgF,OAAF,CAAUozG,EAAV,CAAN;EACAhsG,YAAAA,GAAG,GAAG9J,IAAI,CAACsC,GAAL,CAASQ,KAAT,CAAe,IAAf,EAAqByD,GAArB,CAAN;EACAW,YAAAA,GAAG,CAAC/I,IAAJ,CAAS,MAAI,CAAC43G,UAAL,CAAgBjsG,GAAhB,EAAqBgsG,EAArB,CAAT;EAEH,WALD;EAMA,iBAAO5uG,GAAP;EACH,SARD,MAQO;EACHX,UAAAA,GAAG,GAAG7I,CAAC,CAACgF,OAAF,CAAU,KAAKoF,IAAf,CAAN;EACAgC,UAAAA,GAAG,GAAG9J,IAAI,CAACsC,GAAL,CAASQ,KAAT,CAAe,IAAf,EAAqByD,GAArB,CAAN;EACAW,UAAAA,GAAG,CAAC/I,IAAJ,CAAS,KAAK43G,UAAL,CAAgBjsG,GAAhB,CAAT;EACA,iBAAO5C,GAAP;EACH;EAEJ;;EACD,aAAO,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,CAAP;EAEH;;;wCACiB;EAAA;;EACd,UAAIA,GAAG,GAAG,EAAV;EAAA,UAAcX,GAAd;EAAA,UAAmBuD,GAAnB;;EAEA,UAAI,CAAC,KAAKhC,IAAV,EAAgB;EACZge,QAAAA,OAAO,CAAC8E,KAAR,CAAc,yBAAd;EACH,OAFD,MAEO;EACH,YAAIltB,CAAC,CAAC6B,OAAF,CAAU,KAAKuI,IAAL,CAAU,CAAV,CAAV,CAAJ,EAA6B;EACzB,eAAKA,IAAL,CAAUrJ,OAAV,CAAkB,UAAAq3G,EAAE,EAAI;EACpBvvG,YAAAA,GAAG,GAAG7I,CAAC,CAACgF,OAAF,CAAUozG,EAAV,CAAN;EACAhsG,YAAAA,GAAG,GAAG9J,IAAI,CAACiD,GAAL,CAASH,KAAT,CAAe,IAAf,EAAqByD,GAArB,CAAN;EACAW,YAAAA,GAAG,CAAC/I,IAAJ,CAAS,MAAI,CAAC43G,UAAL,CAAgBjsG,GAAhB,EAAqBgsG,EAArB,CAAT;EAEH,WALD;EAMA,iBAAO5uG,GAAP;EACH,SARD,MAQO;EACHX,UAAAA,GAAG,GAAG7I,CAAC,CAACgF,OAAF,CAAU,KAAKoF,IAAf,CAAN;EACAgC,UAAAA,GAAG,GAAG9J,IAAI,CAACiD,GAAL,CAASH,KAAT,CAAe,IAAf,EAAqByD,GAArB,CAAN;EACAW,UAAAA,GAAG,CAAC/I,IAAJ,CAAS,KAAK43G,UAAL,CAAgBjsG,GAAhB,CAAT;EACA,iBAAO5C,GAAP;EACH;EAEJ;;EACD,aAAO,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,CAAP;EACH;;;iCACU4C,KAAKgsG,IAAI;EAChB,UAAIE,OAAO,GAAG,KAAKnrB,KAAL,CAAWjjF,GAAzB;EACA,UAAI0T,CAAJ,EAAOC,CAAP,EAAUmJ,CAAV;;EACA,UAAI2nE,MAAM,GAAG,KAAKsB,YAAL,CAAkBrB,iBAAlB,EAAb,CAHgB;;;EAMhB,UAAIH,SAAS,uBAAM,KAAKkpB,MAAX,EAAoBvrG,GAApB,CAAb;;EACA,UAAIgsG,EAAE,IAAIzpB,MAAV,EAAkB;EACdF,QAAAA,SAAS,CAACE,MAAD,CAAT,GAAoBypB,EAAE,CAACzpB,MAAvB;EACH;;EACD,UAAI9xE,OAAO,GAAG,KAAKswE,KAAL,CAAW/7E,SAAX,CAAqBG,YAArB,CAAkCk9E,SAAlC,CAAd;;EACA,UAAIqI,IAAI,GAAG,KAAKyhB,cAAL,EAAX;;EAEA16F,MAAAA,CAAC,GAAG,KAAKoyE,YAAL,CAAkBmE,gBAAlB,CAAmChoF,GAAnC,EAAwC0qF,IAAxC,CAAJ;EAEAl5E,MAAAA,CAAC,GAAG,KAAKqyE,YAAL,CAAkB0F,gBAAlB,CAAmC94E,OAAO,CAAC,CAAD,CAAP,CAAWy7F,OAAO,CAAC5tG,KAAR,CAAc2jB,KAAd,CAAoBlc,KAA/B,CAAnC,CAAJ;;EACA,UAAImmG,OAAO,CAAC5tG,KAAR,CAAc6jB,KAAd,IAAuB+pF,OAAO,CAAC5tG,KAAR,CAAc6jB,KAAd,CAAoBpc,KAA/C,EAAsD;EAClD6U,QAAAA,CAAC,GAAG,KAAKipE,YAAL,CAAkBiG,gBAAlB,CAAmCkiB,EAAE,CAACP,WAAtC,CAAJ;EACH,OAFD,MAEO;EACH7wF,QAAAA,CAAC,GAAG,KAAKipE,YAAL,CAAkBiG,gBAAlB,CAAmC,KAAKyhB,MAAxC,CAAJ;EACH;;EAED,aAAO;EACHvrG,QAAAA,GAAG,EAAEA,GADF;EAEH5C,QAAAA,GAAG,EAAE,CAACoU,CAAD,EAAIC,CAAJ,EAAO,CAACmJ,CAAR,CAFF;EAGHmxF,QAAAA,MAAM,EAAEC,EAAE,CAACP,WAAH,IAAkB,KAAKF;EAH5B,OAAP;EAKH;;;uCACgB;EAAA;;EACb,UAAIa,QAAQ,GAAG3e,YAAf;;EACA,WAAK1M,KAAL,CAAWjjF,GAAX,CAAe6kF,MAAf,CAAsBhuF,OAAtB,CAA8B,UAAA2D,IAAI,EAAI;EAClC,YAAI1E,CAAC,CAAC6B,OAAF,CAAU6C,IAAI,CAACyN,KAAf,CAAJ,EAA2B;EACvB,cAAIsmG,OAAO,GAAGz4G,CAAC,CAACgF,OAAF,CAAU,MAAI,CAACmN,KAAf,CAAd;;EACA,cAAIy3D,GAAG,GAAG5pE,CAAC,CAAC0B,OAAF,CAAU+2G,OAAV,EAAmB,MAAI,CAACd,MAAxB,CAAV;;EACA,cAAI/tC,GAAG,KAAK,CAAC,CAAb,EAAgB;EACZ4uC,YAAAA,QAAQ,GAAG9zG,IAAI,CAAC41F,SAAhB;EACH;EACJ;EACJ,OARD;;EASA,aAAO,KAAKrK,YAAL,CAAkB4G,QAAlB,CAA2B2hB,QAA3B,EAAqC1hB,IAA5C;EACH;;;oCACa3kF,OAAO;EACjB,UAAIua,MAAJ;;EACA,UAAI,KAAKxiB,GAAL,CAASyS,KAAT,IAAkB,KAAKzS,GAAL,CAASyS,KAAT,CAAegoD,SAArC,EAAgD;EAC5C,eAAO,KAAKhoD,KAAZ;EACH,OAFD,MAEO;EAEH+P,QAAAA,MAAM,GAAG,KAAKujE,YAAL,CAAkBzC,QAAlB,CAA2Br7E,KAA3B,EAAkCka,KAA3C;EAEH;;EACD,aAAOrsB,CAAC,CAACoH,MAAF,CAAS,EAAT,EAAa,KAAKuV,KAAlB,EAAyB;EAAEgoD,QAAAA,SAAS,EAAEj4C;EAAb,OAAzB,CAAP;EAEH;;;;IAvMmBsjE;;ECDxB,IAAI0oB,mBAAmB,GAAG,IAA1B;;MACMC;;;;;EACF,kBAAYjN,OAAZ,EAAqBxhG,GAArB,EAA0B;EAAA;;EAAA;;EACtB,gFAAMwhG,OAAO,CAAC3G,SAAd;EAGA,UAAKnhG,IAAL,GAAY,QAAZ;EACA,UAAK+G,IAAL,GAAY,UAAZ;EAEA,UAAKgrC,IAAL,GAAY,UAAZ,CAPsB;;EAStB,UAAKzrC,GAAL,GAAWA,GAAX;EAEA;;;;;;;EAMA,UAAKE,IAAL,GAAY,IAAZ,CAjBsB;EAoBtB;EACA;EACA;EACA;;EACA,UAAK+H,KAAL,GAAa,IAAb;EAEA,UAAKymG,MAAL,GAAc;EACV7jG,MAAAA,GAAG,EAAE,EADK;EACDH,MAAAA,KAAK,EAAE,EADN;EACUqf,MAAAA,MAAM,EAAE,EADlB;EACsBpf,MAAAA,IAAI,EAAE;EAD5B,KAAd;EAIA,UAAKy6F,IAAL,GAAY;EACRn5F,MAAAA,MAAM,EAAE,EADA;EAERD,MAAAA,KAAK,EAAE,MAFC;EAGR88E,MAAAA,SAAS,EAAE,QAHH;EAIRp2E,MAAAA,MAAM,EAAE,CAJA;EAKR+sB,MAAAA,SAAS,EAAE,CALH;EAMRg7B,MAAAA,SAAS,EAAE,MANH;EAORk0C,MAAAA,SAAS,EAAE,qBAAY,EAPf;EAQRC,MAAAA,WAAW,EAAE,uBAAY;EARjB,KAAZ;EAWA,UAAKn8F,KAAL,GAAa;EACTynD,MAAAA,SAAS,EAAE,MADF;EAET8B,MAAAA,YAAY,EAAE,QAFL;EAGTvB,MAAAA,SAAS,EAAE,MAHF;EAGU;EACnBo0C,MAAAA,MAAM,EAAE,SAJC;EAKTx0C,MAAAA,QAAQ,EAAE,EALD;EAMThyD,MAAAA,MAAM,EAAE,gBAAU3O,IAAV,EAAgB+sC,IAAhB,EAAsB;EAC1B,eAAO/sC,IAAP;EACH;EARQ,KAAb,CAzCsB;EAqDtB;;EAEA,UAAKo1G,WAAL,GAAmB,MAAnB,CAvDsB;;EAyDtB,UAAKpgF,SAAL,GAAiB,GAAjB,CAzDsB;;EA2DtB,UAAK3iB,QAAL,GAAgB+vE,IAAI,CAACM,OAArB,CA3DsB;;EA4DtB,UAAK8V,OAAL,GAAe,CAAf;EACA,UAAKC,OAAL,GAAe,CAAf;;EAGAr8F,IAAAA,CAAC,CAACoH,MAAF,CAAS,IAAT,yDAAqB;EACjBkoG,MAAAA,IAAI,EAAE;EACFuJ,QAAAA,SAAS,EAAE,mBAAUz2G,GAAV,EAAe,EADxB;EAGF02G,QAAAA,WAAW,EAAE,qBAAU12G,GAAV,EAAe;EAH1B;EADW,KAArB,EAOG8H,GAPH;;EASA,UAAK+mG,MAAL,GAAc,IAAd;EAzEsB;EA6EzB;;;;qCAEc/mG,KAAK;EAChB,UAAI4+F,UAAU,GAAG5+F,GAAG,CAACE,IAArB;;EACA,UAAI0+F,UAAJ,EAAgB;EACZ9oG,QAAAA,CAAC,CAACiD,IAAF,CAAO6lG,UAAP,EAAmB,UAAUpkG,IAAV,EAAgB7B,CAAhB,EAAmB;EAClC6B,UAAAA,IAAI,CAACgX,OAAL,GAAe,aAAahX,IAAb,GAAoBA,IAAI,CAACgX,OAAzB,GAAmC,IAAlD;EACAhX,UAAAA,IAAI,CAAC2H,GAAL,GAAWxJ,CAAX;EACH,SAHD;;EAIA,eAAOqH,GAAG,CAACE,IAAX;EACH,OAND,MAMO;EACH0+F,QAAAA,UAAU,GAAG,KAAK7Y,YAAL,CAAkBgpB,aAAlB,EAAb;EACH;EACD,aAAOnQ,UAAU,IAAI,EAArB;EACH;;;+BAEQ;EACL,UAAI/D,SAAS,GAAG,KAAK9U,YAArB,CADK;EAIL;EACA;EACA;EACA;EAEA;;EACA,UAAIzmF,GAAG,GAAG;EACNoU,QAAAA,CAAC,EAAEmnF,SAAS,CAAClgC,OAAV,CAAkBhwD,IAAlB,GAAyB,KAAK+jG,MAAL,CAAY/jG,IADlC;EAENgJ,QAAAA,CAAC,EAAEknF,SAAS,CAAClgC,OAAV,CAAkB9vD,GAAlB,GAAwB,KAAK6jG,MAAL,CAAY7jG;EAFjC,OAAV;;EAKA,cAAQ,KAAKkB,QAAL,IAAiB,KAAKA,QAAL,CAAcijG,iBAAd,EAAzB;EACI,aAAKlzB,IAAI,CAACO,QAAL,CAAc2yB,iBAAd,EAAL;EACI1vG,UAAAA,GAAG,CAACoU,CAAJ,GAAQmnF,SAAS,CAAC7uF,KAAV,GAAkB,KAAKA,KAAvB,GAA+B6uF,SAAS,CAAClgC,OAAV,CAAkBjwD,KAAjD,GAAyD,KAAKgkG,MAAL,CAAYhkG,KAA7E;EACApL,UAAAA,GAAG,CAACqU,CAAJ,GAAQknF,SAAS,CAAClgC,OAAV,CAAkB9vD,GAAlB,GAAwB,KAAK6jG,MAAL,CAAY7jG,GAA5C;EACA;;EACJ,aAAKixE,IAAI,CAACQ,UAAL,CAAgB0yB,iBAAhB,EAAL;EACI1vG,UAAAA,GAAG,CAACoU,CAAJ,GAAQmnF,SAAS,CAAClgC,OAAV,CAAkBhwD,IAAlB,GAAyB,KAAK+jG,MAAL,CAAY/jG,IAA7C;EACArL,UAAAA,GAAG,CAACqU,CAAJ,GAAQknF,SAAS,CAAC5uF,MAAV,GAAmB4uF,SAAS,CAAClgC,OAAV,CAAkB5wC,MAArC,GAA8C,KAAK2kF,MAAL,CAAY3kF,MAA1D,GAAmE,KAAK9d,MAAhF;EACA;;EACJ,aAAK6vE,IAAI,CAACS,WAAL,CAAiByyB,iBAAjB,EAAL;EACI1vG,UAAAA,GAAG,CAACoU,CAAJ,GAAQmnF,SAAS,CAAC7uF,KAAV,GAAkB,KAAKA,KAAvB,GAA+B6uF,SAAS,CAAClgC,OAAV,CAAkBjwD,KAAjD,GAAyD,KAAKgkG,MAAL,CAAYhkG,KAA7E;EACApL,UAAAA,GAAG,CAACqU,CAAJ,GAAQknF,SAAS,CAAC5uF,MAAV,GAAmB4uF,SAAS,CAAClgC,OAAV,CAAkB5wC,MAArC,GAA8C,KAAK2kF,MAAL,CAAY3kF,MAA1D,GAAmE,KAAK9d,MAAhF;EACA;;EACJ,aAAK6vE,IAAI,CAACC,IAAL,CAAUizB,iBAAV,EAAL;EACI1vG,UAAAA,GAAG,CAACoU,CAAJ,GAAQmnF,SAAS,CAAClgC,OAAV,CAAkBhwD,IAAlB,GAAyB,KAAK+jG,MAAL,CAAY/jG,IAA7C;EACArL,UAAAA,GAAG,CAACqU,CAAJ,GAAQ,CAACknF,SAAS,CAAC5uF,MAAV,GAAmB4uF,SAAS,CAAClgC,OAAV,CAAkB5wC,MAArC,GAA8C,KAAK2kF,MAAL,CAAY3kF,MAA1D,GAAmE,KAAK9d,MAAzE,IAAmF,GAA3F;EACA;;EACJ,aAAK6vE,IAAI,CAACI,KAAL,CAAW8yB,iBAAX,EAAL;EACI1vG,UAAAA,GAAG,CAACoU,CAAJ,GAAQmnF,SAAS,CAAC7uF,KAAV,GAAkB,KAAKA,KAAvB,GAA+B6uF,SAAS,CAAClgC,OAAV,CAAkBjwD,KAAjD,GAAyD,KAAKgkG,MAAL,CAAYhkG,KAA7E;EACApL,UAAAA,GAAG,CAACqU,CAAJ,GAAQ,CAACknF,SAAS,CAAC5uF,MAAV,GAAmB4uF,SAAS,CAAClgC,OAAV,CAAkB5wC,MAArC,GAA8C,KAAK2kF,MAAL,CAAY3kF,MAA1D,GAAmE,KAAK9d,MAAzE,IAAmF,GAA3F;EACA;;EACJ,aAAK6vE,IAAI,CAACE,GAAL,CAASgzB,iBAAT,EAAL;EACI1vG,UAAAA,GAAG,CAACoU,CAAJ,GAAQ,CAACmnF,SAAS,CAAC7uF,KAAV,GAAkB,KAAKA,KAAvB,GAA+B6uF,SAAS,CAAClgC,OAAV,CAAkBjwD,KAAjD,GAAyD,KAAKgkG,MAAL,CAAYhkG,KAAtE,IAA+E,GAAvF;EACApL,UAAAA,GAAG,CAACqU,CAAJ,GAAQknF,SAAS,CAAClgC,OAAV,CAAkB9vD,GAAlB,GAAwB,KAAK6jG,MAAL,CAAY7jG,GAA5C;EACA;;EACJ,aAAKixE,IAAI,CAACG,MAAL,CAAY+yB,iBAAZ,EAAL;EACI1vG,UAAAA,GAAG,CAACoU,CAAJ,GAAQ,CAACmnF,SAAS,CAAC7uF,KAAV,GAAkB,KAAKA,KAAvB,GAA+B6uF,SAAS,CAAClgC,OAAV,CAAkBjwD,KAAjD,GAAyD,KAAKgkG,MAAL,CAAYhkG,KAAtE,IAA+E,GAAvF;EACApL,UAAAA,GAAG,CAACqU,CAAJ,GAAQknF,SAAS,CAAC5uF,MAAV,GAAmB4uF,SAAS,CAAClgC,OAAV,CAAkB5wC,MAArC,GAA8C,KAAK2kF,MAAL,CAAY3kF,MAA1D,GAAmE,KAAK9d,MAAhF;EACA;;EACJ,aAAK6vE,IAAI,CAACK,MAAL,CAAY6yB,iBAAZ,EAAL;EACI1vG,UAAAA,GAAG,CAACoU,CAAJ,GAAQ,CAACmnF,SAAS,CAAC7uF,KAAV,GAAkB,KAAKA,KAAvB,GAA+B6uF,SAAS,CAAClgC,OAAV,CAAkBjwD,KAAjD,GAAyD,KAAKgkG,MAAL,CAAYhkG,KAAtE,IAA+E,GAAvF;EACApL,UAAAA,GAAG,CAACqU,CAAJ,GAAQ,CAACknF,SAAS,CAAC5uF,MAAV,GAAmB4uF,SAAS,CAAClgC,OAAV,CAAkB5wC,MAArC,GAA8C,KAAK2kF,MAAL,CAAY3kF,MAA1D,GAAmE,KAAK9d,MAAzE,IAAmF,GAA3F;EA/BR;;EAmCA3M,MAAAA,GAAG,CAACoU,CAAJ,IAAS,KAAKw+E,OAAd;EACA5yF,MAAAA,GAAG,CAACqU,CAAJ,IAAS,KAAKw+E,OAAd;EACA,WAAK7yF,GAAL,GAAWA,GAAX;EACH;;;6BAGM;EACH,WAAK2vG,MAAL;EACA,WAAKC,MAAL;EACA,WAAK1rE,KAAL,CAAWz3B,QAAX,CAAoBa,GAApB,CAAwB,KAAKtN,GAAL,CAASoU,CAAjC,EAAoC,KAAKpU,GAAL,CAASqU,CAA7C,EAAgD,CAAhD;EAEH;;;+BAEQ;EACL,UAAI9R,EAAE,GAAG,IAAT;EACA,UAAI0hF,GAAG,GAAG,KAAKN,KAAL,CAAWM,GAArB;EACA,UAAIsX,SAAS,GAAG,KAAK9U,YAArB;;EACA,UAAI,KAAKghB,MAAT,EAAiB;EACb,aAAKA,MAAL,GAAc,KAAd;EACA,aAAK7mG,IAAL,GAAY,KAAKivG,cAAL,CAAoB,KAAKnvG,GAAzB,CAAZ;EAEH;;EACD,UAAIqiF,SAAS,GAAGwY,SAAS,CAAC7uF,KAAV,GAAkB6uF,SAAS,CAAClgC,OAAV,CAAkBhwD,IAApC,GAA2CkwF,SAAS,CAAClgC,OAAV,CAAkBjwD,KAA7D,GAAqE,KAAKgkG,MAAL,CAAY/jG,IAAjF,GAAwF,KAAK+jG,MAAL,CAAYhkG,KAApH;EACA,UAAI43E,UAAU,GAAGuY,SAAS,CAAC5uF,MAAV,GAAmB4uF,SAAS,CAAClgC,OAAV,CAAkB9vD,GAArC,GAA2CgwF,SAAS,CAAClgC,OAAV,CAAkB5wC,MAA7D,GAAsE,KAAK2kF,MAAL,CAAY7jG,GAAlF,GAAwF,KAAK6jG,MAAL,CAAY3kF,MAArH;EACA,WAAK+zB,OAAL;EACA,UAAIsxD,YAAY,GAAG,CAAnB;EACA,UAAIpjG,KAAK,GAAG,CAAZ;EAAA,UAAeC,MAAM,GAAG,CAAxB;EACA,UAAIyH,CAAC,GAAG,CAAR;EAAA,UAAWC,CAAC,GAAG,CAAf;EACA,UAAI07F,IAAI,GAAG,CAAX;EACA,UAAIC,MAAM,GAAG,KAAb,CAhBK;;EAiBLd,MAAAA,mBAAmB,GAAG,KAAKe,eAAL,CAAqBx3G,IAArB,CAA0B,IAA1B,CAAtB;;EACAjC,MAAAA,CAAC,CAACiD,IAAF,CAAO,KAAKmH,IAAZ,EAAkB,UAAUhI,GAAV,EAAeS,CAAf,EAAkB;EAEhC,YAAI22G,MAAJ,EAAY;;EAEZ,YAAIE,KAAK,GAAGjsB,GAAG,CAACpC,iBAAJ,CAAsBt/E,EAAE,CAACujG,IAAH,CAAQ1yF,MAA9B,EAAsC;EAC9C+nD,UAAAA,SAAS,EAAE,CAACviE,GAAG,CAACsZ,OAAL,GAAe,MAAf,GAAyBtZ,GAAG,CAACiqB,KAAJ,IAAatgB,EAAE,CAACitG;EADN,SAAtC,CAAZ;;EAGAU,QAAAA,KAAK,CAAC91G,IAAN,GAAa+0G,MAAM,CAACgB,cAAP,GAAwB,OAAxB,GAAkC92G,CAA/C;;EACA62G,QAAAA,KAAK,CAACzjG,QAAN,CAAea,GAAf,CAAmB/K,EAAE,CAACujG,IAAH,CAAQ1yF,MAA3B,EAAmC7Q,EAAE,CAACujG,IAAH,CAAQn5F,MAAR,GAAiB,CAApD,EAAuD,CAAvD;;EAEAujG,QAAAA,KAAK,CAACxhG,EAAN,CAAS,OAAT,EAAkBwgG,mBAAlB;;EAEA,YAAInvB,MAAM,GAAGkE,GAAG,CAAClC,eAAJ,CAAoBx/E,EAAE,CAAC4Q,KAAH,CAASpK,MAAT,CAAgBnQ,GAAG,CAACwB,IAAJ,IAAYxB,GAAG,CAACua,KAAhC,EAAuCva,GAAvC,CAApB,EAAiE;EAC1EuiE,UAAAA,SAAS,EAAE54D,EAAE,CAAC4Q,KAAH,CAASgoD,SADsD;EAE1EJ,UAAAA,QAAQ,EAAEx4D,EAAE,CAAC4Q,KAAH,CAAS4nD,QAFuD;EAG1EH,UAAAA,SAAS,EAAEr4D,EAAE,CAAC4Q,KAAH,CAASynD,SAHsD;EAI1E8B,UAAAA,YAAY,EAAEn6D,EAAE,CAAC4Q,KAAH,CAASupD;EAJmD,SAAjE,CAAb;EAMA,YAAI8hB,GAAG,GAAGuB,MAAM,CAAC,CAAD,CAAhB;EACAvB,QAAAA,GAAG,CAACpkF,IAAJ,GAAW+0G,MAAM,CAACgB,cAAP,GAAwB,MAAxB,GAAiC92G,CAA5C;EAEAmlF,QAAAA,GAAG,CAAC9vE,EAAJ,CAAO,OAAP,EAAgBwgG,mBAAhB;EAEA,YAAIkB,IAAI,GAAG5xB,GAAG,CAACvwB,QAAJ,CAAalrC,IAAb,IAAqBy7D,GAAG,CAACvwB,QAAJ,CAAalrC,IAAb,CAAkB,CAAlB,CAAhC;EACA,YAAIstF,KAAK,GAAGD,IAAI,GAAG7tG,EAAE,CAACujG,IAAH,CAAQ1yF,MAAR,GAAiB,CAAxB,GAA4B,EAAxC;EACAorE,QAAAA,GAAG,CAAC/xE,QAAJ,CAAaa,GAAb,CAAiB/K,EAAE,CAACujG,IAAH,CAAQ1yF,MAAR,GAAiB,CAAjB,GAAqBg9F,IAAI,GAAG,GAA7C,EAAkD7tG,EAAE,CAACujG,IAAH,CAAQn5F,MAAR,GAAiB,CAAnE,EAAsE,CAAtE;EACAmjG,QAAAA,YAAY,GAAGh3G,IAAI,CAACsC,GAAL,CAAS00G,YAAT,EAAuBO,KAAvB,CAAf;EAEA,YAAIC,OAAO,GAAG;EACV3jG,UAAAA,MAAM,EAAEpK,EAAE,CAACujG,IAAH,CAAQn5F;EADN,SAAd;;EAGA,YAAIpK,EAAE,CAAC6sB,SAAH,IAAgB,GAApB,EAAyB;EACrB,cAAI/a,CAAC,GAAG9R,EAAE,CAACujG,IAAH,CAAQn5F,MAAZ,GAAqBq2E,UAAzB,EAAqC;EACjC,gBAAI5uE,CAAC,GAAG2uE,SAAR,EAAmB;EACfitB,cAAAA,MAAM,GAAG,IAAT;EACA;EACH;EACD57F,YAAAA,CAAC,IAAI07F,YAAL;EACAz7F,YAAAA,CAAC,GAAG,CAAJ;EACH;EACDi8F,UAAAA,OAAO,CAACl8F,CAAR,GAAYA,CAAZ;EACAk8F,UAAAA,OAAO,CAACj8F,CAAR,GAAYA,CAAZ;EACAA,UAAAA,CAAC,IAAI9R,EAAE,CAACujG,IAAH,CAAQn5F,MAAb;EACAA,UAAAA,MAAM,GAAG7T,IAAI,CAACsC,GAAL,CAASuR,MAAT,EAAiB0H,CAAjB,CAAT;EACH,SAbD,MAaO;EACH;EACA,cAAID,CAAC,GAAGi8F,KAAJ,GAAYttB,SAAhB,EAA2B;EACvB,gBAAIxgF,EAAE,CAACujG,IAAH,CAAQn5F,MAAR,IAAkBojG,IAAI,GAAG,CAAzB,IAA8B/sB,UAAlC,EAA8C;EAC1CgtB,cAAAA,MAAM,GAAG,IAAT;EACA;EACH;;EACD57F,YAAAA,CAAC,GAAG,CAAJ;EACA27F,YAAAA,IAAI;EACP;EAEDO,UAAAA,OAAO,CAACl8F,CAAR,GAAYA,CAAZ;EACAk8F,UAAAA,OAAO,CAACj8F,CAAR,GAAY9R,EAAE,CAACujG,IAAH,CAAQn5F,MAAR,IAAkBojG,IAAI,GAAG,CAAzB,CAAZ;EACA37F,UAAAA,CAAC,IAAIi8F,KAAL;EACA3jG,UAAAA,KAAK,GAAG5T,IAAI,CAACsC,GAAL,CAASsR,KAAT,EAAgB0H,CAAhB,CAAR;EACH;EAGD;EACA;EACA;;EAEA,YAAIgoE,MAAM,GAAG6H,GAAG,CAACv9C,QAAJ,CAAa;EACtBtsC,UAAAA,IAAI,EAAE+0G,MAAM,CAACgB,cAAP,GAAwB92G;EADR,SAAb,CAAb;;EAGA+iF,QAAAA,MAAM,CAAC3vE,QAAP,CAAgBa,GAAhB,CAAoBgjG,OAAO,CAACl8F,CAA5B,EAA+Bk8F,OAAO,CAACj8F,CAAvC,EAA0C,CAA1C;;EACA+nE,QAAAA,MAAM,CAACnuB,QAAP,CAAgB9mB,IAAhB,GAAuBvuC,GAAvB;;EACAwjF,QAAAA,MAAM,CAAC77D,GAAP,CAAW2vF,KAAX;;EACA9zB,QAAAA,MAAM,CAAC77D,GAAP,CAAWi+D,GAAX;;EACAj8E,QAAAA,EAAE,CAAC2hC,KAAH,CAAS3jB,GAAT,CAAa67D,MAAb,EAzEgC;EA4EhC;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EAEA;;EAEA,YAAIxjF,GAAG,CAACsZ,OAAR,EAAiB;EACb3P,UAAAA,EAAE,CAACujG,IAAH,CAAQuJ,SAAR,CAAkBz2G,GAAlB;EACH,SAFD,MAEO;EACH2J,UAAAA,EAAE,CAACujG,IAAH,CAAQwJ,WAAR,CAAoB12G,GAApB;EACH,SA/F+B;;EAkGnC,OAlGD;;EAoGA,UAAI,KAAKw2B,SAAL,IAAkB,GAAtB,EAA2B;EACvB7sB,QAAAA,EAAE,CAACmK,KAAH,GAAWA,KAAX;EACAnK,QAAAA,EAAE,CAACoK,MAAH,GAAYpK,EAAE,CAACujG,IAAH,CAAQn5F,MAAR,GAAiBojG,IAA7B;EACH,OAHD,MAGO;EACHxtG,QAAAA,EAAE,CAACmK,KAAH,GAAW0H,CAAC,GAAG07F,YAAf;EACAvtG,QAAAA,EAAE,CAACoK,MAAH,GAAYA,MAAZ;EACH;;EAED,WAAKg3E,KAAL,CAAWuH,UAAX,CAAsB3qE,GAAtB,CAA0B,KAAK2jB,KAA/B,EA9HK;EAgIL;;EACH;;;sCAEeh7B,GAAG;EACf,UAAIi+B,IAAI,GAAGj+B,CAAC,CAAClM,MAAF,CAAS8Z,MAAT,CAAgBm3C,QAAhB,CAAyB9mB,IAApC;;EACA,UAAI,KAAKgF,IAAL,KAAc,OAAlB,EAA2B;EACvB31C,QAAAA,CAAC,CAACiD,IAAF,CAAO,KAAKmH,IAAZ,EAAkB,UAAA1F,IAAI,EAAI;EACtB,cAAIA,IAAI,CAAC2H,GAAL,KAAaskC,IAAI,CAACtkC,GAAtB,EAA2B;EACvB3H,YAAAA,IAAI,CAACgX,OAAL,GAAe,KAAf;EACH,WAFD,MAEO;EACHhX,YAAAA,IAAI,CAACgX,OAAL,GAAe,IAAf;EACH;EACJ,SAND;EAOH;;EAED,UAAI,KAAKi6B,IAAL,KAAc,UAAlB,EAA8B;EAC1BhF,QAAAA,IAAI,CAACj1B,OAAL,GAAe,CAACi1B,IAAI,CAACj1B,OAArB;EACH;;EAED,UAAIi1B,IAAJ,EAAU;EACP;EACC,aAAKw8C,KAAL,CAAW18C,IAAX,CAAgB;EAAE9lC,UAAAA,IAAI,EAAE,cAAR;EAAwBP,UAAAA,IAAI,EAAEumC;EAA9B,SAAhB;EACH;EAEJ;;;8BACOjD,OAAO;EACXA,MAAAA,KAAK,GAAGA,KAAK,IAAI,KAAKA,KAAtB;EACA,WAAKA,KAAL,CAAWrX,QAAX,CAAoB,UAAAj0B,GAAG,EAAI;EACvB,YAAIA,GAAG,CAACwB,IAAJ,CAASlC,OAAT,CAAiBi3G,MAAM,CAACgB,cAAxB,MAA4C,CAAC,CAAjD,EAAoD;EAChDv3G,UAAAA,GAAG,CAACuV,GAAJ,CAAQ,OAAR,EAAiB+gG,mBAAjB;EACH;EACJ,OAJD;;EAKA,0EAAchrE,KAAd;EAEH;;;;IA/TgBsiD;;EAiUrB2oB,MAAM,CAACgB,cAAP,GAAwB,eAAxB;;MCjUqBI;;;;;EACjB,iBAAYrO,OAAZ,EAAqB1F,KAArB,EAA4B;EAAA;;EAAA;;EAExB,+EAAM0F,OAAO,CAAC3G,SAAd,EAAwB2G,OAAxB;EAEA,UAAK9nG,IAAL,GAAY,OAAZ;EACA,UAAKiT,MAAL,GAAcmvF,KAAK,IAAI,EAAvB;EALwB;EAM3B;;;;0BAEGnvF,QAAQ;EACR,WAAKA,MAAL,GAAcA,MAAd;EACA,aAAO,KAAKA,MAAZ;EACH;;;0BAEGxK,KAAK;EACL,UAAIwK,MAAM,GAAG,KAAKA,MAAlB;;EACA,UAAI,CAAC7W,CAAC,CAAC6B,OAAF,CAAUgV,MAAV,CAAL,EAAwB;EACpBA,QAAAA,MAAM,GAAG,CAACA,MAAD,CAAT;EACH;EACD,aAAOA,MAAP;EACH;;;8BAEOA,QAAQ;EACZ,UAAI,CAACA,MAAL,EAAa;EACTA,QAAAA,MAAM,GAAG,EAAT;EACH;;EACD,WAAK,IAAIhU,CAAC,GAAG,CAAR,EAAWgM,CAAC,GAAG,KAAKgI,MAAL,CAAYlU,MAAhC,EAAwCE,CAAC,GAAGgM,CAA5C,EAA+ChM,CAAC,EAAhD,EAAoD;EAChD,YAAIgU,MAAM,CAAChU,CAAD,CAAV,EAAe;EACXgU,UAAAA,MAAM,CAAChU,CAAD,CAAN,GAAY,KAAKgU,MAAL,CAAYhU,CAAZ,CAAZ;EACH,SAFD,MAEO;EACHgU,UAAAA,MAAM,CAACpW,IAAP,CAAY,KAAKoW,MAAL,CAAYhU,CAAZ,CAAZ;EACH;EACJ;EAED,aAAOgU,MAAP;EACH;;;;IAnC8Bm5E;;ECqBnC2X,MAAM,CAACjuF,iBAAP,CAAyBkrF,OAAzB,EAAkC,OAAlC,EAA2C,CAA3C;;EAGA+C,MAAM,CAACjuF,iBAAP,CAAyBquF,GAAzB,EAA8B,OAA9B,EAAuC,KAAvC,EAA8C,CAA9C;EACAJ,MAAM,CAACjuF,iBAAP,CAAyBuvF,OAAzB,EAAkC,OAAlC,EAA2C,SAA3C,EAAsD,CAAtD;EACAtB,MAAM,CAACjuF,iBAAP,CAAyBqwF,IAAzB,EAA8B,OAA9B,EAAsC,MAAtC,EAA6C,CAA7C;EAEApC,MAAM,CAACjuF,iBAAP,CAAyBy0F,GAAzB,EAA8B,QAA9B,EAAwC,KAAxC,EAA+C,CAA/C;EACAxG,MAAM,CAACjuF,iBAAP,CAAyB4mD,MAAzB,EAA+B,QAA/B,EAAyC,MAAzC,EAAiD,CAAjD;EACAqnC,MAAM,CAACjuF,iBAAP,CAAyB82F,IAAzB,EAA+B,QAA/B,EAAyC,MAAzC,EAAiD,CAAjD;EACA7I,MAAM,CAACjuF,iBAAP,CAAyBq3F,GAAzB,EAA8B,QAA9B,EAAwC,KAAxC,EAA+C,CAA/C;EACApJ,MAAM,CAACjuF,iBAAP,CAAyB46F,OAAzB,EAAkC,QAAlC,EAA4C,SAA5C,EAAuD,CAAvD;EAIA3M,MAAM,CAACjuF,iBAAP,CAAyBqgG,KAAzB,EAAgC,OAAhC,EAAyC,CAAzC;EACApS,MAAM,CAACjuF,iBAAP,CAAyBw8F,IAAzB,EAA+B,MAA/B,EAAuC,CAAvC;EACAvO,MAAM,CAACjuF,iBAAP,CAAyBg+F,SAAzB,EAAoC,WAApC,EAAiD,CAAjD;EACA/P,MAAM,CAACjuF,iBAAP,CAAyBi/F,MAAzB,EAAiC,QAAjC,EAA2C,CAA3C;EAMA;;EACA,IAAIqB,YAAY,GAAG,EAAnB;;EACA,IAAIA,YAAY,IAAIA,YAAY,CAACr3G,MAAjC,EAAyC;EACrCglG,EAAAA,MAAM,CAACxvF,cAAP,CAAsB6hG,YAAtB;EACH;;EAGD,IAAIC,MAAM,GAAG;EACT5yG,EAAAA,OAAO,EAAE;EADA,CAAb;;EAIA,KAAK,IAAIyD,CAAT,IAAc68F,MAAd,EAAsB;EAClBsS,EAAAA,MAAM,CAACnvG,CAAD,CAAN,GAAY68F,MAAM,CAAC78F,CAAD,CAAlB;EACH;;;;;;;;"}